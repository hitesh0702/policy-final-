var xI=Object.defineProperty;var U3=i=>{throw TypeError(i)};var bI=(i,t,e)=>t in i?xI(i,t,{enumerable:!0,configurable:!0,writable:!0,value:e}):i[t]=e;var Kt=(i,t,e)=>bI(i,typeof t!="symbol"?t+"":t,e),ow=(i,t,e)=>t.has(i)||U3("Cannot "+e);var p=(i,t,e)=>(ow(i,t,"read from private field"),e?e.call(i):t.get(i)),z=(i,t,e)=>t.has(i)?U3("Cannot add the same private member more than once"):t instanceof WeakSet?t.add(i):t.set(i,e),k=(i,t,e,n)=>(ow(i,t,"write to private field"),n?n.call(i,e):t.set(i,e),e),$=(i,t,e)=>(ow(i,t,"access private method"),e);var Nr=(i,t,e,n)=>({set _(r){k(i,t,r,e)},get _(){return p(i,t,n)}});(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))n(r);new MutationObserver(r=>{for(const s of r)if(s.type==="childList")for(const a of s.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&n(a)}).observe(document,{childList:!0,subtree:!0});function e(r){const s={};return r.integrity&&(s.integrity=r.integrity),r.referrerPolicy&&(s.referrerPolicy=r.referrerPolicy),r.crossOrigin==="use-credentials"?s.credentials="include":r.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function n(r){if(r.ep)return;r.ep=!0;const s=e(r);fetch(r.href,s)}})();var aw=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function qE(i){return i&&i.__esModule&&Object.prototype.hasOwnProperty.call(i,"default")?i.default:i}function AI(i){if(Object.prototype.hasOwnProperty.call(i,"__esModule"))return i;var t=i.default;if(typeof t=="function"){var e=function n(){return this instanceof n?Reflect.construct(t,arguments,this.constructor):t.apply(this,arguments)};e.prototype=t.prototype}else e={};return Object.defineProperty(e,"__esModule",{value:!0}),Object.keys(i).forEach(function(n){var r=Object.getOwnPropertyDescriptor(i,n);Object.defineProperty(e,n,r.get?r:{enumerable:!0,get:function(){return i[n]}})}),e}var lw={exports:{}},wv={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var H3;function _I(){if(H3)return wv;H3=1;var i=Symbol.for("react.transitional.element"),t=Symbol.for("react.fragment");function e(n,r,s){var a=null;if(s!==void 0&&(a=""+s),r.key!==void 0&&(a=""+r.key),"key"in r){s={};for(var u in r)u!=="key"&&(s[u]=r[u])}else s=r;return r=s.ref,{$$typeof:i,type:n,key:a,ref:r!==void 0?r:null,props:s}}return wv.Fragment=t,wv.jsx=e,wv.jsxs=e,wv}var q3;function wI(){return q3||(q3=1,lw.exports=_I()),lw.exports}var Pt=wI(),uw={exports:{}},qe={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var z3;function SI(){if(z3)return qe;z3=1;var i=Symbol.for("react.transitional.element"),t=Symbol.for("react.portal"),e=Symbol.for("react.fragment"),n=Symbol.for("react.strict_mode"),r=Symbol.for("react.profiler"),s=Symbol.for("react.consumer"),a=Symbol.for("react.context"),u=Symbol.for("react.forward_ref"),c=Symbol.for("react.suspense"),h=Symbol.for("react.memo"),f=Symbol.for("react.lazy"),g=Symbol.for("react.activity"),m=Symbol.iterator;function y(K){return K===null||typeof K!="object"?null:(K=m&&K[m]||K["@@iterator"],typeof K=="function"?K:null)}var w={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},S=Object.assign,T={};function C(K,P,Y){this.props=K,this.context=P,this.refs=T,this.updater=Y||w}C.prototype.isReactComponent={},C.prototype.setState=function(K,P){if(typeof K!="object"&&typeof K!="function"&&K!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,K,P,"setState")},C.prototype.forceUpdate=function(K){this.updater.enqueueForceUpdate(this,K,"forceUpdate")};function D(){}D.prototype=C.prototype;function R(K,P,Y){this.props=K,this.context=P,this.refs=T,this.updater=Y||w}var I=R.prototype=new D;I.constructor=R,S(I,C.prototype),I.isPureReactComponent=!0;var F=Array.isArray;function q(){}var U={H:null,A:null,T:null,S:null},V=Object.prototype.hasOwnProperty;function tt(K,P,Y){var j=Y.ref;return{$$typeof:i,type:K,key:P,ref:j!==void 0?j:null,props:Y}}function J(K,P){return tt(K.type,P,K.props)}function O(K){return typeof K=="object"&&K!==null&&K.$$typeof===i}function G(K){var P={"=":"=0",":":"=2"};return"$"+K.replace(/[=:]/g,function(Y){return P[Y]})}var et=/\/+/g;function st(K,P){return typeof K=="object"&&K!==null&&K.key!=null?G(""+K.key):P.toString(36)}function pt(K){switch(K.status){case"fulfilled":return K.value;case"rejected":throw K.reason;default:switch(typeof K.status=="string"?K.then(q,q):(K.status="pending",K.then(function(P){K.status==="pending"&&(K.status="fulfilled",K.value=P)},function(P){K.status==="pending"&&(K.status="rejected",K.reason=P)})),K.status){case"fulfilled":return K.value;case"rejected":throw K.reason}}throw K}function nt(K,P,Y,j,ut){var ft=typeof K;(ft==="undefined"||ft==="boolean")&&(K=null);var mt=!1;if(K===null)mt=!0;else switch(ft){case"bigint":case"string":case"number":mt=!0;break;case"object":switch(K.$$typeof){case i:case t:mt=!0;break;case f:return mt=K._init,nt(mt(K._payload),P,Y,j,ut)}}if(mt)return ut=ut(K),mt=j===""?"."+st(K,0):j,F(ut)?(Y="",mt!=null&&(Y=mt.replace(et,"$&/")+"/"),nt(ut,P,Y,"",function(Xt){return Xt})):ut!=null&&(O(ut)&&(ut=J(ut,Y+(ut.key==null||K&&K.key===ut.key?"":(""+ut.key).replace(et,"$&/")+"/")+mt)),P.push(ut)),1;mt=0;var At=j===""?".":j+":";if(F(K))for(var Tt=0;Tt<K.length;Tt++)j=K[Tt],ft=At+st(j,Tt),mt+=nt(j,P,Y,ft,ut);else if(Tt=y(K),typeof Tt=="function")for(K=Tt.call(K),Tt=0;!(j=K.next()).done;)j=j.value,ft=At+st(j,Tt++),mt+=nt(j,P,Y,ft,ut);else if(ft==="object"){if(typeof K.then=="function")return nt(pt(K),P,Y,j,ut);throw P=String(K),Error("Objects are not valid as a React child (found: "+(P==="[object Object]"?"object with keys {"+Object.keys(K).join(", ")+"}":P)+"). If you meant to render a collection of children, use an array instead.")}return mt}function at(K,P,Y){if(K==null)return K;var j=[],ut=0;return nt(K,j,"","",function(ft){return P.call(Y,ft,ut++)}),j}function ht(K){if(K._status===-1){var P=K._result;P=P(),P.then(function(Y){(K._status===0||K._status===-1)&&(K._status=1,K._result=Y)},function(Y){(K._status===0||K._status===-1)&&(K._status=2,K._result=Y)}),K._status===-1&&(K._status=0,K._result=P)}if(K._status===1)return K._result.default;throw K._result}var bt=typeof reportError=="function"?reportError:function(K){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var P=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof K=="object"&&K!==null&&typeof K.message=="string"?String(K.message):String(K),error:K});if(!window.dispatchEvent(P))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",K);return}console.error(K)},St={map:at,forEach:function(K,P,Y){at(K,function(){P.apply(this,arguments)},Y)},count:function(K){var P=0;return at(K,function(){P++}),P},toArray:function(K){return at(K,function(P){return P})||[]},only:function(K){if(!O(K))throw Error("React.Children.only expected to receive a single React element child.");return K}};return qe.Activity=g,qe.Children=St,qe.Component=C,qe.Fragment=e,qe.Profiler=r,qe.PureComponent=R,qe.StrictMode=n,qe.Suspense=c,qe.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=U,qe.__COMPILER_RUNTIME={__proto__:null,c:function(K){return U.H.useMemoCache(K)}},qe.cache=function(K){return function(){return K.apply(null,arguments)}},qe.cacheSignal=function(){return null},qe.cloneElement=function(K,P,Y){if(K==null)throw Error("The argument must be a React element, but you passed "+K+".");var j=S({},K.props),ut=K.key;if(P!=null)for(ft in P.key!==void 0&&(ut=""+P.key),P)!V.call(P,ft)||ft==="key"||ft==="__self"||ft==="__source"||ft==="ref"&&P.ref===void 0||(j[ft]=P[ft]);var ft=arguments.length-2;if(ft===1)j.children=Y;else if(1<ft){for(var mt=Array(ft),At=0;At<ft;At++)mt[At]=arguments[At+2];j.children=mt}return tt(K.type,ut,j)},qe.createContext=function(K){return K={$$typeof:a,_currentValue:K,_currentValue2:K,_threadCount:0,Provider:null,Consumer:null},K.Provider=K,K.Consumer={$$typeof:s,_context:K},K},qe.createElement=function(K,P,Y){var j,ut={},ft=null;if(P!=null)for(j in P.key!==void 0&&(ft=""+P.key),P)V.call(P,j)&&j!=="key"&&j!=="__self"&&j!=="__source"&&(ut[j]=P[j]);var mt=arguments.length-2;if(mt===1)ut.children=Y;else if(1<mt){for(var At=Array(mt),Tt=0;Tt<mt;Tt++)At[Tt]=arguments[Tt+2];ut.children=At}if(K&&K.defaultProps)for(j in mt=K.defaultProps,mt)ut[j]===void 0&&(ut[j]=mt[j]);return tt(K,ft,ut)},qe.createRef=function(){return{current:null}},qe.forwardRef=function(K){return{$$typeof:u,render:K}},qe.isValidElement=O,qe.lazy=function(K){return{$$typeof:f,_payload:{_status:-1,_result:K},_init:ht}},qe.memo=function(K,P){return{$$typeof:h,type:K,compare:P===void 0?null:P}},qe.startTransition=function(K){var P=U.T,Y={};U.T=Y;try{var j=K(),ut=U.S;ut!==null&&ut(Y,j),typeof j=="object"&&j!==null&&typeof j.then=="function"&&j.then(q,bt)}catch(ft){bt(ft)}finally{P!==null&&Y.types!==null&&(P.types=Y.types),U.T=P}},qe.unstable_useCacheRefresh=function(){return U.H.useCacheRefresh()},qe.use=function(K){return U.H.use(K)},qe.useActionState=function(K,P,Y){return U.H.useActionState(K,P,Y)},qe.useCallback=function(K,P){return U.H.useCallback(K,P)},qe.useContext=function(K){return U.H.useContext(K)},qe.useDebugValue=function(){},qe.useDeferredValue=function(K,P){return U.H.useDeferredValue(K,P)},qe.useEffect=function(K,P){return U.H.useEffect(K,P)},qe.useEffectEvent=function(K){return U.H.useEffectEvent(K)},qe.useId=function(){return U.H.useId()},qe.useImperativeHandle=function(K,P,Y){return U.H.useImperativeHandle(K,P,Y)},qe.useInsertionEffect=function(K,P){return U.H.useInsertionEffect(K,P)},qe.useLayoutEffect=function(K,P){return U.H.useLayoutEffect(K,P)},qe.useMemo=function(K,P){return U.H.useMemo(K,P)},qe.useOptimistic=function(K,P){return U.H.useOptimistic(K,P)},qe.useReducer=function(K,P,Y){return U.H.useReducer(K,P,Y)},qe.useRef=function(K){return U.H.useRef(K)},qe.useState=function(K){return U.H.useState(K)},qe.useSyncExternalStore=function(K,P,Y){return U.H.useSyncExternalStore(K,P,Y)},qe.useTransition=function(){return U.H.useTransition()},qe.version="19.2.3",qe}var G3;function zE(){return G3||(G3=1,uw.exports=SI()),uw.exports}var Ut=zE();const EI=qE(Ut);var cw={exports:{}},Sv={},hw={exports:{}},fw={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var V3;function CI(){return V3||(V3=1,(function(i){function t(nt,at){var ht=nt.length;nt.push(at);t:for(;0<ht;){var bt=ht-1>>>1,St=nt[bt];if(0<r(St,at))nt[bt]=at,nt[ht]=St,ht=bt;else break t}}function e(nt){return nt.length===0?null:nt[0]}function n(nt){if(nt.length===0)return null;var at=nt[0],ht=nt.pop();if(ht!==at){nt[0]=ht;t:for(var bt=0,St=nt.length,K=St>>>1;bt<K;){var P=2*(bt+1)-1,Y=nt[P],j=P+1,ut=nt[j];if(0>r(Y,ht))j<St&&0>r(ut,Y)?(nt[bt]=ut,nt[j]=ht,bt=j):(nt[bt]=Y,nt[P]=ht,bt=P);else if(j<St&&0>r(ut,ht))nt[bt]=ut,nt[j]=ht,bt=j;else break t}}return at}function r(nt,at){var ht=nt.sortIndex-at.sortIndex;return ht!==0?ht:nt.id-at.id}if(i.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var s=performance;i.unstable_now=function(){return s.now()}}else{var a=Date,u=a.now();i.unstable_now=function(){return a.now()-u}}var c=[],h=[],f=1,g=null,m=3,y=!1,w=!1,S=!1,T=!1,C=typeof setTimeout=="function"?setTimeout:null,D=typeof clearTimeout=="function"?clearTimeout:null,R=typeof setImmediate<"u"?setImmediate:null;function I(nt){for(var at=e(h);at!==null;){if(at.callback===null)n(h);else if(at.startTime<=nt)n(h),at.sortIndex=at.expirationTime,t(c,at);else break;at=e(h)}}function F(nt){if(S=!1,I(nt),!w)if(e(c)!==null)w=!0,q||(q=!0,G());else{var at=e(h);at!==null&&pt(F,at.startTime-nt)}}var q=!1,U=-1,V=5,tt=-1;function J(){return T?!0:!(i.unstable_now()-tt<V)}function O(){if(T=!1,q){var nt=i.unstable_now();tt=nt;var at=!0;try{t:{w=!1,S&&(S=!1,D(U),U=-1),y=!0;var ht=m;try{e:{for(I(nt),g=e(c);g!==null&&!(g.expirationTime>nt&&J());){var bt=g.callback;if(typeof bt=="function"){g.callback=null,m=g.priorityLevel;var St=bt(g.expirationTime<=nt);if(nt=i.unstable_now(),typeof St=="function"){g.callback=St,I(nt),at=!0;break e}g===e(c)&&n(c),I(nt)}else n(c);g=e(c)}if(g!==null)at=!0;else{var K=e(h);K!==null&&pt(F,K.startTime-nt),at=!1}}break t}finally{g=null,m=ht,y=!1}at=void 0}}finally{at?G():q=!1}}}var G;if(typeof R=="function")G=function(){R(O)};else if(typeof MessageChannel<"u"){var et=new MessageChannel,st=et.port2;et.port1.onmessage=O,G=function(){st.postMessage(null)}}else G=function(){C(O,0)};function pt(nt,at){U=C(function(){nt(i.unstable_now())},at)}i.unstable_IdlePriority=5,i.unstable_ImmediatePriority=1,i.unstable_LowPriority=4,i.unstable_NormalPriority=3,i.unstable_Profiling=null,i.unstable_UserBlockingPriority=2,i.unstable_cancelCallback=function(nt){nt.callback=null},i.unstable_forceFrameRate=function(nt){0>nt||125<nt?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):V=0<nt?Math.floor(1e3/nt):5},i.unstable_getCurrentPriorityLevel=function(){return m},i.unstable_next=function(nt){switch(m){case 1:case 2:case 3:var at=3;break;default:at=m}var ht=m;m=at;try{return nt()}finally{m=ht}},i.unstable_requestPaint=function(){T=!0},i.unstable_runWithPriority=function(nt,at){switch(nt){case 1:case 2:case 3:case 4:case 5:break;default:nt=3}var ht=m;m=nt;try{return at()}finally{m=ht}},i.unstable_scheduleCallback=function(nt,at,ht){var bt=i.unstable_now();switch(typeof ht=="object"&&ht!==null?(ht=ht.delay,ht=typeof ht=="number"&&0<ht?bt+ht:bt):ht=bt,nt){case 1:var St=-1;break;case 2:St=250;break;case 5:St=1073741823;break;case 4:St=1e4;break;default:St=5e3}return St=ht+St,nt={id:f++,callback:at,priorityLevel:nt,startTime:ht,expirationTime:St,sortIndex:-1},ht>bt?(nt.sortIndex=ht,t(h,nt),e(c)===null&&nt===e(h)&&(S?(D(U),U=-1):S=!0,pt(F,ht-bt))):(nt.sortIndex=St,t(c,nt),w||y||(w=!0,q||(q=!0,G()))),nt},i.unstable_shouldYield=J,i.unstable_wrapCallback=function(nt){var at=m;return function(){var ht=m;m=at;try{return nt.apply(this,arguments)}finally{m=ht}}}})(fw)),fw}var Y3;function TI(){return Y3||(Y3=1,hw.exports=CI()),hw.exports}var dw={exports:{}},Ns={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var $3;function NI(){if($3)return Ns;$3=1;var i=zE();function t(c){var h="https://react.dev/errors/"+c;if(1<arguments.length){h+="?args[]="+encodeURIComponent(arguments[1]);for(var f=2;f<arguments.length;f++)h+="&args[]="+encodeURIComponent(arguments[f])}return"Minified React error #"+c+"; visit "+h+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function e(){}var n={d:{f:e,r:function(){throw Error(t(522))},D:e,C:e,L:e,m:e,X:e,S:e,M:e},p:0,findDOMNode:null},r=Symbol.for("react.portal");function s(c,h,f){var g=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:r,key:g==null?null:""+g,children:c,containerInfo:h,implementation:f}}var a=i.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function u(c,h){if(c==="font")return"";if(typeof h=="string")return h==="use-credentials"?h:""}return Ns.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=n,Ns.createPortal=function(c,h){var f=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!h||h.nodeType!==1&&h.nodeType!==9&&h.nodeType!==11)throw Error(t(299));return s(c,h,null,f)},Ns.flushSync=function(c){var h=a.T,f=n.p;try{if(a.T=null,n.p=2,c)return c()}finally{a.T=h,n.p=f,n.d.f()}},Ns.preconnect=function(c,h){typeof c=="string"&&(h?(h=h.crossOrigin,h=typeof h=="string"?h==="use-credentials"?h:"":void 0):h=null,n.d.C(c,h))},Ns.prefetchDNS=function(c){typeof c=="string"&&n.d.D(c)},Ns.preinit=function(c,h){if(typeof c=="string"&&h&&typeof h.as=="string"){var f=h.as,g=u(f,h.crossOrigin),m=typeof h.integrity=="string"?h.integrity:void 0,y=typeof h.fetchPriority=="string"?h.fetchPriority:void 0;f==="style"?n.d.S(c,typeof h.precedence=="string"?h.precedence:void 0,{crossOrigin:g,integrity:m,fetchPriority:y}):f==="script"&&n.d.X(c,{crossOrigin:g,integrity:m,fetchPriority:y,nonce:typeof h.nonce=="string"?h.nonce:void 0})}},Ns.preinitModule=function(c,h){if(typeof c=="string")if(typeof h=="object"&&h!==null){if(h.as==null||h.as==="script"){var f=u(h.as,h.crossOrigin);n.d.M(c,{crossOrigin:f,integrity:typeof h.integrity=="string"?h.integrity:void 0,nonce:typeof h.nonce=="string"?h.nonce:void 0})}}else h==null&&n.d.M(c)},Ns.preload=function(c,h){if(typeof c=="string"&&typeof h=="object"&&h!==null&&typeof h.as=="string"){var f=h.as,g=u(f,h.crossOrigin);n.d.L(c,f,{crossOrigin:g,integrity:typeof h.integrity=="string"?h.integrity:void 0,nonce:typeof h.nonce=="string"?h.nonce:void 0,type:typeof h.type=="string"?h.type:void 0,fetchPriority:typeof h.fetchPriority=="string"?h.fetchPriority:void 0,referrerPolicy:typeof h.referrerPolicy=="string"?h.referrerPolicy:void 0,imageSrcSet:typeof h.imageSrcSet=="string"?h.imageSrcSet:void 0,imageSizes:typeof h.imageSizes=="string"?h.imageSizes:void 0,media:typeof h.media=="string"?h.media:void 0})}},Ns.preloadModule=function(c,h){if(typeof c=="string")if(h){var f=u(h.as,h.crossOrigin);n.d.m(c,{as:typeof h.as=="string"&&h.as!=="script"?h.as:void 0,crossOrigin:f,integrity:typeof h.integrity=="string"?h.integrity:void 0})}else n.d.m(c)},Ns.requestFormReset=function(c){n.d.r(c)},Ns.unstable_batchedUpdates=function(c,h){return c(h)},Ns.useFormState=function(c,h,f){return a.H.useFormState(c,h,f)},Ns.useFormStatus=function(){return a.H.useHostTransitionStatus()},Ns.version="19.2.3",Ns}var W3;function RI(){if(W3)return dw.exports;W3=1;function i(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(i)}catch(t){console.error(t)}}return i(),dw.exports=NI(),dw.exports}/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var X3;function DI(){if(X3)return Sv;X3=1;var i=TI(),t=zE(),e=RI();function n(o){var l="https://react.dev/errors/"+o;if(1<arguments.length){l+="?args[]="+encodeURIComponent(arguments[1]);for(var d=2;d<arguments.length;d++)l+="&args[]="+encodeURIComponent(arguments[d])}return"Minified React error #"+o+"; visit "+l+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function r(o){return!(!o||o.nodeType!==1&&o.nodeType!==9&&o.nodeType!==11)}function s(o){var l=o,d=o;if(o.alternate)for(;l.return;)l=l.return;else{o=l;do l=o,(l.flags&4098)!==0&&(d=l.return),o=l.return;while(o)}return l.tag===3?d:null}function a(o){if(o.tag===13){var l=o.memoizedState;if(l===null&&(o=o.alternate,o!==null&&(l=o.memoizedState)),l!==null)return l.dehydrated}return null}function u(o){if(o.tag===31){var l=o.memoizedState;if(l===null&&(o=o.alternate,o!==null&&(l=o.memoizedState)),l!==null)return l.dehydrated}return null}function c(o){if(s(o)!==o)throw Error(n(188))}function h(o){var l=o.alternate;if(!l){if(l=s(o),l===null)throw Error(n(188));return l!==o?null:o}for(var d=o,v=l;;){var _=d.return;if(_===null)break;var N=_.alternate;if(N===null){if(v=_.return,v!==null){d=v;continue}break}if(_.child===N.child){for(N=_.child;N;){if(N===d)return c(_),o;if(N===v)return c(_),l;N=N.sibling}throw Error(n(188))}if(d.return!==v.return)d=_,v=N;else{for(var H=!1,rt=_.child;rt;){if(rt===d){H=!0,d=_,v=N;break}if(rt===v){H=!0,v=_,d=N;break}rt=rt.sibling}if(!H){for(rt=N.child;rt;){if(rt===d){H=!0,d=N,v=_;break}if(rt===v){H=!0,v=N,d=_;break}rt=rt.sibling}if(!H)throw Error(n(189))}}if(d.alternate!==v)throw Error(n(190))}if(d.tag!==3)throw Error(n(188));return d.stateNode.current===d?o:l}function f(o){var l=o.tag;if(l===5||l===26||l===27||l===6)return o;for(o=o.child;o!==null;){if(l=f(o),l!==null)return l;o=o.sibling}return null}var g=Object.assign,m=Symbol.for("react.element"),y=Symbol.for("react.transitional.element"),w=Symbol.for("react.portal"),S=Symbol.for("react.fragment"),T=Symbol.for("react.strict_mode"),C=Symbol.for("react.profiler"),D=Symbol.for("react.consumer"),R=Symbol.for("react.context"),I=Symbol.for("react.forward_ref"),F=Symbol.for("react.suspense"),q=Symbol.for("react.suspense_list"),U=Symbol.for("react.memo"),V=Symbol.for("react.lazy"),tt=Symbol.for("react.activity"),J=Symbol.for("react.memo_cache_sentinel"),O=Symbol.iterator;function G(o){return o===null||typeof o!="object"?null:(o=O&&o[O]||o["@@iterator"],typeof o=="function"?o:null)}var et=Symbol.for("react.client.reference");function st(o){if(o==null)return null;if(typeof o=="function")return o.$$typeof===et?null:o.displayName||o.name||null;if(typeof o=="string")return o;switch(o){case S:return"Fragment";case C:return"Profiler";case T:return"StrictMode";case F:return"Suspense";case q:return"SuspenseList";case tt:return"Activity"}if(typeof o=="object")switch(o.$$typeof){case w:return"Portal";case R:return o.displayName||"Context";case D:return(o._context.displayName||"Context")+".Consumer";case I:var l=o.render;return o=o.displayName,o||(o=l.displayName||l.name||"",o=o!==""?"ForwardRef("+o+")":"ForwardRef"),o;case U:return l=o.displayName||null,l!==null?l:st(o.type)||"Memo";case V:l=o._payload,o=o._init;try{return st(o(l))}catch{}}return null}var pt=Array.isArray,nt=t.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,at=e.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,ht={pending:!1,data:null,method:null,action:null},bt=[],St=-1;function K(o){return{current:o}}function P(o){0>St||(o.current=bt[St],bt[St]=null,St--)}function Y(o,l){St++,bt[St]=o.current,o.current=l}var j=K(null),ut=K(null),ft=K(null),mt=K(null);function At(o,l){switch(Y(ft,l),Y(ut,o),Y(j,null),l.nodeType){case 9:case 11:o=(o=l.documentElement)&&(o=o.namespaceURI)?l3(o):0;break;default:if(o=l.tagName,l=l.namespaceURI)l=l3(l),o=u3(l,o);else switch(o){case"svg":o=1;break;case"math":o=2;break;default:o=0}}P(j),Y(j,o)}function Tt(){P(j),P(ut),P(ft)}function Xt(o){o.memoizedState!==null&&Y(mt,o);var l=j.current,d=u3(l,o.type);l!==d&&(Y(ut,o),Y(j,d))}function $t(o){ut.current===o&&(P(j),P(ut)),mt.current===o&&(P(mt),xv._currentValue=ht)}var ee,Qt;function le(o){if(ee===void 0)try{throw Error()}catch(d){var l=d.stack.trim().match(/\n( *(at )?)/);ee=l&&l[1]||"",Qt=-1<d.stack.indexOf(`
    at`)?" (<anonymous>)":-1<d.stack.indexOf("@")?"@unknown:0:0":""}return`
`+ee+o+Qt}var Bt=!1;function dt(o,l){if(!o||Bt)return"";Bt=!0;var d=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var v={DetermineComponentFrameRoot:function(){try{if(l){var Yt=function(){throw Error()};if(Object.defineProperty(Yt.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(Yt,[])}catch(kt){var It=kt}Reflect.construct(o,[],Yt)}else{try{Yt.call()}catch(kt){It=kt}o.call(Yt.prototype)}}else{try{throw Error()}catch(kt){It=kt}(Yt=o())&&typeof Yt.catch=="function"&&Yt.catch(function(){})}}catch(kt){if(kt&&It&&typeof kt.stack=="string")return[kt.stack,It.stack]}return[null,null]}};v.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var _=Object.getOwnPropertyDescriptor(v.DetermineComponentFrameRoot,"name");_&&_.configurable&&Object.defineProperty(v.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var N=v.DetermineComponentFrameRoot(),H=N[0],rt=N[1];if(H&&rt){var gt=H.split(`
`),Mt=rt.split(`
`);for(_=v=0;v<gt.length&&!gt[v].includes("DetermineComponentFrameRoot");)v++;for(;_<Mt.length&&!Mt[_].includes("DetermineComponentFrameRoot");)_++;if(v===gt.length||_===Mt.length)for(v=gt.length-1,_=Mt.length-1;1<=v&&0<=_&&gt[v]!==Mt[_];)_--;for(;1<=v&&0<=_;v--,_--)if(gt[v]!==Mt[_]){if(v!==1||_!==1)do if(v--,_--,0>_||gt[v]!==Mt[_]){var Ht=`
`+gt[v].replace(" at new "," at ");return o.displayName&&Ht.includes("<anonymous>")&&(Ht=Ht.replace("<anonymous>",o.displayName)),Ht}while(1<=v&&0<=_);break}}}finally{Bt=!1,Error.prepareStackTrace=d}return(d=o?o.displayName||o.name:"")?le(d):""}function Le(o,l){switch(o.tag){case 26:case 27:case 5:return le(o.type);case 16:return le("Lazy");case 13:return o.child!==l&&l!==null?le("Suspense Fallback"):le("Suspense");case 19:return le("SuspenseList");case 0:case 15:return dt(o.type,!1);case 11:return dt(o.type.render,!1);case 1:return dt(o.type,!0);case 31:return le("Activity");default:return""}}function he(o){try{var l="",d=null;do l+=Le(o,d),d=o,o=o.return;while(o);return l}catch(v){return`
Error generating stack: `+v.message+`
`+v.stack}}var Jt=Object.prototype.hasOwnProperty,te=i.unstable_scheduleCallback,ne=i.unstable_cancelCallback,Zt=i.unstable_shouldYield,pe=i.unstable_requestPaint,ye=i.unstable_now,Oe=i.unstable_getCurrentPriorityLevel,ke=i.unstable_ImmediatePriority,Xe=i.unstable_UserBlockingPriority,mn=i.unstable_NormalPriority,Ee=i.unstable_LowPriority,Ye=i.unstable_IdlePriority,re=i.log,Ci=i.unstable_setDisableYieldValue,Ze=null,Vn=null;function nn(o){if(typeof re=="function"&&Ci(o),Vn&&typeof Vn.setStrictMode=="function")try{Vn.setStrictMode(Ze,o)}catch{}}var tn=Math.clz32?Math.clz32:cl,lo=Math.log,vn=Math.LN2;function cl(o){return o>>>=0,o===0?32:31-(lo(o)/vn|0)|0}var kn=256,Pr=262144,ns=4194304;function Cn(o){var l=o&42;if(l!==0)return l;switch(o&-o){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:return o&261888;case 262144:case 524288:case 1048576:case 2097152:return o&3932160;case 4194304:case 8388608:case 16777216:case 33554432:return o&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return o}}function Te(o,l,d){var v=o.pendingLanes;if(v===0)return 0;var _=0,N=o.suspendedLanes,H=o.pingedLanes;o=o.warmLanes;var rt=v&134217727;return rt!==0?(v=rt&~N,v!==0?_=Cn(v):(H&=rt,H!==0?_=Cn(H):d||(d=rt&~o,d!==0&&(_=Cn(d))))):(rt=v&~N,rt!==0?_=Cn(rt):H!==0?_=Cn(H):d||(d=v&~o,d!==0&&(_=Cn(d)))),_===0?0:l!==0&&l!==_&&(l&N)===0&&(N=_&-_,d=l&-l,N>=d||N===32&&(d&4194048)!==0)?l:_}function rn(o,l){return(o.pendingLanes&~(o.suspendedLanes&~o.pingedLanes)&l)===0}function Ta(o,l){switch(o){case 1:case 2:case 4:case 8:case 64:return l+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return l+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Gi(){var o=ns;return ns<<=1,(ns&62914560)===0&&(ns=4194304),o}function As(o){for(var l=[],d=0;31>d;d++)l.push(o);return l}function br(o,l){o.pendingLanes|=l,l!==268435456&&(o.suspendedLanes=0,o.pingedLanes=0,o.warmLanes=0)}function Se(o,l,d,v,_,N){var H=o.pendingLanes;o.pendingLanes=d,o.suspendedLanes=0,o.pingedLanes=0,o.warmLanes=0,o.expiredLanes&=d,o.entangledLanes&=d,o.errorRecoveryDisabledLanes&=d,o.shellSuspendCounter=0;var rt=o.entanglements,gt=o.expirationTimes,Mt=o.hiddenUpdates;for(d=H&~d;0<d;){var Ht=31-tn(d),Yt=1<<Ht;rt[Ht]=0,gt[Ht]=-1;var It=Mt[Ht];if(It!==null)for(Mt[Ht]=null,Ht=0;Ht<It.length;Ht++){var kt=It[Ht];kt!==null&&(kt.lane&=-536870913)}d&=~Yt}v!==0&&is(o,v,0),N!==0&&_===0&&o.tag!==0&&(o.suspendedLanes|=N&~(H&~l))}function is(o,l,d){o.pendingLanes|=l,o.suspendedLanes&=~l;var v=31-tn(l);o.entangledLanes|=l,o.entanglements[v]=o.entanglements[v]|1073741824|d&261930}function ti(o,l){var d=o.entangledLanes|=l;for(o=o.entanglements;d;){var v=31-tn(d),_=1<<v;_&l|o[v]&l&&(o[v]|=l),d&=~_}}function ci(o,l){var d=l&-l;return d=(d&42)!==0?1:hi(d),(d&(o.suspendedLanes|l))!==0?0:d}function hi(o){switch(o){case 2:o=1;break;case 8:o=4;break;case 32:o=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:o=128;break;case 268435456:o=134217728;break;default:o=0}return o}function fi(o){return o&=-o,2<o?8<o?(o&134217727)!==0?32:268435456:8:2}function _s(){var o=at.p;return o!==0?o:(o=window.event,o===void 0?32:M3(o.type))}function cc(o,l){var d=at.p;try{return at.p=o,l()}finally{at.p=d}}var kr=Math.random().toString(36).slice(2),Bn="__reactFiber$"+kr,di="__reactProps$"+kr,Fr="__reactContainer$"+kr,uo="__reactEvents$"+kr,co="__reactListeners$"+kr,Na="__reactHandles$"+kr,Zl="__reactResources$"+kr,Ra="__reactMarker$"+kr;function tu(o){delete o[Bn],delete o[di],delete o[uo],delete o[co],delete o[Na]}function Go(o){var l=o[Bn];if(l)return l;for(var d=o.parentNode;d;){if(l=d[Fr]||d[Bn]){if(d=l.alternate,l.child!==null||d!==null&&d.child!==null)for(o=m3(o);o!==null;){if(d=o[Bn])return d;o=m3(o)}return l}o=d,d=o.parentNode}return null}function Vo(o){if(o=o[Bn]||o[Fr]){var l=o.tag;if(l===5||l===6||l===13||l===31||l===26||l===27||l===3)return o}return null}function eu(o){var l=o.tag;if(l===5||l===26||l===27||l===6)return o.stateNode;throw Error(n(33))}function nu(o){var l=o[Zl];return l||(l=o[Zl]={hoistableStyles:new Map,hoistableScripts:new Map}),l}function Vi(o){o[Ra]=!0}var hc=new Set,Id={};function hl(o,l){Da(o,l),Da(o+"Capture",l)}function Da(o,l){for(Id[o]=l,o=0;o<l.length;o++)hc.add(l[o])}var q1=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),Pd={},Vp={};function Oh(o){return Jt.call(Vp,o)?!0:Jt.call(Pd,o)?!1:q1.test(o)?Vp[o]=!0:(Pd[o]=!0,!1)}function Uh(o,l,d){if(Oh(l))if(d===null)o.removeAttribute(l);else{switch(typeof d){case"undefined":case"function":case"symbol":o.removeAttribute(l);return;case"boolean":var v=l.toLowerCase().slice(0,5);if(v!=="data-"&&v!=="aria-"){o.removeAttribute(l);return}}o.setAttribute(l,""+d)}}function pi(o,l,d){if(d===null)o.removeAttribute(l);else{switch(typeof d){case"undefined":case"function":case"symbol":case"boolean":o.removeAttribute(l);return}o.setAttribute(l,""+d)}}function ho(o,l,d,v){if(v===null)o.removeAttribute(d);else{switch(typeof v){case"undefined":case"function":case"symbol":case"boolean":o.removeAttribute(d);return}o.setAttributeNS(l,d,""+v)}}function rs(o){switch(typeof o){case"bigint":case"boolean":case"number":case"string":case"undefined":return o;case"object":return o;default:return""}}function kd(o){var l=o.type;return(o=o.nodeName)&&o.toLowerCase()==="input"&&(l==="checkbox"||l==="radio")}function Fd(o,l,d){var v=Object.getOwnPropertyDescriptor(o.constructor.prototype,l);if(!o.hasOwnProperty(l)&&typeof v<"u"&&typeof v.get=="function"&&typeof v.set=="function"){var _=v.get,N=v.set;return Object.defineProperty(o,l,{configurable:!0,get:function(){return _.call(this)},set:function(H){d=""+H,N.call(this,H)}}),Object.defineProperty(o,l,{enumerable:v.enumerable}),{getValue:function(){return d},setValue:function(H){d=""+H},stopTracking:function(){o._valueTracker=null,delete o[l]}}}}function Bd(o){if(!o._valueTracker){var l=kd(o)?"checked":"value";o._valueTracker=Fd(o,l,""+o[l])}}function fo(o){if(!o)return!1;var l=o._valueTracker;if(!l)return!0;var d=l.getValue(),v="";return o&&(v=kd(o)?o.checked?"true":"false":o.value),o=v,o!==d?(l.setValue(o),!0):!1}function fl(o){if(o=o||(typeof document<"u"?document:void 0),typeof o>"u")return null;try{return o.activeElement||o.body}catch{return o.body}}var ws=/[\n"\\]/g;function Br(o){return o.replace(ws,function(l){return"\\"+l.charCodeAt(0).toString(16)+" "})}function Hh(o,l,d,v,_,N,H,rt){o.name="",H!=null&&typeof H!="function"&&typeof H!="symbol"&&typeof H!="boolean"?o.type=H:o.removeAttribute("type"),l!=null?H==="number"?(l===0&&o.value===""||o.value!=l)&&(o.value=""+rs(l)):o.value!==""+rs(l)&&(o.value=""+rs(l)):H!=="submit"&&H!=="reset"||o.removeAttribute("value"),l!=null?qh(o,H,rs(l)):d!=null?qh(o,H,rs(d)):v!=null&&o.removeAttribute("value"),_==null&&N!=null&&(o.defaultChecked=!!N),_!=null&&(o.checked=_&&typeof _!="function"&&typeof _!="symbol"),rt!=null&&typeof rt!="function"&&typeof rt!="symbol"&&typeof rt!="boolean"?o.name=""+rs(rt):o.removeAttribute("name")}function Yp(o,l,d,v,_,N,H,rt){if(N!=null&&typeof N!="function"&&typeof N!="symbol"&&typeof N!="boolean"&&(o.type=N),l!=null||d!=null){if(!(N!=="submit"&&N!=="reset"||l!=null)){Bd(o);return}d=d!=null?""+rs(d):"",l=l!=null?""+rs(l):d,rt||l===o.value||(o.value=l),o.defaultValue=l}v=v??_,v=typeof v!="function"&&typeof v!="symbol"&&!!v,o.checked=rt?o.checked:!!v,o.defaultChecked=!!v,H!=null&&typeof H!="function"&&typeof H!="symbol"&&typeof H!="boolean"&&(o.name=H),Bd(o)}function qh(o,l,d){l==="number"&&fl(o.ownerDocument)===o||o.defaultValue===""+d||(o.defaultValue=""+d)}function iu(o,l,d,v){if(o=o.options,l){l={};for(var _=0;_<d.length;_++)l["$"+d[_]]=!0;for(d=0;d<o.length;d++)_=l.hasOwnProperty("$"+o[d].value),o[d].selected!==_&&(o[d].selected=_),_&&v&&(o[d].defaultSelected=!0)}else{for(d=""+rs(d),l=null,_=0;_<o.length;_++){if(o[_].value===d){o[_].selected=!0,v&&(o[_].defaultSelected=!0);return}l!==null||o[_].disabled||(l=o[_])}l!==null&&(l.selected=!0)}}function Od(o,l,d){if(l!=null&&(l=""+rs(l),l!==o.value&&(o.value=l),d==null)){o.defaultValue!==l&&(o.defaultValue=l);return}o.defaultValue=d!=null?""+rs(d):""}function $p(o,l,d,v){if(l==null){if(v!=null){if(d!=null)throw Error(n(92));if(pt(v)){if(1<v.length)throw Error(n(93));v=v[0]}d=v}d==null&&(d=""),l=d}d=rs(l),o.defaultValue=d,v=o.textContent,v===d&&v!==""&&v!==null&&(o.value=v),Bd(o)}function La(o,l){if(l){var d=o.firstChild;if(d&&d===o.lastChild&&d.nodeType===3){d.nodeValue=l;return}}o.textContent=l}var z1=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function Wp(o,l,d){var v=l.indexOf("--")===0;d==null||typeof d=="boolean"||d===""?v?o.setProperty(l,""):l==="float"?o.cssFloat="":o[l]="":v?o.setProperty(l,d):typeof d!="number"||d===0||z1.has(l)?l==="float"?o.cssFloat=d:o[l]=(""+d).trim():o[l]=d+"px"}function Xp(o,l,d){if(l!=null&&typeof l!="object")throw Error(n(62));if(o=o.style,d!=null){for(var v in d)!d.hasOwnProperty(v)||l!=null&&l.hasOwnProperty(v)||(v.indexOf("--")===0?o.setProperty(v,""):v==="float"?o.cssFloat="":o[v]="");for(var _ in l)v=l[_],l.hasOwnProperty(_)&&d[_]!==v&&Wp(o,_,v)}else for(var N in l)l.hasOwnProperty(N)&&Wp(o,N,l[N])}function Yo(o){if(o.indexOf("-")===-1)return!1;switch(o){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var zh=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),Gh=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function fc(o){return Gh.test(""+o)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":o}function gi(){}var Ud=null;function Vh(o){return o=o.target||o.srcElement||window,o.correspondingUseElement&&(o=o.correspondingUseElement),o.nodeType===3?o.parentNode:o}var Ce=null,ru=null;function jp(o){var l=Vo(o);if(l&&(o=l.stateNode)){var d=o[di]||null;t:switch(o=l.stateNode,l.type){case"input":if(Hh(o,d.value,d.defaultValue,d.defaultValue,d.checked,d.defaultChecked,d.type,d.name),l=d.name,d.type==="radio"&&l!=null){for(d=o;d.parentNode;)d=d.parentNode;for(d=d.querySelectorAll('input[name="'+Br(""+l)+'"][type="radio"]'),l=0;l<d.length;l++){var v=d[l];if(v!==o&&v.form===o.form){var _=v[di]||null;if(!_)throw Error(n(90));Hh(v,_.value,_.defaultValue,_.defaultValue,_.checked,_.defaultChecked,_.type,_.name)}}for(l=0;l<d.length;l++)v=d[l],v.form===o.form&&fo(v)}break t;case"textarea":Od(o,d.value,d.defaultValue);break t;case"select":l=d.value,l!=null&&iu(o,!!d.multiple,l,!1)}}}var po=!1;function Hd(o,l,d){if(po)return o(l,d);po=!0;try{var v=o(l);return v}finally{if(po=!1,(Ce!==null||ru!==null)&&(Lx(),Ce&&(l=Ce,o=ru,ru=Ce=null,jp(l),o)))for(l=0;l<o.length;l++)jp(o[l])}}function su(o,l){var d=o.stateNode;if(d===null)return null;var v=d[di]||null;if(v===null)return null;d=v[l];t:switch(l){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(v=!v.disabled)||(o=o.type,v=!(o==="button"||o==="input"||o==="select"||o==="textarea")),o=!v;break t;default:o=!1}if(o)return null;if(d&&typeof d!="function")throw Error(n(231,l,typeof d));return d}var Ss=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),dc=!1;if(Ss)try{var pc={};Object.defineProperty(pc,"passive",{get:function(){dc=!0}}),window.addEventListener("test",pc,pc),window.removeEventListener("test",pc,pc)}catch{dc=!1}var Ma=null,qd=null,ou=null;function au(){if(ou)return ou;var o,l=qd,d=l.length,v,_="value"in Ma?Ma.value:Ma.textContent,N=_.length;for(o=0;o<d&&l[o]===_[o];o++);var H=d-o;for(v=1;v<=H&&l[d-v]===_[N-v];v++);return ou=_.slice(o,1<v?1-v:void 0)}function $o(o){var l=o.keyCode;return"charCode"in o?(o=o.charCode,o===0&&l===13&&(o=13)):o=l,o===10&&(o=13),32<=o||o===13?o:0}function Yh(){return!0}function lu(){return!1}function ar(o){function l(d,v,_,N,H){this._reactName=d,this._targetInst=_,this.type=v,this.nativeEvent=N,this.target=H,this.currentTarget=null;for(var rt in o)o.hasOwnProperty(rt)&&(d=o[rt],this[rt]=d?d(N):N[rt]);return this.isDefaultPrevented=(N.defaultPrevented!=null?N.defaultPrevented:N.returnValue===!1)?Yh:lu,this.isPropagationStopped=lu,this}return g(l.prototype,{preventDefault:function(){this.defaultPrevented=!0;var d=this.nativeEvent;d&&(d.preventDefault?d.preventDefault():typeof d.returnValue!="unknown"&&(d.returnValue=!1),this.isDefaultPrevented=Yh)},stopPropagation:function(){var d=this.nativeEvent;d&&(d.stopPropagation?d.stopPropagation():typeof d.cancelBubble!="unknown"&&(d.cancelBubble=!0),this.isPropagationStopped=Yh)},persist:function(){},isPersistent:Yh}),l}var go={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(o){return o.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},gc=ar(go),uu=g({},go,{view:0,detail:0}),Jp=ar(uu),$h,mo,Gs,Wh=g({},uu,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:cu,button:0,buttons:0,relatedTarget:function(o){return o.relatedTarget===void 0?o.fromElement===o.srcElement?o.toElement:o.fromElement:o.relatedTarget},movementX:function(o){return"movementX"in o?o.movementX:(o!==Gs&&(Gs&&o.type==="mousemove"?($h=o.screenX-Gs.screenX,mo=o.screenY-Gs.screenY):mo=$h=0,Gs=o),$h)},movementY:function(o){return"movementY"in o?o.movementY:mo}}),dl=ar(Wh),Wo=g({},Wh,{dataTransfer:0}),zd=ar(Wo),mc=g({},uu,{relatedTarget:0}),Gd=ar(mc),Xh=g({},go,{animationName:0,elapsedTime:0,pseudoElement:0}),G1=ar(Xh),Vd=g({},go,{clipboardData:function(o){return"clipboardData"in o?o.clipboardData:window.clipboardData}}),Yd=ar(Vd),Kp=g({},go,{data:0}),vc=ar(Kp),$d={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Wd={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Qp={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function V1(o){var l=this.nativeEvent;return l.getModifierState?l.getModifierState(o):(o=Qp[o])?!!l[o]:!1}function cu(){return V1}var yc=g({},uu,{key:function(o){if(o.key){var l=$d[o.key]||o.key;if(l!=="Unidentified")return l}return o.type==="keypress"?(o=$o(o),o===13?"Enter":String.fromCharCode(o)):o.type==="keydown"||o.type==="keyup"?Wd[o.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:cu,charCode:function(o){return o.type==="keypress"?$o(o):0},keyCode:function(o){return o.type==="keydown"||o.type==="keyup"?o.keyCode:0},which:function(o){return o.type==="keypress"?$o(o):o.type==="keydown"||o.type==="keyup"?o.keyCode:0}}),Xd=ar(yc),hu=g({},Wh,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),jh=ar(hu),L=g({},uu,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:cu}),X=ar(L),ct=g({},go,{propertyName:0,elapsedTime:0,pseudoElement:0}),vt=ar(ct),Nt=g({},Wh,{deltaX:function(o){return"deltaX"in o?o.deltaX:"wheelDeltaX"in o?-o.wheelDeltaX:0},deltaY:function(o){return"deltaY"in o?o.deltaY:"wheelDeltaY"in o?-o.wheelDeltaY:"wheelDelta"in o?-o.wheelDelta:0},deltaZ:0,deltaMode:0}),Ot=ar(Nt),jt=g({},go,{newState:0,oldState:0}),ue=ar(jt),_e=[9,13,27,32],Fe=Ss&&"CompositionEvent"in window,Me=null;Ss&&"documentMode"in document&&(Me=document.documentMode);var hn=Ss&&"TextEvent"in window&&!Me,mi=Ss&&(!Fe||Me&&8<Me&&11>=Me),Ai=" ",Fi=!1;function Ar(o,l){switch(o){case"keyup":return _e.indexOf(l.keyCode)!==-1;case"keydown":return l.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function tr(o){return o=o.detail,typeof o=="object"&&"data"in o?o.data:null}var Or=!1;function Vs(o,l){switch(o){case"compositionend":return tr(l);case"keypress":return l.which!==32?null:(Fi=!0,Ai);case"textInput":return o=l.data,o===Ai&&Fi?null:o;default:return null}}function Ia(o,l){if(Or)return o==="compositionend"||!Fe&&Ar(o,l)?(o=au(),ou=qd=Ma=null,Or=!1,o):null;switch(o){case"paste":return null;case"keypress":if(!(l.ctrlKey||l.altKey||l.metaKey)||l.ctrlKey&&l.altKey){if(l.char&&1<l.char.length)return l.char;if(l.which)return String.fromCharCode(l.which)}return null;case"compositionend":return mi&&l.locale!=="ko"?null:l.data;default:return null}}var Zp={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Jh(o){var l=o&&o.nodeName&&o.nodeName.toLowerCase();return l==="input"?!!Zp[o.type]:l==="textarea"}function Kh(o,l,d,v){Ce?ru?ru.push(v):ru=[v]:Ce=v,l=Ox(l,"onChange"),0<l.length&&(d=new gc("onChange","change",null,d,v),o.push({event:d,listeners:l}))}var Pa=null,pl=null;function jd(o){n3(o,0)}function gl(o){var l=eu(o);if(fo(l))return o}function lr(o,l){if(o==="change")return l}var xc=!1;if(Ss){var fu;if(Ss){var du="oninput"in document;if(!du){var Qh=document.createElement("div");Qh.setAttribute("oninput","return;"),du=typeof Qh.oninput=="function"}fu=du}else fu=!1;xc=fu&&(!document.documentMode||9<document.documentMode)}function ss(){Pa&&(Pa.detachEvent("onpropertychange",tg),pl=Pa=null)}function tg(o){if(o.propertyName==="value"&&gl(pl)){var l=[];Kh(l,pl,o,Vh(o)),Hd(jd,l)}}function Jd(o,l,d){o==="focusin"?(ss(),Pa=l,pl=d,Pa.attachEvent("onpropertychange",tg)):o==="focusout"&&ss()}function eg(o){if(o==="selectionchange"||o==="keyup"||o==="keydown")return gl(pl)}function vo(o,l){if(o==="click")return gl(l)}function Zh(o,l){if(o==="input"||o==="change")return gl(l)}function ng(o,l){return o===l&&(o!==0||1/o===1/l)||o!==o&&l!==l}var Ur=typeof Object.is=="function"?Object.is:ng;function yo(o,l){if(Ur(o,l))return!0;if(typeof o!="object"||o===null||typeof l!="object"||l===null)return!1;var d=Object.keys(o),v=Object.keys(l);if(d.length!==v.length)return!1;for(v=0;v<d.length;v++){var _=d[v];if(!Jt.call(l,_)||!Ur(o[_],l[_]))return!1}return!0}function pu(o){for(;o&&o.firstChild;)o=o.firstChild;return o}function os(o,l){var d=pu(o);o=0;for(var v;d;){if(d.nodeType===3){if(v=o+d.textContent.length,o<=l&&v>=l)return{node:d,offset:l-o};o=v}t:{for(;d;){if(d.nextSibling){d=d.nextSibling;break t}d=d.parentNode}d=void 0}d=pu(d)}}function Hr(o,l){return o&&l?o===l?!0:o&&o.nodeType===3?!1:l&&l.nodeType===3?Hr(o,l.parentNode):"contains"in o?o.contains(l):o.compareDocumentPosition?!!(o.compareDocumentPosition(l)&16):!1:!1}function ml(o){o=o!=null&&o.ownerDocument!=null&&o.ownerDocument.defaultView!=null?o.ownerDocument.defaultView:window;for(var l=fl(o.document);l instanceof o.HTMLIFrameElement;){try{var d=typeof l.contentWindow.location.href=="string"}catch{d=!1}if(d)o=l.contentWindow;else break;l=fl(o.document)}return l}function Xo(o){var l=o&&o.nodeName&&o.nodeName.toLowerCase();return l&&(l==="input"&&(o.type==="text"||o.type==="search"||o.type==="tel"||o.type==="url"||o.type==="password")||l==="textarea"||o.contentEditable==="true")}var vl=Ss&&"documentMode"in document&&11>=document.documentMode,jo=null,Jo=null,ei=null,bc=!1;function qr(o,l,d){var v=d.window===d?d.document:d.nodeType===9?d:d.ownerDocument;bc||jo==null||jo!==fl(v)||(v=jo,"selectionStart"in v&&Xo(v)?v={start:v.selectionStart,end:v.selectionEnd}:(v=(v.ownerDocument&&v.ownerDocument.defaultView||window).getSelection(),v={anchorNode:v.anchorNode,anchorOffset:v.anchorOffset,focusNode:v.focusNode,focusOffset:v.focusOffset}),ei&&yo(ei,v)||(ei=v,v=Ox(Jo,"onSelect"),0<v.length&&(l=new gc("onSelect","select",null,l,d),o.push({event:l,listeners:v}),l.target=jo)))}function ur(o,l){var d={};return d[o.toLowerCase()]=l.toLowerCase(),d["Webkit"+o]="webkit"+l,d["Moz"+o]="moz"+l,d}var Ko={animationend:ur("Animation","AnimationEnd"),animationiteration:ur("Animation","AnimationIteration"),animationstart:ur("Animation","AnimationStart"),transitionrun:ur("Transition","TransitionRun"),transitionstart:ur("Transition","TransitionStart"),transitioncancel:ur("Transition","TransitionCancel"),transitionend:ur("Transition","TransitionEnd")},tf={},ef={};Ss&&(ef=document.createElement("div").style,"AnimationEvent"in window||(delete Ko.animationend.animation,delete Ko.animationiteration.animation,delete Ko.animationstart.animation),"TransitionEvent"in window||delete Ko.transitionend.transition);function Ys(o){if(tf[o])return tf[o];if(!Ko[o])return o;var l=Ko[o],d;for(d in l)if(l.hasOwnProperty(d)&&d in ef)return tf[o]=l[d];return o}var gu=Ys("animationend"),yl=Ys("animationiteration"),mu=Ys("animationstart"),nf=Ys("transitionrun"),Ac=Ys("transitionstart"),vu=Ys("transitioncancel"),rf=Ys("transitionend"),$s=new Map,Es="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");Es.push("scrollEnd");function sn(o,l){$s.set(o,l),hl(l,[o])}var Ln=typeof reportError=="function"?reportError:function(o){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var l=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof o=="object"&&o!==null&&typeof o.message=="string"?String(o.message):String(o),error:o});if(!window.dispatchEvent(l))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",o);return}console.error(o)},_n=[],vi=0,Qo=0;function yu(){for(var o=vi,l=Qo=vi=0;l<o;){var d=_n[l];_n[l++]=null;var v=_n[l];_n[l++]=null;var _=_n[l];_n[l++]=null;var N=_n[l];if(_n[l++]=null,v!==null&&_!==null){var H=v.pending;H===null?_.next=_:(_.next=H.next,H.next=_),v.pending=_}N!==0&&Kd(d,_,N)}}function xl(o,l,d,v){_n[vi++]=o,_n[vi++]=l,_n[vi++]=d,_n[vi++]=v,Qo|=v,o.lanes|=v,o=o.alternate,o!==null&&(o.lanes|=v)}function sf(o,l,d,v){return xl(o,l,d,v),zr(o)}function bl(o,l){return xl(o,null,null,l),zr(o)}function Kd(o,l,d){o.lanes|=d;var v=o.alternate;v!==null&&(v.lanes|=d);for(var _=!1,N=o.return;N!==null;)N.childLanes|=d,v=N.alternate,v!==null&&(v.childLanes|=d),N.tag===22&&(o=N.stateNode,o===null||o._visibility&1||(_=!0)),o=N,N=N.return;return o.tag===3?(N=o.stateNode,_&&l!==null&&(_=31-tn(d),o=N.hiddenUpdates,v=o[_],v===null?o[_]=[l]:v.push(l),l.lane=d|536870912),N):null}function zr(o){if(50<fv)throw fv=0,D_=null,Error(n(185));for(var l=o.return;l!==null;)o=l,l=o.return;return o.tag===3?o.stateNode:null}var _r={};function ig(o,l,d,v){this.tag=o,this.key=d,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=l,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=v,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Gr(o,l,d,v){return new ig(o,l,d,v)}function rg(o){return o=o.prototype,!(!o||!o.isReactComponent)}function xo(o,l){var d=o.alternate;return d===null?(d=Gr(o.tag,l,o.key,o.mode),d.elementType=o.elementType,d.type=o.type,d.stateNode=o.stateNode,d.alternate=o,o.alternate=d):(d.pendingProps=l,d.type=o.type,d.flags=0,d.subtreeFlags=0,d.deletions=null),d.flags=o.flags&65011712,d.childLanes=o.childLanes,d.lanes=o.lanes,d.child=o.child,d.memoizedProps=o.memoizedProps,d.memoizedState=o.memoizedState,d.updateQueue=o.updateQueue,l=o.dependencies,d.dependencies=l===null?null:{lanes:l.lanes,firstContext:l.firstContext},d.sibling=o.sibling,d.index=o.index,d.ref=o.ref,d.refCleanup=o.refCleanup,d}function Qd(o,l){o.flags&=65011714;var d=o.alternate;return d===null?(o.childLanes=0,o.lanes=l,o.child=null,o.subtreeFlags=0,o.memoizedProps=null,o.memoizedState=null,o.updateQueue=null,o.dependencies=null,o.stateNode=null):(o.childLanes=d.childLanes,o.lanes=d.lanes,o.child=d.child,o.subtreeFlags=0,o.deletions=null,o.memoizedProps=d.memoizedProps,o.memoizedState=d.memoizedState,o.updateQueue=d.updateQueue,o.type=d.type,l=d.dependencies,o.dependencies=l===null?null:{lanes:l.lanes,firstContext:l.firstContext}),o}function of(o,l,d,v,_,N){var H=0;if(v=o,typeof o=="function")rg(o)&&(H=1);else if(typeof o=="string")H=aI(o,d,j.current)?26:o==="html"||o==="head"||o==="body"?27:5;else t:switch(o){case tt:return o=Gr(31,d,l,_),o.elementType=tt,o.lanes=N,o;case S:return xu(d.children,_,N,l);case T:H=8,_|=24;break;case C:return o=Gr(12,d,l,_|2),o.elementType=C,o.lanes=N,o;case F:return o=Gr(13,d,l,_),o.elementType=F,o.lanes=N,o;case q:return o=Gr(19,d,l,_),o.elementType=q,o.lanes=N,o;default:if(typeof o=="object"&&o!==null)switch(o.$$typeof){case R:H=10;break t;case D:H=9;break t;case I:H=11;break t;case U:H=14;break t;case V:H=16,v=null;break t}H=29,d=Error(n(130,o===null?"null":typeof o,"")),v=null}return l=Gr(H,d,l,_),l.elementType=o,l.type=v,l.lanes=N,l}function xu(o,l,d,v){return o=Gr(7,o,v,l),o.lanes=d,o}function Zd(o,l,d){return o=Gr(6,o,null,l),o.lanes=d,o}function sg(o){var l=Gr(18,null,null,0);return l.stateNode=o,l}function af(o,l,d){return l=Gr(4,o.children!==null?o.children:[],o.key,l),l.lanes=d,l.stateNode={containerInfo:o.containerInfo,pendingChildren:null,implementation:o.implementation},l}var og=new WeakMap;function bo(o,l){if(typeof o=="object"&&o!==null){var d=og.get(o);return d!==void 0?d:(l={value:o,source:l,stack:he(l)},og.set(o,l),l)}return{value:o,source:l,stack:he(l)}}var lf=[],_c=0,ag=null,t0=0,Ao=[],_o=0,bu=null,wo=1,So="";function Ws(o,l){lf[_c++]=t0,lf[_c++]=ag,ag=o,t0=l}function cx(o,l,d){Ao[_o++]=wo,Ao[_o++]=So,Ao[_o++]=bu,bu=o;var v=wo;o=So;var _=32-tn(v)-1;v&=~(1<<_),d+=1;var N=32-tn(l)+_;if(30<N){var H=_-_%5;N=(v&(1<<H)-1).toString(32),v>>=H,_-=H,wo=1<<32-tn(l)+_|d<<_|v,So=N+o}else wo=1<<N|d<<_|v,So=o}function Y1(o){o.return!==null&&(Ws(o,1),cx(o,1,0))}function lg(o){for(;o===ag;)ag=lf[--_c],lf[_c]=null,t0=lf[--_c],lf[_c]=null;for(;o===bu;)bu=Ao[--_o],Ao[_o]=null,So=Ao[--_o],Ao[_o]=null,wo=Ao[--_o],Ao[_o]=null}function hx(o,l){Ao[_o++]=wo,Ao[_o++]=So,Ao[_o++]=bu,wo=l.id,So=l.overflow,bu=o}var wr=null,ni=null,an=!1,as=null,Ti=!1,Zo=Error(n(519));function Au(o){var l=Error(n(418,1<arguments.length&&arguments[1]!==void 0&&arguments[1]?"text":"HTML",""));throw uf(bo(l,o)),Zo}function $1(o){var l=o.stateNode,d=o.type,v=o.memoizedProps;switch(l[Bn]=o,l[di]=v,d){case"dialog":cn("cancel",l),cn("close",l);break;case"iframe":case"object":case"embed":cn("load",l);break;case"video":case"audio":for(d=0;d<pv.length;d++)cn(pv[d],l);break;case"source":cn("error",l);break;case"img":case"image":case"link":cn("error",l),cn("load",l);break;case"details":cn("toggle",l);break;case"input":cn("invalid",l),Yp(l,v.value,v.defaultValue,v.checked,v.defaultChecked,v.type,v.name,!0);break;case"select":cn("invalid",l);break;case"textarea":cn("invalid",l),$p(l,v.value,v.defaultValue,v.children)}d=v.children,typeof d!="string"&&typeof d!="number"&&typeof d!="bigint"||l.textContent===""+d||v.suppressHydrationWarning===!0||o3(l.textContent,d)?(v.popover!=null&&(cn("beforetoggle",l),cn("toggle",l)),v.onScroll!=null&&cn("scroll",l),v.onScrollEnd!=null&&cn("scrollend",l),v.onClick!=null&&(l.onclick=gi),l=!0):l=!1,l||Au(o,!0)}function Al(o){for(wr=o.return;wr;)switch(wr.tag){case 5:case 31:case 13:Ti=!1;return;case 27:case 3:Ti=!0;return;default:wr=wr.return}}function Sr(o){if(o!==wr)return!1;if(!an)return Al(o),an=!0,!1;var l=o.tag,d;if((d=l!==3&&l!==27)&&((d=l===5)&&(d=o.type,d=!(d!=="form"&&d!=="button")||Y_(o.type,o.memoizedProps)),d=!d),d&&ni&&Au(o),Al(o),l===13){if(o=o.memoizedState,o=o!==null?o.dehydrated:null,!o)throw Error(n(317));ni=g3(o)}else if(l===31){if(o=o.memoizedState,o=o!==null?o.dehydrated:null,!o)throw Error(n(317));ni=g3(o)}else l===27?(l=ni,wf(o.type)?(o=J_,J_=null,ni=o):ni=l):ni=wr?qa(o.stateNode.nextSibling):null;return!0}function wc(){ni=wr=null,an=!1}function W1(){var o=as;return o!==null&&(Do===null?Do=o:Do.push.apply(Do,o),as=null),o}function uf(o){as===null?as=[o]:as.push(o)}var ug=K(null),_u=null,ka=null;function wu(o,l,d){Y(ug,l._currentValue),l._currentValue=d}function Eo(o){o._currentValue=ug.current,P(ug)}function cf(o,l,d){for(;o!==null;){var v=o.alternate;if((o.childLanes&l)!==l?(o.childLanes|=l,v!==null&&(v.childLanes|=l)):v!==null&&(v.childLanes&l)!==l&&(v.childLanes|=l),o===d)break;o=o.return}}function Sc(o,l,d,v){var _=o.child;for(_!==null&&(_.return=o);_!==null;){var N=_.dependencies;if(N!==null){var H=_.child;N=N.firstContext;t:for(;N!==null;){var rt=N;N=_;for(var gt=0;gt<l.length;gt++)if(rt.context===l[gt]){N.lanes|=d,rt=N.alternate,rt!==null&&(rt.lanes|=d),cf(N.return,d,o),v||(H=null);break t}N=rt.next}}else if(_.tag===18){if(H=_.return,H===null)throw Error(n(341));H.lanes|=d,N=H.alternate,N!==null&&(N.lanes|=d),cf(H,d,o),H=null}else H=_.child;if(H!==null)H.return=_;else for(H=_;H!==null;){if(H===o){H=null;break}if(_=H.sibling,_!==null){_.return=H.return,H=_;break}H=H.return}_=H}}function Su(o,l,d,v){o=null;for(var _=l,N=!1;_!==null;){if(!N){if((_.flags&524288)!==0)N=!0;else if((_.flags&262144)!==0)break}if(_.tag===10){var H=_.alternate;if(H===null)throw Error(n(387));if(H=H.memoizedProps,H!==null){var rt=_.type;Ur(_.pendingProps.value,H.value)||(o!==null?o.push(rt):o=[rt])}}else if(_===mt.current){if(H=_.alternate,H===null)throw Error(n(387));H.memoizedState.memoizedState!==_.memoizedState.memoizedState&&(o!==null?o.push(xv):o=[xv])}_=_.return}o!==null&&Sc(l,o,d,v),l.flags|=262144}function cg(o){for(o=o.firstContext;o!==null;){if(!Ur(o.context._currentValue,o.memoizedValue))return!0;o=o.next}return!1}function Eu(o){_u=o,ka=null,o=o.dependencies,o!==null&&(o.firstContext=null)}function Er(o){return fx(_u,o)}function hg(o,l){return _u===null&&Eu(o),fx(o,l)}function fx(o,l){var d=l._currentValue;if(l={context:l,memoizedValue:d,next:null},ka===null){if(o===null)throw Error(n(308));ka=l,o.dependencies={lanes:0,firstContext:l},o.flags|=524288}else ka=ka.next=l;return d}var jA=typeof AbortController<"u"?AbortController:function(){var o=[],l=this.signal={aborted:!1,addEventListener:function(d,v){o.push(v)}};this.abort=function(){l.aborted=!0,o.forEach(function(d){return d()})}},JA=i.unstable_scheduleCallback,KA=i.unstable_NormalPriority,Bi={$$typeof:R,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function hf(){return{controller:new jA,data:new Map,refCount:0}}function e0(o){o.refCount--,o.refCount===0&&JA(KA,function(){o.controller.abort()})}var n0=null,fg=0,b=0,E=null;function M(o,l){if(n0===null){var d=n0=[];fg=0,b=F_(),E={status:"pending",value:void 0,then:function(v){d.push(v)}}}return fg++,l.then(B,B),l}function B(){if(--fg===0&&n0!==null){E!==null&&(E.status="fulfilled");var o=n0;n0=null,b=0,E=null;for(var l=0;l<o.length;l++)(0,o[l])()}}function W(o,l){var d=[],v={status:"pending",value:null,reason:null,then:function(_){d.push(_)}};return o.then(function(){v.status="fulfilled",v.value=l;for(var _=0;_<d.length;_++)(0,d[_])(l)},function(_){for(v.status="rejected",v.reason=_,_=0;_<d.length;_++)(0,d[_])(void 0)}),v}var Q=nt.S;nt.S=function(o,l){D4=ye(),typeof l=="object"&&l!==null&&typeof l.then=="function"&&M(o,l),Q!==null&&Q(o,l)};var Z=K(null);function it(){var o=Z.current;return o!==null?o:ri.pooledCache}function ot(o,l){l===null?Y(Z,Z.current):Y(Z,l.pool)}function lt(){var o=it();return o===null?null:{parent:Bi._currentValue,pool:o}}var yt=Error(n(460)),Dt=Error(n(474)),Rt=Error(n(542)),Et={then:function(){}};function Vt(o){return o=o.status,o==="fulfilled"||o==="rejected"}function Ft(o,l,d){switch(d=o[d],d===void 0?o.push(l):d!==l&&(l.then(gi,gi),l=d),l.status){case"fulfilled":return l.value;case"rejected":throw o=l.reason,Wt(o),o;default:if(typeof l.status=="string")l.then(gi,gi);else{if(o=ri,o!==null&&100<o.shellSuspendCounter)throw Error(n(482));o=l,o.status="pending",o.then(function(v){if(l.status==="pending"){var _=l;_.status="fulfilled",_.value=v}},function(v){if(l.status==="pending"){var _=l;_.status="rejected",_.reason=v}})}switch(l.status){case"fulfilled":return l.value;case"rejected":throw o=l.reason,Wt(o),o}throw wt=l,yt}}function xt(o){try{var l=o._init;return l(o._payload)}catch(d){throw d!==null&&typeof d=="object"&&typeof d.then=="function"?(wt=d,yt):d}}var wt=null;function zt(){if(wt===null)throw Error(n(459));var o=wt;return wt=null,o}function Wt(o){if(o===yt||o===Rt)throw Error(n(483))}var qt=null,oe=0;function ie(o){var l=oe;return oe+=1,qt===null&&(qt=[]),Ft(qt,o,l)}function Ae(o,l){l=l.props.ref,o.ref=l!==void 0?l:null}function se(o,l){throw l.$$typeof===m?Error(n(525)):(o=Object.prototype.toString.call(l),Error(n(31,o==="[object Object]"?"object with keys {"+Object.keys(l).join(", ")+"}":o)))}function wn(o){function l(Ct,_t){if(o){var Lt=Ct.deletions;Lt===null?(Ct.deletions=[_t],Ct.flags|=16):Lt.push(_t)}}function d(Ct,_t){if(!o)return null;for(;_t!==null;)l(Ct,_t),_t=_t.sibling;return null}function v(Ct){for(var _t=new Map;Ct!==null;)Ct.key!==null?_t.set(Ct.key,Ct):_t.set(Ct.index,Ct),Ct=Ct.sibling;return _t}function _(Ct,_t){return Ct=xo(Ct,_t),Ct.index=0,Ct.sibling=null,Ct}function N(Ct,_t,Lt){return Ct.index=Lt,o?(Lt=Ct.alternate,Lt!==null?(Lt=Lt.index,Lt<_t?(Ct.flags|=67108866,_t):Lt):(Ct.flags|=67108866,_t)):(Ct.flags|=1048576,_t)}function H(Ct){return o&&Ct.alternate===null&&(Ct.flags|=67108866),Ct}function rt(Ct,_t,Lt,Gt){return _t===null||_t.tag!==6?(_t=Zd(Lt,Ct.mode,Gt),_t.return=Ct,_t):(_t=_(_t,Lt),_t.return=Ct,_t)}function gt(Ct,_t,Lt,Gt){var we=Lt.type;return we===S?Ht(Ct,_t,Lt.props.children,Gt,Lt.key):_t!==null&&(_t.elementType===we||typeof we=="object"&&we!==null&&we.$$typeof===V&&xt(we)===_t.type)?(_t=_(_t,Lt.props),Ae(_t,Lt),_t.return=Ct,_t):(_t=of(Lt.type,Lt.key,Lt.props,null,Ct.mode,Gt),Ae(_t,Lt),_t.return=Ct,_t)}function Mt(Ct,_t,Lt,Gt){return _t===null||_t.tag!==4||_t.stateNode.containerInfo!==Lt.containerInfo||_t.stateNode.implementation!==Lt.implementation?(_t=af(Lt,Ct.mode,Gt),_t.return=Ct,_t):(_t=_(_t,Lt.children||[]),_t.return=Ct,_t)}function Ht(Ct,_t,Lt,Gt,we){return _t===null||_t.tag!==7?(_t=xu(Lt,Ct.mode,Gt,we),_t.return=Ct,_t):(_t=_(_t,Lt),_t.return=Ct,_t)}function Yt(Ct,_t,Lt){if(typeof _t=="string"&&_t!==""||typeof _t=="number"||typeof _t=="bigint")return _t=Zd(""+_t,Ct.mode,Lt),_t.return=Ct,_t;if(typeof _t=="object"&&_t!==null){switch(_t.$$typeof){case y:return Lt=of(_t.type,_t.key,_t.props,null,Ct.mode,Lt),Ae(Lt,_t),Lt.return=Ct,Lt;case w:return _t=af(_t,Ct.mode,Lt),_t.return=Ct,_t;case V:return _t=xt(_t),Yt(Ct,_t,Lt)}if(pt(_t)||G(_t))return _t=xu(_t,Ct.mode,Lt,null),_t.return=Ct,_t;if(typeof _t.then=="function")return Yt(Ct,ie(_t),Lt);if(_t.$$typeof===R)return Yt(Ct,hg(Ct,_t),Lt);se(Ct,_t)}return null}function It(Ct,_t,Lt,Gt){var we=_t!==null?_t.key:null;if(typeof Lt=="string"&&Lt!==""||typeof Lt=="number"||typeof Lt=="bigint")return we!==null?null:rt(Ct,_t,""+Lt,Gt);if(typeof Lt=="object"&&Lt!==null){switch(Lt.$$typeof){case y:return Lt.key===we?gt(Ct,_t,Lt,Gt):null;case w:return Lt.key===we?Mt(Ct,_t,Lt,Gt):null;case V:return Lt=xt(Lt),It(Ct,_t,Lt,Gt)}if(pt(Lt)||G(Lt))return we!==null?null:Ht(Ct,_t,Lt,Gt,null);if(typeof Lt.then=="function")return It(Ct,_t,ie(Lt),Gt);if(Lt.$$typeof===R)return It(Ct,_t,hg(Ct,Lt),Gt);se(Ct,Lt)}return null}function kt(Ct,_t,Lt,Gt,we){if(typeof Gt=="string"&&Gt!==""||typeof Gt=="number"||typeof Gt=="bigint")return Ct=Ct.get(Lt)||null,rt(_t,Ct,""+Gt,we);if(typeof Gt=="object"&&Gt!==null){switch(Gt.$$typeof){case y:return Ct=Ct.get(Gt.key===null?Lt:Gt.key)||null,gt(_t,Ct,Gt,we);case w:return Ct=Ct.get(Gt.key===null?Lt:Gt.key)||null,Mt(_t,Ct,Gt,we);case V:return Gt=xt(Gt),kt(Ct,_t,Lt,Gt,we)}if(pt(Gt)||G(Gt))return Ct=Ct.get(Lt)||null,Ht(_t,Ct,Gt,we,null);if(typeof Gt.then=="function")return kt(Ct,_t,Lt,ie(Gt),we);if(Gt.$$typeof===R)return kt(Ct,_t,Lt,hg(_t,Gt),we);se(_t,Gt)}return null}function me(Ct,_t,Lt,Gt){for(var we=null,Nn=null,xe=_t,Je=_t=0,pn=null;xe!==null&&Je<Lt.length;Je++){xe.index>Je?(pn=xe,xe=null):pn=xe.sibling;var Rn=It(Ct,xe,Lt[Je],Gt);if(Rn===null){xe===null&&(xe=pn);break}o&&xe&&Rn.alternate===null&&l(Ct,xe),_t=N(Rn,_t,Je),Nn===null?we=Rn:Nn.sibling=Rn,Nn=Rn,xe=pn}if(Je===Lt.length)return d(Ct,xe),an&&Ws(Ct,Je),we;if(xe===null){for(;Je<Lt.length;Je++)xe=Yt(Ct,Lt[Je],Gt),xe!==null&&(_t=N(xe,_t,Je),Nn===null?we=xe:Nn.sibling=xe,Nn=xe);return an&&Ws(Ct,Je),we}for(xe=v(xe);Je<Lt.length;Je++)pn=kt(xe,Ct,Je,Lt[Je],Gt),pn!==null&&(o&&pn.alternate!==null&&xe.delete(pn.key===null?Je:pn.key),_t=N(pn,_t,Je),Nn===null?we=pn:Nn.sibling=pn,Nn=pn);return o&&xe.forEach(function(Nf){return l(Ct,Nf)}),an&&Ws(Ct,Je),we}function Re(Ct,_t,Lt,Gt){if(Lt==null)throw Error(n(151));for(var we=null,Nn=null,xe=_t,Je=_t=0,pn=null,Rn=Lt.next();xe!==null&&!Rn.done;Je++,Rn=Lt.next()){xe.index>Je?(pn=xe,xe=null):pn=xe.sibling;var Nf=It(Ct,xe,Rn.value,Gt);if(Nf===null){xe===null&&(xe=pn);break}o&&xe&&Nf.alternate===null&&l(Ct,xe),_t=N(Nf,_t,Je),Nn===null?we=Nf:Nn.sibling=Nf,Nn=Nf,xe=pn}if(Rn.done)return d(Ct,xe),an&&Ws(Ct,Je),we;if(xe===null){for(;!Rn.done;Je++,Rn=Lt.next())Rn=Yt(Ct,Rn.value,Gt),Rn!==null&&(_t=N(Rn,_t,Je),Nn===null?we=Rn:Nn.sibling=Rn,Nn=Rn);return an&&Ws(Ct,Je),we}for(xe=v(xe);!Rn.done;Je++,Rn=Lt.next())Rn=kt(xe,Ct,Je,Rn.value,Gt),Rn!==null&&(o&&Rn.alternate!==null&&xe.delete(Rn.key===null?Je:Rn.key),_t=N(Rn,_t,Je),Nn===null?we=Rn:Nn.sibling=Rn,Nn=Rn);return o&&xe.forEach(function(yI){return l(Ct,yI)}),an&&Ws(Ct,Je),we}function Wn(Ct,_t,Lt,Gt){if(typeof Lt=="object"&&Lt!==null&&Lt.type===S&&Lt.key===null&&(Lt=Lt.props.children),typeof Lt=="object"&&Lt!==null){switch(Lt.$$typeof){case y:t:{for(var we=Lt.key;_t!==null;){if(_t.key===we){if(we=Lt.type,we===S){if(_t.tag===7){d(Ct,_t.sibling),Gt=_(_t,Lt.props.children),Gt.return=Ct,Ct=Gt;break t}}else if(_t.elementType===we||typeof we=="object"&&we!==null&&we.$$typeof===V&&xt(we)===_t.type){d(Ct,_t.sibling),Gt=_(_t,Lt.props),Ae(Gt,Lt),Gt.return=Ct,Ct=Gt;break t}d(Ct,_t);break}else l(Ct,_t);_t=_t.sibling}Lt.type===S?(Gt=xu(Lt.props.children,Ct.mode,Gt,Lt.key),Gt.return=Ct,Ct=Gt):(Gt=of(Lt.type,Lt.key,Lt.props,null,Ct.mode,Gt),Ae(Gt,Lt),Gt.return=Ct,Ct=Gt)}return H(Ct);case w:t:{for(we=Lt.key;_t!==null;){if(_t.key===we)if(_t.tag===4&&_t.stateNode.containerInfo===Lt.containerInfo&&_t.stateNode.implementation===Lt.implementation){d(Ct,_t.sibling),Gt=_(_t,Lt.children||[]),Gt.return=Ct,Ct=Gt;break t}else{d(Ct,_t);break}else l(Ct,_t);_t=_t.sibling}Gt=af(Lt,Ct.mode,Gt),Gt.return=Ct,Ct=Gt}return H(Ct);case V:return Lt=xt(Lt),Wn(Ct,_t,Lt,Gt)}if(pt(Lt))return me(Ct,_t,Lt,Gt);if(G(Lt)){if(we=G(Lt),typeof we!="function")throw Error(n(150));return Lt=we.call(Lt),Re(Ct,_t,Lt,Gt)}if(typeof Lt.then=="function")return Wn(Ct,_t,ie(Lt),Gt);if(Lt.$$typeof===R)return Wn(Ct,_t,hg(Ct,Lt),Gt);se(Ct,Lt)}return typeof Lt=="string"&&Lt!==""||typeof Lt=="number"||typeof Lt=="bigint"?(Lt=""+Lt,_t!==null&&_t.tag===6?(d(Ct,_t.sibling),Gt=_(_t,Lt),Gt.return=Ct,Ct=Gt):(d(Ct,_t),Gt=Zd(Lt,Ct.mode,Gt),Gt.return=Ct,Ct=Gt),H(Ct)):d(Ct,_t)}return function(Ct,_t,Lt,Gt){try{oe=0;var we=Wn(Ct,_t,Lt,Gt);return qt=null,we}catch(xe){if(xe===yt||xe===Rt)throw xe;var Nn=Gr(29,xe,null,Ct.mode);return Nn.lanes=Gt,Nn.return=Ct,Nn}finally{}}}var ln=wn(!0),fn=wn(!1),Ue=!1;function Mn(o){o.updateQueue={baseState:o.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function Tn(o,l){o=o.updateQueue,l.updateQueue===o&&(l.updateQueue={baseState:o.baseState,firstBaseUpdate:o.firstBaseUpdate,lastBaseUpdate:o.lastBaseUpdate,shared:o.shared,callbacks:null})}function Ne(o){return{lane:o,tag:0,payload:null,callback:null,next:null}}function On(o,l,d){var v=o.updateQueue;if(v===null)return null;if(v=v.shared,(In&2)!==0){var _=v.pending;return _===null?l.next=l:(l.next=_.next,_.next=l),v.pending=l,l=zr(o),Kd(o,null,d),l}return xl(o,v,l,d),zr(o)}function cr(o,l,d){if(l=l.updateQueue,l!==null&&(l=l.shared,(d&4194048)!==0)){var v=l.lanes;v&=o.pendingLanes,d|=v,l.lanes=d,ti(o,d)}}function Ni(o,l){var d=o.updateQueue,v=o.alternate;if(v!==null&&(v=v.updateQueue,d===v)){var _=null,N=null;if(d=d.firstBaseUpdate,d!==null){do{var H={lane:d.lane,tag:d.tag,payload:d.payload,callback:null,next:null};N===null?_=N=H:N=N.next=H,d=d.next}while(d!==null);N===null?_=N=l:N=N.next=l}else _=N=l;d={baseState:v.baseState,firstBaseUpdate:_,lastBaseUpdate:N,shared:v.shared,callbacks:v.callbacks},o.updateQueue=d;return}o=d.lastBaseUpdate,o===null?d.firstBaseUpdate=l:o.next=l,d.lastBaseUpdate=l}var Vr=!1;function yn(){if(Vr){var o=E;if(o!==null)throw o}}function Cr(o,l,d,v){Vr=!1;var _=o.updateQueue;Ue=!1;var N=_.firstBaseUpdate,H=_.lastBaseUpdate,rt=_.shared.pending;if(rt!==null){_.shared.pending=null;var gt=rt,Mt=gt.next;gt.next=null,H===null?N=Mt:H.next=Mt,H=gt;var Ht=o.alternate;Ht!==null&&(Ht=Ht.updateQueue,rt=Ht.lastBaseUpdate,rt!==H&&(rt===null?Ht.firstBaseUpdate=Mt:rt.next=Mt,Ht.lastBaseUpdate=gt))}if(N!==null){var Yt=_.baseState;H=0,Ht=Mt=gt=null,rt=N;do{var It=rt.lane&-536870913,kt=It!==rt.lane;if(kt?(dn&It)===It:(v&It)===It){It!==0&&It===b&&(Vr=!0),Ht!==null&&(Ht=Ht.next={lane:0,tag:rt.tag,payload:rt.payload,callback:null,next:null});t:{var me=o,Re=rt;It=l;var Wn=d;switch(Re.tag){case 1:if(me=Re.payload,typeof me=="function"){Yt=me.call(Wn,Yt,It);break t}Yt=me;break t;case 3:me.flags=me.flags&-65537|128;case 0:if(me=Re.payload,It=typeof me=="function"?me.call(Wn,Yt,It):me,It==null)break t;Yt=g({},Yt,It);break t;case 2:Ue=!0}}It=rt.callback,It!==null&&(o.flags|=64,kt&&(o.flags|=8192),kt=_.callbacks,kt===null?_.callbacks=[It]:kt.push(It))}else kt={lane:It,tag:rt.tag,payload:rt.payload,callback:rt.callback,next:null},Ht===null?(Mt=Ht=kt,gt=Yt):Ht=Ht.next=kt,H|=It;if(rt=rt.next,rt===null){if(rt=_.shared.pending,rt===null)break;kt=rt,rt=kt.next,kt.next=null,_.lastBaseUpdate=kt,_.shared.pending=null}}while(!0);Ht===null&&(gt=Yt),_.baseState=gt,_.firstBaseUpdate=Mt,_.lastBaseUpdate=Ht,N===null&&(_.shared.lanes=0),yf|=H,o.lanes=H,o.memoizedState=Yt}}function Cs(o,l){if(typeof o!="function")throw Error(n(191,o));o.call(l)}function er(o,l){var d=o.callbacks;if(d!==null)for(o.callbacks=null,o=0;o<d.length;o++)Cs(d[o],l)}var Ri=K(null),hr=K(0);function Xs(o,l){o=Fc,Y(hr,o),Y(Ri,l),Fc=o|l.baseLanes}function Co(){Y(hr,Fc),Y(Ri,Ri.current)}function Yi(){Fc=hr.current,P(Ri),P(hr)}var Oi=K(null),fr=null;function js(o){var l=o.alternate;Y(Di,Di.current&1),Y(Oi,o),fr===null&&(l===null||Ri.current!==null||l.memoizedState!==null)&&(fr=o)}function Fa(o){Y(Di,Di.current),Y(Oi,o),fr===null&&(fr=o)}function _i(o){o.tag===22?(Y(Di,Di.current),Y(Oi,o),fr===null&&(fr=o)):Ba()}function Ba(){Y(Di,Di.current),Y(Oi,Oi.current)}function Ts(o){P(Oi),fr===o&&(fr=null),P(Di)}var Di=K(0);function Ec(o){for(var l=o;l!==null;){if(l.tag===13){var d=l.memoizedState;if(d!==null&&(d=d.dehydrated,d===null||X_(d)||j_(d)))return l}else if(l.tag===19&&(l.memoizedProps.revealOrder==="forwards"||l.memoizedProps.revealOrder==="backwards"||l.memoizedProps.revealOrder==="unstable_legacy-backwards"||l.memoizedProps.revealOrder==="together")){if((l.flags&128)!==0)return l}else if(l.child!==null){l.child.return=l,l=l.child;continue}if(l===o)break;for(;l.sibling===null;){if(l.return===null||l.return===o)return null;l=l.return}l.sibling.return=l.return,l=l.sibling}return null}var Js=0,Be=null,en=null,ii=null,_l=!1,Cc=!1,Oa=!1,i0=0,Cu=0,Tu=null,dg=0;function Yn(){throw Error(n(321))}function X1(o,l){if(l===null)return!1;for(var d=0;d<l.length&&d<o.length;d++)if(!Ur(o[d],l[d]))return!1;return!0}function j1(o,l,d,v,_,N){return Js=N,Be=l,l.memoizedState=null,l.updateQueue=null,l.lanes=0,nt.H=o===null||o.memoizedState===null?qC:s_,Oa=!1,N=d(v,_),Oa=!1,Cc&&(N=wl(l,d,v,_)),pg(o),N}function pg(o){nt.H=iv;var l=en!==null&&en.next!==null;if(Js=0,ii=en=Be=null,_l=!1,Cu=0,Tu=null,l)throw Error(n(300));o===null||pr||(o=o.dependencies,o!==null&&cg(o)&&(pr=!0))}function wl(o,l,d,v){Be=o;var _=0;do{if(Cc&&(Tu=null),Cu=0,Cc=!1,25<=_)throw Error(n(301));if(_+=1,ii=en=null,o.updateQueue!=null){var N=o.updateQueue;N.lastEffect=null,N.events=null,N.stores=null,N.memoCache!=null&&(N.memoCache.index=0)}nt.H=zC,N=l(d,v)}while(Cc);return N}function QA(){var o=nt.H,l=o.useState()[0];return l=typeof l.then=="function"?Nu(l):l,o=o.useState()[0],(en!==null?en.memoizedState:null)!==o&&(Be.flags|=1024),l}function J1(){var o=i0!==0;return i0=0,o}function K1(o,l,d){l.updateQueue=o.updateQueue,l.flags&=-2053,o.lanes&=~d}function gg(o){if(_l){for(o=o.memoizedState;o!==null;){var l=o.queue;l!==null&&(l.pending=null),o=o.next}_l=!1}Js=0,ii=en=Be=null,Cc=!1,Cu=i0=0,Tu=null}function dr(){var o={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return ii===null?Be.memoizedState=ii=o:ii=ii.next=o,ii}function Li(){if(en===null){var o=Be.alternate;o=o!==null?o.memoizedState:null}else o=en.next;var l=ii===null?Be.memoizedState:ii.next;if(l!==null)ii=l,en=o;else{if(o===null)throw Be.alternate===null?Error(n(467)):Error(n(310));en=o,o={memoizedState:en.memoizedState,baseState:en.baseState,baseQueue:en.baseQueue,queue:en.queue,next:null},ii===null?Be.memoizedState=ii=o:ii=ii.next=o}return ii}function r0(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function Nu(o){var l=Cu;return Cu+=1,Tu===null&&(Tu=[]),o=Ft(Tu,o,l),l=Be,(ii===null?l.memoizedState:ii.next)===null&&(l=l.alternate,nt.H=l===null||l.memoizedState===null?qC:s_),o}function ff(o){if(o!==null&&typeof o=="object"){if(typeof o.then=="function")return Nu(o);if(o.$$typeof===R)return Er(o)}throw Error(n(438,String(o)))}function Tc(o){var l=null,d=Be.updateQueue;if(d!==null&&(l=d.memoCache),l==null){var v=Be.alternate;v!==null&&(v=v.updateQueue,v!==null&&(v=v.memoCache,v!=null&&(l={data:v.data.map(function(_){return _.slice()}),index:0})))}if(l==null&&(l={data:[],index:0}),d===null&&(d=r0(),Be.updateQueue=d),d.memoCache=l,d=l.data[l.index],d===void 0)for(d=l.data[l.index]=Array(o),v=0;v<o;v++)d[v]=J;return l.index++,d}function Ua(o,l){return typeof l=="function"?l(o):l}function mg(o){var l=Li();return df(l,en,o)}function df(o,l,d){var v=o.queue;if(v===null)throw Error(n(311));v.lastRenderedReducer=d;var _=o.baseQueue,N=v.pending;if(N!==null){if(_!==null){var H=_.next;_.next=N.next,N.next=H}l.baseQueue=_=N,v.pending=null}if(N=o.baseState,_===null)o.memoizedState=N;else{l=_.next;var rt=H=null,gt=null,Mt=l,Ht=!1;do{var Yt=Mt.lane&-536870913;if(Yt!==Mt.lane?(dn&Yt)===Yt:(Js&Yt)===Yt){var It=Mt.revertLane;if(It===0)gt!==null&&(gt=gt.next={lane:0,revertLane:0,gesture:null,action:Mt.action,hasEagerState:Mt.hasEagerState,eagerState:Mt.eagerState,next:null}),Yt===b&&(Ht=!0);else if((Js&It)===It){Mt=Mt.next,It===b&&(Ht=!0);continue}else Yt={lane:0,revertLane:Mt.revertLane,gesture:null,action:Mt.action,hasEagerState:Mt.hasEagerState,eagerState:Mt.eagerState,next:null},gt===null?(rt=gt=Yt,H=N):gt=gt.next=Yt,Be.lanes|=It,yf|=It;Yt=Mt.action,Oa&&d(N,Yt),N=Mt.hasEagerState?Mt.eagerState:d(N,Yt)}else It={lane:Yt,revertLane:Mt.revertLane,gesture:Mt.gesture,action:Mt.action,hasEagerState:Mt.hasEagerState,eagerState:Mt.eagerState,next:null},gt===null?(rt=gt=It,H=N):gt=gt.next=It,Be.lanes|=Yt,yf|=Yt;Mt=Mt.next}while(Mt!==null&&Mt!==l);if(gt===null?H=N:gt.next=rt,!Ur(N,o.memoizedState)&&(pr=!0,Ht&&(d=E,d!==null)))throw d;o.memoizedState=N,o.baseState=H,o.baseQueue=gt,v.lastRenderedState=N}return _===null&&(v.lanes=0),[o.memoizedState,v.dispatch]}function vg(o){var l=Li(),d=l.queue;if(d===null)throw Error(n(311));d.lastRenderedReducer=o;var v=d.dispatch,_=d.pending,N=l.memoizedState;if(_!==null){d.pending=null;var H=_=_.next;do N=o(N,H.action),H=H.next;while(H!==_);Ur(N,l.memoizedState)||(pr=!0),l.memoizedState=N,l.baseQueue===null&&(l.baseState=N),d.lastRenderedState=N}return[N,v]}function yg(o,l,d){var v=Be,_=Li(),N=an;if(N){if(d===void 0)throw Error(n(407));d=d()}else d=l();var H=!Ur((en||_).memoizedState,d);if(H&&(_.memoizedState=d,pr=!0),_=_.queue,ZA(Z1.bind(null,v,_,o),[o]),_.getSnapshot!==l||H||ii!==null&&ii.memoizedState.tag&1){if(v.flags|=2048,Rc(9,{destroy:void 0},Q1.bind(null,v,_,d,l),null),ri===null)throw Error(n(349));N||(Js&127)!==0||Sl(v,l,d)}return d}function Sl(o,l,d){o.flags|=16384,o={getSnapshot:l,value:d},l=Be.updateQueue,l===null?(l=r0(),Be.updateQueue=l,l.stores=[o]):(d=l.stores,d===null?l.stores=[o]:d.push(o))}function Q1(o,l,d,v){l.value=d,l.getSnapshot=v,dx(l)&&tv(o)}function Z1(o,l,d){return d(function(){dx(l)&&tv(o)})}function dx(o){var l=o.getSnapshot;o=o.value;try{var d=l();return!Ur(o,d)}catch{return!0}}function tv(o){var l=bl(o,2);l!==null&&Lo(l,o,2)}function Ru(o){var l=dr();if(typeof o=="function"){var d=o;if(o=d(),Oa){nn(!0);try{d()}finally{nn(!1)}}}return l.memoizedState=l.baseState=o,l.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Ua,lastRenderedState:o},l}function px(o,l,d,v){return o.baseState=d,df(o,en,typeof v=="function"?v:Ua)}function gx(o,l,d,v,_){if(xx(o))throw Error(n(485));if(o=l.action,o!==null){var N={payload:_,action:o,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(H){N.listeners.push(H)}};nt.T!==null?d(!0):N.isTransition=!1,v(N),d=l.pending,d===null?(N.next=l.pending=N,mx(l,N)):(N.next=d.next,l.pending=d.next=N)}}function mx(o,l){var d=l.action,v=l.payload,_=o.state;if(l.isTransition){var N=nt.T,H={};nt.T=H;try{var rt=d(_,v),gt=nt.S;gt!==null&&gt(H,rt),ev(o,l,rt)}catch(Mt){Nc(o,l,Mt)}finally{N!==null&&H.types!==null&&(N.types=H.types),nt.T=N}}else try{N=d(_,v),ev(o,l,N)}catch(Mt){Nc(o,l,Mt)}}function ev(o,l,d){d!==null&&typeof d=="object"&&typeof d.then=="function"?d.then(function(v){vx(o,l,v)},function(v){return Nc(o,l,v)}):vx(o,l,d)}function vx(o,l,d){l.status="fulfilled",l.value=d,xg(l),o.state=d,l=o.pending,l!==null&&(d=l.next,d===l?o.pending=null:(d=d.next,l.next=d,mx(o,d)))}function Nc(o,l,d){var v=o.pending;if(o.pending=null,v!==null){v=v.next;do l.status="rejected",l.reason=d,xg(l),l=l.next;while(l!==v)}o.action=null}function xg(o){o=o.listeners;for(var l=0;l<o.length;l++)(0,o[l])()}function s0(o,l){return l}function Ha(o,l){if(an){var d=ri.formState;if(d!==null){t:{var v=Be;if(an){if(ni){e:{for(var _=ni,N=Ti;_.nodeType!==8;){if(!N){_=null;break e}if(_=qa(_.nextSibling),_===null){_=null;break e}}N=_.data,_=N==="F!"||N==="F"?_:null}if(_){ni=qa(_.nextSibling),v=_.data==="F!";break t}}Au(v)}v=!1}v&&(l=d[0])}}return d=dr(),d.memoizedState=d.baseState=l,v={pending:null,lanes:0,dispatch:null,lastRenderedReducer:s0,lastRenderedState:l},d.queue=v,d=OC.bind(null,Be,v),v.dispatch=d,v=Ru(!1),N=r_.bind(null,Be,!1,v.queue),v=dr(),_={state:l,dispatch:null,action:o,pending:null},v.queue=_,d=gx.bind(null,Be,_,N,d),_.dispatch=d,v.memoizedState=o,[l,d,!1]}function El(o){var l=Li();return Cl(l,en,o)}function Cl(o,l,d){if(l=df(o,l,s0)[0],o=mg(Ua)[0],typeof l=="object"&&l!==null&&typeof l.then=="function")try{var v=Nu(l)}catch(H){throw H===yt?Rt:H}else v=l;l=Li();var _=l.queue,N=_.dispatch;return d!==l.memoizedState&&(Be.flags|=2048,Rc(9,{destroy:void 0},bg.bind(null,_,d),null)),[v,N,o]}function bg(o,l){o.action=l}function Ag(o){var l=Li(),d=en;if(d!==null)return Cl(l,d,o);Li(),l=l.memoizedState,d=Li();var v=d.queue.dispatch;return d.memoizedState=o,[l,v,!1]}function Rc(o,l,d,v){return o={tag:o,create:d,deps:v,inst:l,next:null},l=Be.updateQueue,l===null&&(l=r0(),Be.updateQueue=l),d=l.lastEffect,d===null?l.lastEffect=o.next=o:(v=d.next,d.next=o,o.next=v,l.lastEffect=o),o}function yx(){return Li().memoizedState}function pf(o,l,d,v){var _=dr();Be.flags|=o,_.memoizedState=Rc(1|l,{destroy:void 0},d,v===void 0?null:v)}function gf(o,l,d,v){var _=Li();v=v===void 0?null:v;var N=_.memoizedState.inst;en!==null&&v!==null&&X1(v,en.memoizedState.deps)?_.memoizedState=Rc(l,N,d,v):(Be.flags|=o,_.memoizedState=Rc(1|l,N,d,v))}function SC(o,l){pf(8390656,8,o,l)}function ZA(o,l){gf(2048,8,o,l)}function fM(o){Be.flags|=4;var l=Be.updateQueue;if(l===null)l=r0(),Be.updateQueue=l,l.events=[o];else{var d=l.events;d===null?l.events=[o]:d.push(o)}}function EC(o){var l=Li().memoizedState;return fM({ref:l,nextImpl:o}),function(){if((In&2)!==0)throw Error(n(440));return l.impl.apply(void 0,arguments)}}function CC(o,l){return gf(4,2,o,l)}function TC(o,l){return gf(4,4,o,l)}function NC(o,l){if(typeof l=="function"){o=o();var d=l(o);return function(){typeof d=="function"?d():l(null)}}if(l!=null)return o=o(),l.current=o,function(){l.current=null}}function RC(o,l,d){d=d!=null?d.concat([o]):null,gf(4,4,NC.bind(null,l,o),d)}function t_(){}function DC(o,l){var d=Li();l=l===void 0?null:l;var v=d.memoizedState;return l!==null&&X1(l,v[1])?v[0]:(d.memoizedState=[o,l],o)}function LC(o,l){var d=Li();l=l===void 0?null:l;var v=d.memoizedState;if(l!==null&&X1(l,v[1]))return v[0];if(v=o(),Oa){nn(!0);try{o()}finally{nn(!1)}}return d.memoizedState=[v,l],v}function e_(o,l,d){return d===void 0||(Js&1073741824)!==0&&(dn&261930)===0?o.memoizedState=l:(o.memoizedState=d,o=M4(),Be.lanes|=o,yf|=o,d)}function MC(o,l,d,v){return Ur(d,l)?d:Ri.current!==null?(o=e_(o,d,v),Ur(o,l)||(pr=!0),o):(Js&42)===0||(Js&1073741824)!==0&&(dn&261930)===0?(pr=!0,o.memoizedState=d):(o=M4(),Be.lanes|=o,yf|=o,l)}function IC(o,l,d,v,_){var N=at.p;at.p=N!==0&&8>N?N:8;var H=nt.T,rt={};nt.T=rt,r_(o,!1,l,d);try{var gt=_(),Mt=nt.S;if(Mt!==null&&Mt(rt,gt),gt!==null&&typeof gt=="object"&&typeof gt.then=="function"){var Ht=W(gt,v);nv(o,l,Ht,na(o))}else nv(o,l,v,na(o))}catch(Yt){nv(o,l,{then:function(){},status:"rejected",reason:Yt},na())}finally{at.p=N,H!==null&&rt.types!==null&&(H.types=rt.types),nt.T=H}}function dM(){}function n_(o,l,d,v){if(o.tag!==5)throw Error(n(476));var _=PC(o).queue;IC(o,_,l,ht,d===null?dM:function(){return kC(o),d(v)})}function PC(o){var l=o.memoizedState;if(l!==null)return l;l={memoizedState:ht,baseState:ht,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Ua,lastRenderedState:ht},next:null};var d={};return l.next={memoizedState:d,baseState:d,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Ua,lastRenderedState:d},next:null},o.memoizedState=l,o=o.alternate,o!==null&&(o.memoizedState=l),l}function kC(o){var l=PC(o);l.next===null&&(l=o.alternate.memoizedState),nv(o,l.next.queue,{},na())}function i_(){return Er(xv)}function FC(){return Li().memoizedState}function BC(){return Li().memoizedState}function pM(o){for(var l=o.return;l!==null;){switch(l.tag){case 24:case 3:var d=na();o=Ne(d);var v=On(l,o,d);v!==null&&(Lo(v,l,d),cr(v,l,d)),l={cache:hf()},o.payload=l;return}l=l.return}}function gM(o,l,d){var v=na();d={lane:v,revertLane:0,gesture:null,action:d,hasEagerState:!1,eagerState:null,next:null},xx(o)?UC(l,d):(d=sf(o,l,d,v),d!==null&&(Lo(d,o,v),HC(d,l,v)))}function OC(o,l,d){var v=na();nv(o,l,d,v)}function nv(o,l,d,v){var _={lane:v,revertLane:0,gesture:null,action:d,hasEagerState:!1,eagerState:null,next:null};if(xx(o))UC(l,_);else{var N=o.alternate;if(o.lanes===0&&(N===null||N.lanes===0)&&(N=l.lastRenderedReducer,N!==null))try{var H=l.lastRenderedState,rt=N(H,d);if(_.hasEagerState=!0,_.eagerState=rt,Ur(rt,H))return xl(o,l,_,0),ri===null&&yu(),!1}catch{}finally{}if(d=sf(o,l,_,v),d!==null)return Lo(d,o,v),HC(d,l,v),!0}return!1}function r_(o,l,d,v){if(v={lane:2,revertLane:F_(),gesture:null,action:v,hasEagerState:!1,eagerState:null,next:null},xx(o)){if(l)throw Error(n(479))}else l=sf(o,d,v,2),l!==null&&Lo(l,o,2)}function xx(o){var l=o.alternate;return o===Be||l!==null&&l===Be}function UC(o,l){Cc=_l=!0;var d=o.pending;d===null?l.next=l:(l.next=d.next,d.next=l),o.pending=l}function HC(o,l,d){if((d&4194048)!==0){var v=l.lanes;v&=o.pendingLanes,d|=v,l.lanes=d,ti(o,d)}}var iv={readContext:Er,use:ff,useCallback:Yn,useContext:Yn,useEffect:Yn,useImperativeHandle:Yn,useLayoutEffect:Yn,useInsertionEffect:Yn,useMemo:Yn,useReducer:Yn,useRef:Yn,useState:Yn,useDebugValue:Yn,useDeferredValue:Yn,useTransition:Yn,useSyncExternalStore:Yn,useId:Yn,useHostTransitionStatus:Yn,useFormState:Yn,useActionState:Yn,useOptimistic:Yn,useMemoCache:Yn,useCacheRefresh:Yn};iv.useEffectEvent=Yn;var qC={readContext:Er,use:ff,useCallback:function(o,l){return dr().memoizedState=[o,l===void 0?null:l],o},useContext:Er,useEffect:SC,useImperativeHandle:function(o,l,d){d=d!=null?d.concat([o]):null,pf(4194308,4,NC.bind(null,l,o),d)},useLayoutEffect:function(o,l){return pf(4194308,4,o,l)},useInsertionEffect:function(o,l){pf(4,2,o,l)},useMemo:function(o,l){var d=dr();l=l===void 0?null:l;var v=o();if(Oa){nn(!0);try{o()}finally{nn(!1)}}return d.memoizedState=[v,l],v},useReducer:function(o,l,d){var v=dr();if(d!==void 0){var _=d(l);if(Oa){nn(!0);try{d(l)}finally{nn(!1)}}}else _=l;return v.memoizedState=v.baseState=_,o={pending:null,lanes:0,dispatch:null,lastRenderedReducer:o,lastRenderedState:_},v.queue=o,o=o.dispatch=gM.bind(null,Be,o),[v.memoizedState,o]},useRef:function(o){var l=dr();return o={current:o},l.memoizedState=o},useState:function(o){o=Ru(o);var l=o.queue,d=OC.bind(null,Be,l);return l.dispatch=d,[o.memoizedState,d]},useDebugValue:t_,useDeferredValue:function(o,l){var d=dr();return e_(d,o,l)},useTransition:function(){var o=Ru(!1);return o=IC.bind(null,Be,o.queue,!0,!1),dr().memoizedState=o,[!1,o]},useSyncExternalStore:function(o,l,d){var v=Be,_=dr();if(an){if(d===void 0)throw Error(n(407));d=d()}else{if(d=l(),ri===null)throw Error(n(349));(dn&127)!==0||Sl(v,l,d)}_.memoizedState=d;var N={value:d,getSnapshot:l};return _.queue=N,SC(Z1.bind(null,v,N,o),[o]),v.flags|=2048,Rc(9,{destroy:void 0},Q1.bind(null,v,N,d,l),null),d},useId:function(){var o=dr(),l=ri.identifierPrefix;if(an){var d=So,v=wo;d=(v&~(1<<32-tn(v)-1)).toString(32)+d,l="_"+l+"R_"+d,d=i0++,0<d&&(l+="H"+d.toString(32)),l+="_"}else d=dg++,l="_"+l+"r_"+d.toString(32)+"_";return o.memoizedState=l},useHostTransitionStatus:i_,useFormState:Ha,useActionState:Ha,useOptimistic:function(o){var l=dr();l.memoizedState=l.baseState=o;var d={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return l.queue=d,l=r_.bind(null,Be,!0,d),d.dispatch=l,[o,l]},useMemoCache:Tc,useCacheRefresh:function(){return dr().memoizedState=pM.bind(null,Be)},useEffectEvent:function(o){var l=dr(),d={impl:o};return l.memoizedState=d,function(){if((In&2)!==0)throw Error(n(440));return d.impl.apply(void 0,arguments)}}},s_={readContext:Er,use:ff,useCallback:DC,useContext:Er,useEffect:ZA,useImperativeHandle:RC,useInsertionEffect:CC,useLayoutEffect:TC,useMemo:LC,useReducer:mg,useRef:yx,useState:function(){return mg(Ua)},useDebugValue:t_,useDeferredValue:function(o,l){var d=Li();return MC(d,en.memoizedState,o,l)},useTransition:function(){var o=mg(Ua)[0],l=Li().memoizedState;return[typeof o=="boolean"?o:Nu(o),l]},useSyncExternalStore:yg,useId:FC,useHostTransitionStatus:i_,useFormState:El,useActionState:El,useOptimistic:function(o,l){var d=Li();return px(d,en,o,l)},useMemoCache:Tc,useCacheRefresh:BC};s_.useEffectEvent=EC;var zC={readContext:Er,use:ff,useCallback:DC,useContext:Er,useEffect:ZA,useImperativeHandle:RC,useInsertionEffect:CC,useLayoutEffect:TC,useMemo:LC,useReducer:vg,useRef:yx,useState:function(){return vg(Ua)},useDebugValue:t_,useDeferredValue:function(o,l){var d=Li();return en===null?e_(d,o,l):MC(d,en.memoizedState,o,l)},useTransition:function(){var o=vg(Ua)[0],l=Li().memoizedState;return[typeof o=="boolean"?o:Nu(o),l]},useSyncExternalStore:yg,useId:FC,useHostTransitionStatus:i_,useFormState:Ag,useActionState:Ag,useOptimistic:function(o,l){var d=Li();return en!==null?px(d,en,o,l):(d.baseState=o,[o,d.queue.dispatch])},useMemoCache:Tc,useCacheRefresh:BC};zC.useEffectEvent=EC;function o_(o,l,d,v){l=o.memoizedState,d=d(v,l),d=d==null?l:g({},l,d),o.memoizedState=d,o.lanes===0&&(o.updateQueue.baseState=d)}var a_={enqueueSetState:function(o,l,d){o=o._reactInternals;var v=na(),_=Ne(v);_.payload=l,d!=null&&(_.callback=d),l=On(o,_,v),l!==null&&(Lo(l,o,v),cr(l,o,v))},enqueueReplaceState:function(o,l,d){o=o._reactInternals;var v=na(),_=Ne(v);_.tag=1,_.payload=l,d!=null&&(_.callback=d),l=On(o,_,v),l!==null&&(Lo(l,o,v),cr(l,o,v))},enqueueForceUpdate:function(o,l){o=o._reactInternals;var d=na(),v=Ne(d);v.tag=2,l!=null&&(v.callback=l),l=On(o,v,d),l!==null&&(Lo(l,o,d),cr(l,o,d))}};function GC(o,l,d,v,_,N,H){return o=o.stateNode,typeof o.shouldComponentUpdate=="function"?o.shouldComponentUpdate(v,N,H):l.prototype&&l.prototype.isPureReactComponent?!yo(d,v)||!yo(_,N):!0}function VC(o,l,d,v){o=l.state,typeof l.componentWillReceiveProps=="function"&&l.componentWillReceiveProps(d,v),typeof l.UNSAFE_componentWillReceiveProps=="function"&&l.UNSAFE_componentWillReceiveProps(d,v),l.state!==o&&a_.enqueueReplaceState(l,l.state,null)}function o0(o,l){var d=l;if("ref"in l){d={};for(var v in l)v!=="ref"&&(d[v]=l[v])}if(o=o.defaultProps){d===l&&(d=g({},d));for(var _ in o)d[_]===void 0&&(d[_]=o[_])}return d}function YC(o){Ln(o)}function $C(o){console.error(o)}function WC(o){Ln(o)}function bx(o,l){try{var d=o.onUncaughtError;d(l.value,{componentStack:l.stack})}catch(v){setTimeout(function(){throw v})}}function XC(o,l,d){try{var v=o.onCaughtError;v(d.value,{componentStack:d.stack,errorBoundary:l.tag===1?l.stateNode:null})}catch(_){setTimeout(function(){throw _})}}function l_(o,l,d){return d=Ne(d),d.tag=3,d.payload={element:null},d.callback=function(){bx(o,l)},d}function jC(o){return o=Ne(o),o.tag=3,o}function JC(o,l,d,v){var _=d.type.getDerivedStateFromError;if(typeof _=="function"){var N=v.value;o.payload=function(){return _(N)},o.callback=function(){XC(l,d,v)}}var H=d.stateNode;H!==null&&typeof H.componentDidCatch=="function"&&(o.callback=function(){XC(l,d,v),typeof _!="function"&&(xf===null?xf=new Set([this]):xf.add(this));var rt=v.stack;this.componentDidCatch(v.value,{componentStack:rt!==null?rt:""})})}function mM(o,l,d,v,_){if(d.flags|=32768,v!==null&&typeof v=="object"&&typeof v.then=="function"){if(l=d.alternate,l!==null&&Su(l,d,_,!0),d=Oi.current,d!==null){switch(d.tag){case 31:case 13:return fr===null?Mx():d.alternate===null&&$i===0&&($i=3),d.flags&=-257,d.flags|=65536,d.lanes=_,v===Et?d.flags|=16384:(l=d.updateQueue,l===null?d.updateQueue=new Set([v]):l.add(v),I_(o,v,_)),!1;case 22:return d.flags|=65536,v===Et?d.flags|=16384:(l=d.updateQueue,l===null?(l={transitions:null,markerInstances:null,retryQueue:new Set([v])},d.updateQueue=l):(d=l.retryQueue,d===null?l.retryQueue=new Set([v]):d.add(v)),I_(o,v,_)),!1}throw Error(n(435,d.tag))}return I_(o,v,_),Mx(),!1}if(an)return l=Oi.current,l!==null?((l.flags&65536)===0&&(l.flags|=256),l.flags|=65536,l.lanes=_,v!==Zo&&(o=Error(n(422),{cause:v}),uf(bo(o,d)))):(v!==Zo&&(l=Error(n(423),{cause:v}),uf(bo(l,d))),o=o.current.alternate,o.flags|=65536,_&=-_,o.lanes|=_,v=bo(v,d),_=l_(o.stateNode,v,_),Ni(o,_),$i!==4&&($i=2)),!1;var N=Error(n(520),{cause:v});if(N=bo(N,d),hv===null?hv=[N]:hv.push(N),$i!==4&&($i=2),l===null)return!0;v=bo(v,d),d=l;do{switch(d.tag){case 3:return d.flags|=65536,o=_&-_,d.lanes|=o,o=l_(d.stateNode,v,o),Ni(d,o),!1;case 1:if(l=d.type,N=d.stateNode,(d.flags&128)===0&&(typeof l.getDerivedStateFromError=="function"||N!==null&&typeof N.componentDidCatch=="function"&&(xf===null||!xf.has(N))))return d.flags|=65536,_&=-_,d.lanes|=_,_=jC(_),JC(_,o,d,v),Ni(d,_),!1}d=d.return}while(d!==null);return!1}var u_=Error(n(461)),pr=!1;function ls(o,l,d,v){l.child=o===null?fn(l,null,d,v):ln(l,o.child,d,v)}function KC(o,l,d,v,_){d=d.render;var N=l.ref;if("ref"in v){var H={};for(var rt in v)rt!=="ref"&&(H[rt]=v[rt])}else H=v;return Eu(l),v=j1(o,l,d,H,N,_),rt=J1(),o!==null&&!pr?(K1(o,l,_),Dc(o,l,_)):(an&&rt&&Y1(l),l.flags|=1,ls(o,l,v,_),l.child)}function QC(o,l,d,v,_){if(o===null){var N=d.type;return typeof N=="function"&&!rg(N)&&N.defaultProps===void 0&&d.compare===null?(l.tag=15,l.type=N,ZC(o,l,N,v,_)):(o=of(d.type,null,v,l,l.mode,_),o.ref=l.ref,o.return=l,l.child=o)}if(N=o.child,!v_(o,_)){var H=N.memoizedProps;if(d=d.compare,d=d!==null?d:yo,d(H,v)&&o.ref===l.ref)return Dc(o,l,_)}return l.flags|=1,o=xo(N,v),o.ref=l.ref,o.return=l,l.child=o}function ZC(o,l,d,v,_){if(o!==null){var N=o.memoizedProps;if(yo(N,v)&&o.ref===l.ref)if(pr=!1,l.pendingProps=v=N,v_(o,_))(o.flags&131072)!==0&&(pr=!0);else return l.lanes=o.lanes,Dc(o,l,_)}return c_(o,l,d,v,_)}function t4(o,l,d,v){var _=v.children,N=o!==null?o.memoizedState:null;if(o===null&&l.stateNode===null&&(l.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),v.mode==="hidden"){if((l.flags&128)!==0){if(N=N!==null?N.baseLanes|d:d,o!==null){for(v=l.child=o.child,_=0;v!==null;)_=_|v.lanes|v.childLanes,v=v.sibling;v=_&~N}else v=0,l.child=null;return e4(o,l,N,d,v)}if((d&536870912)!==0)l.memoizedState={baseLanes:0,cachePool:null},o!==null&&ot(l,N!==null?N.cachePool:null),N!==null?Xs(l,N):Co(),_i(l);else return v=l.lanes=536870912,e4(o,l,N!==null?N.baseLanes|d:d,d,v)}else N!==null?(ot(l,N.cachePool),Xs(l,N),Ba(),l.memoizedState=null):(o!==null&&ot(l,null),Co(),Ba());return ls(o,l,_,d),l.child}function rv(o,l){return o!==null&&o.tag===22||l.stateNode!==null||(l.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),l.sibling}function e4(o,l,d,v,_){var N=it();return N=N===null?null:{parent:Bi._currentValue,pool:N},l.memoizedState={baseLanes:d,cachePool:N},o!==null&&ot(l,null),Co(),_i(l),o!==null&&Su(o,l,v,!0),l.childLanes=_,null}function Ax(o,l){return l=wx({mode:l.mode,children:l.children},o.mode),l.ref=o.ref,o.child=l,l.return=o,l}function n4(o,l,d){return ln(l,o.child,null,d),o=Ax(l,l.pendingProps),o.flags|=2,Ts(l),l.memoizedState=null,o}function vM(o,l,d){var v=l.pendingProps,_=(l.flags&128)!==0;if(l.flags&=-129,o===null){if(an){if(v.mode==="hidden")return o=Ax(l,v),l.lanes=536870912,rv(null,o);if(Fa(l),(o=ni)?(o=p3(o,Ti),o=o!==null&&o.data==="&"?o:null,o!==null&&(l.memoizedState={dehydrated:o,treeContext:bu!==null?{id:wo,overflow:So}:null,retryLane:536870912,hydrationErrors:null},d=sg(o),d.return=l,l.child=d,wr=l,ni=null)):o=null,o===null)throw Au(l);return l.lanes=536870912,null}return Ax(l,v)}var N=o.memoizedState;if(N!==null){var H=N.dehydrated;if(Fa(l),_)if(l.flags&256)l.flags&=-257,l=n4(o,l,d);else if(l.memoizedState!==null)l.child=o.child,l.flags|=128,l=null;else throw Error(n(558));else if(pr||Su(o,l,d,!1),_=(d&o.childLanes)!==0,pr||_){if(v=ri,v!==null&&(H=ci(v,d),H!==0&&H!==N.retryLane))throw N.retryLane=H,bl(o,H),Lo(v,o,H),u_;Mx(),l=n4(o,l,d)}else o=N.treeContext,ni=qa(H.nextSibling),wr=l,an=!0,as=null,Ti=!1,o!==null&&hx(l,o),l=Ax(l,v),l.flags|=4096;return l}return o=xo(o.child,{mode:v.mode,children:v.children}),o.ref=l.ref,l.child=o,o.return=l,o}function _x(o,l){var d=l.ref;if(d===null)o!==null&&o.ref!==null&&(l.flags|=4194816);else{if(typeof d!="function"&&typeof d!="object")throw Error(n(284));(o===null||o.ref!==d)&&(l.flags|=4194816)}}function c_(o,l,d,v,_){return Eu(l),d=j1(o,l,d,v,void 0,_),v=J1(),o!==null&&!pr?(K1(o,l,_),Dc(o,l,_)):(an&&v&&Y1(l),l.flags|=1,ls(o,l,d,_),l.child)}function i4(o,l,d,v,_,N){return Eu(l),l.updateQueue=null,d=wl(l,v,d,_),pg(o),v=J1(),o!==null&&!pr?(K1(o,l,N),Dc(o,l,N)):(an&&v&&Y1(l),l.flags|=1,ls(o,l,d,N),l.child)}function r4(o,l,d,v,_){if(Eu(l),l.stateNode===null){var N=_r,H=d.contextType;typeof H=="object"&&H!==null&&(N=Er(H)),N=new d(v,N),l.memoizedState=N.state!==null&&N.state!==void 0?N.state:null,N.updater=a_,l.stateNode=N,N._reactInternals=l,N=l.stateNode,N.props=v,N.state=l.memoizedState,N.refs={},Mn(l),H=d.contextType,N.context=typeof H=="object"&&H!==null?Er(H):_r,N.state=l.memoizedState,H=d.getDerivedStateFromProps,typeof H=="function"&&(o_(l,d,H,v),N.state=l.memoizedState),typeof d.getDerivedStateFromProps=="function"||typeof N.getSnapshotBeforeUpdate=="function"||typeof N.UNSAFE_componentWillMount!="function"&&typeof N.componentWillMount!="function"||(H=N.state,typeof N.componentWillMount=="function"&&N.componentWillMount(),typeof N.UNSAFE_componentWillMount=="function"&&N.UNSAFE_componentWillMount(),H!==N.state&&a_.enqueueReplaceState(N,N.state,null),Cr(l,v,N,_),yn(),N.state=l.memoizedState),typeof N.componentDidMount=="function"&&(l.flags|=4194308),v=!0}else if(o===null){N=l.stateNode;var rt=l.memoizedProps,gt=o0(d,rt);N.props=gt;var Mt=N.context,Ht=d.contextType;H=_r,typeof Ht=="object"&&Ht!==null&&(H=Er(Ht));var Yt=d.getDerivedStateFromProps;Ht=typeof Yt=="function"||typeof N.getSnapshotBeforeUpdate=="function",rt=l.pendingProps!==rt,Ht||typeof N.UNSAFE_componentWillReceiveProps!="function"&&typeof N.componentWillReceiveProps!="function"||(rt||Mt!==H)&&VC(l,N,v,H),Ue=!1;var It=l.memoizedState;N.state=It,Cr(l,v,N,_),yn(),Mt=l.memoizedState,rt||It!==Mt||Ue?(typeof Yt=="function"&&(o_(l,d,Yt,v),Mt=l.memoizedState),(gt=Ue||GC(l,d,gt,v,It,Mt,H))?(Ht||typeof N.UNSAFE_componentWillMount!="function"&&typeof N.componentWillMount!="function"||(typeof N.componentWillMount=="function"&&N.componentWillMount(),typeof N.UNSAFE_componentWillMount=="function"&&N.UNSAFE_componentWillMount()),typeof N.componentDidMount=="function"&&(l.flags|=4194308)):(typeof N.componentDidMount=="function"&&(l.flags|=4194308),l.memoizedProps=v,l.memoizedState=Mt),N.props=v,N.state=Mt,N.context=H,v=gt):(typeof N.componentDidMount=="function"&&(l.flags|=4194308),v=!1)}else{N=l.stateNode,Tn(o,l),H=l.memoizedProps,Ht=o0(d,H),N.props=Ht,Yt=l.pendingProps,It=N.context,Mt=d.contextType,gt=_r,typeof Mt=="object"&&Mt!==null&&(gt=Er(Mt)),rt=d.getDerivedStateFromProps,(Mt=typeof rt=="function"||typeof N.getSnapshotBeforeUpdate=="function")||typeof N.UNSAFE_componentWillReceiveProps!="function"&&typeof N.componentWillReceiveProps!="function"||(H!==Yt||It!==gt)&&VC(l,N,v,gt),Ue=!1,It=l.memoizedState,N.state=It,Cr(l,v,N,_),yn();var kt=l.memoizedState;H!==Yt||It!==kt||Ue||o!==null&&o.dependencies!==null&&cg(o.dependencies)?(typeof rt=="function"&&(o_(l,d,rt,v),kt=l.memoizedState),(Ht=Ue||GC(l,d,Ht,v,It,kt,gt)||o!==null&&o.dependencies!==null&&cg(o.dependencies))?(Mt||typeof N.UNSAFE_componentWillUpdate!="function"&&typeof N.componentWillUpdate!="function"||(typeof N.componentWillUpdate=="function"&&N.componentWillUpdate(v,kt,gt),typeof N.UNSAFE_componentWillUpdate=="function"&&N.UNSAFE_componentWillUpdate(v,kt,gt)),typeof N.componentDidUpdate=="function"&&(l.flags|=4),typeof N.getSnapshotBeforeUpdate=="function"&&(l.flags|=1024)):(typeof N.componentDidUpdate!="function"||H===o.memoizedProps&&It===o.memoizedState||(l.flags|=4),typeof N.getSnapshotBeforeUpdate!="function"||H===o.memoizedProps&&It===o.memoizedState||(l.flags|=1024),l.memoizedProps=v,l.memoizedState=kt),N.props=v,N.state=kt,N.context=gt,v=Ht):(typeof N.componentDidUpdate!="function"||H===o.memoizedProps&&It===o.memoizedState||(l.flags|=4),typeof N.getSnapshotBeforeUpdate!="function"||H===o.memoizedProps&&It===o.memoizedState||(l.flags|=1024),v=!1)}return N=v,_x(o,l),v=(l.flags&128)!==0,N||v?(N=l.stateNode,d=v&&typeof d.getDerivedStateFromError!="function"?null:N.render(),l.flags|=1,o!==null&&v?(l.child=ln(l,o.child,null,_),l.child=ln(l,null,d,_)):ls(o,l,d,_),l.memoizedState=N.state,o=l.child):o=Dc(o,l,_),o}function s4(o,l,d,v){return wc(),l.flags|=256,ls(o,l,d,v),l.child}var h_={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function f_(o){return{baseLanes:o,cachePool:lt()}}function d_(o,l,d){return o=o!==null?o.childLanes&~d:0,l&&(o|=ea),o}function o4(o,l,d){var v=l.pendingProps,_=!1,N=(l.flags&128)!==0,H;if((H=N)||(H=o!==null&&o.memoizedState===null?!1:(Di.current&2)!==0),H&&(_=!0,l.flags&=-129),H=(l.flags&32)!==0,l.flags&=-33,o===null){if(an){if(_?js(l):Ba(),(o=ni)?(o=p3(o,Ti),o=o!==null&&o.data!=="&"?o:null,o!==null&&(l.memoizedState={dehydrated:o,treeContext:bu!==null?{id:wo,overflow:So}:null,retryLane:536870912,hydrationErrors:null},d=sg(o),d.return=l,l.child=d,wr=l,ni=null)):o=null,o===null)throw Au(l);return j_(o)?l.lanes=32:l.lanes=536870912,null}var rt=v.children;return v=v.fallback,_?(Ba(),_=l.mode,rt=wx({mode:"hidden",children:rt},_),v=xu(v,_,d,null),rt.return=l,v.return=l,rt.sibling=v,l.child=rt,v=l.child,v.memoizedState=f_(d),v.childLanes=d_(o,H,d),l.memoizedState=h_,rv(null,v)):(js(l),p_(l,rt))}var gt=o.memoizedState;if(gt!==null&&(rt=gt.dehydrated,rt!==null)){if(N)l.flags&256?(js(l),l.flags&=-257,l=g_(o,l,d)):l.memoizedState!==null?(Ba(),l.child=o.child,l.flags|=128,l=null):(Ba(),rt=v.fallback,_=l.mode,v=wx({mode:"visible",children:v.children},_),rt=xu(rt,_,d,null),rt.flags|=2,v.return=l,rt.return=l,v.sibling=rt,l.child=v,ln(l,o.child,null,d),v=l.child,v.memoizedState=f_(d),v.childLanes=d_(o,H,d),l.memoizedState=h_,l=rv(null,v));else if(js(l),j_(rt)){if(H=rt.nextSibling&&rt.nextSibling.dataset,H)var Mt=H.dgst;H=Mt,v=Error(n(419)),v.stack="",v.digest=H,uf({value:v,source:null,stack:null}),l=g_(o,l,d)}else if(pr||Su(o,l,d,!1),H=(d&o.childLanes)!==0,pr||H){if(H=ri,H!==null&&(v=ci(H,d),v!==0&&v!==gt.retryLane))throw gt.retryLane=v,bl(o,v),Lo(H,o,v),u_;X_(rt)||Mx(),l=g_(o,l,d)}else X_(rt)?(l.flags|=192,l.child=o.child,l=null):(o=gt.treeContext,ni=qa(rt.nextSibling),wr=l,an=!0,as=null,Ti=!1,o!==null&&hx(l,o),l=p_(l,v.children),l.flags|=4096);return l}return _?(Ba(),rt=v.fallback,_=l.mode,gt=o.child,Mt=gt.sibling,v=xo(gt,{mode:"hidden",children:v.children}),v.subtreeFlags=gt.subtreeFlags&65011712,Mt!==null?rt=xo(Mt,rt):(rt=xu(rt,_,d,null),rt.flags|=2),rt.return=l,v.return=l,v.sibling=rt,l.child=v,rv(null,v),v=l.child,rt=o.child.memoizedState,rt===null?rt=f_(d):(_=rt.cachePool,_!==null?(gt=Bi._currentValue,_=_.parent!==gt?{parent:gt,pool:gt}:_):_=lt(),rt={baseLanes:rt.baseLanes|d,cachePool:_}),v.memoizedState=rt,v.childLanes=d_(o,H,d),l.memoizedState=h_,rv(o.child,v)):(js(l),d=o.child,o=d.sibling,d=xo(d,{mode:"visible",children:v.children}),d.return=l,d.sibling=null,o!==null&&(H=l.deletions,H===null?(l.deletions=[o],l.flags|=16):H.push(o)),l.child=d,l.memoizedState=null,d)}function p_(o,l){return l=wx({mode:"visible",children:l},o.mode),l.return=o,o.child=l}function wx(o,l){return o=Gr(22,o,null,l),o.lanes=0,o}function g_(o,l,d){return ln(l,o.child,null,d),o=p_(l,l.pendingProps.children),o.flags|=2,l.memoizedState=null,o}function a4(o,l,d){o.lanes|=l;var v=o.alternate;v!==null&&(v.lanes|=l),cf(o.return,l,d)}function m_(o,l,d,v,_,N){var H=o.memoizedState;H===null?o.memoizedState={isBackwards:l,rendering:null,renderingStartTime:0,last:v,tail:d,tailMode:_,treeForkCount:N}:(H.isBackwards=l,H.rendering=null,H.renderingStartTime=0,H.last=v,H.tail=d,H.tailMode=_,H.treeForkCount=N)}function l4(o,l,d){var v=l.pendingProps,_=v.revealOrder,N=v.tail;v=v.children;var H=Di.current,rt=(H&2)!==0;if(rt?(H=H&1|2,l.flags|=128):H&=1,Y(Di,H),ls(o,l,v,d),v=an?t0:0,!rt&&o!==null&&(o.flags&128)!==0)t:for(o=l.child;o!==null;){if(o.tag===13)o.memoizedState!==null&&a4(o,d,l);else if(o.tag===19)a4(o,d,l);else if(o.child!==null){o.child.return=o,o=o.child;continue}if(o===l)break t;for(;o.sibling===null;){if(o.return===null||o.return===l)break t;o=o.return}o.sibling.return=o.return,o=o.sibling}switch(_){case"forwards":for(d=l.child,_=null;d!==null;)o=d.alternate,o!==null&&Ec(o)===null&&(_=d),d=d.sibling;d=_,d===null?(_=l.child,l.child=null):(_=d.sibling,d.sibling=null),m_(l,!1,_,d,N,v);break;case"backwards":case"unstable_legacy-backwards":for(d=null,_=l.child,l.child=null;_!==null;){if(o=_.alternate,o!==null&&Ec(o)===null){l.child=_;break}o=_.sibling,_.sibling=d,d=_,_=o}m_(l,!0,d,null,N,v);break;case"together":m_(l,!1,null,null,void 0,v);break;default:l.memoizedState=null}return l.child}function Dc(o,l,d){if(o!==null&&(l.dependencies=o.dependencies),yf|=l.lanes,(d&l.childLanes)===0)if(o!==null){if(Su(o,l,d,!1),(d&l.childLanes)===0)return null}else return null;if(o!==null&&l.child!==o.child)throw Error(n(153));if(l.child!==null){for(o=l.child,d=xo(o,o.pendingProps),l.child=d,d.return=l;o.sibling!==null;)o=o.sibling,d=d.sibling=xo(o,o.pendingProps),d.return=l;d.sibling=null}return l.child}function v_(o,l){return(o.lanes&l)!==0?!0:(o=o.dependencies,!!(o!==null&&cg(o)))}function yM(o,l,d){switch(l.tag){case 3:At(l,l.stateNode.containerInfo),wu(l,Bi,o.memoizedState.cache),wc();break;case 27:case 5:Xt(l);break;case 4:At(l,l.stateNode.containerInfo);break;case 10:wu(l,l.type,l.memoizedProps.value);break;case 31:if(l.memoizedState!==null)return l.flags|=128,Fa(l),null;break;case 13:var v=l.memoizedState;if(v!==null)return v.dehydrated!==null?(js(l),l.flags|=128,null):(d&l.child.childLanes)!==0?o4(o,l,d):(js(l),o=Dc(o,l,d),o!==null?o.sibling:null);js(l);break;case 19:var _=(o.flags&128)!==0;if(v=(d&l.childLanes)!==0,v||(Su(o,l,d,!1),v=(d&l.childLanes)!==0),_){if(v)return l4(o,l,d);l.flags|=128}if(_=l.memoizedState,_!==null&&(_.rendering=null,_.tail=null,_.lastEffect=null),Y(Di,Di.current),v)break;return null;case 22:return l.lanes=0,t4(o,l,d,l.pendingProps);case 24:wu(l,Bi,o.memoizedState.cache)}return Dc(o,l,d)}function u4(o,l,d){if(o!==null)if(o.memoizedProps!==l.pendingProps)pr=!0;else{if(!v_(o,d)&&(l.flags&128)===0)return pr=!1,yM(o,l,d);pr=(o.flags&131072)!==0}else pr=!1,an&&(l.flags&1048576)!==0&&cx(l,t0,l.index);switch(l.lanes=0,l.tag){case 16:t:{var v=l.pendingProps;if(o=xt(l.elementType),l.type=o,typeof o=="function")rg(o)?(v=o0(o,v),l.tag=1,l=r4(null,l,o,v,d)):(l.tag=0,l=c_(null,l,o,v,d));else{if(o!=null){var _=o.$$typeof;if(_===I){l.tag=11,l=KC(null,l,o,v,d);break t}else if(_===U){l.tag=14,l=QC(null,l,o,v,d);break t}}throw l=st(o)||o,Error(n(306,l,""))}}return l;case 0:return c_(o,l,l.type,l.pendingProps,d);case 1:return v=l.type,_=o0(v,l.pendingProps),r4(o,l,v,_,d);case 3:t:{if(At(l,l.stateNode.containerInfo),o===null)throw Error(n(387));v=l.pendingProps;var N=l.memoizedState;_=N.element,Tn(o,l),Cr(l,v,null,d);var H=l.memoizedState;if(v=H.cache,wu(l,Bi,v),v!==N.cache&&Sc(l,[Bi],d,!0),yn(),v=H.element,N.isDehydrated)if(N={element:v,isDehydrated:!1,cache:H.cache},l.updateQueue.baseState=N,l.memoizedState=N,l.flags&256){l=s4(o,l,v,d);break t}else if(v!==_){_=bo(Error(n(424)),l),uf(_),l=s4(o,l,v,d);break t}else{switch(o=l.stateNode.containerInfo,o.nodeType){case 9:o=o.body;break;default:o=o.nodeName==="HTML"?o.ownerDocument.body:o}for(ni=qa(o.firstChild),wr=l,an=!0,as=null,Ti=!0,d=fn(l,null,v,d),l.child=d;d;)d.flags=d.flags&-3|4096,d=d.sibling}else{if(wc(),v===_){l=Dc(o,l,d);break t}ls(o,l,v,d)}l=l.child}return l;case 26:return _x(o,l),o===null?(d=b3(l.type,null,l.pendingProps,null))?l.memoizedState=d:an||(d=l.type,o=l.pendingProps,v=Ux(ft.current).createElement(d),v[Bn]=l,v[di]=o,us(v,d,o),Vi(v),l.stateNode=v):l.memoizedState=b3(l.type,o.memoizedProps,l.pendingProps,o.memoizedState),null;case 27:return Xt(l),o===null&&an&&(v=l.stateNode=v3(l.type,l.pendingProps,ft.current),wr=l,Ti=!0,_=ni,wf(l.type)?(J_=_,ni=qa(v.firstChild)):ni=_),ls(o,l,l.pendingProps.children,d),_x(o,l),o===null&&(l.flags|=4194304),l.child;case 5:return o===null&&an&&((_=v=ni)&&(v=XM(v,l.type,l.pendingProps,Ti),v!==null?(l.stateNode=v,wr=l,ni=qa(v.firstChild),Ti=!1,_=!0):_=!1),_||Au(l)),Xt(l),_=l.type,N=l.pendingProps,H=o!==null?o.memoizedProps:null,v=N.children,Y_(_,N)?v=null:H!==null&&Y_(_,H)&&(l.flags|=32),l.memoizedState!==null&&(_=j1(o,l,QA,null,null,d),xv._currentValue=_),_x(o,l),ls(o,l,v,d),l.child;case 6:return o===null&&an&&((o=d=ni)&&(d=jM(d,l.pendingProps,Ti),d!==null?(l.stateNode=d,wr=l,ni=null,o=!0):o=!1),o||Au(l)),null;case 13:return o4(o,l,d);case 4:return At(l,l.stateNode.containerInfo),v=l.pendingProps,o===null?l.child=ln(l,null,v,d):ls(o,l,v,d),l.child;case 11:return KC(o,l,l.type,l.pendingProps,d);case 7:return ls(o,l,l.pendingProps,d),l.child;case 8:return ls(o,l,l.pendingProps.children,d),l.child;case 12:return ls(o,l,l.pendingProps.children,d),l.child;case 10:return v=l.pendingProps,wu(l,l.type,v.value),ls(o,l,v.children,d),l.child;case 9:return _=l.type._context,v=l.pendingProps.children,Eu(l),_=Er(_),v=v(_),l.flags|=1,ls(o,l,v,d),l.child;case 14:return QC(o,l,l.type,l.pendingProps,d);case 15:return ZC(o,l,l.type,l.pendingProps,d);case 19:return l4(o,l,d);case 31:return vM(o,l,d);case 22:return t4(o,l,d,l.pendingProps);case 24:return Eu(l),v=Er(Bi),o===null?(_=it(),_===null&&(_=ri,N=hf(),_.pooledCache=N,N.refCount++,N!==null&&(_.pooledCacheLanes|=d),_=N),l.memoizedState={parent:v,cache:_},Mn(l),wu(l,Bi,_)):((o.lanes&d)!==0&&(Tn(o,l),Cr(l,null,null,d),yn()),_=o.memoizedState,N=l.memoizedState,_.parent!==v?(_={parent:v,cache:v},l.memoizedState=_,l.lanes===0&&(l.memoizedState=l.updateQueue.baseState=_),wu(l,Bi,v)):(v=N.cache,wu(l,Bi,v),v!==_.cache&&Sc(l,[Bi],d,!0))),ls(o,l,l.pendingProps.children,d),l.child;case 29:throw l.pendingProps}throw Error(n(156,l.tag))}function Lc(o){o.flags|=4}function y_(o,l,d,v,_){if((l=(o.mode&32)!==0)&&(l=!1),l){if(o.flags|=16777216,(_&335544128)===_)if(o.stateNode.complete)o.flags|=8192;else if(F4())o.flags|=8192;else throw wt=Et,Dt}else o.flags&=-16777217}function c4(o,l){if(l.type!=="stylesheet"||(l.state.loading&4)!==0)o.flags&=-16777217;else if(o.flags|=16777216,!E3(l))if(F4())o.flags|=8192;else throw wt=Et,Dt}function Sx(o,l){l!==null&&(o.flags|=4),o.flags&16384&&(l=o.tag!==22?Gi():536870912,o.lanes|=l,Eg|=l)}function sv(o,l){if(!an)switch(o.tailMode){case"hidden":l=o.tail;for(var d=null;l!==null;)l.alternate!==null&&(d=l),l=l.sibling;d===null?o.tail=null:d.sibling=null;break;case"collapsed":d=o.tail;for(var v=null;d!==null;)d.alternate!==null&&(v=d),d=d.sibling;v===null?l||o.tail===null?o.tail=null:o.tail.sibling=null:v.sibling=null}}function wi(o){var l=o.alternate!==null&&o.alternate.child===o.child,d=0,v=0;if(l)for(var _=o.child;_!==null;)d|=_.lanes|_.childLanes,v|=_.subtreeFlags&65011712,v|=_.flags&65011712,_.return=o,_=_.sibling;else for(_=o.child;_!==null;)d|=_.lanes|_.childLanes,v|=_.subtreeFlags,v|=_.flags,_.return=o,_=_.sibling;return o.subtreeFlags|=v,o.childLanes=d,l}function xM(o,l,d){var v=l.pendingProps;switch(lg(l),l.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return wi(l),null;case 1:return wi(l),null;case 3:return d=l.stateNode,v=null,o!==null&&(v=o.memoizedState.cache),l.memoizedState.cache!==v&&(l.flags|=2048),Eo(Bi),Tt(),d.pendingContext&&(d.context=d.pendingContext,d.pendingContext=null),(o===null||o.child===null)&&(Sr(l)?Lc(l):o===null||o.memoizedState.isDehydrated&&(l.flags&256)===0||(l.flags|=1024,W1())),wi(l),null;case 26:var _=l.type,N=l.memoizedState;return o===null?(Lc(l),N!==null?(wi(l),c4(l,N)):(wi(l),y_(l,_,null,v,d))):N?N!==o.memoizedState?(Lc(l),wi(l),c4(l,N)):(wi(l),l.flags&=-16777217):(o=o.memoizedProps,o!==v&&Lc(l),wi(l),y_(l,_,o,v,d)),null;case 27:if($t(l),d=ft.current,_=l.type,o!==null&&l.stateNode!=null)o.memoizedProps!==v&&Lc(l);else{if(!v){if(l.stateNode===null)throw Error(n(166));return wi(l),null}o=j.current,Sr(l)?$1(l):(o=v3(_,v,d),l.stateNode=o,Lc(l))}return wi(l),null;case 5:if($t(l),_=l.type,o!==null&&l.stateNode!=null)o.memoizedProps!==v&&Lc(l);else{if(!v){if(l.stateNode===null)throw Error(n(166));return wi(l),null}if(N=j.current,Sr(l))$1(l);else{var H=Ux(ft.current);switch(N){case 1:N=H.createElementNS("http://www.w3.org/2000/svg",_);break;case 2:N=H.createElementNS("http://www.w3.org/1998/Math/MathML",_);break;default:switch(_){case"svg":N=H.createElementNS("http://www.w3.org/2000/svg",_);break;case"math":N=H.createElementNS("http://www.w3.org/1998/Math/MathML",_);break;case"script":N=H.createElement("div"),N.innerHTML="<script><\/script>",N=N.removeChild(N.firstChild);break;case"select":N=typeof v.is=="string"?H.createElement("select",{is:v.is}):H.createElement("select"),v.multiple?N.multiple=!0:v.size&&(N.size=v.size);break;default:N=typeof v.is=="string"?H.createElement(_,{is:v.is}):H.createElement(_)}}N[Bn]=l,N[di]=v;t:for(H=l.child;H!==null;){if(H.tag===5||H.tag===6)N.appendChild(H.stateNode);else if(H.tag!==4&&H.tag!==27&&H.child!==null){H.child.return=H,H=H.child;continue}if(H===l)break t;for(;H.sibling===null;){if(H.return===null||H.return===l)break t;H=H.return}H.sibling.return=H.return,H=H.sibling}l.stateNode=N;t:switch(us(N,_,v),_){case"button":case"input":case"select":case"textarea":v=!!v.autoFocus;break t;case"img":v=!0;break t;default:v=!1}v&&Lc(l)}}return wi(l),y_(l,l.type,o===null?null:o.memoizedProps,l.pendingProps,d),null;case 6:if(o&&l.stateNode!=null)o.memoizedProps!==v&&Lc(l);else{if(typeof v!="string"&&l.stateNode===null)throw Error(n(166));if(o=ft.current,Sr(l)){if(o=l.stateNode,d=l.memoizedProps,v=null,_=wr,_!==null)switch(_.tag){case 27:case 5:v=_.memoizedProps}o[Bn]=l,o=!!(o.nodeValue===d||v!==null&&v.suppressHydrationWarning===!0||o3(o.nodeValue,d)),o||Au(l,!0)}else o=Ux(o).createTextNode(v),o[Bn]=l,l.stateNode=o}return wi(l),null;case 31:if(d=l.memoizedState,o===null||o.memoizedState!==null){if(v=Sr(l),d!==null){if(o===null){if(!v)throw Error(n(318));if(o=l.memoizedState,o=o!==null?o.dehydrated:null,!o)throw Error(n(557));o[Bn]=l}else wc(),(l.flags&128)===0&&(l.memoizedState=null),l.flags|=4;wi(l),o=!1}else d=W1(),o!==null&&o.memoizedState!==null&&(o.memoizedState.hydrationErrors=d),o=!0;if(!o)return l.flags&256?(Ts(l),l):(Ts(l),null);if((l.flags&128)!==0)throw Error(n(558))}return wi(l),null;case 13:if(v=l.memoizedState,o===null||o.memoizedState!==null&&o.memoizedState.dehydrated!==null){if(_=Sr(l),v!==null&&v.dehydrated!==null){if(o===null){if(!_)throw Error(n(318));if(_=l.memoizedState,_=_!==null?_.dehydrated:null,!_)throw Error(n(317));_[Bn]=l}else wc(),(l.flags&128)===0&&(l.memoizedState=null),l.flags|=4;wi(l),_=!1}else _=W1(),o!==null&&o.memoizedState!==null&&(o.memoizedState.hydrationErrors=_),_=!0;if(!_)return l.flags&256?(Ts(l),l):(Ts(l),null)}return Ts(l),(l.flags&128)!==0?(l.lanes=d,l):(d=v!==null,o=o!==null&&o.memoizedState!==null,d&&(v=l.child,_=null,v.alternate!==null&&v.alternate.memoizedState!==null&&v.alternate.memoizedState.cachePool!==null&&(_=v.alternate.memoizedState.cachePool.pool),N=null,v.memoizedState!==null&&v.memoizedState.cachePool!==null&&(N=v.memoizedState.cachePool.pool),N!==_&&(v.flags|=2048)),d!==o&&d&&(l.child.flags|=8192),Sx(l,l.updateQueue),wi(l),null);case 4:return Tt(),o===null&&H_(l.stateNode.containerInfo),wi(l),null;case 10:return Eo(l.type),wi(l),null;case 19:if(P(Di),v=l.memoizedState,v===null)return wi(l),null;if(_=(l.flags&128)!==0,N=v.rendering,N===null)if(_)sv(v,!1);else{if($i!==0||o!==null&&(o.flags&128)!==0)for(o=l.child;o!==null;){if(N=Ec(o),N!==null){for(l.flags|=128,sv(v,!1),o=N.updateQueue,l.updateQueue=o,Sx(l,o),l.subtreeFlags=0,o=d,d=l.child;d!==null;)Qd(d,o),d=d.sibling;return Y(Di,Di.current&1|2),an&&Ws(l,v.treeForkCount),l.child}o=o.sibling}v.tail!==null&&ye()>Rx&&(l.flags|=128,_=!0,sv(v,!1),l.lanes=4194304)}else{if(!_)if(o=Ec(N),o!==null){if(l.flags|=128,_=!0,o=o.updateQueue,l.updateQueue=o,Sx(l,o),sv(v,!0),v.tail===null&&v.tailMode==="hidden"&&!N.alternate&&!an)return wi(l),null}else 2*ye()-v.renderingStartTime>Rx&&d!==536870912&&(l.flags|=128,_=!0,sv(v,!1),l.lanes=4194304);v.isBackwards?(N.sibling=l.child,l.child=N):(o=v.last,o!==null?o.sibling=N:l.child=N,v.last=N)}return v.tail!==null?(o=v.tail,v.rendering=o,v.tail=o.sibling,v.renderingStartTime=ye(),o.sibling=null,d=Di.current,Y(Di,_?d&1|2:d&1),an&&Ws(l,v.treeForkCount),o):(wi(l),null);case 22:case 23:return Ts(l),Yi(),v=l.memoizedState!==null,o!==null?o.memoizedState!==null!==v&&(l.flags|=8192):v&&(l.flags|=8192),v?(d&536870912)!==0&&(l.flags&128)===0&&(wi(l),l.subtreeFlags&6&&(l.flags|=8192)):wi(l),d=l.updateQueue,d!==null&&Sx(l,d.retryQueue),d=null,o!==null&&o.memoizedState!==null&&o.memoizedState.cachePool!==null&&(d=o.memoizedState.cachePool.pool),v=null,l.memoizedState!==null&&l.memoizedState.cachePool!==null&&(v=l.memoizedState.cachePool.pool),v!==d&&(l.flags|=2048),o!==null&&P(Z),null;case 24:return d=null,o!==null&&(d=o.memoizedState.cache),l.memoizedState.cache!==d&&(l.flags|=2048),Eo(Bi),wi(l),null;case 25:return null;case 30:return null}throw Error(n(156,l.tag))}function bM(o,l){switch(lg(l),l.tag){case 1:return o=l.flags,o&65536?(l.flags=o&-65537|128,l):null;case 3:return Eo(Bi),Tt(),o=l.flags,(o&65536)!==0&&(o&128)===0?(l.flags=o&-65537|128,l):null;case 26:case 27:case 5:return $t(l),null;case 31:if(l.memoizedState!==null){if(Ts(l),l.alternate===null)throw Error(n(340));wc()}return o=l.flags,o&65536?(l.flags=o&-65537|128,l):null;case 13:if(Ts(l),o=l.memoizedState,o!==null&&o.dehydrated!==null){if(l.alternate===null)throw Error(n(340));wc()}return o=l.flags,o&65536?(l.flags=o&-65537|128,l):null;case 19:return P(Di),null;case 4:return Tt(),null;case 10:return Eo(l.type),null;case 22:case 23:return Ts(l),Yi(),o!==null&&P(Z),o=l.flags,o&65536?(l.flags=o&-65537|128,l):null;case 24:return Eo(Bi),null;case 25:return null;default:return null}}function h4(o,l){switch(lg(l),l.tag){case 3:Eo(Bi),Tt();break;case 26:case 27:case 5:$t(l);break;case 4:Tt();break;case 31:l.memoizedState!==null&&Ts(l);break;case 13:Ts(l);break;case 19:P(Di);break;case 10:Eo(l.type);break;case 22:case 23:Ts(l),Yi(),o!==null&&P(Z);break;case 24:Eo(Bi)}}function ov(o,l){try{var d=l.updateQueue,v=d!==null?d.lastEffect:null;if(v!==null){var _=v.next;d=_;do{if((d.tag&o)===o){v=void 0;var N=d.create,H=d.inst;v=N(),H.destroy=v}d=d.next}while(d!==_)}}catch(rt){Hn(l,l.return,rt)}}function mf(o,l,d){try{var v=l.updateQueue,_=v!==null?v.lastEffect:null;if(_!==null){var N=_.next;v=N;do{if((v.tag&o)===o){var H=v.inst,rt=H.destroy;if(rt!==void 0){H.destroy=void 0,_=l;var gt=d,Mt=rt;try{Mt()}catch(Ht){Hn(_,gt,Ht)}}}v=v.next}while(v!==N)}}catch(Ht){Hn(l,l.return,Ht)}}function f4(o){var l=o.updateQueue;if(l!==null){var d=o.stateNode;try{er(l,d)}catch(v){Hn(o,o.return,v)}}}function d4(o,l,d){d.props=o0(o.type,o.memoizedProps),d.state=o.memoizedState;try{d.componentWillUnmount()}catch(v){Hn(o,l,v)}}function av(o,l){try{var d=o.ref;if(d!==null){switch(o.tag){case 26:case 27:case 5:var v=o.stateNode;break;case 30:v=o.stateNode;break;default:v=o.stateNode}typeof d=="function"?o.refCleanup=d(v):d.current=v}}catch(_){Hn(o,l,_)}}function Du(o,l){var d=o.ref,v=o.refCleanup;if(d!==null)if(typeof v=="function")try{v()}catch(_){Hn(o,l,_)}finally{o.refCleanup=null,o=o.alternate,o!=null&&(o.refCleanup=null)}else if(typeof d=="function")try{d(null)}catch(_){Hn(o,l,_)}else d.current=null}function p4(o){var l=o.type,d=o.memoizedProps,v=o.stateNode;try{t:switch(l){case"button":case"input":case"select":case"textarea":d.autoFocus&&v.focus();break t;case"img":d.src?v.src=d.src:d.srcSet&&(v.srcset=d.srcSet)}}catch(_){Hn(o,o.return,_)}}function x_(o,l,d){try{var v=o.stateNode;zM(v,o.type,d,l),v[di]=l}catch(_){Hn(o,o.return,_)}}function g4(o){return o.tag===5||o.tag===3||o.tag===26||o.tag===27&&wf(o.type)||o.tag===4}function b_(o){t:for(;;){for(;o.sibling===null;){if(o.return===null||g4(o.return))return null;o=o.return}for(o.sibling.return=o.return,o=o.sibling;o.tag!==5&&o.tag!==6&&o.tag!==18;){if(o.tag===27&&wf(o.type)||o.flags&2||o.child===null||o.tag===4)continue t;o.child.return=o,o=o.child}if(!(o.flags&2))return o.stateNode}}function A_(o,l,d){var v=o.tag;if(v===5||v===6)o=o.stateNode,l?(d.nodeType===9?d.body:d.nodeName==="HTML"?d.ownerDocument.body:d).insertBefore(o,l):(l=d.nodeType===9?d.body:d.nodeName==="HTML"?d.ownerDocument.body:d,l.appendChild(o),d=d._reactRootContainer,d!=null||l.onclick!==null||(l.onclick=gi));else if(v!==4&&(v===27&&wf(o.type)&&(d=o.stateNode,l=null),o=o.child,o!==null))for(A_(o,l,d),o=o.sibling;o!==null;)A_(o,l,d),o=o.sibling}function Ex(o,l,d){var v=o.tag;if(v===5||v===6)o=o.stateNode,l?d.insertBefore(o,l):d.appendChild(o);else if(v!==4&&(v===27&&wf(o.type)&&(d=o.stateNode),o=o.child,o!==null))for(Ex(o,l,d),o=o.sibling;o!==null;)Ex(o,l,d),o=o.sibling}function m4(o){var l=o.stateNode,d=o.memoizedProps;try{for(var v=o.type,_=l.attributes;_.length;)l.removeAttributeNode(_[0]);us(l,v,d),l[Bn]=o,l[di]=d}catch(N){Hn(o,o.return,N)}}var Mc=!1,gr=!1,__=!1,v4=typeof WeakSet=="function"?WeakSet:Set,Yr=null;function AM(o,l){if(o=o.containerInfo,G_=$x,o=ml(o),Xo(o)){if("selectionStart"in o)var d={start:o.selectionStart,end:o.selectionEnd};else t:{d=(d=o.ownerDocument)&&d.defaultView||window;var v=d.getSelection&&d.getSelection();if(v&&v.rangeCount!==0){d=v.anchorNode;var _=v.anchorOffset,N=v.focusNode;v=v.focusOffset;try{d.nodeType,N.nodeType}catch{d=null;break t}var H=0,rt=-1,gt=-1,Mt=0,Ht=0,Yt=o,It=null;e:for(;;){for(var kt;Yt!==d||_!==0&&Yt.nodeType!==3||(rt=H+_),Yt!==N||v!==0&&Yt.nodeType!==3||(gt=H+v),Yt.nodeType===3&&(H+=Yt.nodeValue.length),(kt=Yt.firstChild)!==null;)It=Yt,Yt=kt;for(;;){if(Yt===o)break e;if(It===d&&++Mt===_&&(rt=H),It===N&&++Ht===v&&(gt=H),(kt=Yt.nextSibling)!==null)break;Yt=It,It=Yt.parentNode}Yt=kt}d=rt===-1||gt===-1?null:{start:rt,end:gt}}else d=null}d=d||{start:0,end:0}}else d=null;for(V_={focusedElem:o,selectionRange:d},$x=!1,Yr=l;Yr!==null;)if(l=Yr,o=l.child,(l.subtreeFlags&1028)!==0&&o!==null)o.return=l,Yr=o;else for(;Yr!==null;){switch(l=Yr,N=l.alternate,o=l.flags,l.tag){case 0:if((o&4)!==0&&(o=l.updateQueue,o=o!==null?o.events:null,o!==null))for(d=0;d<o.length;d++)_=o[d],_.ref.impl=_.nextImpl;break;case 11:case 15:break;case 1:if((o&1024)!==0&&N!==null){o=void 0,d=l,_=N.memoizedProps,N=N.memoizedState,v=d.stateNode;try{var me=o0(d.type,_);o=v.getSnapshotBeforeUpdate(me,N),v.__reactInternalSnapshotBeforeUpdate=o}catch(Re){Hn(d,d.return,Re)}}break;case 3:if((o&1024)!==0){if(o=l.stateNode.containerInfo,d=o.nodeType,d===9)W_(o);else if(d===1)switch(o.nodeName){case"HEAD":case"HTML":case"BODY":W_(o);break;default:o.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((o&1024)!==0)throw Error(n(163))}if(o=l.sibling,o!==null){o.return=l.return,Yr=o;break}Yr=l.return}}function y4(o,l,d){var v=d.flags;switch(d.tag){case 0:case 11:case 15:Pc(o,d),v&4&&ov(5,d);break;case 1:if(Pc(o,d),v&4)if(o=d.stateNode,l===null)try{o.componentDidMount()}catch(H){Hn(d,d.return,H)}else{var _=o0(d.type,l.memoizedProps);l=l.memoizedState;try{o.componentDidUpdate(_,l,o.__reactInternalSnapshotBeforeUpdate)}catch(H){Hn(d,d.return,H)}}v&64&&f4(d),v&512&&av(d,d.return);break;case 3:if(Pc(o,d),v&64&&(o=d.updateQueue,o!==null)){if(l=null,d.child!==null)switch(d.child.tag){case 27:case 5:l=d.child.stateNode;break;case 1:l=d.child.stateNode}try{er(o,l)}catch(H){Hn(d,d.return,H)}}break;case 27:l===null&&v&4&&m4(d);case 26:case 5:Pc(o,d),l===null&&v&4&&p4(d),v&512&&av(d,d.return);break;case 12:Pc(o,d);break;case 31:Pc(o,d),v&4&&A4(o,d);break;case 13:Pc(o,d),v&4&&_4(o,d),v&64&&(o=d.memoizedState,o!==null&&(o=o.dehydrated,o!==null&&(d=DM.bind(null,d),JM(o,d))));break;case 22:if(v=d.memoizedState!==null||Mc,!v){l=l!==null&&l.memoizedState!==null||gr,_=Mc;var N=gr;Mc=v,(gr=l)&&!N?kc(o,d,(d.subtreeFlags&8772)!==0):Pc(o,d),Mc=_,gr=N}break;case 30:break;default:Pc(o,d)}}function x4(o){var l=o.alternate;l!==null&&(o.alternate=null,x4(l)),o.child=null,o.deletions=null,o.sibling=null,o.tag===5&&(l=o.stateNode,l!==null&&tu(l)),o.stateNode=null,o.return=null,o.dependencies=null,o.memoizedProps=null,o.memoizedState=null,o.pendingProps=null,o.stateNode=null,o.updateQueue=null}var Mi=null,To=!1;function Ic(o,l,d){for(d=d.child;d!==null;)b4(o,l,d),d=d.sibling}function b4(o,l,d){if(Vn&&typeof Vn.onCommitFiberUnmount=="function")try{Vn.onCommitFiberUnmount(Ze,d)}catch{}switch(d.tag){case 26:gr||Du(d,l),Ic(o,l,d),d.memoizedState?d.memoizedState.count--:d.stateNode&&(d=d.stateNode,d.parentNode.removeChild(d));break;case 27:gr||Du(d,l);var v=Mi,_=To;wf(d.type)&&(Mi=d.stateNode,To=!1),Ic(o,l,d),mv(d.stateNode),Mi=v,To=_;break;case 5:gr||Du(d,l);case 6:if(v=Mi,_=To,Mi=null,Ic(o,l,d),Mi=v,To=_,Mi!==null)if(To)try{(Mi.nodeType===9?Mi.body:Mi.nodeName==="HTML"?Mi.ownerDocument.body:Mi).removeChild(d.stateNode)}catch(N){Hn(d,l,N)}else try{Mi.removeChild(d.stateNode)}catch(N){Hn(d,l,N)}break;case 18:Mi!==null&&(To?(o=Mi,f3(o.nodeType===9?o.body:o.nodeName==="HTML"?o.ownerDocument.body:o,d.stateNode),Ig(o)):f3(Mi,d.stateNode));break;case 4:v=Mi,_=To,Mi=d.stateNode.containerInfo,To=!0,Ic(o,l,d),Mi=v,To=_;break;case 0:case 11:case 14:case 15:mf(2,d,l),gr||mf(4,d,l),Ic(o,l,d);break;case 1:gr||(Du(d,l),v=d.stateNode,typeof v.componentWillUnmount=="function"&&d4(d,l,v)),Ic(o,l,d);break;case 21:Ic(o,l,d);break;case 22:gr=(v=gr)||d.memoizedState!==null,Ic(o,l,d),gr=v;break;default:Ic(o,l,d)}}function A4(o,l){if(l.memoizedState===null&&(o=l.alternate,o!==null&&(o=o.memoizedState,o!==null))){o=o.dehydrated;try{Ig(o)}catch(d){Hn(l,l.return,d)}}}function _4(o,l){if(l.memoizedState===null&&(o=l.alternate,o!==null&&(o=o.memoizedState,o!==null&&(o=o.dehydrated,o!==null))))try{Ig(o)}catch(d){Hn(l,l.return,d)}}function _M(o){switch(o.tag){case 31:case 13:case 19:var l=o.stateNode;return l===null&&(l=o.stateNode=new v4),l;case 22:return o=o.stateNode,l=o._retryCache,l===null&&(l=o._retryCache=new v4),l;default:throw Error(n(435,o.tag))}}function Cx(o,l){var d=_M(o);l.forEach(function(v){if(!d.has(v)){d.add(v);var _=LM.bind(null,o,v);v.then(_,_)}})}function No(o,l){var d=l.deletions;if(d!==null)for(var v=0;v<d.length;v++){var _=d[v],N=o,H=l,rt=H;t:for(;rt!==null;){switch(rt.tag){case 27:if(wf(rt.type)){Mi=rt.stateNode,To=!1;break t}break;case 5:Mi=rt.stateNode,To=!1;break t;case 3:case 4:Mi=rt.stateNode.containerInfo,To=!0;break t}rt=rt.return}if(Mi===null)throw Error(n(160));b4(N,H,_),Mi=null,To=!1,N=_.alternate,N!==null&&(N.return=null),_.return=null}if(l.subtreeFlags&13886)for(l=l.child;l!==null;)w4(l,o),l=l.sibling}var Tl=null;function w4(o,l){var d=o.alternate,v=o.flags;switch(o.tag){case 0:case 11:case 14:case 15:No(l,o),Ro(o),v&4&&(mf(3,o,o.return),ov(3,o),mf(5,o,o.return));break;case 1:No(l,o),Ro(o),v&512&&(gr||d===null||Du(d,d.return)),v&64&&Mc&&(o=o.updateQueue,o!==null&&(v=o.callbacks,v!==null&&(d=o.shared.hiddenCallbacks,o.shared.hiddenCallbacks=d===null?v:d.concat(v))));break;case 26:var _=Tl;if(No(l,o),Ro(o),v&512&&(gr||d===null||Du(d,d.return)),v&4){var N=d!==null?d.memoizedState:null;if(v=o.memoizedState,d===null)if(v===null)if(o.stateNode===null){t:{v=o.type,d=o.memoizedProps,_=_.ownerDocument||_;e:switch(v){case"title":N=_.getElementsByTagName("title")[0],(!N||N[Ra]||N[Bn]||N.namespaceURI==="http://www.w3.org/2000/svg"||N.hasAttribute("itemprop"))&&(N=_.createElement(v),_.head.insertBefore(N,_.querySelector("head > title"))),us(N,v,d),N[Bn]=o,Vi(N),v=N;break t;case"link":var H=w3("link","href",_).get(v+(d.href||""));if(H){for(var rt=0;rt<H.length;rt++)if(N=H[rt],N.getAttribute("href")===(d.href==null||d.href===""?null:d.href)&&N.getAttribute("rel")===(d.rel==null?null:d.rel)&&N.getAttribute("title")===(d.title==null?null:d.title)&&N.getAttribute("crossorigin")===(d.crossOrigin==null?null:d.crossOrigin)){H.splice(rt,1);break e}}N=_.createElement(v),us(N,v,d),_.head.appendChild(N);break;case"meta":if(H=w3("meta","content",_).get(v+(d.content||""))){for(rt=0;rt<H.length;rt++)if(N=H[rt],N.getAttribute("content")===(d.content==null?null:""+d.content)&&N.getAttribute("name")===(d.name==null?null:d.name)&&N.getAttribute("property")===(d.property==null?null:d.property)&&N.getAttribute("http-equiv")===(d.httpEquiv==null?null:d.httpEquiv)&&N.getAttribute("charset")===(d.charSet==null?null:d.charSet)){H.splice(rt,1);break e}}N=_.createElement(v),us(N,v,d),_.head.appendChild(N);break;default:throw Error(n(468,v))}N[Bn]=o,Vi(N),v=N}o.stateNode=v}else S3(_,o.type,o.stateNode);else o.stateNode=_3(_,v,o.memoizedProps);else N!==v?(N===null?d.stateNode!==null&&(d=d.stateNode,d.parentNode.removeChild(d)):N.count--,v===null?S3(_,o.type,o.stateNode):_3(_,v,o.memoizedProps)):v===null&&o.stateNode!==null&&x_(o,o.memoizedProps,d.memoizedProps)}break;case 27:No(l,o),Ro(o),v&512&&(gr||d===null||Du(d,d.return)),d!==null&&v&4&&x_(o,o.memoizedProps,d.memoizedProps);break;case 5:if(No(l,o),Ro(o),v&512&&(gr||d===null||Du(d,d.return)),o.flags&32){_=o.stateNode;try{La(_,"")}catch(me){Hn(o,o.return,me)}}v&4&&o.stateNode!=null&&(_=o.memoizedProps,x_(o,_,d!==null?d.memoizedProps:_)),v&1024&&(__=!0);break;case 6:if(No(l,o),Ro(o),v&4){if(o.stateNode===null)throw Error(n(162));v=o.memoizedProps,d=o.stateNode;try{d.nodeValue=v}catch(me){Hn(o,o.return,me)}}break;case 3:if(zx=null,_=Tl,Tl=Hx(l.containerInfo),No(l,o),Tl=_,Ro(o),v&4&&d!==null&&d.memoizedState.isDehydrated)try{Ig(l.containerInfo)}catch(me){Hn(o,o.return,me)}__&&(__=!1,S4(o));break;case 4:v=Tl,Tl=Hx(o.stateNode.containerInfo),No(l,o),Ro(o),Tl=v;break;case 12:No(l,o),Ro(o);break;case 31:No(l,o),Ro(o),v&4&&(v=o.updateQueue,v!==null&&(o.updateQueue=null,Cx(o,v)));break;case 13:No(l,o),Ro(o),o.child.flags&8192&&o.memoizedState!==null!=(d!==null&&d.memoizedState!==null)&&(Nx=ye()),v&4&&(v=o.updateQueue,v!==null&&(o.updateQueue=null,Cx(o,v)));break;case 22:_=o.memoizedState!==null;var gt=d!==null&&d.memoizedState!==null,Mt=Mc,Ht=gr;if(Mc=Mt||_,gr=Ht||gt,No(l,o),gr=Ht,Mc=Mt,Ro(o),v&8192)t:for(l=o.stateNode,l._visibility=_?l._visibility&-2:l._visibility|1,_&&(d===null||gt||Mc||gr||a0(o)),d=null,l=o;;){if(l.tag===5||l.tag===26){if(d===null){gt=d=l;try{if(N=gt.stateNode,_)H=N.style,typeof H.setProperty=="function"?H.setProperty("display","none","important"):H.display="none";else{rt=gt.stateNode;var Yt=gt.memoizedProps.style,It=Yt!=null&&Yt.hasOwnProperty("display")?Yt.display:null;rt.style.display=It==null||typeof It=="boolean"?"":(""+It).trim()}}catch(me){Hn(gt,gt.return,me)}}}else if(l.tag===6){if(d===null){gt=l;try{gt.stateNode.nodeValue=_?"":gt.memoizedProps}catch(me){Hn(gt,gt.return,me)}}}else if(l.tag===18){if(d===null){gt=l;try{var kt=gt.stateNode;_?d3(kt,!0):d3(gt.stateNode,!1)}catch(me){Hn(gt,gt.return,me)}}}else if((l.tag!==22&&l.tag!==23||l.memoizedState===null||l===o)&&l.child!==null){l.child.return=l,l=l.child;continue}if(l===o)break t;for(;l.sibling===null;){if(l.return===null||l.return===o)break t;d===l&&(d=null),l=l.return}d===l&&(d=null),l.sibling.return=l.return,l=l.sibling}v&4&&(v=o.updateQueue,v!==null&&(d=v.retryQueue,d!==null&&(v.retryQueue=null,Cx(o,d))));break;case 19:No(l,o),Ro(o),v&4&&(v=o.updateQueue,v!==null&&(o.updateQueue=null,Cx(o,v)));break;case 30:break;case 21:break;default:No(l,o),Ro(o)}}function Ro(o){var l=o.flags;if(l&2){try{for(var d,v=o.return;v!==null;){if(g4(v)){d=v;break}v=v.return}if(d==null)throw Error(n(160));switch(d.tag){case 27:var _=d.stateNode,N=b_(o);Ex(o,N,_);break;case 5:var H=d.stateNode;d.flags&32&&(La(H,""),d.flags&=-33);var rt=b_(o);Ex(o,rt,H);break;case 3:case 4:var gt=d.stateNode.containerInfo,Mt=b_(o);A_(o,Mt,gt);break;default:throw Error(n(161))}}catch(Ht){Hn(o,o.return,Ht)}o.flags&=-3}l&4096&&(o.flags&=-4097)}function S4(o){if(o.subtreeFlags&1024)for(o=o.child;o!==null;){var l=o;S4(l),l.tag===5&&l.flags&1024&&l.stateNode.reset(),o=o.sibling}}function Pc(o,l){if(l.subtreeFlags&8772)for(l=l.child;l!==null;)y4(o,l.alternate,l),l=l.sibling}function a0(o){for(o=o.child;o!==null;){var l=o;switch(l.tag){case 0:case 11:case 14:case 15:mf(4,l,l.return),a0(l);break;case 1:Du(l,l.return);var d=l.stateNode;typeof d.componentWillUnmount=="function"&&d4(l,l.return,d),a0(l);break;case 27:mv(l.stateNode);case 26:case 5:Du(l,l.return),a0(l);break;case 22:l.memoizedState===null&&a0(l);break;case 30:a0(l);break;default:a0(l)}o=o.sibling}}function kc(o,l,d){for(d=d&&(l.subtreeFlags&8772)!==0,l=l.child;l!==null;){var v=l.alternate,_=o,N=l,H=N.flags;switch(N.tag){case 0:case 11:case 15:kc(_,N,d),ov(4,N);break;case 1:if(kc(_,N,d),v=N,_=v.stateNode,typeof _.componentDidMount=="function")try{_.componentDidMount()}catch(Mt){Hn(v,v.return,Mt)}if(v=N,_=v.updateQueue,_!==null){var rt=v.stateNode;try{var gt=_.shared.hiddenCallbacks;if(gt!==null)for(_.shared.hiddenCallbacks=null,_=0;_<gt.length;_++)Cs(gt[_],rt)}catch(Mt){Hn(v,v.return,Mt)}}d&&H&64&&f4(N),av(N,N.return);break;case 27:m4(N);case 26:case 5:kc(_,N,d),d&&v===null&&H&4&&p4(N),av(N,N.return);break;case 12:kc(_,N,d);break;case 31:kc(_,N,d),d&&H&4&&A4(_,N);break;case 13:kc(_,N,d),d&&H&4&&_4(_,N);break;case 22:N.memoizedState===null&&kc(_,N,d),av(N,N.return);break;case 30:break;default:kc(_,N,d)}l=l.sibling}}function w_(o,l){var d=null;o!==null&&o.memoizedState!==null&&o.memoizedState.cachePool!==null&&(d=o.memoizedState.cachePool.pool),o=null,l.memoizedState!==null&&l.memoizedState.cachePool!==null&&(o=l.memoizedState.cachePool.pool),o!==d&&(o!=null&&o.refCount++,d!=null&&e0(d))}function S_(o,l){o=null,l.alternate!==null&&(o=l.alternate.memoizedState.cache),l=l.memoizedState.cache,l!==o&&(l.refCount++,o!=null&&e0(o))}function Nl(o,l,d,v){if(l.subtreeFlags&10256)for(l=l.child;l!==null;)E4(o,l,d,v),l=l.sibling}function E4(o,l,d,v){var _=l.flags;switch(l.tag){case 0:case 11:case 15:Nl(o,l,d,v),_&2048&&ov(9,l);break;case 1:Nl(o,l,d,v);break;case 3:Nl(o,l,d,v),_&2048&&(o=null,l.alternate!==null&&(o=l.alternate.memoizedState.cache),l=l.memoizedState.cache,l!==o&&(l.refCount++,o!=null&&e0(o)));break;case 12:if(_&2048){Nl(o,l,d,v),o=l.stateNode;try{var N=l.memoizedProps,H=N.id,rt=N.onPostCommit;typeof rt=="function"&&rt(H,l.alternate===null?"mount":"update",o.passiveEffectDuration,-0)}catch(gt){Hn(l,l.return,gt)}}else Nl(o,l,d,v);break;case 31:Nl(o,l,d,v);break;case 13:Nl(o,l,d,v);break;case 23:break;case 22:N=l.stateNode,H=l.alternate,l.memoizedState!==null?N._visibility&2?Nl(o,l,d,v):lv(o,l):N._visibility&2?Nl(o,l,d,v):(N._visibility|=2,_g(o,l,d,v,(l.subtreeFlags&10256)!==0||!1)),_&2048&&w_(H,l);break;case 24:Nl(o,l,d,v),_&2048&&S_(l.alternate,l);break;default:Nl(o,l,d,v)}}function _g(o,l,d,v,_){for(_=_&&((l.subtreeFlags&10256)!==0||!1),l=l.child;l!==null;){var N=o,H=l,rt=d,gt=v,Mt=H.flags;switch(H.tag){case 0:case 11:case 15:_g(N,H,rt,gt,_),ov(8,H);break;case 23:break;case 22:var Ht=H.stateNode;H.memoizedState!==null?Ht._visibility&2?_g(N,H,rt,gt,_):lv(N,H):(Ht._visibility|=2,_g(N,H,rt,gt,_)),_&&Mt&2048&&w_(H.alternate,H);break;case 24:_g(N,H,rt,gt,_),_&&Mt&2048&&S_(H.alternate,H);break;default:_g(N,H,rt,gt,_)}l=l.sibling}}function lv(o,l){if(l.subtreeFlags&10256)for(l=l.child;l!==null;){var d=o,v=l,_=v.flags;switch(v.tag){case 22:lv(d,v),_&2048&&w_(v.alternate,v);break;case 24:lv(d,v),_&2048&&S_(v.alternate,v);break;default:lv(d,v)}l=l.sibling}}var uv=8192;function wg(o,l,d){if(o.subtreeFlags&uv)for(o=o.child;o!==null;)C4(o,l,d),o=o.sibling}function C4(o,l,d){switch(o.tag){case 26:wg(o,l,d),o.flags&uv&&o.memoizedState!==null&&lI(d,Tl,o.memoizedState,o.memoizedProps);break;case 5:wg(o,l,d);break;case 3:case 4:var v=Tl;Tl=Hx(o.stateNode.containerInfo),wg(o,l,d),Tl=v;break;case 22:o.memoizedState===null&&(v=o.alternate,v!==null&&v.memoizedState!==null?(v=uv,uv=16777216,wg(o,l,d),uv=v):wg(o,l,d));break;default:wg(o,l,d)}}function T4(o){var l=o.alternate;if(l!==null&&(o=l.child,o!==null)){l.child=null;do l=o.sibling,o.sibling=null,o=l;while(o!==null)}}function cv(o){var l=o.deletions;if((o.flags&16)!==0){if(l!==null)for(var d=0;d<l.length;d++){var v=l[d];Yr=v,R4(v,o)}T4(o)}if(o.subtreeFlags&10256)for(o=o.child;o!==null;)N4(o),o=o.sibling}function N4(o){switch(o.tag){case 0:case 11:case 15:cv(o),o.flags&2048&&mf(9,o,o.return);break;case 3:cv(o);break;case 12:cv(o);break;case 22:var l=o.stateNode;o.memoizedState!==null&&l._visibility&2&&(o.return===null||o.return.tag!==13)?(l._visibility&=-3,Tx(o)):cv(o);break;default:cv(o)}}function Tx(o){var l=o.deletions;if((o.flags&16)!==0){if(l!==null)for(var d=0;d<l.length;d++){var v=l[d];Yr=v,R4(v,o)}T4(o)}for(o=o.child;o!==null;){switch(l=o,l.tag){case 0:case 11:case 15:mf(8,l,l.return),Tx(l);break;case 22:d=l.stateNode,d._visibility&2&&(d._visibility&=-3,Tx(l));break;default:Tx(l)}o=o.sibling}}function R4(o,l){for(;Yr!==null;){var d=Yr;switch(d.tag){case 0:case 11:case 15:mf(8,d,l);break;case 23:case 22:if(d.memoizedState!==null&&d.memoizedState.cachePool!==null){var v=d.memoizedState.cachePool.pool;v!=null&&v.refCount++}break;case 24:e0(d.memoizedState.cache)}if(v=d.child,v!==null)v.return=d,Yr=v;else t:for(d=o;Yr!==null;){v=Yr;var _=v.sibling,N=v.return;if(x4(v),v===d){Yr=null;break t}if(_!==null){_.return=N,Yr=_;break t}Yr=N}}}var wM={getCacheForType:function(o){var l=Er(Bi),d=l.data.get(o);return d===void 0&&(d=o(),l.data.set(o,d)),d},cacheSignal:function(){return Er(Bi).controller.signal}},SM=typeof WeakMap=="function"?WeakMap:Map,In=0,ri=null,un=null,dn=0,Un=0,ta=null,vf=!1,Sg=!1,E_=!1,Fc=0,$i=0,yf=0,l0=0,C_=0,ea=0,Eg=0,hv=null,Do=null,T_=!1,Nx=0,D4=0,Rx=1/0,Dx=null,xf=null,Tr=0,bf=null,Cg=null,Bc=0,N_=0,R_=null,L4=null,fv=0,D_=null;function na(){return(In&2)!==0&&dn!==0?dn&-dn:nt.T!==null?F_():_s()}function M4(){if(ea===0)if((dn&536870912)===0||an){var o=Pr;Pr<<=1,(Pr&3932160)===0&&(Pr=262144),ea=o}else ea=536870912;return o=Oi.current,o!==null&&(o.flags|=32),ea}function Lo(o,l,d){(o===ri&&(Un===2||Un===9)||o.cancelPendingCommit!==null)&&(Tg(o,0),Af(o,dn,ea,!1)),br(o,d),((In&2)===0||o!==ri)&&(o===ri&&((In&2)===0&&(l0|=d),$i===4&&Af(o,dn,ea,!1)),Lu(o))}function I4(o,l,d){if((In&6)!==0)throw Error(n(327));var v=!d&&(l&127)===0&&(l&o.expiredLanes)===0||rn(o,l),_=v?TM(o,l):M_(o,l,!0),N=v;do{if(_===0){Sg&&!v&&Af(o,l,0,!1);break}else{if(d=o.current.alternate,N&&!EM(d)){_=M_(o,l,!1),N=!1;continue}if(_===2){if(N=l,o.errorRecoveryDisabledLanes&N)var H=0;else H=o.pendingLanes&-536870913,H=H!==0?H:H&536870912?536870912:0;if(H!==0){l=H;t:{var rt=o;_=hv;var gt=rt.current.memoizedState.isDehydrated;if(gt&&(Tg(rt,H).flags|=256),H=M_(rt,H,!1),H!==2){if(E_&&!gt){rt.errorRecoveryDisabledLanes|=N,l0|=N,_=4;break t}N=Do,Do=_,N!==null&&(Do===null?Do=N:Do.push.apply(Do,N))}_=H}if(N=!1,_!==2)continue}}if(_===1){Tg(o,0),Af(o,l,0,!0);break}t:{switch(v=o,N=_,N){case 0:case 1:throw Error(n(345));case 4:if((l&4194048)!==l)break;case 6:Af(v,l,ea,!vf);break t;case 2:Do=null;break;case 3:case 5:break;default:throw Error(n(329))}if((l&62914560)===l&&(_=Nx+300-ye(),10<_)){if(Af(v,l,ea,!vf),Te(v,0,!0)!==0)break t;Bc=l,v.timeoutHandle=c3(P4.bind(null,v,d,Do,Dx,T_,l,ea,l0,Eg,vf,N,"Throttled",-0,0),_);break t}P4(v,d,Do,Dx,T_,l,ea,l0,Eg,vf,N,null,-0,0)}}break}while(!0);Lu(o)}function P4(o,l,d,v,_,N,H,rt,gt,Mt,Ht,Yt,It,kt){if(o.timeoutHandle=-1,Yt=l.subtreeFlags,Yt&8192||(Yt&16785408)===16785408){Yt={stylesheets:null,count:0,imgCount:0,imgBytes:0,suspenseyImages:[],waitingForImages:!0,waitingForViewTransition:!1,unsuspend:gi},C4(l,N,Yt);var me=(N&62914560)===N?Nx-ye():(N&4194048)===N?D4-ye():0;if(me=uI(Yt,me),me!==null){Bc=N,o.cancelPendingCommit=me(z4.bind(null,o,l,N,d,v,_,H,rt,gt,Ht,Yt,null,It,kt)),Af(o,N,H,!Mt);return}}z4(o,l,N,d,v,_,H,rt,gt)}function EM(o){for(var l=o;;){var d=l.tag;if((d===0||d===11||d===15)&&l.flags&16384&&(d=l.updateQueue,d!==null&&(d=d.stores,d!==null)))for(var v=0;v<d.length;v++){var _=d[v],N=_.getSnapshot;_=_.value;try{if(!Ur(N(),_))return!1}catch{return!1}}if(d=l.child,l.subtreeFlags&16384&&d!==null)d.return=l,l=d;else{if(l===o)break;for(;l.sibling===null;){if(l.return===null||l.return===o)return!0;l=l.return}l.sibling.return=l.return,l=l.sibling}}return!0}function Af(o,l,d,v){l&=~C_,l&=~l0,o.suspendedLanes|=l,o.pingedLanes&=~l,v&&(o.warmLanes|=l),v=o.expirationTimes;for(var _=l;0<_;){var N=31-tn(_),H=1<<N;v[N]=-1,_&=~H}d!==0&&is(o,d,l)}function Lx(){return(In&6)===0?(dv(0),!1):!0}function L_(){if(un!==null){if(Un===0)var o=un.return;else o=un,ka=_u=null,gg(o),qt=null,oe=0,o=un;for(;o!==null;)h4(o.alternate,o),o=o.return;un=null}}function Tg(o,l){var d=o.timeoutHandle;d!==-1&&(o.timeoutHandle=-1,YM(d)),d=o.cancelPendingCommit,d!==null&&(o.cancelPendingCommit=null,d()),Bc=0,L_(),ri=o,un=d=xo(o.current,null),dn=l,Un=0,ta=null,vf=!1,Sg=rn(o,l),E_=!1,Eg=ea=C_=l0=yf=$i=0,Do=hv=null,T_=!1,(l&8)!==0&&(l|=l&32);var v=o.entangledLanes;if(v!==0)for(o=o.entanglements,v&=l;0<v;){var _=31-tn(v),N=1<<_;l|=o[_],v&=~N}return Fc=l,yu(),d}function k4(o,l){Be=null,nt.H=iv,l===yt||l===Rt?(l=zt(),Un=3):l===Dt?(l=zt(),Un=4):Un=l===u_?8:l!==null&&typeof l=="object"&&typeof l.then=="function"?6:1,ta=l,un===null&&($i=1,bx(o,bo(l,o.current)))}function F4(){var o=Oi.current;return o===null?!0:(dn&4194048)===dn?fr===null:(dn&62914560)===dn||(dn&536870912)!==0?o===fr:!1}function B4(){var o=nt.H;return nt.H=iv,o===null?iv:o}function O4(){var o=nt.A;return nt.A=wM,o}function Mx(){$i=4,vf||(dn&4194048)!==dn&&Oi.current!==null||(Sg=!0),(yf&134217727)===0&&(l0&134217727)===0||ri===null||Af(ri,dn,ea,!1)}function M_(o,l,d){var v=In;In|=2;var _=B4(),N=O4();(ri!==o||dn!==l)&&(Dx=null,Tg(o,l)),l=!1;var H=$i;t:do try{if(Un!==0&&un!==null){var rt=un,gt=ta;switch(Un){case 8:L_(),H=6;break t;case 3:case 2:case 9:case 6:Oi.current===null&&(l=!0);var Mt=Un;if(Un=0,ta=null,Ng(o,rt,gt,Mt),d&&Sg){H=0;break t}break;default:Mt=Un,Un=0,ta=null,Ng(o,rt,gt,Mt)}}CM(),H=$i;break}catch(Ht){k4(o,Ht)}while(!0);return l&&o.shellSuspendCounter++,ka=_u=null,In=v,nt.H=_,nt.A=N,un===null&&(ri=null,dn=0,yu()),H}function CM(){for(;un!==null;)U4(un)}function TM(o,l){var d=In;In|=2;var v=B4(),_=O4();ri!==o||dn!==l?(Dx=null,Rx=ye()+500,Tg(o,l)):Sg=rn(o,l);t:do try{if(Un!==0&&un!==null){l=un;var N=ta;e:switch(Un){case 1:Un=0,ta=null,Ng(o,l,N,1);break;case 2:case 9:if(Vt(N)){Un=0,ta=null,H4(l);break}l=function(){Un!==2&&Un!==9||ri!==o||(Un=7),Lu(o)},N.then(l,l);break t;case 3:Un=7;break t;case 4:Un=5;break t;case 7:Vt(N)?(Un=0,ta=null,H4(l)):(Un=0,ta=null,Ng(o,l,N,7));break;case 5:var H=null;switch(un.tag){case 26:H=un.memoizedState;case 5:case 27:var rt=un;if(H?E3(H):rt.stateNode.complete){Un=0,ta=null;var gt=rt.sibling;if(gt!==null)un=gt;else{var Mt=rt.return;Mt!==null?(un=Mt,Ix(Mt)):un=null}break e}}Un=0,ta=null,Ng(o,l,N,5);break;case 6:Un=0,ta=null,Ng(o,l,N,6);break;case 8:L_(),$i=6;break t;default:throw Error(n(462))}}NM();break}catch(Ht){k4(o,Ht)}while(!0);return ka=_u=null,nt.H=v,nt.A=_,In=d,un!==null?0:(ri=null,dn=0,yu(),$i)}function NM(){for(;un!==null&&!Zt();)U4(un)}function U4(o){var l=u4(o.alternate,o,Fc);o.memoizedProps=o.pendingProps,l===null?Ix(o):un=l}function H4(o){var l=o,d=l.alternate;switch(l.tag){case 15:case 0:l=i4(d,l,l.pendingProps,l.type,void 0,dn);break;case 11:l=i4(d,l,l.pendingProps,l.type.render,l.ref,dn);break;case 5:gg(l);default:h4(d,l),l=un=Qd(l,Fc),l=u4(d,l,Fc)}o.memoizedProps=o.pendingProps,l===null?Ix(o):un=l}function Ng(o,l,d,v){ka=_u=null,gg(l),qt=null,oe=0;var _=l.return;try{if(mM(o,_,l,d,dn)){$i=1,bx(o,bo(d,o.current)),un=null;return}}catch(N){if(_!==null)throw un=_,N;$i=1,bx(o,bo(d,o.current)),un=null;return}l.flags&32768?(an||v===1?o=!0:Sg||(dn&536870912)!==0?o=!1:(vf=o=!0,(v===2||v===9||v===3||v===6)&&(v=Oi.current,v!==null&&v.tag===13&&(v.flags|=16384))),q4(l,o)):Ix(l)}function Ix(o){var l=o;do{if((l.flags&32768)!==0){q4(l,vf);return}o=l.return;var d=xM(l.alternate,l,Fc);if(d!==null){un=d;return}if(l=l.sibling,l!==null){un=l;return}un=l=o}while(l!==null);$i===0&&($i=5)}function q4(o,l){do{var d=bM(o.alternate,o);if(d!==null){d.flags&=32767,un=d;return}if(d=o.return,d!==null&&(d.flags|=32768,d.subtreeFlags=0,d.deletions=null),!l&&(o=o.sibling,o!==null)){un=o;return}un=o=d}while(o!==null);$i=6,un=null}function z4(o,l,d,v,_,N,H,rt,gt){o.cancelPendingCommit=null;do Px();while(Tr!==0);if((In&6)!==0)throw Error(n(327));if(l!==null){if(l===o.current)throw Error(n(177));if(N=l.lanes|l.childLanes,N|=Qo,Se(o,d,N,H,rt,gt),o===ri&&(un=ri=null,dn=0),Cg=l,bf=o,Bc=d,N_=N,R_=_,L4=v,(l.subtreeFlags&10256)!==0||(l.flags&10256)!==0?(o.callbackNode=null,o.callbackPriority=0,MM(mn,function(){return W4(),null})):(o.callbackNode=null,o.callbackPriority=0),v=(l.flags&13878)!==0,(l.subtreeFlags&13878)!==0||v){v=nt.T,nt.T=null,_=at.p,at.p=2,H=In,In|=4;try{AM(o,l,d)}finally{In=H,at.p=_,nt.T=v}}Tr=1,G4(),V4(),Y4()}}function G4(){if(Tr===1){Tr=0;var o=bf,l=Cg,d=(l.flags&13878)!==0;if((l.subtreeFlags&13878)!==0||d){d=nt.T,nt.T=null;var v=at.p;at.p=2;var _=In;In|=4;try{w4(l,o);var N=V_,H=ml(o.containerInfo),rt=N.focusedElem,gt=N.selectionRange;if(H!==rt&&rt&&rt.ownerDocument&&Hr(rt.ownerDocument.documentElement,rt)){if(gt!==null&&Xo(rt)){var Mt=gt.start,Ht=gt.end;if(Ht===void 0&&(Ht=Mt),"selectionStart"in rt)rt.selectionStart=Mt,rt.selectionEnd=Math.min(Ht,rt.value.length);else{var Yt=rt.ownerDocument||document,It=Yt&&Yt.defaultView||window;if(It.getSelection){var kt=It.getSelection(),me=rt.textContent.length,Re=Math.min(gt.start,me),Wn=gt.end===void 0?Re:Math.min(gt.end,me);!kt.extend&&Re>Wn&&(H=Wn,Wn=Re,Re=H);var Ct=os(rt,Re),_t=os(rt,Wn);if(Ct&&_t&&(kt.rangeCount!==1||kt.anchorNode!==Ct.node||kt.anchorOffset!==Ct.offset||kt.focusNode!==_t.node||kt.focusOffset!==_t.offset)){var Lt=Yt.createRange();Lt.setStart(Ct.node,Ct.offset),kt.removeAllRanges(),Re>Wn?(kt.addRange(Lt),kt.extend(_t.node,_t.offset)):(Lt.setEnd(_t.node,_t.offset),kt.addRange(Lt))}}}}for(Yt=[],kt=rt;kt=kt.parentNode;)kt.nodeType===1&&Yt.push({element:kt,left:kt.scrollLeft,top:kt.scrollTop});for(typeof rt.focus=="function"&&rt.focus(),rt=0;rt<Yt.length;rt++){var Gt=Yt[rt];Gt.element.scrollLeft=Gt.left,Gt.element.scrollTop=Gt.top}}$x=!!G_,V_=G_=null}finally{In=_,at.p=v,nt.T=d}}o.current=l,Tr=2}}function V4(){if(Tr===2){Tr=0;var o=bf,l=Cg,d=(l.flags&8772)!==0;if((l.subtreeFlags&8772)!==0||d){d=nt.T,nt.T=null;var v=at.p;at.p=2;var _=In;In|=4;try{y4(o,l.alternate,l)}finally{In=_,at.p=v,nt.T=d}}Tr=3}}function Y4(){if(Tr===4||Tr===3){Tr=0,pe();var o=bf,l=Cg,d=Bc,v=L4;(l.subtreeFlags&10256)!==0||(l.flags&10256)!==0?Tr=5:(Tr=0,Cg=bf=null,$4(o,o.pendingLanes));var _=o.pendingLanes;if(_===0&&(xf=null),fi(d),l=l.stateNode,Vn&&typeof Vn.onCommitFiberRoot=="function")try{Vn.onCommitFiberRoot(Ze,l,void 0,(l.current.flags&128)===128)}catch{}if(v!==null){l=nt.T,_=at.p,at.p=2,nt.T=null;try{for(var N=o.onRecoverableError,H=0;H<v.length;H++){var rt=v[H];N(rt.value,{componentStack:rt.stack})}}finally{nt.T=l,at.p=_}}(Bc&3)!==0&&Px(),Lu(o),_=o.pendingLanes,(d&261930)!==0&&(_&42)!==0?o===D_?fv++:(fv=0,D_=o):fv=0,dv(0)}}function $4(o,l){(o.pooledCacheLanes&=l)===0&&(l=o.pooledCache,l!=null&&(o.pooledCache=null,e0(l)))}function Px(){return G4(),V4(),Y4(),W4()}function W4(){if(Tr!==5)return!1;var o=bf,l=N_;N_=0;var d=fi(Bc),v=nt.T,_=at.p;try{at.p=32>d?32:d,nt.T=null,d=R_,R_=null;var N=bf,H=Bc;if(Tr=0,Cg=bf=null,Bc=0,(In&6)!==0)throw Error(n(331));var rt=In;if(In|=4,N4(N.current),E4(N,N.current,H,d),In=rt,dv(0,!1),Vn&&typeof Vn.onPostCommitFiberRoot=="function")try{Vn.onPostCommitFiberRoot(Ze,N)}catch{}return!0}finally{at.p=_,nt.T=v,$4(o,l)}}function X4(o,l,d){l=bo(d,l),l=l_(o.stateNode,l,2),o=On(o,l,2),o!==null&&(br(o,2),Lu(o))}function Hn(o,l,d){if(o.tag===3)X4(o,o,d);else for(;l!==null;){if(l.tag===3){X4(l,o,d);break}else if(l.tag===1){var v=l.stateNode;if(typeof l.type.getDerivedStateFromError=="function"||typeof v.componentDidCatch=="function"&&(xf===null||!xf.has(v))){o=bo(d,o),d=jC(2),v=On(l,d,2),v!==null&&(JC(d,v,l,o),br(v,2),Lu(v));break}}l=l.return}}function I_(o,l,d){var v=o.pingCache;if(v===null){v=o.pingCache=new SM;var _=new Set;v.set(l,_)}else _=v.get(l),_===void 0&&(_=new Set,v.set(l,_));_.has(d)||(E_=!0,_.add(d),o=RM.bind(null,o,l,d),l.then(o,o))}function RM(o,l,d){var v=o.pingCache;v!==null&&v.delete(l),o.pingedLanes|=o.suspendedLanes&d,o.warmLanes&=~d,ri===o&&(dn&d)===d&&($i===4||$i===3&&(dn&62914560)===dn&&300>ye()-Nx?(In&2)===0&&Tg(o,0):C_|=d,Eg===dn&&(Eg=0)),Lu(o)}function j4(o,l){l===0&&(l=Gi()),o=bl(o,l),o!==null&&(br(o,l),Lu(o))}function DM(o){var l=o.memoizedState,d=0;l!==null&&(d=l.retryLane),j4(o,d)}function LM(o,l){var d=0;switch(o.tag){case 31:case 13:var v=o.stateNode,_=o.memoizedState;_!==null&&(d=_.retryLane);break;case 19:v=o.stateNode;break;case 22:v=o.stateNode._retryCache;break;default:throw Error(n(314))}v!==null&&v.delete(l),j4(o,d)}function MM(o,l){return te(o,l)}var kx=null,Rg=null,P_=!1,Fx=!1,k_=!1,_f=0;function Lu(o){o!==Rg&&o.next===null&&(Rg===null?kx=Rg=o:Rg=Rg.next=o),Fx=!0,P_||(P_=!0,PM())}function dv(o,l){if(!k_&&Fx){k_=!0;do for(var d=!1,v=kx;v!==null;){if(o!==0){var _=v.pendingLanes;if(_===0)var N=0;else{var H=v.suspendedLanes,rt=v.pingedLanes;N=(1<<31-tn(42|o)+1)-1,N&=_&~(H&~rt),N=N&201326741?N&201326741|1:N?N|2:0}N!==0&&(d=!0,Z4(v,N))}else N=dn,N=Te(v,v===ri?N:0,v.cancelPendingCommit!==null||v.timeoutHandle!==-1),(N&3)===0||rn(v,N)||(d=!0,Z4(v,N));v=v.next}while(d);k_=!1}}function IM(){J4()}function J4(){Fx=P_=!1;var o=0;_f!==0&&VM()&&(o=_f);for(var l=ye(),d=null,v=kx;v!==null;){var _=v.next,N=K4(v,l);N===0?(v.next=null,d===null?kx=_:d.next=_,_===null&&(Rg=d)):(d=v,(o!==0||(N&3)!==0)&&(Fx=!0)),v=_}Tr!==0&&Tr!==5||dv(o),_f!==0&&(_f=0)}function K4(o,l){for(var d=o.suspendedLanes,v=o.pingedLanes,_=o.expirationTimes,N=o.pendingLanes&-62914561;0<N;){var H=31-tn(N),rt=1<<H,gt=_[H];gt===-1?((rt&d)===0||(rt&v)!==0)&&(_[H]=Ta(rt,l)):gt<=l&&(o.expiredLanes|=rt),N&=~rt}if(l=ri,d=dn,d=Te(o,o===l?d:0,o.cancelPendingCommit!==null||o.timeoutHandle!==-1),v=o.callbackNode,d===0||o===l&&(Un===2||Un===9)||o.cancelPendingCommit!==null)return v!==null&&v!==null&&ne(v),o.callbackNode=null,o.callbackPriority=0;if((d&3)===0||rn(o,d)){if(l=d&-d,l===o.callbackPriority)return l;switch(v!==null&&ne(v),fi(d)){case 2:case 8:d=Xe;break;case 32:d=mn;break;case 268435456:d=Ye;break;default:d=mn}return v=Q4.bind(null,o),d=te(d,v),o.callbackPriority=l,o.callbackNode=d,l}return v!==null&&v!==null&&ne(v),o.callbackPriority=2,o.callbackNode=null,2}function Q4(o,l){if(Tr!==0&&Tr!==5)return o.callbackNode=null,o.callbackPriority=0,null;var d=o.callbackNode;if(Px()&&o.callbackNode!==d)return null;var v=dn;return v=Te(o,o===ri?v:0,o.cancelPendingCommit!==null||o.timeoutHandle!==-1),v===0?null:(I4(o,v,l),K4(o,ye()),o.callbackNode!=null&&o.callbackNode===d?Q4.bind(null,o):null)}function Z4(o,l){if(Px())return null;I4(o,l,!0)}function PM(){$M(function(){(In&6)!==0?te(ke,IM):J4()})}function F_(){if(_f===0){var o=b;o===0&&(o=kn,kn<<=1,(kn&261888)===0&&(kn=256)),_f=o}return _f}function t3(o){return o==null||typeof o=="symbol"||typeof o=="boolean"?null:typeof o=="function"?o:fc(""+o)}function e3(o,l){var d=l.ownerDocument.createElement("input");return d.name=l.name,d.value=l.value,o.id&&d.setAttribute("form",o.id),l.parentNode.insertBefore(d,l),o=new FormData(o),d.parentNode.removeChild(d),o}function kM(o,l,d,v,_){if(l==="submit"&&d&&d.stateNode===_){var N=t3((_[di]||null).action),H=v.submitter;H&&(l=(l=H[di]||null)?t3(l.formAction):H.getAttribute("formAction"),l!==null&&(N=l,H=null));var rt=new gc("action","action",null,v,_);o.push({event:rt,listeners:[{instance:null,listener:function(){if(v.defaultPrevented){if(_f!==0){var gt=H?e3(_,H):new FormData(_);n_(d,{pending:!0,data:gt,method:_.method,action:N},null,gt)}}else typeof N=="function"&&(rt.preventDefault(),gt=H?e3(_,H):new FormData(_),n_(d,{pending:!0,data:gt,method:_.method,action:N},N,gt))},currentTarget:_}]})}}for(var B_=0;B_<Es.length;B_++){var O_=Es[B_],FM=O_.toLowerCase(),BM=O_[0].toUpperCase()+O_.slice(1);sn(FM,"on"+BM)}sn(gu,"onAnimationEnd"),sn(yl,"onAnimationIteration"),sn(mu,"onAnimationStart"),sn("dblclick","onDoubleClick"),sn("focusin","onFocus"),sn("focusout","onBlur"),sn(nf,"onTransitionRun"),sn(Ac,"onTransitionStart"),sn(vu,"onTransitionCancel"),sn(rf,"onTransitionEnd"),Da("onMouseEnter",["mouseout","mouseover"]),Da("onMouseLeave",["mouseout","mouseover"]),Da("onPointerEnter",["pointerout","pointerover"]),Da("onPointerLeave",["pointerout","pointerover"]),hl("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),hl("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),hl("onBeforeInput",["compositionend","keypress","textInput","paste"]),hl("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),hl("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),hl("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var pv="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),OM=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(pv));function n3(o,l){l=(l&4)!==0;for(var d=0;d<o.length;d++){var v=o[d],_=v.event;v=v.listeners;t:{var N=void 0;if(l)for(var H=v.length-1;0<=H;H--){var rt=v[H],gt=rt.instance,Mt=rt.currentTarget;if(rt=rt.listener,gt!==N&&_.isPropagationStopped())break t;N=rt,_.currentTarget=Mt;try{N(_)}catch(Ht){Ln(Ht)}_.currentTarget=null,N=gt}else for(H=0;H<v.length;H++){if(rt=v[H],gt=rt.instance,Mt=rt.currentTarget,rt=rt.listener,gt!==N&&_.isPropagationStopped())break t;N=rt,_.currentTarget=Mt;try{N(_)}catch(Ht){Ln(Ht)}_.currentTarget=null,N=gt}}}}function cn(o,l){var d=l[uo];d===void 0&&(d=l[uo]=new Set);var v=o+"__bubble";d.has(v)||(i3(l,o,2,!1),d.add(v))}function U_(o,l,d){var v=0;l&&(v|=4),i3(d,o,v,l)}var Bx="_reactListening"+Math.random().toString(36).slice(2);function H_(o){if(!o[Bx]){o[Bx]=!0,hc.forEach(function(d){d!=="selectionchange"&&(OM.has(d)||U_(d,!1,o),U_(d,!0,o))});var l=o.nodeType===9?o:o.ownerDocument;l===null||l[Bx]||(l[Bx]=!0,U_("selectionchange",!1,l))}}function i3(o,l,d,v){switch(M3(l)){case 2:var _=fI;break;case 8:_=dI;break;default:_=ew}d=_.bind(null,l,d,o),_=void 0,!dc||l!=="touchstart"&&l!=="touchmove"&&l!=="wheel"||(_=!0),v?_!==void 0?o.addEventListener(l,d,{capture:!0,passive:_}):o.addEventListener(l,d,!0):_!==void 0?o.addEventListener(l,d,{passive:_}):o.addEventListener(l,d,!1)}function q_(o,l,d,v,_){var N=v;if((l&1)===0&&(l&2)===0&&v!==null)t:for(;;){if(v===null)return;var H=v.tag;if(H===3||H===4){var rt=v.stateNode.containerInfo;if(rt===_)break;if(H===4)for(H=v.return;H!==null;){var gt=H.tag;if((gt===3||gt===4)&&H.stateNode.containerInfo===_)return;H=H.return}for(;rt!==null;){if(H=Go(rt),H===null)return;if(gt=H.tag,gt===5||gt===6||gt===26||gt===27){v=N=H;continue t}rt=rt.parentNode}}v=v.return}Hd(function(){var Mt=N,Ht=Vh(d),Yt=[];t:{var It=$s.get(o);if(It!==void 0){var kt=gc,me=o;switch(o){case"keypress":if($o(d)===0)break t;case"keydown":case"keyup":kt=Xd;break;case"focusin":me="focus",kt=Gd;break;case"focusout":me="blur",kt=Gd;break;case"beforeblur":case"afterblur":kt=Gd;break;case"click":if(d.button===2)break t;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":kt=dl;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":kt=zd;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":kt=X;break;case gu:case yl:case mu:kt=G1;break;case rf:kt=vt;break;case"scroll":case"scrollend":kt=Jp;break;case"wheel":kt=Ot;break;case"copy":case"cut":case"paste":kt=Yd;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":kt=jh;break;case"toggle":case"beforetoggle":kt=ue}var Re=(l&4)!==0,Wn=!Re&&(o==="scroll"||o==="scrollend"),Ct=Re?It!==null?It+"Capture":null:It;Re=[];for(var _t=Mt,Lt;_t!==null;){var Gt=_t;if(Lt=Gt.stateNode,Gt=Gt.tag,Gt!==5&&Gt!==26&&Gt!==27||Lt===null||Ct===null||(Gt=su(_t,Ct),Gt!=null&&Re.push(gv(_t,Gt,Lt))),Wn)break;_t=_t.return}0<Re.length&&(It=new kt(It,me,null,d,Ht),Yt.push({event:It,listeners:Re}))}}if((l&7)===0){t:{if(It=o==="mouseover"||o==="pointerover",kt=o==="mouseout"||o==="pointerout",It&&d!==Ud&&(me=d.relatedTarget||d.fromElement)&&(Go(me)||me[Fr]))break t;if((kt||It)&&(It=Ht.window===Ht?Ht:(It=Ht.ownerDocument)?It.defaultView||It.parentWindow:window,kt?(me=d.relatedTarget||d.toElement,kt=Mt,me=me?Go(me):null,me!==null&&(Wn=s(me),Re=me.tag,me!==Wn||Re!==5&&Re!==27&&Re!==6)&&(me=null)):(kt=null,me=Mt),kt!==me)){if(Re=dl,Gt="onMouseLeave",Ct="onMouseEnter",_t="mouse",(o==="pointerout"||o==="pointerover")&&(Re=jh,Gt="onPointerLeave",Ct="onPointerEnter",_t="pointer"),Wn=kt==null?It:eu(kt),Lt=me==null?It:eu(me),It=new Re(Gt,_t+"leave",kt,d,Ht),It.target=Wn,It.relatedTarget=Lt,Gt=null,Go(Ht)===Mt&&(Re=new Re(Ct,_t+"enter",me,d,Ht),Re.target=Lt,Re.relatedTarget=Wn,Gt=Re),Wn=Gt,kt&&me)e:{for(Re=UM,Ct=kt,_t=me,Lt=0,Gt=Ct;Gt;Gt=Re(Gt))Lt++;Gt=0;for(var we=_t;we;we=Re(we))Gt++;for(;0<Lt-Gt;)Ct=Re(Ct),Lt--;for(;0<Gt-Lt;)_t=Re(_t),Gt--;for(;Lt--;){if(Ct===_t||_t!==null&&Ct===_t.alternate){Re=Ct;break e}Ct=Re(Ct),_t=Re(_t)}Re=null}else Re=null;kt!==null&&r3(Yt,It,kt,Re,!1),me!==null&&Wn!==null&&r3(Yt,Wn,me,Re,!0)}}t:{if(It=Mt?eu(Mt):window,kt=It.nodeName&&It.nodeName.toLowerCase(),kt==="select"||kt==="input"&&It.type==="file")var Nn=lr;else if(Jh(It))if(xc)Nn=Zh;else{Nn=eg;var xe=Jd}else kt=It.nodeName,!kt||kt.toLowerCase()!=="input"||It.type!=="checkbox"&&It.type!=="radio"?Mt&&Yo(Mt.elementType)&&(Nn=lr):Nn=vo;if(Nn&&(Nn=Nn(o,Mt))){Kh(Yt,Nn,d,Ht);break t}xe&&xe(o,It,Mt),o==="focusout"&&Mt&&It.type==="number"&&Mt.memoizedProps.value!=null&&qh(It,"number",It.value)}switch(xe=Mt?eu(Mt):window,o){case"focusin":(Jh(xe)||xe.contentEditable==="true")&&(jo=xe,Jo=Mt,ei=null);break;case"focusout":ei=Jo=jo=null;break;case"mousedown":bc=!0;break;case"contextmenu":case"mouseup":case"dragend":bc=!1,qr(Yt,d,Ht);break;case"selectionchange":if(vl)break;case"keydown":case"keyup":qr(Yt,d,Ht)}var Je;if(Fe)t:{switch(o){case"compositionstart":var pn="onCompositionStart";break t;case"compositionend":pn="onCompositionEnd";break t;case"compositionupdate":pn="onCompositionUpdate";break t}pn=void 0}else Or?Ar(o,d)&&(pn="onCompositionEnd"):o==="keydown"&&d.keyCode===229&&(pn="onCompositionStart");pn&&(mi&&d.locale!=="ko"&&(Or||pn!=="onCompositionStart"?pn==="onCompositionEnd"&&Or&&(Je=au()):(Ma=Ht,qd="value"in Ma?Ma.value:Ma.textContent,Or=!0)),xe=Ox(Mt,pn),0<xe.length&&(pn=new vc(pn,o,null,d,Ht),Yt.push({event:pn,listeners:xe}),Je?pn.data=Je:(Je=tr(d),Je!==null&&(pn.data=Je)))),(Je=hn?Vs(o,d):Ia(o,d))&&(pn=Ox(Mt,"onBeforeInput"),0<pn.length&&(xe=new vc("onBeforeInput","beforeinput",null,d,Ht),Yt.push({event:xe,listeners:pn}),xe.data=Je)),kM(Yt,o,Mt,d,Ht)}n3(Yt,l)})}function gv(o,l,d){return{instance:o,listener:l,currentTarget:d}}function Ox(o,l){for(var d=l+"Capture",v=[];o!==null;){var _=o,N=_.stateNode;if(_=_.tag,_!==5&&_!==26&&_!==27||N===null||(_=su(o,d),_!=null&&v.unshift(gv(o,_,N)),_=su(o,l),_!=null&&v.push(gv(o,_,N))),o.tag===3)return v;o=o.return}return[]}function UM(o){if(o===null)return null;do o=o.return;while(o&&o.tag!==5&&o.tag!==27);return o||null}function r3(o,l,d,v,_){for(var N=l._reactName,H=[];d!==null&&d!==v;){var rt=d,gt=rt.alternate,Mt=rt.stateNode;if(rt=rt.tag,gt!==null&&gt===v)break;rt!==5&&rt!==26&&rt!==27||Mt===null||(gt=Mt,_?(Mt=su(d,N),Mt!=null&&H.unshift(gv(d,Mt,gt))):_||(Mt=su(d,N),Mt!=null&&H.push(gv(d,Mt,gt)))),d=d.return}H.length!==0&&o.push({event:l,listeners:H})}var HM=/\r\n?/g,qM=/\u0000|\uFFFD/g;function s3(o){return(typeof o=="string"?o:""+o).replace(HM,`
`).replace(qM,"")}function o3(o,l){return l=s3(l),s3(o)===l}function $n(o,l,d,v,_,N){switch(d){case"children":typeof v=="string"?l==="body"||l==="textarea"&&v===""||La(o,v):(typeof v=="number"||typeof v=="bigint")&&l!=="body"&&La(o,""+v);break;case"className":pi(o,"class",v);break;case"tabIndex":pi(o,"tabindex",v);break;case"dir":case"role":case"viewBox":case"width":case"height":pi(o,d,v);break;case"style":Xp(o,v,N);break;case"data":if(l!=="object"){pi(o,"data",v);break}case"src":case"href":if(v===""&&(l!=="a"||d!=="href")){o.removeAttribute(d);break}if(v==null||typeof v=="function"||typeof v=="symbol"||typeof v=="boolean"){o.removeAttribute(d);break}v=fc(""+v),o.setAttribute(d,v);break;case"action":case"formAction":if(typeof v=="function"){o.setAttribute(d,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof N=="function"&&(d==="formAction"?(l!=="input"&&$n(o,l,"name",_.name,_,null),$n(o,l,"formEncType",_.formEncType,_,null),$n(o,l,"formMethod",_.formMethod,_,null),$n(o,l,"formTarget",_.formTarget,_,null)):($n(o,l,"encType",_.encType,_,null),$n(o,l,"method",_.method,_,null),$n(o,l,"target",_.target,_,null)));if(v==null||typeof v=="symbol"||typeof v=="boolean"){o.removeAttribute(d);break}v=fc(""+v),o.setAttribute(d,v);break;case"onClick":v!=null&&(o.onclick=gi);break;case"onScroll":v!=null&&cn("scroll",o);break;case"onScrollEnd":v!=null&&cn("scrollend",o);break;case"dangerouslySetInnerHTML":if(v!=null){if(typeof v!="object"||!("__html"in v))throw Error(n(61));if(d=v.__html,d!=null){if(_.children!=null)throw Error(n(60));o.innerHTML=d}}break;case"multiple":o.multiple=v&&typeof v!="function"&&typeof v!="symbol";break;case"muted":o.muted=v&&typeof v!="function"&&typeof v!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(v==null||typeof v=="function"||typeof v=="boolean"||typeof v=="symbol"){o.removeAttribute("xlink:href");break}d=fc(""+v),o.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",d);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":v!=null&&typeof v!="function"&&typeof v!="symbol"?o.setAttribute(d,""+v):o.removeAttribute(d);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":v&&typeof v!="function"&&typeof v!="symbol"?o.setAttribute(d,""):o.removeAttribute(d);break;case"capture":case"download":v===!0?o.setAttribute(d,""):v!==!1&&v!=null&&typeof v!="function"&&typeof v!="symbol"?o.setAttribute(d,v):o.removeAttribute(d);break;case"cols":case"rows":case"size":case"span":v!=null&&typeof v!="function"&&typeof v!="symbol"&&!isNaN(v)&&1<=v?o.setAttribute(d,v):o.removeAttribute(d);break;case"rowSpan":case"start":v==null||typeof v=="function"||typeof v=="symbol"||isNaN(v)?o.removeAttribute(d):o.setAttribute(d,v);break;case"popover":cn("beforetoggle",o),cn("toggle",o),Uh(o,"popover",v);break;case"xlinkActuate":ho(o,"http://www.w3.org/1999/xlink","xlink:actuate",v);break;case"xlinkArcrole":ho(o,"http://www.w3.org/1999/xlink","xlink:arcrole",v);break;case"xlinkRole":ho(o,"http://www.w3.org/1999/xlink","xlink:role",v);break;case"xlinkShow":ho(o,"http://www.w3.org/1999/xlink","xlink:show",v);break;case"xlinkTitle":ho(o,"http://www.w3.org/1999/xlink","xlink:title",v);break;case"xlinkType":ho(o,"http://www.w3.org/1999/xlink","xlink:type",v);break;case"xmlBase":ho(o,"http://www.w3.org/XML/1998/namespace","xml:base",v);break;case"xmlLang":ho(o,"http://www.w3.org/XML/1998/namespace","xml:lang",v);break;case"xmlSpace":ho(o,"http://www.w3.org/XML/1998/namespace","xml:space",v);break;case"is":Uh(o,"is",v);break;case"innerText":case"textContent":break;default:(!(2<d.length)||d[0]!=="o"&&d[0]!=="O"||d[1]!=="n"&&d[1]!=="N")&&(d=zh.get(d)||d,Uh(o,d,v))}}function z_(o,l,d,v,_,N){switch(d){case"style":Xp(o,v,N);break;case"dangerouslySetInnerHTML":if(v!=null){if(typeof v!="object"||!("__html"in v))throw Error(n(61));if(d=v.__html,d!=null){if(_.children!=null)throw Error(n(60));o.innerHTML=d}}break;case"children":typeof v=="string"?La(o,v):(typeof v=="number"||typeof v=="bigint")&&La(o,""+v);break;case"onScroll":v!=null&&cn("scroll",o);break;case"onScrollEnd":v!=null&&cn("scrollend",o);break;case"onClick":v!=null&&(o.onclick=gi);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!Id.hasOwnProperty(d))t:{if(d[0]==="o"&&d[1]==="n"&&(_=d.endsWith("Capture"),l=d.slice(2,_?d.length-7:void 0),N=o[di]||null,N=N!=null?N[d]:null,typeof N=="function"&&o.removeEventListener(l,N,_),typeof v=="function")){typeof N!="function"&&N!==null&&(d in o?o[d]=null:o.hasAttribute(d)&&o.removeAttribute(d)),o.addEventListener(l,v,_);break t}d in o?o[d]=v:v===!0?o.setAttribute(d,""):Uh(o,d,v)}}}function us(o,l,d){switch(l){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":cn("error",o),cn("load",o);var v=!1,_=!1,N;for(N in d)if(d.hasOwnProperty(N)){var H=d[N];if(H!=null)switch(N){case"src":v=!0;break;case"srcSet":_=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(n(137,l));default:$n(o,l,N,H,d,null)}}_&&$n(o,l,"srcSet",d.srcSet,d,null),v&&$n(o,l,"src",d.src,d,null);return;case"input":cn("invalid",o);var rt=N=H=_=null,gt=null,Mt=null;for(v in d)if(d.hasOwnProperty(v)){var Ht=d[v];if(Ht!=null)switch(v){case"name":_=Ht;break;case"type":H=Ht;break;case"checked":gt=Ht;break;case"defaultChecked":Mt=Ht;break;case"value":N=Ht;break;case"defaultValue":rt=Ht;break;case"children":case"dangerouslySetInnerHTML":if(Ht!=null)throw Error(n(137,l));break;default:$n(o,l,v,Ht,d,null)}}Yp(o,N,rt,gt,Mt,H,_,!1);return;case"select":cn("invalid",o),v=H=N=null;for(_ in d)if(d.hasOwnProperty(_)&&(rt=d[_],rt!=null))switch(_){case"value":N=rt;break;case"defaultValue":H=rt;break;case"multiple":v=rt;default:$n(o,l,_,rt,d,null)}l=N,d=H,o.multiple=!!v,l!=null?iu(o,!!v,l,!1):d!=null&&iu(o,!!v,d,!0);return;case"textarea":cn("invalid",o),N=_=v=null;for(H in d)if(d.hasOwnProperty(H)&&(rt=d[H],rt!=null))switch(H){case"value":v=rt;break;case"defaultValue":_=rt;break;case"children":N=rt;break;case"dangerouslySetInnerHTML":if(rt!=null)throw Error(n(91));break;default:$n(o,l,H,rt,d,null)}$p(o,v,_,N);return;case"option":for(gt in d)if(d.hasOwnProperty(gt)&&(v=d[gt],v!=null))switch(gt){case"selected":o.selected=v&&typeof v!="function"&&typeof v!="symbol";break;default:$n(o,l,gt,v,d,null)}return;case"dialog":cn("beforetoggle",o),cn("toggle",o),cn("cancel",o),cn("close",o);break;case"iframe":case"object":cn("load",o);break;case"video":case"audio":for(v=0;v<pv.length;v++)cn(pv[v],o);break;case"image":cn("error",o),cn("load",o);break;case"details":cn("toggle",o);break;case"embed":case"source":case"link":cn("error",o),cn("load",o);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(Mt in d)if(d.hasOwnProperty(Mt)&&(v=d[Mt],v!=null))switch(Mt){case"children":case"dangerouslySetInnerHTML":throw Error(n(137,l));default:$n(o,l,Mt,v,d,null)}return;default:if(Yo(l)){for(Ht in d)d.hasOwnProperty(Ht)&&(v=d[Ht],v!==void 0&&z_(o,l,Ht,v,d,void 0));return}}for(rt in d)d.hasOwnProperty(rt)&&(v=d[rt],v!=null&&$n(o,l,rt,v,d,null))}function zM(o,l,d,v){switch(l){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var _=null,N=null,H=null,rt=null,gt=null,Mt=null,Ht=null;for(kt in d){var Yt=d[kt];if(d.hasOwnProperty(kt)&&Yt!=null)switch(kt){case"checked":break;case"value":break;case"defaultValue":gt=Yt;default:v.hasOwnProperty(kt)||$n(o,l,kt,null,v,Yt)}}for(var It in v){var kt=v[It];if(Yt=d[It],v.hasOwnProperty(It)&&(kt!=null||Yt!=null))switch(It){case"type":N=kt;break;case"name":_=kt;break;case"checked":Mt=kt;break;case"defaultChecked":Ht=kt;break;case"value":H=kt;break;case"defaultValue":rt=kt;break;case"children":case"dangerouslySetInnerHTML":if(kt!=null)throw Error(n(137,l));break;default:kt!==Yt&&$n(o,l,It,kt,v,Yt)}}Hh(o,H,rt,gt,Mt,Ht,N,_);return;case"select":kt=H=rt=It=null;for(N in d)if(gt=d[N],d.hasOwnProperty(N)&&gt!=null)switch(N){case"value":break;case"multiple":kt=gt;default:v.hasOwnProperty(N)||$n(o,l,N,null,v,gt)}for(_ in v)if(N=v[_],gt=d[_],v.hasOwnProperty(_)&&(N!=null||gt!=null))switch(_){case"value":It=N;break;case"defaultValue":rt=N;break;case"multiple":H=N;default:N!==gt&&$n(o,l,_,N,v,gt)}l=rt,d=H,v=kt,It!=null?iu(o,!!d,It,!1):!!v!=!!d&&(l!=null?iu(o,!!d,l,!0):iu(o,!!d,d?[]:"",!1));return;case"textarea":kt=It=null;for(rt in d)if(_=d[rt],d.hasOwnProperty(rt)&&_!=null&&!v.hasOwnProperty(rt))switch(rt){case"value":break;case"children":break;default:$n(o,l,rt,null,v,_)}for(H in v)if(_=v[H],N=d[H],v.hasOwnProperty(H)&&(_!=null||N!=null))switch(H){case"value":It=_;break;case"defaultValue":kt=_;break;case"children":break;case"dangerouslySetInnerHTML":if(_!=null)throw Error(n(91));break;default:_!==N&&$n(o,l,H,_,v,N)}Od(o,It,kt);return;case"option":for(var me in d)if(It=d[me],d.hasOwnProperty(me)&&It!=null&&!v.hasOwnProperty(me))switch(me){case"selected":o.selected=!1;break;default:$n(o,l,me,null,v,It)}for(gt in v)if(It=v[gt],kt=d[gt],v.hasOwnProperty(gt)&&It!==kt&&(It!=null||kt!=null))switch(gt){case"selected":o.selected=It&&typeof It!="function"&&typeof It!="symbol";break;default:$n(o,l,gt,It,v,kt)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var Re in d)It=d[Re],d.hasOwnProperty(Re)&&It!=null&&!v.hasOwnProperty(Re)&&$n(o,l,Re,null,v,It);for(Mt in v)if(It=v[Mt],kt=d[Mt],v.hasOwnProperty(Mt)&&It!==kt&&(It!=null||kt!=null))switch(Mt){case"children":case"dangerouslySetInnerHTML":if(It!=null)throw Error(n(137,l));break;default:$n(o,l,Mt,It,v,kt)}return;default:if(Yo(l)){for(var Wn in d)It=d[Wn],d.hasOwnProperty(Wn)&&It!==void 0&&!v.hasOwnProperty(Wn)&&z_(o,l,Wn,void 0,v,It);for(Ht in v)It=v[Ht],kt=d[Ht],!v.hasOwnProperty(Ht)||It===kt||It===void 0&&kt===void 0||z_(o,l,Ht,It,v,kt);return}}for(var Ct in d)It=d[Ct],d.hasOwnProperty(Ct)&&It!=null&&!v.hasOwnProperty(Ct)&&$n(o,l,Ct,null,v,It);for(Yt in v)It=v[Yt],kt=d[Yt],!v.hasOwnProperty(Yt)||It===kt||It==null&&kt==null||$n(o,l,Yt,It,v,kt)}function a3(o){switch(o){case"css":case"script":case"font":case"img":case"image":case"input":case"link":return!0;default:return!1}}function GM(){if(typeof performance.getEntriesByType=="function"){for(var o=0,l=0,d=performance.getEntriesByType("resource"),v=0;v<d.length;v++){var _=d[v],N=_.transferSize,H=_.initiatorType,rt=_.duration;if(N&&rt&&a3(H)){for(H=0,rt=_.responseEnd,v+=1;v<d.length;v++){var gt=d[v],Mt=gt.startTime;if(Mt>rt)break;var Ht=gt.transferSize,Yt=gt.initiatorType;Ht&&a3(Yt)&&(gt=gt.responseEnd,H+=Ht*(gt<rt?1:(rt-Mt)/(gt-Mt)))}if(--v,l+=8*(N+H)/(_.duration/1e3),o++,10<o)break}}if(0<o)return l/o/1e6}return navigator.connection&&(o=navigator.connection.downlink,typeof o=="number")?o:5}var G_=null,V_=null;function Ux(o){return o.nodeType===9?o:o.ownerDocument}function l3(o){switch(o){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function u3(o,l){if(o===0)switch(l){case"svg":return 1;case"math":return 2;default:return 0}return o===1&&l==="foreignObject"?0:o}function Y_(o,l){return o==="textarea"||o==="noscript"||typeof l.children=="string"||typeof l.children=="number"||typeof l.children=="bigint"||typeof l.dangerouslySetInnerHTML=="object"&&l.dangerouslySetInnerHTML!==null&&l.dangerouslySetInnerHTML.__html!=null}var $_=null;function VM(){var o=window.event;return o&&o.type==="popstate"?o===$_?!1:($_=o,!0):($_=null,!1)}var c3=typeof setTimeout=="function"?setTimeout:void 0,YM=typeof clearTimeout=="function"?clearTimeout:void 0,h3=typeof Promise=="function"?Promise:void 0,$M=typeof queueMicrotask=="function"?queueMicrotask:typeof h3<"u"?function(o){return h3.resolve(null).then(o).catch(WM)}:c3;function WM(o){setTimeout(function(){throw o})}function wf(o){return o==="head"}function f3(o,l){var d=l,v=0;do{var _=d.nextSibling;if(o.removeChild(d),_&&_.nodeType===8)if(d=_.data,d==="/$"||d==="/&"){if(v===0){o.removeChild(_),Ig(l);return}v--}else if(d==="$"||d==="$?"||d==="$~"||d==="$!"||d==="&")v++;else if(d==="html")mv(o.ownerDocument.documentElement);else if(d==="head"){d=o.ownerDocument.head,mv(d);for(var N=d.firstChild;N;){var H=N.nextSibling,rt=N.nodeName;N[Ra]||rt==="SCRIPT"||rt==="STYLE"||rt==="LINK"&&N.rel.toLowerCase()==="stylesheet"||d.removeChild(N),N=H}}else d==="body"&&mv(o.ownerDocument.body);d=_}while(d);Ig(l)}function d3(o,l){var d=o;o=0;do{var v=d.nextSibling;if(d.nodeType===1?l?(d._stashedDisplay=d.style.display,d.style.display="none"):(d.style.display=d._stashedDisplay||"",d.getAttribute("style")===""&&d.removeAttribute("style")):d.nodeType===3&&(l?(d._stashedText=d.nodeValue,d.nodeValue=""):d.nodeValue=d._stashedText||""),v&&v.nodeType===8)if(d=v.data,d==="/$"){if(o===0)break;o--}else d!=="$"&&d!=="$?"&&d!=="$~"&&d!=="$!"||o++;d=v}while(d)}function W_(o){var l=o.firstChild;for(l&&l.nodeType===10&&(l=l.nextSibling);l;){var d=l;switch(l=l.nextSibling,d.nodeName){case"HTML":case"HEAD":case"BODY":W_(d),tu(d);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(d.rel.toLowerCase()==="stylesheet")continue}o.removeChild(d)}}function XM(o,l,d,v){for(;o.nodeType===1;){var _=d;if(o.nodeName.toLowerCase()!==l.toLowerCase()){if(!v&&(o.nodeName!=="INPUT"||o.type!=="hidden"))break}else if(v){if(!o[Ra])switch(l){case"meta":if(!o.hasAttribute("itemprop"))break;return o;case"link":if(N=o.getAttribute("rel"),N==="stylesheet"&&o.hasAttribute("data-precedence"))break;if(N!==_.rel||o.getAttribute("href")!==(_.href==null||_.href===""?null:_.href)||o.getAttribute("crossorigin")!==(_.crossOrigin==null?null:_.crossOrigin)||o.getAttribute("title")!==(_.title==null?null:_.title))break;return o;case"style":if(o.hasAttribute("data-precedence"))break;return o;case"script":if(N=o.getAttribute("src"),(N!==(_.src==null?null:_.src)||o.getAttribute("type")!==(_.type==null?null:_.type)||o.getAttribute("crossorigin")!==(_.crossOrigin==null?null:_.crossOrigin))&&N&&o.hasAttribute("async")&&!o.hasAttribute("itemprop"))break;return o;default:return o}}else if(l==="input"&&o.type==="hidden"){var N=_.name==null?null:""+_.name;if(_.type==="hidden"&&o.getAttribute("name")===N)return o}else return o;if(o=qa(o.nextSibling),o===null)break}return null}function jM(o,l,d){if(l==="")return null;for(;o.nodeType!==3;)if((o.nodeType!==1||o.nodeName!=="INPUT"||o.type!=="hidden")&&!d||(o=qa(o.nextSibling),o===null))return null;return o}function p3(o,l){for(;o.nodeType!==8;)if((o.nodeType!==1||o.nodeName!=="INPUT"||o.type!=="hidden")&&!l||(o=qa(o.nextSibling),o===null))return null;return o}function X_(o){return o.data==="$?"||o.data==="$~"}function j_(o){return o.data==="$!"||o.data==="$?"&&o.ownerDocument.readyState!=="loading"}function JM(o,l){var d=o.ownerDocument;if(o.data==="$~")o._reactRetry=l;else if(o.data!=="$?"||d.readyState!=="loading")l();else{var v=function(){l(),d.removeEventListener("DOMContentLoaded",v)};d.addEventListener("DOMContentLoaded",v),o._reactRetry=v}}function qa(o){for(;o!=null;o=o.nextSibling){var l=o.nodeType;if(l===1||l===3)break;if(l===8){if(l=o.data,l==="$"||l==="$!"||l==="$?"||l==="$~"||l==="&"||l==="F!"||l==="F")break;if(l==="/$"||l==="/&")return null}}return o}var J_=null;function g3(o){o=o.nextSibling;for(var l=0;o;){if(o.nodeType===8){var d=o.data;if(d==="/$"||d==="/&"){if(l===0)return qa(o.nextSibling);l--}else d!=="$"&&d!=="$!"&&d!=="$?"&&d!=="$~"&&d!=="&"||l++}o=o.nextSibling}return null}function m3(o){o=o.previousSibling;for(var l=0;o;){if(o.nodeType===8){var d=o.data;if(d==="$"||d==="$!"||d==="$?"||d==="$~"||d==="&"){if(l===0)return o;l--}else d!=="/$"&&d!=="/&"||l++}o=o.previousSibling}return null}function v3(o,l,d){switch(l=Ux(d),o){case"html":if(o=l.documentElement,!o)throw Error(n(452));return o;case"head":if(o=l.head,!o)throw Error(n(453));return o;case"body":if(o=l.body,!o)throw Error(n(454));return o;default:throw Error(n(451))}}function mv(o){for(var l=o.attributes;l.length;)o.removeAttributeNode(l[0]);tu(o)}var za=new Map,y3=new Set;function Hx(o){return typeof o.getRootNode=="function"?o.getRootNode():o.nodeType===9?o:o.ownerDocument}var Oc=at.d;at.d={f:KM,r:QM,D:ZM,C:tI,L:eI,m:nI,X:rI,S:iI,M:sI};function KM(){var o=Oc.f(),l=Lx();return o||l}function QM(o){var l=Vo(o);l!==null&&l.tag===5&&l.type==="form"?kC(l):Oc.r(o)}var Dg=typeof document>"u"?null:document;function x3(o,l,d){var v=Dg;if(v&&typeof l=="string"&&l){var _=Br(l);_='link[rel="'+o+'"][href="'+_+'"]',typeof d=="string"&&(_+='[crossorigin="'+d+'"]'),y3.has(_)||(y3.add(_),o={rel:o,crossOrigin:d,href:l},v.querySelector(_)===null&&(l=v.createElement("link"),us(l,"link",o),Vi(l),v.head.appendChild(l)))}}function ZM(o){Oc.D(o),x3("dns-prefetch",o,null)}function tI(o,l){Oc.C(o,l),x3("preconnect",o,l)}function eI(o,l,d){Oc.L(o,l,d);var v=Dg;if(v&&o&&l){var _='link[rel="preload"][as="'+Br(l)+'"]';l==="image"&&d&&d.imageSrcSet?(_+='[imagesrcset="'+Br(d.imageSrcSet)+'"]',typeof d.imageSizes=="string"&&(_+='[imagesizes="'+Br(d.imageSizes)+'"]')):_+='[href="'+Br(o)+'"]';var N=_;switch(l){case"style":N=Lg(o);break;case"script":N=Mg(o)}za.has(N)||(o=g({rel:"preload",href:l==="image"&&d&&d.imageSrcSet?void 0:o,as:l},d),za.set(N,o),v.querySelector(_)!==null||l==="style"&&v.querySelector(vv(N))||l==="script"&&v.querySelector(yv(N))||(l=v.createElement("link"),us(l,"link",o),Vi(l),v.head.appendChild(l)))}}function nI(o,l){Oc.m(o,l);var d=Dg;if(d&&o){var v=l&&typeof l.as=="string"?l.as:"script",_='link[rel="modulepreload"][as="'+Br(v)+'"][href="'+Br(o)+'"]',N=_;switch(v){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":N=Mg(o)}if(!za.has(N)&&(o=g({rel:"modulepreload",href:o},l),za.set(N,o),d.querySelector(_)===null)){switch(v){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(d.querySelector(yv(N)))return}v=d.createElement("link"),us(v,"link",o),Vi(v),d.head.appendChild(v)}}}function iI(o,l,d){Oc.S(o,l,d);var v=Dg;if(v&&o){var _=nu(v).hoistableStyles,N=Lg(o);l=l||"default";var H=_.get(N);if(!H){var rt={loading:0,preload:null};if(H=v.querySelector(vv(N)))rt.loading=5;else{o=g({rel:"stylesheet",href:o,"data-precedence":l},d),(d=za.get(N))&&K_(o,d);var gt=H=v.createElement("link");Vi(gt),us(gt,"link",o),gt._p=new Promise(function(Mt,Ht){gt.onload=Mt,gt.onerror=Ht}),gt.addEventListener("load",function(){rt.loading|=1}),gt.addEventListener("error",function(){rt.loading|=2}),rt.loading|=4,qx(H,l,v)}H={type:"stylesheet",instance:H,count:1,state:rt},_.set(N,H)}}}function rI(o,l){Oc.X(o,l);var d=Dg;if(d&&o){var v=nu(d).hoistableScripts,_=Mg(o),N=v.get(_);N||(N=d.querySelector(yv(_)),N||(o=g({src:o,async:!0},l),(l=za.get(_))&&Q_(o,l),N=d.createElement("script"),Vi(N),us(N,"link",o),d.head.appendChild(N)),N={type:"script",instance:N,count:1,state:null},v.set(_,N))}}function sI(o,l){Oc.M(o,l);var d=Dg;if(d&&o){var v=nu(d).hoistableScripts,_=Mg(o),N=v.get(_);N||(N=d.querySelector(yv(_)),N||(o=g({src:o,async:!0,type:"module"},l),(l=za.get(_))&&Q_(o,l),N=d.createElement("script"),Vi(N),us(N,"link",o),d.head.appendChild(N)),N={type:"script",instance:N,count:1,state:null},v.set(_,N))}}function b3(o,l,d,v){var _=(_=ft.current)?Hx(_):null;if(!_)throw Error(n(446));switch(o){case"meta":case"title":return null;case"style":return typeof d.precedence=="string"&&typeof d.href=="string"?(l=Lg(d.href),d=nu(_).hoistableStyles,v=d.get(l),v||(v={type:"style",instance:null,count:0,state:null},d.set(l,v)),v):{type:"void",instance:null,count:0,state:null};case"link":if(d.rel==="stylesheet"&&typeof d.href=="string"&&typeof d.precedence=="string"){o=Lg(d.href);var N=nu(_).hoistableStyles,H=N.get(o);if(H||(_=_.ownerDocument||_,H={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},N.set(o,H),(N=_.querySelector(vv(o)))&&!N._p&&(H.instance=N,H.state.loading=5),za.has(o)||(d={rel:"preload",as:"style",href:d.href,crossOrigin:d.crossOrigin,integrity:d.integrity,media:d.media,hrefLang:d.hrefLang,referrerPolicy:d.referrerPolicy},za.set(o,d),N||oI(_,o,d,H.state))),l&&v===null)throw Error(n(528,""));return H}if(l&&v!==null)throw Error(n(529,""));return null;case"script":return l=d.async,d=d.src,typeof d=="string"&&l&&typeof l!="function"&&typeof l!="symbol"?(l=Mg(d),d=nu(_).hoistableScripts,v=d.get(l),v||(v={type:"script",instance:null,count:0,state:null},d.set(l,v)),v):{type:"void",instance:null,count:0,state:null};default:throw Error(n(444,o))}}function Lg(o){return'href="'+Br(o)+'"'}function vv(o){return'link[rel="stylesheet"]['+o+"]"}function A3(o){return g({},o,{"data-precedence":o.precedence,precedence:null})}function oI(o,l,d,v){o.querySelector('link[rel="preload"][as="style"]['+l+"]")?v.loading=1:(l=o.createElement("link"),v.preload=l,l.addEventListener("load",function(){return v.loading|=1}),l.addEventListener("error",function(){return v.loading|=2}),us(l,"link",d),Vi(l),o.head.appendChild(l))}function Mg(o){return'[src="'+Br(o)+'"]'}function yv(o){return"script[async]"+o}function _3(o,l,d){if(l.count++,l.instance===null)switch(l.type){case"style":var v=o.querySelector('style[data-href~="'+Br(d.href)+'"]');if(v)return l.instance=v,Vi(v),v;var _=g({},d,{"data-href":d.href,"data-precedence":d.precedence,href:null,precedence:null});return v=(o.ownerDocument||o).createElement("style"),Vi(v),us(v,"style",_),qx(v,d.precedence,o),l.instance=v;case"stylesheet":_=Lg(d.href);var N=o.querySelector(vv(_));if(N)return l.state.loading|=4,l.instance=N,Vi(N),N;v=A3(d),(_=za.get(_))&&K_(v,_),N=(o.ownerDocument||o).createElement("link"),Vi(N);var H=N;return H._p=new Promise(function(rt,gt){H.onload=rt,H.onerror=gt}),us(N,"link",v),l.state.loading|=4,qx(N,d.precedence,o),l.instance=N;case"script":return N=Mg(d.src),(_=o.querySelector(yv(N)))?(l.instance=_,Vi(_),_):(v=d,(_=za.get(N))&&(v=g({},d),Q_(v,_)),o=o.ownerDocument||o,_=o.createElement("script"),Vi(_),us(_,"link",v),o.head.appendChild(_),l.instance=_);case"void":return null;default:throw Error(n(443,l.type))}else l.type==="stylesheet"&&(l.state.loading&4)===0&&(v=l.instance,l.state.loading|=4,qx(v,d.precedence,o));return l.instance}function qx(o,l,d){for(var v=d.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),_=v.length?v[v.length-1]:null,N=_,H=0;H<v.length;H++){var rt=v[H];if(rt.dataset.precedence===l)N=rt;else if(N!==_)break}N?N.parentNode.insertBefore(o,N.nextSibling):(l=d.nodeType===9?d.head:d,l.insertBefore(o,l.firstChild))}function K_(o,l){o.crossOrigin==null&&(o.crossOrigin=l.crossOrigin),o.referrerPolicy==null&&(o.referrerPolicy=l.referrerPolicy),o.title==null&&(o.title=l.title)}function Q_(o,l){o.crossOrigin==null&&(o.crossOrigin=l.crossOrigin),o.referrerPolicy==null&&(o.referrerPolicy=l.referrerPolicy),o.integrity==null&&(o.integrity=l.integrity)}var zx=null;function w3(o,l,d){if(zx===null){var v=new Map,_=zx=new Map;_.set(d,v)}else _=zx,v=_.get(d),v||(v=new Map,_.set(d,v));if(v.has(o))return v;for(v.set(o,null),d=d.getElementsByTagName(o),_=0;_<d.length;_++){var N=d[_];if(!(N[Ra]||N[Bn]||o==="link"&&N.getAttribute("rel")==="stylesheet")&&N.namespaceURI!=="http://www.w3.org/2000/svg"){var H=N.getAttribute(l)||"";H=o+H;var rt=v.get(H);rt?rt.push(N):v.set(H,[N])}}return v}function S3(o,l,d){o=o.ownerDocument||o,o.head.insertBefore(d,l==="title"?o.querySelector("head > title"):null)}function aI(o,l,d){if(d===1||l.itemProp!=null)return!1;switch(o){case"meta":case"title":return!0;case"style":if(typeof l.precedence!="string"||typeof l.href!="string"||l.href==="")break;return!0;case"link":if(typeof l.rel!="string"||typeof l.href!="string"||l.href===""||l.onLoad||l.onError)break;switch(l.rel){case"stylesheet":return o=l.disabled,typeof l.precedence=="string"&&o==null;default:return!0}case"script":if(l.async&&typeof l.async!="function"&&typeof l.async!="symbol"&&!l.onLoad&&!l.onError&&l.src&&typeof l.src=="string")return!0}return!1}function E3(o){return!(o.type==="stylesheet"&&(o.state.loading&3)===0)}function lI(o,l,d,v){if(d.type==="stylesheet"&&(typeof v.media!="string"||matchMedia(v.media).matches!==!1)&&(d.state.loading&4)===0){if(d.instance===null){var _=Lg(v.href),N=l.querySelector(vv(_));if(N){l=N._p,l!==null&&typeof l=="object"&&typeof l.then=="function"&&(o.count++,o=Gx.bind(o),l.then(o,o)),d.state.loading|=4,d.instance=N,Vi(N);return}N=l.ownerDocument||l,v=A3(v),(_=za.get(_))&&K_(v,_),N=N.createElement("link"),Vi(N);var H=N;H._p=new Promise(function(rt,gt){H.onload=rt,H.onerror=gt}),us(N,"link",v),d.instance=N}o.stylesheets===null&&(o.stylesheets=new Map),o.stylesheets.set(d,l),(l=d.state.preload)&&(d.state.loading&3)===0&&(o.count++,d=Gx.bind(o),l.addEventListener("load",d),l.addEventListener("error",d))}}var Z_=0;function uI(o,l){return o.stylesheets&&o.count===0&&Yx(o,o.stylesheets),0<o.count||0<o.imgCount?function(d){var v=setTimeout(function(){if(o.stylesheets&&Yx(o,o.stylesheets),o.unsuspend){var N=o.unsuspend;o.unsuspend=null,N()}},6e4+l);0<o.imgBytes&&Z_===0&&(Z_=62500*GM());var _=setTimeout(function(){if(o.waitingForImages=!1,o.count===0&&(o.stylesheets&&Yx(o,o.stylesheets),o.unsuspend)){var N=o.unsuspend;o.unsuspend=null,N()}},(o.imgBytes>Z_?50:800)+l);return o.unsuspend=d,function(){o.unsuspend=null,clearTimeout(v),clearTimeout(_)}}:null}function Gx(){if(this.count--,this.count===0&&(this.imgCount===0||!this.waitingForImages)){if(this.stylesheets)Yx(this,this.stylesheets);else if(this.unsuspend){var o=this.unsuspend;this.unsuspend=null,o()}}}var Vx=null;function Yx(o,l){o.stylesheets=null,o.unsuspend!==null&&(o.count++,Vx=new Map,l.forEach(cI,o),Vx=null,Gx.call(o))}function cI(o,l){if(!(l.state.loading&4)){var d=Vx.get(o);if(d)var v=d.get(null);else{d=new Map,Vx.set(o,d);for(var _=o.querySelectorAll("link[data-precedence],style[data-precedence]"),N=0;N<_.length;N++){var H=_[N];(H.nodeName==="LINK"||H.getAttribute("media")!=="not all")&&(d.set(H.dataset.precedence,H),v=H)}v&&d.set(null,v)}_=l.instance,H=_.getAttribute("data-precedence"),N=d.get(H)||v,N===v&&d.set(null,_),d.set(H,_),this.count++,v=Gx.bind(this),_.addEventListener("load",v),_.addEventListener("error",v),N?N.parentNode.insertBefore(_,N.nextSibling):(o=o.nodeType===9?o.head:o,o.insertBefore(_,o.firstChild)),l.state.loading|=4}}var xv={$$typeof:R,Provider:null,Consumer:null,_currentValue:ht,_currentValue2:ht,_threadCount:0};function hI(o,l,d,v,_,N,H,rt,gt){this.tag=1,this.containerInfo=o,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=As(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=As(0),this.hiddenUpdates=As(null),this.identifierPrefix=v,this.onUncaughtError=_,this.onCaughtError=N,this.onRecoverableError=H,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=gt,this.incompleteTransitions=new Map}function C3(o,l,d,v,_,N,H,rt,gt,Mt,Ht,Yt){return o=new hI(o,l,d,H,gt,Mt,Ht,Yt,rt),l=1,N===!0&&(l|=24),N=Gr(3,null,null,l),o.current=N,N.stateNode=o,l=hf(),l.refCount++,o.pooledCache=l,l.refCount++,N.memoizedState={element:v,isDehydrated:d,cache:l},Mn(N),o}function T3(o){return o?(o=_r,o):_r}function N3(o,l,d,v,_,N){_=T3(_),v.context===null?v.context=_:v.pendingContext=_,v=Ne(l),v.payload={element:d},N=N===void 0?null:N,N!==null&&(v.callback=N),d=On(o,v,l),d!==null&&(Lo(d,o,l),cr(d,o,l))}function R3(o,l){if(o=o.memoizedState,o!==null&&o.dehydrated!==null){var d=o.retryLane;o.retryLane=d!==0&&d<l?d:l}}function tw(o,l){R3(o,l),(o=o.alternate)&&R3(o,l)}function D3(o){if(o.tag===13||o.tag===31){var l=bl(o,67108864);l!==null&&Lo(l,o,67108864),tw(o,67108864)}}function L3(o){if(o.tag===13||o.tag===31){var l=na();l=hi(l);var d=bl(o,l);d!==null&&Lo(d,o,l),tw(o,l)}}var $x=!0;function fI(o,l,d,v){var _=nt.T;nt.T=null;var N=at.p;try{at.p=2,ew(o,l,d,v)}finally{at.p=N,nt.T=_}}function dI(o,l,d,v){var _=nt.T;nt.T=null;var N=at.p;try{at.p=8,ew(o,l,d,v)}finally{at.p=N,nt.T=_}}function ew(o,l,d,v){if($x){var _=nw(v);if(_===null)q_(o,l,v,Wx,d),I3(o,v);else if(gI(_,o,l,d,v))v.stopPropagation();else if(I3(o,v),l&4&&-1<pI.indexOf(o)){for(;_!==null;){var N=Vo(_);if(N!==null)switch(N.tag){case 3:if(N=N.stateNode,N.current.memoizedState.isDehydrated){var H=Cn(N.pendingLanes);if(H!==0){var rt=N;for(rt.pendingLanes|=2,rt.entangledLanes|=2;H;){var gt=1<<31-tn(H);rt.entanglements[1]|=gt,H&=~gt}Lu(N),(In&6)===0&&(Rx=ye()+500,dv(0))}}break;case 31:case 13:rt=bl(N,2),rt!==null&&Lo(rt,N,2),Lx(),tw(N,2)}if(N=nw(v),N===null&&q_(o,l,v,Wx,d),N===_)break;_=N}_!==null&&v.stopPropagation()}else q_(o,l,v,null,d)}}function nw(o){return o=Vh(o),iw(o)}var Wx=null;function iw(o){if(Wx=null,o=Go(o),o!==null){var l=s(o);if(l===null)o=null;else{var d=l.tag;if(d===13){if(o=a(l),o!==null)return o;o=null}else if(d===31){if(o=u(l),o!==null)return o;o=null}else if(d===3){if(l.stateNode.current.memoizedState.isDehydrated)return l.tag===3?l.stateNode.containerInfo:null;o=null}else l!==o&&(o=null)}}return Wx=o,null}function M3(o){switch(o){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(Oe()){case ke:return 2;case Xe:return 8;case mn:case Ee:return 32;case Ye:return 268435456;default:return 32}default:return 32}}var rw=!1,Sf=null,Ef=null,Cf=null,bv=new Map,Av=new Map,Tf=[],pI="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function I3(o,l){switch(o){case"focusin":case"focusout":Sf=null;break;case"dragenter":case"dragleave":Ef=null;break;case"mouseover":case"mouseout":Cf=null;break;case"pointerover":case"pointerout":bv.delete(l.pointerId);break;case"gotpointercapture":case"lostpointercapture":Av.delete(l.pointerId)}}function _v(o,l,d,v,_,N){return o===null||o.nativeEvent!==N?(o={blockedOn:l,domEventName:d,eventSystemFlags:v,nativeEvent:N,targetContainers:[_]},l!==null&&(l=Vo(l),l!==null&&D3(l)),o):(o.eventSystemFlags|=v,l=o.targetContainers,_!==null&&l.indexOf(_)===-1&&l.push(_),o)}function gI(o,l,d,v,_){switch(l){case"focusin":return Sf=_v(Sf,o,l,d,v,_),!0;case"dragenter":return Ef=_v(Ef,o,l,d,v,_),!0;case"mouseover":return Cf=_v(Cf,o,l,d,v,_),!0;case"pointerover":var N=_.pointerId;return bv.set(N,_v(bv.get(N)||null,o,l,d,v,_)),!0;case"gotpointercapture":return N=_.pointerId,Av.set(N,_v(Av.get(N)||null,o,l,d,v,_)),!0}return!1}function P3(o){var l=Go(o.target);if(l!==null){var d=s(l);if(d!==null){if(l=d.tag,l===13){if(l=a(d),l!==null){o.blockedOn=l,cc(o.priority,function(){L3(d)});return}}else if(l===31){if(l=u(d),l!==null){o.blockedOn=l,cc(o.priority,function(){L3(d)});return}}else if(l===3&&d.stateNode.current.memoizedState.isDehydrated){o.blockedOn=d.tag===3?d.stateNode.containerInfo:null;return}}}o.blockedOn=null}function Xx(o){if(o.blockedOn!==null)return!1;for(var l=o.targetContainers;0<l.length;){var d=nw(o.nativeEvent);if(d===null){d=o.nativeEvent;var v=new d.constructor(d.type,d);Ud=v,d.target.dispatchEvent(v),Ud=null}else return l=Vo(d),l!==null&&D3(l),o.blockedOn=d,!1;l.shift()}return!0}function k3(o,l,d){Xx(o)&&d.delete(l)}function mI(){rw=!1,Sf!==null&&Xx(Sf)&&(Sf=null),Ef!==null&&Xx(Ef)&&(Ef=null),Cf!==null&&Xx(Cf)&&(Cf=null),bv.forEach(k3),Av.forEach(k3)}function jx(o,l){o.blockedOn===l&&(o.blockedOn=null,rw||(rw=!0,i.unstable_scheduleCallback(i.unstable_NormalPriority,mI)))}var Jx=null;function F3(o){Jx!==o&&(Jx=o,i.unstable_scheduleCallback(i.unstable_NormalPriority,function(){Jx===o&&(Jx=null);for(var l=0;l<o.length;l+=3){var d=o[l],v=o[l+1],_=o[l+2];if(typeof v!="function"){if(iw(v||d)===null)continue;break}var N=Vo(d);N!==null&&(o.splice(l,3),l-=3,n_(N,{pending:!0,data:_,method:d.method,action:v},v,_))}}))}function Ig(o){function l(gt){return jx(gt,o)}Sf!==null&&jx(Sf,o),Ef!==null&&jx(Ef,o),Cf!==null&&jx(Cf,o),bv.forEach(l),Av.forEach(l);for(var d=0;d<Tf.length;d++){var v=Tf[d];v.blockedOn===o&&(v.blockedOn=null)}for(;0<Tf.length&&(d=Tf[0],d.blockedOn===null);)P3(d),d.blockedOn===null&&Tf.shift();if(d=(o.ownerDocument||o).$$reactFormReplay,d!=null)for(v=0;v<d.length;v+=3){var _=d[v],N=d[v+1],H=_[di]||null;if(typeof N=="function")H||F3(d);else if(H){var rt=null;if(N&&N.hasAttribute("formAction")){if(_=N,H=N[di]||null)rt=H.formAction;else if(iw(_)!==null)continue}else rt=H.action;typeof rt=="function"?d[v+1]=rt:(d.splice(v,3),v-=3),F3(d)}}}function B3(){function o(N){N.canIntercept&&N.info==="react-transition"&&N.intercept({handler:function(){return new Promise(function(H){return _=H})},focusReset:"manual",scroll:"manual"})}function l(){_!==null&&(_(),_=null),v||setTimeout(d,20)}function d(){if(!v&&!navigation.transition){var N=navigation.currentEntry;N&&N.url!=null&&navigation.navigate(N.url,{state:N.getState(),info:"react-transition",history:"replace"})}}if(typeof navigation=="object"){var v=!1,_=null;return navigation.addEventListener("navigate",o),navigation.addEventListener("navigatesuccess",l),navigation.addEventListener("navigateerror",l),setTimeout(d,100),function(){v=!0,navigation.removeEventListener("navigate",o),navigation.removeEventListener("navigatesuccess",l),navigation.removeEventListener("navigateerror",l),_!==null&&(_(),_=null)}}}function sw(o){this._internalRoot=o}Kx.prototype.render=sw.prototype.render=function(o){var l=this._internalRoot;if(l===null)throw Error(n(409));var d=l.current,v=na();N3(d,v,o,l,null,null)},Kx.prototype.unmount=sw.prototype.unmount=function(){var o=this._internalRoot;if(o!==null){this._internalRoot=null;var l=o.containerInfo;N3(o.current,2,null,o,null,null),Lx(),l[Fr]=null}};function Kx(o){this._internalRoot=o}Kx.prototype.unstable_scheduleHydration=function(o){if(o){var l=_s();o={blockedOn:null,target:o,priority:l};for(var d=0;d<Tf.length&&l!==0&&l<Tf[d].priority;d++);Tf.splice(d,0,o),d===0&&P3(o)}};var O3=t.version;if(O3!=="19.2.3")throw Error(n(527,O3,"19.2.3"));at.findDOMNode=function(o){var l=o._reactInternals;if(l===void 0)throw typeof o.render=="function"?Error(n(188)):(o=Object.keys(o).join(","),Error(n(268,o)));return o=h(l),o=o!==null?f(o):null,o=o===null?null:o.stateNode,o};var vI={bundleType:0,version:"19.2.3",rendererPackageName:"react-dom",currentDispatcherRef:nt,reconcilerVersion:"19.2.3"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Qx=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Qx.isDisabled&&Qx.supportsFiber)try{Ze=Qx.inject(vI),Vn=Qx}catch{}}return Sv.createRoot=function(o,l){if(!r(o))throw Error(n(299));var d=!1,v="",_=YC,N=$C,H=WC;return l!=null&&(l.unstable_strictMode===!0&&(d=!0),l.identifierPrefix!==void 0&&(v=l.identifierPrefix),l.onUncaughtError!==void 0&&(_=l.onUncaughtError),l.onCaughtError!==void 0&&(N=l.onCaughtError),l.onRecoverableError!==void 0&&(H=l.onRecoverableError)),l=C3(o,1,!1,null,null,d,v,null,_,N,H,B3),o[Fr]=l.current,H_(o),new sw(l)},Sv.hydrateRoot=function(o,l,d){if(!r(o))throw Error(n(299));var v=!1,_="",N=YC,H=$C,rt=WC,gt=null;return d!=null&&(d.unstable_strictMode===!0&&(v=!0),d.identifierPrefix!==void 0&&(_=d.identifierPrefix),d.onUncaughtError!==void 0&&(N=d.onUncaughtError),d.onCaughtError!==void 0&&(H=d.onCaughtError),d.onRecoverableError!==void 0&&(rt=d.onRecoverableError),d.formState!==void 0&&(gt=d.formState)),l=C3(o,1,!0,l,d??null,v,_,gt,N,H,rt,B3),l.context=T3(null),d=l.current,v=na(),v=hi(v),_=Ne(v),_.callback=null,On(d,_,v),d=v,l.current.lanes=d,br(l,d),Lu(l),o[Fr]=l.current,H_(o),new Kx(l)},Sv.version="19.2.3",Sv}var j3;function LI(){if(j3)return cw.exports;j3=1;function i(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(i)}catch(t){console.error(t)}}return i(),cw.exports=DI(),cw.exports}var MI=LI();const II=qE(MI);/**
 * react-router v7.11.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */var J3="popstate";function PI(i={}){function t(r,s){let{pathname:a="/",search:u="",hash:c=""}=Bp(r.location.hash.substring(1));return!a.startsWith("/")&&!a.startsWith(".")&&(a="/"+a),Uw("",{pathname:a,search:u,hash:c},s.state&&s.state.usr||null,s.state&&s.state.key||"default")}function e(r,s){let a=r.document.querySelector("base"),u="";if(a&&a.getAttribute("href")){let c=r.location.href,h=c.indexOf("#");u=h===-1?c:c.slice(0,h)}return u+"#"+(typeof s=="string"?s:r2(s))}function n(r,s){ol(r.pathname.charAt(0)==="/",`relative pathnames are not supported in hash history.push(${JSON.stringify(s)})`)}return FI(t,e,n,i)}function qi(i,t){if(i===!1||i===null||typeof i>"u")throw new Error(t)}function ol(i,t){if(!i){typeof console<"u"&&console.warn(t);try{throw new Error(t)}catch{}}}function kI(){return Math.random().toString(36).substring(2,10)}function K3(i,t){return{usr:i.state,key:i.key,idx:t}}function Uw(i,t,e=null,n){return{pathname:typeof i=="string"?i:i.pathname,search:"",hash:"",...typeof t=="string"?Bp(t):t,state:e,key:t&&t.key||n||kI()}}function r2({pathname:i="/",search:t="",hash:e=""}){return t&&t!=="?"&&(i+=t.charAt(0)==="?"?t:"?"+t),e&&e!=="#"&&(i+=e.charAt(0)==="#"?e:"#"+e),i}function Bp(i){let t={};if(i){let e=i.indexOf("#");e>=0&&(t.hash=i.substring(e),i=i.substring(0,e));let n=i.indexOf("?");n>=0&&(t.search=i.substring(n),i=i.substring(0,n)),i&&(t.pathname=i)}return t}function FI(i,t,e,n={}){let{window:r=document.defaultView,v5Compat:s=!1}=n,a=r.history,u="POP",c=null,h=f();h==null&&(h=0,a.replaceState({...a.state,idx:h},""));function f(){return(a.state||{idx:null}).idx}function g(){u="POP";let T=f(),C=T==null?null:T-h;h=T,c&&c({action:u,location:S.location,delta:C})}function m(T,C){u="PUSH";let D=Uw(S.location,T,C);e&&e(D,T),h=f()+1;let R=K3(D,h),I=S.createHref(D);try{a.pushState(R,"",I)}catch(F){if(F instanceof DOMException&&F.name==="DataCloneError")throw F;r.location.assign(I)}s&&c&&c({action:u,location:S.location,delta:1})}function y(T,C){u="REPLACE";let D=Uw(S.location,T,C);e&&e(D,T),h=f();let R=K3(D,h),I=S.createHref(D);a.replaceState(R,"",I),s&&c&&c({action:u,location:S.location,delta:0})}function w(T){return BI(T)}let S={get action(){return u},get location(){return i(r,a)},listen(T){if(c)throw new Error("A history only accepts one active listener");return r.addEventListener(J3,g),c=T,()=>{r.removeEventListener(J3,g),c=null}},createHref(T){return t(r,T)},createURL:w,encodeLocation(T){let C=w(T);return{pathname:C.pathname,search:C.search,hash:C.hash}},push:m,replace:y,go(T){return a.go(T)}};return S}function BI(i,t=!1){let e="http://localhost";typeof window<"u"&&(e=window.location.origin!=="null"?window.location.origin:window.location.href),qi(e,"No window.location.(origin|href) available to create URL");let n=typeof i=="string"?i:r2(i);return n=n.replace(/ $/,"%20"),!t&&n.startsWith("//")&&(n=e+n),new URL(n,e)}function pN(i,t,e="/"){return OI(i,t,e,!1)}function OI(i,t,e,n){let r=typeof t=="string"?Bp(t):t,s=Dh(r.pathname||"/",e);if(s==null)return null;let a=gN(i);UI(a);let u=null;for(let c=0;u==null&&c<a.length;++c){let h=JI(s);u=XI(a[c],h,n)}return u}function gN(i,t=[],e=[],n="",r=!1){let s=(a,u,c=r,h)=>{let f={relativePath:h===void 0?a.path||"":h,caseSensitive:a.caseSensitive===!0,childrenIndex:u,route:a};if(f.relativePath.startsWith("/")){if(!f.relativePath.startsWith(n)&&c)return;qi(f.relativePath.startsWith(n),`Absolute route path "${f.relativePath}" nested under path "${n}" is not valid. An absolute child route path must start with the combined path of all its parent routes.`),f.relativePath=f.relativePath.slice(n.length)}let g=Ch([n,f.relativePath]),m=e.concat(f);a.children&&a.children.length>0&&(qi(a.index!==!0,`Index routes must not have child routes. Please remove all child routes from route path "${g}".`),gN(a.children,t,m,g,c)),!(a.path==null&&!a.index)&&t.push({path:g,score:$I(g,a.index),routesMeta:m})};return i.forEach((a,u)=>{var c;if(a.path===""||!((c=a.path)!=null&&c.includes("?")))s(a,u);else for(let h of mN(a.path))s(a,u,!0,h)}),t}function mN(i){let t=i.split("/");if(t.length===0)return[];let[e,...n]=t,r=e.endsWith("?"),s=e.replace(/\?$/,"");if(n.length===0)return r?[s,""]:[s];let a=mN(n.join("/")),u=[];return u.push(...a.map(c=>c===""?s:[s,c].join("/"))),r&&u.push(...a),u.map(c=>i.startsWith("/")&&c===""?"/":c)}function UI(i){i.sort((t,e)=>t.score!==e.score?e.score-t.score:WI(t.routesMeta.map(n=>n.childrenIndex),e.routesMeta.map(n=>n.childrenIndex)))}var HI=/^:[\w-]+$/,qI=3,zI=2,GI=1,VI=10,YI=-2,Q3=i=>i==="*";function $I(i,t){let e=i.split("/"),n=e.length;return e.some(Q3)&&(n+=YI),t&&(n+=zI),e.filter(r=>!Q3(r)).reduce((r,s)=>r+(HI.test(s)?qI:s===""?GI:VI),n)}function WI(i,t){return i.length===t.length&&i.slice(0,-1).every((n,r)=>n===t[r])?i[i.length-1]-t[t.length-1]:0}function XI(i,t,e=!1){let{routesMeta:n}=i,r={},s="/",a=[];for(let u=0;u<n.length;++u){let c=n[u],h=u===n.length-1,f=s==="/"?t:t.slice(s.length)||"/",g=Gb({path:c.relativePath,caseSensitive:c.caseSensitive,end:h},f),m=c.route;if(!g&&h&&e&&!n[n.length-1].route.index&&(g=Gb({path:c.relativePath,caseSensitive:c.caseSensitive,end:!1},f)),!g)return null;Object.assign(r,g.params),a.push({params:r,pathname:Ch([s,g.pathname]),pathnameBase:tP(Ch([s,g.pathnameBase])),route:m}),g.pathnameBase!=="/"&&(s=Ch([s,g.pathnameBase]))}return a}function Gb(i,t){typeof i=="string"&&(i={path:i,caseSensitive:!1,end:!0});let[e,n]=jI(i.path,i.caseSensitive,i.end),r=t.match(e);if(!r)return null;let s=r[0],a=s.replace(/(.)\/+$/,"$1"),u=r.slice(1);return{params:n.reduce((h,{paramName:f,isOptional:g},m)=>{if(f==="*"){let w=u[m]||"";a=s.slice(0,s.length-w.length).replace(/(.)\/+$/,"$1")}const y=u[m];return g&&!y?h[f]=void 0:h[f]=(y||"").replace(/%2F/g,"/"),h},{}),pathname:s,pathnameBase:a,pattern:i}}function jI(i,t=!1,e=!0){ol(i==="*"||!i.endsWith("*")||i.endsWith("/*"),`Route path "${i}" will be treated as if it were "${i.replace(/\*$/,"/*")}" because the \`*\` character must always follow a \`/\` in the pattern. To get rid of this warning, please change the route path to "${i.replace(/\*$/,"/*")}".`);let n=[],r="^"+i.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(a,u,c)=>(n.push({paramName:u,isOptional:c!=null}),c?"/?([^\\/]+)?":"/([^\\/]+)")).replace(/\/([\w-]+)\?(\/|$)/g,"(/$1)?$2");return i.endsWith("*")?(n.push({paramName:"*"}),r+=i==="*"||i==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):e?r+="\\/*$":i!==""&&i!=="/"&&(r+="(?:(?=\\/|$))"),[new RegExp(r,t?void 0:"i"),n]}function JI(i){try{return i.split("/").map(t=>decodeURIComponent(t).replace(/\//g,"%2F")).join("/")}catch(t){return ol(!1,`The URL path "${i}" could not be decoded because it is a malformed URL segment. This is probably due to a bad percent encoding (${t}).`),i}}function Dh(i,t){if(t==="/")return i;if(!i.toLowerCase().startsWith(t.toLowerCase()))return null;let e=t.endsWith("/")?t.length-1:t.length,n=i.charAt(e);return n&&n!=="/"?null:i.slice(e)||"/"}var vN=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,KI=i=>vN.test(i);function QI(i,t="/"){let{pathname:e,search:n="",hash:r=""}=typeof i=="string"?Bp(i):i,s;if(e)if(KI(e))s=e;else{if(e.includes("//")){let a=e;e=e.replace(/\/\/+/g,"/"),ol(!1,`Pathnames cannot have embedded double slashes - normalizing ${a} -> ${e}`)}e.startsWith("/")?s=Z3(e.substring(1),"/"):s=Z3(e,t)}else s=t;return{pathname:s,search:eP(n),hash:nP(r)}}function Z3(i,t){let e=t.replace(/\/+$/,"").split("/");return i.split("/").forEach(r=>{r===".."?e.length>1&&e.pop():r!=="."&&e.push(r)}),e.length>1?e.join("/"):"/"}function pw(i,t,e,n){return`Cannot include a '${i}' character in a manually specified \`to.${t}\` field [${JSON.stringify(n)}].  Please separate it out to the \`to.${e}\` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.`}function ZI(i){return i.filter((t,e)=>e===0||t.route.path&&t.route.path.length>0)}function yN(i){let t=ZI(i);return t.map((e,n)=>n===t.length-1?e.pathname:e.pathnameBase)}function xN(i,t,e,n=!1){let r;typeof i=="string"?r=Bp(i):(r={...i},qi(!r.pathname||!r.pathname.includes("?"),pw("?","pathname","search",r)),qi(!r.pathname||!r.pathname.includes("#"),pw("#","pathname","hash",r)),qi(!r.search||!r.search.includes("#"),pw("#","search","hash",r)));let s=i===""||r.pathname==="",a=s?"/":r.pathname,u;if(a==null)u=e;else{let g=t.length-1;if(!n&&a.startsWith("..")){let m=a.split("/");for(;m[0]==="..";)m.shift(),g-=1;r.pathname=m.join("/")}u=g>=0?t[g]:"/"}let c=QI(r,u),h=a&&a!=="/"&&a.endsWith("/"),f=(s||a===".")&&e.endsWith("/");return!c.pathname.endsWith("/")&&(h||f)&&(c.pathname+="/"),c}var Ch=i=>i.join("/").replace(/\/\/+/g,"/"),tP=i=>i.replace(/\/+$/,"").replace(/^\/*/,"/"),eP=i=>!i||i==="?"?"":i.startsWith("?")?i:"?"+i,nP=i=>!i||i==="#"?"":i.startsWith("#")?i:"#"+i,iP=class{constructor(i,t,e,n=!1){this.status=i,this.statusText=t||"",this.internal=n,e instanceof Error?(this.data=e.toString(),this.error=e):this.data=e}};function rP(i){return i!=null&&typeof i.status=="number"&&typeof i.statusText=="string"&&typeof i.internal=="boolean"&&"data"in i}function sP(i){return i.map(t=>t.route.path).filter(Boolean).join("/").replace(/\/\/*/g,"/")||"/"}var bN=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";function AN(i,t){let e=i;if(typeof e!="string"||!vN.test(e))return{absoluteURL:void 0,isExternal:!1,to:e};let n=e,r=!1;if(bN)try{let s=new URL(window.location.href),a=e.startsWith("//")?new URL(s.protocol+e):new URL(e),u=Dh(a.pathname,t);a.origin===s.origin&&u!=null?e=u+a.search+a.hash:r=!0}catch{ol(!1,`<Link to="${e}"> contains an invalid URL which will probably break when clicked - please update to a valid URL path.`)}return{absoluteURL:n,isExternal:r,to:e}}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");var _N=["POST","PUT","PATCH","DELETE"];new Set(_N);var oP=["GET",..._N];new Set(oP);var B1=Ut.createContext(null);B1.displayName="DataRouter";var DA=Ut.createContext(null);DA.displayName="DataRouterState";var aP=Ut.createContext(!1),wN=Ut.createContext({isTransitioning:!1});wN.displayName="ViewTransition";var lP=Ut.createContext(new Map);lP.displayName="Fetchers";var uP=Ut.createContext(null);uP.displayName="Await";var ul=Ut.createContext(null);ul.displayName="Navigation";var tx=Ut.createContext(null);tx.displayName="Location";var Ph=Ut.createContext({outlet:null,matches:[],isDataRoute:!1});Ph.displayName="Route";var GE=Ut.createContext(null);GE.displayName="RouteError";var SN="REACT_ROUTER_ERROR",cP="REDIRECT",hP="ROUTE_ERROR_RESPONSE";function fP(i){if(i.startsWith(`${SN}:${cP}:{`))try{let t=JSON.parse(i.slice(28));if(typeof t=="object"&&t&&typeof t.status=="number"&&typeof t.statusText=="string"&&typeof t.location=="string"&&typeof t.reloadDocument=="boolean"&&typeof t.replace=="boolean")return t}catch{}}function dP(i){if(i.startsWith(`${SN}:${hP}:{`))try{let t=JSON.parse(i.slice(40));if(typeof t=="object"&&t&&typeof t.status=="number"&&typeof t.statusText=="string")return new iP(t.status,t.statusText,t.data)}catch{}}function pP(i,{relative:t}={}){qi(ex(),"useHref() may be used only in the context of a <Router> component.");let{basename:e,navigator:n}=Ut.useContext(ul),{hash:r,pathname:s,search:a}=nx(i,{relative:t}),u=s;return e!=="/"&&(u=s==="/"?e:Ch([e,s])),n.createHref({pathname:u,search:a,hash:r})}function ex(){return Ut.useContext(tx)!=null}function kh(){return qi(ex(),"useLocation() may be used only in the context of a <Router> component."),Ut.useContext(tx).location}var EN="You should call navigate() in a React.useEffect(), not when your component is first rendered.";function CN(i){Ut.useContext(ul).static||Ut.useLayoutEffect(i)}function TN(){let{isDataRoute:i}=Ut.useContext(Ph);return i?TP():gP()}function gP(){qi(ex(),"useNavigate() may be used only in the context of a <Router> component.");let i=Ut.useContext(B1),{basename:t,navigator:e}=Ut.useContext(ul),{matches:n}=Ut.useContext(Ph),{pathname:r}=kh(),s=JSON.stringify(yN(n)),a=Ut.useRef(!1);return CN(()=>{a.current=!0}),Ut.useCallback((c,h={})=>{if(ol(a.current,EN),!a.current)return;if(typeof c=="number"){e.go(c);return}let f=xN(c,JSON.parse(s),r,h.relative==="path");i==null&&t!=="/"&&(f.pathname=f.pathname==="/"?t:Ch([t,f.pathname])),(h.replace?e.replace:e.push)(f,h.state,h)},[t,e,s,r,i])}Ut.createContext(null);function nx(i,{relative:t}={}){let{matches:e}=Ut.useContext(Ph),{pathname:n}=kh(),r=JSON.stringify(yN(e));return Ut.useMemo(()=>xN(i,JSON.parse(r),n,t==="path"),[i,r,n,t])}function mP(i,t){return NN(i,t)}function NN(i,t,e,n,r){var D;qi(ex(),"useRoutes() may be used only in the context of a <Router> component.");let{navigator:s}=Ut.useContext(ul),{matches:a}=Ut.useContext(Ph),u=a[a.length-1],c=u?u.params:{},h=u?u.pathname:"/",f=u?u.pathnameBase:"/",g=u&&u.route;{let R=g&&g.path||"";DN(h,!g||R.endsWith("*")||R.endsWith("*?"),`You rendered descendant <Routes> (or called \`useRoutes()\`) at "${h}" (under <Route path="${R}">) but the parent route path has no trailing "*". This means if you navigate deeper, the parent won't match anymore and therefore the child routes will never render.

Please change the parent <Route path="${R}"> to <Route path="${R==="/"?"*":`${R}/*`}">.`)}let m=kh(),y;if(t){let R=typeof t=="string"?Bp(t):t;qi(f==="/"||((D=R.pathname)==null?void 0:D.startsWith(f)),`When overriding the location using \`<Routes location>\` or \`useRoutes(routes, location)\`, the location pathname must begin with the portion of the URL pathname that was matched by all parent routes. The current pathname base is "${f}" but pathname "${R.pathname}" was given in the \`location\` prop.`),y=R}else y=m;let w=y.pathname||"/",S=w;if(f!=="/"){let R=f.replace(/^\//,"").split("/");S="/"+w.replace(/^\//,"").split("/").slice(R.length).join("/")}let T=pN(i,{pathname:S});ol(g||T!=null,`No routes matched location "${y.pathname}${y.search}${y.hash}" `),ol(T==null||T[T.length-1].route.element!==void 0||T[T.length-1].route.Component!==void 0||T[T.length-1].route.lazy!==void 0,`Matched leaf route at location "${y.pathname}${y.search}${y.hash}" does not have an element or Component. This means it will render an <Outlet /> with a null value by default resulting in an "empty" page.`);let C=AP(T&&T.map(R=>Object.assign({},R,{params:Object.assign({},c,R.params),pathname:Ch([f,s.encodeLocation?s.encodeLocation(R.pathname.replace(/\?/g,"%3F").replace(/#/g,"%23")).pathname:R.pathname]),pathnameBase:R.pathnameBase==="/"?f:Ch([f,s.encodeLocation?s.encodeLocation(R.pathnameBase.replace(/\?/g,"%3F").replace(/#/g,"%23")).pathname:R.pathnameBase])})),a,e,n,r);return t&&C?Ut.createElement(tx.Provider,{value:{location:{pathname:"/",search:"",hash:"",state:null,key:"default",...y},navigationType:"POP"}},C):C}function vP(){let i=CP(),t=rP(i)?`${i.status} ${i.statusText}`:i instanceof Error?i.message:JSON.stringify(i),e=i instanceof Error?i.stack:null,n="rgba(200,200,200, 0.5)",r={padding:"0.5rem",backgroundColor:n},s={padding:"2px 4px",backgroundColor:n},a=null;return console.error("Error handled by React Router default ErrorBoundary:",i),a=Ut.createElement(Ut.Fragment,null,Ut.createElement("p",null," Hey developer "),Ut.createElement("p",null,"You can provide a way better UX than this when your app throws errors by providing your own ",Ut.createElement("code",{style:s},"ErrorBoundary")," or"," ",Ut.createElement("code",{style:s},"errorElement")," prop on your route.")),Ut.createElement(Ut.Fragment,null,Ut.createElement("h2",null,"Unexpected Application Error!"),Ut.createElement("h3",{style:{fontStyle:"italic"}},t),e?Ut.createElement("pre",{style:r},e):null,a)}var yP=Ut.createElement(vP,null),RN=class extends Ut.Component{constructor(i){super(i),this.state={location:i.location,revalidation:i.revalidation,error:i.error}}static getDerivedStateFromError(i){return{error:i}}static getDerivedStateFromProps(i,t){return t.location!==i.location||t.revalidation!=="idle"&&i.revalidation==="idle"?{error:i.error,location:i.location,revalidation:i.revalidation}:{error:i.error!==void 0?i.error:t.error,location:t.location,revalidation:i.revalidation||t.revalidation}}componentDidCatch(i,t){this.props.onError?this.props.onError(i,t):console.error("React Router caught the following error during render",i)}render(){let i=this.state.error;if(this.context&&typeof i=="object"&&i&&"digest"in i&&typeof i.digest=="string"){const e=dP(i.digest);e&&(i=e)}let t=i!==void 0?Ut.createElement(Ph.Provider,{value:this.props.routeContext},Ut.createElement(GE.Provider,{value:i,children:this.props.component})):this.props.children;return this.context?Ut.createElement(xP,{error:i},t):t}};RN.contextType=aP;var gw=new WeakMap;function xP({children:i,error:t}){let{basename:e}=Ut.useContext(ul);if(typeof t=="object"&&t&&"digest"in t&&typeof t.digest=="string"){let n=fP(t.digest);if(n){let r=gw.get(t);if(r)throw r;let s=AN(n.location,e);if(bN&&!gw.get(t))if(s.isExternal||n.reloadDocument)window.location.href=s.absoluteURL||s.to;else{const a=Promise.resolve().then(()=>window.__reactRouterDataRouter.navigate(s.to,{replace:n.replace}));throw gw.set(t,a),a}return Ut.createElement("meta",{httpEquiv:"refresh",content:`0;url=${s.absoluteURL||s.to}`})}}return i}function bP({routeContext:i,match:t,children:e}){let n=Ut.useContext(B1);return n&&n.static&&n.staticContext&&(t.route.errorElement||t.route.ErrorBoundary)&&(n.staticContext._deepestRenderedBoundaryId=t.route.id),Ut.createElement(Ph.Provider,{value:i},e)}function AP(i,t=[],e=null,n=null,r=null){if(i==null){if(!e)return null;if(e.errors)i=e.matches;else if(t.length===0&&!e.initialized&&e.matches.length>0)i=e.matches;else return null}let s=i,a=e==null?void 0:e.errors;if(a!=null){let f=s.findIndex(g=>g.route.id&&(a==null?void 0:a[g.route.id])!==void 0);qi(f>=0,`Could not find a matching route for errors on route IDs: ${Object.keys(a).join(",")}`),s=s.slice(0,Math.min(s.length,f+1))}let u=!1,c=-1;if(e)for(let f=0;f<s.length;f++){let g=s[f];if((g.route.HydrateFallback||g.route.hydrateFallbackElement)&&(c=f),g.route.id){let{loaderData:m,errors:y}=e,w=g.route.loader&&!m.hasOwnProperty(g.route.id)&&(!y||y[g.route.id]===void 0);if(g.route.lazy||w){u=!0,c>=0?s=s.slice(0,c+1):s=[s[0]];break}}}let h=e&&n?(f,g)=>{var m,y;n(f,{location:e.location,params:((y=(m=e.matches)==null?void 0:m[0])==null?void 0:y.params)??{},unstable_pattern:sP(e.matches),errorInfo:g})}:void 0;return s.reduceRight((f,g,m)=>{let y,w=!1,S=null,T=null;e&&(y=a&&g.route.id?a[g.route.id]:void 0,S=g.route.errorElement||yP,u&&(c<0&&m===0?(DN("route-fallback",!1,"No `HydrateFallback` element provided to render during initial hydration"),w=!0,T=null):c===m&&(w=!0,T=g.route.hydrateFallbackElement||null)));let C=t.concat(s.slice(0,m+1)),D=()=>{let R;return y?R=S:w?R=T:g.route.Component?R=Ut.createElement(g.route.Component,null):g.route.element?R=g.route.element:R=f,Ut.createElement(bP,{match:g,routeContext:{outlet:f,matches:C,isDataRoute:e!=null},children:R})};return e&&(g.route.ErrorBoundary||g.route.errorElement||m===0)?Ut.createElement(RN,{location:e.location,revalidation:e.revalidation,component:S,error:y,children:D(),routeContext:{outlet:null,matches:C,isDataRoute:!0},onError:h}):D()},null)}function VE(i){return`${i} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function _P(i){let t=Ut.useContext(B1);return qi(t,VE(i)),t}function wP(i){let t=Ut.useContext(DA);return qi(t,VE(i)),t}function SP(i){let t=Ut.useContext(Ph);return qi(t,VE(i)),t}function YE(i){let t=SP(i),e=t.matches[t.matches.length-1];return qi(e.route.id,`${i} can only be used on routes that contain a unique "id"`),e.route.id}function EP(){return YE("useRouteId")}function CP(){var n;let i=Ut.useContext(GE),t=wP("useRouteError"),e=YE("useRouteError");return i!==void 0?i:(n=t.errors)==null?void 0:n[e]}function TP(){let{router:i}=_P("useNavigate"),t=YE("useNavigate"),e=Ut.useRef(!1);return CN(()=>{e.current=!0}),Ut.useCallback(async(r,s={})=>{ol(e.current,EN),e.current&&(typeof r=="number"?await i.navigate(r):await i.navigate(r,{fromRouteId:t,...s}))},[i,t])}var tT={};function DN(i,t,e){!t&&!tT[i]&&(tT[i]=!0,ol(!1,e))}Ut.memo(NP);function NP({routes:i,future:t,state:e,onError:n}){return NN(i,void 0,e,n,t)}function y5(i){qi(!1,"A <Route> is only ever to be used as the child of <Routes> element, never rendered directly. Please wrap your <Route> in a <Routes>.")}function RP({basename:i="/",children:t=null,location:e,navigationType:n="POP",navigator:r,static:s=!1,unstable_useTransitions:a}){qi(!ex(),"You cannot render a <Router> inside another <Router>. You should never have more than one in your app.");let u=i.replace(/^\/*/,"/"),c=Ut.useMemo(()=>({basename:u,navigator:r,static:s,unstable_useTransitions:a,future:{}}),[u,r,s,a]);typeof e=="string"&&(e=Bp(e));let{pathname:h="/",search:f="",hash:g="",state:m=null,key:y="default"}=e,w=Ut.useMemo(()=>{let S=Dh(h,u);return S==null?null:{location:{pathname:S,search:f,hash:g,state:m,key:y},navigationType:n}},[u,h,f,g,m,y,n]);return ol(w!=null,`<Router basename="${u}"> is not able to match the URL "${h}${f}${g}" because it does not start with the basename, so the <Router> won't render anything.`),w==null?null:Ut.createElement(ul.Provider,{value:c},Ut.createElement(tx.Provider,{children:t,value:w}))}function DP({children:i,location:t}){return mP(Hw(i),t)}function Hw(i,t=[]){let e=[];return Ut.Children.forEach(i,(n,r)=>{if(!Ut.isValidElement(n))return;let s=[...t,r];if(n.type===Ut.Fragment){e.push.apply(e,Hw(n.props.children,s));return}qi(n.type===y5,`[${typeof n.type=="string"?n.type:n.type.name}] is not a <Route> component. All component children of <Routes> must be a <Route> or <React.Fragment>`),qi(!n.props.index||!n.props.children,"An index route cannot have child routes.");let a={id:n.props.id||s.join("-"),caseSensitive:n.props.caseSensitive,element:n.props.element,Component:n.props.Component,index:n.props.index,path:n.props.path,middleware:n.props.middleware,loader:n.props.loader,action:n.props.action,hydrateFallbackElement:n.props.hydrateFallbackElement,HydrateFallback:n.props.HydrateFallback,errorElement:n.props.errorElement,ErrorBoundary:n.props.ErrorBoundary,hasErrorBoundary:n.props.hasErrorBoundary===!0||n.props.ErrorBoundary!=null||n.props.errorElement!=null,shouldRevalidate:n.props.shouldRevalidate,handle:n.props.handle,lazy:n.props.lazy};n.props.children&&(a.children=Hw(n.props.children,s)),e.push(a)}),e}var x5="get",b5="application/x-www-form-urlencoded";function LA(i){return typeof HTMLElement<"u"&&i instanceof HTMLElement}function LP(i){return LA(i)&&i.tagName.toLowerCase()==="button"}function MP(i){return LA(i)&&i.tagName.toLowerCase()==="form"}function IP(i){return LA(i)&&i.tagName.toLowerCase()==="input"}function PP(i){return!!(i.metaKey||i.altKey||i.ctrlKey||i.shiftKey)}function kP(i,t){return i.button===0&&(!t||t==="_self")&&!PP(i)}var Zx=null;function FP(){if(Zx===null)try{new FormData(document.createElement("form"),0),Zx=!1}catch{Zx=!0}return Zx}var BP=new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);function mw(i){return i!=null&&!BP.has(i)?(ol(!1,`"${i}" is not a valid \`encType\` for \`<Form>\`/\`<fetcher.Form>\` and will default to "${b5}"`),null):i}function OP(i,t){let e,n,r,s,a;if(MP(i)){let u=i.getAttribute("action");n=u?Dh(u,t):null,e=i.getAttribute("method")||x5,r=mw(i.getAttribute("enctype"))||b5,s=new FormData(i)}else if(LP(i)||IP(i)&&(i.type==="submit"||i.type==="image")){let u=i.form;if(u==null)throw new Error('Cannot submit a <button> or <input type="submit"> without a <form>');let c=i.getAttribute("formaction")||u.getAttribute("action");if(n=c?Dh(c,t):null,e=i.getAttribute("formmethod")||u.getAttribute("method")||x5,r=mw(i.getAttribute("formenctype"))||mw(u.getAttribute("enctype"))||b5,s=new FormData(u,i),!FP()){let{name:h,type:f,value:g}=i;if(f==="image"){let m=h?`${h}.`:"";s.append(`${m}x`,"0"),s.append(`${m}y`,"0")}else h&&s.append(h,g)}}else{if(LA(i))throw new Error('Cannot submit element that is not <form>, <button>, or <input type="submit|image">');e=x5,n=null,r=b5,a=i}return s&&r==="text/plain"&&(a=s,s=void 0),{action:n,method:e.toLowerCase(),encType:r,formData:s,body:a}}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");function $E(i,t){if(i===!1||i===null||typeof i>"u")throw new Error(t)}function UP(i,t,e){let n=typeof i=="string"?new URL(i,typeof window>"u"?"server://singlefetch/":window.location.origin):i;return n.pathname==="/"?n.pathname=`_root.${e}`:t&&Dh(n.pathname,t)==="/"?n.pathname=`${t.replace(/\/$/,"")}/_root.${e}`:n.pathname=`${n.pathname.replace(/\/$/,"")}.${e}`,n}async function HP(i,t){if(i.id in t)return t[i.id];try{let e=await import(i.module);return t[i.id]=e,e}catch(e){return console.error(`Error loading route module \`${i.module}\`, reloading page...`),console.error(e),window.__reactRouterContext&&window.__reactRouterContext.isSpaMode,window.location.reload(),new Promise(()=>{})}}function qP(i){return i==null?!1:i.href==null?i.rel==="preload"&&typeof i.imageSrcSet=="string"&&typeof i.imageSizes=="string":typeof i.rel=="string"&&typeof i.href=="string"}async function zP(i,t,e){let n=await Promise.all(i.map(async r=>{let s=t.routes[r.route.id];if(s){let a=await HP(s,e);return a.links?a.links():[]}return[]}));return $P(n.flat(1).filter(qP).filter(r=>r.rel==="stylesheet"||r.rel==="preload").map(r=>r.rel==="stylesheet"?{...r,rel:"prefetch",as:"style"}:{...r,rel:"prefetch"}))}function eT(i,t,e,n,r,s){let a=(c,h)=>e[h]?c.route.id!==e[h].route.id:!0,u=(c,h)=>{var f;return e[h].pathname!==c.pathname||((f=e[h].route.path)==null?void 0:f.endsWith("*"))&&e[h].params["*"]!==c.params["*"]};return s==="assets"?t.filter((c,h)=>a(c,h)||u(c,h)):s==="data"?t.filter((c,h)=>{var g;let f=n.routes[c.route.id];if(!f||!f.hasLoader)return!1;if(a(c,h)||u(c,h))return!0;if(c.route.shouldRevalidate){let m=c.route.shouldRevalidate({currentUrl:new URL(r.pathname+r.search+r.hash,window.origin),currentParams:((g=e[0])==null?void 0:g.params)||{},nextUrl:new URL(i,window.origin),nextParams:c.params,defaultShouldRevalidate:!0});if(typeof m=="boolean")return m}return!0}):[]}function GP(i,t,{includeHydrateFallback:e}={}){return VP(i.map(n=>{let r=t.routes[n.route.id];if(!r)return[];let s=[r.module];return r.clientActionModule&&(s=s.concat(r.clientActionModule)),r.clientLoaderModule&&(s=s.concat(r.clientLoaderModule)),e&&r.hydrateFallbackModule&&(s=s.concat(r.hydrateFallbackModule)),r.imports&&(s=s.concat(r.imports)),s}).flat(1))}function VP(i){return[...new Set(i)]}function YP(i){let t={},e=Object.keys(i).sort();for(let n of e)t[n]=i[n];return t}function $P(i,t){let e=new Set;return new Set(t),i.reduce((n,r)=>{let s=JSON.stringify(YP(r));return e.has(s)||(e.add(s),n.push({key:s,link:r})),n},[])}function LN(){let i=Ut.useContext(B1);return $E(i,"You must render this element inside a <DataRouterContext.Provider> element"),i}function WP(){let i=Ut.useContext(DA);return $E(i,"You must render this element inside a <DataRouterStateContext.Provider> element"),i}var WE=Ut.createContext(void 0);WE.displayName="FrameworkContext";function MN(){let i=Ut.useContext(WE);return $E(i,"You must render this element inside a <HydratedRouter> element"),i}function XP(i,t){let e=Ut.useContext(WE),[n,r]=Ut.useState(!1),[s,a]=Ut.useState(!1),{onFocus:u,onBlur:c,onMouseEnter:h,onMouseLeave:f,onTouchStart:g}=t,m=Ut.useRef(null);Ut.useEffect(()=>{if(i==="render"&&a(!0),i==="viewport"){let S=C=>{C.forEach(D=>{a(D.isIntersecting)})},T=new IntersectionObserver(S,{threshold:.5});return m.current&&T.observe(m.current),()=>{T.disconnect()}}},[i]),Ut.useEffect(()=>{if(n){let S=setTimeout(()=>{a(!0)},100);return()=>{clearTimeout(S)}}},[n]);let y=()=>{r(!0)},w=()=>{r(!1),a(!1)};return e?i!=="intent"?[s,m,{}]:[s,m,{onFocus:Ev(u,y),onBlur:Ev(c,w),onMouseEnter:Ev(h,y),onMouseLeave:Ev(f,w),onTouchStart:Ev(g,y)}]:[!1,m,{}]}function Ev(i,t){return e=>{i&&i(e),e.defaultPrevented||t(e)}}function jP({page:i,...t}){let{router:e}=LN(),n=Ut.useMemo(()=>pN(e.routes,i,e.basename),[e.routes,i,e.basename]);return n?Ut.createElement(KP,{page:i,matches:n,...t}):null}function JP(i){let{manifest:t,routeModules:e}=MN(),[n,r]=Ut.useState([]);return Ut.useEffect(()=>{let s=!1;return zP(i,t,e).then(a=>{s||r(a)}),()=>{s=!0}},[i,t,e]),n}function KP({page:i,matches:t,...e}){let n=kh(),{manifest:r,routeModules:s}=MN(),{basename:a}=LN(),{loaderData:u,matches:c}=WP(),h=Ut.useMemo(()=>eT(i,t,c,r,n,"data"),[i,t,c,r,n]),f=Ut.useMemo(()=>eT(i,t,c,r,n,"assets"),[i,t,c,r,n]),g=Ut.useMemo(()=>{if(i===n.pathname+n.search+n.hash)return[];let w=new Set,S=!1;if(t.forEach(C=>{var R;let D=r.routes[C.route.id];!D||!D.hasLoader||(!h.some(I=>I.route.id===C.route.id)&&C.route.id in u&&((R=s[C.route.id])!=null&&R.shouldRevalidate)||D.hasClientLoader?S=!0:w.add(C.route.id))}),w.size===0)return[];let T=UP(i,a,"data");return S&&w.size>0&&T.searchParams.set("_routes",t.filter(C=>w.has(C.route.id)).map(C=>C.route.id).join(",")),[T.pathname+T.search]},[a,u,n,r,h,t,i,s]),m=Ut.useMemo(()=>GP(f,r),[f,r]),y=JP(f);return Ut.createElement(Ut.Fragment,null,g.map(w=>Ut.createElement("link",{key:w,rel:"prefetch",as:"fetch",href:w,...e})),m.map(w=>Ut.createElement("link",{key:w,rel:"modulepreload",href:w,...e})),y.map(({key:w,link:S})=>Ut.createElement("link",{key:w,nonce:e.nonce,...S})))}function QP(...i){return t=>{i.forEach(e=>{typeof e=="function"?e(t):e!=null&&(e.current=t)})}}var ZP=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";try{ZP&&(window.__reactRouterVersion="7.11.0")}catch{}function tk({basename:i,children:t,unstable_useTransitions:e,window:n}){let r=Ut.useRef();r.current==null&&(r.current=PI({window:n,v5Compat:!0}));let s=r.current,[a,u]=Ut.useState({action:s.action,location:s.location}),c=Ut.useCallback(h=>{e===!1?u(h):Ut.startTransition(()=>u(h))},[e]);return Ut.useLayoutEffect(()=>s.listen(c),[s,c]),Ut.createElement(RP,{basename:i,children:t,location:a.location,navigationType:a.action,navigator:s,unstable_useTransitions:e})}var IN=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,F1=Ut.forwardRef(function({onClick:t,discover:e="render",prefetch:n="none",relative:r,reloadDocument:s,replace:a,state:u,target:c,to:h,preventScrollReset:f,viewTransition:g,unstable_defaultShouldRevalidate:m,...y},w){let{basename:S,unstable_useTransitions:T}=Ut.useContext(ul),C=typeof h=="string"&&IN.test(h),D=AN(h,S);h=D.to;let R=pP(h,{relative:r}),[I,F,q]=XP(n,y),U=rk(h,{replace:a,state:u,target:c,preventScrollReset:f,relative:r,viewTransition:g,unstable_defaultShouldRevalidate:m,unstable_useTransitions:T});function V(J){t&&t(J),J.defaultPrevented||U(J)}let tt=Ut.createElement("a",{...y,...q,href:D.absoluteURL||R,onClick:D.isExternal||s?t:V,ref:QP(w,F),target:c,"data-discover":!C&&e==="render"?"true":void 0});return I&&!C?Ut.createElement(Ut.Fragment,null,tt,Ut.createElement(jP,{page:R})):tt});F1.displayName="Link";var ek=Ut.forwardRef(function({"aria-current":t="page",caseSensitive:e=!1,className:n="",end:r=!1,style:s,to:a,viewTransition:u,children:c,...h},f){let g=nx(a,{relative:h.relative}),m=kh(),y=Ut.useContext(DA),{navigator:w,basename:S}=Ut.useContext(ul),T=y!=null&&uk(g)&&u===!0,C=w.encodeLocation?w.encodeLocation(g).pathname:g.pathname,D=m.pathname,R=y&&y.navigation&&y.navigation.location?y.navigation.location.pathname:null;e||(D=D.toLowerCase(),R=R?R.toLowerCase():null,C=C.toLowerCase()),R&&S&&(R=Dh(R,S)||R);const I=C!=="/"&&C.endsWith("/")?C.length-1:C.length;let F=D===C||!r&&D.startsWith(C)&&D.charAt(I)==="/",q=R!=null&&(R===C||!r&&R.startsWith(C)&&R.charAt(C.length)==="/"),U={isActive:F,isPending:q,isTransitioning:T},V=F?t:void 0,tt;typeof n=="function"?tt=n(U):tt=[n,F?"active":null,q?"pending":null,T?"transitioning":null].filter(Boolean).join(" ");let J=typeof s=="function"?s(U):s;return Ut.createElement(F1,{...h,"aria-current":V,className:tt,ref:f,style:J,to:a,viewTransition:u},typeof c=="function"?c(U):c)});ek.displayName="NavLink";var nk=Ut.forwardRef(({discover:i="render",fetcherKey:t,navigate:e,reloadDocument:n,replace:r,state:s,method:a=x5,action:u,onSubmit:c,relative:h,preventScrollReset:f,viewTransition:g,unstable_defaultShouldRevalidate:m,...y},w)=>{let{unstable_useTransitions:S}=Ut.useContext(ul),T=ak(),C=lk(u,{relative:h}),D=a.toLowerCase()==="get"?"get":"post",R=typeof u=="string"&&IN.test(u),I=F=>{if(c&&c(F),F.defaultPrevented)return;F.preventDefault();let q=F.nativeEvent.submitter,U=(q==null?void 0:q.getAttribute("formmethod"))||a,V=()=>T(q||F.currentTarget,{fetcherKey:t,method:U,navigate:e,replace:r,state:s,relative:h,preventScrollReset:f,viewTransition:g,unstable_defaultShouldRevalidate:m});S&&e!==!1?Ut.startTransition(()=>V()):V()};return Ut.createElement("form",{ref:w,method:D,action:C,onSubmit:n?c:I,...y,"data-discover":!R&&i==="render"?"true":void 0})});nk.displayName="Form";function ik(i){return`${i} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function PN(i){let t=Ut.useContext(B1);return qi(t,ik(i)),t}function rk(i,{target:t,replace:e,state:n,preventScrollReset:r,relative:s,viewTransition:a,unstable_defaultShouldRevalidate:u,unstable_useTransitions:c}={}){let h=TN(),f=kh(),g=nx(i,{relative:s});return Ut.useCallback(m=>{if(kP(m,t)){m.preventDefault();let y=e!==void 0?e:r2(f)===r2(g),w=()=>h(i,{replace:y,state:n,preventScrollReset:r,relative:s,viewTransition:a,unstable_defaultShouldRevalidate:u});c?Ut.startTransition(()=>w()):w()}},[f,h,g,e,n,t,i,r,s,a,u,c])}var sk=0,ok=()=>`__${String(++sk)}__`;function ak(){let{router:i}=PN("useSubmit"),{basename:t}=Ut.useContext(ul),e=EP(),n=i.fetch,r=i.navigate;return Ut.useCallback(async(s,a={})=>{let{action:u,method:c,encType:h,formData:f,body:g}=OP(s,t);if(a.navigate===!1){let m=a.fetcherKey||ok();await n(m,e,a.action||u,{unstable_defaultShouldRevalidate:a.unstable_defaultShouldRevalidate,preventScrollReset:a.preventScrollReset,formData:f,body:g,formMethod:a.method||c,formEncType:a.encType||h,flushSync:a.flushSync})}else await r(a.action||u,{unstable_defaultShouldRevalidate:a.unstable_defaultShouldRevalidate,preventScrollReset:a.preventScrollReset,formData:f,body:g,formMethod:a.method||c,formEncType:a.encType||h,replace:a.replace,state:a.state,fromRouteId:e,flushSync:a.flushSync,viewTransition:a.viewTransition})},[n,r,t,e])}function lk(i,{relative:t}={}){let{basename:e}=Ut.useContext(ul),n=Ut.useContext(Ph);qi(n,"useFormAction must be used inside a RouteContext");let[r]=n.matches.slice(-1),s={...nx(i||".",{relative:t})},a=kh();if(i==null){s.search=a.search;let u=new URLSearchParams(s.search),c=u.getAll("index");if(c.some(f=>f==="")){u.delete("index"),c.filter(g=>g).forEach(g=>u.append("index",g));let f=u.toString();s.search=f?`?${f}`:""}}return(!i||i===".")&&r.route.index&&(s.search=s.search?s.search.replace(/^\?/,"?index&"):"?index"),e!=="/"&&(s.pathname=s.pathname==="/"?e:Ch([e,s.pathname])),r2(s)}function uk(i,{relative:t}={}){let e=Ut.useContext(wN);qi(e!=null,"`useViewTransitionState` must be used within `react-router-dom`'s `RouterProvider`.  Did you accidentally import `RouterProvider` from `react-router`?");let{basename:n}=PN("useViewTransitionState"),r=nx(i,{relative:t});if(!e.isTransitioning)return!1;let s=Dh(e.currentLocation.pathname,n)||e.currentLocation.pathname,a=Dh(e.nextLocation.pathname,n)||e.nextLocation.pathname;return Gb(r.pathname,a)!=null||Gb(r.pathname,s)!=null}const kN=i=>Pt.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",...i,children:[Pt.jsx("path",{d:"M12 22s8-4 8-10V5l-8-3-8 3v7c0 6 8 10 8 10z"}),Pt.jsx("path",{d:"m9 12 2 2 4-4"})]}),ck=()=>Pt.jsx("header",{className:"fixed top-8 left-0 right-0 z-50 px-6",children:Pt.jsxs("div",{className:"glass-nav max-w-4xl mx-auto flex h-14 items-center justify-between rounded-full px-8 shadow-sm border border-neutral-100/50",children:[Pt.jsxs(F1,{to:"/",className:"flex items-center space-x-2 group",children:[Pt.jsx(kN,{className:"h-5 w-5 text-neutral-900 transition-transform group-hover:scale-110"}),Pt.jsxs("span",{className:"text-lg font-bold tracking-tight text-neutral-900",children:["Policy",Pt.jsx("span",{className:"font-medium opacity-40",children:"Pulse"})]})]}),Pt.jsxs("nav",{className:"flex items-center space-x-8 text-[12px] font-bold text-neutral-400 uppercase tracking-widest",children:[Pt.jsx(F1,{to:"/",className:"hover:text-neutral-900 transition-colors",children:"Scan"}),Pt.jsx("button",{className:"bg-neutral-900 text-white px-5 py-2 rounded-full text-[10px] font-bold hover:bg-neutral-800 transition-all shadow-lg shadow-neutral-900/10",children:"Get Pro"})]})]})}),hk=()=>Pt.jsx("footer",{className:"mt-auto py-16 px-6 border-t border-neutral-100",children:Pt.jsxs("div",{className:"max-w-4xl mx-auto flex flex-col md:flex-row justify-between items-center gap-10",children:[Pt.jsxs("div",{className:"text-center md:text-left",children:[Pt.jsx("p",{className:"text-sm font-bold text-neutral-900 uppercase tracking-widest",children:"PolicyPulse"}),Pt.jsxs("p",{className:"text-xs text-neutral-300 mt-2 font-medium",children:[" ",new Date().getFullYear()," Clarity Labs. Intelligence by Design."]})]}),Pt.jsxs("div",{className:"flex gap-10 text-[10px] font-black text-neutral-300 uppercase tracking-[0.2em]",children:[Pt.jsx("a",{href:"#",className:"hover:text-neutral-900 transition-colors",children:"Legal"}),Pt.jsx("a",{href:"#",className:"hover:text-neutral-900 transition-colors",children:"Privacy"}),Pt.jsx("a",{href:"#",className:"hover:text-neutral-900 transition-colors",children:"Contact"})]})]})}),FN=i=>Pt.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",...i,children:[Pt.jsx("path",{d:"M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.72"}),Pt.jsx("path",{d:"M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.72-1.72"})]}),fk=i=>Pt.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",...i,children:[Pt.jsx("path",{d:"M14.5 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7.5L14.5 2z"}),Pt.jsx("polyline",{points:"14 2 14 8 20 8"}),Pt.jsx("line",{x1:"16",y1:"13",x2:"8",y2:"13"}),Pt.jsx("line",{x1:"16",y1:"17",x2:"8",y2:"17"}),Pt.jsx("line",{x1:"10",y1:"9",x2:"8",y2:"9"})]}),dk=i=>Pt.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",...i,children:[Pt.jsx("path",{d:"M17 6.1H3"}),Pt.jsx("path",{d:"M21 12.1H3"}),Pt.jsx("path",{d:"M15.1 18.1H3"})]}),pk=i=>Pt.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",...i,children:[Pt.jsx("path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"}),Pt.jsx("polyline",{points:"17 8 12 3 7 8"}),Pt.jsx("line",{x1:"12",y1:"3",x2:"12",y2:"15"})]});var gk={};/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */let mk,vk;function yk(){return{geminiUrl:mk,vertexUrl:vk}}function xk(i,t,e,n){var r,s;if(!(i!=null&&i.baseUrl)){const a=yk();return t?(r=a.vertexUrl)!==null&&r!==void 0?r:e:(s=a.geminiUrl)!==null&&s!==void 0?s:n}return i.baseUrl}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class Fh{}function ce(i,t){const e=/\{([^}]+)\}/g;return i.replace(e,(n,r)=>{if(Object.prototype.hasOwnProperty.call(t,r)){const s=t[r];return s!=null?String(s):""}else throw new Error(`Key '${r}' not found in valueMap.`)})}function A(i,t,e){for(let s=0;s<t.length-1;s++){const a=t[s];if(a.endsWith("[]")){const u=a.slice(0,-2);if(!(u in i))if(Array.isArray(e))i[u]=Array.from({length:e.length},()=>({}));else throw new Error(`Value must be a list given an array path ${a}`);if(Array.isArray(i[u])){const c=i[u];if(Array.isArray(e))for(let h=0;h<c.length;h++){const f=c[h];A(f,t.slice(s+1),e[h])}else for(const h of c)A(h,t.slice(s+1),e)}return}else if(a.endsWith("[0]")){const u=a.slice(0,-3);u in i||(i[u]=[{}]);const c=i[u];A(c[0],t.slice(s+1),e);return}(!i[a]||typeof i[a]!="object")&&(i[a]={}),i=i[a]}const n=t[t.length-1],r=i[n];if(r!==void 0){if(!e||typeof e=="object"&&Object.keys(e).length===0||e===r)return;if(typeof r=="object"&&typeof e=="object"&&r!==null&&e!==null)Object.assign(r,e);else throw new Error(`Cannot set value for an existing key. Key: ${n}`)}else n==="_self"&&typeof e=="object"&&e!==null&&!Array.isArray(e)?Object.assign(i,e):i[n]=e}function x(i,t,e=void 0){try{if(t.length===1&&t[0]==="_self")return i;for(let n=0;n<t.length;n++){if(typeof i!="object"||i===null)return e;const r=t[n];if(r.endsWith("[]")){const s=r.slice(0,-2);if(s in i){const a=i[s];return Array.isArray(a)?a.map(u=>x(u,t.slice(n+1),e)):e}else return e}else i=i[r]}return i}catch(n){if(n instanceof TypeError)return e;throw n}}function bk(i,t){for(const[e,n]of Object.entries(t)){const r=e.split("."),s=n.split("."),a=new Set;let u=-1;for(let c=0;c<r.length;c++)if(r[c]==="*"){u=c;break}if(u!==-1&&s.length>u)for(let c=u;c<s.length;c++){const h=s[c];h!=="*"&&!h.endsWith("[]")&&!h.endsWith("[0]")&&a.add(h)}qw(i,r,s,0,a)}}function qw(i,t,e,n,r){if(n>=t.length||typeof i!="object"||i===null)return;const s=t[n];if(s.endsWith("[]")){const a=s.slice(0,-2),u=i;if(a in u&&Array.isArray(u[a]))for(const c of u[a])qw(c,t,e,n+1,r)}else if(s==="*"){if(typeof i=="object"&&i!==null&&!Array.isArray(i)){const a=i,u=Object.keys(a).filter(h=>!h.startsWith("_")&&!r.has(h)),c={};for(const h of u)c[h]=a[h];for(const[h,f]of Object.entries(c)){const g=[];for(const m of e.slice(n))m==="*"?g.push(h):g.push(m);A(a,g,f)}for(const h of u)delete a[h]}}else{const a=i;s in a&&qw(a[s],t,e,n+1,r)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function XE(i){if(typeof i!="string")throw new Error("fromImageBytes must be a string");return i}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function Ak(i){const t={},e=x(i,["operationName"]);e!=null&&A(t,["operationName"],e);const n=x(i,["resourceName"]);return n!=null&&A(t,["_url","resourceName"],n),t}function _k(i){const t={},e=x(i,["name"]);e!=null&&A(t,["name"],e);const n=x(i,["metadata"]);n!=null&&A(t,["metadata"],n);const r=x(i,["done"]);r!=null&&A(t,["done"],r);const s=x(i,["error"]);s!=null&&A(t,["error"],s);const a=x(i,["response","generateVideoResponse"]);return a!=null&&A(t,["response"],Sk(a)),t}function wk(i){const t={},e=x(i,["name"]);e!=null&&A(t,["name"],e);const n=x(i,["metadata"]);n!=null&&A(t,["metadata"],n);const r=x(i,["done"]);r!=null&&A(t,["done"],r);const s=x(i,["error"]);s!=null&&A(t,["error"],s);const a=x(i,["response"]);return a!=null&&A(t,["response"],Ek(a)),t}function Sk(i){const t={},e=x(i,["generatedSamples"]);if(e!=null){let s=e;Array.isArray(s)&&(s=s.map(a=>Ck(a))),A(t,["generatedVideos"],s)}const n=x(i,["raiMediaFilteredCount"]);n!=null&&A(t,["raiMediaFilteredCount"],n);const r=x(i,["raiMediaFilteredReasons"]);return r!=null&&A(t,["raiMediaFilteredReasons"],r),t}function Ek(i){const t={},e=x(i,["videos"]);if(e!=null){let s=e;Array.isArray(s)&&(s=s.map(a=>Tk(a))),A(t,["generatedVideos"],s)}const n=x(i,["raiMediaFilteredCount"]);n!=null&&A(t,["raiMediaFilteredCount"],n);const r=x(i,["raiMediaFilteredReasons"]);return r!=null&&A(t,["raiMediaFilteredReasons"],r),t}function Ck(i){const t={},e=x(i,["video"]);return e!=null&&A(t,["video"],Ik(e)),t}function Tk(i){const t={},e=x(i,["_self"]);return e!=null&&A(t,["video"],Pk(e)),t}function Nk(i){const t={},e=x(i,["operationName"]);return e!=null&&A(t,["_url","operationName"],e),t}function Rk(i){const t={},e=x(i,["operationName"]);return e!=null&&A(t,["_url","operationName"],e),t}function Dk(i){const t={},e=x(i,["name"]);e!=null&&A(t,["name"],e);const n=x(i,["metadata"]);n!=null&&A(t,["metadata"],n);const r=x(i,["done"]);r!=null&&A(t,["done"],r);const s=x(i,["error"]);s!=null&&A(t,["error"],s);const a=x(i,["response"]);return a!=null&&A(t,["response"],Lk(a)),t}function Lk(i){const t={},e=x(i,["sdkHttpResponse"]);e!=null&&A(t,["sdkHttpResponse"],e);const n=x(i,["parent"]);n!=null&&A(t,["parent"],n);const r=x(i,["documentName"]);return r!=null&&A(t,["documentName"],r),t}function BN(i){const t={},e=x(i,["name"]);e!=null&&A(t,["name"],e);const n=x(i,["metadata"]);n!=null&&A(t,["metadata"],n);const r=x(i,["done"]);r!=null&&A(t,["done"],r);const s=x(i,["error"]);s!=null&&A(t,["error"],s);const a=x(i,["response"]);return a!=null&&A(t,["response"],Mk(a)),t}function Mk(i){const t={},e=x(i,["sdkHttpResponse"]);e!=null&&A(t,["sdkHttpResponse"],e);const n=x(i,["parent"]);n!=null&&A(t,["parent"],n);const r=x(i,["documentName"]);return r!=null&&A(t,["documentName"],r),t}function Ik(i){const t={},e=x(i,["uri"]);e!=null&&A(t,["uri"],e);const n=x(i,["encodedVideo"]);n!=null&&A(t,["videoBytes"],XE(n));const r=x(i,["encoding"]);return r!=null&&A(t,["mimeType"],r),t}function Pk(i){const t={},e=x(i,["gcsUri"]);e!=null&&A(t,["uri"],e);const n=x(i,["bytesBase64Encoded"]);n!=null&&A(t,["videoBytes"],XE(n));const r=x(i,["mimeType"]);return r!=null&&A(t,["mimeType"],r),t}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */var nT;(function(i){i.OUTCOME_UNSPECIFIED="OUTCOME_UNSPECIFIED",i.OUTCOME_OK="OUTCOME_OK",i.OUTCOME_FAILED="OUTCOME_FAILED",i.OUTCOME_DEADLINE_EXCEEDED="OUTCOME_DEADLINE_EXCEEDED"})(nT||(nT={}));var iT;(function(i){i.LANGUAGE_UNSPECIFIED="LANGUAGE_UNSPECIFIED",i.PYTHON="PYTHON"})(iT||(iT={}));var rT;(function(i){i.SCHEDULING_UNSPECIFIED="SCHEDULING_UNSPECIFIED",i.SILENT="SILENT",i.WHEN_IDLE="WHEN_IDLE",i.INTERRUPT="INTERRUPT"})(rT||(rT={}));var Sd;(function(i){i.TYPE_UNSPECIFIED="TYPE_UNSPECIFIED",i.STRING="STRING",i.NUMBER="NUMBER",i.INTEGER="INTEGER",i.BOOLEAN="BOOLEAN",i.ARRAY="ARRAY",i.OBJECT="OBJECT",i.NULL="NULL"})(Sd||(Sd={}));var sT;(function(i){i.MODE_UNSPECIFIED="MODE_UNSPECIFIED",i.MODE_DYNAMIC="MODE_DYNAMIC"})(sT||(sT={}));var oT;(function(i){i.API_SPEC_UNSPECIFIED="API_SPEC_UNSPECIFIED",i.SIMPLE_SEARCH="SIMPLE_SEARCH",i.ELASTIC_SEARCH="ELASTIC_SEARCH"})(oT||(oT={}));var aT;(function(i){i.AUTH_TYPE_UNSPECIFIED="AUTH_TYPE_UNSPECIFIED",i.NO_AUTH="NO_AUTH",i.API_KEY_AUTH="API_KEY_AUTH",i.HTTP_BASIC_AUTH="HTTP_BASIC_AUTH",i.GOOGLE_SERVICE_ACCOUNT_AUTH="GOOGLE_SERVICE_ACCOUNT_AUTH",i.OAUTH="OAUTH",i.OIDC_AUTH="OIDC_AUTH"})(aT||(aT={}));var lT;(function(i){i.HTTP_IN_UNSPECIFIED="HTTP_IN_UNSPECIFIED",i.HTTP_IN_QUERY="HTTP_IN_QUERY",i.HTTP_IN_HEADER="HTTP_IN_HEADER",i.HTTP_IN_PATH="HTTP_IN_PATH",i.HTTP_IN_BODY="HTTP_IN_BODY",i.HTTP_IN_COOKIE="HTTP_IN_COOKIE"})(lT||(lT={}));var uT;(function(i){i.PHISH_BLOCK_THRESHOLD_UNSPECIFIED="PHISH_BLOCK_THRESHOLD_UNSPECIFIED",i.BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",i.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",i.BLOCK_HIGH_AND_ABOVE="BLOCK_HIGH_AND_ABOVE",i.BLOCK_HIGHER_AND_ABOVE="BLOCK_HIGHER_AND_ABOVE",i.BLOCK_VERY_HIGH_AND_ABOVE="BLOCK_VERY_HIGH_AND_ABOVE",i.BLOCK_ONLY_EXTREMELY_HIGH="BLOCK_ONLY_EXTREMELY_HIGH"})(uT||(uT={}));var cT;(function(i){i.THINKING_LEVEL_UNSPECIFIED="THINKING_LEVEL_UNSPECIFIED",i.LOW="LOW",i.MEDIUM="MEDIUM",i.HIGH="HIGH",i.MINIMAL="MINIMAL"})(cT||(cT={}));var hT;(function(i){i.HARM_CATEGORY_UNSPECIFIED="HARM_CATEGORY_UNSPECIFIED",i.HARM_CATEGORY_HARASSMENT="HARM_CATEGORY_HARASSMENT",i.HARM_CATEGORY_HATE_SPEECH="HARM_CATEGORY_HATE_SPEECH",i.HARM_CATEGORY_SEXUALLY_EXPLICIT="HARM_CATEGORY_SEXUALLY_EXPLICIT",i.HARM_CATEGORY_DANGEROUS_CONTENT="HARM_CATEGORY_DANGEROUS_CONTENT",i.HARM_CATEGORY_CIVIC_INTEGRITY="HARM_CATEGORY_CIVIC_INTEGRITY",i.HARM_CATEGORY_IMAGE_HATE="HARM_CATEGORY_IMAGE_HATE",i.HARM_CATEGORY_IMAGE_DANGEROUS_CONTENT="HARM_CATEGORY_IMAGE_DANGEROUS_CONTENT",i.HARM_CATEGORY_IMAGE_HARASSMENT="HARM_CATEGORY_IMAGE_HARASSMENT",i.HARM_CATEGORY_IMAGE_SEXUALLY_EXPLICIT="HARM_CATEGORY_IMAGE_SEXUALLY_EXPLICIT",i.HARM_CATEGORY_JAILBREAK="HARM_CATEGORY_JAILBREAK"})(hT||(hT={}));var fT;(function(i){i.HARM_BLOCK_METHOD_UNSPECIFIED="HARM_BLOCK_METHOD_UNSPECIFIED",i.SEVERITY="SEVERITY",i.PROBABILITY="PROBABILITY"})(fT||(fT={}));var dT;(function(i){i.HARM_BLOCK_THRESHOLD_UNSPECIFIED="HARM_BLOCK_THRESHOLD_UNSPECIFIED",i.BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",i.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",i.BLOCK_ONLY_HIGH="BLOCK_ONLY_HIGH",i.BLOCK_NONE="BLOCK_NONE",i.OFF="OFF"})(dT||(dT={}));var pT;(function(i){i.FINISH_REASON_UNSPECIFIED="FINISH_REASON_UNSPECIFIED",i.STOP="STOP",i.MAX_TOKENS="MAX_TOKENS",i.SAFETY="SAFETY",i.RECITATION="RECITATION",i.LANGUAGE="LANGUAGE",i.OTHER="OTHER",i.BLOCKLIST="BLOCKLIST",i.PROHIBITED_CONTENT="PROHIBITED_CONTENT",i.SPII="SPII",i.MALFORMED_FUNCTION_CALL="MALFORMED_FUNCTION_CALL",i.IMAGE_SAFETY="IMAGE_SAFETY",i.UNEXPECTED_TOOL_CALL="UNEXPECTED_TOOL_CALL",i.IMAGE_PROHIBITED_CONTENT="IMAGE_PROHIBITED_CONTENT",i.NO_IMAGE="NO_IMAGE",i.IMAGE_RECITATION="IMAGE_RECITATION",i.IMAGE_OTHER="IMAGE_OTHER"})(pT||(pT={}));var gT;(function(i){i.HARM_PROBABILITY_UNSPECIFIED="HARM_PROBABILITY_UNSPECIFIED",i.NEGLIGIBLE="NEGLIGIBLE",i.LOW="LOW",i.MEDIUM="MEDIUM",i.HIGH="HIGH"})(gT||(gT={}));var mT;(function(i){i.HARM_SEVERITY_UNSPECIFIED="HARM_SEVERITY_UNSPECIFIED",i.HARM_SEVERITY_NEGLIGIBLE="HARM_SEVERITY_NEGLIGIBLE",i.HARM_SEVERITY_LOW="HARM_SEVERITY_LOW",i.HARM_SEVERITY_MEDIUM="HARM_SEVERITY_MEDIUM",i.HARM_SEVERITY_HIGH="HARM_SEVERITY_HIGH"})(mT||(mT={}));var vT;(function(i){i.URL_RETRIEVAL_STATUS_UNSPECIFIED="URL_RETRIEVAL_STATUS_UNSPECIFIED",i.URL_RETRIEVAL_STATUS_SUCCESS="URL_RETRIEVAL_STATUS_SUCCESS",i.URL_RETRIEVAL_STATUS_ERROR="URL_RETRIEVAL_STATUS_ERROR",i.URL_RETRIEVAL_STATUS_PAYWALL="URL_RETRIEVAL_STATUS_PAYWALL",i.URL_RETRIEVAL_STATUS_UNSAFE="URL_RETRIEVAL_STATUS_UNSAFE"})(vT||(vT={}));var yT;(function(i){i.BLOCKED_REASON_UNSPECIFIED="BLOCKED_REASON_UNSPECIFIED",i.SAFETY="SAFETY",i.OTHER="OTHER",i.BLOCKLIST="BLOCKLIST",i.PROHIBITED_CONTENT="PROHIBITED_CONTENT",i.IMAGE_SAFETY="IMAGE_SAFETY",i.MODEL_ARMOR="MODEL_ARMOR",i.JAILBREAK="JAILBREAK"})(yT||(yT={}));var xT;(function(i){i.TRAFFIC_TYPE_UNSPECIFIED="TRAFFIC_TYPE_UNSPECIFIED",i.ON_DEMAND="ON_DEMAND",i.PROVISIONED_THROUGHPUT="PROVISIONED_THROUGHPUT"})(xT||(xT={}));var Vb;(function(i){i.MODALITY_UNSPECIFIED="MODALITY_UNSPECIFIED",i.TEXT="TEXT",i.IMAGE="IMAGE",i.AUDIO="AUDIO"})(Vb||(Vb={}));var bT;(function(i){i.MEDIA_RESOLUTION_UNSPECIFIED="MEDIA_RESOLUTION_UNSPECIFIED",i.MEDIA_RESOLUTION_LOW="MEDIA_RESOLUTION_LOW",i.MEDIA_RESOLUTION_MEDIUM="MEDIA_RESOLUTION_MEDIUM",i.MEDIA_RESOLUTION_HIGH="MEDIA_RESOLUTION_HIGH"})(bT||(bT={}));var AT;(function(i){i.TUNING_MODE_UNSPECIFIED="TUNING_MODE_UNSPECIFIED",i.TUNING_MODE_FULL="TUNING_MODE_FULL",i.TUNING_MODE_PEFT_ADAPTER="TUNING_MODE_PEFT_ADAPTER"})(AT||(AT={}));var _T;(function(i){i.ADAPTER_SIZE_UNSPECIFIED="ADAPTER_SIZE_UNSPECIFIED",i.ADAPTER_SIZE_ONE="ADAPTER_SIZE_ONE",i.ADAPTER_SIZE_TWO="ADAPTER_SIZE_TWO",i.ADAPTER_SIZE_FOUR="ADAPTER_SIZE_FOUR",i.ADAPTER_SIZE_EIGHT="ADAPTER_SIZE_EIGHT",i.ADAPTER_SIZE_SIXTEEN="ADAPTER_SIZE_SIXTEEN",i.ADAPTER_SIZE_THIRTY_TWO="ADAPTER_SIZE_THIRTY_TWO"})(_T||(_T={}));var zw;(function(i){i.JOB_STATE_UNSPECIFIED="JOB_STATE_UNSPECIFIED",i.JOB_STATE_QUEUED="JOB_STATE_QUEUED",i.JOB_STATE_PENDING="JOB_STATE_PENDING",i.JOB_STATE_RUNNING="JOB_STATE_RUNNING",i.JOB_STATE_SUCCEEDED="JOB_STATE_SUCCEEDED",i.JOB_STATE_FAILED="JOB_STATE_FAILED",i.JOB_STATE_CANCELLING="JOB_STATE_CANCELLING",i.JOB_STATE_CANCELLED="JOB_STATE_CANCELLED",i.JOB_STATE_PAUSED="JOB_STATE_PAUSED",i.JOB_STATE_EXPIRED="JOB_STATE_EXPIRED",i.JOB_STATE_UPDATING="JOB_STATE_UPDATING",i.JOB_STATE_PARTIALLY_SUCCEEDED="JOB_STATE_PARTIALLY_SUCCEEDED"})(zw||(zw={}));var wT;(function(i){i.TUNING_TASK_UNSPECIFIED="TUNING_TASK_UNSPECIFIED",i.TUNING_TASK_I2V="TUNING_TASK_I2V",i.TUNING_TASK_T2V="TUNING_TASK_T2V",i.TUNING_TASK_R2V="TUNING_TASK_R2V"})(wT||(wT={}));var ST;(function(i){i.MEDIA_RESOLUTION_UNSPECIFIED="MEDIA_RESOLUTION_UNSPECIFIED",i.MEDIA_RESOLUTION_LOW="MEDIA_RESOLUTION_LOW",i.MEDIA_RESOLUTION_MEDIUM="MEDIA_RESOLUTION_MEDIUM",i.MEDIA_RESOLUTION_HIGH="MEDIA_RESOLUTION_HIGH",i.MEDIA_RESOLUTION_ULTRA_HIGH="MEDIA_RESOLUTION_ULTRA_HIGH"})(ST||(ST={}));var ET;(function(i){i.FEATURE_SELECTION_PREFERENCE_UNSPECIFIED="FEATURE_SELECTION_PREFERENCE_UNSPECIFIED",i.PRIORITIZE_QUALITY="PRIORITIZE_QUALITY",i.BALANCED="BALANCED",i.PRIORITIZE_COST="PRIORITIZE_COST"})(ET||(ET={}));var CT;(function(i){i.UNSPECIFIED="UNSPECIFIED",i.BLOCKING="BLOCKING",i.NON_BLOCKING="NON_BLOCKING"})(CT||(CT={}));var TT;(function(i){i.MODE_UNSPECIFIED="MODE_UNSPECIFIED",i.MODE_DYNAMIC="MODE_DYNAMIC"})(TT||(TT={}));var NT;(function(i){i.ENVIRONMENT_UNSPECIFIED="ENVIRONMENT_UNSPECIFIED",i.ENVIRONMENT_BROWSER="ENVIRONMENT_BROWSER"})(NT||(NT={}));var RT;(function(i){i.MODE_UNSPECIFIED="MODE_UNSPECIFIED",i.AUTO="AUTO",i.ANY="ANY",i.NONE="NONE",i.VALIDATED="VALIDATED"})(RT||(RT={}));var DT;(function(i){i.BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",i.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",i.BLOCK_ONLY_HIGH="BLOCK_ONLY_HIGH",i.BLOCK_NONE="BLOCK_NONE"})(DT||(DT={}));var LT;(function(i){i.DONT_ALLOW="DONT_ALLOW",i.ALLOW_ADULT="ALLOW_ADULT",i.ALLOW_ALL="ALLOW_ALL"})(LT||(LT={}));var MT;(function(i){i.auto="auto",i.en="en",i.ja="ja",i.ko="ko",i.hi="hi",i.zh="zh",i.pt="pt",i.es="es"})(MT||(MT={}));var IT;(function(i){i.MASK_MODE_DEFAULT="MASK_MODE_DEFAULT",i.MASK_MODE_USER_PROVIDED="MASK_MODE_USER_PROVIDED",i.MASK_MODE_BACKGROUND="MASK_MODE_BACKGROUND",i.MASK_MODE_FOREGROUND="MASK_MODE_FOREGROUND",i.MASK_MODE_SEMANTIC="MASK_MODE_SEMANTIC"})(IT||(IT={}));var PT;(function(i){i.CONTROL_TYPE_DEFAULT="CONTROL_TYPE_DEFAULT",i.CONTROL_TYPE_CANNY="CONTROL_TYPE_CANNY",i.CONTROL_TYPE_SCRIBBLE="CONTROL_TYPE_SCRIBBLE",i.CONTROL_TYPE_FACE_MESH="CONTROL_TYPE_FACE_MESH"})(PT||(PT={}));var kT;(function(i){i.SUBJECT_TYPE_DEFAULT="SUBJECT_TYPE_DEFAULT",i.SUBJECT_TYPE_PERSON="SUBJECT_TYPE_PERSON",i.SUBJECT_TYPE_ANIMAL="SUBJECT_TYPE_ANIMAL",i.SUBJECT_TYPE_PRODUCT="SUBJECT_TYPE_PRODUCT"})(kT||(kT={}));var FT;(function(i){i.EDIT_MODE_DEFAULT="EDIT_MODE_DEFAULT",i.EDIT_MODE_INPAINT_REMOVAL="EDIT_MODE_INPAINT_REMOVAL",i.EDIT_MODE_INPAINT_INSERTION="EDIT_MODE_INPAINT_INSERTION",i.EDIT_MODE_OUTPAINT="EDIT_MODE_OUTPAINT",i.EDIT_MODE_CONTROLLED_EDITING="EDIT_MODE_CONTROLLED_EDITING",i.EDIT_MODE_STYLE="EDIT_MODE_STYLE",i.EDIT_MODE_BGSWAP="EDIT_MODE_BGSWAP",i.EDIT_MODE_PRODUCT_IMAGE="EDIT_MODE_PRODUCT_IMAGE"})(FT||(FT={}));var BT;(function(i){i.FOREGROUND="FOREGROUND",i.BACKGROUND="BACKGROUND",i.PROMPT="PROMPT",i.SEMANTIC="SEMANTIC",i.INTERACTIVE="INTERACTIVE"})(BT||(BT={}));var OT;(function(i){i.ASSET="ASSET",i.STYLE="STYLE"})(OT||(OT={}));var UT;(function(i){i.INSERT="INSERT",i.REMOVE="REMOVE",i.REMOVE_STATIC="REMOVE_STATIC",i.OUTPAINT="OUTPAINT"})(UT||(UT={}));var HT;(function(i){i.OPTIMIZED="OPTIMIZED",i.LOSSLESS="LOSSLESS"})(HT||(HT={}));var qT;(function(i){i.SUPERVISED_FINE_TUNING="SUPERVISED_FINE_TUNING",i.PREFERENCE_TUNING="PREFERENCE_TUNING"})(qT||(qT={}));var zT;(function(i){i.STATE_UNSPECIFIED="STATE_UNSPECIFIED",i.STATE_PENDING="STATE_PENDING",i.STATE_ACTIVE="STATE_ACTIVE",i.STATE_FAILED="STATE_FAILED"})(zT||(zT={}));var GT;(function(i){i.STATE_UNSPECIFIED="STATE_UNSPECIFIED",i.PROCESSING="PROCESSING",i.ACTIVE="ACTIVE",i.FAILED="FAILED"})(GT||(GT={}));var VT;(function(i){i.SOURCE_UNSPECIFIED="SOURCE_UNSPECIFIED",i.UPLOADED="UPLOADED",i.GENERATED="GENERATED"})(VT||(VT={}));var YT;(function(i){i.TURN_COMPLETE_REASON_UNSPECIFIED="TURN_COMPLETE_REASON_UNSPECIFIED",i.MALFORMED_FUNCTION_CALL="MALFORMED_FUNCTION_CALL",i.RESPONSE_REJECTED="RESPONSE_REJECTED",i.NEED_MORE_INPUT="NEED_MORE_INPUT"})(YT||(YT={}));var $T;(function(i){i.MODALITY_UNSPECIFIED="MODALITY_UNSPECIFIED",i.TEXT="TEXT",i.IMAGE="IMAGE",i.VIDEO="VIDEO",i.AUDIO="AUDIO",i.DOCUMENT="DOCUMENT"})($T||($T={}));var WT;(function(i){i.VAD_SIGNAL_TYPE_UNSPECIFIED="VAD_SIGNAL_TYPE_UNSPECIFIED",i.VAD_SIGNAL_TYPE_SOS="VAD_SIGNAL_TYPE_SOS",i.VAD_SIGNAL_TYPE_EOS="VAD_SIGNAL_TYPE_EOS"})(WT||(WT={}));var XT;(function(i){i.START_SENSITIVITY_UNSPECIFIED="START_SENSITIVITY_UNSPECIFIED",i.START_SENSITIVITY_HIGH="START_SENSITIVITY_HIGH",i.START_SENSITIVITY_LOW="START_SENSITIVITY_LOW"})(XT||(XT={}));var jT;(function(i){i.END_SENSITIVITY_UNSPECIFIED="END_SENSITIVITY_UNSPECIFIED",i.END_SENSITIVITY_HIGH="END_SENSITIVITY_HIGH",i.END_SENSITIVITY_LOW="END_SENSITIVITY_LOW"})(jT||(jT={}));var JT;(function(i){i.ACTIVITY_HANDLING_UNSPECIFIED="ACTIVITY_HANDLING_UNSPECIFIED",i.START_OF_ACTIVITY_INTERRUPTS="START_OF_ACTIVITY_INTERRUPTS",i.NO_INTERRUPTION="NO_INTERRUPTION"})(JT||(JT={}));var KT;(function(i){i.TURN_COVERAGE_UNSPECIFIED="TURN_COVERAGE_UNSPECIFIED",i.TURN_INCLUDES_ONLY_ACTIVITY="TURN_INCLUDES_ONLY_ACTIVITY",i.TURN_INCLUDES_ALL_INPUT="TURN_INCLUDES_ALL_INPUT"})(KT||(KT={}));var QT;(function(i){i.SCALE_UNSPECIFIED="SCALE_UNSPECIFIED",i.C_MAJOR_A_MINOR="C_MAJOR_A_MINOR",i.D_FLAT_MAJOR_B_FLAT_MINOR="D_FLAT_MAJOR_B_FLAT_MINOR",i.D_MAJOR_B_MINOR="D_MAJOR_B_MINOR",i.E_FLAT_MAJOR_C_MINOR="E_FLAT_MAJOR_C_MINOR",i.E_MAJOR_D_FLAT_MINOR="E_MAJOR_D_FLAT_MINOR",i.F_MAJOR_D_MINOR="F_MAJOR_D_MINOR",i.G_FLAT_MAJOR_E_FLAT_MINOR="G_FLAT_MAJOR_E_FLAT_MINOR",i.G_MAJOR_E_MINOR="G_MAJOR_E_MINOR",i.A_FLAT_MAJOR_F_MINOR="A_FLAT_MAJOR_F_MINOR",i.A_MAJOR_G_FLAT_MINOR="A_MAJOR_G_FLAT_MINOR",i.B_FLAT_MAJOR_G_MINOR="B_FLAT_MAJOR_G_MINOR",i.B_MAJOR_A_FLAT_MINOR="B_MAJOR_A_FLAT_MINOR"})(QT||(QT={}));var ZT;(function(i){i.MUSIC_GENERATION_MODE_UNSPECIFIED="MUSIC_GENERATION_MODE_UNSPECIFIED",i.QUALITY="QUALITY",i.DIVERSITY="DIVERSITY",i.VOCALIZATION="VOCALIZATION"})(ZT||(ZT={}));var jg;(function(i){i.PLAYBACK_CONTROL_UNSPECIFIED="PLAYBACK_CONTROL_UNSPECIFIED",i.PLAY="PLAY",i.PAUSE="PAUSE",i.STOP="STOP",i.RESET_CONTEXT="RESET_CONTEXT"})(jg||(jg={}));class Gw{constructor(t){const e={};for(const n of t.headers.entries())e[n[0]]=n[1];this.headers=e,this.responseInternal=t}json(){return this.responseInternal.json()}}class Cv{get text(){var t,e,n,r,s,a,u,c;if(((r=(n=(e=(t=this.candidates)===null||t===void 0?void 0:t[0])===null||e===void 0?void 0:e.content)===null||n===void 0?void 0:n.parts)===null||r===void 0?void 0:r.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning text from the first one.");let h="",f=!1;const g=[];for(const m of(c=(u=(a=(s=this.candidates)===null||s===void 0?void 0:s[0])===null||a===void 0?void 0:a.content)===null||u===void 0?void 0:u.parts)!==null&&c!==void 0?c:[]){for(const[y,w]of Object.entries(m))y!=="text"&&y!=="thought"&&y!=="thoughtSignature"&&(w!==null||w!==void 0)&&g.push(y);if(typeof m.text=="string"){if(typeof m.thought=="boolean"&&m.thought)continue;f=!0,h+=m.text}}return g.length>0&&console.warn(`there are non-text parts ${g} in the response, returning concatenation of all text parts. Please refer to the non text parts for a full response from model.`),f?h:void 0}get data(){var t,e,n,r,s,a,u,c;if(((r=(n=(e=(t=this.candidates)===null||t===void 0?void 0:t[0])===null||e===void 0?void 0:e.content)===null||n===void 0?void 0:n.parts)===null||r===void 0?void 0:r.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning data from the first one.");let h="";const f=[];for(const g of(c=(u=(a=(s=this.candidates)===null||s===void 0?void 0:s[0])===null||a===void 0?void 0:a.content)===null||u===void 0?void 0:u.parts)!==null&&c!==void 0?c:[]){for(const[m,y]of Object.entries(g))m!=="inlineData"&&(y!==null||y!==void 0)&&f.push(m);g.inlineData&&typeof g.inlineData.data=="string"&&(h+=atob(g.inlineData.data))}return f.length>0&&console.warn(`there are non-data parts ${f} in the response, returning concatenation of all data parts. Please refer to the non data parts for a full response from model.`),h.length>0?btoa(h):void 0}get functionCalls(){var t,e,n,r,s,a,u,c;if(((r=(n=(e=(t=this.candidates)===null||t===void 0?void 0:t[0])===null||e===void 0?void 0:e.content)===null||n===void 0?void 0:n.parts)===null||r===void 0?void 0:r.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning function calls from the first one.");const h=(c=(u=(a=(s=this.candidates)===null||s===void 0?void 0:s[0])===null||a===void 0?void 0:a.content)===null||u===void 0?void 0:u.parts)===null||c===void 0?void 0:c.filter(f=>f.functionCall).map(f=>f.functionCall).filter(f=>f!==void 0);if((h==null?void 0:h.length)!==0)return h}get executableCode(){var t,e,n,r,s,a,u,c,h;if(((r=(n=(e=(t=this.candidates)===null||t===void 0?void 0:t[0])===null||e===void 0?void 0:e.content)===null||n===void 0?void 0:n.parts)===null||r===void 0?void 0:r.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning executable code from the first one.");const f=(c=(u=(a=(s=this.candidates)===null||s===void 0?void 0:s[0])===null||a===void 0?void 0:a.content)===null||u===void 0?void 0:u.parts)===null||c===void 0?void 0:c.filter(g=>g.executableCode).map(g=>g.executableCode).filter(g=>g!==void 0);if((f==null?void 0:f.length)!==0)return(h=f==null?void 0:f[0])===null||h===void 0?void 0:h.code}get codeExecutionResult(){var t,e,n,r,s,a,u,c,h;if(((r=(n=(e=(t=this.candidates)===null||t===void 0?void 0:t[0])===null||e===void 0?void 0:e.content)===null||n===void 0?void 0:n.parts)===null||r===void 0?void 0:r.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning code execution result from the first one.");const f=(c=(u=(a=(s=this.candidates)===null||s===void 0?void 0:s[0])===null||a===void 0?void 0:a.content)===null||u===void 0?void 0:u.parts)===null||c===void 0?void 0:c.filter(g=>g.codeExecutionResult).map(g=>g.codeExecutionResult).filter(g=>g!==void 0);if((f==null?void 0:f.length)!==0)return(h=f==null?void 0:f[0])===null||h===void 0?void 0:h.output}}class t6{}class e6{}class kk{}class Fk{}class Bk{}class Ok{}class n6{}class i6{}class r6{}class Uk{}class Yb{_fromAPIResponse({apiResponse:t,_isVertexAI:e}){const n=new Yb;let r;const s=t;return e?r=wk(s):r=_k(s),Object.assign(n,r),n}}class s6{}class o6{}class a6{}class l6{}class Hk{}class qk{}class zk{}class jE{_fromAPIResponse({apiResponse:t,_isVertexAI:e}){const n=new jE,s=Dk(t);return Object.assign(n,s),n}}class Gk{}class Vk{}class Yk{}class u6{}class $k{get text(){var t,e,n;let r="",s=!1;const a=[];for(const u of(n=(e=(t=this.serverContent)===null||t===void 0?void 0:t.modelTurn)===null||e===void 0?void 0:e.parts)!==null&&n!==void 0?n:[]){for(const[c,h]of Object.entries(u))c!=="text"&&c!=="thought"&&h!==null&&a.push(c);if(typeof u.text=="string"){if(typeof u.thought=="boolean"&&u.thought)continue;s=!0,r+=u.text}}return a.length>0&&console.warn(`there are non-text parts ${a} in the response, returning concatenation of all text parts. Please refer to the non text parts for a full response from model.`),s?r:void 0}get data(){var t,e,n;let r="";const s=[];for(const a of(n=(e=(t=this.serverContent)===null||t===void 0?void 0:t.modelTurn)===null||e===void 0?void 0:e.parts)!==null&&n!==void 0?n:[]){for(const[u,c]of Object.entries(a))u!=="inlineData"&&c!==null&&s.push(u);a.inlineData&&typeof a.inlineData.data=="string"&&(r+=atob(a.inlineData.data))}return s.length>0&&console.warn(`there are non-data parts ${s} in the response, returning concatenation of all data parts. Please refer to the non data parts for a full response from model.`),r.length>0?btoa(r):void 0}}class Wk{get audioChunk(){if(this.serverContent&&this.serverContent.audioChunks&&this.serverContent.audioChunks.length>0)return this.serverContent.audioChunks[0]}}class JE{_fromAPIResponse({apiResponse:t,_isVertexAI:e}){const n=new JE,s=BN(t);return Object.assign(n,s),n}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function Dn(i,t){if(!t||typeof t!="string")throw new Error("model is required and must be a string");if(t.includes("..")||t.includes("?")||t.includes("&"))throw new Error("invalid model parameter");if(i.isVertexAI()){if(t.startsWith("publishers/")||t.startsWith("projects/")||t.startsWith("models/"))return t;if(t.indexOf("/")>=0){const e=t.split("/",2);return`publishers/${e[0]}/models/${e[1]}`}else return`publishers/google/models/${t}`}else return t.startsWith("models/")||t.startsWith("tunedModels/")?t:`models/${t}`}function ON(i,t){const e=Dn(i,t);return e?e.startsWith("publishers/")&&i.isVertexAI()?`projects/${i.getProject()}/locations/${i.getLocation()}/${e}`:e.startsWith("models/")&&i.isVertexAI()?`projects/${i.getProject()}/locations/${i.getLocation()}/publishers/google/${e}`:e:""}function UN(i){return Array.isArray(i)?i.map(t=>$b(t)):[$b(i)]}function $b(i){if(typeof i=="object"&&i!==null)return i;throw new Error(`Could not parse input as Blob. Unsupported blob type: ${typeof i}`)}function HN(i){const t=$b(i);if(t.mimeType&&t.mimeType.startsWith("image/"))return t;throw new Error(`Unsupported mime type: ${t.mimeType}`)}function qN(i){const t=$b(i);if(t.mimeType&&t.mimeType.startsWith("audio/"))return t;throw new Error(`Unsupported mime type: ${t.mimeType}`)}function c6(i){if(i==null)throw new Error("PartUnion is required");if(typeof i=="object")return i;if(typeof i=="string")return{text:i};throw new Error(`Unsupported part type: ${typeof i}`)}function zN(i){if(i==null||Array.isArray(i)&&i.length===0)throw new Error("PartListUnion is required");return Array.isArray(i)?i.map(t=>c6(t)):[c6(i)]}function Vw(i){return i!=null&&typeof i=="object"&&"parts"in i&&Array.isArray(i.parts)}function h6(i){return i!=null&&typeof i=="object"&&"functionCall"in i}function f6(i){return i!=null&&typeof i=="object"&&"functionResponse"in i}function zs(i){if(i==null)throw new Error("ContentUnion is required");return Vw(i)?i:{role:"user",parts:zN(i)}}function KE(i,t){if(!t)return[];if(i.isVertexAI()&&Array.isArray(t))return t.flatMap(e=>{const n=zs(e);return n.parts&&n.parts.length>0&&n.parts[0].text!==void 0?[n.parts[0].text]:[]});if(i.isVertexAI()){const e=zs(t);return e.parts&&e.parts.length>0&&e.parts[0].text!==void 0?[e.parts[0].text]:[]}return Array.isArray(t)?t.map(e=>zs(e)):[zs(t)]}function rl(i){if(i==null||Array.isArray(i)&&i.length===0)throw new Error("contents are required");if(!Array.isArray(i)){if(h6(i)||f6(i))throw new Error("To specify functionCall or functionResponse parts, please wrap them in a Content object, specifying the role for them");return[zs(i)]}const t=[],e=[],n=Vw(i[0]);for(const r of i){const s=Vw(r);if(s!=n)throw new Error("Mixing Content and Parts is not supported, please group the parts into a the appropriate Content objects and specify the roles for them");if(s)t.push(r);else{if(h6(r)||f6(r))throw new Error("To specify functionCall or functionResponse parts, please wrap them, and any other parts, in Content objects as appropriate, specifying the role for them");e.push(r)}}return n||t.push({role:"user",parts:zN(e)}),t}function Xk(i,t){i.includes("null")&&(t.nullable=!0);const e=i.filter(n=>n!=="null");if(e.length===1)t.type=Object.values(Sd).includes(e[0].toUpperCase())?e[0].toUpperCase():Sd.TYPE_UNSPECIFIED;else{t.anyOf=[];for(const n of e)t.anyOf.push({type:Object.values(Sd).includes(n.toUpperCase())?n.toUpperCase():Sd.TYPE_UNSPECIFIED})}}function rm(i){const t={},e=["items"],n=["anyOf"],r=["properties"];if(i.type&&i.anyOf)throw new Error("type and anyOf cannot be both populated.");const s=i.anyOf;s!=null&&s.length==2&&(s[0].type==="null"?(t.nullable=!0,i=s[1]):s[1].type==="null"&&(t.nullable=!0,i=s[0])),i.type instanceof Array&&Xk(i.type,t);for(const[a,u]of Object.entries(i))if(u!=null)if(a=="type"){if(u==="null")throw new Error("type: null can not be the only possible type for the field.");if(u instanceof Array)continue;t.type=Object.values(Sd).includes(u.toUpperCase())?u.toUpperCase():Sd.TYPE_UNSPECIFIED}else if(e.includes(a))t[a]=rm(u);else if(n.includes(a)){const c=[];for(const h of u){if(h.type=="null"){t.nullable=!0;continue}c.push(rm(h))}t[a]=c}else if(r.includes(a)){const c={};for(const[h,f]of Object.entries(u))c[h]=rm(f);t[a]=c}else{if(a==="additionalProperties")continue;t[a]=u}return t}function QE(i){return rm(i)}function ZE(i){if(typeof i=="object")return i;if(typeof i=="string")return{voiceConfig:{prebuiltVoiceConfig:{voiceName:i}}};throw new Error(`Unsupported speechConfig type: ${typeof i}`)}function tC(i){if("multiSpeakerVoiceConfig"in i)throw new Error("multiSpeakerVoiceConfig is not supported in the live API.");return i}function O1(i){if(i.functionDeclarations)for(const t of i.functionDeclarations)t.parameters&&(Object.keys(t.parameters).includes("$schema")?t.parametersJsonSchema||(t.parametersJsonSchema=t.parameters,delete t.parameters):t.parameters=rm(t.parameters)),t.response&&(Object.keys(t.response).includes("$schema")?t.responseJsonSchema||(t.responseJsonSchema=t.response,delete t.response):t.response=rm(t.response));return i}function U1(i){if(i==null)throw new Error("tools is required");if(!Array.isArray(i))throw new Error("tools is required and must be an array of Tools");const t=[];for(const e of i)t.push(e);return t}function jk(i,t,e,n=1){const r=!t.startsWith(`${e}/`)&&t.split("/").length===n;return i.isVertexAI()?t.startsWith("projects/")?t:t.startsWith("locations/")?`projects/${i.getProject()}/${t}`:t.startsWith(`${e}/`)?`projects/${i.getProject()}/locations/${i.getLocation()}/${t}`:r?`projects/${i.getProject()}/locations/${i.getLocation()}/${e}/${t}`:t:r?`${e}/${t}`:t}function Bh(i,t){if(typeof t!="string")throw new Error("name must be a string");return jk(i,t,"cachedContents")}function GN(i){switch(i){case"STATE_UNSPECIFIED":return"JOB_STATE_UNSPECIFIED";case"CREATING":return"JOB_STATE_RUNNING";case"ACTIVE":return"JOB_STATE_SUCCEEDED";case"FAILED":return"JOB_STATE_FAILED";default:return i}}function Ld(i){return XE(i)}function Jk(i){return i!=null&&typeof i=="object"&&"name"in i}function Kk(i){return i!=null&&typeof i=="object"&&"video"in i}function Qk(i){return i!=null&&typeof i=="object"&&"uri"in i}function VN(i){var t;let e;if(Jk(i)&&(e=i.name),!(Qk(i)&&(e=i.uri,e===void 0))&&!(Kk(i)&&(e=(t=i.video)===null||t===void 0?void 0:t.uri,e===void 0))){if(typeof i=="string"&&(e=i),e===void 0)throw new Error("Could not extract file name from the provided input.");if(e.startsWith("https://")){const r=e.split("files/")[1].match(/[a-z0-9]+/);if(r===null)throw new Error(`Could not extract file name from URI ${e}`);e=r[0]}else e.startsWith("files/")&&(e=e.split("files/")[1]);return e}}function YN(i,t){let e;return i.isVertexAI()?e=t?"publishers/google/models":"models":e=t?"models":"tunedModels",e}function $N(i){for(const t of["models","tunedModels","publisherModels"])if(Zk(i,t))return i[t];return[]}function Zk(i,t){return i!==null&&typeof i=="object"&&t in i}function t7(i,t={}){const e=i,n={name:e.name,description:e.description,parametersJsonSchema:e.inputSchema};return e.outputSchema&&(n.responseJsonSchema=e.outputSchema),t.behavior&&(n.behavior=t.behavior),{functionDeclarations:[n]}}function e7(i,t={}){const e=[],n=new Set;for(const r of i){const s=r.name;if(n.has(s))throw new Error(`Duplicate function name ${s} found in MCP tools. Please ensure function names are unique.`);n.add(s);const a=t7(r,t);a.functionDeclarations&&e.push(...a.functionDeclarations)}return{functionDeclarations:e}}function WN(i,t){let e;if(typeof t=="string")if(i.isVertexAI())if(t.startsWith("gs://"))e={format:"jsonl",gcsUri:[t]};else if(t.startsWith("bq://"))e={format:"bigquery",bigqueryUri:t};else throw new Error(`Unsupported string source for Vertex AI: ${t}`);else if(t.startsWith("files/"))e={fileName:t};else throw new Error(`Unsupported string source for Gemini API: ${t}`);else if(Array.isArray(t)){if(i.isVertexAI())throw new Error("InlinedRequest[] is not supported in Vertex AI.");e={inlinedRequests:t}}else e=t;const n=[e.gcsUri,e.bigqueryUri].filter(Boolean).length,r=[e.inlinedRequests,e.fileName].filter(Boolean).length;if(i.isVertexAI()){if(r>0||n!==1)throw new Error("Exactly one of `gcsUri` or `bigqueryUri` must be set for Vertex AI.")}else if(n>0||r!==1)throw new Error("Exactly one of `inlinedRequests`, `fileName`, must be set for Gemini API.");return e}function n7(i){if(typeof i!="string")return i;const t=i;if(t.startsWith("gs://"))return{format:"jsonl",gcsUri:t};if(t.startsWith("bq://"))return{format:"bigquery",bigqueryUri:t};throw new Error(`Unsupported destination: ${t}`)}function XN(i){if(typeof i!="object"||i===null)return{};const t=i,e=t.inlinedResponses;if(typeof e!="object"||e===null)return i;const r=e.inlinedResponses;if(!Array.isArray(r)||r.length===0)return i;let s=!1;for(const a of r){if(typeof a!="object"||a===null)continue;const c=a.response;if(typeof c!="object"||c===null)continue;if(c.embedding!==void 0){s=!0;break}}return s&&(t.inlinedEmbedContentResponses=t.inlinedResponses,delete t.inlinedResponses),i}function H1(i,t){const e=t;if(!i.isVertexAI()){if(/batches\/[^/]+$/.test(e))return e.split("/").pop();throw new Error(`Invalid batch job name: ${e}.`)}if(/^projects\/[^/]+\/locations\/[^/]+\/batchPredictionJobs\/[^/]+$/.test(e))return e.split("/").pop();if(/^\d+$/.test(e))return e;throw new Error(`Invalid batch job name: ${e}.`)}function jN(i){const t=i;return t==="BATCH_STATE_UNSPECIFIED"?"JOB_STATE_UNSPECIFIED":t==="BATCH_STATE_PENDING"?"JOB_STATE_PENDING":t==="BATCH_STATE_RUNNING"?"JOB_STATE_RUNNING":t==="BATCH_STATE_SUCCEEDED"?"JOB_STATE_SUCCEEDED":t==="BATCH_STATE_FAILED"?"JOB_STATE_FAILED":t==="BATCH_STATE_CANCELLED"?"JOB_STATE_CANCELLED":t==="BATCH_STATE_EXPIRED"?"JOB_STATE_EXPIRED":t}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function i7(i){const t={},e=x(i,["responsesFile"]);e!=null&&A(t,["fileName"],e);const n=x(i,["inlinedResponses","inlinedResponses"]);if(n!=null){let s=n;Array.isArray(s)&&(s=s.map(a=>B7(a))),A(t,["inlinedResponses"],s)}const r=x(i,["inlinedEmbedContentResponses","inlinedResponses"]);if(r!=null){let s=r;Array.isArray(s)&&(s=s.map(a=>a)),A(t,["inlinedEmbedContentResponses"],s)}return t}function r7(i){const t={},e=x(i,["predictionsFormat"]);e!=null&&A(t,["format"],e);const n=x(i,["gcsDestination","outputUriPrefix"]);n!=null&&A(t,["gcsUri"],n);const r=x(i,["bigqueryDestination","outputUri"]);return r!=null&&A(t,["bigqueryUri"],r),t}function s7(i){const t={},e=x(i,["format"]);e!=null&&A(t,["predictionsFormat"],e);const n=x(i,["gcsUri"]);n!=null&&A(t,["gcsDestination","outputUriPrefix"],n);const r=x(i,["bigqueryUri"]);if(r!=null&&A(t,["bigqueryDestination","outputUri"],r),x(i,["fileName"])!==void 0)throw new Error("fileName parameter is not supported in Vertex AI.");if(x(i,["inlinedResponses"])!==void 0)throw new Error("inlinedResponses parameter is not supported in Vertex AI.");if(x(i,["inlinedEmbedContentResponses"])!==void 0)throw new Error("inlinedEmbedContentResponses parameter is not supported in Vertex AI.");return t}function A5(i){const t={},e=x(i,["name"]);e!=null&&A(t,["name"],e);const n=x(i,["metadata","displayName"]);n!=null&&A(t,["displayName"],n);const r=x(i,["metadata","state"]);r!=null&&A(t,["state"],jN(r));const s=x(i,["metadata","createTime"]);s!=null&&A(t,["createTime"],s);const a=x(i,["metadata","endTime"]);a!=null&&A(t,["endTime"],a);const u=x(i,["metadata","updateTime"]);u!=null&&A(t,["updateTime"],u);const c=x(i,["metadata","model"]);c!=null&&A(t,["model"],c);const h=x(i,["metadata","output"]);return h!=null&&A(t,["dest"],i7(XN(h))),t}function Yw(i){const t={},e=x(i,["name"]);e!=null&&A(t,["name"],e);const n=x(i,["displayName"]);n!=null&&A(t,["displayName"],n);const r=x(i,["state"]);r!=null&&A(t,["state"],jN(r));const s=x(i,["error"]);s!=null&&A(t,["error"],s);const a=x(i,["createTime"]);a!=null&&A(t,["createTime"],a);const u=x(i,["startTime"]);u!=null&&A(t,["startTime"],u);const c=x(i,["endTime"]);c!=null&&A(t,["endTime"],c);const h=x(i,["updateTime"]);h!=null&&A(t,["updateTime"],h);const f=x(i,["model"]);f!=null&&A(t,["model"],f);const g=x(i,["inputConfig"]);g!=null&&A(t,["src"],o7(g));const m=x(i,["outputConfig"]);m!=null&&A(t,["dest"],r7(XN(m)));const y=x(i,["completionStats"]);return y!=null&&A(t,["completionStats"],y),t}function o7(i){const t={},e=x(i,["instancesFormat"]);e!=null&&A(t,["format"],e);const n=x(i,["gcsSource","uris"]);n!=null&&A(t,["gcsUri"],n);const r=x(i,["bigquerySource","inputUri"]);return r!=null&&A(t,["bigqueryUri"],r),t}function a7(i,t){const e={};if(x(t,["format"])!==void 0)throw new Error("format parameter is not supported in Gemini API.");if(x(t,["gcsUri"])!==void 0)throw new Error("gcsUri parameter is not supported in Gemini API.");if(x(t,["bigqueryUri"])!==void 0)throw new Error("bigqueryUri parameter is not supported in Gemini API.");const n=x(t,["fileName"]);n!=null&&A(e,["fileName"],n);const r=x(t,["inlinedRequests"]);if(r!=null){let s=r;Array.isArray(s)&&(s=s.map(a=>F7(i,a))),A(e,["requests","requests"],s)}return e}function l7(i){const t={},e=x(i,["format"]);e!=null&&A(t,["instancesFormat"],e);const n=x(i,["gcsUri"]);n!=null&&A(t,["gcsSource","uris"],n);const r=x(i,["bigqueryUri"]);if(r!=null&&A(t,["bigquerySource","inputUri"],r),x(i,["fileName"])!==void 0)throw new Error("fileName parameter is not supported in Vertex AI.");if(x(i,["inlinedRequests"])!==void 0)throw new Error("inlinedRequests parameter is not supported in Vertex AI.");return t}function u7(i){const t={},e=x(i,["data"]);if(e!=null&&A(t,["data"],e),x(i,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const n=x(i,["mimeType"]);return n!=null&&A(t,["mimeType"],n),t}function c7(i,t){const e={},n=x(t,["name"]);return n!=null&&A(e,["_url","name"],H1(i,n)),e}function h7(i,t){const e={},n=x(t,["name"]);return n!=null&&A(e,["_url","name"],H1(i,n)),e}function f7(i){const t={},e=x(i,["content"]);e!=null&&A(t,["content"],e);const n=x(i,["citationMetadata"]);n!=null&&A(t,["citationMetadata"],d7(n));const r=x(i,["tokenCount"]);r!=null&&A(t,["tokenCount"],r);const s=x(i,["finishReason"]);s!=null&&A(t,["finishReason"],s);const a=x(i,["avgLogprobs"]);a!=null&&A(t,["avgLogprobs"],a);const u=x(i,["groundingMetadata"]);u!=null&&A(t,["groundingMetadata"],u);const c=x(i,["index"]);c!=null&&A(t,["index"],c);const h=x(i,["logprobsResult"]);h!=null&&A(t,["logprobsResult"],h);const f=x(i,["safetyRatings"]);if(f!=null){let m=f;Array.isArray(m)&&(m=m.map(y=>y)),A(t,["safetyRatings"],m)}const g=x(i,["urlContextMetadata"]);return g!=null&&A(t,["urlContextMetadata"],g),t}function d7(i){const t={},e=x(i,["citationSources"]);if(e!=null){let n=e;Array.isArray(n)&&(n=n.map(r=>r)),A(t,["citations"],n)}return t}function JN(i){const t={},e=x(i,["parts"]);if(e!=null){let r=e;Array.isArray(r)&&(r=r.map(s=>V7(s))),A(t,["parts"],r)}const n=x(i,["role"]);return n!=null&&A(t,["role"],n),t}function p7(i,t){const e={},n=x(i,["displayName"]);if(t!==void 0&&n!=null&&A(t,["batch","displayName"],n),x(i,["dest"])!==void 0)throw new Error("dest parameter is not supported in Gemini API.");return e}function g7(i,t){const e={},n=x(i,["displayName"]);t!==void 0&&n!=null&&A(t,["displayName"],n);const r=x(i,["dest"]);return t!==void 0&&r!=null&&A(t,["outputConfig"],s7(n7(r))),e}function d6(i,t){const e={},n=x(t,["model"]);n!=null&&A(e,["_url","model"],Dn(i,n));const r=x(t,["src"]);r!=null&&A(e,["batch","inputConfig"],a7(i,WN(i,r)));const s=x(t,["config"]);return s!=null&&p7(s,e),e}function m7(i,t){const e={},n=x(t,["model"]);n!=null&&A(e,["model"],Dn(i,n));const r=x(t,["src"]);r!=null&&A(e,["inputConfig"],l7(WN(i,r)));const s=x(t,["config"]);return s!=null&&g7(s,e),e}function v7(i,t){const e={},n=x(i,["displayName"]);return t!==void 0&&n!=null&&A(t,["batch","displayName"],n),e}function y7(i,t){const e={},n=x(t,["model"]);n!=null&&A(e,["_url","model"],Dn(i,n));const r=x(t,["src"]);r!=null&&A(e,["batch","inputConfig"],E7(i,r));const s=x(t,["config"]);return s!=null&&v7(s,e),e}function x7(i,t){const e={},n=x(t,["name"]);return n!=null&&A(e,["_url","name"],H1(i,n)),e}function b7(i,t){const e={},n=x(t,["name"]);return n!=null&&A(e,["_url","name"],H1(i,n)),e}function A7(i){const t={},e=x(i,["sdkHttpResponse"]);e!=null&&A(t,["sdkHttpResponse"],e);const n=x(i,["name"]);n!=null&&A(t,["name"],n);const r=x(i,["done"]);r!=null&&A(t,["done"],r);const s=x(i,["error"]);return s!=null&&A(t,["error"],s),t}function _7(i){const t={},e=x(i,["sdkHttpResponse"]);e!=null&&A(t,["sdkHttpResponse"],e);const n=x(i,["name"]);n!=null&&A(t,["name"],n);const r=x(i,["done"]);r!=null&&A(t,["done"],r);const s=x(i,["error"]);return s!=null&&A(t,["error"],s),t}function w7(i,t){const e={},n=x(t,["contents"]);if(n!=null){let s=KE(i,n);Array.isArray(s)&&(s=s.map(a=>a)),A(e,["requests[]","request","content"],s)}const r=x(t,["config"]);return r!=null&&(A(e,["_self"],S7(r,e)),bk(e,{"requests[].*":"requests[].request.*"})),e}function S7(i,t){const e={},n=x(i,["taskType"]);t!==void 0&&n!=null&&A(t,["requests[]","taskType"],n);const r=x(i,["title"]);t!==void 0&&r!=null&&A(t,["requests[]","title"],r);const s=x(i,["outputDimensionality"]);if(t!==void 0&&s!=null&&A(t,["requests[]","outputDimensionality"],s),x(i,["mimeType"])!==void 0)throw new Error("mimeType parameter is not supported in Gemini API.");if(x(i,["autoTruncate"])!==void 0)throw new Error("autoTruncate parameter is not supported in Gemini API.");return e}function E7(i,t){const e={},n=x(t,["fileName"]);n!=null&&A(e,["file_name"],n);const r=x(t,["inlinedRequests"]);return r!=null&&A(e,["requests"],w7(i,r)),e}function C7(i){const t={};if(x(i,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const e=x(i,["fileUri"]);e!=null&&A(t,["fileUri"],e);const n=x(i,["mimeType"]);return n!=null&&A(t,["mimeType"],n),t}function T7(i){const t={},e=x(i,["id"]);e!=null&&A(t,["id"],e);const n=x(i,["args"]);n!=null&&A(t,["args"],n);const r=x(i,["name"]);if(r!=null&&A(t,["name"],r),x(i,["partialArgs"])!==void 0)throw new Error("partialArgs parameter is not supported in Gemini API.");if(x(i,["willContinue"])!==void 0)throw new Error("willContinue parameter is not supported in Gemini API.");return t}function N7(i){const t={},e=x(i,["mode"]);e!=null&&A(t,["mode"],e);const n=x(i,["allowedFunctionNames"]);if(n!=null&&A(t,["allowedFunctionNames"],n),x(i,["streamFunctionCallArguments"])!==void 0)throw new Error("streamFunctionCallArguments parameter is not supported in Gemini API.");return t}function R7(i,t,e){const n={},r=x(t,["systemInstruction"]);e!==void 0&&r!=null&&A(e,["systemInstruction"],JN(zs(r)));const s=x(t,["temperature"]);s!=null&&A(n,["temperature"],s);const a=x(t,["topP"]);a!=null&&A(n,["topP"],a);const u=x(t,["topK"]);u!=null&&A(n,["topK"],u);const c=x(t,["candidateCount"]);c!=null&&A(n,["candidateCount"],c);const h=x(t,["maxOutputTokens"]);h!=null&&A(n,["maxOutputTokens"],h);const f=x(t,["stopSequences"]);f!=null&&A(n,["stopSequences"],f);const g=x(t,["responseLogprobs"]);g!=null&&A(n,["responseLogprobs"],g);const m=x(t,["logprobs"]);m!=null&&A(n,["logprobs"],m);const y=x(t,["presencePenalty"]);y!=null&&A(n,["presencePenalty"],y);const w=x(t,["frequencyPenalty"]);w!=null&&A(n,["frequencyPenalty"],w);const S=x(t,["seed"]);S!=null&&A(n,["seed"],S);const T=x(t,["responseMimeType"]);T!=null&&A(n,["responseMimeType"],T);const C=x(t,["responseSchema"]);C!=null&&A(n,["responseSchema"],QE(C));const D=x(t,["responseJsonSchema"]);if(D!=null&&A(n,["responseJsonSchema"],D),x(t,["routingConfig"])!==void 0)throw new Error("routingConfig parameter is not supported in Gemini API.");if(x(t,["modelSelectionConfig"])!==void 0)throw new Error("modelSelectionConfig parameter is not supported in Gemini API.");const R=x(t,["safetySettings"]);if(e!==void 0&&R!=null){let et=R;Array.isArray(et)&&(et=et.map(st=>Y7(st))),A(e,["safetySettings"],et)}const I=x(t,["tools"]);if(e!==void 0&&I!=null){let et=U1(I);Array.isArray(et)&&(et=et.map(st=>W7(O1(st)))),A(e,["tools"],et)}const F=x(t,["toolConfig"]);if(e!==void 0&&F!=null&&A(e,["toolConfig"],$7(F)),x(t,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");const q=x(t,["cachedContent"]);e!==void 0&&q!=null&&A(e,["cachedContent"],Bh(i,q));const U=x(t,["responseModalities"]);U!=null&&A(n,["responseModalities"],U);const V=x(t,["mediaResolution"]);V!=null&&A(n,["mediaResolution"],V);const tt=x(t,["speechConfig"]);if(tt!=null&&A(n,["speechConfig"],ZE(tt)),x(t,["audioTimestamp"])!==void 0)throw new Error("audioTimestamp parameter is not supported in Gemini API.");const J=x(t,["thinkingConfig"]);J!=null&&A(n,["thinkingConfig"],J);const O=x(t,["imageConfig"]);O!=null&&A(n,["imageConfig"],k7(O));const G=x(t,["enableEnhancedCivicAnswers"]);return G!=null&&A(n,["enableEnhancedCivicAnswers"],G),n}function D7(i){const t={},e=x(i,["sdkHttpResponse"]);e!=null&&A(t,["sdkHttpResponse"],e);const n=x(i,["candidates"]);if(n!=null){let c=n;Array.isArray(c)&&(c=c.map(h=>f7(h))),A(t,["candidates"],c)}const r=x(i,["modelVersion"]);r!=null&&A(t,["modelVersion"],r);const s=x(i,["promptFeedback"]);s!=null&&A(t,["promptFeedback"],s);const a=x(i,["responseId"]);a!=null&&A(t,["responseId"],a);const u=x(i,["usageMetadata"]);return u!=null&&A(t,["usageMetadata"],u),t}function L7(i,t){const e={},n=x(t,["name"]);return n!=null&&A(e,["_url","name"],H1(i,n)),e}function M7(i,t){const e={},n=x(t,["name"]);return n!=null&&A(e,["_url","name"],H1(i,n)),e}function I7(i){const t={};if(x(i,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const e=x(i,["enableWidget"]);return e!=null&&A(t,["enableWidget"],e),t}function P7(i){const t={};if(x(i,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(x(i,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");const e=x(i,["timeRangeFilter"]);return e!=null&&A(t,["timeRangeFilter"],e),t}function k7(i){const t={},e=x(i,["aspectRatio"]);e!=null&&A(t,["aspectRatio"],e);const n=x(i,["imageSize"]);if(n!=null&&A(t,["imageSize"],n),x(i,["outputMimeType"])!==void 0)throw new Error("outputMimeType parameter is not supported in Gemini API.");if(x(i,["outputCompressionQuality"])!==void 0)throw new Error("outputCompressionQuality parameter is not supported in Gemini API.");return t}function F7(i,t){const e={},n=x(t,["model"]);n!=null&&A(e,["request","model"],Dn(i,n));const r=x(t,["contents"]);if(r!=null){let u=rl(r);Array.isArray(u)&&(u=u.map(c=>JN(c))),A(e,["request","contents"],u)}const s=x(t,["metadata"]);s!=null&&A(e,["metadata"],s);const a=x(t,["config"]);return a!=null&&A(e,["request","generationConfig"],R7(i,a,x(e,["request"],{}))),e}function B7(i){const t={},e=x(i,["response"]);e!=null&&A(t,["response"],D7(e));const n=x(i,["error"]);return n!=null&&A(t,["error"],n),t}function O7(i,t){const e={},n=x(i,["pageSize"]);t!==void 0&&n!=null&&A(t,["_query","pageSize"],n);const r=x(i,["pageToken"]);if(t!==void 0&&r!=null&&A(t,["_query","pageToken"],r),x(i,["filter"])!==void 0)throw new Error("filter parameter is not supported in Gemini API.");return e}function U7(i,t){const e={},n=x(i,["pageSize"]);t!==void 0&&n!=null&&A(t,["_query","pageSize"],n);const r=x(i,["pageToken"]);t!==void 0&&r!=null&&A(t,["_query","pageToken"],r);const s=x(i,["filter"]);return t!==void 0&&s!=null&&A(t,["_query","filter"],s),e}function H7(i){const t={},e=x(i,["config"]);return e!=null&&O7(e,t),t}function q7(i){const t={},e=x(i,["config"]);return e!=null&&U7(e,t),t}function z7(i){const t={},e=x(i,["sdkHttpResponse"]);e!=null&&A(t,["sdkHttpResponse"],e);const n=x(i,["nextPageToken"]);n!=null&&A(t,["nextPageToken"],n);const r=x(i,["operations"]);if(r!=null){let s=r;Array.isArray(s)&&(s=s.map(a=>A5(a))),A(t,["batchJobs"],s)}return t}function G7(i){const t={},e=x(i,["sdkHttpResponse"]);e!=null&&A(t,["sdkHttpResponse"],e);const n=x(i,["nextPageToken"]);n!=null&&A(t,["nextPageToken"],n);const r=x(i,["batchPredictionJobs"]);if(r!=null){let s=r;Array.isArray(s)&&(s=s.map(a=>Yw(a))),A(t,["batchJobs"],s)}return t}function V7(i){const t={},e=x(i,["mediaResolution"]);e!=null&&A(t,["mediaResolution"],e);const n=x(i,["codeExecutionResult"]);n!=null&&A(t,["codeExecutionResult"],n);const r=x(i,["executableCode"]);r!=null&&A(t,["executableCode"],r);const s=x(i,["fileData"]);s!=null&&A(t,["fileData"],C7(s));const a=x(i,["functionCall"]);a!=null&&A(t,["functionCall"],T7(a));const u=x(i,["functionResponse"]);u!=null&&A(t,["functionResponse"],u);const c=x(i,["inlineData"]);c!=null&&A(t,["inlineData"],u7(c));const h=x(i,["text"]);h!=null&&A(t,["text"],h);const f=x(i,["thought"]);f!=null&&A(t,["thought"],f);const g=x(i,["thoughtSignature"]);g!=null&&A(t,["thoughtSignature"],g);const m=x(i,["videoMetadata"]);return m!=null&&A(t,["videoMetadata"],m),t}function Y7(i){const t={},e=x(i,["category"]);if(e!=null&&A(t,["category"],e),x(i,["method"])!==void 0)throw new Error("method parameter is not supported in Gemini API.");const n=x(i,["threshold"]);return n!=null&&A(t,["threshold"],n),t}function $7(i){const t={},e=x(i,["functionCallingConfig"]);e!=null&&A(t,["functionCallingConfig"],N7(e));const n=x(i,["retrievalConfig"]);return n!=null&&A(t,["retrievalConfig"],n),t}function W7(i){const t={},e=x(i,["functionDeclarations"]);if(e!=null){let f=e;Array.isArray(f)&&(f=f.map(g=>g)),A(t,["functionDeclarations"],f)}if(x(i,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const n=x(i,["googleSearchRetrieval"]);n!=null&&A(t,["googleSearchRetrieval"],n);const r=x(i,["computerUse"]);r!=null&&A(t,["computerUse"],r);const s=x(i,["fileSearch"]);s!=null&&A(t,["fileSearch"],s);const a=x(i,["codeExecution"]);if(a!=null&&A(t,["codeExecution"],a),x(i,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const u=x(i,["googleMaps"]);u!=null&&A(t,["googleMaps"],I7(u));const c=x(i,["googleSearch"]);c!=null&&A(t,["googleSearch"],P7(c));const h=x(i,["urlContext"]);return h!=null&&A(t,["urlContext"],h),t}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */var Lh;(function(i){i.PAGED_ITEM_BATCH_JOBS="batchJobs",i.PAGED_ITEM_MODELS="models",i.PAGED_ITEM_TUNING_JOBS="tuningJobs",i.PAGED_ITEM_FILES="files",i.PAGED_ITEM_CACHED_CONTENTS="cachedContents",i.PAGED_ITEM_FILE_SEARCH_STORES="fileSearchStores",i.PAGED_ITEM_DOCUMENTS="documents"})(Lh||(Lh={}));class Op{constructor(t,e,n,r){this.pageInternal=[],this.paramsInternal={},this.requestInternal=e,this.init(t,n,r)}init(t,e,n){var r,s;this.nameInternal=t,this.pageInternal=e[this.nameInternal]||[],this.sdkHttpResponseInternal=e==null?void 0:e.sdkHttpResponse,this.idxInternal=0;let a={config:{}};!n||Object.keys(n).length===0?a={config:{}}:typeof n=="object"?a=Object.assign({},n):a=n,a.config&&(a.config.pageToken=e.nextPageToken),this.paramsInternal=a,this.pageInternalSize=(s=(r=a.config)===null||r===void 0?void 0:r.pageSize)!==null&&s!==void 0?s:this.pageInternal.length}initNextPage(t){this.init(this.nameInternal,t,this.paramsInternal)}get page(){return this.pageInternal}get name(){return this.nameInternal}get pageSize(){return this.pageInternalSize}get sdkHttpResponse(){return this.sdkHttpResponseInternal}get params(){return this.paramsInternal}get pageLength(){return this.pageInternal.length}getItem(t){return this.pageInternal[t]}[Symbol.asyncIterator](){return{next:async()=>{if(this.idxInternal>=this.pageLength)if(this.hasNextPage())await this.nextPage();else return{value:void 0,done:!0};const t=this.getItem(this.idxInternal);return this.idxInternal+=1,{value:t,done:!1}},return:async()=>({value:void 0,done:!0})}}async nextPage(){if(!this.hasNextPage())throw new Error("No more pages to fetch.");const t=await this.requestInternal(this.params);return this.initNextPage(t),this.page}hasNextPage(){var t;return((t=this.params.config)===null||t===void 0?void 0:t.pageToken)!==void 0}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class X7 extends Fh{constructor(t){super(),this.apiClient=t,this.list=async(e={})=>new Op(Lh.PAGED_ITEM_BATCH_JOBS,n=>this.listInternal(n),await this.listInternal(e),e),this.create=async e=>(this.apiClient.isVertexAI()&&(e.config=this.formatDestination(e.src,e.config)),this.createInternal(e)),this.createEmbeddings=async e=>{if(console.warn("batches.createEmbeddings() is experimental and may change without notice."),this.apiClient.isVertexAI())throw new Error("Vertex AI does not support batches.createEmbeddings.");return this.createEmbeddingsInternal(e)}}createInlinedGenerateContentRequest(t){const e=d6(this.apiClient,t),n=e._url,r=ce("{model}:batchGenerateContent",n),u=e.batch.inputConfig.requests,c=u.requests,h=[];for(const f of c){const g=Object.assign({},f);if(g.systemInstruction){const m=g.systemInstruction;delete g.systemInstruction;const y=g.request;y.systemInstruction=m,g.request=y}h.push(g)}return u.requests=h,delete e.config,delete e._url,delete e._query,{path:r,body:e}}getGcsUri(t){if(typeof t=="string")return t.startsWith("gs://")?t:void 0;if(!Array.isArray(t)&&t.gcsUri&&t.gcsUri.length>0)return t.gcsUri[0]}getBigqueryUri(t){if(typeof t=="string")return t.startsWith("bq://")?t:void 0;if(!Array.isArray(t))return t.bigqueryUri}formatDestination(t,e){const n=e?Object.assign({},e):{},r=Date.now().toString();if(n.displayName||(n.displayName=`genaiBatchJob_${r}`),n.dest===void 0){const s=this.getGcsUri(t),a=this.getBigqueryUri(t);if(s)s.endsWith(".jsonl")?n.dest=`${s.slice(0,-6)}/dest`:n.dest=`${s}_dest_${r}`;else if(a)n.dest=`${a}_dest_${r}`;else throw new Error("Unsupported source for Vertex AI: No GCS or BigQuery URI found.")}return n}async createInternal(t){var e,n,r,s;let a,u="",c={};if(this.apiClient.isVertexAI()){const h=m7(this.apiClient,t);return u=ce("batchPredictionJobs",h._url),c=h._query,delete h._url,delete h._query,a=this.apiClient.request({path:u,queryParams:c,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(e=t.config)===null||e===void 0?void 0:e.httpOptions,abortSignal:(n=t.config)===null||n===void 0?void 0:n.abortSignal}).then(f=>f.json()),a.then(f=>Yw(f))}else{const h=d6(this.apiClient,t);return u=ce("{model}:batchGenerateContent",h._url),c=h._query,delete h._url,delete h._query,a=this.apiClient.request({path:u,queryParams:c,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(r=t.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(s=t.config)===null||s===void 0?void 0:s.abortSignal}).then(f=>f.json()),a.then(f=>A5(f))}}async createEmbeddingsInternal(t){var e,n;let r,s="",a={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const u=y7(this.apiClient,t);return s=ce("{model}:asyncBatchEmbedContent",u._url),a=u._query,delete u._url,delete u._query,r=this.apiClient.request({path:s,queryParams:a,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(e=t.config)===null||e===void 0?void 0:e.httpOptions,abortSignal:(n=t.config)===null||n===void 0?void 0:n.abortSignal}).then(c=>c.json()),r.then(c=>A5(c))}}async get(t){var e,n,r,s;let a,u="",c={};if(this.apiClient.isVertexAI()){const h=M7(this.apiClient,t);return u=ce("batchPredictionJobs/{name}",h._url),c=h._query,delete h._url,delete h._query,a=this.apiClient.request({path:u,queryParams:c,body:JSON.stringify(h),httpMethod:"GET",httpOptions:(e=t.config)===null||e===void 0?void 0:e.httpOptions,abortSignal:(n=t.config)===null||n===void 0?void 0:n.abortSignal}).then(f=>f.json()),a.then(f=>Yw(f))}else{const h=L7(this.apiClient,t);return u=ce("batches/{name}",h._url),c=h._query,delete h._url,delete h._query,a=this.apiClient.request({path:u,queryParams:c,body:JSON.stringify(h),httpMethod:"GET",httpOptions:(r=t.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(s=t.config)===null||s===void 0?void 0:s.abortSignal}).then(f=>f.json()),a.then(f=>A5(f))}}async cancel(t){var e,n,r,s;let a="",u={};if(this.apiClient.isVertexAI()){const c=h7(this.apiClient,t);a=ce("batchPredictionJobs/{name}:cancel",c._url),u=c._query,delete c._url,delete c._query,await this.apiClient.request({path:a,queryParams:u,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(e=t.config)===null||e===void 0?void 0:e.httpOptions,abortSignal:(n=t.config)===null||n===void 0?void 0:n.abortSignal})}else{const c=c7(this.apiClient,t);a=ce("batches/{name}:cancel",c._url),u=c._query,delete c._url,delete c._query,await this.apiClient.request({path:a,queryParams:u,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(r=t.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(s=t.config)===null||s===void 0?void 0:s.abortSignal})}}async listInternal(t){var e,n,r,s;let a,u="",c={};if(this.apiClient.isVertexAI()){const h=q7(t);return u=ce("batchPredictionJobs",h._url),c=h._query,delete h._url,delete h._query,a=this.apiClient.request({path:u,queryParams:c,body:JSON.stringify(h),httpMethod:"GET",httpOptions:(e=t.config)===null||e===void 0?void 0:e.httpOptions,abortSignal:(n=t.config)===null||n===void 0?void 0:n.abortSignal}).then(f=>f.json().then(g=>{const m=g;return m.sdkHttpResponse={headers:f.headers},m})),a.then(f=>{const g=G7(f),m=new u6;return Object.assign(m,g),m})}else{const h=H7(t);return u=ce("batches",h._url),c=h._query,delete h._url,delete h._query,a=this.apiClient.request({path:u,queryParams:c,body:JSON.stringify(h),httpMethod:"GET",httpOptions:(r=t.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(s=t.config)===null||s===void 0?void 0:s.abortSignal}).then(f=>f.json().then(g=>{const m=g;return m.sdkHttpResponse={headers:f.headers},m})),a.then(f=>{const g=z7(f),m=new u6;return Object.assign(m,g),m})}}async delete(t){var e,n,r,s;let a,u="",c={};if(this.apiClient.isVertexAI()){const h=b7(this.apiClient,t);return u=ce("batchPredictionJobs/{name}",h._url),c=h._query,delete h._url,delete h._query,a=this.apiClient.request({path:u,queryParams:c,body:JSON.stringify(h),httpMethod:"DELETE",httpOptions:(e=t.config)===null||e===void 0?void 0:e.httpOptions,abortSignal:(n=t.config)===null||n===void 0?void 0:n.abortSignal}).then(f=>f.json().then(g=>{const m=g;return m.sdkHttpResponse={headers:f.headers},m})),a.then(f=>_7(f))}else{const h=x7(this.apiClient,t);return u=ce("batches/{name}",h._url),c=h._query,delete h._url,delete h._query,a=this.apiClient.request({path:u,queryParams:c,body:JSON.stringify(h),httpMethod:"DELETE",httpOptions:(r=t.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(s=t.config)===null||s===void 0?void 0:s.abortSignal}).then(f=>f.json().then(g=>{const m=g;return m.sdkHttpResponse={headers:f.headers},m})),a.then(f=>A7(f))}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function j7(i){const t={},e=x(i,["data"]);if(e!=null&&A(t,["data"],e),x(i,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const n=x(i,["mimeType"]);return n!=null&&A(t,["mimeType"],n),t}function p6(i){const t={},e=x(i,["parts"]);if(e!=null){let r=e;Array.isArray(r)&&(r=r.map(s=>yF(s))),A(t,["parts"],r)}const n=x(i,["role"]);return n!=null&&A(t,["role"],n),t}function J7(i,t){const e={},n=x(i,["ttl"]);t!==void 0&&n!=null&&A(t,["ttl"],n);const r=x(i,["expireTime"]);t!==void 0&&r!=null&&A(t,["expireTime"],r);const s=x(i,["displayName"]);t!==void 0&&s!=null&&A(t,["displayName"],s);const a=x(i,["contents"]);if(t!==void 0&&a!=null){let f=rl(a);Array.isArray(f)&&(f=f.map(g=>p6(g))),A(t,["contents"],f)}const u=x(i,["systemInstruction"]);t!==void 0&&u!=null&&A(t,["systemInstruction"],p6(zs(u)));const c=x(i,["tools"]);if(t!==void 0&&c!=null){let f=c;Array.isArray(f)&&(f=f.map(g=>bF(g))),A(t,["tools"],f)}const h=x(i,["toolConfig"]);if(t!==void 0&&h!=null&&A(t,["toolConfig"],xF(h)),x(i,["kmsKeyName"])!==void 0)throw new Error("kmsKeyName parameter is not supported in Gemini API.");return e}function K7(i,t){const e={},n=x(i,["ttl"]);t!==void 0&&n!=null&&A(t,["ttl"],n);const r=x(i,["expireTime"]);t!==void 0&&r!=null&&A(t,["expireTime"],r);const s=x(i,["displayName"]);t!==void 0&&s!=null&&A(t,["displayName"],s);const a=x(i,["contents"]);if(t!==void 0&&a!=null){let g=rl(a);Array.isArray(g)&&(g=g.map(m=>m)),A(t,["contents"],g)}const u=x(i,["systemInstruction"]);t!==void 0&&u!=null&&A(t,["systemInstruction"],zs(u));const c=x(i,["tools"]);if(t!==void 0&&c!=null){let g=c;Array.isArray(g)&&(g=g.map(m=>AF(m))),A(t,["tools"],g)}const h=x(i,["toolConfig"]);t!==void 0&&h!=null&&A(t,["toolConfig"],h);const f=x(i,["kmsKeyName"]);return t!==void 0&&f!=null&&A(t,["encryption_spec","kmsKeyName"],f),e}function Q7(i,t){const e={},n=x(t,["model"]);n!=null&&A(e,["model"],ON(i,n));const r=x(t,["config"]);return r!=null&&J7(r,e),e}function Z7(i,t){const e={},n=x(t,["model"]);n!=null&&A(e,["model"],ON(i,n));const r=x(t,["config"]);return r!=null&&K7(r,e),e}function tF(i,t){const e={},n=x(t,["name"]);return n!=null&&A(e,["_url","name"],Bh(i,n)),e}function eF(i,t){const e={},n=x(t,["name"]);return n!=null&&A(e,["_url","name"],Bh(i,n)),e}function nF(i){const t={},e=x(i,["sdkHttpResponse"]);return e!=null&&A(t,["sdkHttpResponse"],e),t}function iF(i){const t={},e=x(i,["sdkHttpResponse"]);return e!=null&&A(t,["sdkHttpResponse"],e),t}function rF(i){const t={};if(x(i,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const e=x(i,["fileUri"]);e!=null&&A(t,["fileUri"],e);const n=x(i,["mimeType"]);return n!=null&&A(t,["mimeType"],n),t}function sF(i){const t={},e=x(i,["id"]);e!=null&&A(t,["id"],e);const n=x(i,["args"]);n!=null&&A(t,["args"],n);const r=x(i,["name"]);if(r!=null&&A(t,["name"],r),x(i,["partialArgs"])!==void 0)throw new Error("partialArgs parameter is not supported in Gemini API.");if(x(i,["willContinue"])!==void 0)throw new Error("willContinue parameter is not supported in Gemini API.");return t}function oF(i){const t={},e=x(i,["mode"]);e!=null&&A(t,["mode"],e);const n=x(i,["allowedFunctionNames"]);if(n!=null&&A(t,["allowedFunctionNames"],n),x(i,["streamFunctionCallArguments"])!==void 0)throw new Error("streamFunctionCallArguments parameter is not supported in Gemini API.");return t}function aF(i){const t={};if(x(i,["behavior"])!==void 0)throw new Error("behavior parameter is not supported in Vertex AI.");const e=x(i,["description"]);e!=null&&A(t,["description"],e);const n=x(i,["name"]);n!=null&&A(t,["name"],n);const r=x(i,["parameters"]);r!=null&&A(t,["parameters"],r);const s=x(i,["parametersJsonSchema"]);s!=null&&A(t,["parametersJsonSchema"],s);const a=x(i,["response"]);a!=null&&A(t,["response"],a);const u=x(i,["responseJsonSchema"]);return u!=null&&A(t,["responseJsonSchema"],u),t}function lF(i,t){const e={},n=x(t,["name"]);return n!=null&&A(e,["_url","name"],Bh(i,n)),e}function uF(i,t){const e={},n=x(t,["name"]);return n!=null&&A(e,["_url","name"],Bh(i,n)),e}function cF(i){const t={};if(x(i,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const e=x(i,["enableWidget"]);return e!=null&&A(t,["enableWidget"],e),t}function hF(i){const t={};if(x(i,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(x(i,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");const e=x(i,["timeRangeFilter"]);return e!=null&&A(t,["timeRangeFilter"],e),t}function fF(i,t){const e={},n=x(i,["pageSize"]);t!==void 0&&n!=null&&A(t,["_query","pageSize"],n);const r=x(i,["pageToken"]);return t!==void 0&&r!=null&&A(t,["_query","pageToken"],r),e}function dF(i,t){const e={},n=x(i,["pageSize"]);t!==void 0&&n!=null&&A(t,["_query","pageSize"],n);const r=x(i,["pageToken"]);return t!==void 0&&r!=null&&A(t,["_query","pageToken"],r),e}function pF(i){const t={},e=x(i,["config"]);return e!=null&&fF(e,t),t}function gF(i){const t={},e=x(i,["config"]);return e!=null&&dF(e,t),t}function mF(i){const t={},e=x(i,["sdkHttpResponse"]);e!=null&&A(t,["sdkHttpResponse"],e);const n=x(i,["nextPageToken"]);n!=null&&A(t,["nextPageToken"],n);const r=x(i,["cachedContents"]);if(r!=null){let s=r;Array.isArray(s)&&(s=s.map(a=>a)),A(t,["cachedContents"],s)}return t}function vF(i){const t={},e=x(i,["sdkHttpResponse"]);e!=null&&A(t,["sdkHttpResponse"],e);const n=x(i,["nextPageToken"]);n!=null&&A(t,["nextPageToken"],n);const r=x(i,["cachedContents"]);if(r!=null){let s=r;Array.isArray(s)&&(s=s.map(a=>a)),A(t,["cachedContents"],s)}return t}function yF(i){const t={},e=x(i,["mediaResolution"]);e!=null&&A(t,["mediaResolution"],e);const n=x(i,["codeExecutionResult"]);n!=null&&A(t,["codeExecutionResult"],n);const r=x(i,["executableCode"]);r!=null&&A(t,["executableCode"],r);const s=x(i,["fileData"]);s!=null&&A(t,["fileData"],rF(s));const a=x(i,["functionCall"]);a!=null&&A(t,["functionCall"],sF(a));const u=x(i,["functionResponse"]);u!=null&&A(t,["functionResponse"],u);const c=x(i,["inlineData"]);c!=null&&A(t,["inlineData"],j7(c));const h=x(i,["text"]);h!=null&&A(t,["text"],h);const f=x(i,["thought"]);f!=null&&A(t,["thought"],f);const g=x(i,["thoughtSignature"]);g!=null&&A(t,["thoughtSignature"],g);const m=x(i,["videoMetadata"]);return m!=null&&A(t,["videoMetadata"],m),t}function xF(i){const t={},e=x(i,["functionCallingConfig"]);e!=null&&A(t,["functionCallingConfig"],oF(e));const n=x(i,["retrievalConfig"]);return n!=null&&A(t,["retrievalConfig"],n),t}function bF(i){const t={},e=x(i,["functionDeclarations"]);if(e!=null){let f=e;Array.isArray(f)&&(f=f.map(g=>g)),A(t,["functionDeclarations"],f)}if(x(i,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const n=x(i,["googleSearchRetrieval"]);n!=null&&A(t,["googleSearchRetrieval"],n);const r=x(i,["computerUse"]);r!=null&&A(t,["computerUse"],r);const s=x(i,["fileSearch"]);s!=null&&A(t,["fileSearch"],s);const a=x(i,["codeExecution"]);if(a!=null&&A(t,["codeExecution"],a),x(i,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const u=x(i,["googleMaps"]);u!=null&&A(t,["googleMaps"],cF(u));const c=x(i,["googleSearch"]);c!=null&&A(t,["googleSearch"],hF(c));const h=x(i,["urlContext"]);return h!=null&&A(t,["urlContext"],h),t}function AF(i){const t={},e=x(i,["functionDeclarations"]);if(e!=null){let g=e;Array.isArray(g)&&(g=g.map(m=>aF(m))),A(t,["functionDeclarations"],g)}const n=x(i,["retrieval"]);n!=null&&A(t,["retrieval"],n);const r=x(i,["googleSearchRetrieval"]);r!=null&&A(t,["googleSearchRetrieval"],r);const s=x(i,["computerUse"]);if(s!=null&&A(t,["computerUse"],s),x(i,["fileSearch"])!==void 0)throw new Error("fileSearch parameter is not supported in Vertex AI.");const a=x(i,["codeExecution"]);a!=null&&A(t,["codeExecution"],a);const u=x(i,["enterpriseWebSearch"]);u!=null&&A(t,["enterpriseWebSearch"],u);const c=x(i,["googleMaps"]);c!=null&&A(t,["googleMaps"],c);const h=x(i,["googleSearch"]);h!=null&&A(t,["googleSearch"],h);const f=x(i,["urlContext"]);return f!=null&&A(t,["urlContext"],f),t}function _F(i,t){const e={},n=x(i,["ttl"]);t!==void 0&&n!=null&&A(t,["ttl"],n);const r=x(i,["expireTime"]);return t!==void 0&&r!=null&&A(t,["expireTime"],r),e}function wF(i,t){const e={},n=x(i,["ttl"]);t!==void 0&&n!=null&&A(t,["ttl"],n);const r=x(i,["expireTime"]);return t!==void 0&&r!=null&&A(t,["expireTime"],r),e}function SF(i,t){const e={},n=x(t,["name"]);n!=null&&A(e,["_url","name"],Bh(i,n));const r=x(t,["config"]);return r!=null&&_F(r,e),e}function EF(i,t){const e={},n=x(t,["name"]);n!=null&&A(e,["_url","name"],Bh(i,n));const r=x(t,["config"]);return r!=null&&wF(r,e),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class CF extends Fh{constructor(t){super(),this.apiClient=t,this.list=async(e={})=>new Op(Lh.PAGED_ITEM_CACHED_CONTENTS,n=>this.listInternal(n),await this.listInternal(e),e)}async create(t){var e,n,r,s;let a,u="",c={};if(this.apiClient.isVertexAI()){const h=Z7(this.apiClient,t);return u=ce("cachedContents",h._url),c=h._query,delete h._url,delete h._query,a=this.apiClient.request({path:u,queryParams:c,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(e=t.config)===null||e===void 0?void 0:e.httpOptions,abortSignal:(n=t.config)===null||n===void 0?void 0:n.abortSignal}).then(f=>f.json()),a.then(f=>f)}else{const h=Q7(this.apiClient,t);return u=ce("cachedContents",h._url),c=h._query,delete h._url,delete h._query,a=this.apiClient.request({path:u,queryParams:c,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(r=t.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(s=t.config)===null||s===void 0?void 0:s.abortSignal}).then(f=>f.json()),a.then(f=>f)}}async get(t){var e,n,r,s;let a,u="",c={};if(this.apiClient.isVertexAI()){const h=uF(this.apiClient,t);return u=ce("{name}",h._url),c=h._query,delete h._url,delete h._query,a=this.apiClient.request({path:u,queryParams:c,body:JSON.stringify(h),httpMethod:"GET",httpOptions:(e=t.config)===null||e===void 0?void 0:e.httpOptions,abortSignal:(n=t.config)===null||n===void 0?void 0:n.abortSignal}).then(f=>f.json()),a.then(f=>f)}else{const h=lF(this.apiClient,t);return u=ce("{name}",h._url),c=h._query,delete h._url,delete h._query,a=this.apiClient.request({path:u,queryParams:c,body:JSON.stringify(h),httpMethod:"GET",httpOptions:(r=t.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(s=t.config)===null||s===void 0?void 0:s.abortSignal}).then(f=>f.json()),a.then(f=>f)}}async delete(t){var e,n,r,s;let a,u="",c={};if(this.apiClient.isVertexAI()){const h=eF(this.apiClient,t);return u=ce("{name}",h._url),c=h._query,delete h._url,delete h._query,a=this.apiClient.request({path:u,queryParams:c,body:JSON.stringify(h),httpMethod:"DELETE",httpOptions:(e=t.config)===null||e===void 0?void 0:e.httpOptions,abortSignal:(n=t.config)===null||n===void 0?void 0:n.abortSignal}).then(f=>f.json().then(g=>{const m=g;return m.sdkHttpResponse={headers:f.headers},m})),a.then(f=>{const g=iF(f),m=new a6;return Object.assign(m,g),m})}else{const h=tF(this.apiClient,t);return u=ce("{name}",h._url),c=h._query,delete h._url,delete h._query,a=this.apiClient.request({path:u,queryParams:c,body:JSON.stringify(h),httpMethod:"DELETE",httpOptions:(r=t.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(s=t.config)===null||s===void 0?void 0:s.abortSignal}).then(f=>f.json().then(g=>{const m=g;return m.sdkHttpResponse={headers:f.headers},m})),a.then(f=>{const g=nF(f),m=new a6;return Object.assign(m,g),m})}}async update(t){var e,n,r,s;let a,u="",c={};if(this.apiClient.isVertexAI()){const h=EF(this.apiClient,t);return u=ce("{name}",h._url),c=h._query,delete h._url,delete h._query,a=this.apiClient.request({path:u,queryParams:c,body:JSON.stringify(h),httpMethod:"PATCH",httpOptions:(e=t.config)===null||e===void 0?void 0:e.httpOptions,abortSignal:(n=t.config)===null||n===void 0?void 0:n.abortSignal}).then(f=>f.json()),a.then(f=>f)}else{const h=SF(this.apiClient,t);return u=ce("{name}",h._url),c=h._query,delete h._url,delete h._query,a=this.apiClient.request({path:u,queryParams:c,body:JSON.stringify(h),httpMethod:"PATCH",httpOptions:(r=t.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(s=t.config)===null||s===void 0?void 0:s.abortSignal}).then(f=>f.json()),a.then(f=>f)}}async listInternal(t){var e,n,r,s;let a,u="",c={};if(this.apiClient.isVertexAI()){const h=gF(t);return u=ce("cachedContents",h._url),c=h._query,delete h._url,delete h._query,a=this.apiClient.request({path:u,queryParams:c,body:JSON.stringify(h),httpMethod:"GET",httpOptions:(e=t.config)===null||e===void 0?void 0:e.httpOptions,abortSignal:(n=t.config)===null||n===void 0?void 0:n.abortSignal}).then(f=>f.json().then(g=>{const m=g;return m.sdkHttpResponse={headers:f.headers},m})),a.then(f=>{const g=vF(f),m=new l6;return Object.assign(m,g),m})}else{const h=pF(t);return u=ce("cachedContents",h._url),c=h._query,delete h._url,delete h._query,a=this.apiClient.request({path:u,queryParams:c,body:JSON.stringify(h),httpMethod:"GET",httpOptions:(r=t.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(s=t.config)===null||s===void 0?void 0:s.abortSignal}).then(f=>f.json().then(g=>{const m=g;return m.sdkHttpResponse={headers:f.headers},m})),a.then(f=>{const g=mF(f),m=new l6;return Object.assign(m,g),m})}}}function Wb(i,t){var e={};for(var n in i)Object.prototype.hasOwnProperty.call(i,n)&&t.indexOf(n)<0&&(e[n]=i[n]);if(i!=null&&typeof Object.getOwnPropertySymbols=="function")for(var r=0,n=Object.getOwnPropertySymbols(i);r<n.length;r++)t.indexOf(n[r])<0&&Object.prototype.propertyIsEnumerable.call(i,n[r])&&(e[n[r]]=i[n[r]]);return e}function g6(i){var t=typeof Symbol=="function"&&Symbol.iterator,e=t&&i[t],n=0;if(e)return e.call(i);if(i&&typeof i.length=="number")return{next:function(){return i&&n>=i.length&&(i=void 0),{value:i&&i[n++],done:!i}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")}function He(i){return this instanceof He?(this.v=i,this):new He(i)}function Wl(i,t,e){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var n=e.apply(i,t||[]),r,s=[];return r=Object.create((typeof AsyncIterator=="function"?AsyncIterator:Object).prototype),u("next"),u("throw"),u("return",a),r[Symbol.asyncIterator]=function(){return this},r;function a(y){return function(w){return Promise.resolve(w).then(y,g)}}function u(y,w){n[y]&&(r[y]=function(S){return new Promise(function(T,C){s.push([y,S,T,C])>1||c(y,S)})},w&&(r[y]=w(r[y])))}function c(y,w){try{h(n[y](w))}catch(S){m(s[0][3],S)}}function h(y){y.value instanceof He?Promise.resolve(y.value.v).then(f,g):m(s[0][2],y)}function f(y){c("next",y)}function g(y){c("throw",y)}function m(y,w){y(w),s.shift(),s.length&&c(s[0][0],s[0][1])}}function Xl(i){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var t=i[Symbol.asyncIterator],e;return t?t.call(i):(i=typeof g6=="function"?g6(i):i[Symbol.iterator](),e={},n("next"),n("throw"),n("return"),e[Symbol.asyncIterator]=function(){return this},e);function n(s){e[s]=i[s]&&function(a){return new Promise(function(u,c){a=i[s](a),r(u,c,a.done,a.value)})}}function r(s,a,u,c){Promise.resolve(c).then(function(h){s({value:h,done:u})},a)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function TF(i){var t;if(i.candidates==null||i.candidates.length===0)return!1;const e=(t=i.candidates[0])===null||t===void 0?void 0:t.content;return e===void 0?!1:KN(e)}function KN(i){if(i.parts===void 0||i.parts.length===0)return!1;for(const t of i.parts)if(t===void 0||Object.keys(t).length===0)return!1;return!0}function NF(i){if(i.length!==0){for(const t of i)if(t.role!=="user"&&t.role!=="model")throw new Error(`Role must be user or model, but got ${t.role}.`)}}function m6(i){if(i===void 0||i.length===0)return[];const t=[],e=i.length;let n=0;for(;n<e;)if(i[n].role==="user")t.push(i[n]),n++;else{const r=[];let s=!0;for(;n<e&&i[n].role==="model";)r.push(i[n]),s&&!KN(i[n])&&(s=!1),n++;s?t.push(...r):t.pop()}return t}class RF{constructor(t,e){this.modelsModule=t,this.apiClient=e}create(t){return new DF(this.apiClient,this.modelsModule,t.model,t.config,structuredClone(t.history))}}class DF{constructor(t,e,n,r={},s=[]){this.apiClient=t,this.modelsModule=e,this.model=n,this.config=r,this.history=s,this.sendPromise=Promise.resolve(),NF(s)}async sendMessage(t){var e;await this.sendPromise;const n=zs(t.message),r=this.modelsModule.generateContent({model:this.model,contents:this.getHistory(!0).concat(n),config:(e=t.config)!==null&&e!==void 0?e:this.config});return this.sendPromise=(async()=>{var s,a,u;const c=await r,h=(a=(s=c.candidates)===null||s===void 0?void 0:s[0])===null||a===void 0?void 0:a.content,f=c.automaticFunctionCallingHistory,g=this.getHistory(!0).length;let m=[];f!=null&&(m=(u=f.slice(g))!==null&&u!==void 0?u:[]);const y=h?[h]:[];this.recordHistory(n,y,m)})(),await this.sendPromise.catch(()=>{this.sendPromise=Promise.resolve()}),r}async sendMessageStream(t){var e;await this.sendPromise;const n=zs(t.message),r=this.modelsModule.generateContentStream({model:this.model,contents:this.getHistory(!0).concat(n),config:(e=t.config)!==null&&e!==void 0?e:this.config});this.sendPromise=r.then(()=>{}).catch(()=>{});const s=await r;return this.processStreamResponse(s,n)}getHistory(t=!1){const e=t?m6(this.history):this.history;return structuredClone(e)}processStreamResponse(t,e){return Wl(this,arguments,function*(){var r,s,a,u,c,h;const f=[];try{for(var g=!0,m=Xl(t),y;y=yield He(m.next()),r=y.done,!r;g=!0){u=y.value,g=!1;const w=u;if(TF(w)){const S=(h=(c=w.candidates)===null||c===void 0?void 0:c[0])===null||h===void 0?void 0:h.content;S!==void 0&&f.push(S)}yield yield He(w)}}catch(w){s={error:w}}finally{try{!g&&!r&&(a=m.return)&&(yield He(a.call(m)))}finally{if(s)throw s.error}}this.recordHistory(e,f)})}recordHistory(t,e,n){let r=[];e.length>0&&e.every(s=>s.role!==void 0)?r=e:r.push({role:"model",parts:[]}),n&&n.length>0?this.history.push(...m6(n)):this.history.push(t),this.history.push(...r)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class MA extends Error{constructor(t){super(t.message),this.name="ApiError",this.status=t.status,Object.setPrototypeOf(this,MA.prototype)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function LF(i){const t={},e=x(i,["file"]);return e!=null&&A(t,["file"],e),t}function MF(i){const t={},e=x(i,["sdkHttpResponse"]);return e!=null&&A(t,["sdkHttpResponse"],e),t}function IF(i){const t={},e=x(i,["name"]);return e!=null&&A(t,["_url","file"],VN(e)),t}function PF(i){const t={},e=x(i,["sdkHttpResponse"]);return e!=null&&A(t,["sdkHttpResponse"],e),t}function kF(i){const t={},e=x(i,["name"]);return e!=null&&A(t,["_url","file"],VN(e)),t}function FF(i,t){const e={},n=x(i,["pageSize"]);t!==void 0&&n!=null&&A(t,["_query","pageSize"],n);const r=x(i,["pageToken"]);return t!==void 0&&r!=null&&A(t,["_query","pageToken"],r),e}function BF(i){const t={},e=x(i,["config"]);return e!=null&&FF(e,t),t}function OF(i){const t={},e=x(i,["sdkHttpResponse"]);e!=null&&A(t,["sdkHttpResponse"],e);const n=x(i,["nextPageToken"]);n!=null&&A(t,["nextPageToken"],n);const r=x(i,["files"]);if(r!=null){let s=r;Array.isArray(s)&&(s=s.map(a=>a)),A(t,["files"],s)}return t}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class UF extends Fh{constructor(t){super(),this.apiClient=t,this.list=async(e={})=>new Op(Lh.PAGED_ITEM_FILES,n=>this.listInternal(n),await this.listInternal(e),e)}async upload(t){if(this.apiClient.isVertexAI())throw new Error("Vertex AI does not support uploading files. You can share files through a GCS bucket.");return this.apiClient.uploadFile(t.file,t.config).then(e=>e)}async download(t){await this.apiClient.downloadFile(t)}async listInternal(t){var e,n;let r,s="",a={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const u=BF(t);return s=ce("files",u._url),a=u._query,delete u._url,delete u._query,r=this.apiClient.request({path:s,queryParams:a,body:JSON.stringify(u),httpMethod:"GET",httpOptions:(e=t.config)===null||e===void 0?void 0:e.httpOptions,abortSignal:(n=t.config)===null||n===void 0?void 0:n.abortSignal}).then(c=>c.json().then(h=>{const f=h;return f.sdkHttpResponse={headers:c.headers},f})),r.then(c=>{const h=OF(c),f=new Gk;return Object.assign(f,h),f})}}async createInternal(t){var e,n;let r,s="",a={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const u=LF(t);return s=ce("upload/v1beta/files",u._url),a=u._query,delete u._url,delete u._query,r=this.apiClient.request({path:s,queryParams:a,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(e=t.config)===null||e===void 0?void 0:e.httpOptions,abortSignal:(n=t.config)===null||n===void 0?void 0:n.abortSignal}).then(c=>c.json()),r.then(c=>{const h=MF(c),f=new Vk;return Object.assign(f,h),f})}}async get(t){var e,n;let r,s="",a={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const u=kF(t);return s=ce("files/{file}",u._url),a=u._query,delete u._url,delete u._query,r=this.apiClient.request({path:s,queryParams:a,body:JSON.stringify(u),httpMethod:"GET",httpOptions:(e=t.config)===null||e===void 0?void 0:e.httpOptions,abortSignal:(n=t.config)===null||n===void 0?void 0:n.abortSignal}).then(c=>c.json()),r.then(c=>c)}}async delete(t){var e,n;let r,s="",a={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const u=IF(t);return s=ce("files/{file}",u._url),a=u._query,delete u._url,delete u._query,r=this.apiClient.request({path:s,queryParams:a,body:JSON.stringify(u),httpMethod:"DELETE",httpOptions:(e=t.config)===null||e===void 0?void 0:e.httpOptions,abortSignal:(n=t.config)===null||n===void 0?void 0:n.abortSignal}).then(c=>c.json().then(h=>{const f=h;return f.sdkHttpResponse={headers:c.headers},f})),r.then(c=>{const h=PF(c),f=new Yk;return Object.assign(f,h),f})}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function _5(i){const t={},e=x(i,["data"]);if(e!=null&&A(t,["data"],e),x(i,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const n=x(i,["mimeType"]);return n!=null&&A(t,["mimeType"],n),t}function HF(i){const t={},e=x(i,["parts"]);if(e!=null){let r=e;Array.isArray(r)&&(r=r.map(s=>nB(s))),A(t,["parts"],r)}const n=x(i,["role"]);return n!=null&&A(t,["role"],n),t}function qF(i){const t={};if(x(i,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const e=x(i,["fileUri"]);e!=null&&A(t,["fileUri"],e);const n=x(i,["mimeType"]);return n!=null&&A(t,["mimeType"],n),t}function zF(i){const t={},e=x(i,["id"]);e!=null&&A(t,["id"],e);const n=x(i,["args"]);n!=null&&A(t,["args"],n);const r=x(i,["name"]);if(r!=null&&A(t,["name"],r),x(i,["partialArgs"])!==void 0)throw new Error("partialArgs parameter is not supported in Gemini API.");if(x(i,["willContinue"])!==void 0)throw new Error("willContinue parameter is not supported in Gemini API.");return t}function GF(i){const t={};if(x(i,["behavior"])!==void 0)throw new Error("behavior parameter is not supported in Vertex AI.");const e=x(i,["description"]);e!=null&&A(t,["description"],e);const n=x(i,["name"]);n!=null&&A(t,["name"],n);const r=x(i,["parameters"]);r!=null&&A(t,["parameters"],r);const s=x(i,["parametersJsonSchema"]);s!=null&&A(t,["parametersJsonSchema"],s);const a=x(i,["response"]);a!=null&&A(t,["response"],a);const u=x(i,["responseJsonSchema"]);return u!=null&&A(t,["responseJsonSchema"],u),t}function VF(i){const t={},e=x(i,["modelSelectionConfig"]);e!=null&&A(t,["modelConfig"],e);const n=x(i,["responseJsonSchema"]);n!=null&&A(t,["responseJsonSchema"],n);const r=x(i,["audioTimestamp"]);r!=null&&A(t,["audioTimestamp"],r);const s=x(i,["candidateCount"]);s!=null&&A(t,["candidateCount"],s);const a=x(i,["enableAffectiveDialog"]);a!=null&&A(t,["enableAffectiveDialog"],a);const u=x(i,["frequencyPenalty"]);u!=null&&A(t,["frequencyPenalty"],u);const c=x(i,["logprobs"]);c!=null&&A(t,["logprobs"],c);const h=x(i,["maxOutputTokens"]);h!=null&&A(t,["maxOutputTokens"],h);const f=x(i,["mediaResolution"]);f!=null&&A(t,["mediaResolution"],f);const g=x(i,["presencePenalty"]);g!=null&&A(t,["presencePenalty"],g);const m=x(i,["responseLogprobs"]);m!=null&&A(t,["responseLogprobs"],m);const y=x(i,["responseMimeType"]);y!=null&&A(t,["responseMimeType"],y);const w=x(i,["responseModalities"]);w!=null&&A(t,["responseModalities"],w);const S=x(i,["responseSchema"]);S!=null&&A(t,["responseSchema"],S);const T=x(i,["routingConfig"]);T!=null&&A(t,["routingConfig"],T);const C=x(i,["seed"]);C!=null&&A(t,["seed"],C);const D=x(i,["speechConfig"]);D!=null&&A(t,["speechConfig"],D);const R=x(i,["stopSequences"]);R!=null&&A(t,["stopSequences"],R);const I=x(i,["temperature"]);I!=null&&A(t,["temperature"],I);const F=x(i,["thinkingConfig"]);F!=null&&A(t,["thinkingConfig"],F);const q=x(i,["topK"]);q!=null&&A(t,["topK"],q);const U=x(i,["topP"]);if(U!=null&&A(t,["topP"],U),x(i,["enableEnhancedCivicAnswers"])!==void 0)throw new Error("enableEnhancedCivicAnswers parameter is not supported in Vertex AI.");return t}function YF(i){const t={};if(x(i,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const e=x(i,["enableWidget"]);return e!=null&&A(t,["enableWidget"],e),t}function $F(i){const t={};if(x(i,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(x(i,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");const e=x(i,["timeRangeFilter"]);return e!=null&&A(t,["timeRangeFilter"],e),t}function WF(i,t){const e={},n=x(i,["generationConfig"]);t!==void 0&&n!=null&&A(t,["setup","generationConfig"],n);const r=x(i,["responseModalities"]);t!==void 0&&r!=null&&A(t,["setup","generationConfig","responseModalities"],r);const s=x(i,["temperature"]);t!==void 0&&s!=null&&A(t,["setup","generationConfig","temperature"],s);const a=x(i,["topP"]);t!==void 0&&a!=null&&A(t,["setup","generationConfig","topP"],a);const u=x(i,["topK"]);t!==void 0&&u!=null&&A(t,["setup","generationConfig","topK"],u);const c=x(i,["maxOutputTokens"]);t!==void 0&&c!=null&&A(t,["setup","generationConfig","maxOutputTokens"],c);const h=x(i,["mediaResolution"]);t!==void 0&&h!=null&&A(t,["setup","generationConfig","mediaResolution"],h);const f=x(i,["seed"]);t!==void 0&&f!=null&&A(t,["setup","generationConfig","seed"],f);const g=x(i,["speechConfig"]);t!==void 0&&g!=null&&A(t,["setup","generationConfig","speechConfig"],tC(g));const m=x(i,["thinkingConfig"]);t!==void 0&&m!=null&&A(t,["setup","generationConfig","thinkingConfig"],m);const y=x(i,["enableAffectiveDialog"]);t!==void 0&&y!=null&&A(t,["setup","generationConfig","enableAffectiveDialog"],y);const w=x(i,["systemInstruction"]);t!==void 0&&w!=null&&A(t,["setup","systemInstruction"],HF(zs(w)));const S=x(i,["tools"]);if(t!==void 0&&S!=null){let q=U1(S);Array.isArray(q)&&(q=q.map(U=>rB(O1(U)))),A(t,["setup","tools"],q)}const T=x(i,["sessionResumption"]);t!==void 0&&T!=null&&A(t,["setup","sessionResumption"],iB(T));const C=x(i,["inputAudioTranscription"]);t!==void 0&&C!=null&&A(t,["setup","inputAudioTranscription"],C);const D=x(i,["outputAudioTranscription"]);t!==void 0&&D!=null&&A(t,["setup","outputAudioTranscription"],D);const R=x(i,["realtimeInputConfig"]);t!==void 0&&R!=null&&A(t,["setup","realtimeInputConfig"],R);const I=x(i,["contextWindowCompression"]);t!==void 0&&I!=null&&A(t,["setup","contextWindowCompression"],I);const F=x(i,["proactivity"]);if(t!==void 0&&F!=null&&A(t,["setup","proactivity"],F),x(i,["explicitVadSignal"])!==void 0)throw new Error("explicitVadSignal parameter is not supported in Gemini API.");return e}function XF(i,t){const e={},n=x(i,["generationConfig"]);t!==void 0&&n!=null&&A(t,["setup","generationConfig"],VF(n));const r=x(i,["responseModalities"]);t!==void 0&&r!=null&&A(t,["setup","generationConfig","responseModalities"],r);const s=x(i,["temperature"]);t!==void 0&&s!=null&&A(t,["setup","generationConfig","temperature"],s);const a=x(i,["topP"]);t!==void 0&&a!=null&&A(t,["setup","generationConfig","topP"],a);const u=x(i,["topK"]);t!==void 0&&u!=null&&A(t,["setup","generationConfig","topK"],u);const c=x(i,["maxOutputTokens"]);t!==void 0&&c!=null&&A(t,["setup","generationConfig","maxOutputTokens"],c);const h=x(i,["mediaResolution"]);t!==void 0&&h!=null&&A(t,["setup","generationConfig","mediaResolution"],h);const f=x(i,["seed"]);t!==void 0&&f!=null&&A(t,["setup","generationConfig","seed"],f);const g=x(i,["speechConfig"]);t!==void 0&&g!=null&&A(t,["setup","generationConfig","speechConfig"],tC(g));const m=x(i,["thinkingConfig"]);t!==void 0&&m!=null&&A(t,["setup","generationConfig","thinkingConfig"],m);const y=x(i,["enableAffectiveDialog"]);t!==void 0&&y!=null&&A(t,["setup","generationConfig","enableAffectiveDialog"],y);const w=x(i,["systemInstruction"]);t!==void 0&&w!=null&&A(t,["setup","systemInstruction"],zs(w));const S=x(i,["tools"]);if(t!==void 0&&S!=null){let U=U1(S);Array.isArray(U)&&(U=U.map(V=>sB(O1(V)))),A(t,["setup","tools"],U)}const T=x(i,["sessionResumption"]);t!==void 0&&T!=null&&A(t,["setup","sessionResumption"],T);const C=x(i,["inputAudioTranscription"]);t!==void 0&&C!=null&&A(t,["setup","inputAudioTranscription"],C);const D=x(i,["outputAudioTranscription"]);t!==void 0&&D!=null&&A(t,["setup","outputAudioTranscription"],D);const R=x(i,["realtimeInputConfig"]);t!==void 0&&R!=null&&A(t,["setup","realtimeInputConfig"],R);const I=x(i,["contextWindowCompression"]);t!==void 0&&I!=null&&A(t,["setup","contextWindowCompression"],I);const F=x(i,["proactivity"]);t!==void 0&&F!=null&&A(t,["setup","proactivity"],F);const q=x(i,["explicitVadSignal"]);return t!==void 0&&q!=null&&A(t,["setup","explicitVadSignal"],q),e}function jF(i,t){const e={},n=x(t,["model"]);n!=null&&A(e,["setup","model"],Dn(i,n));const r=x(t,["config"]);return r!=null&&A(e,["config"],WF(r,e)),e}function JF(i,t){const e={},n=x(t,["model"]);n!=null&&A(e,["setup","model"],Dn(i,n));const r=x(t,["config"]);return r!=null&&A(e,["config"],XF(r,e)),e}function KF(i){const t={},e=x(i,["musicGenerationConfig"]);return e!=null&&A(t,["musicGenerationConfig"],e),t}function QF(i){const t={},e=x(i,["weightedPrompts"]);if(e!=null){let n=e;Array.isArray(n)&&(n=n.map(r=>r)),A(t,["weightedPrompts"],n)}return t}function ZF(i){const t={},e=x(i,["media"]);if(e!=null){let h=UN(e);Array.isArray(h)&&(h=h.map(f=>_5(f))),A(t,["mediaChunks"],h)}const n=x(i,["audio"]);n!=null&&A(t,["audio"],_5(qN(n)));const r=x(i,["audioStreamEnd"]);r!=null&&A(t,["audioStreamEnd"],r);const s=x(i,["video"]);s!=null&&A(t,["video"],_5(HN(s)));const a=x(i,["text"]);a!=null&&A(t,["text"],a);const u=x(i,["activityStart"]);u!=null&&A(t,["activityStart"],u);const c=x(i,["activityEnd"]);return c!=null&&A(t,["activityEnd"],c),t}function tB(i){const t={},e=x(i,["media"]);if(e!=null){let h=UN(e);Array.isArray(h)&&(h=h.map(f=>f)),A(t,["mediaChunks"],h)}const n=x(i,["audio"]);n!=null&&A(t,["audio"],qN(n));const r=x(i,["audioStreamEnd"]);r!=null&&A(t,["audioStreamEnd"],r);const s=x(i,["video"]);s!=null&&A(t,["video"],HN(s));const a=x(i,["text"]);a!=null&&A(t,["text"],a);const u=x(i,["activityStart"]);u!=null&&A(t,["activityStart"],u);const c=x(i,["activityEnd"]);return c!=null&&A(t,["activityEnd"],c),t}function eB(i){const t={},e=x(i,["setupComplete"]);e!=null&&A(t,["setupComplete"],e);const n=x(i,["serverContent"]);n!=null&&A(t,["serverContent"],n);const r=x(i,["toolCall"]);r!=null&&A(t,["toolCall"],r);const s=x(i,["toolCallCancellation"]);s!=null&&A(t,["toolCallCancellation"],s);const a=x(i,["usageMetadata"]);a!=null&&A(t,["usageMetadata"],oB(a));const u=x(i,["goAway"]);u!=null&&A(t,["goAway"],u);const c=x(i,["sessionResumptionUpdate"]);c!=null&&A(t,["sessionResumptionUpdate"],c);const h=x(i,["voiceActivityDetectionSignal"]);return h!=null&&A(t,["voiceActivityDetectionSignal"],h),t}function nB(i){const t={},e=x(i,["mediaResolution"]);e!=null&&A(t,["mediaResolution"],e);const n=x(i,["codeExecutionResult"]);n!=null&&A(t,["codeExecutionResult"],n);const r=x(i,["executableCode"]);r!=null&&A(t,["executableCode"],r);const s=x(i,["fileData"]);s!=null&&A(t,["fileData"],qF(s));const a=x(i,["functionCall"]);a!=null&&A(t,["functionCall"],zF(a));const u=x(i,["functionResponse"]);u!=null&&A(t,["functionResponse"],u);const c=x(i,["inlineData"]);c!=null&&A(t,["inlineData"],_5(c));const h=x(i,["text"]);h!=null&&A(t,["text"],h);const f=x(i,["thought"]);f!=null&&A(t,["thought"],f);const g=x(i,["thoughtSignature"]);g!=null&&A(t,["thoughtSignature"],g);const m=x(i,["videoMetadata"]);return m!=null&&A(t,["videoMetadata"],m),t}function iB(i){const t={},e=x(i,["handle"]);if(e!=null&&A(t,["handle"],e),x(i,["transparent"])!==void 0)throw new Error("transparent parameter is not supported in Gemini API.");return t}function rB(i){const t={},e=x(i,["functionDeclarations"]);if(e!=null){let f=e;Array.isArray(f)&&(f=f.map(g=>g)),A(t,["functionDeclarations"],f)}if(x(i,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const n=x(i,["googleSearchRetrieval"]);n!=null&&A(t,["googleSearchRetrieval"],n);const r=x(i,["computerUse"]);r!=null&&A(t,["computerUse"],r);const s=x(i,["fileSearch"]);s!=null&&A(t,["fileSearch"],s);const a=x(i,["codeExecution"]);if(a!=null&&A(t,["codeExecution"],a),x(i,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const u=x(i,["googleMaps"]);u!=null&&A(t,["googleMaps"],YF(u));const c=x(i,["googleSearch"]);c!=null&&A(t,["googleSearch"],$F(c));const h=x(i,["urlContext"]);return h!=null&&A(t,["urlContext"],h),t}function sB(i){const t={},e=x(i,["functionDeclarations"]);if(e!=null){let g=e;Array.isArray(g)&&(g=g.map(m=>GF(m))),A(t,["functionDeclarations"],g)}const n=x(i,["retrieval"]);n!=null&&A(t,["retrieval"],n);const r=x(i,["googleSearchRetrieval"]);r!=null&&A(t,["googleSearchRetrieval"],r);const s=x(i,["computerUse"]);if(s!=null&&A(t,["computerUse"],s),x(i,["fileSearch"])!==void 0)throw new Error("fileSearch parameter is not supported in Vertex AI.");const a=x(i,["codeExecution"]);a!=null&&A(t,["codeExecution"],a);const u=x(i,["enterpriseWebSearch"]);u!=null&&A(t,["enterpriseWebSearch"],u);const c=x(i,["googleMaps"]);c!=null&&A(t,["googleMaps"],c);const h=x(i,["googleSearch"]);h!=null&&A(t,["googleSearch"],h);const f=x(i,["urlContext"]);return f!=null&&A(t,["urlContext"],f),t}function oB(i){const t={},e=x(i,["promptTokenCount"]);e!=null&&A(t,["promptTokenCount"],e);const n=x(i,["cachedContentTokenCount"]);n!=null&&A(t,["cachedContentTokenCount"],n);const r=x(i,["candidatesTokenCount"]);r!=null&&A(t,["responseTokenCount"],r);const s=x(i,["toolUsePromptTokenCount"]);s!=null&&A(t,["toolUsePromptTokenCount"],s);const a=x(i,["thoughtsTokenCount"]);a!=null&&A(t,["thoughtsTokenCount"],a);const u=x(i,["totalTokenCount"]);u!=null&&A(t,["totalTokenCount"],u);const c=x(i,["promptTokensDetails"]);if(c!=null){let y=c;Array.isArray(y)&&(y=y.map(w=>w)),A(t,["promptTokensDetails"],y)}const h=x(i,["cacheTokensDetails"]);if(h!=null){let y=h;Array.isArray(y)&&(y=y.map(w=>w)),A(t,["cacheTokensDetails"],y)}const f=x(i,["candidatesTokensDetails"]);if(f!=null){let y=f;Array.isArray(y)&&(y=y.map(w=>w)),A(t,["responseTokensDetails"],y)}const g=x(i,["toolUsePromptTokensDetails"]);if(g!=null){let y=g;Array.isArray(y)&&(y=y.map(w=>w)),A(t,["toolUsePromptTokensDetails"],y)}const m=x(i,["trafficType"]);return m!=null&&A(t,["trafficType"],m),t}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function aB(i){const t={},e=x(i,["data"]);if(e!=null&&A(t,["data"],e),x(i,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const n=x(i,["mimeType"]);return n!=null&&A(t,["mimeType"],n),t}function lB(i){const t={},e=x(i,["content"]);e!=null&&A(t,["content"],e);const n=x(i,["citationMetadata"]);n!=null&&A(t,["citationMetadata"],uB(n));const r=x(i,["tokenCount"]);r!=null&&A(t,["tokenCount"],r);const s=x(i,["finishReason"]);s!=null&&A(t,["finishReason"],s);const a=x(i,["avgLogprobs"]);a!=null&&A(t,["avgLogprobs"],a);const u=x(i,["groundingMetadata"]);u!=null&&A(t,["groundingMetadata"],u);const c=x(i,["index"]);c!=null&&A(t,["index"],c);const h=x(i,["logprobsResult"]);h!=null&&A(t,["logprobsResult"],h);const f=x(i,["safetyRatings"]);if(f!=null){let m=f;Array.isArray(m)&&(m=m.map(y=>y)),A(t,["safetyRatings"],m)}const g=x(i,["urlContextMetadata"]);return g!=null&&A(t,["urlContextMetadata"],g),t}function uB(i){const t={},e=x(i,["citationSources"]);if(e!=null){let n=e;Array.isArray(n)&&(n=n.map(r=>r)),A(t,["citations"],n)}return t}function cB(i,t){const e={},n=x(t,["model"]);n!=null&&A(e,["_url","model"],Dn(i,n));const r=x(t,["contents"]);if(r!=null){let s=rl(r);Array.isArray(s)&&(s=s.map(a=>a)),A(e,["contents"],s)}return e}function hB(i){const t={},e=x(i,["sdkHttpResponse"]);e!=null&&A(t,["sdkHttpResponse"],e);const n=x(i,["tokensInfo"]);if(n!=null){let r=n;Array.isArray(r)&&(r=r.map(s=>s)),A(t,["tokensInfo"],r)}return t}function fB(i){const t={},e=x(i,["values"]);e!=null&&A(t,["values"],e);const n=x(i,["statistics"]);return n!=null&&A(t,["statistics"],dB(n)),t}function dB(i){const t={},e=x(i,["truncated"]);e!=null&&A(t,["truncated"],e);const n=x(i,["token_count"]);return n!=null&&A(t,["tokenCount"],n),t}function IA(i){const t={},e=x(i,["parts"]);if(e!=null){let r=e;Array.isArray(r)&&(r=r.map(s=>_9(s))),A(t,["parts"],r)}const n=x(i,["role"]);return n!=null&&A(t,["role"],n),t}function pB(i){const t={},e=x(i,["controlType"]);e!=null&&A(t,["controlType"],e);const n=x(i,["enableControlImageComputation"]);return n!=null&&A(t,["computeControl"],n),t}function gB(i){const t={};if(x(i,["systemInstruction"])!==void 0)throw new Error("systemInstruction parameter is not supported in Gemini API.");if(x(i,["tools"])!==void 0)throw new Error("tools parameter is not supported in Gemini API.");if(x(i,["generationConfig"])!==void 0)throw new Error("generationConfig parameter is not supported in Gemini API.");return t}function mB(i,t){const e={},n=x(i,["systemInstruction"]);t!==void 0&&n!=null&&A(t,["systemInstruction"],zs(n));const r=x(i,["tools"]);if(t!==void 0&&r!=null){let a=r;Array.isArray(a)&&(a=a.map(u=>eR(u))),A(t,["tools"],a)}const s=x(i,["generationConfig"]);return t!==void 0&&s!=null&&A(t,["generationConfig"],a9(s)),e}function vB(i,t){const e={},n=x(t,["model"]);n!=null&&A(e,["_url","model"],Dn(i,n));const r=x(t,["contents"]);if(r!=null){let a=rl(r);Array.isArray(a)&&(a=a.map(u=>IA(u))),A(e,["contents"],a)}const s=x(t,["config"]);return s!=null&&gB(s),e}function yB(i,t){const e={},n=x(t,["model"]);n!=null&&A(e,["_url","model"],Dn(i,n));const r=x(t,["contents"]);if(r!=null){let a=rl(r);Array.isArray(a)&&(a=a.map(u=>u)),A(e,["contents"],a)}const s=x(t,["config"]);return s!=null&&mB(s,e),e}function xB(i){const t={},e=x(i,["sdkHttpResponse"]);e!=null&&A(t,["sdkHttpResponse"],e);const n=x(i,["totalTokens"]);n!=null&&A(t,["totalTokens"],n);const r=x(i,["cachedContentTokenCount"]);return r!=null&&A(t,["cachedContentTokenCount"],r),t}function bB(i){const t={},e=x(i,["sdkHttpResponse"]);e!=null&&A(t,["sdkHttpResponse"],e);const n=x(i,["totalTokens"]);return n!=null&&A(t,["totalTokens"],n),t}function AB(i,t){const e={},n=x(t,["model"]);return n!=null&&A(e,["_url","name"],Dn(i,n)),e}function _B(i,t){const e={},n=x(t,["model"]);return n!=null&&A(e,["_url","name"],Dn(i,n)),e}function wB(i){const t={},e=x(i,["sdkHttpResponse"]);return e!=null&&A(t,["sdkHttpResponse"],e),t}function SB(i){const t={},e=x(i,["sdkHttpResponse"]);return e!=null&&A(t,["sdkHttpResponse"],e),t}function EB(i,t){const e={},n=x(i,["outputGcsUri"]);t!==void 0&&n!=null&&A(t,["parameters","storageUri"],n);const r=x(i,["negativePrompt"]);t!==void 0&&r!=null&&A(t,["parameters","negativePrompt"],r);const s=x(i,["numberOfImages"]);t!==void 0&&s!=null&&A(t,["parameters","sampleCount"],s);const a=x(i,["aspectRatio"]);t!==void 0&&a!=null&&A(t,["parameters","aspectRatio"],a);const u=x(i,["guidanceScale"]);t!==void 0&&u!=null&&A(t,["parameters","guidanceScale"],u);const c=x(i,["seed"]);t!==void 0&&c!=null&&A(t,["parameters","seed"],c);const h=x(i,["safetyFilterLevel"]);t!==void 0&&h!=null&&A(t,["parameters","safetySetting"],h);const f=x(i,["personGeneration"]);t!==void 0&&f!=null&&A(t,["parameters","personGeneration"],f);const g=x(i,["includeSafetyAttributes"]);t!==void 0&&g!=null&&A(t,["parameters","includeSafetyAttributes"],g);const m=x(i,["includeRaiReason"]);t!==void 0&&m!=null&&A(t,["parameters","includeRaiReason"],m);const y=x(i,["language"]);t!==void 0&&y!=null&&A(t,["parameters","language"],y);const w=x(i,["outputMimeType"]);t!==void 0&&w!=null&&A(t,["parameters","outputOptions","mimeType"],w);const S=x(i,["outputCompressionQuality"]);t!==void 0&&S!=null&&A(t,["parameters","outputOptions","compressionQuality"],S);const T=x(i,["addWatermark"]);t!==void 0&&T!=null&&A(t,["parameters","addWatermark"],T);const C=x(i,["labels"]);t!==void 0&&C!=null&&A(t,["labels"],C);const D=x(i,["editMode"]);t!==void 0&&D!=null&&A(t,["parameters","editMode"],D);const R=x(i,["baseSteps"]);return t!==void 0&&R!=null&&A(t,["parameters","editConfig","baseSteps"],R),e}function CB(i,t){const e={},n=x(t,["model"]);n!=null&&A(e,["_url","model"],Dn(i,n));const r=x(t,["prompt"]);r!=null&&A(e,["instances[0]","prompt"],r);const s=x(t,["referenceImages"]);if(s!=null){let u=s;Array.isArray(u)&&(u=u.map(c=>N9(c))),A(e,["instances[0]","referenceImages"],u)}const a=x(t,["config"]);return a!=null&&EB(a,e),e}function TB(i){const t={},e=x(i,["sdkHttpResponse"]);e!=null&&A(t,["sdkHttpResponse"],e);const n=x(i,["predictions"]);if(n!=null){let r=n;Array.isArray(r)&&(r=r.map(s=>PA(s))),A(t,["generatedImages"],r)}return t}function NB(i,t){const e={},n=x(i,["taskType"]);t!==void 0&&n!=null&&A(t,["requests[]","taskType"],n);const r=x(i,["title"]);t!==void 0&&r!=null&&A(t,["requests[]","title"],r);const s=x(i,["outputDimensionality"]);if(t!==void 0&&s!=null&&A(t,["requests[]","outputDimensionality"],s),x(i,["mimeType"])!==void 0)throw new Error("mimeType parameter is not supported in Gemini API.");if(x(i,["autoTruncate"])!==void 0)throw new Error("autoTruncate parameter is not supported in Gemini API.");return e}function RB(i,t){const e={},n=x(i,["taskType"]);t!==void 0&&n!=null&&A(t,["instances[]","task_type"],n);const r=x(i,["title"]);t!==void 0&&r!=null&&A(t,["instances[]","title"],r);const s=x(i,["outputDimensionality"]);t!==void 0&&s!=null&&A(t,["parameters","outputDimensionality"],s);const a=x(i,["mimeType"]);t!==void 0&&a!=null&&A(t,["instances[]","mimeType"],a);const u=x(i,["autoTruncate"]);return t!==void 0&&u!=null&&A(t,["parameters","autoTruncate"],u),e}function DB(i,t){const e={},n=x(t,["model"]);n!=null&&A(e,["_url","model"],Dn(i,n));const r=x(t,["contents"]);if(r!=null){let u=KE(i,r);Array.isArray(u)&&(u=u.map(c=>c)),A(e,["requests[]","content"],u)}const s=x(t,["config"]);s!=null&&NB(s,e);const a=x(t,["model"]);return a!==void 0&&A(e,["requests[]","model"],Dn(i,a)),e}function LB(i,t){const e={},n=x(t,["model"]);n!=null&&A(e,["_url","model"],Dn(i,n));const r=x(t,["contents"]);if(r!=null){let a=KE(i,r);Array.isArray(a)&&(a=a.map(u=>u)),A(e,["instances[]","content"],a)}const s=x(t,["config"]);return s!=null&&RB(s,e),e}function MB(i){const t={},e=x(i,["sdkHttpResponse"]);e!=null&&A(t,["sdkHttpResponse"],e);const n=x(i,["embeddings"]);if(n!=null){let s=n;Array.isArray(s)&&(s=s.map(a=>a)),A(t,["embeddings"],s)}const r=x(i,["metadata"]);return r!=null&&A(t,["metadata"],r),t}function IB(i){const t={},e=x(i,["sdkHttpResponse"]);e!=null&&A(t,["sdkHttpResponse"],e);const n=x(i,["predictions[]","embeddings"]);if(n!=null){let s=n;Array.isArray(s)&&(s=s.map(a=>fB(a))),A(t,["embeddings"],s)}const r=x(i,["metadata"]);return r!=null&&A(t,["metadata"],r),t}function PB(i){const t={},e=x(i,["endpoint"]);e!=null&&A(t,["name"],e);const n=x(i,["deployedModelId"]);return n!=null&&A(t,["deployedModelId"],n),t}function kB(i){const t={};if(x(i,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const e=x(i,["fileUri"]);e!=null&&A(t,["fileUri"],e);const n=x(i,["mimeType"]);return n!=null&&A(t,["mimeType"],n),t}function FB(i){const t={},e=x(i,["id"]);e!=null&&A(t,["id"],e);const n=x(i,["args"]);n!=null&&A(t,["args"],n);const r=x(i,["name"]);if(r!=null&&A(t,["name"],r),x(i,["partialArgs"])!==void 0)throw new Error("partialArgs parameter is not supported in Gemini API.");if(x(i,["willContinue"])!==void 0)throw new Error("willContinue parameter is not supported in Gemini API.");return t}function BB(i){const t={},e=x(i,["mode"]);e!=null&&A(t,["mode"],e);const n=x(i,["allowedFunctionNames"]);if(n!=null&&A(t,["allowedFunctionNames"],n),x(i,["streamFunctionCallArguments"])!==void 0)throw new Error("streamFunctionCallArguments parameter is not supported in Gemini API.");return t}function OB(i){const t={};if(x(i,["behavior"])!==void 0)throw new Error("behavior parameter is not supported in Vertex AI.");const e=x(i,["description"]);e!=null&&A(t,["description"],e);const n=x(i,["name"]);n!=null&&A(t,["name"],n);const r=x(i,["parameters"]);r!=null&&A(t,["parameters"],r);const s=x(i,["parametersJsonSchema"]);s!=null&&A(t,["parametersJsonSchema"],s);const a=x(i,["response"]);a!=null&&A(t,["response"],a);const u=x(i,["responseJsonSchema"]);return u!=null&&A(t,["responseJsonSchema"],u),t}function UB(i,t,e){const n={},r=x(t,["systemInstruction"]);e!==void 0&&r!=null&&A(e,["systemInstruction"],IA(zs(r)));const s=x(t,["temperature"]);s!=null&&A(n,["temperature"],s);const a=x(t,["topP"]);a!=null&&A(n,["topP"],a);const u=x(t,["topK"]);u!=null&&A(n,["topK"],u);const c=x(t,["candidateCount"]);c!=null&&A(n,["candidateCount"],c);const h=x(t,["maxOutputTokens"]);h!=null&&A(n,["maxOutputTokens"],h);const f=x(t,["stopSequences"]);f!=null&&A(n,["stopSequences"],f);const g=x(t,["responseLogprobs"]);g!=null&&A(n,["responseLogprobs"],g);const m=x(t,["logprobs"]);m!=null&&A(n,["logprobs"],m);const y=x(t,["presencePenalty"]);y!=null&&A(n,["presencePenalty"],y);const w=x(t,["frequencyPenalty"]);w!=null&&A(n,["frequencyPenalty"],w);const S=x(t,["seed"]);S!=null&&A(n,["seed"],S);const T=x(t,["responseMimeType"]);T!=null&&A(n,["responseMimeType"],T);const C=x(t,["responseSchema"]);C!=null&&A(n,["responseSchema"],QE(C));const D=x(t,["responseJsonSchema"]);if(D!=null&&A(n,["responseJsonSchema"],D),x(t,["routingConfig"])!==void 0)throw new Error("routingConfig parameter is not supported in Gemini API.");if(x(t,["modelSelectionConfig"])!==void 0)throw new Error("modelSelectionConfig parameter is not supported in Gemini API.");const R=x(t,["safetySettings"]);if(e!==void 0&&R!=null){let et=R;Array.isArray(et)&&(et=et.map(st=>R9(st))),A(e,["safetySettings"],et)}const I=x(t,["tools"]);if(e!==void 0&&I!=null){let et=U1(I);Array.isArray(et)&&(et=et.map(st=>F9(O1(st)))),A(e,["tools"],et)}const F=x(t,["toolConfig"]);if(e!==void 0&&F!=null&&A(e,["toolConfig"],k9(F)),x(t,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");const q=x(t,["cachedContent"]);e!==void 0&&q!=null&&A(e,["cachedContent"],Bh(i,q));const U=x(t,["responseModalities"]);U!=null&&A(n,["responseModalities"],U);const V=x(t,["mediaResolution"]);V!=null&&A(n,["mediaResolution"],V);const tt=x(t,["speechConfig"]);if(tt!=null&&A(n,["speechConfig"],ZE(tt)),x(t,["audioTimestamp"])!==void 0)throw new Error("audioTimestamp parameter is not supported in Gemini API.");const J=x(t,["thinkingConfig"]);J!=null&&A(n,["thinkingConfig"],J);const O=x(t,["imageConfig"]);O!=null&&A(n,["imageConfig"],f9(O));const G=x(t,["enableEnhancedCivicAnswers"]);return G!=null&&A(n,["enableEnhancedCivicAnswers"],G),n}function HB(i,t,e){const n={},r=x(t,["systemInstruction"]);e!==void 0&&r!=null&&A(e,["systemInstruction"],zs(r));const s=x(t,["temperature"]);s!=null&&A(n,["temperature"],s);const a=x(t,["topP"]);a!=null&&A(n,["topP"],a);const u=x(t,["topK"]);u!=null&&A(n,["topK"],u);const c=x(t,["candidateCount"]);c!=null&&A(n,["candidateCount"],c);const h=x(t,["maxOutputTokens"]);h!=null&&A(n,["maxOutputTokens"],h);const f=x(t,["stopSequences"]);f!=null&&A(n,["stopSequences"],f);const g=x(t,["responseLogprobs"]);g!=null&&A(n,["responseLogprobs"],g);const m=x(t,["logprobs"]);m!=null&&A(n,["logprobs"],m);const y=x(t,["presencePenalty"]);y!=null&&A(n,["presencePenalty"],y);const w=x(t,["frequencyPenalty"]);w!=null&&A(n,["frequencyPenalty"],w);const S=x(t,["seed"]);S!=null&&A(n,["seed"],S);const T=x(t,["responseMimeType"]);T!=null&&A(n,["responseMimeType"],T);const C=x(t,["responseSchema"]);C!=null&&A(n,["responseSchema"],QE(C));const D=x(t,["responseJsonSchema"]);D!=null&&A(n,["responseJsonSchema"],D);const R=x(t,["routingConfig"]);R!=null&&A(n,["routingConfig"],R);const I=x(t,["modelSelectionConfig"]);I!=null&&A(n,["modelConfig"],I);const F=x(t,["safetySettings"]);if(e!==void 0&&F!=null){let nt=F;Array.isArray(nt)&&(nt=nt.map(at=>at)),A(e,["safetySettings"],nt)}const q=x(t,["tools"]);if(e!==void 0&&q!=null){let nt=U1(q);Array.isArray(nt)&&(nt=nt.map(at=>eR(O1(at)))),A(e,["tools"],nt)}const U=x(t,["toolConfig"]);e!==void 0&&U!=null&&A(e,["toolConfig"],U);const V=x(t,["labels"]);e!==void 0&&V!=null&&A(e,["labels"],V);const tt=x(t,["cachedContent"]);e!==void 0&&tt!=null&&A(e,["cachedContent"],Bh(i,tt));const J=x(t,["responseModalities"]);J!=null&&A(n,["responseModalities"],J);const O=x(t,["mediaResolution"]);O!=null&&A(n,["mediaResolution"],O);const G=x(t,["speechConfig"]);G!=null&&A(n,["speechConfig"],ZE(G));const et=x(t,["audioTimestamp"]);et!=null&&A(n,["audioTimestamp"],et);const st=x(t,["thinkingConfig"]);st!=null&&A(n,["thinkingConfig"],st);const pt=x(t,["imageConfig"]);if(pt!=null&&A(n,["imageConfig"],d9(pt)),x(t,["enableEnhancedCivicAnswers"])!==void 0)throw new Error("enableEnhancedCivicAnswers parameter is not supported in Vertex AI.");return n}function v6(i,t){const e={},n=x(t,["model"]);n!=null&&A(e,["_url","model"],Dn(i,n));const r=x(t,["contents"]);if(r!=null){let a=rl(r);Array.isArray(a)&&(a=a.map(u=>IA(u))),A(e,["contents"],a)}const s=x(t,["config"]);return s!=null&&A(e,["generationConfig"],UB(i,s,e)),e}function y6(i,t){const e={},n=x(t,["model"]);n!=null&&A(e,["_url","model"],Dn(i,n));const r=x(t,["contents"]);if(r!=null){let a=rl(r);Array.isArray(a)&&(a=a.map(u=>u)),A(e,["contents"],a)}const s=x(t,["config"]);return s!=null&&A(e,["generationConfig"],HB(i,s,e)),e}function x6(i){const t={},e=x(i,["sdkHttpResponse"]);e!=null&&A(t,["sdkHttpResponse"],e);const n=x(i,["candidates"]);if(n!=null){let c=n;Array.isArray(c)&&(c=c.map(h=>lB(h))),A(t,["candidates"],c)}const r=x(i,["modelVersion"]);r!=null&&A(t,["modelVersion"],r);const s=x(i,["promptFeedback"]);s!=null&&A(t,["promptFeedback"],s);const a=x(i,["responseId"]);a!=null&&A(t,["responseId"],a);const u=x(i,["usageMetadata"]);return u!=null&&A(t,["usageMetadata"],u),t}function b6(i){const t={},e=x(i,["sdkHttpResponse"]);e!=null&&A(t,["sdkHttpResponse"],e);const n=x(i,["candidates"]);if(n!=null){let h=n;Array.isArray(h)&&(h=h.map(f=>f)),A(t,["candidates"],h)}const r=x(i,["createTime"]);r!=null&&A(t,["createTime"],r);const s=x(i,["modelVersion"]);s!=null&&A(t,["modelVersion"],s);const a=x(i,["promptFeedback"]);a!=null&&A(t,["promptFeedback"],a);const u=x(i,["responseId"]);u!=null&&A(t,["responseId"],u);const c=x(i,["usageMetadata"]);return c!=null&&A(t,["usageMetadata"],c),t}function qB(i,t){const e={};if(x(i,["outputGcsUri"])!==void 0)throw new Error("outputGcsUri parameter is not supported in Gemini API.");if(x(i,["negativePrompt"])!==void 0)throw new Error("negativePrompt parameter is not supported in Gemini API.");const n=x(i,["numberOfImages"]);t!==void 0&&n!=null&&A(t,["parameters","sampleCount"],n);const r=x(i,["aspectRatio"]);t!==void 0&&r!=null&&A(t,["parameters","aspectRatio"],r);const s=x(i,["guidanceScale"]);if(t!==void 0&&s!=null&&A(t,["parameters","guidanceScale"],s),x(i,["seed"])!==void 0)throw new Error("seed parameter is not supported in Gemini API.");const a=x(i,["safetyFilterLevel"]);t!==void 0&&a!=null&&A(t,["parameters","safetySetting"],a);const u=x(i,["personGeneration"]);t!==void 0&&u!=null&&A(t,["parameters","personGeneration"],u);const c=x(i,["includeSafetyAttributes"]);t!==void 0&&c!=null&&A(t,["parameters","includeSafetyAttributes"],c);const h=x(i,["includeRaiReason"]);t!==void 0&&h!=null&&A(t,["parameters","includeRaiReason"],h);const f=x(i,["language"]);t!==void 0&&f!=null&&A(t,["parameters","language"],f);const g=x(i,["outputMimeType"]);t!==void 0&&g!=null&&A(t,["parameters","outputOptions","mimeType"],g);const m=x(i,["outputCompressionQuality"]);if(t!==void 0&&m!=null&&A(t,["parameters","outputOptions","compressionQuality"],m),x(i,["addWatermark"])!==void 0)throw new Error("addWatermark parameter is not supported in Gemini API.");if(x(i,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");const y=x(i,["imageSize"]);if(t!==void 0&&y!=null&&A(t,["parameters","sampleImageSize"],y),x(i,["enhancePrompt"])!==void 0)throw new Error("enhancePrompt parameter is not supported in Gemini API.");return e}function zB(i,t){const e={},n=x(i,["outputGcsUri"]);t!==void 0&&n!=null&&A(t,["parameters","storageUri"],n);const r=x(i,["negativePrompt"]);t!==void 0&&r!=null&&A(t,["parameters","negativePrompt"],r);const s=x(i,["numberOfImages"]);t!==void 0&&s!=null&&A(t,["parameters","sampleCount"],s);const a=x(i,["aspectRatio"]);t!==void 0&&a!=null&&A(t,["parameters","aspectRatio"],a);const u=x(i,["guidanceScale"]);t!==void 0&&u!=null&&A(t,["parameters","guidanceScale"],u);const c=x(i,["seed"]);t!==void 0&&c!=null&&A(t,["parameters","seed"],c);const h=x(i,["safetyFilterLevel"]);t!==void 0&&h!=null&&A(t,["parameters","safetySetting"],h);const f=x(i,["personGeneration"]);t!==void 0&&f!=null&&A(t,["parameters","personGeneration"],f);const g=x(i,["includeSafetyAttributes"]);t!==void 0&&g!=null&&A(t,["parameters","includeSafetyAttributes"],g);const m=x(i,["includeRaiReason"]);t!==void 0&&m!=null&&A(t,["parameters","includeRaiReason"],m);const y=x(i,["language"]);t!==void 0&&y!=null&&A(t,["parameters","language"],y);const w=x(i,["outputMimeType"]);t!==void 0&&w!=null&&A(t,["parameters","outputOptions","mimeType"],w);const S=x(i,["outputCompressionQuality"]);t!==void 0&&S!=null&&A(t,["parameters","outputOptions","compressionQuality"],S);const T=x(i,["addWatermark"]);t!==void 0&&T!=null&&A(t,["parameters","addWatermark"],T);const C=x(i,["labels"]);t!==void 0&&C!=null&&A(t,["labels"],C);const D=x(i,["imageSize"]);t!==void 0&&D!=null&&A(t,["parameters","sampleImageSize"],D);const R=x(i,["enhancePrompt"]);return t!==void 0&&R!=null&&A(t,["parameters","enhancePrompt"],R),e}function GB(i,t){const e={},n=x(t,["model"]);n!=null&&A(e,["_url","model"],Dn(i,n));const r=x(t,["prompt"]);r!=null&&A(e,["instances[0]","prompt"],r);const s=x(t,["config"]);return s!=null&&qB(s,e),e}function VB(i,t){const e={},n=x(t,["model"]);n!=null&&A(e,["_url","model"],Dn(i,n));const r=x(t,["prompt"]);r!=null&&A(e,["instances[0]","prompt"],r);const s=x(t,["config"]);return s!=null&&zB(s,e),e}function YB(i){const t={},e=x(i,["sdkHttpResponse"]);e!=null&&A(t,["sdkHttpResponse"],e);const n=x(i,["predictions"]);if(n!=null){let s=n;Array.isArray(s)&&(s=s.map(a=>i9(a))),A(t,["generatedImages"],s)}const r=x(i,["positivePromptSafetyAttributes"]);return r!=null&&A(t,["positivePromptSafetyAttributes"],ZN(r)),t}function $B(i){const t={},e=x(i,["sdkHttpResponse"]);e!=null&&A(t,["sdkHttpResponse"],e);const n=x(i,["predictions"]);if(n!=null){let s=n;Array.isArray(s)&&(s=s.map(a=>PA(a))),A(t,["generatedImages"],s)}const r=x(i,["positivePromptSafetyAttributes"]);return r!=null&&A(t,["positivePromptSafetyAttributes"],tR(r)),t}function WB(i,t){const e={},n=x(i,["numberOfVideos"]);if(t!==void 0&&n!=null&&A(t,["parameters","sampleCount"],n),x(i,["outputGcsUri"])!==void 0)throw new Error("outputGcsUri parameter is not supported in Gemini API.");if(x(i,["fps"])!==void 0)throw new Error("fps parameter is not supported in Gemini API.");const r=x(i,["durationSeconds"]);if(t!==void 0&&r!=null&&A(t,["parameters","durationSeconds"],r),x(i,["seed"])!==void 0)throw new Error("seed parameter is not supported in Gemini API.");const s=x(i,["aspectRatio"]);t!==void 0&&s!=null&&A(t,["parameters","aspectRatio"],s);const a=x(i,["resolution"]);t!==void 0&&a!=null&&A(t,["parameters","resolution"],a);const u=x(i,["personGeneration"]);if(t!==void 0&&u!=null&&A(t,["parameters","personGeneration"],u),x(i,["pubsubTopic"])!==void 0)throw new Error("pubsubTopic parameter is not supported in Gemini API.");const c=x(i,["negativePrompt"]);t!==void 0&&c!=null&&A(t,["parameters","negativePrompt"],c);const h=x(i,["enhancePrompt"]);if(t!==void 0&&h!=null&&A(t,["parameters","enhancePrompt"],h),x(i,["generateAudio"])!==void 0)throw new Error("generateAudio parameter is not supported in Gemini API.");const f=x(i,["lastFrame"]);t!==void 0&&f!=null&&A(t,["instances[0]","lastFrame"],kA(f));const g=x(i,["referenceImages"]);if(t!==void 0&&g!=null){let m=g;Array.isArray(m)&&(m=m.map(y=>j9(y))),A(t,["instances[0]","referenceImages"],m)}if(x(i,["mask"])!==void 0)throw new Error("mask parameter is not supported in Gemini API.");if(x(i,["compressionQuality"])!==void 0)throw new Error("compressionQuality parameter is not supported in Gemini API.");return e}function XB(i,t){const e={},n=x(i,["numberOfVideos"]);t!==void 0&&n!=null&&A(t,["parameters","sampleCount"],n);const r=x(i,["outputGcsUri"]);t!==void 0&&r!=null&&A(t,["parameters","storageUri"],r);const s=x(i,["fps"]);t!==void 0&&s!=null&&A(t,["parameters","fps"],s);const a=x(i,["durationSeconds"]);t!==void 0&&a!=null&&A(t,["parameters","durationSeconds"],a);const u=x(i,["seed"]);t!==void 0&&u!=null&&A(t,["parameters","seed"],u);const c=x(i,["aspectRatio"]);t!==void 0&&c!=null&&A(t,["parameters","aspectRatio"],c);const h=x(i,["resolution"]);t!==void 0&&h!=null&&A(t,["parameters","resolution"],h);const f=x(i,["personGeneration"]);t!==void 0&&f!=null&&A(t,["parameters","personGeneration"],f);const g=x(i,["pubsubTopic"]);t!==void 0&&g!=null&&A(t,["parameters","pubsubTopic"],g);const m=x(i,["negativePrompt"]);t!==void 0&&m!=null&&A(t,["parameters","negativePrompt"],m);const y=x(i,["enhancePrompt"]);t!==void 0&&y!=null&&A(t,["parameters","enhancePrompt"],y);const w=x(i,["generateAudio"]);t!==void 0&&w!=null&&A(t,["parameters","generateAudio"],w);const S=x(i,["lastFrame"]);t!==void 0&&S!=null&&A(t,["instances[0]","lastFrame"],Jl(S));const T=x(i,["referenceImages"]);if(t!==void 0&&T!=null){let R=T;Array.isArray(R)&&(R=R.map(I=>J9(I))),A(t,["instances[0]","referenceImages"],R)}const C=x(i,["mask"]);t!==void 0&&C!=null&&A(t,["instances[0]","mask"],X9(C));const D=x(i,["compressionQuality"]);return t!==void 0&&D!=null&&A(t,["parameters","compressionQuality"],D),e}function jB(i){const t={},e=x(i,["name"]);e!=null&&A(t,["name"],e);const n=x(i,["metadata"]);n!=null&&A(t,["metadata"],n);const r=x(i,["done"]);r!=null&&A(t,["done"],r);const s=x(i,["error"]);s!=null&&A(t,["error"],s);const a=x(i,["response","generateVideoResponse"]);return a!=null&&A(t,["response"],ZB(a)),t}function JB(i){const t={},e=x(i,["name"]);e!=null&&A(t,["name"],e);const n=x(i,["metadata"]);n!=null&&A(t,["metadata"],n);const r=x(i,["done"]);r!=null&&A(t,["done"],r);const s=x(i,["error"]);s!=null&&A(t,["error"],s);const a=x(i,["response"]);return a!=null&&A(t,["response"],t9(a)),t}function KB(i,t){const e={},n=x(t,["model"]);n!=null&&A(e,["_url","model"],Dn(i,n));const r=x(t,["prompt"]);r!=null&&A(e,["instances[0]","prompt"],r);const s=x(t,["image"]);s!=null&&A(e,["instances[0]","image"],kA(s));const a=x(t,["video"]);a!=null&&A(e,["instances[0]","video"],nR(a));const u=x(t,["source"]);u!=null&&e9(u,e);const c=x(t,["config"]);return c!=null&&WB(c,e),e}function QB(i,t){const e={},n=x(t,["model"]);n!=null&&A(e,["_url","model"],Dn(i,n));const r=x(t,["prompt"]);r!=null&&A(e,["instances[0]","prompt"],r);const s=x(t,["image"]);s!=null&&A(e,["instances[0]","image"],Jl(s));const a=x(t,["video"]);a!=null&&A(e,["instances[0]","video"],iR(a));const u=x(t,["source"]);u!=null&&n9(u,e);const c=x(t,["config"]);return c!=null&&XB(c,e),e}function ZB(i){const t={},e=x(i,["generatedSamples"]);if(e!=null){let s=e;Array.isArray(s)&&(s=s.map(a=>s9(a))),A(t,["generatedVideos"],s)}const n=x(i,["raiMediaFilteredCount"]);n!=null&&A(t,["raiMediaFilteredCount"],n);const r=x(i,["raiMediaFilteredReasons"]);return r!=null&&A(t,["raiMediaFilteredReasons"],r),t}function t9(i){const t={},e=x(i,["videos"]);if(e!=null){let s=e;Array.isArray(s)&&(s=s.map(a=>o9(a))),A(t,["generatedVideos"],s)}const n=x(i,["raiMediaFilteredCount"]);n!=null&&A(t,["raiMediaFilteredCount"],n);const r=x(i,["raiMediaFilteredReasons"]);return r!=null&&A(t,["raiMediaFilteredReasons"],r),t}function e9(i,t){const e={},n=x(i,["prompt"]);t!==void 0&&n!=null&&A(t,["instances[0]","prompt"],n);const r=x(i,["image"]);t!==void 0&&r!=null&&A(t,["instances[0]","image"],kA(r));const s=x(i,["video"]);return t!==void 0&&s!=null&&A(t,["instances[0]","video"],nR(s)),e}function n9(i,t){const e={},n=x(i,["prompt"]);t!==void 0&&n!=null&&A(t,["instances[0]","prompt"],n);const r=x(i,["image"]);t!==void 0&&r!=null&&A(t,["instances[0]","image"],Jl(r));const s=x(i,["video"]);return t!==void 0&&s!=null&&A(t,["instances[0]","video"],iR(s)),e}function i9(i){const t={},e=x(i,["_self"]);e!=null&&A(t,["image"],p9(e));const n=x(i,["raiFilteredReason"]);n!=null&&A(t,["raiFilteredReason"],n);const r=x(i,["_self"]);return r!=null&&A(t,["safetyAttributes"],ZN(r)),t}function PA(i){const t={},e=x(i,["_self"]);e!=null&&A(t,["image"],QN(e));const n=x(i,["raiFilteredReason"]);n!=null&&A(t,["raiFilteredReason"],n);const r=x(i,["_self"]);r!=null&&A(t,["safetyAttributes"],tR(r));const s=x(i,["prompt"]);return s!=null&&A(t,["enhancedPrompt"],s),t}function r9(i){const t={},e=x(i,["_self"]);e!=null&&A(t,["mask"],QN(e));const n=x(i,["labels"]);if(n!=null){let r=n;Array.isArray(r)&&(r=r.map(s=>s)),A(t,["labels"],r)}return t}function s9(i){const t={},e=x(i,["video"]);return e!=null&&A(t,["video"],$9(e)),t}function o9(i){const t={},e=x(i,["_self"]);return e!=null&&A(t,["video"],W9(e)),t}function a9(i){const t={},e=x(i,["modelSelectionConfig"]);e!=null&&A(t,["modelConfig"],e);const n=x(i,["responseJsonSchema"]);n!=null&&A(t,["responseJsonSchema"],n);const r=x(i,["audioTimestamp"]);r!=null&&A(t,["audioTimestamp"],r);const s=x(i,["candidateCount"]);s!=null&&A(t,["candidateCount"],s);const a=x(i,["enableAffectiveDialog"]);a!=null&&A(t,["enableAffectiveDialog"],a);const u=x(i,["frequencyPenalty"]);u!=null&&A(t,["frequencyPenalty"],u);const c=x(i,["logprobs"]);c!=null&&A(t,["logprobs"],c);const h=x(i,["maxOutputTokens"]);h!=null&&A(t,["maxOutputTokens"],h);const f=x(i,["mediaResolution"]);f!=null&&A(t,["mediaResolution"],f);const g=x(i,["presencePenalty"]);g!=null&&A(t,["presencePenalty"],g);const m=x(i,["responseLogprobs"]);m!=null&&A(t,["responseLogprobs"],m);const y=x(i,["responseMimeType"]);y!=null&&A(t,["responseMimeType"],y);const w=x(i,["responseModalities"]);w!=null&&A(t,["responseModalities"],w);const S=x(i,["responseSchema"]);S!=null&&A(t,["responseSchema"],S);const T=x(i,["routingConfig"]);T!=null&&A(t,["routingConfig"],T);const C=x(i,["seed"]);C!=null&&A(t,["seed"],C);const D=x(i,["speechConfig"]);D!=null&&A(t,["speechConfig"],D);const R=x(i,["stopSequences"]);R!=null&&A(t,["stopSequences"],R);const I=x(i,["temperature"]);I!=null&&A(t,["temperature"],I);const F=x(i,["thinkingConfig"]);F!=null&&A(t,["thinkingConfig"],F);const q=x(i,["topK"]);q!=null&&A(t,["topK"],q);const U=x(i,["topP"]);if(U!=null&&A(t,["topP"],U),x(i,["enableEnhancedCivicAnswers"])!==void 0)throw new Error("enableEnhancedCivicAnswers parameter is not supported in Vertex AI.");return t}function l9(i,t){const e={},n=x(t,["model"]);return n!=null&&A(e,["_url","name"],Dn(i,n)),e}function u9(i,t){const e={},n=x(t,["model"]);return n!=null&&A(e,["_url","name"],Dn(i,n)),e}function c9(i){const t={};if(x(i,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const e=x(i,["enableWidget"]);return e!=null&&A(t,["enableWidget"],e),t}function h9(i){const t={};if(x(i,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(x(i,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");const e=x(i,["timeRangeFilter"]);return e!=null&&A(t,["timeRangeFilter"],e),t}function f9(i){const t={},e=x(i,["aspectRatio"]);e!=null&&A(t,["aspectRatio"],e);const n=x(i,["imageSize"]);if(n!=null&&A(t,["imageSize"],n),x(i,["outputMimeType"])!==void 0)throw new Error("outputMimeType parameter is not supported in Gemini API.");if(x(i,["outputCompressionQuality"])!==void 0)throw new Error("outputCompressionQuality parameter is not supported in Gemini API.");return t}function d9(i){const t={},e=x(i,["aspectRatio"]);e!=null&&A(t,["aspectRatio"],e);const n=x(i,["imageSize"]);n!=null&&A(t,["imageSize"],n);const r=x(i,["outputMimeType"]);r!=null&&A(t,["imageOutputOptions","mimeType"],r);const s=x(i,["outputCompressionQuality"]);return s!=null&&A(t,["imageOutputOptions","compressionQuality"],s),t}function p9(i){const t={},e=x(i,["bytesBase64Encoded"]);e!=null&&A(t,["imageBytes"],Ld(e));const n=x(i,["mimeType"]);return n!=null&&A(t,["mimeType"],n),t}function QN(i){const t={},e=x(i,["gcsUri"]);e!=null&&A(t,["gcsUri"],e);const n=x(i,["bytesBase64Encoded"]);n!=null&&A(t,["imageBytes"],Ld(n));const r=x(i,["mimeType"]);return r!=null&&A(t,["mimeType"],r),t}function kA(i){const t={};if(x(i,["gcsUri"])!==void 0)throw new Error("gcsUri parameter is not supported in Gemini API.");const e=x(i,["imageBytes"]);e!=null&&A(t,["bytesBase64Encoded"],Ld(e));const n=x(i,["mimeType"]);return n!=null&&A(t,["mimeType"],n),t}function Jl(i){const t={},e=x(i,["gcsUri"]);e!=null&&A(t,["gcsUri"],e);const n=x(i,["imageBytes"]);n!=null&&A(t,["bytesBase64Encoded"],Ld(n));const r=x(i,["mimeType"]);return r!=null&&A(t,["mimeType"],r),t}function g9(i,t,e){const n={},r=x(t,["pageSize"]);e!==void 0&&r!=null&&A(e,["_query","pageSize"],r);const s=x(t,["pageToken"]);e!==void 0&&s!=null&&A(e,["_query","pageToken"],s);const a=x(t,["filter"]);e!==void 0&&a!=null&&A(e,["_query","filter"],a);const u=x(t,["queryBase"]);return e!==void 0&&u!=null&&A(e,["_url","models_url"],YN(i,u)),n}function m9(i,t,e){const n={},r=x(t,["pageSize"]);e!==void 0&&r!=null&&A(e,["_query","pageSize"],r);const s=x(t,["pageToken"]);e!==void 0&&s!=null&&A(e,["_query","pageToken"],s);const a=x(t,["filter"]);e!==void 0&&a!=null&&A(e,["_query","filter"],a);const u=x(t,["queryBase"]);return e!==void 0&&u!=null&&A(e,["_url","models_url"],YN(i,u)),n}function v9(i,t){const e={},n=x(t,["config"]);return n!=null&&g9(i,n,e),e}function y9(i,t){const e={},n=x(t,["config"]);return n!=null&&m9(i,n,e),e}function x9(i){const t={},e=x(i,["sdkHttpResponse"]);e!=null&&A(t,["sdkHttpResponse"],e);const n=x(i,["nextPageToken"]);n!=null&&A(t,["nextPageToken"],n);const r=x(i,["_self"]);if(r!=null){let s=$N(r);Array.isArray(s)&&(s=s.map(a=>$w(a))),A(t,["models"],s)}return t}function b9(i){const t={},e=x(i,["sdkHttpResponse"]);e!=null&&A(t,["sdkHttpResponse"],e);const n=x(i,["nextPageToken"]);n!=null&&A(t,["nextPageToken"],n);const r=x(i,["_self"]);if(r!=null){let s=$N(r);Array.isArray(s)&&(s=s.map(a=>Ww(a))),A(t,["models"],s)}return t}function A9(i){const t={},e=x(i,["maskMode"]);e!=null&&A(t,["maskMode"],e);const n=x(i,["segmentationClasses"]);n!=null&&A(t,["maskClasses"],n);const r=x(i,["maskDilation"]);return r!=null&&A(t,["dilation"],r),t}function $w(i){const t={},e=x(i,["name"]);e!=null&&A(t,["name"],e);const n=x(i,["displayName"]);n!=null&&A(t,["displayName"],n);const r=x(i,["description"]);r!=null&&A(t,["description"],r);const s=x(i,["version"]);s!=null&&A(t,["version"],s);const a=x(i,["_self"]);a!=null&&A(t,["tunedModelInfo"],B9(a));const u=x(i,["inputTokenLimit"]);u!=null&&A(t,["inputTokenLimit"],u);const c=x(i,["outputTokenLimit"]);c!=null&&A(t,["outputTokenLimit"],c);const h=x(i,["supportedGenerationMethods"]);h!=null&&A(t,["supportedActions"],h);const f=x(i,["temperature"]);f!=null&&A(t,["temperature"],f);const g=x(i,["maxTemperature"]);g!=null&&A(t,["maxTemperature"],g);const m=x(i,["topP"]);m!=null&&A(t,["topP"],m);const y=x(i,["topK"]);y!=null&&A(t,["topK"],y);const w=x(i,["thinking"]);return w!=null&&A(t,["thinking"],w),t}function Ww(i){const t={},e=x(i,["name"]);e!=null&&A(t,["name"],e);const n=x(i,["displayName"]);n!=null&&A(t,["displayName"],n);const r=x(i,["description"]);r!=null&&A(t,["description"],r);const s=x(i,["versionId"]);s!=null&&A(t,["version"],s);const a=x(i,["deployedModels"]);if(a!=null){let g=a;Array.isArray(g)&&(g=g.map(m=>PB(m))),A(t,["endpoints"],g)}const u=x(i,["labels"]);u!=null&&A(t,["labels"],u);const c=x(i,["_self"]);c!=null&&A(t,["tunedModelInfo"],O9(c));const h=x(i,["defaultCheckpointId"]);h!=null&&A(t,["defaultCheckpointId"],h);const f=x(i,["checkpoints"]);if(f!=null){let g=f;Array.isArray(g)&&(g=g.map(m=>m)),A(t,["checkpoints"],g)}return t}function _9(i){const t={},e=x(i,["mediaResolution"]);e!=null&&A(t,["mediaResolution"],e);const n=x(i,["codeExecutionResult"]);n!=null&&A(t,["codeExecutionResult"],n);const r=x(i,["executableCode"]);r!=null&&A(t,["executableCode"],r);const s=x(i,["fileData"]);s!=null&&A(t,["fileData"],kB(s));const a=x(i,["functionCall"]);a!=null&&A(t,["functionCall"],FB(a));const u=x(i,["functionResponse"]);u!=null&&A(t,["functionResponse"],u);const c=x(i,["inlineData"]);c!=null&&A(t,["inlineData"],aB(c));const h=x(i,["text"]);h!=null&&A(t,["text"],h);const f=x(i,["thought"]);f!=null&&A(t,["thought"],f);const g=x(i,["thoughtSignature"]);g!=null&&A(t,["thoughtSignature"],g);const m=x(i,["videoMetadata"]);return m!=null&&A(t,["videoMetadata"],m),t}function w9(i){const t={},e=x(i,["productImage"]);return e!=null&&A(t,["image"],Jl(e)),t}function S9(i,t){const e={},n=x(i,["numberOfImages"]);t!==void 0&&n!=null&&A(t,["parameters","sampleCount"],n);const r=x(i,["baseSteps"]);t!==void 0&&r!=null&&A(t,["parameters","baseSteps"],r);const s=x(i,["outputGcsUri"]);t!==void 0&&s!=null&&A(t,["parameters","storageUri"],s);const a=x(i,["seed"]);t!==void 0&&a!=null&&A(t,["parameters","seed"],a);const u=x(i,["safetyFilterLevel"]);t!==void 0&&u!=null&&A(t,["parameters","safetySetting"],u);const c=x(i,["personGeneration"]);t!==void 0&&c!=null&&A(t,["parameters","personGeneration"],c);const h=x(i,["addWatermark"]);t!==void 0&&h!=null&&A(t,["parameters","addWatermark"],h);const f=x(i,["outputMimeType"]);t!==void 0&&f!=null&&A(t,["parameters","outputOptions","mimeType"],f);const g=x(i,["outputCompressionQuality"]);t!==void 0&&g!=null&&A(t,["parameters","outputOptions","compressionQuality"],g);const m=x(i,["enhancePrompt"]);t!==void 0&&m!=null&&A(t,["parameters","enhancePrompt"],m);const y=x(i,["labels"]);return t!==void 0&&y!=null&&A(t,["labels"],y),e}function E9(i,t){const e={},n=x(t,["model"]);n!=null&&A(e,["_url","model"],Dn(i,n));const r=x(t,["source"]);r!=null&&T9(r,e);const s=x(t,["config"]);return s!=null&&S9(s,e),e}function C9(i){const t={},e=x(i,["predictions"]);if(e!=null){let n=e;Array.isArray(n)&&(n=n.map(r=>PA(r))),A(t,["generatedImages"],n)}return t}function T9(i,t){const e={},n=x(i,["prompt"]);t!==void 0&&n!=null&&A(t,["instances[0]","prompt"],n);const r=x(i,["personImage"]);t!==void 0&&r!=null&&A(t,["instances[0]","personImage","image"],Jl(r));const s=x(i,["productImages"]);if(t!==void 0&&s!=null){let a=s;Array.isArray(a)&&(a=a.map(u=>w9(u))),A(t,["instances[0]","productImages"],a)}return e}function N9(i){const t={},e=x(i,["referenceImage"]);e!=null&&A(t,["referenceImage"],Jl(e));const n=x(i,["referenceId"]);n!=null&&A(t,["referenceId"],n);const r=x(i,["referenceType"]);r!=null&&A(t,["referenceType"],r);const s=x(i,["maskImageConfig"]);s!=null&&A(t,["maskImageConfig"],A9(s));const a=x(i,["controlImageConfig"]);a!=null&&A(t,["controlImageConfig"],pB(a));const u=x(i,["styleImageConfig"]);u!=null&&A(t,["styleImageConfig"],u);const c=x(i,["subjectImageConfig"]);return c!=null&&A(t,["subjectImageConfig"],c),t}function ZN(i){const t={},e=x(i,["safetyAttributes","categories"]);e!=null&&A(t,["categories"],e);const n=x(i,["safetyAttributes","scores"]);n!=null&&A(t,["scores"],n);const r=x(i,["contentType"]);return r!=null&&A(t,["contentType"],r),t}function tR(i){const t={},e=x(i,["safetyAttributes","categories"]);e!=null&&A(t,["categories"],e);const n=x(i,["safetyAttributes","scores"]);n!=null&&A(t,["scores"],n);const r=x(i,["contentType"]);return r!=null&&A(t,["contentType"],r),t}function R9(i){const t={},e=x(i,["category"]);if(e!=null&&A(t,["category"],e),x(i,["method"])!==void 0)throw new Error("method parameter is not supported in Gemini API.");const n=x(i,["threshold"]);return n!=null&&A(t,["threshold"],n),t}function D9(i){const t={},e=x(i,["image"]);return e!=null&&A(t,["image"],Jl(e)),t}function L9(i,t){const e={},n=x(i,["mode"]);t!==void 0&&n!=null&&A(t,["parameters","mode"],n);const r=x(i,["maxPredictions"]);t!==void 0&&r!=null&&A(t,["parameters","maxPredictions"],r);const s=x(i,["confidenceThreshold"]);t!==void 0&&s!=null&&A(t,["parameters","confidenceThreshold"],s);const a=x(i,["maskDilation"]);t!==void 0&&a!=null&&A(t,["parameters","maskDilation"],a);const u=x(i,["binaryColorThreshold"]);t!==void 0&&u!=null&&A(t,["parameters","binaryColorThreshold"],u);const c=x(i,["labels"]);return t!==void 0&&c!=null&&A(t,["labels"],c),e}function M9(i,t){const e={},n=x(t,["model"]);n!=null&&A(e,["_url","model"],Dn(i,n));const r=x(t,["source"]);r!=null&&P9(r,e);const s=x(t,["config"]);return s!=null&&L9(s,e),e}function I9(i){const t={},e=x(i,["predictions"]);if(e!=null){let n=e;Array.isArray(n)&&(n=n.map(r=>r9(r))),A(t,["generatedMasks"],n)}return t}function P9(i,t){const e={},n=x(i,["prompt"]);t!==void 0&&n!=null&&A(t,["instances[0]","prompt"],n);const r=x(i,["image"]);t!==void 0&&r!=null&&A(t,["instances[0]","image"],Jl(r));const s=x(i,["scribbleImage"]);return t!==void 0&&s!=null&&A(t,["instances[0]","scribble"],D9(s)),e}function k9(i){const t={},e=x(i,["functionCallingConfig"]);e!=null&&A(t,["functionCallingConfig"],BB(e));const n=x(i,["retrievalConfig"]);return n!=null&&A(t,["retrievalConfig"],n),t}function F9(i){const t={},e=x(i,["functionDeclarations"]);if(e!=null){let f=e;Array.isArray(f)&&(f=f.map(g=>g)),A(t,["functionDeclarations"],f)}if(x(i,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const n=x(i,["googleSearchRetrieval"]);n!=null&&A(t,["googleSearchRetrieval"],n);const r=x(i,["computerUse"]);r!=null&&A(t,["computerUse"],r);const s=x(i,["fileSearch"]);s!=null&&A(t,["fileSearch"],s);const a=x(i,["codeExecution"]);if(a!=null&&A(t,["codeExecution"],a),x(i,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const u=x(i,["googleMaps"]);u!=null&&A(t,["googleMaps"],c9(u));const c=x(i,["googleSearch"]);c!=null&&A(t,["googleSearch"],h9(c));const h=x(i,["urlContext"]);return h!=null&&A(t,["urlContext"],h),t}function eR(i){const t={},e=x(i,["functionDeclarations"]);if(e!=null){let g=e;Array.isArray(g)&&(g=g.map(m=>OB(m))),A(t,["functionDeclarations"],g)}const n=x(i,["retrieval"]);n!=null&&A(t,["retrieval"],n);const r=x(i,["googleSearchRetrieval"]);r!=null&&A(t,["googleSearchRetrieval"],r);const s=x(i,["computerUse"]);if(s!=null&&A(t,["computerUse"],s),x(i,["fileSearch"])!==void 0)throw new Error("fileSearch parameter is not supported in Vertex AI.");const a=x(i,["codeExecution"]);a!=null&&A(t,["codeExecution"],a);const u=x(i,["enterpriseWebSearch"]);u!=null&&A(t,["enterpriseWebSearch"],u);const c=x(i,["googleMaps"]);c!=null&&A(t,["googleMaps"],c);const h=x(i,["googleSearch"]);h!=null&&A(t,["googleSearch"],h);const f=x(i,["urlContext"]);return f!=null&&A(t,["urlContext"],f),t}function B9(i){const t={},e=x(i,["baseModel"]);e!=null&&A(t,["baseModel"],e);const n=x(i,["createTime"]);n!=null&&A(t,["createTime"],n);const r=x(i,["updateTime"]);return r!=null&&A(t,["updateTime"],r),t}function O9(i){const t={},e=x(i,["labels","google-vertex-llm-tuning-base-model-id"]);e!=null&&A(t,["baseModel"],e);const n=x(i,["createTime"]);n!=null&&A(t,["createTime"],n);const r=x(i,["updateTime"]);return r!=null&&A(t,["updateTime"],r),t}function U9(i,t){const e={},n=x(i,["displayName"]);t!==void 0&&n!=null&&A(t,["displayName"],n);const r=x(i,["description"]);t!==void 0&&r!=null&&A(t,["description"],r);const s=x(i,["defaultCheckpointId"]);return t!==void 0&&s!=null&&A(t,["defaultCheckpointId"],s),e}function H9(i,t){const e={},n=x(i,["displayName"]);t!==void 0&&n!=null&&A(t,["displayName"],n);const r=x(i,["description"]);t!==void 0&&r!=null&&A(t,["description"],r);const s=x(i,["defaultCheckpointId"]);return t!==void 0&&s!=null&&A(t,["defaultCheckpointId"],s),e}function q9(i,t){const e={},n=x(t,["model"]);n!=null&&A(e,["_url","name"],Dn(i,n));const r=x(t,["config"]);return r!=null&&U9(r,e),e}function z9(i,t){const e={},n=x(t,["model"]);n!=null&&A(e,["_url","model"],Dn(i,n));const r=x(t,["config"]);return r!=null&&H9(r,e),e}function G9(i,t){const e={},n=x(i,["outputGcsUri"]);t!==void 0&&n!=null&&A(t,["parameters","storageUri"],n);const r=x(i,["safetyFilterLevel"]);t!==void 0&&r!=null&&A(t,["parameters","safetySetting"],r);const s=x(i,["personGeneration"]);t!==void 0&&s!=null&&A(t,["parameters","personGeneration"],s);const a=x(i,["includeRaiReason"]);t!==void 0&&a!=null&&A(t,["parameters","includeRaiReason"],a);const u=x(i,["outputMimeType"]);t!==void 0&&u!=null&&A(t,["parameters","outputOptions","mimeType"],u);const c=x(i,["outputCompressionQuality"]);t!==void 0&&c!=null&&A(t,["parameters","outputOptions","compressionQuality"],c);const h=x(i,["enhanceInputImage"]);t!==void 0&&h!=null&&A(t,["parameters","upscaleConfig","enhanceInputImage"],h);const f=x(i,["imagePreservationFactor"]);t!==void 0&&f!=null&&A(t,["parameters","upscaleConfig","imagePreservationFactor"],f);const g=x(i,["labels"]);t!==void 0&&g!=null&&A(t,["labels"],g);const m=x(i,["numberOfImages"]);t!==void 0&&m!=null&&A(t,["parameters","sampleCount"],m);const y=x(i,["mode"]);return t!==void 0&&y!=null&&A(t,["parameters","mode"],y),e}function V9(i,t){const e={},n=x(t,["model"]);n!=null&&A(e,["_url","model"],Dn(i,n));const r=x(t,["image"]);r!=null&&A(e,["instances[0]","image"],Jl(r));const s=x(t,["upscaleFactor"]);s!=null&&A(e,["parameters","upscaleConfig","upscaleFactor"],s);const a=x(t,["config"]);return a!=null&&G9(a,e),e}function Y9(i){const t={},e=x(i,["sdkHttpResponse"]);e!=null&&A(t,["sdkHttpResponse"],e);const n=x(i,["predictions"]);if(n!=null){let r=n;Array.isArray(r)&&(r=r.map(s=>PA(s))),A(t,["generatedImages"],r)}return t}function $9(i){const t={},e=x(i,["uri"]);e!=null&&A(t,["uri"],e);const n=x(i,["encodedVideo"]);n!=null&&A(t,["videoBytes"],Ld(n));const r=x(i,["encoding"]);return r!=null&&A(t,["mimeType"],r),t}function W9(i){const t={},e=x(i,["gcsUri"]);e!=null&&A(t,["uri"],e);const n=x(i,["bytesBase64Encoded"]);n!=null&&A(t,["videoBytes"],Ld(n));const r=x(i,["mimeType"]);return r!=null&&A(t,["mimeType"],r),t}function X9(i){const t={},e=x(i,["image"]);e!=null&&A(t,["_self"],Jl(e));const n=x(i,["maskMode"]);return n!=null&&A(t,["maskMode"],n),t}function j9(i){const t={},e=x(i,["image"]);e!=null&&A(t,["image"],kA(e));const n=x(i,["referenceType"]);return n!=null&&A(t,["referenceType"],n),t}function J9(i){const t={},e=x(i,["image"]);e!=null&&A(t,["image"],Jl(e));const n=x(i,["referenceType"]);return n!=null&&A(t,["referenceType"],n),t}function nR(i){const t={},e=x(i,["uri"]);e!=null&&A(t,["uri"],e);const n=x(i,["videoBytes"]);n!=null&&A(t,["encodedVideo"],Ld(n));const r=x(i,["mimeType"]);return r!=null&&A(t,["encoding"],r),t}function iR(i){const t={},e=x(i,["uri"]);e!=null&&A(t,["gcsUri"],e);const n=x(i,["videoBytes"]);n!=null&&A(t,["bytesBase64Encoded"],Ld(n));const r=x(i,["mimeType"]);return r!=null&&A(t,["mimeType"],r),t}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function K9(i,t){const e={},n=x(i,["displayName"]);return t!==void 0&&n!=null&&A(t,["displayName"],n),e}function Q9(i){const t={},e=x(i,["config"]);return e!=null&&K9(e,t),t}function Z9(i,t){const e={},n=x(i,["force"]);return t!==void 0&&n!=null&&A(t,["_query","force"],n),e}function tO(i){const t={},e=x(i,["name"]);e!=null&&A(t,["_url","name"],e);const n=x(i,["config"]);return n!=null&&Z9(n,t),t}function eO(i){const t={},e=x(i,["name"]);return e!=null&&A(t,["_url","name"],e),t}function nO(i,t){const e={},n=x(i,["customMetadata"]);if(t!==void 0&&n!=null){let s=n;Array.isArray(s)&&(s=s.map(a=>a)),A(t,["customMetadata"],s)}const r=x(i,["chunkingConfig"]);return t!==void 0&&r!=null&&A(t,["chunkingConfig"],r),e}function iO(i){const t={},e=x(i,["name"]);e!=null&&A(t,["name"],e);const n=x(i,["metadata"]);n!=null&&A(t,["metadata"],n);const r=x(i,["done"]);r!=null&&A(t,["done"],r);const s=x(i,["error"]);s!=null&&A(t,["error"],s);const a=x(i,["response"]);return a!=null&&A(t,["response"],sO(a)),t}function rO(i){const t={},e=x(i,["fileSearchStoreName"]);e!=null&&A(t,["_url","file_search_store_name"],e);const n=x(i,["fileName"]);n!=null&&A(t,["fileName"],n);const r=x(i,["config"]);return r!=null&&nO(r,t),t}function sO(i){const t={},e=x(i,["sdkHttpResponse"]);e!=null&&A(t,["sdkHttpResponse"],e);const n=x(i,["parent"]);n!=null&&A(t,["parent"],n);const r=x(i,["documentName"]);return r!=null&&A(t,["documentName"],r),t}function oO(i,t){const e={},n=x(i,["pageSize"]);t!==void 0&&n!=null&&A(t,["_query","pageSize"],n);const r=x(i,["pageToken"]);return t!==void 0&&r!=null&&A(t,["_query","pageToken"],r),e}function aO(i){const t={},e=x(i,["config"]);return e!=null&&oO(e,t),t}function lO(i){const t={},e=x(i,["sdkHttpResponse"]);e!=null&&A(t,["sdkHttpResponse"],e);const n=x(i,["nextPageToken"]);n!=null&&A(t,["nextPageToken"],n);const r=x(i,["fileSearchStores"]);if(r!=null){let s=r;Array.isArray(s)&&(s=s.map(a=>a)),A(t,["fileSearchStores"],s)}return t}function rR(i,t){const e={},n=x(i,["mimeType"]);t!==void 0&&n!=null&&A(t,["mimeType"],n);const r=x(i,["displayName"]);t!==void 0&&r!=null&&A(t,["displayName"],r);const s=x(i,["customMetadata"]);if(t!==void 0&&s!=null){let u=s;Array.isArray(u)&&(u=u.map(c=>c)),A(t,["customMetadata"],u)}const a=x(i,["chunkingConfig"]);return t!==void 0&&a!=null&&A(t,["chunkingConfig"],a),e}function uO(i){const t={},e=x(i,["fileSearchStoreName"]);e!=null&&A(t,["_url","file_search_store_name"],e);const n=x(i,["config"]);return n!=null&&rR(n,t),t}function cO(i){const t={},e=x(i,["sdkHttpResponse"]);return e!=null&&A(t,["sdkHttpResponse"],e),t}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const hO="Content-Type",fO="X-Server-Timeout",dO="User-Agent",Xw="x-goog-api-client",pO="1.34.0",gO=`google-genai-sdk/${pO}`,mO="v1beta1",vO="v1beta";class yO{constructor(t){var e,n;this.clientOptions=Object.assign(Object.assign({},t),{project:t.project,location:t.location,apiKey:t.apiKey,vertexai:t.vertexai});const r={};this.clientOptions.vertexai?(r.apiVersion=(e=this.clientOptions.apiVersion)!==null&&e!==void 0?e:mO,r.baseUrl=this.baseUrlFromProjectLocation(),this.normalizeAuthParameters()):(r.apiVersion=(n=this.clientOptions.apiVersion)!==null&&n!==void 0?n:vO,r.baseUrl="https://generativelanguage.googleapis.com/"),r.headers=this.getDefaultHeaders(),this.clientOptions.httpOptions=r,t.httpOptions&&(this.clientOptions.httpOptions=this.patchHttpOptions(r,t.httpOptions))}baseUrlFromProjectLocation(){return this.clientOptions.project&&this.clientOptions.location&&this.clientOptions.location!=="global"?`https://${this.clientOptions.location}-aiplatform.googleapis.com/`:"https://aiplatform.googleapis.com/"}normalizeAuthParameters(){if(this.clientOptions.project&&this.clientOptions.location){this.clientOptions.apiKey=void 0;return}this.clientOptions.project=void 0,this.clientOptions.location=void 0}isVertexAI(){var t;return(t=this.clientOptions.vertexai)!==null&&t!==void 0?t:!1}getProject(){return this.clientOptions.project}getLocation(){return this.clientOptions.location}async getAuthHeaders(){const t=new Headers;return await this.clientOptions.auth.addAuthHeaders(t),t}getApiVersion(){if(this.clientOptions.httpOptions&&this.clientOptions.httpOptions.apiVersion!==void 0)return this.clientOptions.httpOptions.apiVersion;throw new Error("API version is not set.")}getBaseUrl(){if(this.clientOptions.httpOptions&&this.clientOptions.httpOptions.baseUrl!==void 0)return this.clientOptions.httpOptions.baseUrl;throw new Error("Base URL is not set.")}getRequestUrl(){return this.getRequestUrlInternal(this.clientOptions.httpOptions)}getHeaders(){if(this.clientOptions.httpOptions&&this.clientOptions.httpOptions.headers!==void 0)return this.clientOptions.httpOptions.headers;throw new Error("Headers are not set.")}getRequestUrlInternal(t){if(!t||t.baseUrl===void 0||t.apiVersion===void 0)throw new Error("HTTP options are not correctly set.");const n=[t.baseUrl.endsWith("/")?t.baseUrl.slice(0,-1):t.baseUrl];return t.apiVersion&&t.apiVersion!==""&&n.push(t.apiVersion),n.join("/")}getBaseResourcePath(){return`projects/${this.clientOptions.project}/locations/${this.clientOptions.location}`}getApiKey(){return this.clientOptions.apiKey}getWebsocketBaseUrl(){const t=this.getBaseUrl(),e=new URL(t);return e.protocol=e.protocol=="http:"?"ws":"wss",e.toString()}setBaseUrl(t){if(this.clientOptions.httpOptions)this.clientOptions.httpOptions.baseUrl=t;else throw new Error("HTTP options are not correctly set.")}constructUrl(t,e,n){const r=[this.getRequestUrlInternal(e)];return n&&r.push(this.getBaseResourcePath()),t!==""&&r.push(t),new URL(`${r.join("/")}`)}shouldPrependVertexProjectPath(t){return!(this.clientOptions.apiKey||!this.clientOptions.vertexai||t.path.startsWith("projects/")||t.httpMethod==="GET"&&t.path.startsWith("publishers/google/models"))}async request(t){let e=this.clientOptions.httpOptions;t.httpOptions&&(e=this.patchHttpOptions(this.clientOptions.httpOptions,t.httpOptions));const n=this.shouldPrependVertexProjectPath(t),r=this.constructUrl(t.path,e,n);if(t.queryParams)for(const[a,u]of Object.entries(t.queryParams))r.searchParams.append(a,String(u));let s={};if(t.httpMethod==="GET"){if(t.body&&t.body!=="{}")throw new Error("Request body should be empty for GET request, but got non empty request body")}else s.body=t.body;return s=await this.includeExtraHttpOptionsToRequestInit(s,e,r.toString(),t.abortSignal),this.unaryApiCall(r,s,t.httpMethod)}patchHttpOptions(t,e){const n=JSON.parse(JSON.stringify(t));for(const[r,s]of Object.entries(e))typeof s=="object"?n[r]=Object.assign(Object.assign({},n[r]),s):s!==void 0&&(n[r]=s);return n}async requestStream(t){let e=this.clientOptions.httpOptions;t.httpOptions&&(e=this.patchHttpOptions(this.clientOptions.httpOptions,t.httpOptions));const n=this.shouldPrependVertexProjectPath(t),r=this.constructUrl(t.path,e,n);(!r.searchParams.has("alt")||r.searchParams.get("alt")!=="sse")&&r.searchParams.set("alt","sse");let s={};return s.body=t.body,s=await this.includeExtraHttpOptionsToRequestInit(s,e,r.toString(),t.abortSignal),this.streamApiCall(r,s,t.httpMethod)}async includeExtraHttpOptionsToRequestInit(t,e,n,r){if(e&&e.timeout||r){const s=new AbortController,a=s.signal;if(e.timeout&&(e==null?void 0:e.timeout)>0){const u=setTimeout(()=>s.abort(),e.timeout);u&&typeof u.unref=="function"&&u.unref()}r&&r.addEventListener("abort",()=>{s.abort()}),t.signal=a}return e&&e.extraBody!==null&&xO(t,e.extraBody),t.headers=await this.getHeadersInternal(e,n),t}async unaryApiCall(t,e,n){return this.apiCall(t.toString(),Object.assign(Object.assign({},e),{method:n})).then(async r=>(await A6(r),new Gw(r))).catch(r=>{throw r instanceof Error?r:new Error(JSON.stringify(r))})}async streamApiCall(t,e,n){return this.apiCall(t.toString(),Object.assign(Object.assign({},e),{method:n})).then(async r=>(await A6(r),this.processStreamResponse(r))).catch(r=>{throw r instanceof Error?r:new Error(JSON.stringify(r))})}processStreamResponse(t){return Wl(this,arguments,function*(){var n;const r=(n=t==null?void 0:t.body)===null||n===void 0?void 0:n.getReader(),s=new TextDecoder("utf-8");if(!r)throw new Error("Response body is empty");try{let a="";const u="data:",c=[`

`,"\r\r",`\r
\r
`];for(;;){const{done:h,value:f}=yield He(r.read());if(h){if(a.trim().length>0)throw new Error("Incomplete JSON segment at the end");break}const g=s.decode(f,{stream:!0});try{const w=JSON.parse(g);if("error"in w){const S=JSON.parse(JSON.stringify(w.error)),T=S.status,C=S.code,D=`got status: ${T}. ${JSON.stringify(w)}`;if(C>=400&&C<600)throw new MA({message:D,status:C})}}catch(w){if(w.name==="ApiError")throw w}a+=g;let m=-1,y=0;for(;;){m=-1,y=0;for(const T of c){const C=a.indexOf(T);C!==-1&&(m===-1||C<m)&&(m=C,y=T.length)}if(m===-1)break;const w=a.substring(0,m);a=a.substring(m+y);const S=w.trim();if(S.startsWith(u)){const T=S.substring(u.length).trim();try{const C=new Response(T,{headers:t==null?void 0:t.headers,status:t==null?void 0:t.status,statusText:t==null?void 0:t.statusText});yield yield He(new Gw(C))}catch(C){throw new Error(`exception parsing stream chunk ${T}. ${C}`)}}}}}finally{r.releaseLock()}})}async apiCall(t,e){return fetch(t,e).catch(n=>{throw new Error(`exception ${n} sending request`)})}getDefaultHeaders(){const t={},e=gO+" "+this.clientOptions.userAgentExtra;return t[dO]=e,t[Xw]=e,t[hO]="application/json",t}async getHeadersInternal(t,e){const n=new Headers;if(t&&t.headers){for(const[r,s]of Object.entries(t.headers))n.append(r,s);t.timeout&&t.timeout>0&&n.append(fO,String(Math.ceil(t.timeout/1e3)))}return await this.clientOptions.auth.addAuthHeaders(n,e),n}getFileName(t){var e;let n="";return typeof t=="string"&&(n=t.replace(/[/\\]+$/,""),n=(e=n.split(/[/\\]/).pop())!==null&&e!==void 0?e:""),n}async uploadFile(t,e){var n;const r={};e!=null&&(r.mimeType=e.mimeType,r.name=e.name,r.displayName=e.displayName),r.name&&!r.name.startsWith("files/")&&(r.name=`files/${r.name}`);const s=this.clientOptions.uploader,a=await s.stat(t);r.sizeBytes=String(a.size);const u=(n=e==null?void 0:e.mimeType)!==null&&n!==void 0?n:a.type;if(u===void 0||u==="")throw new Error("Can not determine mimeType. Please provide mimeType in the config.");r.mimeType=u;const c={file:r},h=this.getFileName(t),f=ce("upload/v1beta/files",c._url),g=await this.fetchUploadUrl(f,r.sizeBytes,r.mimeType,h,c,e==null?void 0:e.httpOptions);return s.upload(t,g,this)}async uploadFileToFileSearchStore(t,e,n){var r;const s=this.clientOptions.uploader,a=await s.stat(e),u=String(a.size),c=(r=n==null?void 0:n.mimeType)!==null&&r!==void 0?r:a.type;if(c===void 0||c==="")throw new Error("Can not determine mimeType. Please provide mimeType in the config.");const h=`upload/v1beta/${t}:uploadToFileSearchStore`,f=this.getFileName(e),g={};n!=null&&rR(n,g);const m=await this.fetchUploadUrl(h,u,c,f,g,n==null?void 0:n.httpOptions);return s.uploadToFileSearchStore(e,m,this)}async downloadFile(t){await this.clientOptions.downloader.download(t,this)}async fetchUploadUrl(t,e,n,r,s,a){var u;let c={};a?c=a:c={apiVersion:"",headers:Object.assign({"Content-Type":"application/json","X-Goog-Upload-Protocol":"resumable","X-Goog-Upload-Command":"start","X-Goog-Upload-Header-Content-Length":`${e}`,"X-Goog-Upload-Header-Content-Type":`${n}`},r?{"X-Goog-Upload-File-Name":r}:{})};const h=await this.request({path:t,body:JSON.stringify(s),httpMethod:"POST",httpOptions:c});if(!h||!(h!=null&&h.headers))throw new Error("Server did not return an HttpResponse or the returned HttpResponse did not have headers.");const f=(u=h==null?void 0:h.headers)===null||u===void 0?void 0:u["x-goog-upload-url"];if(f===void 0)throw new Error("Failed to get upload url. Server did not return the x-google-upload-url in the headers");return f}}async function A6(i){var t;if(i===void 0)throw new Error("response is undefined");if(!i.ok){const e=i.status;let n;!((t=i.headers.get("content-type"))===null||t===void 0)&&t.includes("application/json")?n=await i.json():n={error:{message:await i.text(),code:i.status,status:i.statusText}};const r=JSON.stringify(n);throw e>=400&&e<600?new MA({message:r,status:e}):new Error(r)}}function xO(i,t){if(!t||Object.keys(t).length===0)return;if(i.body instanceof Blob){console.warn("includeExtraBodyToRequestInit: extraBody provided but current request body is a Blob. extraBody will be ignored as merging is not supported for Blob bodies.");return}let e={};if(typeof i.body=="string"&&i.body.length>0)try{const s=JSON.parse(i.body);if(typeof s=="object"&&s!==null&&!Array.isArray(s))e=s;else{console.warn("includeExtraBodyToRequestInit: Original request body is valid JSON but not a non-array object. Skip applying extraBody to the request body.");return}}catch{console.warn("includeExtraBodyToRequestInit: Original request body is not valid JSON. Skip applying extraBody to the request body.");return}function n(s,a){const u=Object.assign({},s);for(const c in a)if(Object.prototype.hasOwnProperty.call(a,c)){const h=a[c],f=u[c];h&&typeof h=="object"&&!Array.isArray(h)&&f&&typeof f=="object"&&!Array.isArray(f)?u[c]=n(f,h):(f&&h&&typeof f!=typeof h&&console.warn(`includeExtraBodyToRequestInit:deepMerge: Type mismatch for key "${c}". Original type: ${typeof f}, New type: ${typeof h}. Overwriting.`),u[c]=h)}return u}const r=n(e,t);i.body=JSON.stringify(r)}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const bO="mcp_used/unknown";let AO=!1;function sR(i){for(const t of i)if(_O(t)||typeof t=="object"&&"inputSchema"in t)return!0;return AO}function oR(i){var t;const e=(t=i[Xw])!==null&&t!==void 0?t:"";i[Xw]=(e+` ${bO}`).trimStart()}function _O(i){return i!==null&&typeof i=="object"&&i instanceof eC}function wO(i){return Wl(this,arguments,function*(e,n=100){let r,s=0;for(;s<n;){const a=yield He(e.listTools({cursor:r}));for(const u of a.tools)yield yield He(u),s++;if(!a.nextCursor)break;r=a.nextCursor}})}class eC{constructor(t=[],e){this.mcpTools=[],this.functionNameToMcpClient={},this.mcpClients=t,this.config=e}static create(t,e){return new eC(t,e)}async initialize(){var t,e,n,r;if(this.mcpTools.length>0)return;const s={},a=[];for(const f of this.mcpClients)try{for(var u=!0,c=(e=void 0,Xl(wO(f))),h;h=await c.next(),t=h.done,!t;u=!0){r=h.value,u=!1;const g=r;a.push(g);const m=g.name;if(s[m])throw new Error(`Duplicate function name ${m} found in MCP tools. Please ensure function names are unique.`);s[m]=f}}catch(g){e={error:g}}finally{try{!u&&!t&&(n=c.return)&&await n.call(c)}finally{if(e)throw e.error}}this.mcpTools=a,this.functionNameToMcpClient=s}async tool(){return await this.initialize(),e7(this.mcpTools,this.config)}async callTool(t){await this.initialize();const e=[];for(const n of t)if(n.name in this.functionNameToMcpClient){const r=this.functionNameToMcpClient[n.name];let s;this.config.timeout&&(s={timeout:this.config.timeout});const a=await r.callTool({name:n.name,arguments:n.args},void 0,s);e.push({functionResponse:{name:n.name,response:a.isError?{error:a}:a}})}return e}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */async function SO(i,t,e){const n=new Wk;let r;e.data instanceof Blob?r=JSON.parse(await e.data.text()):r=JSON.parse(e.data),Object.assign(n,r),t(n)}class EO{constructor(t,e,n){this.apiClient=t,this.auth=e,this.webSocketFactory=n}async connect(t){var e,n;if(this.apiClient.isVertexAI())throw new Error("Live music is not supported for Vertex AI.");console.warn("Live music generation is experimental and may change in future versions.");const r=this.apiClient.getWebsocketBaseUrl(),s=this.apiClient.getApiVersion(),a=NO(this.apiClient.getDefaultHeaders()),u=this.apiClient.getApiKey(),c=`${r}/ws/google.ai.generativelanguage.${s}.GenerativeService.BidiGenerateMusic?key=${u}`;let h=()=>{};const f=new Promise(R=>{h=R}),g=t.callbacks,m=function(){h({})},y=this.apiClient,w={onopen:m,onmessage:R=>{SO(y,g.onmessage,R)},onerror:(e=g==null?void 0:g.onerror)!==null&&e!==void 0?e:function(R){},onclose:(n=g==null?void 0:g.onclose)!==null&&n!==void 0?n:function(R){}},S=this.webSocketFactory.create(c,TO(a),w);S.connect(),await f;const D={setup:{model:Dn(this.apiClient,t.model)}};return S.send(JSON.stringify(D)),new CO(S,this.apiClient)}}class CO{constructor(t,e){this.conn=t,this.apiClient=e}async setWeightedPrompts(t){if(!t.weightedPrompts||Object.keys(t.weightedPrompts).length===0)throw new Error("Weighted prompts must be set and contain at least one entry.");const e=QF(t);this.conn.send(JSON.stringify({clientContent:e}))}async setMusicGenerationConfig(t){t.musicGenerationConfig||(t.musicGenerationConfig={});const e=KF(t);this.conn.send(JSON.stringify(e))}sendPlaybackControl(t){const e={playbackControl:t};this.conn.send(JSON.stringify(e))}play(){this.sendPlaybackControl(jg.PLAY)}pause(){this.sendPlaybackControl(jg.PAUSE)}stop(){this.sendPlaybackControl(jg.STOP)}resetContext(){this.sendPlaybackControl(jg.RESET_CONTEXT)}close(){this.conn.close()}}function TO(i){const t={};return i.forEach((e,n)=>{t[n]=e}),t}function NO(i){const t=new Headers;for(const[e,n]of Object.entries(i))t.append(e,n);return t}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const RO="FunctionResponse request must have an `id` field from the response of a ToolCall.FunctionalCalls in Google AI.";async function DO(i,t,e){const n=new $k;let r;e.data instanceof Blob?r=await e.data.text():e.data instanceof ArrayBuffer?r=new TextDecoder().decode(e.data):r=e.data;const s=JSON.parse(r);if(i.isVertexAI()){const a=eB(s);Object.assign(n,a)}else Object.assign(n,s);t(n)}class LO{constructor(t,e,n){this.apiClient=t,this.auth=e,this.webSocketFactory=n,this.music=new EO(this.apiClient,this.auth,this.webSocketFactory)}async connect(t){var e,n,r,s,a,u;if(t.config&&t.config.httpOptions)throw new Error("The Live module does not support httpOptions at request-level in LiveConnectConfig yet. Please use the client-level httpOptions configuration instead.");const c=this.apiClient.getWebsocketBaseUrl(),h=this.apiClient.getApiVersion();let f;const g=this.apiClient.getHeaders();t.config&&t.config.tools&&sR(t.config.tools)&&oR(g);const m=kO(g);if(this.apiClient.isVertexAI())f=`${c}/ws/google.cloud.aiplatform.${h}.LlmBidiService/BidiGenerateContent`,await this.auth.addAuthHeaders(m,f);else{const tt=this.apiClient.getApiKey();let J="BidiGenerateContent",O="key";tt!=null&&tt.startsWith("auth_tokens/")&&(console.warn("Warning: Ephemeral token support is experimental and may change in future versions."),h!=="v1alpha"&&console.warn("Warning: The SDK's ephemeral token support is in v1alpha only. Please use const ai = new GoogleGenAI({apiKey: token.name, httpOptions: { apiVersion: 'v1alpha' }}); before session connection."),J="BidiGenerateContentConstrained",O="access_token"),f=`${c}/ws/google.ai.generativelanguage.${h}.GenerativeService.${J}?${O}=${tt}`}let y=()=>{};const w=new Promise(tt=>{y=tt}),S=t.callbacks,T=function(){var tt;(tt=S==null?void 0:S.onopen)===null||tt===void 0||tt.call(S),y({})},C=this.apiClient,D={onopen:T,onmessage:tt=>{DO(C,S.onmessage,tt)},onerror:(e=S==null?void 0:S.onerror)!==null&&e!==void 0?e:function(tt){},onclose:(n=S==null?void 0:S.onclose)!==null&&n!==void 0?n:function(tt){}},R=this.webSocketFactory.create(f,PO(m),D);R.connect(),await w;let I=Dn(this.apiClient,t.model);if(this.apiClient.isVertexAI()&&I.startsWith("publishers/")){const tt=this.apiClient.getProject(),J=this.apiClient.getLocation();I=`projects/${tt}/locations/${J}/`+I}let F={};this.apiClient.isVertexAI()&&((r=t.config)===null||r===void 0?void 0:r.responseModalities)===void 0&&(t.config===void 0?t.config={responseModalities:[Vb.AUDIO]}:t.config.responseModalities=[Vb.AUDIO]),!((s=t.config)===null||s===void 0)&&s.generationConfig&&console.warn("Setting `LiveConnectConfig.generation_config` is deprecated, please set the fields on `LiveConnectConfig` directly. This will become an error in a future version (not before Q3 2025).");const q=(u=(a=t.config)===null||a===void 0?void 0:a.tools)!==null&&u!==void 0?u:[],U=[];for(const tt of q)if(this.isCallableTool(tt)){const J=tt;U.push(await J.tool())}else U.push(tt);U.length>0&&(t.config.tools=U);const V={model:I,config:t.config,callbacks:t.callbacks};return this.apiClient.isVertexAI()?F=JF(this.apiClient,V):F=jF(this.apiClient,V),delete F.config,R.send(JSON.stringify(F)),new IO(R,this.apiClient)}isCallableTool(t){return"callTool"in t&&typeof t.callTool=="function"}}const MO={turnComplete:!0};class IO{constructor(t,e){this.conn=t,this.apiClient=e}tLiveClientContent(t,e){if(e.turns!==null&&e.turns!==void 0){let n=[];try{n=rl(e.turns),t.isVertexAI()||(n=n.map(r=>IA(r)))}catch{throw new Error(`Failed to parse client content "turns", type: '${typeof e.turns}'`)}return{clientContent:{turns:n,turnComplete:e.turnComplete}}}return{clientContent:{turnComplete:e.turnComplete}}}tLiveClienttToolResponse(t,e){let n=[];if(e.functionResponses==null)throw new Error("functionResponses is required.");if(Array.isArray(e.functionResponses)?n=e.functionResponses:n=[e.functionResponses],n.length===0)throw new Error("functionResponses is required.");for(const s of n){if(typeof s!="object"||s===null||!("name"in s)||!("response"in s))throw new Error(`Could not parse function response, type '${typeof s}'.`);if(!t.isVertexAI()&&!("id"in s))throw new Error(RO)}return{toolResponse:{functionResponses:n}}}sendClientContent(t){t=Object.assign(Object.assign({},MO),t);const e=this.tLiveClientContent(this.apiClient,t);this.conn.send(JSON.stringify(e))}sendRealtimeInput(t){let e={};this.apiClient.isVertexAI()?e={realtimeInput:tB(t)}:e={realtimeInput:ZF(t)},this.conn.send(JSON.stringify(e))}sendToolResponse(t){if(t.functionResponses==null)throw new Error("Tool response parameters are required.");const e=this.tLiveClienttToolResponse(this.apiClient,t);this.conn.send(JSON.stringify(e))}close(){this.conn.close()}}function PO(i){const t={};return i.forEach((e,n)=>{t[n]=e}),t}function kO(i){const t=new Headers;for(const[e,n]of Object.entries(i))t.append(e,n);return t}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const _6=10;function w6(i){var t,e,n;if(!((t=i==null?void 0:i.automaticFunctionCalling)===null||t===void 0)&&t.disable)return!0;let r=!1;for(const a of(e=i==null?void 0:i.tools)!==null&&e!==void 0?e:[])if(sm(a)){r=!0;break}if(!r)return!0;const s=(n=i==null?void 0:i.automaticFunctionCalling)===null||n===void 0?void 0:n.maximumRemoteCalls;return s&&(s<0||!Number.isInteger(s))||s==0?(console.warn("Invalid maximumRemoteCalls value provided for automatic function calling. Disabled automatic function calling. Please provide a valid integer value greater than 0. maximumRemoteCalls provided:",s),!0):!1}function sm(i){return"callTool"in i&&typeof i.callTool=="function"}function FO(i){var t,e,n;return(n=(e=(t=i.config)===null||t===void 0?void 0:t.tools)===null||e===void 0?void 0:e.some(r=>sm(r)))!==null&&n!==void 0?n:!1}function S6(i){var t;const e=[];return!((t=i==null?void 0:i.config)===null||t===void 0)&&t.tools&&i.config.tools.forEach((n,r)=>{if(sm(n))return;const s=n;s.functionDeclarations&&s.functionDeclarations.length>0&&e.push(r)}),e}function E6(i){var t;return!(!((t=i==null?void 0:i.automaticFunctionCalling)===null||t===void 0)&&t.ignoreCallHistory)}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class BO extends Fh{constructor(t){super(),this.apiClient=t,this.generateContent=async e=>{var n,r,s,a,u;const c=await this.processParamsMaybeAddMcpUsage(e);if(this.maybeMoveToResponseJsonSchem(e),!FO(e)||w6(e.config))return await this.generateContentInternal(c);const h=S6(e);if(h.length>0){const S=h.map(T=>`tools[${T}]`).join(", ");throw new Error(`Automatic function calling with CallableTools (or MCP objects) and basic FunctionDeclarations is not yet supported. Incompatible tools found at ${S}.`)}let f,g;const m=rl(c.contents),y=(s=(r=(n=c.config)===null||n===void 0?void 0:n.automaticFunctionCalling)===null||r===void 0?void 0:r.maximumRemoteCalls)!==null&&s!==void 0?s:_6;let w=0;for(;w<y&&(f=await this.generateContentInternal(c),!(!f.functionCalls||f.functionCalls.length===0));){const S=f.candidates[0].content,T=[];for(const C of(u=(a=e.config)===null||a===void 0?void 0:a.tools)!==null&&u!==void 0?u:[])if(sm(C)){const R=await C.callTool(f.functionCalls);T.push(...R)}w++,g={role:"user",parts:T},c.contents=rl(c.contents),c.contents.push(S),c.contents.push(g),E6(c.config)&&(m.push(S),m.push(g))}return E6(c.config)&&(f.automaticFunctionCallingHistory=m),f},this.generateContentStream=async e=>{var n,r,s,a,u;if(this.maybeMoveToResponseJsonSchem(e),w6(e.config)){const g=await this.processParamsMaybeAddMcpUsage(e);return await this.generateContentStreamInternal(g)}const c=S6(e);if(c.length>0){const g=c.map(m=>`tools[${m}]`).join(", ");throw new Error(`Incompatible tools found at ${g}. Automatic function calling with CallableTools (or MCP objects) and basic FunctionDeclarations" is not yet supported.`)}const h=(s=(r=(n=e==null?void 0:e.config)===null||n===void 0?void 0:n.toolConfig)===null||r===void 0?void 0:r.functionCallingConfig)===null||s===void 0?void 0:s.streamFunctionCallArguments,f=(u=(a=e==null?void 0:e.config)===null||a===void 0?void 0:a.automaticFunctionCalling)===null||u===void 0?void 0:u.disable;if(h&&!f)throw new Error("Running in streaming mode with 'streamFunctionCallArguments' enabled, this feature is not compatible with automatic function calling (AFC). Please set 'config.automaticFunctionCalling.disable' to true to disable AFC or leave 'config.toolConfig.functionCallingConfig.streamFunctionCallArguments' to be undefined or set to false to disable streaming function call arguments feature.");return await this.processAfcStream(e)},this.generateImages=async e=>await this.generateImagesInternal(e).then(n=>{var r;let s;const a=[];if(n!=null&&n.generatedImages)for(const c of n.generatedImages)c&&(c!=null&&c.safetyAttributes)&&((r=c==null?void 0:c.safetyAttributes)===null||r===void 0?void 0:r.contentType)==="Positive Prompt"?s=c==null?void 0:c.safetyAttributes:a.push(c);let u;return s?u={generatedImages:a,positivePromptSafetyAttributes:s,sdkHttpResponse:n.sdkHttpResponse}:u={generatedImages:a,sdkHttpResponse:n.sdkHttpResponse},u}),this.list=async e=>{var n;const a={config:Object.assign(Object.assign({},{queryBase:!0}),e==null?void 0:e.config)};if(this.apiClient.isVertexAI()&&!a.config.queryBase){if(!((n=a.config)===null||n===void 0)&&n.filter)throw new Error("Filtering tuned models list for Vertex AI is not currently supported");a.config.filter="labels.tune-type:*"}return new Op(Lh.PAGED_ITEM_MODELS,u=>this.listInternal(u),await this.listInternal(a),a)},this.editImage=async e=>{const n={model:e.model,prompt:e.prompt,referenceImages:[],config:e.config};return e.referenceImages&&e.referenceImages&&(n.referenceImages=e.referenceImages.map(r=>r.toReferenceImageAPI())),await this.editImageInternal(n)},this.upscaleImage=async e=>{let n={numberOfImages:1,mode:"upscale"};e.config&&(n=Object.assign(Object.assign({},n),e.config));const r={model:e.model,image:e.image,upscaleFactor:e.upscaleFactor,config:n};return await this.upscaleImageInternal(r)},this.generateVideos=async e=>{var n,r,s,a,u,c;if((e.prompt||e.image||e.video)&&e.source)throw new Error("Source and prompt/image/video are mutually exclusive. Please only use source.");return this.apiClient.isVertexAI()||(!((n=e.video)===null||n===void 0)&&n.uri&&(!((r=e.video)===null||r===void 0)&&r.videoBytes)?e.video={uri:e.video.uri,mimeType:e.video.mimeType}:!((a=(s=e.source)===null||s===void 0?void 0:s.video)===null||a===void 0)&&a.uri&&(!((c=(u=e.source)===null||u===void 0?void 0:u.video)===null||c===void 0)&&c.videoBytes)&&(e.source.video={uri:e.source.video.uri,mimeType:e.source.video.mimeType})),await this.generateVideosInternal(e)}}maybeMoveToResponseJsonSchem(t){t.config&&t.config.responseSchema&&(t.config.responseJsonSchema||Object.keys(t.config.responseSchema).includes("$schema")&&(t.config.responseJsonSchema=t.config.responseSchema,delete t.config.responseSchema))}async processParamsMaybeAddMcpUsage(t){var e,n,r;const s=(e=t.config)===null||e===void 0?void 0:e.tools;if(!s)return t;const a=await Promise.all(s.map(async c=>sm(c)?await c.tool():c)),u={model:t.model,contents:t.contents,config:Object.assign(Object.assign({},t.config),{tools:a})};if(u.config.tools=a,t.config&&t.config.tools&&sR(t.config.tools)){const c=(r=(n=t.config.httpOptions)===null||n===void 0?void 0:n.headers)!==null&&r!==void 0?r:{};let h=Object.assign({},c);Object.keys(h).length===0&&(h=this.apiClient.getDefaultHeaders()),oR(h),u.config.httpOptions=Object.assign(Object.assign({},t.config.httpOptions),{headers:h})}return u}async initAfcToolsMap(t){var e,n,r;const s=new Map;for(const a of(n=(e=t.config)===null||e===void 0?void 0:e.tools)!==null&&n!==void 0?n:[])if(sm(a)){const u=a,c=await u.tool();for(const h of(r=c.functionDeclarations)!==null&&r!==void 0?r:[]){if(!h.name)throw new Error("Function declaration name is required.");if(s.has(h.name))throw new Error(`Duplicate tool declaration name: ${h.name}`);s.set(h.name,u)}}return s}async processAfcStream(t){var e,n,r;const s=(r=(n=(e=t.config)===null||e===void 0?void 0:e.automaticFunctionCalling)===null||n===void 0?void 0:n.maximumRemoteCalls)!==null&&r!==void 0?r:_6;let a=!1,u=0;const c=await this.initAfcToolsMap(t);return(function(h,f,g){return Wl(this,arguments,function*(){for(var m,y,w,S,T,C;u<s;){a&&(u++,a=!1);const F=yield He(h.processParamsMaybeAddMcpUsage(g)),q=yield He(h.generateContentStreamInternal(F)),U=[],V=[];try{for(var D=!0,R=(y=void 0,Xl(q)),I;I=yield He(R.next()),m=I.done,!m;D=!0){S=I.value,D=!1;const tt=S;if(yield yield He(tt),tt.candidates&&(!((T=tt.candidates[0])===null||T===void 0)&&T.content)){V.push(tt.candidates[0].content);for(const J of(C=tt.candidates[0].content.parts)!==null&&C!==void 0?C:[])if(u<s&&J.functionCall){if(!J.functionCall.name)throw new Error("Function call name was not returned by the model.");if(f.has(J.functionCall.name)){const O=yield He(f.get(J.functionCall.name).callTool([J.functionCall]));U.push(...O)}else throw new Error(`Automatic function calling was requested, but not all the tools the model used implement the CallableTool interface. Available tools: ${f.keys()}, mising tool: ${J.functionCall.name}`)}}}}catch(tt){y={error:tt}}finally{try{!D&&!m&&(w=R.return)&&(yield He(w.call(R)))}finally{if(y)throw y.error}}if(U.length>0){a=!0;const tt=new Cv;tt.candidates=[{content:{role:"user",parts:U}}],yield yield He(tt);const J=[];J.push(...V),J.push({role:"user",parts:U});const O=rl(g.contents).concat(J);g.contents=O}else break}})})(this,c,t)}async generateContentInternal(t){var e,n,r,s;let a,u="",c={};if(this.apiClient.isVertexAI()){const h=y6(this.apiClient,t);return u=ce("{model}:generateContent",h._url),c=h._query,delete h._url,delete h._query,a=this.apiClient.request({path:u,queryParams:c,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(e=t.config)===null||e===void 0?void 0:e.httpOptions,abortSignal:(n=t.config)===null||n===void 0?void 0:n.abortSignal}).then(f=>f.json().then(g=>{const m=g;return m.sdkHttpResponse={headers:f.headers},m})),a.then(f=>{const g=b6(f),m=new Cv;return Object.assign(m,g),m})}else{const h=v6(this.apiClient,t);return u=ce("{model}:generateContent",h._url),c=h._query,delete h._url,delete h._query,a=this.apiClient.request({path:u,queryParams:c,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(r=t.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(s=t.config)===null||s===void 0?void 0:s.abortSignal}).then(f=>f.json().then(g=>{const m=g;return m.sdkHttpResponse={headers:f.headers},m})),a.then(f=>{const g=x6(f),m=new Cv;return Object.assign(m,g),m})}}async generateContentStreamInternal(t){var e,n,r,s;let a,u="",c={};if(this.apiClient.isVertexAI()){const h=y6(this.apiClient,t);return u=ce("{model}:streamGenerateContent?alt=sse",h._url),c=h._query,delete h._url,delete h._query,a=this.apiClient.requestStream({path:u,queryParams:c,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(e=t.config)===null||e===void 0?void 0:e.httpOptions,abortSignal:(n=t.config)===null||n===void 0?void 0:n.abortSignal}),a.then(function(g){return Wl(this,arguments,function*(){var m,y,w,S;try{for(var T=!0,C=Xl(g),D;D=yield He(C.next()),m=D.done,!m;T=!0){S=D.value,T=!1;const R=S,I=b6(yield He(R.json()));I.sdkHttpResponse={headers:R.headers};const F=new Cv;Object.assign(F,I),yield yield He(F)}}catch(R){y={error:R}}finally{try{!T&&!m&&(w=C.return)&&(yield He(w.call(C)))}finally{if(y)throw y.error}}})})}else{const h=v6(this.apiClient,t);return u=ce("{model}:streamGenerateContent?alt=sse",h._url),c=h._query,delete h._url,delete h._query,a=this.apiClient.requestStream({path:u,queryParams:c,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(r=t.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(s=t.config)===null||s===void 0?void 0:s.abortSignal}),a.then(function(g){return Wl(this,arguments,function*(){var m,y,w,S;try{for(var T=!0,C=Xl(g),D;D=yield He(C.next()),m=D.done,!m;T=!0){S=D.value,T=!1;const R=S,I=x6(yield He(R.json()));I.sdkHttpResponse={headers:R.headers};const F=new Cv;Object.assign(F,I),yield yield He(F)}}catch(R){y={error:R}}finally{try{!T&&!m&&(w=C.return)&&(yield He(w.call(C)))}finally{if(y)throw y.error}}})})}}async embedContent(t){var e,n,r,s;let a,u="",c={};if(this.apiClient.isVertexAI()){const h=LB(this.apiClient,t);return u=ce("{model}:predict",h._url),c=h._query,delete h._url,delete h._query,a=this.apiClient.request({path:u,queryParams:c,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(e=t.config)===null||e===void 0?void 0:e.httpOptions,abortSignal:(n=t.config)===null||n===void 0?void 0:n.abortSignal}).then(f=>f.json().then(g=>{const m=g;return m.sdkHttpResponse={headers:f.headers},m})),a.then(f=>{const g=IB(f),m=new t6;return Object.assign(m,g),m})}else{const h=DB(this.apiClient,t);return u=ce("{model}:batchEmbedContents",h._url),c=h._query,delete h._url,delete h._query,a=this.apiClient.request({path:u,queryParams:c,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(r=t.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(s=t.config)===null||s===void 0?void 0:s.abortSignal}).then(f=>f.json().then(g=>{const m=g;return m.sdkHttpResponse={headers:f.headers},m})),a.then(f=>{const g=MB(f),m=new t6;return Object.assign(m,g),m})}}async generateImagesInternal(t){var e,n,r,s;let a,u="",c={};if(this.apiClient.isVertexAI()){const h=VB(this.apiClient,t);return u=ce("{model}:predict",h._url),c=h._query,delete h._url,delete h._query,a=this.apiClient.request({path:u,queryParams:c,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(e=t.config)===null||e===void 0?void 0:e.httpOptions,abortSignal:(n=t.config)===null||n===void 0?void 0:n.abortSignal}).then(f=>f.json().then(g=>{const m=g;return m.sdkHttpResponse={headers:f.headers},m})),a.then(f=>{const g=$B(f),m=new e6;return Object.assign(m,g),m})}else{const h=GB(this.apiClient,t);return u=ce("{model}:predict",h._url),c=h._query,delete h._url,delete h._query,a=this.apiClient.request({path:u,queryParams:c,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(r=t.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(s=t.config)===null||s===void 0?void 0:s.abortSignal}).then(f=>f.json().then(g=>{const m=g;return m.sdkHttpResponse={headers:f.headers},m})),a.then(f=>{const g=YB(f),m=new e6;return Object.assign(m,g),m})}}async editImageInternal(t){var e,n;let r,s="",a={};if(this.apiClient.isVertexAI()){const u=CB(this.apiClient,t);return s=ce("{model}:predict",u._url),a=u._query,delete u._url,delete u._query,r=this.apiClient.request({path:s,queryParams:a,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(e=t.config)===null||e===void 0?void 0:e.httpOptions,abortSignal:(n=t.config)===null||n===void 0?void 0:n.abortSignal}).then(c=>c.json().then(h=>{const f=h;return f.sdkHttpResponse={headers:c.headers},f})),r.then(c=>{const h=TB(c),f=new kk;return Object.assign(f,h),f})}else throw new Error("This method is only supported by the Vertex AI.")}async upscaleImageInternal(t){var e,n;let r,s="",a={};if(this.apiClient.isVertexAI()){const u=V9(this.apiClient,t);return s=ce("{model}:predict",u._url),a=u._query,delete u._url,delete u._query,r=this.apiClient.request({path:s,queryParams:a,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(e=t.config)===null||e===void 0?void 0:e.httpOptions,abortSignal:(n=t.config)===null||n===void 0?void 0:n.abortSignal}).then(c=>c.json().then(h=>{const f=h;return f.sdkHttpResponse={headers:c.headers},f})),r.then(c=>{const h=Y9(c),f=new Fk;return Object.assign(f,h),f})}else throw new Error("This method is only supported by the Vertex AI.")}async recontextImage(t){var e,n;let r,s="",a={};if(this.apiClient.isVertexAI()){const u=E9(this.apiClient,t);return s=ce("{model}:predict",u._url),a=u._query,delete u._url,delete u._query,r=this.apiClient.request({path:s,queryParams:a,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(e=t.config)===null||e===void 0?void 0:e.httpOptions,abortSignal:(n=t.config)===null||n===void 0?void 0:n.abortSignal}).then(c=>c.json()),r.then(c=>{const h=C9(c),f=new Bk;return Object.assign(f,h),f})}else throw new Error("This method is only supported by the Vertex AI.")}async segmentImage(t){var e,n;let r,s="",a={};if(this.apiClient.isVertexAI()){const u=M9(this.apiClient,t);return s=ce("{model}:predict",u._url),a=u._query,delete u._url,delete u._query,r=this.apiClient.request({path:s,queryParams:a,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(e=t.config)===null||e===void 0?void 0:e.httpOptions,abortSignal:(n=t.config)===null||n===void 0?void 0:n.abortSignal}).then(c=>c.json()),r.then(c=>{const h=I9(c),f=new Ok;return Object.assign(f,h),f})}else throw new Error("This method is only supported by the Vertex AI.")}async get(t){var e,n,r,s;let a,u="",c={};if(this.apiClient.isVertexAI()){const h=u9(this.apiClient,t);return u=ce("{name}",h._url),c=h._query,delete h._url,delete h._query,a=this.apiClient.request({path:u,queryParams:c,body:JSON.stringify(h),httpMethod:"GET",httpOptions:(e=t.config)===null||e===void 0?void 0:e.httpOptions,abortSignal:(n=t.config)===null||n===void 0?void 0:n.abortSignal}).then(f=>f.json()),a.then(f=>Ww(f))}else{const h=l9(this.apiClient,t);return u=ce("{name}",h._url),c=h._query,delete h._url,delete h._query,a=this.apiClient.request({path:u,queryParams:c,body:JSON.stringify(h),httpMethod:"GET",httpOptions:(r=t.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(s=t.config)===null||s===void 0?void 0:s.abortSignal}).then(f=>f.json()),a.then(f=>$w(f))}}async listInternal(t){var e,n,r,s;let a,u="",c={};if(this.apiClient.isVertexAI()){const h=y9(this.apiClient,t);return u=ce("{models_url}",h._url),c=h._query,delete h._url,delete h._query,a=this.apiClient.request({path:u,queryParams:c,body:JSON.stringify(h),httpMethod:"GET",httpOptions:(e=t.config)===null||e===void 0?void 0:e.httpOptions,abortSignal:(n=t.config)===null||n===void 0?void 0:n.abortSignal}).then(f=>f.json().then(g=>{const m=g;return m.sdkHttpResponse={headers:f.headers},m})),a.then(f=>{const g=b9(f),m=new n6;return Object.assign(m,g),m})}else{const h=v9(this.apiClient,t);return u=ce("{models_url}",h._url),c=h._query,delete h._url,delete h._query,a=this.apiClient.request({path:u,queryParams:c,body:JSON.stringify(h),httpMethod:"GET",httpOptions:(r=t.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(s=t.config)===null||s===void 0?void 0:s.abortSignal}).then(f=>f.json().then(g=>{const m=g;return m.sdkHttpResponse={headers:f.headers},m})),a.then(f=>{const g=x9(f),m=new n6;return Object.assign(m,g),m})}}async update(t){var e,n,r,s;let a,u="",c={};if(this.apiClient.isVertexAI()){const h=z9(this.apiClient,t);return u=ce("{model}",h._url),c=h._query,delete h._url,delete h._query,a=this.apiClient.request({path:u,queryParams:c,body:JSON.stringify(h),httpMethod:"PATCH",httpOptions:(e=t.config)===null||e===void 0?void 0:e.httpOptions,abortSignal:(n=t.config)===null||n===void 0?void 0:n.abortSignal}).then(f=>f.json()),a.then(f=>Ww(f))}else{const h=q9(this.apiClient,t);return u=ce("{name}",h._url),c=h._query,delete h._url,delete h._query,a=this.apiClient.request({path:u,queryParams:c,body:JSON.stringify(h),httpMethod:"PATCH",httpOptions:(r=t.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(s=t.config)===null||s===void 0?void 0:s.abortSignal}).then(f=>f.json()),a.then(f=>$w(f))}}async delete(t){var e,n,r,s;let a,u="",c={};if(this.apiClient.isVertexAI()){const h=_B(this.apiClient,t);return u=ce("{name}",h._url),c=h._query,delete h._url,delete h._query,a=this.apiClient.request({path:u,queryParams:c,body:JSON.stringify(h),httpMethod:"DELETE",httpOptions:(e=t.config)===null||e===void 0?void 0:e.httpOptions,abortSignal:(n=t.config)===null||n===void 0?void 0:n.abortSignal}).then(f=>f.json().then(g=>{const m=g;return m.sdkHttpResponse={headers:f.headers},m})),a.then(f=>{const g=SB(f),m=new i6;return Object.assign(m,g),m})}else{const h=AB(this.apiClient,t);return u=ce("{name}",h._url),c=h._query,delete h._url,delete h._query,a=this.apiClient.request({path:u,queryParams:c,body:JSON.stringify(h),httpMethod:"DELETE",httpOptions:(r=t.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(s=t.config)===null||s===void 0?void 0:s.abortSignal}).then(f=>f.json().then(g=>{const m=g;return m.sdkHttpResponse={headers:f.headers},m})),a.then(f=>{const g=wB(f),m=new i6;return Object.assign(m,g),m})}}async countTokens(t){var e,n,r,s;let a,u="",c={};if(this.apiClient.isVertexAI()){const h=yB(this.apiClient,t);return u=ce("{model}:countTokens",h._url),c=h._query,delete h._url,delete h._query,a=this.apiClient.request({path:u,queryParams:c,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(e=t.config)===null||e===void 0?void 0:e.httpOptions,abortSignal:(n=t.config)===null||n===void 0?void 0:n.abortSignal}).then(f=>f.json().then(g=>{const m=g;return m.sdkHttpResponse={headers:f.headers},m})),a.then(f=>{const g=bB(f),m=new r6;return Object.assign(m,g),m})}else{const h=vB(this.apiClient,t);return u=ce("{model}:countTokens",h._url),c=h._query,delete h._url,delete h._query,a=this.apiClient.request({path:u,queryParams:c,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(r=t.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(s=t.config)===null||s===void 0?void 0:s.abortSignal}).then(f=>f.json().then(g=>{const m=g;return m.sdkHttpResponse={headers:f.headers},m})),a.then(f=>{const g=xB(f),m=new r6;return Object.assign(m,g),m})}}async computeTokens(t){var e,n;let r,s="",a={};if(this.apiClient.isVertexAI()){const u=cB(this.apiClient,t);return s=ce("{model}:computeTokens",u._url),a=u._query,delete u._url,delete u._query,r=this.apiClient.request({path:s,queryParams:a,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(e=t.config)===null||e===void 0?void 0:e.httpOptions,abortSignal:(n=t.config)===null||n===void 0?void 0:n.abortSignal}).then(c=>c.json().then(h=>{const f=h;return f.sdkHttpResponse={headers:c.headers},f})),r.then(c=>{const h=hB(c),f=new Uk;return Object.assign(f,h),f})}else throw new Error("This method is only supported by the Vertex AI.")}async generateVideosInternal(t){var e,n,r,s;let a,u="",c={};if(this.apiClient.isVertexAI()){const h=QB(this.apiClient,t);return u=ce("{model}:predictLongRunning",h._url),c=h._query,delete h._url,delete h._query,a=this.apiClient.request({path:u,queryParams:c,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(e=t.config)===null||e===void 0?void 0:e.httpOptions,abortSignal:(n=t.config)===null||n===void 0?void 0:n.abortSignal}).then(f=>f.json()),a.then(f=>{const g=JB(f),m=new Yb;return Object.assign(m,g),m})}else{const h=KB(this.apiClient,t);return u=ce("{model}:predictLongRunning",h._url),c=h._query,delete h._url,delete h._query,a=this.apiClient.request({path:u,queryParams:c,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(r=t.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(s=t.config)===null||s===void 0?void 0:s.abortSignal}).then(f=>f.json()),a.then(f=>{const g=jB(f),m=new Yb;return Object.assign(m,g),m})}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class OO extends Fh{constructor(t){super(),this.apiClient=t}async getVideosOperation(t){const e=t.operation,n=t.config;if(e.name===void 0||e.name==="")throw new Error("Operation name is required.");if(this.apiClient.isVertexAI()){const r=e.name.split("/operations/")[0];let s;n&&"httpOptions"in n&&(s=n.httpOptions);const a=await this.fetchPredictVideosOperationInternal({operationName:e.name,resourceName:r,config:{httpOptions:s}});return e._fromAPIResponse({apiResponse:a,_isVertexAI:!0})}else{const r=await this.getVideosOperationInternal({operationName:e.name,config:n});return e._fromAPIResponse({apiResponse:r,_isVertexAI:!1})}}async get(t){const e=t.operation,n=t.config;if(e.name===void 0||e.name==="")throw new Error("Operation name is required.");if(this.apiClient.isVertexAI()){const r=e.name.split("/operations/")[0];let s;n&&"httpOptions"in n&&(s=n.httpOptions);const a=await this.fetchPredictVideosOperationInternal({operationName:e.name,resourceName:r,config:{httpOptions:s}});return e._fromAPIResponse({apiResponse:a,_isVertexAI:!0})}else{const r=await this.getVideosOperationInternal({operationName:e.name,config:n});return e._fromAPIResponse({apiResponse:r,_isVertexAI:!1})}}async getVideosOperationInternal(t){var e,n,r,s;let a,u="",c={};if(this.apiClient.isVertexAI()){const h=Rk(t);return u=ce("{operationName}",h._url),c=h._query,delete h._url,delete h._query,a=this.apiClient.request({path:u,queryParams:c,body:JSON.stringify(h),httpMethod:"GET",httpOptions:(e=t.config)===null||e===void 0?void 0:e.httpOptions,abortSignal:(n=t.config)===null||n===void 0?void 0:n.abortSignal}).then(f=>f.json()),a}else{const h=Nk(t);return u=ce("{operationName}",h._url),c=h._query,delete h._url,delete h._query,a=this.apiClient.request({path:u,queryParams:c,body:JSON.stringify(h),httpMethod:"GET",httpOptions:(r=t.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(s=t.config)===null||s===void 0?void 0:s.abortSignal}).then(f=>f.json()),a}}async fetchPredictVideosOperationInternal(t){var e,n;let r,s="",a={};if(this.apiClient.isVertexAI()){const u=Ak(t);return s=ce("{resourceName}:fetchPredictOperation",u._url),a=u._query,delete u._url,delete u._query,r=this.apiClient.request({path:s,queryParams:a,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(e=t.config)===null||e===void 0?void 0:e.httpOptions,abortSignal:(n=t.config)===null||n===void 0?void 0:n.abortSignal}).then(c=>c.json()),r}else throw new Error("This method is only supported by the Vertex AI.")}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function UO(i){const t={},e=x(i,["data"]);if(e!=null&&A(t,["data"],e),x(i,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const n=x(i,["mimeType"]);return n!=null&&A(t,["mimeType"],n),t}function HO(i){const t={},e=x(i,["parts"]);if(e!=null){let r=e;Array.isArray(r)&&(r=r.map(s=>jO(s))),A(t,["parts"],r)}const n=x(i,["role"]);return n!=null&&A(t,["role"],n),t}function qO(i,t,e){const n={},r=x(t,["expireTime"]);e!==void 0&&r!=null&&A(e,["expireTime"],r);const s=x(t,["newSessionExpireTime"]);e!==void 0&&s!=null&&A(e,["newSessionExpireTime"],s);const a=x(t,["uses"]);e!==void 0&&a!=null&&A(e,["uses"],a);const u=x(t,["liveConnectConstraints"]);e!==void 0&&u!=null&&A(e,["bidiGenerateContentSetup"],XO(i,u));const c=x(t,["lockAdditionalFields"]);return e!==void 0&&c!=null&&A(e,["fieldMask"],c),n}function zO(i,t){const e={},n=x(t,["config"]);return n!=null&&A(e,["config"],qO(i,n,e)),e}function GO(i){const t={};if(x(i,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const e=x(i,["fileUri"]);e!=null&&A(t,["fileUri"],e);const n=x(i,["mimeType"]);return n!=null&&A(t,["mimeType"],n),t}function VO(i){const t={},e=x(i,["id"]);e!=null&&A(t,["id"],e);const n=x(i,["args"]);n!=null&&A(t,["args"],n);const r=x(i,["name"]);if(r!=null&&A(t,["name"],r),x(i,["partialArgs"])!==void 0)throw new Error("partialArgs parameter is not supported in Gemini API.");if(x(i,["willContinue"])!==void 0)throw new Error("willContinue parameter is not supported in Gemini API.");return t}function YO(i){const t={};if(x(i,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const e=x(i,["enableWidget"]);return e!=null&&A(t,["enableWidget"],e),t}function $O(i){const t={};if(x(i,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(x(i,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");const e=x(i,["timeRangeFilter"]);return e!=null&&A(t,["timeRangeFilter"],e),t}function WO(i,t){const e={},n=x(i,["generationConfig"]);t!==void 0&&n!=null&&A(t,["setup","generationConfig"],n);const r=x(i,["responseModalities"]);t!==void 0&&r!=null&&A(t,["setup","generationConfig","responseModalities"],r);const s=x(i,["temperature"]);t!==void 0&&s!=null&&A(t,["setup","generationConfig","temperature"],s);const a=x(i,["topP"]);t!==void 0&&a!=null&&A(t,["setup","generationConfig","topP"],a);const u=x(i,["topK"]);t!==void 0&&u!=null&&A(t,["setup","generationConfig","topK"],u);const c=x(i,["maxOutputTokens"]);t!==void 0&&c!=null&&A(t,["setup","generationConfig","maxOutputTokens"],c);const h=x(i,["mediaResolution"]);t!==void 0&&h!=null&&A(t,["setup","generationConfig","mediaResolution"],h);const f=x(i,["seed"]);t!==void 0&&f!=null&&A(t,["setup","generationConfig","seed"],f);const g=x(i,["speechConfig"]);t!==void 0&&g!=null&&A(t,["setup","generationConfig","speechConfig"],tC(g));const m=x(i,["thinkingConfig"]);t!==void 0&&m!=null&&A(t,["setup","generationConfig","thinkingConfig"],m);const y=x(i,["enableAffectiveDialog"]);t!==void 0&&y!=null&&A(t,["setup","generationConfig","enableAffectiveDialog"],y);const w=x(i,["systemInstruction"]);t!==void 0&&w!=null&&A(t,["setup","systemInstruction"],HO(zs(w)));const S=x(i,["tools"]);if(t!==void 0&&S!=null){let q=U1(S);Array.isArray(q)&&(q=q.map(U=>KO(O1(U)))),A(t,["setup","tools"],q)}const T=x(i,["sessionResumption"]);t!==void 0&&T!=null&&A(t,["setup","sessionResumption"],JO(T));const C=x(i,["inputAudioTranscription"]);t!==void 0&&C!=null&&A(t,["setup","inputAudioTranscription"],C);const D=x(i,["outputAudioTranscription"]);t!==void 0&&D!=null&&A(t,["setup","outputAudioTranscription"],D);const R=x(i,["realtimeInputConfig"]);t!==void 0&&R!=null&&A(t,["setup","realtimeInputConfig"],R);const I=x(i,["contextWindowCompression"]);t!==void 0&&I!=null&&A(t,["setup","contextWindowCompression"],I);const F=x(i,["proactivity"]);if(t!==void 0&&F!=null&&A(t,["setup","proactivity"],F),x(i,["explicitVadSignal"])!==void 0)throw new Error("explicitVadSignal parameter is not supported in Gemini API.");return e}function XO(i,t){const e={},n=x(t,["model"]);n!=null&&A(e,["setup","model"],Dn(i,n));const r=x(t,["config"]);return r!=null&&A(e,["config"],WO(r,e)),e}function jO(i){const t={},e=x(i,["mediaResolution"]);e!=null&&A(t,["mediaResolution"],e);const n=x(i,["codeExecutionResult"]);n!=null&&A(t,["codeExecutionResult"],n);const r=x(i,["executableCode"]);r!=null&&A(t,["executableCode"],r);const s=x(i,["fileData"]);s!=null&&A(t,["fileData"],GO(s));const a=x(i,["functionCall"]);a!=null&&A(t,["functionCall"],VO(a));const u=x(i,["functionResponse"]);u!=null&&A(t,["functionResponse"],u);const c=x(i,["inlineData"]);c!=null&&A(t,["inlineData"],UO(c));const h=x(i,["text"]);h!=null&&A(t,["text"],h);const f=x(i,["thought"]);f!=null&&A(t,["thought"],f);const g=x(i,["thoughtSignature"]);g!=null&&A(t,["thoughtSignature"],g);const m=x(i,["videoMetadata"]);return m!=null&&A(t,["videoMetadata"],m),t}function JO(i){const t={},e=x(i,["handle"]);if(e!=null&&A(t,["handle"],e),x(i,["transparent"])!==void 0)throw new Error("transparent parameter is not supported in Gemini API.");return t}function KO(i){const t={},e=x(i,["functionDeclarations"]);if(e!=null){let f=e;Array.isArray(f)&&(f=f.map(g=>g)),A(t,["functionDeclarations"],f)}if(x(i,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const n=x(i,["googleSearchRetrieval"]);n!=null&&A(t,["googleSearchRetrieval"],n);const r=x(i,["computerUse"]);r!=null&&A(t,["computerUse"],r);const s=x(i,["fileSearch"]);s!=null&&A(t,["fileSearch"],s);const a=x(i,["codeExecution"]);if(a!=null&&A(t,["codeExecution"],a),x(i,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const u=x(i,["googleMaps"]);u!=null&&A(t,["googleMaps"],YO(u));const c=x(i,["googleSearch"]);c!=null&&A(t,["googleSearch"],$O(c));const h=x(i,["urlContext"]);return h!=null&&A(t,["urlContext"],h),t}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function QO(i){const t=[];for(const e in i)if(Object.prototype.hasOwnProperty.call(i,e)){const n=i[e];if(typeof n=="object"&&n!=null&&Object.keys(n).length>0){const r=Object.keys(n).map(s=>`${e}.${s}`);t.push(...r)}else t.push(e)}return t.join(",")}function ZO(i,t){let e=null;const n=i.bidiGenerateContentSetup;if(typeof n=="object"&&n!==null&&"setup"in n){const s=n.setup;typeof s=="object"&&s!==null?(i.bidiGenerateContentSetup=s,e=s):delete i.bidiGenerateContentSetup}else n!==void 0&&delete i.bidiGenerateContentSetup;const r=i.fieldMask;if(e){const s=QO(e);if(Array.isArray(t==null?void 0:t.lockAdditionalFields)&&(t==null?void 0:t.lockAdditionalFields.length)===0)s?i.fieldMask=s:delete i.fieldMask;else if(t!=null&&t.lockAdditionalFields&&t.lockAdditionalFields.length>0&&r!==null&&Array.isArray(r)&&r.length>0){const a=["temperature","topK","topP","maxOutputTokens","responseModalities","seed","speechConfig"];let u=[];r.length>0&&(u=r.map(h=>a.includes(h)?`generationConfig.${h}`:h));const c=[];s&&c.push(s),u.length>0&&c.push(...u),c.length>0?i.fieldMask=c.join(","):delete i.fieldMask}else delete i.fieldMask}else r!==null&&Array.isArray(r)&&r.length>0?i.fieldMask=r.join(","):delete i.fieldMask;return i}class tU extends Fh{constructor(t){super(),this.apiClient=t}async create(t){var e,n;let r,s="",a={};if(this.apiClient.isVertexAI())throw new Error("The client.tokens.create method is only supported by the Gemini Developer API.");{const u=zO(this.apiClient,t);s=ce("auth_tokens",u._url),a=u._query,delete u.config,delete u._url,delete u._query;const c=ZO(u,t.config);return r=this.apiClient.request({path:s,queryParams:a,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(e=t.config)===null||e===void 0?void 0:e.httpOptions,abortSignal:(n=t.config)===null||n===void 0?void 0:n.abortSignal}).then(h=>h.json()),r.then(h=>h)}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function eU(i,t){const e={},n=x(i,["force"]);return t!==void 0&&n!=null&&A(t,["_query","force"],n),e}function nU(i){const t={},e=x(i,["name"]);e!=null&&A(t,["_url","name"],e);const n=x(i,["config"]);return n!=null&&eU(n,t),t}function iU(i){const t={},e=x(i,["name"]);return e!=null&&A(t,["_url","name"],e),t}function rU(i,t){const e={},n=x(i,["pageSize"]);t!==void 0&&n!=null&&A(t,["_query","pageSize"],n);const r=x(i,["pageToken"]);return t!==void 0&&r!=null&&A(t,["_query","pageToken"],r),e}function sU(i){const t={},e=x(i,["parent"]);e!=null&&A(t,["_url","parent"],e);const n=x(i,["config"]);return n!=null&&rU(n,t),t}function oU(i){const t={},e=x(i,["sdkHttpResponse"]);e!=null&&A(t,["sdkHttpResponse"],e);const n=x(i,["nextPageToken"]);n!=null&&A(t,["nextPageToken"],n);const r=x(i,["documents"]);if(r!=null){let s=r;Array.isArray(s)&&(s=s.map(a=>a)),A(t,["documents"],s)}return t}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class aU extends Fh{constructor(t){super(),this.apiClient=t,this.list=async e=>new Op(Lh.PAGED_ITEM_DOCUMENTS,n=>this.listInternal({parent:e.parent,config:n.config}),await this.listInternal(e),e)}async get(t){var e,n;let r,s="",a={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const u=iU(t);return s=ce("{name}",u._url),a=u._query,delete u._url,delete u._query,r=this.apiClient.request({path:s,queryParams:a,body:JSON.stringify(u),httpMethod:"GET",httpOptions:(e=t.config)===null||e===void 0?void 0:e.httpOptions,abortSignal:(n=t.config)===null||n===void 0?void 0:n.abortSignal}).then(c=>c.json()),r.then(c=>c)}}async delete(t){var e,n;let r="",s={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const a=nU(t);r=ce("{name}",a._url),s=a._query,delete a._url,delete a._query,await this.apiClient.request({path:r,queryParams:s,body:JSON.stringify(a),httpMethod:"DELETE",httpOptions:(e=t.config)===null||e===void 0?void 0:e.httpOptions,abortSignal:(n=t.config)===null||n===void 0?void 0:n.abortSignal})}}async listInternal(t){var e,n;let r,s="",a={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const u=sU(t);return s=ce("{parent}/documents",u._url),a=u._query,delete u._url,delete u._query,r=this.apiClient.request({path:s,queryParams:a,body:JSON.stringify(u),httpMethod:"GET",httpOptions:(e=t.config)===null||e===void 0?void 0:e.httpOptions,abortSignal:(n=t.config)===null||n===void 0?void 0:n.abortSignal}).then(c=>c.json()),r.then(c=>{const h=oU(c),f=new Hk;return Object.assign(f,h),f})}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class lU extends Fh{constructor(t,e=new aU(t)){super(),this.apiClient=t,this.documents=e,this.list=async(n={})=>new Op(Lh.PAGED_ITEM_FILE_SEARCH_STORES,r=>this.listInternal(r),await this.listInternal(n),n)}async uploadToFileSearchStore(t){if(this.apiClient.isVertexAI())throw new Error("Vertex AI does not support uploading files to a file search store.");return this.apiClient.uploadFileToFileSearchStore(t.fileSearchStoreName,t.file,t.config)}async create(t){var e,n;let r,s="",a={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const u=Q9(t);return s=ce("fileSearchStores",u._url),a=u._query,delete u._url,delete u._query,r=this.apiClient.request({path:s,queryParams:a,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(e=t.config)===null||e===void 0?void 0:e.httpOptions,abortSignal:(n=t.config)===null||n===void 0?void 0:n.abortSignal}).then(c=>c.json()),r.then(c=>c)}}async get(t){var e,n;let r,s="",a={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const u=eO(t);return s=ce("{name}",u._url),a=u._query,delete u._url,delete u._query,r=this.apiClient.request({path:s,queryParams:a,body:JSON.stringify(u),httpMethod:"GET",httpOptions:(e=t.config)===null||e===void 0?void 0:e.httpOptions,abortSignal:(n=t.config)===null||n===void 0?void 0:n.abortSignal}).then(c=>c.json()),r.then(c=>c)}}async delete(t){var e,n;let r="",s={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const a=tO(t);r=ce("{name}",a._url),s=a._query,delete a._url,delete a._query,await this.apiClient.request({path:r,queryParams:s,body:JSON.stringify(a),httpMethod:"DELETE",httpOptions:(e=t.config)===null||e===void 0?void 0:e.httpOptions,abortSignal:(n=t.config)===null||n===void 0?void 0:n.abortSignal})}}async listInternal(t){var e,n;let r,s="",a={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const u=aO(t);return s=ce("fileSearchStores",u._url),a=u._query,delete u._url,delete u._query,r=this.apiClient.request({path:s,queryParams:a,body:JSON.stringify(u),httpMethod:"GET",httpOptions:(e=t.config)===null||e===void 0?void 0:e.httpOptions,abortSignal:(n=t.config)===null||n===void 0?void 0:n.abortSignal}).then(c=>c.json()),r.then(c=>{const h=lO(c),f=new qk;return Object.assign(f,h),f})}}async uploadToFileSearchStoreInternal(t){var e,n;let r,s="",a={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const u=uO(t);return s=ce("upload/v1beta/{file_search_store_name}:uploadToFileSearchStore",u._url),a=u._query,delete u._url,delete u._query,r=this.apiClient.request({path:s,queryParams:a,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(e=t.config)===null||e===void 0?void 0:e.httpOptions,abortSignal:(n=t.config)===null||n===void 0?void 0:n.abortSignal}).then(c=>c.json()),r.then(c=>{const h=cO(c),f=new zk;return Object.assign(f,h),f})}}async importFile(t){var e,n;let r,s="",a={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const u=rO(t);return s=ce("{file_search_store_name}:importFile",u._url),a=u._query,delete u._url,delete u._query,r=this.apiClient.request({path:s,queryParams:a,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(e=t.config)===null||e===void 0?void 0:e.httpOptions,abortSignal:(n=t.config)===null||n===void 0?void 0:n.abortSignal}).then(c=>c.json()),r.then(c=>{const h=iO(c),f=new jE;return Object.assign(f,h),f})}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */let aR=function(){const{crypto:i}=globalThis;if(i!=null&&i.randomUUID)return aR=i.randomUUID.bind(i),i.randomUUID();const t=new Uint8Array(1),e=i?()=>i.getRandomValues(t)[0]:()=>Math.random()*255&255;return"10000000-1000-4000-8000-100000000000".replace(/[018]/g,n=>(+n^e()&15>>+n/4).toString(16))};const uU=()=>aR();/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function jw(i){return typeof i=="object"&&i!==null&&("name"in i&&i.name==="AbortError"||"message"in i&&String(i.message).includes("FetchRequestCanceledException"))}const Jw=i=>{if(i instanceof Error)return i;if(typeof i=="object"&&i!==null){try{if(Object.prototype.toString.call(i)==="[object Error]"){const t=new Error(i.message,i.cause?{cause:i.cause}:{});return i.stack&&(t.stack=i.stack),i.cause&&!t.cause&&(t.cause=i.cause),i.name&&(t.name=i.name),t}}catch{}try{return new Error(JSON.stringify(i))}catch{}}return new Error(i)};/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class al extends Error{}class ao extends al{constructor(t,e,n,r){super(`${ao.makeMessage(t,e,n)}`),this.status=t,this.headers=r,this.error=e}static makeMessage(t,e,n){const r=e!=null&&e.message?typeof e.message=="string"?e.message:JSON.stringify(e.message):e?JSON.stringify(e):n;return t&&r?`${t} ${r}`:t?`${t} status code (no body)`:r||"(no status code or body)"}static generate(t,e,n,r){if(!t||!r)return new FA({message:n,cause:Jw(e)});const s=e;return t===400?new uR(t,s,n,r):t===401?new cR(t,s,n,r):t===403?new hR(t,s,n,r):t===404?new fR(t,s,n,r):t===409?new dR(t,s,n,r):t===422?new pR(t,s,n,r):t===429?new gR(t,s,n,r):t>=500?new mR(t,s,n,r):new ao(t,s,n,r)}}class Kw extends ao{constructor({message:t}={}){super(void 0,void 0,t||"Request was aborted.",void 0)}}class FA extends ao{constructor({message:t,cause:e}){super(void 0,void 0,t||"Connection error.",void 0),e&&(this.cause=e)}}class lR extends FA{constructor({message:t}={}){super({message:t??"Request timed out."})}}class uR extends ao{}class cR extends ao{}class hR extends ao{}class fR extends ao{}class dR extends ao{}class pR extends ao{}class gR extends ao{}class mR extends ao{}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const cU=/^[a-z][a-z0-9+.-]*:/i,hU=i=>cU.test(i);let Qw=i=>(Qw=Array.isArray,Qw(i));const fU=Qw;let dU=fU;const C6=dU;function pU(i){if(!i)return!0;for(const t in i)return!1;return!0}function gU(i,t){return Object.prototype.hasOwnProperty.call(i,t)}const mU=(i,t)=>{if(typeof t!="number"||!Number.isInteger(t))throw new al(`${i} must be an integer`);if(t<0)throw new al(`${i} must be a positive integer`);return t},vU=i=>{try{return JSON.parse(i)}catch{return}};/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const yU=i=>new Promise(t=>setTimeout(t,i));/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const Og="0.0.1";/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function xU(){return typeof Deno<"u"&&Deno.build!=null?"deno":typeof EdgeRuntime<"u"?"edge":Object.prototype.toString.call(typeof globalThis.process<"u"?globalThis.process:0)==="[object process]"?"node":"unknown"}const bU=()=>{var i,t,e,n,r;const s=xU();if(s==="deno")return{"X-Stainless-Lang":"js","X-Stainless-Package-Version":Og,"X-Stainless-OS":N6(Deno.build.os),"X-Stainless-Arch":T6(Deno.build.arch),"X-Stainless-Runtime":"deno","X-Stainless-Runtime-Version":typeof Deno.version=="string"?Deno.version:(t=(i=Deno.version)===null||i===void 0?void 0:i.deno)!==null&&t!==void 0?t:"unknown"};if(typeof EdgeRuntime<"u")return{"X-Stainless-Lang":"js","X-Stainless-Package-Version":Og,"X-Stainless-OS":"Unknown","X-Stainless-Arch":`other:${EdgeRuntime}`,"X-Stainless-Runtime":"edge","X-Stainless-Runtime-Version":globalThis.process.version};if(s==="node")return{"X-Stainless-Lang":"js","X-Stainless-Package-Version":Og,"X-Stainless-OS":N6((e=globalThis.process.platform)!==null&&e!==void 0?e:"unknown"),"X-Stainless-Arch":T6((n=globalThis.process.arch)!==null&&n!==void 0?n:"unknown"),"X-Stainless-Runtime":"node","X-Stainless-Runtime-Version":(r=globalThis.process.version)!==null&&r!==void 0?r:"unknown"};const a=AU();return a?{"X-Stainless-Lang":"js","X-Stainless-Package-Version":Og,"X-Stainless-OS":"Unknown","X-Stainless-Arch":"unknown","X-Stainless-Runtime":`browser:${a.browser}`,"X-Stainless-Runtime-Version":a.version}:{"X-Stainless-Lang":"js","X-Stainless-Package-Version":Og,"X-Stainless-OS":"Unknown","X-Stainless-Arch":"unknown","X-Stainless-Runtime":"unknown","X-Stainless-Runtime-Version":"unknown"}};function AU(){if(typeof navigator>"u"||!navigator)return null;const i=[{key:"edge",pattern:/Edge(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"ie",pattern:/MSIE(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"ie",pattern:/Trident(?:.*rv\:(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"chrome",pattern:/Chrome(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"firefox",pattern:/Firefox(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"safari",pattern:/(?:Version\W+(\d+)\.(\d+)(?:\.(\d+))?)?(?:\W+Mobile\S*)?\W+Safari/}];for(const{key:t,pattern:e}of i){const n=e.exec(navigator.userAgent);if(n){const r=n[1]||0,s=n[2]||0,a=n[3]||0;return{browser:t,version:`${r}.${s}.${a}`}}}return null}const T6=i=>i==="x32"?"x32":i==="x86_64"||i==="x64"?"x64":i==="arm"?"arm":i==="aarch64"||i==="arm64"?"arm64":i?`other:${i}`:"unknown",N6=i=>(i=i.toLowerCase(),i.includes("ios")?"iOS":i==="android"?"Android":i==="darwin"?"MacOS":i==="win32"?"Windows":i==="freebsd"?"FreeBSD":i==="openbsd"?"OpenBSD":i==="linux"?"Linux":i?`Other:${i}`:"Unknown");let t5;const _U=()=>t5??(t5=bU());/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function wU(){if(typeof fetch<"u")return fetch;throw new Error("`fetch` is not defined as a global; Either pass `fetch` to the client, `new GeminiNextGenAPIClient({ fetch })` or polyfill the global, `globalThis.fetch = fetch`")}function vR(...i){const t=globalThis.ReadableStream;if(typeof t>"u")throw new Error("`ReadableStream` is not defined as a global; You will need to polyfill it, `globalThis.ReadableStream = ReadableStream`");return new t(...i)}function SU(i){let t=Symbol.asyncIterator in i?i[Symbol.asyncIterator]():i[Symbol.iterator]();return vR({start(){},async pull(e){const{done:n,value:r}=await t.next();n?e.close():e.enqueue(r)},async cancel(){var e;await((e=t.return)===null||e===void 0?void 0:e.call(t))}})}function yR(i){if(i[Symbol.asyncIterator])return i;const t=i.getReader();return{async next(){try{const e=await t.read();return e!=null&&e.done&&t.releaseLock(),e}catch(e){throw t.releaseLock(),e}},async return(){const e=t.cancel();return t.releaseLock(),await e,{done:!0,value:void 0}},[Symbol.asyncIterator](){return this}}}async function EU(i){var t,e;if(i===null||typeof i!="object")return;if(i[Symbol.asyncIterator]){await((e=(t=i[Symbol.asyncIterator]()).return)===null||e===void 0?void 0:e.call(t));return}const n=i.getReader(),r=n.cancel();n.releaseLock(),await r}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const CU=({headers:i,body:t})=>({bodyHeaders:{"content-type":"application/json"},body:JSON.stringify(t)});/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const xR=()=>{var i;if(typeof File>"u"){const{process:t}=globalThis,e=typeof((i=t==null?void 0:t.versions)===null||i===void 0?void 0:i.node)=="string"&&parseInt(t.versions.node.split("."))<20;throw new Error("`File` is not defined as a global, which is required for file uploads."+(e?" Update to Node 20 LTS or newer, or set `globalThis.File` to `import('node:buffer').File`.":""))}};function vw(i,t,e){return xR(),new File(i,t??"unknown_file",e)}function TU(i){return(typeof i=="object"&&i!==null&&("name"in i&&i.name&&String(i.name)||"url"in i&&i.url&&String(i.url)||"filename"in i&&i.filename&&String(i.filename)||"path"in i&&i.path&&String(i.path))||"").split(/[\\/]/).pop()||void 0}const NU=i=>i!=null&&typeof i=="object"&&typeof i[Symbol.asyncIterator]=="function";/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const bR=i=>i!=null&&typeof i=="object"&&typeof i.size=="number"&&typeof i.type=="string"&&typeof i.text=="function"&&typeof i.slice=="function"&&typeof i.arrayBuffer=="function",RU=i=>i!=null&&typeof i=="object"&&typeof i.name=="string"&&typeof i.lastModified=="number"&&bR(i),DU=i=>i!=null&&typeof i=="object"&&typeof i.url=="string"&&typeof i.blob=="function";async function LU(i,t,e){if(xR(),i=await i,RU(i))return i instanceof File?i:vw([await i.arrayBuffer()],i.name);if(DU(i)){const r=await i.blob();return t||(t=new URL(i.url).pathname.split(/[\\/]/).pop()),vw(await Zw(r),t,e)}const n=await Zw(i);if(t||(t=TU(i)),!(e!=null&&e.type)){const r=n.find(s=>typeof s=="object"&&"type"in s&&s.type);typeof r=="string"&&(e=Object.assign(Object.assign({},e),{type:r}))}return vw(n,t,e)}async function Zw(i){var t,e,n,r,s;let a=[];if(typeof i=="string"||ArrayBuffer.isView(i)||i instanceof ArrayBuffer)a.push(i);else if(bR(i))a.push(i instanceof Blob?i:await i.arrayBuffer());else if(NU(i))try{for(var u=!0,c=Xl(i),h;h=await c.next(),t=h.done,!t;u=!0){r=h.value,u=!1;const f=r;a.push(...await Zw(f))}}catch(f){e={error:f}}finally{try{!u&&!t&&(n=c.return)&&await n.call(c)}finally{if(e)throw e.error}}else{const f=(s=i==null?void 0:i.constructor)===null||s===void 0?void 0:s.name;throw new Error(`Unexpected data type: ${typeof i}${f?`; constructor: ${f}`:""}${MU(i)}`)}return a}function MU(i){return typeof i!="object"||i===null?"":`; props: [${Object.getOwnPropertyNames(i).map(e=>`"${e}"`).join(", ")}]`}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class AR{constructor(t){this._client=t}}AR._key=[];/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function _R(i){return i.replace(/[^A-Za-z0-9\-._~!$&'()*+,;=:@]+/g,encodeURIComponent)}const R6=Object.freeze(Object.create(null)),IU=(i=_R)=>(function(e,...n){if(e.length===1)return e[0];let r=!1;const s=[],a=e.reduce((f,g,m)=>{var y,w,S;/[?#]/.test(g)&&(r=!0);const T=n[m];let C=(r?encodeURIComponent:i)(""+T);return m!==n.length&&(T==null||typeof T=="object"&&T.toString===((S=Object.getPrototypeOf((w=Object.getPrototypeOf((y=T.hasOwnProperty)!==null&&y!==void 0?y:R6))!==null&&w!==void 0?w:R6))===null||S===void 0?void 0:S.toString))&&(C=T+"",s.push({start:f.length+g.length,length:C.length,error:`Value of type ${Object.prototype.toString.call(T).slice(8,-1)} is not a valid path parameter`})),f+g+(m===n.length?"":C)},""),u=a.split(/[?#]/,1)[0],c=new RegExp("(?<=^|\\/)(?:\\.|%2e){1,2}(?=\\/|$)","gi");let h;for(;(h=c.exec(u))!==null;)s.push({start:h.index,length:h[0].length,error:`Value "${h[0]}" can't be safely passed as a path parameter`});if(s.sort((f,g)=>f.start-g.start),s.length>0){let f=0;const g=s.reduce((m,y)=>{const w=" ".repeat(y.start-f),S="^".repeat(y.length);return f=y.start+y.length,m+w+S},"");throw new al(`Path parameters result in path with invalid segments:
${s.map(m=>m.error).join(`
`)}
${a}
${g}`)}return a}),e5=IU(_R);/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class wR extends AR{create(t,e){var n;const{api_version:r=this._client.apiVersion}=t,s=Wb(t,["api_version"]);if("model"in s&&"agent_config"in s)throw new al("Invalid request: specified `model` and `agent_config`. If specifying `model`, use `generation_config`.");if("agent"in s&&"generation_config"in s)throw new al("Invalid request: specified `agent` and `generation_config`. If specifying `agent`, use `agent_config`.");return this._client.post(e5`/${r}/interactions`,Object.assign(Object.assign({body:s},e),{stream:(n=t.stream)!==null&&n!==void 0?n:!1}))}delete(t,e={},n){const{api_version:r=this._client.apiVersion}=e??{};return this._client.delete(e5`/${r}/interactions/${t}`,n)}cancel(t,e={},n){const{api_version:r=this._client.apiVersion}=e??{};return this._client.post(e5`/${r}/interactions/${t}/cancel`,n)}get(t,e={},n){var r;const s=e??{},{api_version:a=this._client.apiVersion}=s,u=Wb(s,["api_version"]);return this._client.get(e5`/${a}/interactions/${t}`,Object.assign(Object.assign({query:u},n),{stream:(r=e==null?void 0:e.stream)!==null&&r!==void 0?r:!1}))}}wR._key=Object.freeze(["interactions"]);class SR extends wR{}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function PU(i){let t=0;for(const r of i)t+=r.length;const e=new Uint8Array(t);let n=0;for(const r of i)e.set(r,n),n+=r.length;return e}let n5;function nC(i){let t;return(n5??(t=new globalThis.TextEncoder,n5=t.encode.bind(t)))(i)}let i5;function D6(i){let t;return(i5??(t=new globalThis.TextDecoder,i5=t.decode.bind(t)))(i)}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class BA{constructor(){this.buffer=new Uint8Array,this.carriageReturnIndex=null}decode(t){if(t==null)return[];const e=t instanceof ArrayBuffer?new Uint8Array(t):typeof t=="string"?nC(t):t;this.buffer=PU([this.buffer,e]);const n=[];let r;for(;(r=kU(this.buffer,this.carriageReturnIndex))!=null;){if(r.carriage&&this.carriageReturnIndex==null){this.carriageReturnIndex=r.index;continue}if(this.carriageReturnIndex!=null&&(r.index!==this.carriageReturnIndex+1||r.carriage)){n.push(D6(this.buffer.subarray(0,this.carriageReturnIndex-1))),this.buffer=this.buffer.subarray(this.carriageReturnIndex),this.carriageReturnIndex=null;continue}const s=this.carriageReturnIndex!==null?r.preceding-1:r.preceding,a=D6(this.buffer.subarray(0,s));n.push(a),this.buffer=this.buffer.subarray(r.index),this.carriageReturnIndex=null}return n}flush(){return this.buffer.length?this.decode(`
`):[]}}BA.NEWLINE_CHARS=new Set([`
`,"\r"]);BA.NEWLINE_REGEXP=/\r\n|[\n\r]/g;function kU(i,t){for(let r=t??0;r<i.length;r++){if(i[r]===10)return{preceding:r,index:r+1,carriage:!1};if(i[r]===13)return{preceding:r,index:r+1,carriage:!0}}return null}function FU(i){for(let n=0;n<i.length-1;n++){if(i[n]===10&&i[n+1]===10||i[n]===13&&i[n+1]===13)return n+2;if(i[n]===13&&i[n+1]===10&&n+3<i.length&&i[n+2]===13&&i[n+3]===10)return n+4}return-1}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const Xb={off:0,error:200,warn:300,info:400,debug:500},L6=(i,t,e)=>{if(i){if(gU(Xb,i))return i;no(e).warn(`${t} was set to ${JSON.stringify(i)}, expected one of ${JSON.stringify(Object.keys(Xb))}`)}};function kv(){}function r5(i,t,e){return!t||Xb[i]>Xb[e]?kv:t[i].bind(t)}const BU={error:kv,warn:kv,info:kv,debug:kv};let M6=new WeakMap;function no(i){var t;const e=i.logger,n=(t=i.logLevel)!==null&&t!==void 0?t:"off";if(!e)return BU;const r=M6.get(e);if(r&&r[0]===n)return r[1];const s={error:r5("error",e,n),warn:r5("warn",e,n),info:r5("info",e,n),debug:r5("debug",e,n)};return M6.set(e,[n,s]),s}const u0=i=>(i.options&&(i.options=Object.assign({},i.options),delete i.options.headers),i.headers&&(i.headers=Object.fromEntries((i.headers instanceof Headers?[...i.headers]:Object.entries(i.headers)).map(([t,e])=>[t,t.toLowerCase()==="x-goog-api-key"||t.toLowerCase()==="authorization"||t.toLowerCase()==="cookie"||t.toLowerCase()==="set-cookie"?"***":e]))),"retryOfRequestLogID"in i&&(i.retryOfRequestLogID&&(i.retryOf=i.retryOfRequestLogID),delete i.retryOfRequestLogID),i);/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class Jg{constructor(t,e,n){this.iterator=t,this.controller=e,this.client=n}static fromSSEResponse(t,e,n){let r=!1;const s=n?no(n):console;function a(){return Wl(this,arguments,function*(){var c,h,f,g;if(r)throw new al("Cannot iterate over a consumed stream, use `.tee()` to split the stream.");r=!0;let m=!1;try{try{for(var y=!0,w=Xl(OU(t,e)),S;S=yield He(w.next()),c=S.done,!c;y=!0){g=S.value,y=!1;const T=g;if(!m)if(T.data.startsWith("[DONE]")){m=!0;continue}else try{yield yield He(JSON.parse(T.data))}catch(C){throw s.error("Could not parse message into JSON:",T.data),s.error("From chunk:",T.raw),C}}}catch(T){h={error:T}}finally{try{!y&&!c&&(f=w.return)&&(yield He(f.call(w)))}finally{if(h)throw h.error}}m=!0}catch(T){if(jw(T))return yield He(void 0);throw T}finally{m||e.abort()}})}return new Jg(a,e,n)}static fromReadableStream(t,e,n){let r=!1;function s(){return Wl(this,arguments,function*(){var c,h,f,g;const m=new BA,y=yR(t);try{for(var w=!0,S=Xl(y),T;T=yield He(S.next()),c=T.done,!c;w=!0){g=T.value,w=!1;const C=g;for(const D of m.decode(C))yield yield He(D)}}catch(C){h={error:C}}finally{try{!w&&!c&&(f=S.return)&&(yield He(f.call(S)))}finally{if(h)throw h.error}}for(const C of m.flush())yield yield He(C)})}function a(){return Wl(this,arguments,function*(){var c,h,f,g;if(r)throw new al("Cannot iterate over a consumed stream, use `.tee()` to split the stream.");r=!0;let m=!1;try{try{for(var y=!0,w=Xl(s()),S;S=yield He(w.next()),c=S.done,!c;y=!0){g=S.value,y=!1;const T=g;m||T&&(yield yield He(JSON.parse(T)))}}catch(T){h={error:T}}finally{try{!y&&!c&&(f=w.return)&&(yield He(f.call(w)))}finally{if(h)throw h.error}}m=!0}catch(T){if(jw(T))return yield He(void 0);throw T}finally{m||e.abort()}})}return new Jg(a,e,n)}[Symbol.asyncIterator](){return this.iterator()}tee(){const t=[],e=[],n=this.iterator(),r=s=>({next:()=>{if(s.length===0){const a=n.next();t.push(a),e.push(a)}return s.shift()}});return[new Jg(()=>r(t),this.controller,this.client),new Jg(()=>r(e),this.controller,this.client)]}toReadableStream(){const t=this;let e;return vR({async start(){e=t[Symbol.asyncIterator]()},async pull(n){try{const{value:r,done:s}=await e.next();if(s)return n.close();const a=nC(JSON.stringify(r)+`
`);n.enqueue(a)}catch(r){n.error(r)}},async cancel(){var n;await((n=e.return)===null||n===void 0?void 0:n.call(e))}})}}function OU(i,t){return Wl(this,arguments,function*(){var n,r,s,a;if(!i.body)throw t.abort(),typeof globalThis.navigator<"u"&&globalThis.navigator.product==="ReactNative"?new al("The default react-native fetch implementation does not support streaming. Please use expo/fetch: https://docs.expo.dev/versions/latest/sdk/expo/#expofetch-api"):new al("Attempted to iterate over a response with no body");const u=new HU,c=new BA,h=yR(i.body);try{for(var f=!0,g=Xl(UU(h)),m;m=yield He(g.next()),n=m.done,!n;f=!0){a=m.value,f=!1;const y=a;for(const w of c.decode(y)){const S=u.decode(w);S&&(yield yield He(S))}}}catch(y){r={error:y}}finally{try{!f&&!n&&(s=g.return)&&(yield He(s.call(g)))}finally{if(r)throw r.error}}for(const y of c.flush()){const w=u.decode(y);w&&(yield yield He(w))}})}function UU(i){return Wl(this,arguments,function*(){var e,n,r,s;let a=new Uint8Array;try{for(var u=!0,c=Xl(i),h;h=yield He(c.next()),e=h.done,!e;u=!0){s=h.value,u=!1;const f=s;if(f==null)continue;const g=f instanceof ArrayBuffer?new Uint8Array(f):typeof f=="string"?nC(f):f;let m=new Uint8Array(a.length+g.length);m.set(a),m.set(g,a.length),a=m;let y;for(;(y=FU(a))!==-1;)yield yield He(a.slice(0,y)),a=a.slice(y)}}catch(f){n={error:f}}finally{try{!u&&!e&&(r=c.return)&&(yield He(r.call(c)))}finally{if(n)throw n.error}}a.length>0&&(yield yield He(a))})}class HU{constructor(){this.event=null,this.data=[],this.chunks=[]}decode(t){if(t.endsWith("\r")&&(t=t.substring(0,t.length-1)),!t){if(!this.event&&!this.data.length)return null;const s={event:this.event,data:this.data.join(`
`),raw:this.chunks};return this.event=null,this.data=[],this.chunks=[],s}if(this.chunks.push(t),t.startsWith(":"))return null;let[e,n,r]=qU(t,":");return r.startsWith(" ")&&(r=r.substring(1)),e==="event"?this.event=r:e==="data"&&this.data.push(r),null}}function qU(i,t){const e=i.indexOf(t);return e!==-1?[i.substring(0,e),t,i.substring(e+t.length)]:[i,"",""]}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */async function zU(i,t){const{response:e,requestLogID:n,retryOfRequestLogID:r,startTime:s}=t,a=await(async()=>{var u;if(t.options.stream)return no(i).debug("response",e.status,e.url,e.headers,e.body),t.options.__streamClass?t.options.__streamClass.fromSSEResponse(e,t.controller,i):Jg.fromSSEResponse(e,t.controller,i);if(e.status===204)return null;if(t.options.__binaryResponse)return e;const c=e.headers.get("content-type"),h=(u=c==null?void 0:c.split(";")[0])===null||u===void 0?void 0:u.trim();return(h==null?void 0:h.includes("application/json"))||(h==null?void 0:h.endsWith("+json"))?await e.json():await e.text()})();return no(i).debug(`[${n}] response parsed`,u0({retryOfRequestLogID:r,url:e.url,status:e.status,body:a,durationMs:Date.now()-s})),a}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class iC extends Promise{constructor(t,e,n=zU){super(r=>{r(null)}),this.responsePromise=e,this.parseResponse=n,this.client=t}_thenUnwrap(t){return new iC(this.client,this.responsePromise,async(e,n)=>t(await this.parseResponse(e,n),n))}asResponse(){return this.responsePromise.then(t=>t.response)}async withResponse(){const[t,e]=await Promise.all([this.parse(),this.asResponse()]);return{data:t,response:e}}parse(){return this.parsedPromise||(this.parsedPromise=this.responsePromise.then(t=>this.parseResponse(this.client,t))),this.parsedPromise}then(t,e){return this.parse().then(t,e)}catch(t){return this.parse().catch(t)}finally(t){return this.parse().finally(t)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const ER=Symbol("brand.privateNullableHeaders");function*GU(i){if(!i)return;if(ER in i){const{values:n,nulls:r}=i;yield*n.entries();for(const s of r)yield[s,null];return}let t=!1,e;i instanceof Headers?e=i.entries():C6(i)?e=i:(t=!0,e=Object.entries(i??{}));for(let n of e){const r=n[0];if(typeof r!="string")throw new TypeError("expected header name to be a string");const s=C6(n[1])?n[1]:[n[1]];let a=!1;for(const u of s)u!==void 0&&(t&&!a&&(a=!0,yield[r,null]),yield[r,u])}}const Tv=i=>{const t=new Headers,e=new Set;for(const n of i){const r=new Set;for(const[s,a]of GU(n)){const u=s.toLowerCase();r.has(u)||(t.delete(s),r.add(u)),a===null?(t.delete(s),e.add(u)):(t.append(s,a),e.delete(u))}}return{[ER]:!0,values:t,nulls:e}};/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const yw=i=>{var t,e,n,r,s,a;if(typeof globalThis.process<"u")return(n=(e=(t=gk)===null||t===void 0?void 0:t[i])===null||e===void 0?void 0:e.trim())!==null&&n!==void 0?n:void 0;if(typeof globalThis.Deno<"u")return(a=(s=(r=globalThis.Deno.env)===null||r===void 0?void 0:r.get)===null||s===void 0?void 0:s.call(r,i))===null||a===void 0?void 0:a.trim()};/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */var CR;class OA{constructor(t){var e,n,r,s,a,u,c,{baseURL:h=yw("GEMINI_NEXT_GEN_API_BASE_URL"),apiKey:f=(e=yw("GEMINI_API_KEY"))!==null&&e!==void 0?e:null,apiVersion:g="v1beta"}=t,m=Wb(t,["baseURL","apiKey","apiVersion"]);const y=Object.assign(Object.assign({apiKey:f,apiVersion:g},m),{baseURL:h||"https://generativelanguage.googleapis.com"});this.baseURL=y.baseURL,this.timeout=(n=y.timeout)!==null&&n!==void 0?n:OA.DEFAULT_TIMEOUT,this.logger=(r=y.logger)!==null&&r!==void 0?r:console;const w="warn";this.logLevel=w,this.logLevel=(a=(s=L6(y.logLevel,"ClientOptions.logLevel",this))!==null&&s!==void 0?s:L6(yw("GEMINI_NEXT_GEN_API_LOG"),"process.env['GEMINI_NEXT_GEN_API_LOG']",this))!==null&&a!==void 0?a:w,this.fetchOptions=y.fetchOptions,this.maxRetries=(u=y.maxRetries)!==null&&u!==void 0?u:2,this.fetch=(c=y.fetch)!==null&&c!==void 0?c:wU(),this.encoder=CU,this._options=y,this.apiKey=f,this.apiVersion=g,this.clientAdapter=y.clientAdapter}withOptions(t){return new this.constructor(Object.assign(Object.assign(Object.assign({},this._options),{baseURL:this.baseURL,maxRetries:this.maxRetries,timeout:this.timeout,logger:this.logger,logLevel:this.logLevel,fetch:this.fetch,fetchOptions:this.fetchOptions,apiKey:this.apiKey,apiVersion:this.apiVersion}),t))}baseURLOverridden(){return this.baseURL!=="https://generativelanguage.googleapis.com"}defaultQuery(){return this._options.defaultQuery}validateHeaders({values:t,nulls:e}){if(!(t.has("authorization")||t.has("x-goog-api-key"))&&!(this.apiKey&&t.get("x-goog-api-key"))&&!e.has("x-goog-api-key"))throw new Error('Could not resolve authentication method. Expected the apiKey to be set. Or for the "x-goog-api-key" headers to be explicitly omitted')}async authHeaders(t){const e=Tv([t.headers]);if(!(e.values.has("authorization")||e.values.has("x-goog-api-key"))){if(this.apiKey)return Tv([{"x-goog-api-key":this.apiKey}]);if(this.clientAdapter.isVertexAI())return Tv([await this.clientAdapter.getAuthHeaders()])}}stringifyQuery(t){return Object.entries(t).filter(([e,n])=>typeof n<"u").map(([e,n])=>{if(typeof n=="string"||typeof n=="number"||typeof n=="boolean")return`${encodeURIComponent(e)}=${encodeURIComponent(n)}`;if(n===null)return`${encodeURIComponent(e)}=`;throw new al(`Cannot stringify type ${typeof n}; Expected string, number, boolean, or null. If you need to pass nested query parameters, you can manually encode them, e.g. { query: { 'foo[key1]': value1, 'foo[key2]': value2 } }, and please open a GitHub issue requesting better support for your use case.`)}).join("&")}getUserAgent(){return`${this.constructor.name}/JS ${Og}`}defaultIdempotencyKey(){return`stainless-node-retry-${uU()}`}makeStatusError(t,e,n,r){return ao.generate(t,e,n,r)}buildURL(t,e,n){const r=!this.baseURLOverridden()&&n||this.baseURL,s=hU(t)?new URL(t):new URL(r+(r.endsWith("/")&&t.startsWith("/")?t.slice(1):t)),a=this.defaultQuery();return pU(a)||(e=Object.assign(Object.assign({},a),e)),typeof e=="object"&&e&&!Array.isArray(e)&&(s.search=this.stringifyQuery(e)),s.toString()}async prepareOptions(t){if(this.clientAdapter&&this.clientAdapter.isVertexAI()&&!t.path.startsWith(`/${this.apiVersion}/projects/`)){const e=t.path.slice(this.apiVersion.length+1);t.path=`/${this.apiVersion}/projects/${this.clientAdapter.getProject()}/locations/${this.clientAdapter.getLocation()}${e}`}}async prepareRequest(t,{url:e,options:n}){}get(t,e){return this.methodRequest("get",t,e)}post(t,e){return this.methodRequest("post",t,e)}patch(t,e){return this.methodRequest("patch",t,e)}put(t,e){return this.methodRequest("put",t,e)}delete(t,e){return this.methodRequest("delete",t,e)}methodRequest(t,e,n){return this.request(Promise.resolve(n).then(r=>Object.assign({method:t,path:e},r)))}request(t,e=null){return new iC(this,this.makeRequest(t,e,void 0))}async makeRequest(t,e,n){var r,s,a;const u=await t,c=(r=u.maxRetries)!==null&&r!==void 0?r:this.maxRetries;e==null&&(e=c),await this.prepareOptions(u);const{req:h,url:f,timeout:g}=await this.buildRequest(u,{retryCount:c-e});await this.prepareRequest(h,{url:f,options:u});const m="log_"+(Math.random()*(1<<24)|0).toString(16).padStart(6,"0"),y=n===void 0?"":`, retryOf: ${n}`,w=Date.now();if(no(this).debug(`[${m}] sending request`,u0({retryOfRequestLogID:n,method:u.method,url:f,options:u,headers:h.headers})),!((s=u.signal)===null||s===void 0)&&s.aborted)throw new Kw;const S=new AbortController,T=await this.fetchWithTimeout(f,h,g,S).catch(Jw),C=Date.now();if(T instanceof globalThis.Error){const R=`retrying, ${e} attempts remaining`;if(!((a=u.signal)===null||a===void 0)&&a.aborted)throw new Kw;const I=jw(T)||/timed? ?out/i.test(String(T)+("cause"in T?String(T.cause):""));if(e)return no(this).info(`[${m}] connection ${I?"timed out":"failed"} - ${R}`),no(this).debug(`[${m}] connection ${I?"timed out":"failed"} (${R})`,u0({retryOfRequestLogID:n,url:f,durationMs:C-w,message:T.message})),this.retryRequest(u,e,n??m);throw no(this).info(`[${m}] connection ${I?"timed out":"failed"} - error; no more retries left`),no(this).debug(`[${m}] connection ${I?"timed out":"failed"} (error; no more retries left)`,u0({retryOfRequestLogID:n,url:f,durationMs:C-w,message:T.message})),I?new lR:new FA({cause:T})}const D=`[${m}${y}] ${h.method} ${f} ${T.ok?"succeeded":"failed"} with status ${T.status} in ${C-w}ms`;if(!T.ok){const R=await this.shouldRetry(T);if(e&&R){const tt=`retrying, ${e} attempts remaining`;return await EU(T.body),no(this).info(`${D} - ${tt}`),no(this).debug(`[${m}] response error (${tt})`,u0({retryOfRequestLogID:n,url:T.url,status:T.status,headers:T.headers,durationMs:C-w})),this.retryRequest(u,e,n??m,T.headers)}const I=R?"error; no more retries left":"error; not retryable";no(this).info(`${D} - ${I}`);const F=await T.text().catch(tt=>Jw(tt).message),q=vU(F),U=q?void 0:F;throw no(this).debug(`[${m}] response error (${I})`,u0({retryOfRequestLogID:n,url:T.url,status:T.status,headers:T.headers,message:U,durationMs:Date.now()-w})),this.makeStatusError(T.status,q,U,T.headers)}return no(this).info(D),no(this).debug(`[${m}] response start`,u0({retryOfRequestLogID:n,url:T.url,status:T.status,headers:T.headers,durationMs:C-w})),{response:T,options:u,controller:S,requestLogID:m,retryOfRequestLogID:n,startTime:w}}async fetchWithTimeout(t,e,n,r){const s=e||{},{signal:a,method:u}=s,c=Wb(s,["signal","method"]);a&&a.addEventListener("abort",()=>r.abort());const h=setTimeout(()=>r.abort(),n),f=globalThis.ReadableStream&&c.body instanceof globalThis.ReadableStream||typeof c.body=="object"&&c.body!==null&&Symbol.asyncIterator in c.body,g=Object.assign(Object.assign(Object.assign({signal:r.signal},f?{duplex:"half"}:{}),{method:"GET"}),c);u&&(g.method=u.toUpperCase());try{return await this.fetch.call(void 0,t,g)}finally{clearTimeout(h)}}async shouldRetry(t){const e=t.headers.get("x-should-retry");return e==="true"?!0:e==="false"?!1:t.status===408||t.status===409||t.status===429||t.status>=500}async retryRequest(t,e,n,r){var s;let a;const u=r==null?void 0:r.get("retry-after-ms");if(u){const h=parseFloat(u);Number.isNaN(h)||(a=h)}const c=r==null?void 0:r.get("retry-after");if(c&&!a){const h=parseFloat(c);Number.isNaN(h)?a=Date.parse(c)-Date.now():a=h*1e3}if(!(a&&0<=a&&a<60*1e3)){const h=(s=t.maxRetries)!==null&&s!==void 0?s:this.maxRetries;a=this.calculateDefaultRetryTimeoutMillis(e,h)}return await yU(a),this.makeRequest(t,e-1,n)}calculateDefaultRetryTimeoutMillis(t,e){const s=e-t,a=Math.min(.5*Math.pow(2,s),8),u=1-Math.random()*.25;return a*u*1e3}async buildRequest(t,{retryCount:e=0}={}){var n,r,s;const a=Object.assign({},t),{method:u,path:c,query:h,defaultBaseURL:f}=a,g=this.buildURL(c,h,f);"timeout"in a&&mU("timeout",a.timeout),a.timeout=(n=a.timeout)!==null&&n!==void 0?n:this.timeout;const{bodyHeaders:m,body:y}=this.buildBody({options:a}),w=await this.buildHeaders({options:t,method:u,bodyHeaders:m,retryCount:e});return{req:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({method:u,headers:w},a.signal&&{signal:a.signal}),globalThis.ReadableStream&&y instanceof globalThis.ReadableStream&&{duplex:"half"}),y&&{body:y}),(r=this.fetchOptions)!==null&&r!==void 0?r:{}),(s=a.fetchOptions)!==null&&s!==void 0?s:{}),url:g,timeout:a.timeout}}async buildHeaders({options:t,method:e,bodyHeaders:n,retryCount:r}){let s={};this.idempotencyHeader&&e!=="get"&&(t.idempotencyKey||(t.idempotencyKey=this.defaultIdempotencyKey()),s[this.idempotencyHeader]=t.idempotencyKey);const a=await this.authHeaders(t);let u=Tv([s,Object.assign(Object.assign({Accept:"application/json","User-Agent":this.getUserAgent(),"X-Stainless-Retry-Count":String(r)},t.timeout?{"X-Stainless-Timeout":String(Math.trunc(t.timeout/1e3))}:{}),_U()),this._options.defaultHeaders,n,t.headers,a]);return this.validateHeaders(u),u.values}buildBody({options:{body:t,headers:e}}){if(!t)return{bodyHeaders:void 0,body:void 0};const n=Tv([e]);return ArrayBuffer.isView(t)||t instanceof ArrayBuffer||t instanceof DataView||typeof t=="string"&&n.values.has("content-type")||globalThis.Blob&&t instanceof globalThis.Blob||t instanceof FormData||t instanceof URLSearchParams||globalThis.ReadableStream&&t instanceof globalThis.ReadableStream?{bodyHeaders:void 0,body:t}:typeof t=="object"&&(Symbol.asyncIterator in t||Symbol.iterator in t&&"next"in t&&typeof t.next=="function")?{bodyHeaders:void 0,body:SU(t)}:this.encoder({body:t,headers:n})}}OA.DEFAULT_TIMEOUT=6e4;class ts extends OA{constructor(){super(...arguments),this.interactions=new SR(this)}}CR=ts;ts.GeminiNextGenAPIClient=CR;ts.GeminiNextGenAPIClientError=al;ts.APIError=ao;ts.APIConnectionError=FA;ts.APIConnectionTimeoutError=lR;ts.APIUserAbortError=Kw;ts.NotFoundError=fR;ts.ConflictError=dR;ts.RateLimitError=gR;ts.BadRequestError=uR;ts.AuthenticationError=cR;ts.InternalServerError=mR;ts.PermissionDeniedError=hR;ts.UnprocessableEntityError=pR;ts.toFile=LU;ts.Interactions=SR;/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function VU(i,t){const e={},n=x(i,["name"]);return n!=null&&A(e,["_url","name"],n),e}function YU(i,t){const e={},n=x(i,["name"]);return n!=null&&A(e,["_url","name"],n),e}function $U(i,t){const e={},n=x(i,["sdkHttpResponse"]);return n!=null&&A(e,["sdkHttpResponse"],n),e}function WU(i,t){const e={},n=x(i,["sdkHttpResponse"]);return n!=null&&A(e,["sdkHttpResponse"],n),e}function XU(i,t,e){const n={};if(x(i,["validationDataset"])!==void 0)throw new Error("validationDataset parameter is not supported in Gemini API.");const r=x(i,["tunedModelDisplayName"]);if(t!==void 0&&r!=null&&A(t,["displayName"],r),x(i,["description"])!==void 0)throw new Error("description parameter is not supported in Gemini API.");const s=x(i,["epochCount"]);t!==void 0&&s!=null&&A(t,["tuningTask","hyperparameters","epochCount"],s);const a=x(i,["learningRateMultiplier"]);if(a!=null&&A(n,["tuningTask","hyperparameters","learningRateMultiplier"],a),x(i,["exportLastCheckpointOnly"])!==void 0)throw new Error("exportLastCheckpointOnly parameter is not supported in Gemini API.");if(x(i,["preTunedModelCheckpointId"])!==void 0)throw new Error("preTunedModelCheckpointId parameter is not supported in Gemini API.");if(x(i,["adapterSize"])!==void 0)throw new Error("adapterSize parameter is not supported in Gemini API.");const u=x(i,["batchSize"]);t!==void 0&&u!=null&&A(t,["tuningTask","hyperparameters","batchSize"],u);const c=x(i,["learningRate"]);if(t!==void 0&&c!=null&&A(t,["tuningTask","hyperparameters","learningRate"],c),x(i,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");if(x(i,["beta"])!==void 0)throw new Error("beta parameter is not supported in Gemini API.");return n}function jU(i,t,e){const n={};let r=x(e,["config","method"]);if(r===void 0&&(r="SUPERVISED_FINE_TUNING"),r==="SUPERVISED_FINE_TUNING"){const y=x(i,["validationDataset"]);t!==void 0&&y!=null&&A(t,["supervisedTuningSpec"],I6(y))}else if(r==="PREFERENCE_TUNING"){const y=x(i,["validationDataset"]);t!==void 0&&y!=null&&A(t,["preferenceOptimizationSpec"],I6(y))}const s=x(i,["tunedModelDisplayName"]);t!==void 0&&s!=null&&A(t,["tunedModelDisplayName"],s);const a=x(i,["description"]);t!==void 0&&a!=null&&A(t,["description"],a);let u=x(e,["config","method"]);if(u===void 0&&(u="SUPERVISED_FINE_TUNING"),u==="SUPERVISED_FINE_TUNING"){const y=x(i,["epochCount"]);t!==void 0&&y!=null&&A(t,["supervisedTuningSpec","hyperParameters","epochCount"],y)}else if(u==="PREFERENCE_TUNING"){const y=x(i,["epochCount"]);t!==void 0&&y!=null&&A(t,["preferenceOptimizationSpec","hyperParameters","epochCount"],y)}let c=x(e,["config","method"]);if(c===void 0&&(c="SUPERVISED_FINE_TUNING"),c==="SUPERVISED_FINE_TUNING"){const y=x(i,["learningRateMultiplier"]);t!==void 0&&y!=null&&A(t,["supervisedTuningSpec","hyperParameters","learningRateMultiplier"],y)}else if(c==="PREFERENCE_TUNING"){const y=x(i,["learningRateMultiplier"]);t!==void 0&&y!=null&&A(t,["preferenceOptimizationSpec","hyperParameters","learningRateMultiplier"],y)}let h=x(e,["config","method"]);if(h===void 0&&(h="SUPERVISED_FINE_TUNING"),h==="SUPERVISED_FINE_TUNING"){const y=x(i,["exportLastCheckpointOnly"]);t!==void 0&&y!=null&&A(t,["supervisedTuningSpec","exportLastCheckpointOnly"],y)}else if(h==="PREFERENCE_TUNING"){const y=x(i,["exportLastCheckpointOnly"]);t!==void 0&&y!=null&&A(t,["preferenceOptimizationSpec","exportLastCheckpointOnly"],y)}let f=x(e,["config","method"]);if(f===void 0&&(f="SUPERVISED_FINE_TUNING"),f==="SUPERVISED_FINE_TUNING"){const y=x(i,["adapterSize"]);t!==void 0&&y!=null&&A(t,["supervisedTuningSpec","hyperParameters","adapterSize"],y)}else if(f==="PREFERENCE_TUNING"){const y=x(i,["adapterSize"]);t!==void 0&&y!=null&&A(t,["preferenceOptimizationSpec","hyperParameters","adapterSize"],y)}if(x(i,["batchSize"])!==void 0)throw new Error("batchSize parameter is not supported in Vertex AI.");if(x(i,["learningRate"])!==void 0)throw new Error("learningRate parameter is not supported in Vertex AI.");const g=x(i,["labels"]);t!==void 0&&g!=null&&A(t,["labels"],g);const m=x(i,["beta"]);return t!==void 0&&m!=null&&A(t,["preferenceOptimizationSpec","hyperParameters","beta"],m),n}function JU(i,t){const e={},n=x(i,["baseModel"]);n!=null&&A(e,["baseModel"],n);const r=x(i,["preTunedModel"]);r!=null&&A(e,["preTunedModel"],r);const s=x(i,["trainingDataset"]);s!=null&&aH(s);const a=x(i,["config"]);return a!=null&&XU(a,e),e}function KU(i,t){const e={},n=x(i,["baseModel"]);n!=null&&A(e,["baseModel"],n);const r=x(i,["preTunedModel"]);r!=null&&A(e,["preTunedModel"],r);const s=x(i,["trainingDataset"]);s!=null&&lH(s,e,t);const a=x(i,["config"]);return a!=null&&jU(a,e,t),e}function QU(i,t){const e={},n=x(i,["name"]);return n!=null&&A(e,["_url","name"],n),e}function ZU(i,t){const e={},n=x(i,["name"]);return n!=null&&A(e,["_url","name"],n),e}function tH(i,t,e){const n={},r=x(i,["pageSize"]);t!==void 0&&r!=null&&A(t,["_query","pageSize"],r);const s=x(i,["pageToken"]);t!==void 0&&s!=null&&A(t,["_query","pageToken"],s);const a=x(i,["filter"]);return t!==void 0&&a!=null&&A(t,["_query","filter"],a),n}function eH(i,t,e){const n={},r=x(i,["pageSize"]);t!==void 0&&r!=null&&A(t,["_query","pageSize"],r);const s=x(i,["pageToken"]);t!==void 0&&s!=null&&A(t,["_query","pageToken"],s);const a=x(i,["filter"]);return t!==void 0&&a!=null&&A(t,["_query","filter"],a),n}function nH(i,t){const e={},n=x(i,["config"]);return n!=null&&tH(n,e),e}function iH(i,t){const e={},n=x(i,["config"]);return n!=null&&eH(n,e),e}function rH(i,t){const e={},n=x(i,["sdkHttpResponse"]);n!=null&&A(e,["sdkHttpResponse"],n);const r=x(i,["nextPageToken"]);r!=null&&A(e,["nextPageToken"],r);const s=x(i,["tunedModels"]);if(s!=null){let a=s;Array.isArray(a)&&(a=a.map(u=>TR(u))),A(e,["tuningJobs"],a)}return e}function sH(i,t){const e={},n=x(i,["sdkHttpResponse"]);n!=null&&A(e,["sdkHttpResponse"],n);const r=x(i,["nextPageToken"]);r!=null&&A(e,["nextPageToken"],r);const s=x(i,["tuningJobs"]);if(s!=null){let a=s;Array.isArray(a)&&(a=a.map(u=>tS(u))),A(e,["tuningJobs"],a)}return e}function oH(i,t){const e={},n=x(i,["name"]);n!=null&&A(e,["model"],n);const r=x(i,["name"]);return r!=null&&A(e,["endpoint"],r),e}function aH(i,t){const e={};if(x(i,["gcsUri"])!==void 0)throw new Error("gcsUri parameter is not supported in Gemini API.");if(x(i,["vertexDatasetResource"])!==void 0)throw new Error("vertexDatasetResource parameter is not supported in Gemini API.");const n=x(i,["examples"]);if(n!=null){let r=n;Array.isArray(r)&&(r=r.map(s=>s)),A(e,["examples","examples"],r)}return e}function lH(i,t,e){const n={};let r=x(e,["config","method"]);if(r===void 0&&(r="SUPERVISED_FINE_TUNING"),r==="SUPERVISED_FINE_TUNING"){const a=x(i,["gcsUri"]);t!==void 0&&a!=null&&A(t,["supervisedTuningSpec","trainingDatasetUri"],a)}else if(r==="PREFERENCE_TUNING"){const a=x(i,["gcsUri"]);t!==void 0&&a!=null&&A(t,["preferenceOptimizationSpec","trainingDatasetUri"],a)}let s=x(e,["config","method"]);if(s===void 0&&(s="SUPERVISED_FINE_TUNING"),s==="SUPERVISED_FINE_TUNING"){const a=x(i,["vertexDatasetResource"]);t!==void 0&&a!=null&&A(t,["supervisedTuningSpec","trainingDatasetUri"],a)}else if(s==="PREFERENCE_TUNING"){const a=x(i,["vertexDatasetResource"]);t!==void 0&&a!=null&&A(t,["preferenceOptimizationSpec","trainingDatasetUri"],a)}if(x(i,["examples"])!==void 0)throw new Error("examples parameter is not supported in Vertex AI.");return n}function TR(i,t){const e={},n=x(i,["sdkHttpResponse"]);n!=null&&A(e,["sdkHttpResponse"],n);const r=x(i,["name"]);r!=null&&A(e,["name"],r);const s=x(i,["state"]);s!=null&&A(e,["state"],GN(s));const a=x(i,["createTime"]);a!=null&&A(e,["createTime"],a);const u=x(i,["tuningTask","startTime"]);u!=null&&A(e,["startTime"],u);const c=x(i,["tuningTask","completeTime"]);c!=null&&A(e,["endTime"],c);const h=x(i,["updateTime"]);h!=null&&A(e,["updateTime"],h);const f=x(i,["description"]);f!=null&&A(e,["description"],f);const g=x(i,["baseModel"]);g!=null&&A(e,["baseModel"],g);const m=x(i,["_self"]);return m!=null&&A(e,["tunedModel"],oH(m)),e}function tS(i,t){const e={},n=x(i,["sdkHttpResponse"]);n!=null&&A(e,["sdkHttpResponse"],n);const r=x(i,["name"]);r!=null&&A(e,["name"],r);const s=x(i,["state"]);s!=null&&A(e,["state"],GN(s));const a=x(i,["createTime"]);a!=null&&A(e,["createTime"],a);const u=x(i,["startTime"]);u!=null&&A(e,["startTime"],u);const c=x(i,["endTime"]);c!=null&&A(e,["endTime"],c);const h=x(i,["updateTime"]);h!=null&&A(e,["updateTime"],h);const f=x(i,["error"]);f!=null&&A(e,["error"],f);const g=x(i,["description"]);g!=null&&A(e,["description"],g);const m=x(i,["baseModel"]);m!=null&&A(e,["baseModel"],m);const y=x(i,["tunedModel"]);y!=null&&A(e,["tunedModel"],y);const w=x(i,["preTunedModel"]);w!=null&&A(e,["preTunedModel"],w);const S=x(i,["supervisedTuningSpec"]);S!=null&&A(e,["supervisedTuningSpec"],S);const T=x(i,["preferenceOptimizationSpec"]);T!=null&&A(e,["preferenceOptimizationSpec"],T);const C=x(i,["tuningDataStats"]);C!=null&&A(e,["tuningDataStats"],C);const D=x(i,["encryptionSpec"]);D!=null&&A(e,["encryptionSpec"],D);const R=x(i,["partnerModelTuningSpec"]);R!=null&&A(e,["partnerModelTuningSpec"],R);const I=x(i,["customBaseModel"]);I!=null&&A(e,["customBaseModel"],I);const F=x(i,["experiment"]);F!=null&&A(e,["experiment"],F);const q=x(i,["labels"]);q!=null&&A(e,["labels"],q);const U=x(i,["outputUri"]);U!=null&&A(e,["outputUri"],U);const V=x(i,["pipelineJob"]);V!=null&&A(e,["pipelineJob"],V);const tt=x(i,["serviceAccount"]);tt!=null&&A(e,["serviceAccount"],tt);const J=x(i,["tunedModelDisplayName"]);J!=null&&A(e,["tunedModelDisplayName"],J);const O=x(i,["veoTuningSpec"]);return O!=null&&A(e,["veoTuningSpec"],O),e}function uH(i,t){const e={},n=x(i,["sdkHttpResponse"]);n!=null&&A(e,["sdkHttpResponse"],n);const r=x(i,["name"]);r!=null&&A(e,["name"],r);const s=x(i,["metadata"]);s!=null&&A(e,["metadata"],s);const a=x(i,["done"]);a!=null&&A(e,["done"],a);const u=x(i,["error"]);return u!=null&&A(e,["error"],u),e}function I6(i,t){const e={},n=x(i,["gcsUri"]);n!=null&&A(e,["validationDatasetUri"],n);const r=x(i,["vertexDatasetResource"]);return r!=null&&A(e,["validationDatasetUri"],r),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class cH extends Fh{constructor(t){super(),this.apiClient=t,this.list=async(e={})=>new Op(Lh.PAGED_ITEM_TUNING_JOBS,n=>this.listInternal(n),await this.listInternal(e),e),this.get=async e=>await this.getInternal(e),this.tune=async e=>{var n;if(this.apiClient.isVertexAI())if(e.baseModel.startsWith("projects/")){const r={tunedModelName:e.baseModel};!((n=e.config)===null||n===void 0)&&n.preTunedModelCheckpointId&&(r.checkpointId=e.config.preTunedModelCheckpointId);const s=Object.assign(Object.assign({},e),{preTunedModel:r});return s.baseModel=void 0,await this.tuneInternal(s)}else{const r=Object.assign({},e);return await this.tuneInternal(r)}else{const r=Object.assign({},e),s=await this.tuneMldevInternal(r);let a="";return s.metadata!==void 0&&s.metadata.tunedModel!==void 0?a=s.metadata.tunedModel:s.name!==void 0&&s.name.includes("/operations/")&&(a=s.name.split("/operations/")[0]),{name:a,state:zw.JOB_STATE_QUEUED}}}}async getInternal(t){var e,n,r,s;let a,u="",c={};if(this.apiClient.isVertexAI()){const h=ZU(t);return u=ce("{name}",h._url),c=h._query,delete h._url,delete h._query,a=this.apiClient.request({path:u,queryParams:c,body:JSON.stringify(h),httpMethod:"GET",httpOptions:(e=t.config)===null||e===void 0?void 0:e.httpOptions,abortSignal:(n=t.config)===null||n===void 0?void 0:n.abortSignal}).then(f=>f.json().then(g=>{const m=g;return m.sdkHttpResponse={headers:f.headers},m})),a.then(f=>tS(f))}else{const h=QU(t);return u=ce("{name}",h._url),c=h._query,delete h._url,delete h._query,a=this.apiClient.request({path:u,queryParams:c,body:JSON.stringify(h),httpMethod:"GET",httpOptions:(r=t.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(s=t.config)===null||s===void 0?void 0:s.abortSignal}).then(f=>f.json().then(g=>{const m=g;return m.sdkHttpResponse={headers:f.headers},m})),a.then(f=>TR(f))}}async listInternal(t){var e,n,r,s;let a,u="",c={};if(this.apiClient.isVertexAI()){const h=iH(t);return u=ce("tuningJobs",h._url),c=h._query,delete h._url,delete h._query,a=this.apiClient.request({path:u,queryParams:c,body:JSON.stringify(h),httpMethod:"GET",httpOptions:(e=t.config)===null||e===void 0?void 0:e.httpOptions,abortSignal:(n=t.config)===null||n===void 0?void 0:n.abortSignal}).then(f=>f.json().then(g=>{const m=g;return m.sdkHttpResponse={headers:f.headers},m})),a.then(f=>{const g=sH(f),m=new s6;return Object.assign(m,g),m})}else{const h=nH(t);return u=ce("tunedModels",h._url),c=h._query,delete h._url,delete h._query,a=this.apiClient.request({path:u,queryParams:c,body:JSON.stringify(h),httpMethod:"GET",httpOptions:(r=t.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(s=t.config)===null||s===void 0?void 0:s.abortSignal}).then(f=>f.json().then(g=>{const m=g;return m.sdkHttpResponse={headers:f.headers},m})),a.then(f=>{const g=rH(f),m=new s6;return Object.assign(m,g),m})}}async cancel(t){var e,n,r,s;let a,u="",c={};if(this.apiClient.isVertexAI()){const h=YU(t);return u=ce("{name}:cancel",h._url),c=h._query,delete h._url,delete h._query,a=this.apiClient.request({path:u,queryParams:c,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(e=t.config)===null||e===void 0?void 0:e.httpOptions,abortSignal:(n=t.config)===null||n===void 0?void 0:n.abortSignal}).then(f=>f.json().then(g=>{const m=g;return m.sdkHttpResponse={headers:f.headers},m})),a.then(f=>{const g=WU(f),m=new o6;return Object.assign(m,g),m})}else{const h=VU(t);return u=ce("{name}:cancel",h._url),c=h._query,delete h._url,delete h._query,a=this.apiClient.request({path:u,queryParams:c,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(r=t.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(s=t.config)===null||s===void 0?void 0:s.abortSignal}).then(f=>f.json().then(g=>{const m=g;return m.sdkHttpResponse={headers:f.headers},m})),a.then(f=>{const g=$U(f),m=new o6;return Object.assign(m,g),m})}}async tuneInternal(t){var e,n;let r,s="",a={};if(this.apiClient.isVertexAI()){const u=KU(t,t);return s=ce("tuningJobs",u._url),a=u._query,delete u._url,delete u._query,r=this.apiClient.request({path:s,queryParams:a,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(e=t.config)===null||e===void 0?void 0:e.httpOptions,abortSignal:(n=t.config)===null||n===void 0?void 0:n.abortSignal}).then(c=>c.json().then(h=>{const f=h;return f.sdkHttpResponse={headers:c.headers},f})),r.then(c=>tS(c))}else throw new Error("This method is only supported by the Vertex AI.")}async tuneMldevInternal(t){var e,n;let r,s="",a={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const u=JU(t);return s=ce("tunedModels",u._url),a=u._query,delete u._url,delete u._query,r=this.apiClient.request({path:s,queryParams:a,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(e=t.config)===null||e===void 0?void 0:e.httpOptions,abortSignal:(n=t.config)===null||n===void 0?void 0:n.abortSignal}).then(c=>c.json().then(h=>{const f=h;return f.sdkHttpResponse={headers:c.headers},f})),r.then(c=>uH(c))}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class hH{async download(t,e){throw new Error("Download to file is not supported in the browser, please use a browser compliant download like an <a> tag.")}}const fH=1024*1024*8,dH=3,pH=1e3,gH=2,jb="x-goog-upload-status";async function mH(i,t,e){var n;const r=await NR(i,t,e),s=await(r==null?void 0:r.json());if(((n=r==null?void 0:r.headers)===null||n===void 0?void 0:n[jb])!=="final")throw new Error("Failed to upload file: Upload status is not finalized.");return s.file}async function vH(i,t,e){var n;const r=await NR(i,t,e),s=await(r==null?void 0:r.json());if(((n=r==null?void 0:r.headers)===null||n===void 0?void 0:n[jb])!=="final")throw new Error("Failed to upload file: Upload status is not finalized.");const a=BN(s),u=new JE;return Object.assign(u,a),u}async function NR(i,t,e){var n,r;let s=0,a=0,u=new Gw(new Response),c="upload";for(s=i.size;a<s;){const h=Math.min(fH,s-a),f=i.slice(a,a+h);a+h>=s&&(c+=", finalize");let g=0,m=pH;for(;g<dH&&(u=await e.request({path:"",body:f,httpMethod:"POST",httpOptions:{apiVersion:"",baseUrl:t,headers:{"X-Goog-Upload-Command":c,"X-Goog-Upload-Offset":String(a),"Content-Length":String(h)}}}),!(!((n=u==null?void 0:u.headers)===null||n===void 0)&&n[jb]));)g++,await xH(m),m=m*gH;if(a+=h,((r=u==null?void 0:u.headers)===null||r===void 0?void 0:r[jb])!=="active")break;if(s<=a)throw new Error("All content has been uploaded, but the upload status is not finalized.")}return u}async function yH(i){return{size:i.size,type:i.type}}function xH(i){return new Promise(t=>setTimeout(t,i))}class bH{async upload(t,e,n){if(typeof t=="string")throw new Error("File path is not supported in browser uploader.");return await mH(t,e,n)}async uploadToFileSearchStore(t,e,n){if(typeof t=="string")throw new Error("File path is not supported in browser uploader.");return await vH(t,e,n)}async stat(t){if(typeof t=="string")throw new Error("File path is not supported in browser uploader.");return await yH(t)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class AH{create(t,e,n){return new _H(t,e,n)}}class _H{constructor(t,e,n){this.url=t,this.headers=e,this.callbacks=n}connect(){this.ws=new WebSocket(this.url),this.ws.onopen=this.callbacks.onopen,this.ws.onerror=this.callbacks.onerror,this.ws.onclose=this.callbacks.onclose,this.ws.onmessage=this.callbacks.onmessage}send(t){if(this.ws===void 0)throw new Error("WebSocket is not connected");this.ws.send(t)}close(){if(this.ws===void 0)throw new Error("WebSocket is not connected");this.ws.close()}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const P6="x-goog-api-key";class wH{constructor(t){this.apiKey=t}async addAuthHeaders(t,e){if(t.get(P6)===null){if(this.apiKey.startsWith("auth_tokens/"))throw new Error("Ephemeral tokens are only supported by the live API.");if(!this.apiKey)throw new Error("API key is missing. Please provide a valid API key.");t.append(P6,this.apiKey)}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const SH="gl-node/";class EH{get interactions(){if(this._interactions!==void 0)return this._interactions;console.warn("GoogleGenAI.interactions: Interactions usage is experimental and may change in future versions.");const t=this.httpOptions;t!=null&&t.extraBody&&console.warn("GoogleGenAI.interactions: Client level httpOptions.extraBody is not supported by the interactions client and will be ignored.");const e=new ts({baseURL:this.apiClient.getBaseUrl(),apiKey:this.apiKey,apiVersion:this.apiClient.getApiVersion(),clientAdapter:this.apiClient,defaultHeaders:this.apiClient.getDefaultHeaders(),timeout:t==null?void 0:t.timeout});return this._interactions=e.interactions,this._interactions}constructor(t){var e;if(t.apiKey==null)throw new Error("An API Key must be set when running in a browser");if(t.project||t.location)throw new Error("Vertex AI project based authentication is not supported on browser runtimes. Please do not provide a project or location.");this.vertexai=(e=t.vertexai)!==null&&e!==void 0?e:!1,this.apiKey=t.apiKey;const n=xk(t.httpOptions,t.vertexai,void 0,void 0);n&&(t.httpOptions?t.httpOptions.baseUrl=n:t.httpOptions={baseUrl:n}),this.apiVersion=t.apiVersion,this.httpOptions=t.httpOptions;const r=new wH(this.apiKey);this.apiClient=new yO({auth:r,apiVersion:this.apiVersion,apiKey:this.apiKey,vertexai:this.vertexai,httpOptions:this.httpOptions,userAgentExtra:SH+"web",uploader:new bH,downloader:new hH}),this.models=new BO(this.apiClient),this.live=new LO(this.apiClient,r,new AH),this.batches=new X7(this.apiClient),this.chats=new RF(this.models,this.apiClient),this.caches=new CF(this.apiClient),this.files=new UF(this.apiClient),this.operations=new OO(this.apiClient),this.authTokens=new tU(this.apiClient),this.tunings=new cH(this.apiClient),this.fileSearchStores=new lU(this.apiClient)}}var Hs=(i=>(i.URL="url",i.PDF="pdf",i.TEXT="text",i))(Hs||{});const k6=4e3,CH=200;function TH(i){if(!i)return[];const t=[];let e=0;for(;e<i.length;){const n=Math.min(e+k6,i.length);t.push(i.slice(e,n)),e+=k6-CH}return t}const io=typeof process=="object"&&process+""=="[object process]"&&!process.versions.nw&&!(process.versions.electron&&process.type&&process.type!=="browser"),eS=[.001,0,0,.001,0,0],xw=1.35,_a={ANY:1,DISPLAY:2,PRINT:4,ANNOTATIONS_FORMS:16,ANNOTATIONS_STORAGE:32,ANNOTATIONS_DISABLE:64,IS_EDITING:128,OPLIST:256},Mf={DISABLE:0,ENABLE:1,ENABLE_FORMS:2,ENABLE_STORAGE:3},s2="pdfjs_internal_editor_",We={DISABLE:-1,NONE:0,FREETEXT:3,HIGHLIGHT:9,STAMP:13,INK:15,POPUP:16,SIGNATURE:101,COMMENT:102},xn={RESIZE:1,CREATE:2,FREETEXT_SIZE:11,FREETEXT_COLOR:12,FREETEXT_OPACITY:13,INK_COLOR:21,INK_THICKNESS:22,INK_OPACITY:23,HIGHLIGHT_COLOR:31,HIGHLIGHT_THICKNESS:32,HIGHLIGHT_FREE:33,HIGHLIGHT_SHOW_ALL:34,DRAW_STEP:41},NH={PRINT:4,MODIFY_CONTENTS:8,COPY:16,MODIFY_ANNOTATIONS:32,FILL_INTERACTIVE_FORMS:256,COPY_FOR_ACCESSIBILITY:512,ASSEMBLE:1024,PRINT_HIGH_QUALITY:2048},nS={TRIANGLES:1,LATTICE:2},cs={FILL:0,STROKE:1,FILL_STROKE:2,INVISIBLE:3,FILL_STROKE_MASK:3,ADD_TO_PATH_FLAG:4},w5={GRAYSCALE_1BPP:1,RGB_24BPP:2,RGBA_32BPP:3},vr={TEXT:1,LINK:2,FREETEXT:3,LINE:4,SQUARE:5,CIRCLE:6,POLYGON:7,POLYLINE:8,HIGHLIGHT:9,UNDERLINE:10,SQUIGGLY:11,STRIKEOUT:12,STAMP:13,CARET:14,INK:15,POPUP:16,FILEATTACHMENT:17,SOUND:18,MOVIE:19,WIDGET:20,SCREEN:21,PRINTERMARK:22,TRAPNET:23,WATERMARK:24,THREED:25,REDACT:26},Ug={SOLID:1,DASHED:2,BEVELED:3,INSET:4,UNDERLINE:5},UA={ERRORS:0,WARNINGS:1,INFOS:5},o2={dependency:1,setLineWidth:2,setLineCap:3,setLineJoin:4,setMiterLimit:5,setDash:6,setRenderingIntent:7,setFlatness:8,setGState:9,save:10,restore:11,transform:12,moveTo:13,lineTo:14,curveTo:15,curveTo2:16,curveTo3:17,closePath:18,rectangle:19,stroke:20,closeStroke:21,fill:22,eoFill:23,fillStroke:24,eoFillStroke:25,closeFillStroke:26,closeEOFillStroke:27,endPath:28,clip:29,eoClip:30,beginText:31,endText:32,setCharSpacing:33,setWordSpacing:34,setHScale:35,setLeading:36,setFont:37,setTextRenderingMode:38,setTextRise:39,moveText:40,setLeadingMoveText:41,setTextMatrix:42,nextLine:43,showText:44,showSpacedText:45,nextLineShowText:46,nextLineSetSpacingShowText:47,setCharWidth:48,setCharWidthAndBounds:49,setStrokeColorSpace:50,setFillColorSpace:51,setStrokeColor:52,setStrokeColorN:53,setFillColor:54,setFillColorN:55,setStrokeGray:56,setFillGray:57,setStrokeRGBColor:58,setFillRGBColor:59,setStrokeCMYKColor:60,setFillCMYKColor:61,shadingFill:62,beginInlineImage:63,beginImageData:64,endInlineImage:65,paintXObject:66,markPoint:67,markPointProps:68,beginMarkedContent:69,beginMarkedContentProps:70,endMarkedContent:71,beginCompat:72,endCompat:73,paintFormXObjectBegin:74,paintFormXObjectEnd:75,beginGroup:76,endGroup:77,beginAnnotation:80,endAnnotation:81,paintImageMaskXObject:83,paintImageMaskXObjectGroup:84,paintImageXObject:85,paintInlineImageXObject:86,paintInlineImageXObjectGroup:87,paintImageXObjectRepeat:88,paintImageMaskXObjectRepeat:89,paintSolidColorImageMask:90,constructPath:91,setStrokeTransparent:92,setFillTransparent:93,rawFillPath:94},Nv={moveTo:0,lineTo:1,curveTo:2,quadraticCurveTo:3,closePath:4},RH={NEED_PASSWORD:1,INCORRECT_PASSWORD:2};let HA=UA.WARNINGS;function DH(i){Number.isInteger(i)&&(HA=i)}function LH(){return HA}function qA(i){HA>=UA.INFOS&&console.info(`Info: ${i}`)}function Ge(i){HA>=UA.WARNINGS&&console.warn(`Warning: ${i}`)}function ui(i){throw new Error(i)}function bn(i,t){i||ui(t)}function MH(i){switch(i==null?void 0:i.protocol){case"http:":case"https:":case"ftp:":case"mailto:":case"tel:":return!0;default:return!1}}function RR(i,t=null,e=null){if(!i)return null;if(e&&typeof i=="string"){if(e.addDefaultProtocol&&i.startsWith("www.")){const r=i.match(/\./g);(r==null?void 0:r.length)>=2&&(i=`http://${i}`)}if(e.tryConvertEncoding)try{i=BH(i)}catch{}}const n=t?URL.parse(i,t):URL.parse(i);return MH(n)?n:null}function DR(i,t,e=!1){const n=URL.parse(i);return n?(n.hash=t,n.href):e&&RR(i,"http://example.com")?i.split("#",1)[0]+`${t?`#${t}`:""}`:""}function Ve(i,t,e,n=!1){return Object.defineProperty(i,t,{value:e,enumerable:!n,configurable:!0,writable:!1}),e}const Up=(function(){function t(e,n){this.message=e,this.name=n}return t.prototype=new Error,t.constructor=t,t})();class F6 extends Up{constructor(t,e){super(t,"PasswordException"),this.code=e}}class bw extends Up{constructor(t,e){super(t,"UnknownErrorException"),this.details=e}}class iS extends Up{constructor(t){super(t,"InvalidPDFException")}}class Jb extends Up{constructor(t,e,n){super(t,"ResponseException"),this.status=e,this.missing=n}}class IH extends Up{constructor(t){super(t,"FormatError")}}class Cd extends Up{constructor(t){super(t,"AbortException")}}function LR(i){(typeof i!="object"||(i==null?void 0:i.length)===void 0)&&ui("Invalid argument for bytesToString");const t=i.length,e=8192;if(t<e)return String.fromCharCode.apply(null,i);const n=[];for(let r=0;r<t;r+=e){const s=Math.min(r+e,t),a=i.subarray(r,s);n.push(String.fromCharCode.apply(null,a))}return n.join("")}function ix(i){typeof i!="string"&&ui("Invalid argument for stringToBytes");const t=i.length,e=new Uint8Array(t);for(let n=0;n<t;++n)e[n]=i.charCodeAt(n)&255;return e}function PH(i){return String.fromCharCode(i>>24&255,i>>16&255,i>>8&255,i&255)}function kH(){const i=new Uint8Array(4);return i[0]=1,new Uint32Array(i.buffer,0,1)[0]===1}function FH(){try{return new Function(""),!0}catch{return!1}}class bs{static get isLittleEndian(){return Ve(this,"isLittleEndian",kH())}static get isEvalSupported(){return Ve(this,"isEvalSupported",FH())}static get isOffscreenCanvasSupported(){return Ve(this,"isOffscreenCanvasSupported",typeof OffscreenCanvas<"u")}static get isImageDecoderSupported(){return Ve(this,"isImageDecoderSupported",typeof ImageDecoder<"u")}static get isFloat16ArraySupported(){return Ve(this,"isFloat16ArraySupported",typeof Float16Array<"u")}static get isSanitizerSupported(){return Ve(this,"isSanitizerSupported",typeof Sanitizer<"u")}static get platform(){const{platform:t,userAgent:e}=navigator;return Ve(this,"platform",{isAndroid:e.includes("Android"),isLinux:t.includes("Linux"),isMac:t.includes("Mac"),isWindows:t.includes("Win"),isFirefox:e.includes("Firefox")})}static get isCSSRoundSupported(){var t,e;return Ve(this,"isCSSRoundSupported",(e=(t=globalThis.CSS)==null?void 0:t.supports)==null?void 0:e.call(t,"width: round(1.5px, 1px)"))}}const Aw=Array.from(Array(256).keys(),i=>i.toString(16).padStart(2,"0"));var Th,S5,rS;class ge{static makeHexColor(t,e,n){return`#${Aw[t]}${Aw[e]}${Aw[n]}`}static domMatrixToTransform(t){return[t.a,t.b,t.c,t.d,t.e,t.f]}static scaleMinMax(t,e){let n;t[0]?(t[0]<0&&(n=e[0],e[0]=e[2],e[2]=n),e[0]*=t[0],e[2]*=t[0],t[3]<0&&(n=e[1],e[1]=e[3],e[3]=n),e[1]*=t[3],e[3]*=t[3]):(n=e[0],e[0]=e[1],e[1]=n,n=e[2],e[2]=e[3],e[3]=n,t[1]<0&&(n=e[1],e[1]=e[3],e[3]=n),e[1]*=t[1],e[3]*=t[1],t[2]<0&&(n=e[0],e[0]=e[2],e[2]=n),e[0]*=t[2],e[2]*=t[2]),e[0]+=t[4],e[1]+=t[5],e[2]+=t[4],e[3]+=t[5]}static transform(t,e){return[t[0]*e[0]+t[2]*e[1],t[1]*e[0]+t[3]*e[1],t[0]*e[2]+t[2]*e[3],t[1]*e[2]+t[3]*e[3],t[0]*e[4]+t[2]*e[5]+t[4],t[1]*e[4]+t[3]*e[5]+t[5]]}static multiplyByDOMMatrix(t,e){return[t[0]*e.a+t[2]*e.b,t[1]*e.a+t[3]*e.b,t[0]*e.c+t[2]*e.d,t[1]*e.c+t[3]*e.d,t[0]*e.e+t[2]*e.f+t[4],t[1]*e.e+t[3]*e.f+t[5]]}static applyTransform(t,e,n=0){const r=t[n],s=t[n+1];t[n]=r*e[0]+s*e[2]+e[4],t[n+1]=r*e[1]+s*e[3]+e[5]}static applyTransformToBezier(t,e,n=0){const r=e[0],s=e[1],a=e[2],u=e[3],c=e[4],h=e[5];for(let f=0;f<6;f+=2){const g=t[n+f],m=t[n+f+1];t[n+f]=g*r+m*a+c,t[n+f+1]=g*s+m*u+h}}static applyInverseTransform(t,e){const n=t[0],r=t[1],s=e[0]*e[3]-e[1]*e[2];t[0]=(n*e[3]-r*e[2]+e[2]*e[5]-e[4]*e[3])/s,t[1]=(-n*e[1]+r*e[0]+e[4]*e[1]-e[5]*e[0])/s}static axialAlignedBoundingBox(t,e,n){const r=e[0],s=e[1],a=e[2],u=e[3],c=e[4],h=e[5],f=t[0],g=t[1],m=t[2],y=t[3];let w=r*f+c,S=w,T=r*m+c,C=T,D=u*g+h,R=D,I=u*y+h,F=I;if(s!==0||a!==0){const q=s*f,U=s*m,V=a*g,tt=a*y;w+=V,C+=V,T+=tt,S+=tt,D+=q,F+=q,I+=U,R+=U}n[0]=Math.min(n[0],w,T,S,C),n[1]=Math.min(n[1],D,I,R,F),n[2]=Math.max(n[2],w,T,S,C),n[3]=Math.max(n[3],D,I,R,F)}static inverseTransform(t){const e=t[0]*t[3]-t[1]*t[2];return[t[3]/e,-t[1]/e,-t[2]/e,t[0]/e,(t[2]*t[5]-t[4]*t[3])/e,(t[4]*t[1]-t[5]*t[0])/e]}static singularValueDecompose2dScale(t,e){const n=t[0],r=t[1],s=t[2],a=t[3],u=n**2+r**2,c=n*s+r*a,h=s**2+a**2,f=(u+h)/2,g=Math.sqrt(f**2-(u*h-c**2));e[0]=Math.sqrt(f+g||1),e[1]=Math.sqrt(f-g||1)}static normalizeRect(t){const e=t.slice(0);return t[0]>t[2]&&(e[0]=t[2],e[2]=t[0]),t[1]>t[3]&&(e[1]=t[3],e[3]=t[1]),e}static intersect(t,e){const n=Math.max(Math.min(t[0],t[2]),Math.min(e[0],e[2])),r=Math.min(Math.max(t[0],t[2]),Math.max(e[0],e[2]));if(n>r)return null;const s=Math.max(Math.min(t[1],t[3]),Math.min(e[1],e[3])),a=Math.min(Math.max(t[1],t[3]),Math.max(e[1],e[3]));return s>a?null:[n,s,r,a]}static pointBoundingBox(t,e,n){n[0]=Math.min(n[0],t),n[1]=Math.min(n[1],e),n[2]=Math.max(n[2],t),n[3]=Math.max(n[3],e)}static rectBoundingBox(t,e,n,r,s){s[0]=Math.min(s[0],t,n),s[1]=Math.min(s[1],e,r),s[2]=Math.max(s[2],t,n),s[3]=Math.max(s[3],e,r)}static bezierBoundingBox(t,e,n,r,s,a,u,c,h){h[0]=Math.min(h[0],t,u),h[1]=Math.min(h[1],e,c),h[2]=Math.max(h[2],t,u),h[3]=Math.max(h[3],e,c),$(this,Th,rS).call(this,t,n,s,u,e,r,a,c,3*(-t+3*(n-s)+u),6*(t-2*n+s),3*(n-t),h),$(this,Th,rS).call(this,t,n,s,u,e,r,a,c,3*(-e+3*(r-a)+c),6*(e-2*r+a),3*(r-e),h)}}Th=new WeakSet,S5=function(t,e,n,r,s,a,u,c,h,f){if(h<=0||h>=1)return;const g=1-h,m=h*h,y=m*h,w=g*(g*(g*t+3*h*e)+3*m*n)+y*r,S=g*(g*(g*s+3*h*a)+3*m*u)+y*c;f[0]=Math.min(f[0],w),f[1]=Math.min(f[1],S),f[2]=Math.max(f[2],w),f[3]=Math.max(f[3],S)},rS=function(t,e,n,r,s,a,u,c,h,f,g,m){if(Math.abs(h)<1e-12){Math.abs(f)>=1e-12&&$(this,Th,S5).call(this,t,e,n,r,s,a,u,c,-g/f,m);return}const y=f**2-4*g*h;if(y<0)return;const w=Math.sqrt(y),S=2*h;$(this,Th,S5).call(this,t,e,n,r,s,a,u,c,(-f+w)/S,m),$(this,Th,S5).call(this,t,e,n,r,s,a,u,c,(-f-w)/S,m)},z(ge,Th);function BH(i){return decodeURIComponent(escape(i))}let _w=null,B6=null;function OH(i){return _w||(_w=/([\u00a0\u00b5\u037e\u0eb3\u2000-\u200a\u202f\u2126\ufb00-\ufb04\ufb06\ufb20-\ufb36\ufb38-\ufb3c\ufb3e\ufb40-\ufb41\ufb43-\ufb44\ufb46-\ufba1\ufba4-\ufba9\ufbae-\ufbb1\ufbd3-\ufbdc\ufbde-\ufbe7\ufbea-\ufbf8\ufbfc-\ufbfd\ufc00-\ufc5d\ufc64-\ufcf1\ufcf5-\ufd3d\ufd88\ufdf4\ufdfa-\ufdfb\ufe71\ufe77\ufe79\ufe7b\ufe7d]+)|(\ufb05+)/gu,B6=new Map([["","t"]])),i.replaceAll(_w,(t,e,n)=>e?e.normalize("NFKC"):B6.get(n))}function MR(){if(typeof crypto.randomUUID=="function")return crypto.randomUUID();const i=new Uint8Array(32);return crypto.getRandomValues(i),LR(i)}const Kg="pdfjs_internal_id_";function UH(i,t,e){if(!Array.isArray(e)||e.length<2)return!1;const[n,r,...s]=e;if(!i(n)&&!Number.isInteger(n)||!t(r))return!1;const a=s.length;let u=!0;switch(r.name){case"XYZ":if(a<2||a>3)return!1;break;case"Fit":case"FitB":return a===0;case"FitH":case"FitBH":case"FitV":case"FitBV":if(a>1)return!1;break;case"FitR":if(a!==4)return!1;u=!1;break;default:return!1}for(const c of s)if(!(typeof c=="number"||u&&c===null))return!1;return!0}function ro(i,t,e){return Math.min(Math.max(i,t),e)}function IR(i){return Uint8Array.prototype.toBase64?i.toBase64():btoa(LR(i))}function HH(i){return Uint8Array.fromBase64?Uint8Array.fromBase64(i):ix(atob(i))}typeof Promise.try!="function"&&(Promise.try=function(i,...t){return new Promise(e=>{e(i(...t))})});typeof Math.sumPrecise!="function"&&(Math.sumPrecise=function(i){return i.reduce((t,e)=>t+e,0)});class a2{static textContent(t){const e=[],n={items:e,styles:Object.create(null)};function r(s){var c;if(!s)return;let a=null;const u=s.name;if(u==="#text")a=s.value;else if(a2.shouldBuildText(u))(c=s==null?void 0:s.attributes)!=null&&c.textContent?a=s.attributes.textContent:s.value&&(a=s.value);else return;if(a!==null&&e.push({str:a}),!!s.children)for(const h of s.children)r(h)}return r(t),n}static shouldBuildText(t){return!(t==="textarea"||t==="input"||t==="option"||t==="select")}}class PR{static setupStorage(t,e,n,r,s){const a=r.getValue(e,{value:null});switch(n.name){case"textarea":if(a.value!==null&&(t.textContent=a.value),s==="print")break;t.addEventListener("input",u=>{r.setValue(e,{value:u.target.value})});break;case"input":if(n.attributes.type==="radio"||n.attributes.type==="checkbox"){if(a.value===n.attributes.xfaOn?t.setAttribute("checked",!0):a.value===n.attributes.xfaOff&&t.removeAttribute("checked"),s==="print")break;t.addEventListener("change",u=>{r.setValue(e,{value:u.target.checked?u.target.getAttribute("xfaOn"):u.target.getAttribute("xfaOff")})})}else{if(a.value!==null&&t.setAttribute("value",a.value),s==="print")break;t.addEventListener("input",u=>{r.setValue(e,{value:u.target.value})})}break;case"select":if(a.value!==null){t.setAttribute("value",a.value);for(const u of n.children)u.attributes.value===a.value?u.attributes.selected=!0:u.attributes.hasOwnProperty("selected")&&delete u.attributes.selected}t.addEventListener("input",u=>{const c=u.target.options,h=c.selectedIndex===-1?"":c[c.selectedIndex].value;r.setValue(e,{value:h})});break}}static setAttributes({html:t,element:e,storage:n=null,intent:r,linkService:s}){const{attributes:a}=e,u=t instanceof HTMLAnchorElement;a.type==="radio"&&(a.name=`${a.name}-${r}`);for(const[c,h]of Object.entries(a))if(h!=null)switch(c){case"class":h.length&&t.setAttribute(c,h.join(" "));break;case"dataId":break;case"id":t.setAttribute("data-element-id",h);break;case"style":Object.assign(t.style,h);break;case"textContent":t.textContent=h;break;default:(!u||c!=="href"&&c!=="newWindow")&&t.setAttribute(c,h)}u&&s.addLinkAttributes(t,a.href,a.newWindow),n&&a.dataId&&this.setupStorage(t,a.dataId,e,n)}static render(t){var g,m;const e=t.annotationStorage,n=t.linkService,r=t.xfaHtml,s=t.intent||"display",a=document.createElement(r.name);r.attributes&&this.setAttributes({html:a,element:r,intent:s,linkService:n});const u=s!=="richText",c=t.div;if(c.append(a),t.viewport){const y=`matrix(${t.viewport.transform.join(",")})`;c.style.transform=y}u&&c.setAttribute("class","xfaLayer xfaFont");const h=[];if(r.children.length===0){if(r.value){const y=document.createTextNode(r.value);a.append(y),u&&a2.shouldBuildText(r.name)&&h.push(y)}return{textDivs:h}}const f=[[r,-1,a]];for(;f.length>0;){const[y,w,S]=f.at(-1);if(w+1===y.children.length){f.pop();continue}const T=y.children[++f.at(-1)[1]];if(T===null)continue;const{name:C}=T;if(C==="#text"){const R=document.createTextNode(T.value);h.push(R),S.append(R);continue}const D=(g=T==null?void 0:T.attributes)!=null&&g.xmlns?document.createElementNS(T.attributes.xmlns,C):document.createElement(C);if(S.append(D),T.attributes&&this.setAttributes({html:D,element:T,storage:e,intent:s,linkService:n}),((m=T.children)==null?void 0:m.length)>0)f.push([T,-1,D]);else if(T.value){const R=document.createTextNode(T.value);u&&a2.shouldBuildText(C)&&h.push(R),D.append(R)}}for(const y of c.querySelectorAll(".xfaNonInteractive input, .xfaNonInteractive textarea"))y.setAttribute("readOnly",!0);return{textDivs:h}}static update(t){const e=`matrix(${t.viewport.transform.join(",")})`;t.div.style.transform=e,t.div.hidden=!1}}const Hc="http://www.w3.org/2000/svg",g0=class g0{};Kt(g0,"CSS",96),Kt(g0,"PDF",72),Kt(g0,"PDF_TO_CSS_UNITS",g0.CSS/g0.PDF);let Td=g0;async function rx(i,t="text"){if(Fv(i,document.baseURI)){const e=await fetch(i);if(!e.ok)throw new Error(e.statusText);switch(t){case"arraybuffer":return e.arrayBuffer();case"blob":return e.blob();case"json":return e.json()}return e.text()}return new Promise((e,n)=>{const r=new XMLHttpRequest;r.open("GET",i,!0),r.responseType=t,r.onreadystatechange=()=>{if(r.readyState===XMLHttpRequest.DONE){if(r.status===200||r.status===0){switch(t){case"arraybuffer":case"blob":case"json":e(r.response);return}e(r.responseText);return}n(new Error(r.statusText))}},r.send(null)})}class sx{constructor({viewBox:t,userUnit:e,scale:n,rotation:r,offsetX:s=0,offsetY:a=0,dontFlip:u=!1}){this.viewBox=t,this.userUnit=e,this.scale=n,this.rotation=r,this.offsetX=s,this.offsetY=a,n*=e;const c=(t[2]+t[0])/2,h=(t[3]+t[1])/2;let f,g,m,y;switch(r%=360,r<0&&(r+=360),r){case 180:f=-1,g=0,m=0,y=1;break;case 90:f=0,g=1,m=1,y=0;break;case 270:f=0,g=-1,m=-1,y=0;break;case 0:f=1,g=0,m=0,y=-1;break;default:throw new Error("PageViewport: Invalid rotation, must be a multiple of 90 degrees.")}u&&(m=-m,y=-y);let w,S,T,C;f===0?(w=Math.abs(h-t[1])*n+s,S=Math.abs(c-t[0])*n+a,T=(t[3]-t[1])*n,C=(t[2]-t[0])*n):(w=Math.abs(c-t[0])*n+s,S=Math.abs(h-t[1])*n+a,T=(t[2]-t[0])*n,C=(t[3]-t[1])*n),this.transform=[f*n,g*n,m*n,y*n,w-f*n*c-m*n*h,S-g*n*c-y*n*h],this.width=T,this.height=C}get rawDims(){const t=this.viewBox;return Ve(this,"rawDims",{pageWidth:t[2]-t[0],pageHeight:t[3]-t[1],pageX:t[0],pageY:t[1]})}clone({scale:t=this.scale,rotation:e=this.rotation,offsetX:n=this.offsetX,offsetY:r=this.offsetY,dontFlip:s=!1}={}){return new sx({viewBox:this.viewBox.slice(),userUnit:this.userUnit,scale:t,rotation:e,offsetX:n,offsetY:r,dontFlip:s})}convertToViewportPoint(t,e){const n=[t,e];return ge.applyTransform(n,this.transform),n}convertToViewportRectangle(t){const e=[t[0],t[1]];ge.applyTransform(e,this.transform);const n=[t[2],t[3]];return ge.applyTransform(n,this.transform),[e[0],e[1],n[0],n[1]]}convertToPdfPoint(t,e){const n=[t,e];return ge.applyInverseTransform(n,this.transform),n}}class rC extends Up{constructor(t,e=0){super(t,"RenderingCancelledException"),this.extraDelay=e}}function zA(i){const t=i.length;let e=0;for(;e<t&&i[e].trim()==="";)e++;return i.substring(e,e+5).toLowerCase()==="data:"}function sC(i){return typeof i=="string"&&/\.pdf$/i.test(i)}function qH(i){return[i]=i.split(/[#?]/,1),i.substring(i.lastIndexOf("/")+1)}function zH(i,t="document.pdf"){if(typeof i!="string")return t;if(zA(i))return Ge('getPdfFilenameFromUrl: ignore "data:"-URL for performance reasons.'),t;const n=(u=>{try{return new URL(u)}catch{try{return new URL(decodeURIComponent(u))}catch{try{return new URL(u,"https://foo.bar")}catch{try{return new URL(decodeURIComponent(u),"https://foo.bar")}catch{return null}}}}})(i);if(!n)return t;const r=u=>{try{let c=decodeURIComponent(u);return c.includes("/")?(c=c.split("/").at(-1),c.test(/^\.pdf$/i)?c:u):c}catch{return u}},s=/\.pdf$/i,a=n.pathname.split("/").at(-1);if(s.test(a))return r(a);if(n.searchParams.size>0){const u=Array.from(n.searchParams.values()).reverse();for(const h of u)if(s.test(h))return r(h);const c=Array.from(n.searchParams.keys()).reverse();for(const h of c)if(s.test(h))return r(h)}if(n.hash){const c=/[^/?#=]+\.pdf\b(?!.*\.pdf\b)/i.exec(n.hash);if(c)return r(c[0])}return t}class O6{constructor(){Kt(this,"started",Object.create(null));Kt(this,"times",[])}time(t){t in this.started&&Ge(`Timer is already running for ${t}`),this.started[t]=Date.now()}timeEnd(t){t in this.started||Ge(`Timer has not been started for ${t}`),this.times.push({name:t,start:this.started[t],end:Date.now()}),delete this.started[t]}toString(){const t=[];let e=0;for(const{name:n}of this.times)e=Math.max(n.length,e);for(const{name:n,start:r,end:s}of this.times)t.push(`${n.padEnd(e)} ${s-r}ms
`);return t.join("")}}function Fv(i,t){const e=t?URL.parse(i,t):URL.parse(i);return(e==null?void 0:e.protocol)==="http:"||(e==null?void 0:e.protocol)==="https:"}function ll(i){i.preventDefault()}function Zi(i){i.preventDefault(),i.stopPropagation()}function GH(i){console.log("Deprecated API usage: "+i)}var h2;class Kb{static toDateObject(t){if(t instanceof Date)return t;if(!t||typeof t!="string")return null;p(this,h2)||k(this,h2,new RegExp("^D:(\\d{4})(\\d{2})?(\\d{2})?(\\d{2})?(\\d{2})?(\\d{2})?([Z|+|-])?(\\d{2})?'?(\\d{2})?'?"));const e=p(this,h2).exec(t);if(!e)return null;const n=parseInt(e[1],10);let r=parseInt(e[2],10);r=r>=1&&r<=12?r-1:0;let s=parseInt(e[3],10);s=s>=1&&s<=31?s:1;let a=parseInt(e[4],10);a=a>=0&&a<=23?a:0;let u=parseInt(e[5],10);u=u>=0&&u<=59?u:0;let c=parseInt(e[6],10);c=c>=0&&c<=59?c:0;const h=e[7]||"Z";let f=parseInt(e[8],10);f=f>=0&&f<=23?f:0;let g=parseInt(e[9],10)||0;return g=g>=0&&g<=59?g:0,h==="-"?(a+=f,u+=g):h==="+"&&(a-=f,u-=g),new Date(Date.UTC(n,r,s,a,u,c))}}h2=new WeakMap,z(Kb,h2);function VH(i,{scale:t=1,rotation:e=0}){const{width:n,height:r}=i.attributes.style,s=[0,0,parseInt(n),parseInt(r)];return new sx({viewBox:s,userUnit:1,scale:t,rotation:e})}function ox(i){if(i.startsWith("#")){const t=parseInt(i.slice(1),16);return[(t&16711680)>>16,(t&65280)>>8,t&255]}return i.startsWith("rgb(")?i.slice(4,-1).split(",").map(t=>parseInt(t)):i.startsWith("rgba(")?i.slice(5,-1).split(",").map(t=>parseInt(t)).slice(0,3):(Ge(`Not a valid color format: "${i}"`),[0,0,0])}function YH(i){const t=document.createElement("span");t.style.visibility="hidden",t.style.colorScheme="only light",document.body.append(t);for(const e of i.keys()){t.style.color=e;const n=window.getComputedStyle(t).color;i.set(e,ox(n))}t.remove()}function Hi(i){const{a:t,b:e,c:n,d:r,e:s,f:a}=i.getTransform();return[t,e,n,r,s,a]}function Mu(i){const{a:t,b:e,c:n,d:r,e:s,f:a}=i.getTransform().invertSelf();return[t,e,n,r,s,a]}function Pp(i,t,e=!1,n=!0){if(t instanceof sx){const{pageWidth:r,pageHeight:s}=t.rawDims,{style:a}=i,u=bs.isCSSRoundSupported,c=`var(--total-scale-factor) * ${r}px`,h=`var(--total-scale-factor) * ${s}px`,f=u?`round(down, ${c}, var(--scale-round-x))`:`calc(${c})`,g=u?`round(down, ${h}, var(--scale-round-y))`:`calc(${h})`;!e||t.rotation%180===0?(a.width=f,a.height=g):(a.width=g,a.height=f)}n&&i.setAttribute("data-main-rotation",t.rotation)}class ac{constructor(){const{pixelRatio:t}=ac;this.sx=t,this.sy=t}get scaled(){return this.sx!==1||this.sy!==1}get symmetric(){return this.sx===this.sy}limitCanvas(t,e,n,r,s=-1){let a=1/0,u=1/0,c=1/0;n=ac.capPixels(n,s),n>0&&(a=Math.sqrt(n/(t*e))),r!==-1&&(u=r/t,c=r/e);const h=Math.min(a,u,c);return this.sx>h||this.sy>h?(this.sx=h,this.sy=h,!0):!1}static get pixelRatio(){return globalThis.devicePixelRatio||1}static capPixels(t,e){if(e>=0){const n=Math.ceil(window.screen.availWidth*window.screen.availHeight*this.pixelRatio**2*(1+e/100));return t>0?Math.min(t,n):n}return t}}const sS=["image/apng","image/avif","image/bmp","image/gif","image/jpeg","image/png","image/svg+xml","image/webp","image/x-icon"];class $H{static get isDarkMode(){var t;return Ve(this,"isDarkMode",!!((t=window==null?void 0:window.matchMedia)!=null&&t.call(window,"(prefers-color-scheme: dark)").matches))}}class WH{static get commentForegroundColor(){const t=document.createElement("span");t.classList.add("comment","sidebar");const{style:e}=t;e.width=e.height="0",e.display="none",e.color="var(--comment-fg-color)",document.body.append(t);const{color:n}=window.getComputedStyle(t);return t.remove(),Ve(this,"commentForegroundColor",ox(n))}}function XH(i,t,e,n){n=Math.min(Math.max(n??1,0),1);const r=255*(1-n);return i=Math.round(i*n+r),t=Math.round(t*n+r),e=Math.round(e*n+r),[i,t,e]}function U6(i,t){const e=i[0]/255,n=i[1]/255,r=i[2]/255,s=Math.max(e,n,r),a=Math.min(e,n,r),u=(s+a)/2;if(s===a)t[0]=t[1]=0;else{const c=s-a;switch(t[1]=u<.5?c/(s+a):c/(2-s-a),s){case e:t[0]=((n-r)/c+(n<r?6:0))*60;break;case n:t[0]=((r-e)/c+2)*60;break;case r:t[0]=((e-n)/c+4)*60;break}}t[2]=u}function oS(i,t){const e=i[0],n=i[1],r=i[2],s=(1-Math.abs(2*r-1))*n,a=s*(1-Math.abs(e/60%2-1)),u=r-s/2;switch(Math.floor(e/60)){case 0:t[0]=s+u,t[1]=a+u,t[2]=u;break;case 1:t[0]=a+u,t[1]=s+u,t[2]=u;break;case 2:t[0]=u,t[1]=s+u,t[2]=a+u;break;case 3:t[0]=u,t[1]=a+u,t[2]=s+u;break;case 4:t[0]=a+u,t[1]=u,t[2]=s+u;break;case 5:case 6:t[0]=s+u,t[1]=u,t[2]=a+u;break}}function H6(i){return i<=.03928?i/12.92:((i+.055)/1.055)**2.4}function q6(i,t,e){oS(i,e),e.map(H6);const n=.2126*e[0]+.7152*e[1]+.0722*e[2];oS(t,e),e.map(H6);const r=.2126*e[0]+.7152*e[1]+.0722*e[2];return n>r?(n+.05)/(r+.05):(r+.05)/(n+.05)}const z6=new Map;function jH(i,t){const e=i[0]+i[1]*256+i[2]*65536+t[0]*16777216+t[1]*4294967296+t[2]*1099511627776;let n=z6.get(e);if(n)return n;const r=new Float32Array(9),s=r.subarray(0,3),a=r.subarray(3,6);U6(i,a);const u=r.subarray(6,9);U6(t,u);const c=u[2]<.5,h=c?12:4.5;if(a[2]=c?Math.sqrt(a[2]):1-Math.sqrt(1-a[2]),q6(a,u,s)<h){let f,g;c?(f=a[2],g=1):(f=0,g=a[2]);const m=.005;for(;g-f>m;){const y=a[2]=(f+g)/2;c===q6(a,u,s)<h?f=y:g=y}a[2]=c?g:f}return oS(a,s),n=ge.makeHexColor(Math.round(s[0]*255),Math.round(s[1]*255),Math.round(s[2]*255)),z6.set(e,n),n}function kR({html:i,dir:t,className:e},n){const r=document.createDocumentFragment();if(typeof i=="string"){const s=document.createElement("p");s.dir=t||"auto";const a=i.split(/(?:\r\n?|\n)/);for(let u=0,c=a.length;u<c;++u){const h=a[u];s.append(document.createTextNode(h)),u<c-1&&s.append(document.createElement("br"))}r.append(s)}else PR.render({xfaHtml:i,div:r,intent:"richText"});r.firstElementChild.classList.add("richText",e),n.append(r)}function FR(i){const t=new Path2D;if(!i)return t;for(let e=0,n=i.length;e<n;)switch(i[e++]){case Nv.moveTo:t.moveTo(i[e++],i[e++]);break;case Nv.lineTo:t.lineTo(i[e++],i[e++]);break;case Nv.curveTo:t.bezierCurveTo(i[e++],i[e++],i[e++],i[e++],i[e++],i[e++]);break;case Nv.quadraticCurveTo:t.quadraticCurveTo(i[e++],i[e++],i[e++],i[e++]);break;case Nv.closePath:t.closePath();break;default:Ge(`Unrecognized drawing path operator: ${i[e-1]}`);break}return t}var If,Pf,Ya,$a,f2,kf,hm,fm,d2,hA,BR,xs,OR,UR,Hg,Bv;const Gc=class Gc{constructor(t){z(this,xs);z(this,If,null);z(this,Pf,null);z(this,Ya);z(this,$a,null);z(this,f2,null);z(this,kf,null);z(this,hm,null);z(this,fm,null);k(this,Ya,t),p(Gc,d2)||k(Gc,d2,Object.freeze({freetext:"pdfjs-editor-remove-freetext-button",highlight:"pdfjs-editor-remove-highlight-button",ink:"pdfjs-editor-remove-ink-button",stamp:"pdfjs-editor-remove-stamp-button",signature:"pdfjs-editor-remove-signature-button"}))}render(){const t=k(this,If,document.createElement("div"));t.classList.add("editToolbar","hidden"),t.setAttribute("role","toolbar");const e=p(this,Ya)._uiManager._signal;e instanceof AbortSignal&&!e.aborted&&(t.addEventListener("contextmenu",ll,{signal:e}),t.addEventListener("pointerdown",$(Gc,hA,BR),{signal:e}));const n=k(this,$a,document.createElement("div"));n.className="buttons",t.append(n);const r=p(this,Ya).toolbarPosition;if(r){const{style:s}=t,a=p(this,Ya)._uiManager.direction==="ltr"?1-r[0]:r[0];s.insetInlineEnd=`${100*a}%`,s.top=`calc(${100*r[1]}% + var(--editor-toolbar-vert-offset))`}return t}get div(){return p(this,If)}hide(){var t;p(this,If).classList.add("hidden"),(t=p(this,Pf))==null||t.hideDropdown()}show(){var t,e;p(this,If).classList.remove("hidden"),(t=p(this,f2))==null||t.shown(),(e=p(this,kf))==null||e.shown()}addDeleteButton(){const{editorType:t,_uiManager:e}=p(this,Ya),n=document.createElement("button");n.classList.add("basic","deleteButton"),n.tabIndex=0,n.setAttribute("data-l10n-id",p(Gc,d2)[t]),$(this,xs,Hg).call(this,n)&&n.addEventListener("click",r=>{e.delete()},{signal:e._signal}),p(this,$a).append(n)}async addAltText(t){const e=await t.render();$(this,xs,Hg).call(this,e),p(this,$a).append(e,p(this,xs,Bv)),k(this,f2,t)}addComment(t,e=null){if(p(this,kf))return;const n=t.renderForToolbar();if(!n)return;$(this,xs,Hg).call(this,n);const r=k(this,hm,p(this,xs,Bv));e?(p(this,$a).insertBefore(n,e),p(this,$a).insertBefore(r,e)):p(this,$a).append(n,r),k(this,kf,t),t.toolbar=this}addColorPicker(t){if(p(this,Pf))return;k(this,Pf,t);const e=t.renderButton();$(this,xs,Hg).call(this,e),p(this,$a).append(e,p(this,xs,Bv))}async addEditSignatureButton(t){const e=k(this,fm,await t.renderEditButton(p(this,Ya)));$(this,xs,Hg).call(this,e),p(this,$a).append(e,p(this,xs,Bv))}removeButton(t){var e,n;switch(t){case"comment":(e=p(this,kf))==null||e.removeToolbarCommentButton(),k(this,kf,null),(n=p(this,hm))==null||n.remove(),k(this,hm,null);break}}async addButton(t,e){switch(t){case"colorPicker":e&&this.addColorPicker(e);break;case"altText":e&&await this.addAltText(e);break;case"editSignature":e&&await this.addEditSignatureButton(e);break;case"delete":this.addDeleteButton();break;case"comment":e&&this.addComment(e);break}}async addButtonBefore(t,e,n){if(!e&&t==="comment")return;const r=p(this,$a).querySelector(n);r&&t==="comment"&&this.addComment(e,r)}updateEditSignatureButton(t){p(this,fm)&&(p(this,fm).title=t)}remove(){var t;p(this,If).remove(),(t=p(this,Pf))==null||t.destroy(),k(this,Pf,null)}};If=new WeakMap,Pf=new WeakMap,Ya=new WeakMap,$a=new WeakMap,f2=new WeakMap,kf=new WeakMap,hm=new WeakMap,fm=new WeakMap,d2=new WeakMap,hA=new WeakSet,BR=function(t){t.stopPropagation()},xs=new WeakSet,OR=function(t){p(this,Ya)._focusEventsAllowed=!1,Zi(t)},UR=function(t){p(this,Ya)._focusEventsAllowed=!0,Zi(t)},Hg=function(t){const e=p(this,Ya)._uiManager._signal;return!(e instanceof AbortSignal)||e.aborted?!1:(t.addEventListener("focusin",$(this,xs,OR).bind(this),{capture:!0,signal:e}),t.addEventListener("focusout",$(this,xs,UR).bind(this),{capture:!0,signal:e}),t.addEventListener("contextmenu",ll,{signal:e}),!0)},Bv=function(){const t=document.createElement("div");return t.className="divider",t},z(Gc,hA),z(Gc,d2,null);let aS=Gc;var p2,y0,Yc,Mh,HR,qR,lS;class JH{constructor(t){z(this,Mh);z(this,p2,null);z(this,y0,null);z(this,Yc);k(this,Yc,t)}show(t,e,n){const[r,s]=$(this,Mh,qR).call(this,e,n),{style:a}=p(this,y0)||k(this,y0,$(this,Mh,HR).call(this));t.append(p(this,y0)),a.insetInlineEnd=`${100*r}%`,a.top=`calc(${100*s}% + var(--editor-toolbar-vert-offset))`}hide(){p(this,y0).remove()}}p2=new WeakMap,y0=new WeakMap,Yc=new WeakMap,Mh=new WeakSet,HR=function(){const t=k(this,y0,document.createElement("div"));t.className="editToolbar",t.setAttribute("role","toolbar");const e=p(this,Yc)._signal;e instanceof AbortSignal&&!e.aborted&&t.addEventListener("contextmenu",ll,{signal:e});const n=k(this,p2,document.createElement("div"));return n.className="buttons",t.append(n),p(this,Yc).hasCommentManager()&&$(this,Mh,lS).call(this,"commentButton","pdfjs-comment-floating-button","pdfjs-comment-floating-button-label",()=>{p(this,Yc).commentSelection("floating_button")}),$(this,Mh,lS).call(this,"highlightButton","pdfjs-highlight-floating-button1","pdfjs-highlight-floating-button-label",()=>{p(this,Yc).highlightSelection("floating_button")}),t},qR=function(t,e){let n=0,r=0;for(const s of t){const a=s.y+s.height;if(a<n)continue;const u=s.x+(e?s.width:0);if(a>n){r=u,n=a;continue}e?u>r&&(r=u):u<r&&(r=u)}return[e?1-r:r,n]},lS=function(t,e,n,r){const s=document.createElement("button");s.classList.add("basic",t),s.tabIndex=0,s.setAttribute("data-l10n-id",e);const a=document.createElement("span");s.append(a),a.className="visuallyHidden",a.setAttribute("data-l10n-id",n);const u=p(this,Yc)._signal;u instanceof AbortSignal&&!u.aborted&&(s.addEventListener("contextmenu",ll,{signal:u}),s.addEventListener("click",r,{signal:u})),p(this,p2).append(s)};function zR(i,t,e){for(const n of e)t.addEventListener(n,i[n].bind(i))}var x0,b0,dm,A0;const Xn=class Xn{static initializeAndAddPointerId(t){(p(Xn,b0)||k(Xn,b0,new Set)).add(t)}static setPointer(t,e){p(Xn,x0)||k(Xn,x0,e),p(Xn,A0)??k(Xn,A0,t)}static setTimeStamp(t){k(Xn,dm,t)}static isSamePointerId(t){return p(Xn,x0)===t}static isSamePointerIdOrRemove(t){var e;return p(Xn,x0)===t?!0:((e=p(Xn,b0))==null||e.delete(t),!1)}static isSamePointerType(t){return p(Xn,A0)===t}static isInitializedAndDifferentPointerType(t){return p(Xn,A0)!==null&&!Xn.isSamePointerType(t)}static isSameTimeStamp(t){return p(Xn,dm)===t}static isUsingMultiplePointers(){var t;return((t=p(Xn,b0))==null?void 0:t.size)>=1}static clearPointerType(){k(Xn,A0,null)}static clearPointerIds(){k(Xn,x0,NaN),k(Xn,b0,null)}static clearTimeStamp(){k(Xn,dm,NaN)}};x0=new WeakMap,b0=new WeakMap,dm=new WeakMap,A0=new WeakMap,z(Xn,x0,NaN),z(Xn,b0,null),z(Xn,dm,NaN),z(Xn,A0,null);let Ps=Xn;var fA;class KH{constructor(){z(this,fA,0)}get id(){return`${s2}${Nr(this,fA)._++}`}}fA=new WeakMap;var pm,g2,ks,gm,E5;const yC=class yC{constructor(){z(this,gm);z(this,pm,MR());z(this,g2,0);z(this,ks,null)}static get _isSVGFittingCanvas(){const t='data:image/svg+xml;charset=UTF-8,<svg viewBox="0 0 1 1" width="1" height="1" xmlns="http://www.w3.org/2000/svg"><rect width="1" height="1" style="fill:red;"/></svg>',n=new OffscreenCanvas(1,3).getContext("2d",{willReadFrequently:!0}),r=new Image;r.src=t;const s=r.decode().then(()=>(n.drawImage(r,0,0,1,1,0,0,1,3),new Uint32Array(n.getImageData(0,0,1,1).data.buffer)[0]===0));return Ve(this,"_isSVGFittingCanvas",s)}async getFromFile(t){const{lastModified:e,name:n,size:r,type:s}=t;return $(this,gm,E5).call(this,`${e}_${n}_${r}_${s}`,t)}async getFromUrl(t){return $(this,gm,E5).call(this,t,t)}async getFromBlob(t,e){const n=await e;return $(this,gm,E5).call(this,t,n)}async getFromId(t){p(this,ks)||k(this,ks,new Map);const e=p(this,ks).get(t);if(!e)return null;if(e.bitmap)return e.refCounter+=1,e;if(e.file)return this.getFromFile(e.file);if(e.blobPromise){const{blobPromise:n}=e;return delete e.blobPromise,this.getFromBlob(e.id,n)}return this.getFromUrl(e.url)}getFromCanvas(t,e){p(this,ks)||k(this,ks,new Map);let n=p(this,ks).get(t);if(n!=null&&n.bitmap)return n.refCounter+=1,n;const r=new OffscreenCanvas(e.width,e.height);return r.getContext("2d").drawImage(e,0,0),n={bitmap:r.transferToImageBitmap(),id:`image_${p(this,pm)}_${Nr(this,g2)._++}`,refCounter:1,isSvg:!1},p(this,ks).set(t,n),p(this,ks).set(n.id,n),n}getSvgUrl(t){const e=p(this,ks).get(t);return e!=null&&e.isSvg?e.svgUrl:null}deleteId(t){var r;p(this,ks)||k(this,ks,new Map);const e=p(this,ks).get(t);if(!e||(e.refCounter-=1,e.refCounter!==0))return;const{bitmap:n}=e;if(!e.url&&!e.file){const s=new OffscreenCanvas(n.width,n.height);s.getContext("bitmaprenderer").transferFromImageBitmap(n),e.blobPromise=s.convertToBlob()}(r=n.close)==null||r.call(n),e.bitmap=null}isValidId(t){return t.startsWith(`image_${p(this,pm)}_`)}};pm=new WeakMap,g2=new WeakMap,ks=new WeakMap,gm=new WeakSet,E5=async function(t,e){p(this,ks)||k(this,ks,new Map);let n=p(this,ks).get(t);if(n===null)return null;if(n!=null&&n.bitmap)return n.refCounter+=1,n;try{n||(n={bitmap:null,id:`image_${p(this,pm)}_${Nr(this,g2)._++}`,refCounter:0,isSvg:!1});let r;if(typeof e=="string"?(n.url=e,r=await rx(e,"blob")):e instanceof File?r=n.file=e:e instanceof Blob&&(r=e),r.type==="image/svg+xml"){const s=yC._isSVGFittingCanvas,a=new FileReader,u=new Image,c=new Promise((h,f)=>{u.onload=()=>{n.bitmap=u,n.isSvg=!0,h()},a.onload=async()=>{const g=n.svgUrl=a.result;u.src=await s?`${g}#svgView(preserveAspectRatio(none))`:g},u.onerror=a.onerror=f});a.readAsDataURL(r),await c}else n.bitmap=await createImageBitmap(r);n.refCounter=1}catch(r){Ge(r),n=null}return p(this,ks).set(t,n),n&&p(this,ks).set(n.id,n),n};let uS=yC;var nr,Ff,m2,Ui;class QH{constructor(t=128){z(this,nr,[]);z(this,Ff,!1);z(this,m2);z(this,Ui,-1);k(this,m2,t)}add({cmd:t,undo:e,post:n,mustExec:r,type:s=NaN,overwriteIfSameType:a=!1,keepUndo:u=!1}){if(r&&t(),p(this,Ff))return;const c={cmd:t,undo:e,post:n,type:s};if(p(this,Ui)===-1){p(this,nr).length>0&&(p(this,nr).length=0),k(this,Ui,0),p(this,nr).push(c);return}if(a&&p(this,nr)[p(this,Ui)].type===s){u&&(c.undo=p(this,nr)[p(this,Ui)].undo),p(this,nr)[p(this,Ui)]=c;return}const h=p(this,Ui)+1;h===p(this,m2)?p(this,nr).splice(0,1):(k(this,Ui,h),h<p(this,nr).length&&p(this,nr).splice(h)),p(this,nr).push(c)}undo(){if(p(this,Ui)===-1)return;k(this,Ff,!0);const{undo:t,post:e}=p(this,nr)[p(this,Ui)];t(),e==null||e(),k(this,Ff,!1),k(this,Ui,p(this,Ui)-1)}redo(){if(p(this,Ui)<p(this,nr).length-1){k(this,Ui,p(this,Ui)+1),k(this,Ff,!0);const{cmd:t,post:e}=p(this,nr)[p(this,Ui)];t(),e==null||e(),k(this,Ff,!1)}}hasSomethingToUndo(){return p(this,Ui)!==-1}hasSomethingToRedo(){return p(this,Ui)<p(this,nr).length-1}cleanType(t){if(p(this,Ui)!==-1){for(let e=p(this,Ui);e>=0;e--)if(p(this,nr)[e].type!==t){p(this,nr).splice(e+1,p(this,Ui)-e),k(this,Ui,e);return}p(this,nr).length=0,k(this,Ui,-1)}}destroy(){k(this,nr,null)}}nr=new WeakMap,Ff=new WeakMap,m2=new WeakMap,Ui=new WeakMap;var dA,GR;class ax{constructor(t){z(this,dA);this.buffer=[],this.callbacks=new Map,this.allKeys=new Set;const{isMac:e}=bs.platform;for(const[n,r,s={}]of t)for(const a of n){const u=a.startsWith("mac+");e&&u?(this.callbacks.set(a.slice(4),{callback:r,options:s}),this.allKeys.add(a.split("+").at(-1))):!e&&!u&&(this.callbacks.set(a,{callback:r,options:s}),this.allKeys.add(a.split("+").at(-1)))}}exec(t,e){if(!this.allKeys.has(e.key))return;const n=this.callbacks.get($(this,dA,GR).call(this,e));if(!n)return;const{callback:r,options:{bubbles:s=!1,args:a=[],checker:u=null}}=n;u&&!u(t,e)||(r.bind(t,...a,e)(),s||Zi(e))}}dA=new WeakSet,GR=function(t){t.altKey&&this.buffer.push("alt"),t.ctrlKey&&this.buffer.push("ctrl"),t.metaKey&&this.buffer.push("meta"),t.shiftKey&&this.buffer.push("shift"),this.buffer.push(t.key);const e=this.buffer.join("+");return this.buffer.length=0,e};const pA=class pA{get _colors(){const t=new Map([["CanvasText",null],["Canvas",null]]);return YH(t),Ve(this,"_colors",t)}convert(t){const e=ox(t);if(!window.matchMedia("(forced-colors: active)").matches)return e;for(const[n,r]of this._colors)if(r.every((s,a)=>s===e[a]))return pA._colorsMapping.get(n);return e}getHexCode(t){const e=this._colors.get(t);return e?ge.makeHexColor(...e):t}};Kt(pA,"_colorsMapping",new Map([["CanvasText",[0,0,0]],["Canvas",[255,255,255]]]));let cS=pA;var mm,ra,vm,Wi,Lr,ym,Wa,xm,Xa,Fs,Bf,Of,bm,Uf,Fu,ja,_0,v2,y2,Am,x2,Bu,Hf,_m,qf,Ou,gA,zf,wm,b2,Gf,w0,Sm,Vf,A2,yr,qn,$c,Yf,$f,_2,Em,w2,Wf,Uu,Wc,S2,E2,Ja,ae,C5,hS,VR,YR,Ov,$R,WR,XR,fS,jR,JR,KR,QR,Ks,qc,ZR,tD,dS,eD,Uv,pS;const tm=class tm{constructor(t,e,n,r,s,a,u,c,h,f,g,m,y,w,S,T){z(this,ae);z(this,mm,new AbortController);z(this,ra,null);z(this,vm,null);z(this,Wi,new Map);z(this,Lr,new Map);z(this,ym,null);z(this,Wa,null);z(this,xm,null);z(this,Xa,new QH);z(this,Fs,null);z(this,Bf,null);z(this,Of,null);z(this,bm,0);z(this,Uf,new Set);z(this,Fu,null);z(this,ja,null);z(this,_0,new Set);Kt(this,"_editorUndoBar",null);z(this,v2,!1);z(this,y2,!1);z(this,Am,!1);z(this,x2,null);z(this,Bu,null);z(this,Hf,null);z(this,_m,null);z(this,qf,!1);z(this,Ou,null);z(this,gA,new KH);z(this,zf,!1);z(this,wm,!1);z(this,b2,!1);z(this,Gf,null);z(this,w0,null);z(this,Sm,null);z(this,Vf,null);z(this,A2,null);z(this,yr,We.NONE);z(this,qn,new Set);z(this,$c,null);z(this,Yf,null);z(this,$f,null);z(this,_2,null);z(this,Em,null);z(this,w2,{isEditing:!1,isEmpty:!0,hasSomethingToUndo:!1,hasSomethingToRedo:!1,hasSelectedEditor:!1,hasSelectedText:!1});z(this,Wf,[0,0]);z(this,Uu,null);z(this,Wc,null);z(this,S2,null);z(this,E2,null);z(this,Ja,null);const C=this._signal=p(this,mm).signal;k(this,Wc,t),k(this,S2,e),k(this,E2,n),k(this,ym,r),k(this,Fs,s),k(this,Yf,a),k(this,Em,c),this._eventBus=u,u._on("editingaction",this.onEditingAction.bind(this),{signal:C}),u._on("pagechanging",this.onPageChanging.bind(this),{signal:C}),u._on("scalechanging",this.onScaleChanging.bind(this),{signal:C}),u._on("rotationchanging",this.onRotationChanging.bind(this),{signal:C}),u._on("setpreference",this.onSetPreference.bind(this),{signal:C}),u._on("switchannotationeditorparams",D=>this.updateParams(D.type,D.value),{signal:C}),window.addEventListener("pointerdown",()=>{k(this,wm,!0)},{capture:!0,signal:C}),window.addEventListener("pointerup",()=>{k(this,wm,!1)},{capture:!0,signal:C}),$(this,ae,$R).call(this),$(this,ae,QR).call(this),$(this,ae,fS).call(this),k(this,Wa,c.annotationStorage),k(this,x2,c.filterFactory),k(this,$f,h),k(this,_m,f||null),k(this,v2,g),k(this,y2,m),k(this,Am,y),k(this,A2,w||null),this.viewParameters={realScale:Td.PDF_TO_CSS_UNITS,rotation:0},this.isShiftKeyDown=!1,this._editorUndoBar=S||null,this._supportsPinchToZoom=T!==!1,s==null||s.setSidebarUiManager(this)}static get _keyboardManager(){const t=tm.prototype,e=a=>p(a,Wc).contains(document.activeElement)&&document.activeElement.tagName!=="BUTTON"&&a.hasSomethingToControl(),n=(a,{target:u})=>{if(u instanceof HTMLInputElement){const{type:c}=u;return c!=="text"&&c!=="number"}return!0},r=this.TRANSLATE_SMALL,s=this.TRANSLATE_BIG;return Ve(this,"_keyboardManager",new ax([[["ctrl+a","mac+meta+a"],t.selectAll,{checker:n}],[["ctrl+z","mac+meta+z"],t.undo,{checker:n}],[["ctrl+y","ctrl+shift+z","mac+meta+shift+z","ctrl+shift+Z","mac+meta+shift+Z"],t.redo,{checker:n}],[["Backspace","alt+Backspace","ctrl+Backspace","shift+Backspace","mac+Backspace","mac+alt+Backspace","mac+ctrl+Backspace","Delete","ctrl+Delete","shift+Delete","mac+Delete"],t.delete,{checker:n}],[["Enter","mac+Enter"],t.addNewEditorFromKeyboard,{checker:(a,{target:u})=>!(u instanceof HTMLButtonElement)&&p(a,Wc).contains(u)&&!a.isEnterHandled}],[[" ","mac+ "],t.addNewEditorFromKeyboard,{checker:(a,{target:u})=>!(u instanceof HTMLButtonElement)&&p(a,Wc).contains(document.activeElement)}],[["Escape","mac+Escape"],t.unselectAll],[["ArrowLeft","mac+ArrowLeft"],t.translateSelectedEditors,{args:[-r,0],checker:e}],[["ctrl+ArrowLeft","mac+shift+ArrowLeft"],t.translateSelectedEditors,{args:[-s,0],checker:e}],[["ArrowRight","mac+ArrowRight"],t.translateSelectedEditors,{args:[r,0],checker:e}],[["ctrl+ArrowRight","mac+shift+ArrowRight"],t.translateSelectedEditors,{args:[s,0],checker:e}],[["ArrowUp","mac+ArrowUp"],t.translateSelectedEditors,{args:[0,-r],checker:e}],[["ctrl+ArrowUp","mac+shift+ArrowUp"],t.translateSelectedEditors,{args:[0,-s],checker:e}],[["ArrowDown","mac+ArrowDown"],t.translateSelectedEditors,{args:[0,r],checker:e}],[["ctrl+ArrowDown","mac+shift+ArrowDown"],t.translateSelectedEditors,{args:[0,s],checker:e}]]))}destroy(){var t,e,n,r,s,a,u,c,h;(t=p(this,Ja))==null||t.resolve(),k(this,Ja,null),(e=p(this,mm))==null||e.abort(),k(this,mm,null),this._signal=null;for(const f of p(this,Lr).values())f.destroy();p(this,Lr).clear(),p(this,Wi).clear(),p(this,_0).clear(),(n=p(this,Vf))==null||n.clear(),k(this,ra,null),p(this,qn).clear(),p(this,Xa).destroy(),(r=p(this,ym))==null||r.destroy(),(s=p(this,Fs))==null||s.destroy(),(a=p(this,Yf))==null||a.destroy(),(u=p(this,Ou))==null||u.hide(),k(this,Ou,null),(c=p(this,Sm))==null||c.destroy(),k(this,Sm,null),k(this,vm,null),p(this,Bu)&&(clearTimeout(p(this,Bu)),k(this,Bu,null)),p(this,Uu)&&(clearTimeout(p(this,Uu)),k(this,Uu,null)),(h=this._editorUndoBar)==null||h.destroy(),k(this,Em,null)}combinedSignal(t){return AbortSignal.any([this._signal,t.signal])}get mlManager(){return p(this,A2)}get useNewAltTextFlow(){return p(this,y2)}get useNewAltTextWhenAddingImage(){return p(this,Am)}get hcmFilter(){return Ve(this,"hcmFilter",p(this,$f)?p(this,x2).addHCMFilter(p(this,$f).foreground,p(this,$f).background):"none")}get direction(){return Ve(this,"direction",getComputedStyle(p(this,Wc)).direction)}get _highlightColors(){return Ve(this,"_highlightColors",p(this,_m)?new Map(p(this,_m).split(",").map(t=>(t=t.split("=").map(e=>e.trim()),t[1]=t[1].toUpperCase(),t))):null)}get highlightColors(){const{_highlightColors:t}=this;if(!t)return Ve(this,"highlightColors",null);const e=new Map,n=!!p(this,$f);for(const[r,s]of t){const a=r.endsWith("_HCM");if(n&&a){e.set(r.replace("_HCM",""),s);continue}!n&&!a&&e.set(r,s)}return Ve(this,"highlightColors",e)}get highlightColorNames(){return Ve(this,"highlightColorNames",this.highlightColors?new Map(Array.from(this.highlightColors,t=>t.reverse())):null)}getNonHCMColor(t){if(!this._highlightColors)return t;const e=this.highlightColorNames.get(t);return this._highlightColors.get(e)||t}getNonHCMColorName(t){return this.highlightColorNames.get(t)||t}setCurrentDrawingSession(t){t?(this.unselectAll(),this.disableUserSelect(!0)):this.disableUserSelect(!1),k(this,Of,t)}setMainHighlightColorPicker(t){k(this,Sm,t)}editAltText(t,e=!1){var n;(n=p(this,ym))==null||n.editAltText(this,t,e)}hasCommentManager(){return!!p(this,Fs)}editComment(t,e,n,r){var s;(s=p(this,Fs))==null||s.showDialog(this,t,e,n,r)}selectComment(t,e){const n=p(this,Lr).get(t),r=n==null?void 0:n.getEditorByUID(e);r==null||r.toggleComment(!0,!0)}updateComment(t){var e;(e=p(this,Fs))==null||e.updateComment(t.getData())}updatePopupColor(t){var e;(e=p(this,Fs))==null||e.updatePopupColor(t)}removeComment(t){var e;(e=p(this,Fs))==null||e.removeComments([t.uid])}toggleComment(t,e,n=void 0){var r;(r=p(this,Fs))==null||r.toggleCommentPopup(t,e,n)}makeCommentColor(t,e){var n;return t&&((n=p(this,Fs))==null?void 0:n.makeCommentColor(t,e))||null}getCommentDialogElement(){var t;return((t=p(this,Fs))==null?void 0:t.dialogElement)||null}async waitForEditorsRendered(t){if(p(this,Lr).has(t-1))return;const{resolve:e,promise:n}=Promise.withResolvers(),r=s=>{s.pageNumber===t&&(this._eventBus._off("editorsrendered",r),e())};this._eventBus.on("editorsrendered",r),await n}getSignature(t){var e;(e=p(this,Yf))==null||e.getSignature({uiManager:this,editor:t})}get signatureManager(){return p(this,Yf)}switchToMode(t,e){this._eventBus.on("annotationeditormodechanged",e,{once:!0,signal:this._signal}),this._eventBus.dispatch("showannotationeditorui",{source:this,mode:t})}setPreference(t,e){this._eventBus.dispatch("setpreference",{source:this,name:t,value:e})}onSetPreference({name:t,value:e}){switch(t){case"enableNewAltTextWhenAddingImage":k(this,Am,e);break}}onPageChanging({pageNumber:t}){k(this,bm,t-1)}focusMainContainer(){p(this,Wc).focus()}findParent(t,e){for(const n of p(this,Lr).values()){const{x:r,y:s,width:a,height:u}=n.div.getBoundingClientRect();if(t>=r&&t<=r+a&&e>=s&&e<=s+u)return n}return null}disableUserSelect(t=!1){p(this,S2).classList.toggle("noUserSelect",t)}addShouldRescale(t){p(this,_0).add(t)}removeShouldRescale(t){p(this,_0).delete(t)}onScaleChanging({scale:t}){var e;this.commitOrRemove(),this.viewParameters.realScale=t*Td.PDF_TO_CSS_UNITS;for(const n of p(this,_0))n.onScaleChanging();(e=p(this,Of))==null||e.onScaleChanging()}onRotationChanging({pagesRotation:t}){this.commitOrRemove(),this.viewParameters.rotation=t}highlightSelection(t="",e=!1){const n=document.getSelection();if(!n||n.isCollapsed)return;const{anchorNode:r,anchorOffset:s,focusNode:a,focusOffset:u}=n,c=n.toString(),f=$(this,ae,C5).call(this,n).closest(".textLayer"),g=this.getSelectionBoxes(f);if(!g)return;n.empty();const m=$(this,ae,hS).call(this,f),y=p(this,yr)===We.NONE,w=()=>{const S=m==null?void 0:m.createAndAddNewEditor({x:0,y:0},!1,{methodOfCreation:t,boxes:g,anchorNode:r,anchorOffset:s,focusNode:a,focusOffset:u,text:c});y&&this.showAllEditors("highlight",!0,!0),e&&(S==null||S.editComment())};if(y){this.switchToMode(We.HIGHLIGHT,w);return}w()}commentSelection(t=""){this.highlightSelection(t,!0)}getAndRemoveDataFromAnnotationStorage(t){if(!p(this,Wa))return null;const e=`${s2}${t}`,n=p(this,Wa).getRawValue(e);return n&&p(this,Wa).remove(e),n}addToAnnotationStorage(t){!t.isEmpty()&&p(this,Wa)&&!p(this,Wa).has(t.id)&&p(this,Wa).setValue(t.id,t)}a11yAlert(t,e=null){const n=p(this,E2);n&&(n.setAttribute("data-l10n-id",t),e?n.setAttribute("data-l10n-args",JSON.stringify(e)):n.removeAttribute("data-l10n-args"))}blur(){if(this.isShiftKeyDown=!1,p(this,qf)&&(k(this,qf,!1),$(this,ae,Ov).call(this,"main_toolbar")),!this.hasSelection)return;const{activeElement:t}=document;for(const e of p(this,qn))if(e.div.contains(t)){k(this,w0,[e,t]),e._focusEventsAllowed=!1;break}}focus(){if(!p(this,w0))return;const[t,e]=p(this,w0);k(this,w0,null),e.addEventListener("focusin",()=>{t._focusEventsAllowed=!0},{once:!0,signal:this._signal}),e.focus()}addEditListeners(){$(this,ae,fS).call(this),this.setEditingState(!0)}removeEditListeners(){$(this,ae,jR).call(this),this.setEditingState(!1)}dragOver(t){for(const{type:e}of t.dataTransfer.items)for(const n of p(this,ja))if(n.isHandlingMimeForPasting(e)){t.dataTransfer.dropEffect="copy",t.preventDefault();return}}drop(t){for(const e of t.dataTransfer.items)for(const n of p(this,ja))if(n.isHandlingMimeForPasting(e.type)){n.paste(e,this.currentLayer),t.preventDefault();return}}copy(t){var n;if(t.preventDefault(),(n=p(this,ra))==null||n.commitOrRemove(),!this.hasSelection)return;const e=[];for(const r of p(this,qn)){const s=r.serialize(!0);s&&e.push(s)}e.length!==0&&t.clipboardData.setData("application/pdfjs",JSON.stringify(e))}cut(t){this.copy(t),this.delete()}async paste(t){t.preventDefault();const{clipboardData:e}=t;for(const s of e.items)for(const a of p(this,ja))if(a.isHandlingMimeForPasting(s.type)){a.paste(s,this.currentLayer);return}let n=e.getData("application/pdfjs");if(!n)return;try{n=JSON.parse(n)}catch(s){Ge(`paste: "${s.message}".`);return}if(!Array.isArray(n))return;this.unselectAll();const r=this.currentLayer;try{const s=[];for(const c of n){const h=await r.deserialize(c);if(!h)return;s.push(h)}const a=()=>{for(const c of s)$(this,ae,dS).call(this,c);$(this,ae,pS).call(this,s)},u=()=>{for(const c of s)c.remove()};this.addCommands({cmd:a,undo:u,mustExec:!0})}catch(s){Ge(`paste: "${s.message}".`)}}keydown(t){!this.isShiftKeyDown&&t.key==="Shift"&&(this.isShiftKeyDown=!0),p(this,yr)!==We.NONE&&!this.isEditorHandlingKeyboard&&tm._keyboardManager.exec(this,t)}keyup(t){this.isShiftKeyDown&&t.key==="Shift"&&(this.isShiftKeyDown=!1,p(this,qf)&&(k(this,qf,!1),$(this,ae,Ov).call(this,"main_toolbar")))}onEditingAction({name:t}){switch(t){case"undo":case"redo":case"delete":case"selectAll":this[t]();break;case"highlightSelection":this.highlightSelection("context_menu");break;case"commentSelection":this.commentSelection("context_menu");break}}setEditingState(t){t?($(this,ae,WR).call(this),$(this,ae,JR).call(this),$(this,ae,Ks).call(this,{isEditing:p(this,yr)!==We.NONE,isEmpty:$(this,ae,Uv).call(this),hasSomethingToUndo:p(this,Xa).hasSomethingToUndo(),hasSomethingToRedo:p(this,Xa).hasSomethingToRedo(),hasSelectedEditor:!1})):($(this,ae,XR).call(this),$(this,ae,KR).call(this),$(this,ae,Ks).call(this,{isEditing:!1}),this.disableUserSelect(!1))}registerEditorTypes(t){if(!p(this,ja)){k(this,ja,t);for(const e of p(this,ja))$(this,ae,qc).call(this,e.defaultPropertiesToUpdate)}}getId(){return p(this,gA).id}get currentLayer(){return p(this,Lr).get(p(this,bm))}getLayer(t){return p(this,Lr).get(t)}get currentPageIndex(){return p(this,bm)}addLayer(t){p(this,Lr).set(t.pageIndex,t),p(this,zf)?t.enable():t.disable()}removeLayer(t){p(this,Lr).delete(t.pageIndex)}async updateMode(t,e=null,n=!1,r=!1,s=!1){var a,u,c,h,f,g;if(p(this,yr)!==t&&!(p(this,Ja)&&(await p(this,Ja).promise,!p(this,Ja)))){if(k(this,Ja,Promise.withResolvers()),(a=p(this,Of))==null||a.commitOrRemove(),p(this,yr)===We.POPUP&&((u=p(this,Fs))==null||u.hideSidebar()),(c=p(this,Fs))==null||c.destroyPopup(),k(this,yr,t),t===We.NONE){this.setEditingState(!1),$(this,ae,tD).call(this);for(const m of p(this,Wi).values())m.hideStandaloneCommentButton();(h=this._editorUndoBar)==null||h.hide(),this.toggleComment(null),p(this,Ja).resolve();return}for(const m of p(this,Wi).values())m.addStandaloneCommentButton();t===We.SIGNATURE&&await((f=p(this,Yf))==null?void 0:f.loadSignatures()),this.setEditingState(!0),await $(this,ae,ZR).call(this),this.unselectAll();for(const m of p(this,Lr).values())m.updateMode(t);if(t===We.POPUP){p(this,vm)||k(this,vm,await p(this,Em).getAnnotationsByType(new Set(p(this,ja).map(w=>w._editorType))));const m=new Set,y=[];for(const w of p(this,Wi).values()){const{annotationElementId:S,hasComment:T,deleted:C}=w;S&&m.add(S),T&&!C&&y.push(w.getData())}for(const w of p(this,vm)){const{id:S,popupRef:T,contentsObj:C}=w;T&&(C!=null&&C.str)&&!m.has(S)&&!p(this,Uf).has(S)&&y.push(w)}(g=p(this,Fs))==null||g.showSidebar(y)}if(!e){n&&this.addNewEditorFromKeyboard(),p(this,Ja).resolve();return}for(const m of p(this,Wi).values())m.uid===e?(this.setSelected(m),s?m.editComment():r?m.enterInEditMode():m.focus()):m.unselect();p(this,Ja).resolve()}}addNewEditorFromKeyboard(){this.currentLayer.canCreateNewEmptyEditor()&&this.currentLayer.addNewEditor()}updateToolbar(t){t.mode!==p(this,yr)&&this._eventBus.dispatch("switchannotationeditormode",{source:this,...t})}updateParams(t,e){if(p(this,ja)){switch(t){case xn.CREATE:this.currentLayer.addNewEditor(e);return;case xn.HIGHLIGHT_SHOW_ALL:this._eventBus.dispatch("reporttelemetry",{source:this,details:{type:"editing",data:{type:"highlight",action:"toggle_visibility"}}}),(p(this,_2)||k(this,_2,new Map)).set(t,e),this.showAllEditors("highlight",e);break}if(this.hasSelection)for(const n of p(this,qn))n.updateParams(t,e);else for(const n of p(this,ja))n.updateDefaultParams(t,e)}}showAllEditors(t,e,n=!1){var s;for(const a of p(this,Wi).values())a.editorType===t&&a.show(e);(((s=p(this,_2))==null?void 0:s.get(xn.HIGHLIGHT_SHOW_ALL))??!0)!==e&&$(this,ae,qc).call(this,[[xn.HIGHLIGHT_SHOW_ALL,e]])}enableWaiting(t=!1){if(p(this,b2)!==t){k(this,b2,t);for(const e of p(this,Lr).values())t?e.disableClick():e.enableClick(),e.div.classList.toggle("waiting",t)}}*getEditors(t){for(const e of p(this,Wi).values())e.pageIndex===t&&(yield e)}getEditor(t){return p(this,Wi).get(t)}addEditor(t){p(this,Wi).set(t.id,t)}removeEditor(t){var e,n;t.div.contains(document.activeElement)&&(p(this,Bu)&&clearTimeout(p(this,Bu)),k(this,Bu,setTimeout(()=>{this.focusMainContainer(),k(this,Bu,null)},0))),p(this,Wi).delete(t.id),t.annotationElementId&&((e=p(this,Vf))==null||e.delete(t.annotationElementId)),this.unselect(t),(!t.annotationElementId||!p(this,Uf).has(t.annotationElementId))&&((n=p(this,Wa))==null||n.remove(t.id))}addDeletedAnnotationElement(t){p(this,Uf).add(t.annotationElementId),this.addChangedExistingAnnotation(t),t.deleted=!0}isDeletedAnnotationElement(t){return p(this,Uf).has(t)}removeDeletedAnnotationElement(t){p(this,Uf).delete(t.annotationElementId),this.removeChangedExistingAnnotation(t),t.deleted=!1}setActiveEditor(t){p(this,ra)!==t&&(k(this,ra,t),t&&$(this,ae,qc).call(this,t.propertiesToUpdate))}updateUI(t){p(this,ae,eD)===t&&$(this,ae,qc).call(this,t.propertiesToUpdate)}updateUIForDefaultProperties(t){$(this,ae,qc).call(this,t.defaultPropertiesToUpdate)}toggleSelected(t){if(p(this,qn).has(t)){p(this,qn).delete(t),t.unselect(),$(this,ae,Ks).call(this,{hasSelectedEditor:this.hasSelection});return}p(this,qn).add(t),t.select(),$(this,ae,qc).call(this,t.propertiesToUpdate),$(this,ae,Ks).call(this,{hasSelectedEditor:!0})}setSelected(t){var e;this.updateToolbar({mode:t.mode,editId:t.uid}),(e=p(this,Of))==null||e.commitOrRemove();for(const n of p(this,qn))n!==t&&n.unselect();p(this,qn).clear(),p(this,qn).add(t),t.select(),$(this,ae,qc).call(this,t.propertiesToUpdate),$(this,ae,Ks).call(this,{hasSelectedEditor:!0})}isSelected(t){return p(this,qn).has(t)}get firstSelectedEditor(){return p(this,qn).values().next().value}unselect(t){t.unselect(),p(this,qn).delete(t),$(this,ae,Ks).call(this,{hasSelectedEditor:this.hasSelection})}get hasSelection(){return p(this,qn).size!==0}get isEnterHandled(){return p(this,qn).size===1&&this.firstSelectedEditor.isEnterHandled}undo(){var t;p(this,Xa).undo(),$(this,ae,Ks).call(this,{hasSomethingToUndo:p(this,Xa).hasSomethingToUndo(),hasSomethingToRedo:!0,isEmpty:$(this,ae,Uv).call(this)}),(t=this._editorUndoBar)==null||t.hide()}redo(){p(this,Xa).redo(),$(this,ae,Ks).call(this,{hasSomethingToUndo:!0,hasSomethingToRedo:p(this,Xa).hasSomethingToRedo(),isEmpty:$(this,ae,Uv).call(this)})}addCommands(t){p(this,Xa).add(t),$(this,ae,Ks).call(this,{hasSomethingToUndo:!0,hasSomethingToRedo:!1,isEmpty:$(this,ae,Uv).call(this)})}cleanUndoStack(t){p(this,Xa).cleanType(t)}delete(){var s;this.commitOrRemove();const t=(s=this.currentLayer)==null?void 0:s.endDrawingSession(!0);if(!this.hasSelection&&!t)return;const e=t?[t]:[...p(this,qn)],n=()=>{var a;(a=this._editorUndoBar)==null||a.show(r,e.length===1?e[0].editorType:e.length);for(const u of e)u.remove()},r=()=>{for(const a of e)$(this,ae,dS).call(this,a)};this.addCommands({cmd:n,undo:r,mustExec:!0})}commitOrRemove(){var t;(t=p(this,ra))==null||t.commitOrRemove()}hasSomethingToControl(){return p(this,ra)||this.hasSelection}selectAll(){for(const t of p(this,qn))t.commit();$(this,ae,pS).call(this,p(this,Wi).values())}unselectAll(){var t;if(!(p(this,ra)&&(p(this,ra).commitOrRemove(),p(this,yr)!==We.NONE))&&!((t=p(this,Of))!=null&&t.commitOrRemove())&&this.hasSelection){for(const e of p(this,qn))e.unselect();p(this,qn).clear(),$(this,ae,Ks).call(this,{hasSelectedEditor:!1})}}translateSelectedEditors(t,e,n=!1){if(n||this.commitOrRemove(),!this.hasSelection)return;p(this,Wf)[0]+=t,p(this,Wf)[1]+=e;const[r,s]=p(this,Wf),a=[...p(this,qn)],u=1e3;p(this,Uu)&&clearTimeout(p(this,Uu)),k(this,Uu,setTimeout(()=>{k(this,Uu,null),p(this,Wf)[0]=p(this,Wf)[1]=0,this.addCommands({cmd:()=>{for(const c of a)p(this,Wi).has(c.id)&&(c.translateInPage(r,s),c.translationDone())},undo:()=>{for(const c of a)p(this,Wi).has(c.id)&&(c.translateInPage(-r,-s),c.translationDone())},mustExec:!1})},u));for(const c of a)c.translateInPage(t,e),c.translationDone()}setUpDragSession(){if(this.hasSelection){this.disableUserSelect(!0),k(this,Fu,new Map);for(const t of p(this,qn))p(this,Fu).set(t,{savedX:t.x,savedY:t.y,savedPageIndex:t.pageIndex,newX:0,newY:0,newPageIndex:-1})}}endDragSession(){if(!p(this,Fu))return!1;this.disableUserSelect(!1);const t=p(this,Fu);k(this,Fu,null);let e=!1;for(const[{x:r,y:s,pageIndex:a},u]of t)u.newX=r,u.newY=s,u.newPageIndex=a,e||(e=r!==u.savedX||s!==u.savedY||a!==u.savedPageIndex);if(!e)return!1;const n=(r,s,a,u)=>{if(p(this,Wi).has(r.id)){const c=p(this,Lr).get(u);c?r._setParentAndPosition(c,s,a):(r.pageIndex=u,r.x=s,r.y=a)}};return this.addCommands({cmd:()=>{for(const[r,{newX:s,newY:a,newPageIndex:u}]of t)n(r,s,a,u)},undo:()=>{for(const[r,{savedX:s,savedY:a,savedPageIndex:u}]of t)n(r,s,a,u)},mustExec:!0}),!0}dragSelectedEditors(t,e){if(p(this,Fu))for(const n of p(this,Fu).keys())n.drag(t,e)}rebuild(t){if(t.parent===null){const e=this.getLayer(t.pageIndex);e?(e.changeParent(t),e.addOrRebuild(t)):(this.addEditor(t),this.addToAnnotationStorage(t),t.rebuild())}else t.parent.addOrRebuild(t)}get isEditorHandlingKeyboard(){var t;return((t=this.getActive())==null?void 0:t.shouldGetKeyboardEvents())||p(this,qn).size===1&&this.firstSelectedEditor.shouldGetKeyboardEvents()}isActive(t){return p(this,ra)===t}getActive(){return p(this,ra)}getMode(){return p(this,yr)}isEditingMode(){return p(this,yr)!==We.NONE}get imageManager(){return Ve(this,"imageManager",new uS)}getSelectionBoxes(t){if(!t)return null;const e=document.getSelection();for(let h=0,f=e.rangeCount;h<f;h++)if(!t.contains(e.getRangeAt(h).commonAncestorContainer))return null;const{x:n,y:r,width:s,height:a}=t.getBoundingClientRect();let u;switch(t.getAttribute("data-main-rotation")){case"90":u=(h,f,g,m)=>({x:(f-r)/a,y:1-(h+g-n)/s,width:m/a,height:g/s});break;case"180":u=(h,f,g,m)=>({x:1-(h+g-n)/s,y:1-(f+m-r)/a,width:g/s,height:m/a});break;case"270":u=(h,f,g,m)=>({x:1-(f+m-r)/a,y:(h-n)/s,width:m/a,height:g/s});break;default:u=(h,f,g,m)=>({x:(h-n)/s,y:(f-r)/a,width:g/s,height:m/a});break}const c=[];for(let h=0,f=e.rangeCount;h<f;h++){const g=e.getRangeAt(h);if(!g.collapsed)for(const{x:m,y,width:w,height:S}of g.getClientRects())w===0||S===0||c.push(u(m,y,w,S))}return c.length===0?null:c}addChangedExistingAnnotation({annotationElementId:t,id:e}){(p(this,xm)||k(this,xm,new Map)).set(t,e)}removeChangedExistingAnnotation({annotationElementId:t}){var e;(e=p(this,xm))==null||e.delete(t)}renderAnnotationElement(t){var r;const e=(r=p(this,xm))==null?void 0:r.get(t.data.id);if(!e)return;const n=p(this,Wa).getRawValue(e);n&&(p(this,yr)===We.NONE&&!n.hasBeenModified||n.renderAnnotationElement(t))}setMissingCanvas(t,e,n){var s;const r=(s=p(this,Vf))==null?void 0:s.get(t);r&&(r.setCanvas(e,n),p(this,Vf).delete(t))}addMissingCanvas(t,e){(p(this,Vf)||k(this,Vf,new Map)).set(t,e)}};mm=new WeakMap,ra=new WeakMap,vm=new WeakMap,Wi=new WeakMap,Lr=new WeakMap,ym=new WeakMap,Wa=new WeakMap,xm=new WeakMap,Xa=new WeakMap,Fs=new WeakMap,Bf=new WeakMap,Of=new WeakMap,bm=new WeakMap,Uf=new WeakMap,Fu=new WeakMap,ja=new WeakMap,_0=new WeakMap,v2=new WeakMap,y2=new WeakMap,Am=new WeakMap,x2=new WeakMap,Bu=new WeakMap,Hf=new WeakMap,_m=new WeakMap,qf=new WeakMap,Ou=new WeakMap,gA=new WeakMap,zf=new WeakMap,wm=new WeakMap,b2=new WeakMap,Gf=new WeakMap,w0=new WeakMap,Sm=new WeakMap,Vf=new WeakMap,A2=new WeakMap,yr=new WeakMap,qn=new WeakMap,$c=new WeakMap,Yf=new WeakMap,$f=new WeakMap,_2=new WeakMap,Em=new WeakMap,w2=new WeakMap,Wf=new WeakMap,Uu=new WeakMap,Wc=new WeakMap,S2=new WeakMap,E2=new WeakMap,Ja=new WeakMap,ae=new WeakSet,C5=function({anchorNode:t}){return t.nodeType===Node.TEXT_NODE?t.parentElement:t},hS=function(t){const{currentLayer:e}=this;if(e.hasTextLayer(t))return e;for(const n of p(this,Lr).values())if(n.hasTextLayer(t))return n;return null},VR=function(){const t=document.getSelection();if(!t||t.isCollapsed)return;const n=$(this,ae,C5).call(this,t).closest(".textLayer"),r=this.getSelectionBoxes(n);r&&(p(this,Ou)||k(this,Ou,new JH(this)),p(this,Ou).show(n,r,this.direction==="ltr"))},YR=function(){var s,a,u;const t=document.getSelection();if(!t||t.isCollapsed){p(this,$c)&&((s=p(this,Ou))==null||s.hide(),k(this,$c,null),$(this,ae,Ks).call(this,{hasSelectedText:!1}));return}const{anchorNode:e}=t;if(e===p(this,$c))return;const r=$(this,ae,C5).call(this,t).closest(".textLayer");if(!r){p(this,$c)&&((a=p(this,Ou))==null||a.hide(),k(this,$c,null),$(this,ae,Ks).call(this,{hasSelectedText:!1}));return}if((u=p(this,Ou))==null||u.hide(),k(this,$c,e),$(this,ae,Ks).call(this,{hasSelectedText:!0}),!(p(this,yr)!==We.HIGHLIGHT&&p(this,yr)!==We.NONE)&&(p(this,yr)===We.HIGHLIGHT&&this.showAllEditors("highlight",!0,!0),k(this,qf,this.isShiftKeyDown),!this.isShiftKeyDown)){const c=p(this,yr)===We.HIGHLIGHT?$(this,ae,hS).call(this,r):null;if(c==null||c.toggleDrawing(),p(this,wm)){const h=new AbortController,f=this.combinedSignal(h),g=m=>{m.type==="pointerup"&&m.button!==0||(h.abort(),c==null||c.toggleDrawing(!0),m.type==="pointerup"&&$(this,ae,Ov).call(this,"main_toolbar"))};window.addEventListener("pointerup",g,{signal:f}),window.addEventListener("blur",g,{signal:f})}else c==null||c.toggleDrawing(!0),$(this,ae,Ov).call(this,"main_toolbar")}},Ov=function(t=""){p(this,yr)===We.HIGHLIGHT?this.highlightSelection(t):p(this,v2)&&$(this,ae,VR).call(this)},$R=function(){document.addEventListener("selectionchange",$(this,ae,YR).bind(this),{signal:this._signal})},WR=function(){if(p(this,Hf))return;k(this,Hf,new AbortController);const t=this.combinedSignal(p(this,Hf));window.addEventListener("focus",this.focus.bind(this),{signal:t}),window.addEventListener("blur",this.blur.bind(this),{signal:t})},XR=function(){var t;(t=p(this,Hf))==null||t.abort(),k(this,Hf,null)},fS=function(){if(p(this,Gf))return;k(this,Gf,new AbortController);const t=this.combinedSignal(p(this,Gf));window.addEventListener("keydown",this.keydown.bind(this),{signal:t}),window.addEventListener("keyup",this.keyup.bind(this),{signal:t})},jR=function(){var t;(t=p(this,Gf))==null||t.abort(),k(this,Gf,null)},JR=function(){if(p(this,Bf))return;k(this,Bf,new AbortController);const t=this.combinedSignal(p(this,Bf));document.addEventListener("copy",this.copy.bind(this),{signal:t}),document.addEventListener("cut",this.cut.bind(this),{signal:t}),document.addEventListener("paste",this.paste.bind(this),{signal:t})},KR=function(){var t;(t=p(this,Bf))==null||t.abort(),k(this,Bf,null)},QR=function(){const t=this._signal;document.addEventListener("dragover",this.dragOver.bind(this),{signal:t}),document.addEventListener("drop",this.drop.bind(this),{signal:t})},Ks=function(t){Object.entries(t).some(([n,r])=>p(this,w2)[n]!==r)&&(this._eventBus.dispatch("annotationeditorstateschanged",{source:this,details:Object.assign(p(this,w2),t)}),p(this,yr)===We.HIGHLIGHT&&t.hasSelectedEditor===!1&&$(this,ae,qc).call(this,[[xn.HIGHLIGHT_FREE,!0]]))},qc=function(t){this._eventBus.dispatch("annotationeditorparamschanged",{source:this,details:t})},ZR=async function(){if(!p(this,zf)){k(this,zf,!0);const t=[];for(const e of p(this,Lr).values())t.push(e.enable());await Promise.all(t);for(const e of p(this,Wi).values())e.enable()}},tD=function(){if(this.unselectAll(),p(this,zf)){k(this,zf,!1);for(const t of p(this,Lr).values())t.disable();for(const t of p(this,Wi).values())t.disable()}},dS=function(t){const e=p(this,Lr).get(t.pageIndex);e?e.addOrRebuild(t):(this.addEditor(t),this.addToAnnotationStorage(t))},eD=function(){let t=null;for(t of p(this,qn));return t},Uv=function(){if(p(this,Wi).size===0)return!0;if(p(this,Wi).size===1)for(const t of p(this,Wi).values())return t.isEmpty();return!1},pS=function(t){for(const e of p(this,qn))e.unselect();p(this,qn).clear();for(const e of t)e.isEmpty()||(p(this,qn).add(e),e.select());$(this,ae,Ks).call(this,{hasSelectedEditor:this.hasSelection})},Kt(tm,"TRANSLATE_SMALL",1),Kt(tm,"TRANSLATE_BIG",10);let kp=tm;var $r,Hu,Pl,Cm,qu,sa,Tm,zu,Po,Xc,S0,Gu,Xf,$l,Hv,T5;const Qs=class Qs{constructor(t){z(this,$l);z(this,$r,null);z(this,Hu,!1);z(this,Pl,null);z(this,Cm,null);z(this,qu,null);z(this,sa,null);z(this,Tm,!1);z(this,zu,null);z(this,Po,null);z(this,Xc,null);z(this,S0,null);z(this,Gu,!1);k(this,Po,t),k(this,Gu,t._uiManager.useNewAltTextFlow),p(Qs,Xf)||k(Qs,Xf,Object.freeze({added:"pdfjs-editor-new-alt-text-added-button","added-label":"pdfjs-editor-new-alt-text-added-button-label",missing:"pdfjs-editor-new-alt-text-missing-button","missing-label":"pdfjs-editor-new-alt-text-missing-button-label",review:"pdfjs-editor-new-alt-text-to-review-button","review-label":"pdfjs-editor-new-alt-text-to-review-button-label"}))}static initialize(t){Qs._l10n??(Qs._l10n=t)}async render(){const t=k(this,Pl,document.createElement("button"));t.className="altText",t.tabIndex="0";const e=k(this,Cm,document.createElement("span"));t.append(e),p(this,Gu)?(t.classList.add("new"),t.setAttribute("data-l10n-id",p(Qs,Xf).missing),e.setAttribute("data-l10n-id",p(Qs,Xf)["missing-label"])):(t.setAttribute("data-l10n-id","pdfjs-editor-alt-text-button"),e.setAttribute("data-l10n-id","pdfjs-editor-alt-text-button-label"));const n=p(this,Po)._uiManager._signal;t.addEventListener("contextmenu",ll,{signal:n}),t.addEventListener("pointerdown",s=>s.stopPropagation(),{signal:n});const r=s=>{s.preventDefault(),p(this,Po)._uiManager.editAltText(p(this,Po)),p(this,Gu)&&p(this,Po)._reportTelemetry({action:"pdfjs.image.alt_text.image_status_label_clicked",data:{label:p(this,$l,Hv)}})};return t.addEventListener("click",r,{capture:!0,signal:n}),t.addEventListener("keydown",s=>{s.target===t&&s.key==="Enter"&&(k(this,Tm,!0),r(s))},{signal:n}),await $(this,$l,T5).call(this),t}finish(){p(this,Pl)&&(p(this,Pl).focus({focusVisible:p(this,Tm)}),k(this,Tm,!1))}isEmpty(){return p(this,Gu)?p(this,$r)===null:!p(this,$r)&&!p(this,Hu)}hasData(){return p(this,Gu)?p(this,$r)!==null||!!p(this,Xc):this.isEmpty()}get guessedText(){return p(this,Xc)}async setGuessedText(t){p(this,$r)===null&&(k(this,Xc,t),k(this,S0,await Qs._l10n.get("pdfjs-editor-new-alt-text-generated-alt-text-with-disclaimer",{generatedAltText:t})),$(this,$l,T5).call(this))}toggleAltTextBadge(t=!1){var e;if(!p(this,Gu)||p(this,$r)){(e=p(this,zu))==null||e.remove(),k(this,zu,null);return}if(!p(this,zu)){const n=k(this,zu,document.createElement("div"));n.className="noAltTextBadge",p(this,Po).div.append(n)}p(this,zu).classList.toggle("hidden",!t)}serialize(t){let e=p(this,$r);return!t&&p(this,Xc)===e&&(e=p(this,S0)),{altText:e,decorative:p(this,Hu),guessedText:p(this,Xc),textWithDisclaimer:p(this,S0)}}get data(){return{altText:p(this,$r),decorative:p(this,Hu)}}set data({altText:t,decorative:e,guessedText:n,textWithDisclaimer:r,cancel:s=!1}){n&&(k(this,Xc,n),k(this,S0,r)),!(p(this,$r)===t&&p(this,Hu)===e)&&(s||(k(this,$r,t),k(this,Hu,e)),$(this,$l,T5).call(this))}toggle(t=!1){p(this,Pl)&&(!t&&p(this,sa)&&(clearTimeout(p(this,sa)),k(this,sa,null)),p(this,Pl).disabled=!t)}shown(){p(this,Po)._reportTelemetry({action:"pdfjs.image.alt_text.image_status_label_displayed",data:{label:p(this,$l,Hv)}})}destroy(){var t,e;(t=p(this,Pl))==null||t.remove(),k(this,Pl,null),k(this,Cm,null),k(this,qu,null),(e=p(this,zu))==null||e.remove(),k(this,zu,null)}};$r=new WeakMap,Hu=new WeakMap,Pl=new WeakMap,Cm=new WeakMap,qu=new WeakMap,sa=new WeakMap,Tm=new WeakMap,zu=new WeakMap,Po=new WeakMap,Xc=new WeakMap,S0=new WeakMap,Gu=new WeakMap,Xf=new WeakMap,$l=new WeakSet,Hv=function(){return p(this,$r)&&"added"||p(this,$r)===null&&this.guessedText&&"review"||"missing"},T5=async function(){var r,s,a;const t=p(this,Pl);if(!t)return;if(p(this,Gu)){if(t.classList.toggle("done",!!p(this,$r)),t.setAttribute("data-l10n-id",p(Qs,Xf)[p(this,$l,Hv)]),(r=p(this,Cm))==null||r.setAttribute("data-l10n-id",p(Qs,Xf)[`${p(this,$l,Hv)}-label`]),!p(this,$r)){(s=p(this,qu))==null||s.remove();return}}else{if(!p(this,$r)&&!p(this,Hu)){t.classList.remove("done"),(a=p(this,qu))==null||a.remove();return}t.classList.add("done"),t.setAttribute("data-l10n-id","pdfjs-editor-alt-text-edit-button")}let e=p(this,qu);if(!e){k(this,qu,e=document.createElement("span")),e.className="tooltip",e.setAttribute("role","tooltip"),e.id=`alt-text-tooltip-${p(this,Po).id}`;const u=100,c=p(this,Po)._uiManager._signal;c.addEventListener("abort",()=>{clearTimeout(p(this,sa)),k(this,sa,null)},{once:!0}),t.addEventListener("mouseenter",()=>{k(this,sa,setTimeout(()=>{k(this,sa,null),p(this,qu).classList.add("show"),p(this,Po)._reportTelemetry({action:"alt_text_tooltip"})},u))},{signal:c}),t.addEventListener("mouseleave",()=>{var h;p(this,sa)&&(clearTimeout(p(this,sa)),k(this,sa,null)),(h=p(this,qu))==null||h.classList.remove("show")},{signal:c})}p(this,Hu)?e.setAttribute("data-l10n-id","pdfjs-editor-alt-text-decorative-tooltip"):(e.removeAttribute("data-l10n-id"),e.textContent=p(this,$r)),e.parentNode||t.append(e);const n=p(this,Po).getElementForAltText();n==null||n.setAttribute("aria-describedby",e.id)},z(Qs,Xf,null),Kt(Qs,"_l10n",null);let Qb=Qs;var fs,Ka,E0,xi,C2,C0,kl,T0,N0,R0,T2,gS;class s5{constructor(t){z(this,T2);z(this,fs,null);z(this,Ka,null);z(this,E0,!1);z(this,xi,null);z(this,C2,null);z(this,C0,null);z(this,kl,null);z(this,T0,null);z(this,N0,!1);z(this,R0,null);k(this,xi,t)}renderForToolbar(){const t=k(this,Ka,document.createElement("button"));return t.className="comment",$(this,T2,gS).call(this,t,!1)}renderForStandalone(){const t=k(this,fs,document.createElement("button"));t.className="annotationCommentButton";const e=p(this,xi).commentButtonPosition;if(e){const{style:n}=t;n.insetInlineEnd=`calc(${100*(p(this,xi)._uiManager.direction==="ltr"?1-e[0]:e[0])}% - var(--comment-button-dim))`,n.top=`calc(${100*e[1]}% - var(--comment-button-dim))`;const r=p(this,xi).commentButtonColor;r&&(n.backgroundColor=r)}return $(this,T2,gS).call(this,t,!0)}focusButton(){setTimeout(()=>{var t;(t=p(this,fs)??p(this,Ka))==null||t.focus()},0)}onUpdatedColor(){if(!p(this,fs))return;const t=p(this,xi).commentButtonColor;t&&(p(this,fs).style.backgroundColor=t),p(this,xi)._uiManager.updatePopupColor(p(this,xi))}get commentButtonWidth(){var t;return(((t=p(this,fs))==null?void 0:t.getBoundingClientRect().width)??0)/p(this,xi).parent.boundingClientRect.width}get commentPopupPositionInLayer(){if(p(this,R0))return p(this,R0);if(!p(this,fs))return null;const{x:t,y:e,height:n}=p(this,fs).getBoundingClientRect(),{x:r,y:s,width:a,height:u}=p(this,xi).parent.boundingClientRect;return[(t-r)/a,(e+n-s)/u]}set commentPopupPositionInLayer(t){k(this,R0,t)}hasDefaultPopupPosition(){return p(this,R0)===null}removeStandaloneCommentButton(){var t;(t=p(this,fs))==null||t.remove(),k(this,fs,null)}removeToolbarCommentButton(){var t;(t=p(this,Ka))==null||t.remove(),k(this,Ka,null)}setCommentButtonStates({selected:t,hasPopup:e}){p(this,fs)&&(p(this,fs).classList.toggle("selected",t),p(this,fs).ariaExpanded=e)}edit(t){const e=this.commentPopupPositionInLayer;let n,r;if(e)[n,r]=e;else{[n,r]=p(this,xi).commentButtonPosition;const{width:f,height:g,x:m,y}=p(this,xi);n=m+n*f,r=y+r*g}const s=p(this,xi).parent.boundingClientRect,{x:a,y:u,width:c,height:h}=s;p(this,xi)._uiManager.editComment(p(this,xi),a+n*c,u+r*h,{...t,parentDimensions:s})}finish(){p(this,Ka)&&(p(this,Ka).focus({focusVisible:p(this,E0)}),k(this,E0,!1))}isDeleted(){return p(this,N0)||p(this,kl)===""}isEmpty(){return p(this,kl)===null}hasBeenEdited(){return this.isDeleted()||p(this,kl)!==p(this,C2)}serialize(){return this.data}get data(){return{text:p(this,kl),richText:p(this,C0),date:p(this,T0),deleted:this.isDeleted()}}set data(t){if(t!==p(this,kl)&&k(this,C0,null),t===null){k(this,kl,""),k(this,N0,!0);return}k(this,kl,t),k(this,T0,new Date),k(this,N0,!1)}setInitialText(t,e=null){k(this,C2,t),this.data=t,k(this,T0,null),k(this,C0,e)}shown(){}destroy(){var t,e;(t=p(this,Ka))==null||t.remove(),k(this,Ka,null),(e=p(this,fs))==null||e.remove(),k(this,fs,null),k(this,kl,""),k(this,C0,null),k(this,T0,null),k(this,xi,null),k(this,E0,!1),k(this,N0,!1)}}fs=new WeakMap,Ka=new WeakMap,E0=new WeakMap,xi=new WeakMap,C2=new WeakMap,C0=new WeakMap,kl=new WeakMap,T0=new WeakMap,N0=new WeakMap,R0=new WeakMap,T2=new WeakSet,gS=function(t,e){if(!p(this,xi)._uiManager.hasCommentManager())return null;t.tabIndex="0",t.ariaHasPopup="dialog",e?(t.ariaControls="commentPopup",t.setAttribute("data-l10n-id","pdfjs-show-comment-button")):(t.ariaControlsElements=[p(this,xi)._uiManager.getCommentDialogElement()],t.setAttribute("data-l10n-id","pdfjs-editor-add-comment-button"));const n=p(this,xi)._uiManager._signal;if(!(n instanceof AbortSignal)||n.aborted)return t;t.addEventListener("contextmenu",ll,{signal:n}),e&&(t.addEventListener("focusin",s=>{p(this,xi)._focusEventsAllowed=!1,Zi(s)},{capture:!0,signal:n}),t.addEventListener("focusout",s=>{p(this,xi)._focusEventsAllowed=!0,Zi(s)},{capture:!0,signal:n})),t.addEventListener("pointerdown",s=>s.stopPropagation(),{signal:n});const r=s=>{s.preventDefault(),t===p(this,Ka)?this.edit():p(this,xi).toggleComment(!0)};return t.addEventListener("click",r,{capture:!0,signal:n}),t.addEventListener("keydown",s=>{s.target===t&&s.key==="Enter"&&(k(this,E0,!0),r(s))},{signal:n}),t.addEventListener("pointerenter",()=>{p(this,xi).toggleComment(!1,!0)},{signal:n}),t.addEventListener("pointerleave",()=>{p(this,xi).toggleComment(!1,!1)},{signal:n}),t};var Nm,D0,N2,R2,D2,L2,M2,jc,L0,Jc,M0,Kc,Dd,nD,iD,rD;const xC=class xC{constructor({container:t,isPinchingDisabled:e=null,isPinchingStopped:n=null,onPinchStart:r=null,onPinching:s=null,onPinchEnd:a=null,signal:u}){z(this,Dd);z(this,Nm);z(this,D0,!1);z(this,N2,null);z(this,R2);z(this,D2);z(this,L2);z(this,M2);z(this,jc,null);z(this,L0);z(this,Jc,null);z(this,M0);z(this,Kc,null);k(this,Nm,t),k(this,N2,n),k(this,R2,e),k(this,D2,r),k(this,L2,s),k(this,M2,a),k(this,M0,new AbortController),k(this,L0,AbortSignal.any([u,p(this,M0).signal])),t.addEventListener("touchstart",$(this,Dd,nD).bind(this),{passive:!1,signal:p(this,L0)})}get MIN_TOUCH_DISTANCE_TO_PINCH(){return 35/ac.pixelRatio}destroy(){var t,e;(t=p(this,M0))==null||t.abort(),k(this,M0,null),(e=p(this,jc))==null||e.abort(),k(this,jc,null)}};Nm=new WeakMap,D0=new WeakMap,N2=new WeakMap,R2=new WeakMap,D2=new WeakMap,L2=new WeakMap,M2=new WeakMap,jc=new WeakMap,L0=new WeakMap,Jc=new WeakMap,M0=new WeakMap,Kc=new WeakMap,Dd=new WeakSet,nD=function(t){var r,s,a;if((r=p(this,R2))!=null&&r.call(this))return;if(t.touches.length===1){if(p(this,jc))return;const u=k(this,jc,new AbortController),c=AbortSignal.any([p(this,L0),u.signal]),h=p(this,Nm),f={capture:!0,signal:c,passive:!1},g=m=>{var y;m.pointerType==="touch"&&((y=p(this,jc))==null||y.abort(),k(this,jc,null))};h.addEventListener("pointerdown",m=>{m.pointerType==="touch"&&(Zi(m),g(m))},f),h.addEventListener("pointerup",g,f),h.addEventListener("pointercancel",g,f);return}if(!p(this,Kc)){k(this,Kc,new AbortController);const u=AbortSignal.any([p(this,L0),p(this,Kc).signal]),c=p(this,Nm),h={signal:u,capture:!1,passive:!1};c.addEventListener("touchmove",$(this,Dd,iD).bind(this),h);const f=$(this,Dd,rD).bind(this);c.addEventListener("touchend",f,h),c.addEventListener("touchcancel",f,h),h.capture=!0,c.addEventListener("pointerdown",Zi,h),c.addEventListener("pointermove",Zi,h),c.addEventListener("pointercancel",Zi,h),c.addEventListener("pointerup",Zi,h),(s=p(this,D2))==null||s.call(this)}if(Zi(t),t.touches.length!==2||(a=p(this,N2))!=null&&a.call(this)){k(this,Jc,null);return}let[e,n]=t.touches;e.identifier>n.identifier&&([e,n]=[n,e]),k(this,Jc,{touch0X:e.screenX,touch0Y:e.screenY,touch1X:n.screenX,touch1Y:n.screenY})},iD=function(t){var I;if(!p(this,Jc)||t.touches.length!==2)return;Zi(t);let[e,n]=t.touches;e.identifier>n.identifier&&([e,n]=[n,e]);const{screenX:r,screenY:s}=e,{screenX:a,screenY:u}=n,c=p(this,Jc),{touch0X:h,touch0Y:f,touch1X:g,touch1Y:m}=c,y=g-h,w=m-f,S=a-r,T=u-s,C=Math.hypot(S,T)||1,D=Math.hypot(y,w)||1;if(!p(this,D0)&&Math.abs(D-C)<=xC.MIN_TOUCH_DISTANCE_TO_PINCH)return;if(c.touch0X=r,c.touch0Y=s,c.touch1X=a,c.touch1Y=u,!p(this,D0)){k(this,D0,!0);return}const R=[(r+a)/2,(s+u)/2];(I=p(this,L2))==null||I.call(this,R,D,C)},rD=function(t){var e;t.touches.length>=2||(p(this,Kc)&&(p(this,Kc).abort(),k(this,Kc,null),(e=p(this,M2))==null||e.call(this)),p(this,Jc)&&(Zi(t),k(this,Jc,null),k(this,D0,!1)))};let Zb=xC;var I0,Fl,Pi,si,Qc,Rm,jf,I2,ds,P0,Zc,Qa,Jf,P2,k0,oa,k2,F0,th,Vu,Dm,Lm,Za,B0,F2,mA,De,mS,B2,vS,N5,sD,oD,yS,R5,xS,aD,lD,uD,bS,cD,AS,hD,fD,dD,_S,qv;const $e=class $e{constructor(t){z(this,De);z(this,I0,null);z(this,Fl,null);z(this,Pi,null);z(this,si,null);z(this,Qc,null);z(this,Rm,!1);z(this,jf,null);z(this,I2,"");z(this,ds,null);z(this,P0,null);z(this,Zc,null);z(this,Qa,null);z(this,Jf,null);z(this,P2,"");z(this,k0,!1);z(this,oa,null);z(this,k2,!1);z(this,F0,!1);z(this,th,!1);z(this,Vu,null);z(this,Dm,0);z(this,Lm,0);z(this,Za,null);z(this,B0,null);Kt(this,"isSelected",!1);Kt(this,"_isCopy",!1);Kt(this,"_editToolbar",null);Kt(this,"_initialOptions",Object.create(null));Kt(this,"_initialData",null);Kt(this,"_isVisible",!0);Kt(this,"_uiManager",null);Kt(this,"_focusEventsAllowed",!0);z(this,F2,!1);z(this,mA,$e._zIndex++);this.parent=t.parent,this.id=t.id,this.width=this.height=null,this.pageIndex=t.parent.pageIndex,this.name=t.name,this.div=null,this._uiManager=t.uiManager,this.annotationElementId=null,this._willKeepAspectRatio=!1,this._initialOptions.isCentered=t.isCentered,this._structTreeParentId=null,this.annotationElementId=t.annotationElementId||null,this.creationDate=t.creationDate||new Date,this.modificationDate=t.modificationDate||null,this.canAddComment=!0;const{rotation:e,rawDims:{pageWidth:n,pageHeight:r,pageX:s,pageY:a}}=this.parent.viewport;this.rotation=e,this.pageRotation=(360+e-this._uiManager.viewParameters.rotation)%360,this.pageDimensions=[n,r],this.pageTranslation=[s,a];const[u,c]=this.parentDimensions;this.x=t.x/u,this.y=t.y/c,this.isAttachedToDOM=!1,this.deleted=!1}static get _resizerKeyboardManager(){const t=$e.prototype._resizeWithKeyboard,e=kp.TRANSLATE_SMALL,n=kp.TRANSLATE_BIG;return Ve(this,"_resizerKeyboardManager",new ax([[["ArrowLeft","mac+ArrowLeft"],t,{args:[-e,0]}],[["ctrl+ArrowLeft","mac+shift+ArrowLeft"],t,{args:[-n,0]}],[["ArrowRight","mac+ArrowRight"],t,{args:[e,0]}],[["ctrl+ArrowRight","mac+shift+ArrowRight"],t,{args:[n,0]}],[["ArrowUp","mac+ArrowUp"],t,{args:[0,-e]}],[["ctrl+ArrowUp","mac+shift+ArrowUp"],t,{args:[0,-n]}],[["ArrowDown","mac+ArrowDown"],t,{args:[0,e]}],[["ctrl+ArrowDown","mac+shift+ArrowDown"],t,{args:[0,n]}],[["Escape","mac+Escape"],$e.prototype._stopResizingWithKeyboard]]))}get editorType(){return Object.getPrototypeOf(this).constructor._type}get mode(){return Object.getPrototypeOf(this).constructor._editorType}static get isDrawer(){return!1}static get _defaultLineColor(){return Ve(this,"_defaultLineColor",this._colorManager.getHexCode("CanvasText"))}static deleteAnnotationElement(t){const e=new ZH({id:t.parent.getNextId(),parent:t.parent,uiManager:t._uiManager});e.annotationElementId=t.annotationElementId,e.deleted=!0,e._uiManager.addToAnnotationStorage(e)}static initialize(t,e){if($e._l10n??($e._l10n=t),$e._l10nResizer||($e._l10nResizer=Object.freeze({topLeft:"pdfjs-editor-resizer-top-left",topMiddle:"pdfjs-editor-resizer-top-middle",topRight:"pdfjs-editor-resizer-top-right",middleRight:"pdfjs-editor-resizer-middle-right",bottomRight:"pdfjs-editor-resizer-bottom-right",bottomMiddle:"pdfjs-editor-resizer-bottom-middle",bottomLeft:"pdfjs-editor-resizer-bottom-left",middleLeft:"pdfjs-editor-resizer-middle-left"})),$e._borderLineWidth!==-1)return;const n=getComputedStyle(document.documentElement);$e._borderLineWidth=parseFloat(n.getPropertyValue("--outline-width"))||0}static updateDefaultParams(t,e){}static get defaultPropertiesToUpdate(){return[]}static isHandlingMimeForPasting(t){return!1}static paste(t,e){ui("Not implemented")}get propertiesToUpdate(){return[]}get _isDraggable(){return p(this,F2)}set _isDraggable(t){var e;k(this,F2,t),(e=this.div)==null||e.classList.toggle("draggable",t)}get uid(){return this.annotationElementId||this.id}get isEnterHandled(){return!0}center(){const[t,e]=this.pageDimensions;switch(this.parentRotation){case 90:this.x-=this.height*e/(t*2),this.y+=this.width*t/(e*2);break;case 180:this.x+=this.width/2,this.y+=this.height/2;break;case 270:this.x+=this.height*e/(t*2),this.y-=this.width*t/(e*2);break;default:this.x-=this.width/2,this.y-=this.height/2;break}this.fixAndSetPosition()}addCommands(t){this._uiManager.addCommands(t)}get currentLayer(){return this._uiManager.currentLayer}setInBackground(){this.div.style.zIndex=0}setInForeground(){this.div.style.zIndex=p(this,mA)}setParent(t){var e;t!==null?(this.pageIndex=t.pageIndex,this.pageDimensions=t.pageDimensions):($(this,De,qv).call(this),(e=p(this,Qa))==null||e.remove(),k(this,Qa,null)),this.parent=t}focusin(t){this._focusEventsAllowed&&(p(this,k0)?k(this,k0,!1):this.parent.setSelected(this))}focusout(t){var n;if(!this._focusEventsAllowed||!this.isAttachedToDOM)return;const e=t.relatedTarget;e!=null&&e.closest(`#${this.id}`)||(t.preventDefault(),(n=this.parent)!=null&&n.isMultipleSelection||this.commitOrRemove())}commitOrRemove(){this.isEmpty()?this.remove():this.commit()}commit(){this.isInEditMode()&&this.addToAnnotationStorage()}addToAnnotationStorage(){this._uiManager.addToAnnotationStorage(this)}setAt(t,e,n,r){const[s,a]=this.parentDimensions;[n,r]=this.screenToPageTranslation(n,r),this.x=(t+n)/s,this.y=(e+r)/a,this.fixAndSetPosition()}_moveAfterPaste(t,e){const[n,r]=this.parentDimensions;this.setAt(t*n,e*r,this.width*n,this.height*r),this._onTranslated()}translate(t,e){$(this,De,mS).call(this,this.parentDimensions,t,e)}translateInPage(t,e){p(this,oa)||k(this,oa,[this.x,this.y,this.width,this.height]),$(this,De,mS).call(this,this.pageDimensions,t,e),this.div.scrollIntoView({block:"nearest"})}translationDone(){this._onTranslated(this.x,this.y)}drag(t,e){p(this,oa)||k(this,oa,[this.x,this.y,this.width,this.height]);const{div:n,parentDimensions:[r,s]}=this;if(this.x+=t/r,this.y+=e/s,this.parent&&(this.x<0||this.x>1||this.y<0||this.y>1)){const{x:g,y:m}=this.div.getBoundingClientRect();this.parent.findNewParent(this,g,m)&&(this.x-=Math.floor(this.x),this.y-=Math.floor(this.y))}let{x:a,y:u}=this;const[c,h]=this.getBaseTranslation();a+=c,u+=h;const{style:f}=n;f.left=`${(100*a).toFixed(2)}%`,f.top=`${(100*u).toFixed(2)}%`,this._onTranslating(a,u),n.scrollIntoView({block:"nearest"})}_onTranslating(t,e){}_onTranslated(t,e){}get _hasBeenMoved(){return!!p(this,oa)&&(p(this,oa)[0]!==this.x||p(this,oa)[1]!==this.y)}get _hasBeenResized(){return!!p(this,oa)&&(p(this,oa)[2]!==this.width||p(this,oa)[3]!==this.height)}getBaseTranslation(){const[t,e]=this.parentDimensions,{_borderLineWidth:n}=$e,r=n/t,s=n/e;switch(this.rotation){case 90:return[-r,s];case 180:return[r,s];case 270:return[r,-s];default:return[-r,-s]}}get _mustFixPosition(){return!0}fixAndSetPosition(t=this.rotation){const{div:{style:e},pageDimensions:[n,r]}=this;let{x:s,y:a,width:u,height:c}=this;if(u*=n,c*=r,s*=n,a*=r,this._mustFixPosition)switch(t){case 0:s=ro(s,0,n-u),a=ro(a,0,r-c);break;case 90:s=ro(s,0,n-c),a=ro(a,u,r);break;case 180:s=ro(s,u,n),a=ro(a,c,r);break;case 270:s=ro(s,c,n),a=ro(a,0,r-u);break}this.x=s/=n,this.y=a/=r;const[h,f]=this.getBaseTranslation();s+=h,a+=f,e.left=`${(100*s).toFixed(2)}%`,e.top=`${(100*a).toFixed(2)}%`,this.moveInDOM()}screenToPageTranslation(t,e){var n;return $(n=$e,B2,vS).call(n,t,e,this.parentRotation)}pageTranslationToScreen(t,e){var n;return $(n=$e,B2,vS).call(n,t,e,360-this.parentRotation)}get parentScale(){return this._uiManager.viewParameters.realScale}get parentRotation(){return(this._uiManager.viewParameters.rotation+this.pageRotation)%360}get parentDimensions(){const{parentScale:t,pageDimensions:[e,n]}=this;return[e*t,n*t]}setDims(){const{div:{style:t},width:e,height:n}=this;t.width=`${(100*e).toFixed(2)}%`,t.height=`${(100*n).toFixed(2)}%`}getInitialTranslation(){return[0,0]}_onResized(){}static _round(t){return Math.round(t*1e4)/1e4}_onResizing(){}altTextFinish(){var t;(t=p(this,Pi))==null||t.finish()}get toolbarButtons(){return null}async addEditToolbar(){if(this._editToolbar||p(this,F0))return this._editToolbar;this._editToolbar=new aS(this),this.div.append(this._editToolbar.render());const{toolbarButtons:t}=this;if(t)for(const[e,n]of t)await this._editToolbar.addButton(e,n);return this.hasComment||this._editToolbar.addButton("comment",this.addCommentButton()),this._editToolbar.addButton("delete"),this._editToolbar}addCommentButtonInToolbar(){var t;(t=this._editToolbar)==null||t.addButtonBefore("comment",this.addCommentButton(),".deleteButton")}removeCommentButtonFromToolbar(){var t;(t=this._editToolbar)==null||t.removeButton("comment")}removeEditToolbar(){var t,e;(t=this._editToolbar)==null||t.remove(),this._editToolbar=null,(e=p(this,Pi))==null||e.destroy()}addContainer(t){var n;const e=(n=this._editToolbar)==null?void 0:n.div;e?e.before(t):this.div.append(t)}getClientDimensions(){return this.div.getBoundingClientRect()}createAltText(){return p(this,Pi)||(Qb.initialize($e._l10n),k(this,Pi,new Qb(this)),p(this,I0)&&(p(this,Pi).data=p(this,I0),k(this,I0,null))),p(this,Pi)}get altTextData(){var t;return(t=p(this,Pi))==null?void 0:t.data}set altTextData(t){p(this,Pi)&&(p(this,Pi).data=t)}get guessedAltText(){var t;return(t=p(this,Pi))==null?void 0:t.guessedText}async setGuessedAltText(t){var e;await((e=p(this,Pi))==null?void 0:e.setGuessedText(t))}serializeAltText(t){var e;return(e=p(this,Pi))==null?void 0:e.serialize(t)}hasAltText(){return!!p(this,Pi)&&!p(this,Pi).isEmpty()}hasAltTextData(){var t;return((t=p(this,Pi))==null?void 0:t.hasData())??!1}focusCommentButton(){var t;(t=p(this,si))==null||t.focusButton()}addCommentButton(){return this.canAddComment?p(this,si)||k(this,si,new s5(this)):null}addStandaloneCommentButton(){if(this._uiManager.hasCommentManager()){if(p(this,Qc)){this._uiManager.isEditingMode()&&p(this,Qc).classList.remove("hidden");return}this.hasComment&&(k(this,Qc,p(this,si).renderForStandalone()),this.div.append(p(this,Qc)))}}removeStandaloneCommentButton(){p(this,si).removeStandaloneCommentButton(),k(this,Qc,null)}hideStandaloneCommentButton(){var t;(t=p(this,Qc))==null||t.classList.add("hidden")}get comment(){const{data:{richText:t,text:e,date:n,deleted:r}}=p(this,si);return{text:e,richText:t,date:n,deleted:r,color:this.getNonHCMColor(),opacity:this.opacity??1}}set comment(t){p(this,si)||k(this,si,new s5(this)),p(this,si).data=t,this.hasComment?(this.removeCommentButtonFromToolbar(),this.addStandaloneCommentButton(),this._uiManager.updateComment(this)):(this.addCommentButtonInToolbar(),this.removeStandaloneCommentButton(),this._uiManager.removeComment(this))}setCommentData({comment:t,popupRef:e,richText:n}){if(!e||(p(this,si)||k(this,si,new s5(this)),p(this,si).setInitialText(t,n),!this.annotationElementId))return;const r=this._uiManager.getAndRemoveDataFromAnnotationStorage(this.annotationElementId);r&&this.updateFromAnnotationLayer(r)}get hasEditedComment(){var t;return(t=p(this,si))==null?void 0:t.hasBeenEdited()}get hasDeletedComment(){var t;return(t=p(this,si))==null?void 0:t.isDeleted()}get hasComment(){return!!p(this,si)&&!p(this,si).isEmpty()&&!p(this,si).isDeleted()}async editComment(t){p(this,si)||k(this,si,new s5(this)),p(this,si).edit(t)}toggleComment(t,e=void 0){this.hasComment&&this._uiManager.toggleComment(this,t,e)}setSelectedCommentButton(t){p(this,si).setSelectedButton(t)}addComment(t){if(this.hasEditedComment){const[,,,r]=t.rect,[s]=this.pageDimensions,[a]=this.pageTranslation,u=a+s+1,c=r-100,h=u+180;t.popup={contents:this.comment.text,deleted:this.comment.deleted,rect:[u,c,h,r]}}}updateFromAnnotationLayer({popup:{contents:t,deleted:e}}){p(this,si).data=e?null:t}get parentBoundingClientRect(){return this.parent.boundingClientRect}render(){var a;const t=this.div=document.createElement("div");t.setAttribute("data-editor-rotation",(360-this.rotation)%360),t.className=this.name,t.setAttribute("id",this.id),t.tabIndex=p(this,Rm)?-1:0,t.setAttribute("role","application"),this.defaultL10nId&&t.setAttribute("data-l10n-id",this.defaultL10nId),this._isVisible||t.classList.add("hidden"),this.setInForeground(),$(this,De,AS).call(this);const[e,n]=this.parentDimensions;this.parentRotation%180!==0&&(t.style.maxWidth=`${(100*n/e).toFixed(2)}%`,t.style.maxHeight=`${(100*e/n).toFixed(2)}%`);const[r,s]=this.getInitialTranslation();return this.translate(r,s),zR(this,t,["keydown","pointerdown","dblclick"]),this.isResizable&&this._uiManager._supportsPinchToZoom&&(p(this,B0)||k(this,B0,new Zb({container:t,isPinchingDisabled:()=>!this.isSelected,onPinchStart:$(this,De,aD).bind(this),onPinching:$(this,De,lD).bind(this),onPinchEnd:$(this,De,uD).bind(this),signal:this._uiManager._signal}))),this.addStandaloneCommentButton(),(a=this._uiManager._editorUndoBar)==null||a.hide(),t}pointerdown(t){const{isMac:e}=bs.platform;if(t.button!==0||t.ctrlKey&&e){t.preventDefault();return}if(k(this,k0,!0),this._isDraggable){$(this,De,cD).call(this,t);return}$(this,De,bS).call(this,t)}_onStartDragging(){}_onStopDragging(){}moveInDOM(){p(this,Vu)&&clearTimeout(p(this,Vu)),k(this,Vu,setTimeout(()=>{var t;k(this,Vu,null),(t=this.parent)==null||t.moveEditorInDOM(this)},0))}_setParentAndPosition(t,e,n){t.changeParent(this),this.x=e,this.y=n,this.fixAndSetPosition(),this._onTranslated()}getRect(t,e,n=this.rotation){const r=this.parentScale,[s,a]=this.pageDimensions,[u,c]=this.pageTranslation,h=t/r,f=e/r,g=this.x*s,m=this.y*a,y=this.width*s,w=this.height*a;switch(n){case 0:return[g+h+u,a-m-f-w+c,g+h+y+u,a-m-f+c];case 90:return[g+f+u,a-m+h+c,g+f+w+u,a-m+h+y+c];case 180:return[g-h-y+u,a-m+f+c,g-h+u,a-m+f+w+c];case 270:return[g-f-w+u,a-m-h-y+c,g-f+u,a-m-h+c];default:throw new Error("Invalid rotation")}}getRectInCurrentCoords(t,e){const[n,r,s,a]=t,u=s-n,c=a-r;switch(this.rotation){case 0:return[n,e-a,u,c];case 90:return[n,e-r,c,u];case 180:return[s,e-r,u,c];case 270:return[s,e-a,c,u];default:throw new Error("Invalid rotation")}}getPDFRect(){return this.getRect(0,0)}getNonHCMColor(){return this.color&&$e._colorManager.convert(this._uiManager.getNonHCMColor(this.color))}onUpdatedColor(){var t;(t=p(this,si))==null||t.onUpdatedColor()}getData(){const{comment:{text:t,color:e,date:n,opacity:r,deleted:s,richText:a},uid:u,pageIndex:c,creationDate:h,modificationDate:f}=this;return{id:u,pageIndex:c,rect:this.getPDFRect(),richText:a,contentsObj:{str:t},creationDate:h,modificationDate:n||f,popupRef:!s,color:e,opacity:r}}onceAdded(t){}isEmpty(){return!1}enableEditMode(){return this.isInEditMode()?!1:(this.parent.setEditingState(!1),k(this,F0,!0),!0)}disableEditMode(){return this.isInEditMode()?(this.parent.setEditingState(!0),k(this,F0,!1),!0):!1}isInEditMode(){return p(this,F0)}shouldGetKeyboardEvents(){return p(this,th)}needsToBeRebuilt(){return this.div&&!this.isAttachedToDOM}get isOnScreen(){const{top:t,left:e,bottom:n,right:r}=this.getClientDimensions(),{innerHeight:s,innerWidth:a}=window;return e<a&&r>0&&t<s&&n>0}rebuild(){$(this,De,AS).call(this)}rotate(t){}resize(){}serializeDeleted(){var t;return{id:this.annotationElementId,deleted:!0,pageIndex:this.pageIndex,popupRef:((t=this._initialData)==null?void 0:t.popupRef)||""}}serialize(t=!1,e=null){var n;return{annotationType:this.mode,pageIndex:this.pageIndex,rect:this.getPDFRect(),rotation:this.rotation,structTreeParentId:this._structTreeParentId,popupRef:((n=this._initialData)==null?void 0:n.popupRef)||""}}static async deserialize(t,e,n){const r=new this.prototype.constructor({parent:e,id:e.getNextId(),uiManager:n,annotationElementId:t.annotationElementId,creationDate:t.creationDate,modificationDate:t.modificationDate});r.rotation=t.rotation,k(r,I0,t.accessibilityData),r._isCopy=t.isCopy||!1;const[s,a]=r.pageDimensions,[u,c,h,f]=r.getRectInCurrentCoords(t.rect,a);return r.x=u/s,r.y=c/a,r.width=h/s,r.height=f/a,r}get hasBeenModified(){return!!this.annotationElementId&&(this.deleted||this.serialize()!==null)}remove(){var t,e,n;if((t=p(this,Jf))==null||t.abort(),k(this,Jf,null),this.isEmpty()||this.commit(),this.parent?this.parent.remove(this):this._uiManager.removeEditor(this),this.hideCommentPopup(),p(this,Vu)&&(clearTimeout(p(this,Vu)),k(this,Vu,null)),$(this,De,qv).call(this),this.removeEditToolbar(),p(this,Za)){for(const r of p(this,Za).values())clearTimeout(r);k(this,Za,null)}this.parent=null,(e=p(this,B0))==null||e.destroy(),k(this,B0,null),(n=p(this,Qa))==null||n.remove(),k(this,Qa,null)}get isResizable(){return!1}makeResizable(){this.isResizable&&($(this,De,sD).call(this),p(this,ds).classList.remove("hidden"))}get toolbarPosition(){return null}get commentButtonPosition(){return this._uiManager.direction==="ltr"?[1,0]:[0,0]}get commentButtonPositionInPage(){const{commentButtonPosition:[t,e]}=this,[n,r,s,a]=this.getPDFRect();return[$e._round(n+(s-n)*t),$e._round(r+(a-r)*(1-e))]}get commentButtonColor(){return this._uiManager.makeCommentColor(this.getNonHCMColor(),this.opacity)}get commentPopupPosition(){return p(this,si).commentPopupPositionInLayer}set commentPopupPosition(t){p(this,si).commentPopupPositionInLayer=t}hasDefaultPopupPosition(){return p(this,si).hasDefaultPopupPosition()}get commentButtonWidth(){return p(this,si).commentButtonWidth}get elementBeforePopup(){return this.div}setCommentButtonStates(t){var e;(e=p(this,si))==null||e.setCommentButtonStates(t)}keydown(t){if(!this.isResizable||t.target!==this.div||t.key!=="Enter")return;this._uiManager.setSelected(this),k(this,Zc,{savedX:this.x,savedY:this.y,savedWidth:this.width,savedHeight:this.height});const e=p(this,ds).children;if(!p(this,Fl)){k(this,Fl,Array.from(e));const a=$(this,De,hD).bind(this),u=$(this,De,fD).bind(this),c=this._uiManager._signal;for(const h of p(this,Fl)){const f=h.getAttribute("data-resizer-name");h.setAttribute("role","spinbutton"),h.addEventListener("keydown",a,{signal:c}),h.addEventListener("blur",u,{signal:c}),h.addEventListener("focus",$(this,De,dD).bind(this,f),{signal:c}),h.setAttribute("data-l10n-id",$e._l10nResizer[f])}}const n=p(this,Fl)[0];let r=0;for(const a of e){if(a===n)break;r++}const s=(360-this.rotation+this.parentRotation)%360/90*(p(this,Fl).length/4);if(s!==r){if(s<r)for(let u=0;u<r-s;u++)p(this,ds).append(p(this,ds).firstElementChild);else if(s>r)for(let u=0;u<s-r;u++)p(this,ds).firstElementChild.before(p(this,ds).lastElementChild);let a=0;for(const u of e){const h=p(this,Fl)[a++].getAttribute("data-resizer-name");u.setAttribute("data-l10n-id",$e._l10nResizer[h])}}$(this,De,_S).call(this,0),k(this,th,!0),p(this,ds).firstElementChild.focus({focusVisible:!0}),t.preventDefault(),t.stopImmediatePropagation()}_resizeWithKeyboard(t,e){p(this,th)&&$(this,De,xS).call(this,p(this,P2),{deltaX:t,deltaY:e,fromKeyboard:!0})}_stopResizingWithKeyboard(){$(this,De,qv).call(this),this.div.focus()}select(){var t,e,n;if(this.isSelected&&this._editToolbar){this._editToolbar.show();return}if(this.isSelected=!0,this.makeResizable(),(t=this.div)==null||t.classList.add("selectedEditor"),!this._editToolbar){this.addEditToolbar().then(()=>{var r,s;(r=this.div)!=null&&r.classList.contains("selectedEditor")&&((s=this._editToolbar)==null||s.show())});return}(e=this._editToolbar)==null||e.show(),(n=p(this,Pi))==null||n.toggleAltTextBadge(!1)}focus(){this.div&&!this.div.contains(document.activeElement)&&setTimeout(()=>{var t;return(t=this.div)==null?void 0:t.focus({preventScroll:!0})},0)}unselect(){var t,e,n,r,s;this.isSelected&&(this.isSelected=!1,(t=p(this,ds))==null||t.classList.add("hidden"),(e=this.div)==null||e.classList.remove("selectedEditor"),(n=this.div)!=null&&n.contains(document.activeElement)&&this._uiManager.currentLayer.div.focus({preventScroll:!0}),(r=this._editToolbar)==null||r.hide(),(s=p(this,Pi))==null||s.toggleAltTextBadge(!0),this.hideCommentPopup())}hideCommentPopup(){this.hasComment&&this._uiManager.toggleComment(null)}updateParams(t,e){}disableEditing(){}enableEditing(){}get canChangeContent(){return!1}enterInEditMode(){this.canChangeContent&&(this.enableEditMode(),this.div.focus())}dblclick(t){t.target.nodeName!=="BUTTON"&&(this.enterInEditMode(),this.parent.updateToolbar({mode:this.constructor._editorType,editId:this.uid}))}getElementForAltText(){return this.div}get contentDiv(){return this.div}get isEditing(){return p(this,k2)}set isEditing(t){k(this,k2,t),this.parent&&(t?(this.parent.setSelected(this),this.parent.setActiveEditor(this)):this.parent.setActiveEditor(null))}static get MIN_SIZE(){return 16}static canCreateNewEmptyEditor(){return!0}get telemetryInitialData(){return{action:"added"}}get telemetryFinalData(){return null}_reportTelemetry(t,e=!1){if(e){p(this,Za)||k(this,Za,new Map);const{action:n}=t;let r=p(this,Za).get(n);r&&clearTimeout(r),r=setTimeout(()=>{this._reportTelemetry(t),p(this,Za).delete(n),p(this,Za).size===0&&k(this,Za,null)},$e._telemetryTimeout),p(this,Za).set(n,r);return}t.type||(t.type=this.editorType),this._uiManager._eventBus.dispatch("reporttelemetry",{source:this,details:{type:"editing",data:t}})}show(t=this._isVisible){this.div.classList.toggle("hidden",!t),this._isVisible=t}enable(){this.div&&(this.div.tabIndex=0),k(this,Rm,!1)}disable(){this.div&&(this.div.tabIndex=-1),k(this,Rm,!0)}updateFakeAnnotationElement(t){if(!p(this,Qa)&&!this.deleted){k(this,Qa,t.addFakeAnnotation(this));return}if(this.deleted){p(this,Qa).remove(),k(this,Qa,null);return}(this.hasEditedComment||this._hasBeenMoved||this._hasBeenResized)&&p(this,Qa).updateEdited({rect:this.getPDFRect(),popup:this.comment})}renderAnnotationElement(t){if(this.deleted)return t.hide(),null;let e=t.container.querySelector(".annotationContent");if(!e)e=document.createElement("div"),e.classList.add("annotationContent",this.editorType),t.container.prepend(e);else if(e.nodeName==="CANVAS"){const n=e;e=document.createElement("div"),e.classList.add("annotationContent",this.editorType),n.before(e)}return e}resetAnnotationElement(t){const{firstElementChild:e}=t.container;(e==null?void 0:e.nodeName)==="DIV"&&e.classList.contains("annotationContent")&&e.remove()}};I0=new WeakMap,Fl=new WeakMap,Pi=new WeakMap,si=new WeakMap,Qc=new WeakMap,Rm=new WeakMap,jf=new WeakMap,I2=new WeakMap,ds=new WeakMap,P0=new WeakMap,Zc=new WeakMap,Qa=new WeakMap,Jf=new WeakMap,P2=new WeakMap,k0=new WeakMap,oa=new WeakMap,k2=new WeakMap,F0=new WeakMap,th=new WeakMap,Vu=new WeakMap,Dm=new WeakMap,Lm=new WeakMap,Za=new WeakMap,B0=new WeakMap,F2=new WeakMap,mA=new WeakMap,De=new WeakSet,mS=function([t,e],n,r){[n,r]=this.screenToPageTranslation(n,r),this.x+=n/t,this.y+=r/e,this._onTranslating(this.x,this.y),this.fixAndSetPosition()},B2=new WeakSet,vS=function(t,e,n){switch(n){case 90:return[e,-t];case 180:return[-t,-e];case 270:return[-e,t];default:return[t,e]}},N5=function(t){switch(t){case 90:{const[e,n]=this.pageDimensions;return[0,-e/n,n/e,0]}case 180:return[-1,0,0,-1];case 270:{const[e,n]=this.pageDimensions;return[0,e/n,-n/e,0]}default:return[1,0,0,1]}},sD=function(){if(p(this,ds))return;k(this,ds,document.createElement("div")),p(this,ds).classList.add("resizers");const t=this._willKeepAspectRatio?["topLeft","topRight","bottomRight","bottomLeft"]:["topLeft","topMiddle","topRight","middleRight","bottomRight","bottomMiddle","bottomLeft","middleLeft"],e=this._uiManager._signal;for(const n of t){const r=document.createElement("div");p(this,ds).append(r),r.classList.add("resizer",n),r.setAttribute("data-resizer-name",n),r.addEventListener("pointerdown",$(this,De,oD).bind(this,n),{signal:e}),r.addEventListener("contextmenu",ll,{signal:e}),r.tabIndex=-1}this.div.prepend(p(this,ds))},oD=function(t,e){var f;e.preventDefault();const{isMac:n}=bs.platform;if(e.button!==0||e.ctrlKey&&n)return;(f=p(this,Pi))==null||f.toggle(!1);const r=this._isDraggable;this._isDraggable=!1,k(this,P0,[e.screenX,e.screenY]);const s=new AbortController,a=this._uiManager.combinedSignal(s);this.parent.togglePointerEvents(!1),window.addEventListener("pointermove",$(this,De,xS).bind(this,t),{passive:!0,capture:!0,signal:a}),window.addEventListener("touchmove",Zi,{passive:!1,signal:a}),window.addEventListener("contextmenu",ll,{signal:a}),k(this,Zc,{savedX:this.x,savedY:this.y,savedWidth:this.width,savedHeight:this.height});const u=this.parent.div.style.cursor,c=this.div.style.cursor;this.div.style.cursor=this.parent.div.style.cursor=window.getComputedStyle(e.target).cursor;const h=()=>{var g;s.abort(),this.parent.togglePointerEvents(!0),(g=p(this,Pi))==null||g.toggle(!0),this._isDraggable=r,this.parent.div.style.cursor=u,this.div.style.cursor=c,$(this,De,R5).call(this)};window.addEventListener("pointerup",h,{signal:a}),window.addEventListener("blur",h,{signal:a})},yS=function(t,e,n,r){this.width=n,this.height=r,this.x=t,this.y=e,this.setDims(),this.fixAndSetPosition(),this._onResized()},R5=function(){if(!p(this,Zc))return;const{savedX:t,savedY:e,savedWidth:n,savedHeight:r}=p(this,Zc);k(this,Zc,null);const s=this.x,a=this.y,u=this.width,c=this.height;s===t&&a===e&&u===n&&c===r||this.addCommands({cmd:$(this,De,yS).bind(this,s,a,u,c),undo:$(this,De,yS).bind(this,t,e,n,r),mustExec:!0})},xS=function(t,e){const[n,r]=this.parentDimensions,s=this.x,a=this.y,u=this.width,c=this.height,h=$e.MIN_SIZE/n,f=$e.MIN_SIZE/r,g=$(this,De,N5).call(this,this.rotation),m=(nt,at)=>[g[0]*nt+g[2]*at,g[1]*nt+g[3]*at],y=$(this,De,N5).call(this,360-this.rotation),w=(nt,at)=>[y[0]*nt+y[2]*at,y[1]*nt+y[3]*at];let S,T,C=!1,D=!1;switch(t){case"topLeft":C=!0,S=(nt,at)=>[0,0],T=(nt,at)=>[nt,at];break;case"topMiddle":S=(nt,at)=>[nt/2,0],T=(nt,at)=>[nt/2,at];break;case"topRight":C=!0,S=(nt,at)=>[nt,0],T=(nt,at)=>[0,at];break;case"middleRight":D=!0,S=(nt,at)=>[nt,at/2],T=(nt,at)=>[0,at/2];break;case"bottomRight":C=!0,S=(nt,at)=>[nt,at],T=(nt,at)=>[0,0];break;case"bottomMiddle":S=(nt,at)=>[nt/2,at],T=(nt,at)=>[nt/2,0];break;case"bottomLeft":C=!0,S=(nt,at)=>[0,at],T=(nt,at)=>[nt,0];break;case"middleLeft":D=!0,S=(nt,at)=>[0,at/2],T=(nt,at)=>[nt,at/2];break}const R=S(u,c),I=T(u,c);let F=m(...I);const q=$e._round(s+F[0]),U=$e._round(a+F[1]);let V=1,tt=1,J,O;if(e.fromKeyboard)({deltaX:J,deltaY:O}=e);else{const{screenX:nt,screenY:at}=e,[ht,bt]=p(this,P0);[J,O]=this.screenToPageTranslation(nt-ht,at-bt),p(this,P0)[0]=nt,p(this,P0)[1]=at}if([J,O]=w(J/n,O/r),C){const nt=Math.hypot(u,c);V=tt=Math.max(Math.min(Math.hypot(I[0]-R[0]-J,I[1]-R[1]-O)/nt,1/u,1/c),h/u,f/c)}else D?V=ro(Math.abs(I[0]-R[0]-J),h,1)/u:tt=ro(Math.abs(I[1]-R[1]-O),f,1)/c;const G=$e._round(u*V),et=$e._round(c*tt);F=m(...T(G,et));const st=q-F[0],pt=U-F[1];p(this,oa)||k(this,oa,[this.x,this.y,this.width,this.height]),this.width=G,this.height=et,this.x=st,this.y=pt,this.setDims(),this.fixAndSetPosition(),this._onResizing()},aD=function(){var t;k(this,Zc,{savedX:this.x,savedY:this.y,savedWidth:this.width,savedHeight:this.height}),(t=p(this,Pi))==null||t.toggle(!1),this.parent.togglePointerEvents(!1)},lD=function(t,e,n){let s=.7*(n/e)+1-.7;if(s===1)return;const a=$(this,De,N5).call(this,this.rotation),u=(q,U)=>[a[0]*q+a[2]*U,a[1]*q+a[3]*U],[c,h]=this.parentDimensions,f=this.x,g=this.y,m=this.width,y=this.height,w=$e.MIN_SIZE/c,S=$e.MIN_SIZE/h;s=Math.max(Math.min(s,1/m,1/y),w/m,S/y);const T=$e._round(m*s),C=$e._round(y*s);if(T===m&&C===y)return;p(this,oa)||k(this,oa,[f,g,m,y]);const D=u(m/2,y/2),R=$e._round(f+D[0]),I=$e._round(g+D[1]),F=u(T/2,C/2);this.x=R-F[0],this.y=I-F[1],this.width=T,this.height=C,this.setDims(),this.fixAndSetPosition(),this._onResizing()},uD=function(){var t;(t=p(this,Pi))==null||t.toggle(!0),this.parent.togglePointerEvents(!0),$(this,De,R5).call(this)},bS=function(t){const{isMac:e}=bs.platform;t.ctrlKey&&!e||t.shiftKey||t.metaKey&&e?this.parent.toggleSelected(this):this.parent.setSelected(this)},cD=function(t){const{isSelected:e}=this;this._uiManager.setUpDragSession();let n=!1;const r=new AbortController,s=this._uiManager.combinedSignal(r),a={capture:!0,passive:!1,signal:s},u=h=>{r.abort(),k(this,jf,null),k(this,k0,!1),this._uiManager.endDragSession()||$(this,De,bS).call(this,h),n&&this._onStopDragging()};e&&(k(this,Dm,t.clientX),k(this,Lm,t.clientY),k(this,jf,t.pointerId),k(this,I2,t.pointerType),window.addEventListener("pointermove",h=>{n||(n=!0,this._uiManager.toggleComment(this,!0,!1),this._onStartDragging());const{clientX:f,clientY:g,pointerId:m}=h;if(m!==p(this,jf)){Zi(h);return}const[y,w]=this.screenToPageTranslation(f-p(this,Dm),g-p(this,Lm));k(this,Dm,f),k(this,Lm,g),this._uiManager.dragSelectedEditors(y,w)},a),window.addEventListener("touchmove",Zi,a),window.addEventListener("pointerdown",h=>{h.pointerType===p(this,I2)&&(p(this,B0)||h.isPrimary)&&u(h),Zi(h)},a));const c=h=>{if(!p(this,jf)||p(this,jf)===h.pointerId){u(h);return}Zi(h)};window.addEventListener("pointerup",c,{signal:s}),window.addEventListener("blur",c,{signal:s})},AS=function(){if(p(this,Jf)||!this.div)return;k(this,Jf,new AbortController);const t=this._uiManager.combinedSignal(p(this,Jf));this.div.addEventListener("focusin",this.focusin.bind(this),{signal:t}),this.div.addEventListener("focusout",this.focusout.bind(this),{signal:t})},hD=function(t){$e._resizerKeyboardManager.exec(this,t)},fD=function(t){var e;p(this,th)&&((e=t.relatedTarget)==null?void 0:e.parentNode)!==p(this,ds)&&$(this,De,qv).call(this)},dD=function(t){k(this,P2,p(this,th)?t:"")},_S=function(t){if(p(this,Fl))for(const e of p(this,Fl))e.tabIndex=t},qv=function(){k(this,th,!1),$(this,De,_S).call(this,-1),$(this,De,R5).call(this)},z($e,B2),Kt($e,"_l10n",null),Kt($e,"_l10nResizer",null),Kt($e,"_borderLineWidth",-1),Kt($e,"_colorManager",new cS),Kt($e,"_zIndex",1),Kt($e,"_telemetryTimeout",1e3);let bi=$e;class ZH extends bi{constructor(t){super(t),this.annotationElementId=t.annotationElementId,this.deleted=!0}serialize(){return this.serializeDeleted()}}const G6=3285377520,Ga=4294901760,Iu=65535;class pD{constructor(t){this.h1=t?t&4294967295:G6,this.h2=t?t&4294967295:G6}update(t){let e,n;if(typeof t=="string"){e=new Uint8Array(t.length*2),n=0;for(let S=0,T=t.length;S<T;S++){const C=t.charCodeAt(S);C<=255?e[n++]=C:(e[n++]=C>>>8,e[n++]=C&255)}}else if(ArrayBuffer.isView(t))e=t.slice(),n=e.byteLength;else throw new Error("Invalid data format, must be a string or TypedArray.");const r=n>>2,s=n-r*4,a=new Uint32Array(e.buffer,0,r);let u=0,c=0,h=this.h1,f=this.h2;const g=3432918353,m=461845907,y=g&Iu,w=m&Iu;for(let S=0;S<r;S++)S&1?(u=a[S],u=u*g&Ga|u*y&Iu,u=u<<15|u>>>17,u=u*m&Ga|u*w&Iu,h^=u,h=h<<13|h>>>19,h=h*5+3864292196):(c=a[S],c=c*g&Ga|c*y&Iu,c=c<<15|c>>>17,c=c*m&Ga|c*w&Iu,f^=c,f=f<<13|f>>>19,f=f*5+3864292196);switch(u=0,s){case 3:u^=e[r*4+2]<<16;case 2:u^=e[r*4+1]<<8;case 1:u^=e[r*4],u=u*g&Ga|u*y&Iu,u=u<<15|u>>>17,u=u*m&Ga|u*w&Iu,r&1?h^=u:f^=u}this.h1=h,this.h2=f}hexdigest(){let t=this.h1,e=this.h2;return t^=e>>>1,t=t*3981806797&Ga|t*36045&Iu,e=e*4283543511&Ga|((e<<16|t>>>16)*2950163797&Ga)>>>16,t^=e>>>1,t=t*444984403&Ga|t*60499&Iu,e=e*3301882366&Ga|((e<<16|t>>>16)*3120437893&Ga)>>>16,t^=e>>>1,(t>>>0).toString(16).padStart(8,"0")+(e>>>0).toString(16).padStart(8,"0")}}const wS=Object.freeze({map:null,hash:"",transfer:void 0});var O0,U0,eh,ps,vA,gD;class oC{constructor(){z(this,vA);z(this,O0,!1);z(this,U0,null);z(this,eh,null);z(this,ps,new Map);this.onSetModified=null,this.onResetModified=null,this.onAnnotationEditor=null}getValue(t,e){const n=p(this,ps).get(t);return n===void 0?e:Object.assign(e,n)}getRawValue(t){return p(this,ps).get(t)}remove(t){const e=p(this,ps).get(t);if(e!==void 0&&(e instanceof bi&&p(this,eh).delete(e.annotationElementId),p(this,ps).delete(t),p(this,ps).size===0&&this.resetModified(),typeof this.onAnnotationEditor=="function")){for(const n of p(this,ps).values())if(n instanceof bi)return;this.onAnnotationEditor(null)}}setValue(t,e){const n=p(this,ps).get(t);let r=!1;if(n!==void 0)for(const[s,a]of Object.entries(e))n[s]!==a&&(r=!0,n[s]=a);else r=!0,p(this,ps).set(t,e);r&&$(this,vA,gD).call(this),e instanceof bi&&((p(this,eh)||k(this,eh,new Map)).set(e.annotationElementId,e),typeof this.onAnnotationEditor=="function"&&this.onAnnotationEditor(e.constructor._type))}has(t){return p(this,ps).has(t)}get size(){return p(this,ps).size}resetModified(){p(this,O0)&&(k(this,O0,!1),typeof this.onResetModified=="function"&&this.onResetModified())}get print(){return new mD(this)}get serializable(){if(p(this,ps).size===0)return wS;const t=new Map,e=new pD,n=[],r=Object.create(null);let s=!1;for(const[a,u]of p(this,ps)){const c=u instanceof bi?u.serialize(!1,r):u;c&&(t.set(a,c),e.update(`${a}:${JSON.stringify(c)}`),s||(s=!!c.bitmap))}if(s)for(const a of t.values())a.bitmap&&n.push(a.bitmap);return t.size>0?{map:t,hash:e.hexdigest(),transfer:n}:wS}get editorStats(){let t=null;const e=new Map;let n=0,r=0;for(const s of p(this,ps).values()){if(!(s instanceof bi)){s.popup&&(s.popup.deleted?r+=1:n+=1);continue}s.isCommentDeleted?r+=1:s.hasEditedComment&&(n+=1);const a=s.telemetryFinalData;if(!a)continue;const{type:u}=a;e.has(u)||e.set(u,Object.getPrototypeOf(s).constructor),t||(t=Object.create(null));const c=t[u]||(t[u]=new Map);for(const[h,f]of Object.entries(a)){if(h==="type")continue;let g=c.get(h);g||(g=new Map,c.set(h,g));const m=g.get(f)??0;g.set(f,m+1)}}if((r>0||n>0)&&(t||(t=Object.create(null)),t.comments={deleted:r,edited:n}),!t)return null;for(const[s,a]of e)t[s]=a.computeTelemetryFinalData(t[s]);return t}resetModifiedIds(){k(this,U0,null)}updateEditor(t,e){var r;const n=(r=p(this,eh))==null?void 0:r.get(t);return n?(n.updateFromAnnotationLayer(e),!0):!1}getEditor(t){var e;return((e=p(this,eh))==null?void 0:e.get(t))||null}get modifiedIds(){if(p(this,U0))return p(this,U0);const t=[];if(p(this,eh))for(const e of p(this,eh).values())e.serialize()&&t.push(e.annotationElementId);return k(this,U0,{ids:new Set(t),hash:t.join(",")})}[Symbol.iterator](){return p(this,ps).entries()}}O0=new WeakMap,U0=new WeakMap,eh=new WeakMap,ps=new WeakMap,vA=new WeakSet,gD=function(){p(this,O0)||(k(this,O0,!0),typeof this.onSetModified=="function"&&this.onSetModified())};var O2;class mD extends oC{constructor(e){super();z(this,O2);const{map:n,hash:r,transfer:s}=e.serializable,a=structuredClone(n,s?{transfer:s}:null);k(this,O2,{map:a,hash:r,transfer:s})}get print(){ui("Should not call PrintAnnotationStorage.print")}get serializable(){return p(this,O2)}get modifiedIds(){return Ve(this,"modifiedIds",{ids:new Set,hash:""})}}O2=new WeakMap;var Mm;class tq{constructor({ownerDocument:t=globalThis.document,styleElement:e=null}){z(this,Mm,new Set);this._document=t,this.nativeFontFaces=new Set,this.styleElement=null,this.loadingRequests=[],this.loadTestFontId=0}addNativeFontFace(t){this.nativeFontFaces.add(t),this._document.fonts.add(t)}removeNativeFontFace(t){this.nativeFontFaces.delete(t),this._document.fonts.delete(t)}insertRule(t){this.styleElement||(this.styleElement=this._document.createElement("style"),this._document.documentElement.getElementsByTagName("head")[0].append(this.styleElement));const e=this.styleElement.sheet;e.insertRule(t,e.cssRules.length)}clear(){for(const t of this.nativeFontFaces)this._document.fonts.delete(t);this.nativeFontFaces.clear(),p(this,Mm).clear(),this.styleElement&&(this.styleElement.remove(),this.styleElement=null)}async loadSystemFont({systemFontInfo:t,disableFontFace:e,_inspectFont:n}){if(!(!t||p(this,Mm).has(t.loadedName))){if(bn(!e,"loadSystemFont shouldn't be called when `disableFontFace` is set."),this.isFontLoadingAPISupported){const{loadedName:r,src:s,style:a}=t,u=new FontFace(r,s,a);this.addNativeFontFace(u);try{await u.load(),p(this,Mm).add(r),n==null||n(t)}catch{Ge(`Cannot load system font: ${t.baseFontName}, installing it could help to improve PDF rendering.`),this.removeNativeFontFace(u)}return}ui("Not implemented: loadSystemFont without the Font Loading API.")}}async bind(t){if(t.attached||t.missingFile&&!t.systemFontInfo)return;if(t.attached=!0,t.systemFontInfo){await this.loadSystemFont(t);return}if(this.isFontLoadingAPISupported){const n=t.createNativeFontFace();if(n){this.addNativeFontFace(n);try{await n.loaded}catch(r){throw Ge(`Failed to load font '${n.family}': '${r}'.`),t.disableFontFace=!0,r}}return}const e=t.createFontFaceRule();if(e){if(this.insertRule(e),this.isSyncFontLoadingSupported)return;await new Promise(n=>{const r=this._queueLoadingCallback(n);this._prepareFontLoadEvent(t,r)})}}get isFontLoadingAPISupported(){var e;const t=!!((e=this._document)!=null&&e.fonts);return Ve(this,"isFontLoadingAPISupported",t)}get isSyncFontLoadingSupported(){return Ve(this,"isSyncFontLoadingSupported",io||bs.platform.isFirefox)}_queueLoadingCallback(t){function e(){for(bn(!r.done,"completeRequest() cannot be called twice."),r.done=!0;n.length>0&&n[0].done;){const s=n.shift();setTimeout(s.callback,0)}}const{loadingRequests:n}=this,r={done:!1,complete:e,callback:t};return n.push(r),r}get _loadTestFont(){const t=atob("T1RUTwALAIAAAwAwQ0ZGIDHtZg4AAAOYAAAAgUZGVE1lkzZwAAAEHAAAABxHREVGABQAFQAABDgAAAAeT1MvMlYNYwkAAAEgAAAAYGNtYXABDQLUAAACNAAAAUJoZWFk/xVFDQAAALwAAAA2aGhlYQdkA+oAAAD0AAAAJGhtdHgD6AAAAAAEWAAAAAZtYXhwAAJQAAAAARgAAAAGbmFtZVjmdH4AAAGAAAAAsXBvc3T/hgAzAAADeAAAACAAAQAAAAEAALZRFsRfDzz1AAsD6AAAAADOBOTLAAAAAM4KHDwAAAAAA+gDIQAAAAgAAgAAAAAAAAABAAADIQAAAFoD6AAAAAAD6AABAAAAAAAAAAAAAAAAAAAAAQAAUAAAAgAAAAQD6AH0AAUAAAKKArwAAACMAooCvAAAAeAAMQECAAACAAYJAAAAAAAAAAAAAQAAAAAAAAAAAAAAAFBmRWQAwAAuAC4DIP84AFoDIQAAAAAAAQAAAAAAAAAAACAAIAABAAAADgCuAAEAAAAAAAAAAQAAAAEAAAAAAAEAAQAAAAEAAAAAAAIAAQAAAAEAAAAAAAMAAQAAAAEAAAAAAAQAAQAAAAEAAAAAAAUAAQAAAAEAAAAAAAYAAQAAAAMAAQQJAAAAAgABAAMAAQQJAAEAAgABAAMAAQQJAAIAAgABAAMAAQQJAAMAAgABAAMAAQQJAAQAAgABAAMAAQQJAAUAAgABAAMAAQQJAAYAAgABWABYAAAAAAAAAwAAAAMAAAAcAAEAAAAAADwAAwABAAAAHAAEACAAAAAEAAQAAQAAAC7//wAAAC7////TAAEAAAAAAAABBgAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAMAAAAAAAD/gwAyAAAAAQAAAAAAAAAAAAAAAAAAAAABAAQEAAEBAQJYAAEBASH4DwD4GwHEAvgcA/gXBIwMAYuL+nz5tQXkD5j3CBLnEQACAQEBIVhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYAAABAQAADwACAQEEE/t3Dov6fAH6fAT+fPp8+nwHDosMCvm1Cvm1DAz6fBQAAAAAAAABAAAAAMmJbzEAAAAAzgTjFQAAAADOBOQpAAEAAAAAAAAADAAUAAQAAAABAAAAAgABAAAAAAAAAAAD6AAAAAAAAA==");return Ve(this,"_loadTestFont",t)}_prepareFontLoadEvent(t,e){function n(I,F){return I.charCodeAt(F)<<24|I.charCodeAt(F+1)<<16|I.charCodeAt(F+2)<<8|I.charCodeAt(F+3)&255}function r(I,F,q,U){const V=I.substring(0,F),tt=I.substring(F+q);return V+U+tt}let s,a;const u=this._document.createElement("canvas");u.width=1,u.height=1;const c=u.getContext("2d");let h=0;function f(I,F){if(++h>30){Ge("Load test font never loaded."),F();return}if(c.font="30px "+I,c.fillText(".",0,20),c.getImageData(0,0,1,1).data[3]>0){F();return}setTimeout(f.bind(null,I,F))}const g=`lt${Date.now()}${this.loadTestFontId++}`;let m=this._loadTestFont;m=r(m,976,g.length,g);const w=16,S=1482184792;let T=n(m,w);for(s=0,a=g.length-3;s<a;s+=4)T=T-S+n(g,s)|0;s<g.length&&(T=T-S+n(g+"XXX",s)|0),m=r(m,w,4,PH(T));const C=`url(data:font/opentype;base64,${btoa(m)});`,D=`@font-face {font-family:"${g}";src:${C}}`;this.insertRule(D);const R=this._document.createElement("div");R.style.visibility="hidden",R.style.width=R.style.height="10px",R.style.position="absolute",R.style.top=R.style.left="0px";for(const I of[t.loadedName,g]){const F=this._document.createElement("span");F.textContent="Hi",F.style.fontFamily=I,R.append(F)}this._document.body.append(R),f(g,()=>{R.remove(),e.complete()})}}Mm=new WeakMap;var jn;class eq{constructor(t,e=null,n,r){z(this,jn);this.compiledGlyphs=Object.create(null),k(this,jn,t),this._inspectFont=e,n&&Object.assign(this,n),r&&(this.charProcOperatorList=r)}createNativeFontFace(){var e;if(!this.data||this.disableFontFace)return null;let t;if(!this.cssFontInfo)t=new FontFace(this.loadedName,this.data,{});else{const n={weight:this.cssFontInfo.fontWeight};this.cssFontInfo.italicAngle&&(n.style=`oblique ${this.cssFontInfo.italicAngle}deg`),t=new FontFace(this.cssFontInfo.fontFamily,this.data,n)}return(e=this._inspectFont)==null||e.call(this,this),t}createFontFaceRule(){var n;if(!this.data||this.disableFontFace)return null;const t=`url(data:${this.mimetype};base64,${IR(this.data)});`;let e;if(!this.cssFontInfo)e=`@font-face {font-family:"${this.loadedName}";src:${t}}`;else{let r=`font-weight: ${this.cssFontInfo.fontWeight};`;this.cssFontInfo.italicAngle&&(r+=`font-style: oblique ${this.cssFontInfo.italicAngle}deg;`),e=`@font-face {font-family:"${this.cssFontInfo.fontFamily}";${r}src:${t}}`}return(n=this._inspectFont)==null||n.call(this,this,t),e}getPathGenerator(t,e){if(this.compiledGlyphs[e]!==void 0)return this.compiledGlyphs[e];const n=this.loadedName+"_path_"+e;let r;try{r=t.get(n)}catch(a){Ge(`getPathGenerator - ignoring character: "${a}".`)}const s=FR(r);return this.fontExtraProperties||t.delete(n),this.compiledGlyphs[e]=s}get black(){return p(this,jn).black}get bold(){return p(this,jn).bold}get disableFontFace(){return p(this,jn).disableFontFace??!1}set disableFontFace(t){Ve(this,"disableFontFace",!!t)}get fontExtraProperties(){return p(this,jn).fontExtraProperties??!1}get isInvalidPDFjsFont(){return p(this,jn).isInvalidPDFjsFont}get isType3Font(){return p(this,jn).isType3Font}get italic(){return p(this,jn).italic}get missingFile(){return p(this,jn).missingFile}get remeasure(){return p(this,jn).remeasure}get vertical(){return p(this,jn).vertical}get ascent(){return p(this,jn).ascent}get defaultWidth(){return p(this,jn).defaultWidth}get descent(){return p(this,jn).descent}get bbox(){return p(this,jn).bbox}set bbox(t){Ve(this,"bbox",t)}get fontMatrix(){return p(this,jn).fontMatrix}get fallbackName(){return p(this,jn).fallbackName}get loadedName(){return p(this,jn).loadedName}get mimetype(){return p(this,jn).mimetype}get name(){return p(this,jn).name}get data(){return p(this,jn).data}clearData(){p(this,jn).clearData()}get cssFontInfo(){return p(this,jn).cssFontInfo}get systemFontInfo(){return p(this,jn).systemFontInfo}get defaultVMetrics(){return p(this,jn).defaultVMetrics}}jn=new WeakMap;var Im,Pm,U2,km,D5;const em=class em{constructor(t){z(this,km);z(this,Im);z(this,Pm);z(this,U2);k(this,Im,t),k(this,Pm,new DataView(p(this,Im))),k(this,U2,new TextDecoder)}static write(t){const e=new TextEncoder,n={};let r=0;for(const h of em.strings){const f=e.encode(t[h]);n[h]=f,r+=4+f.length}const s=new ArrayBuffer(r),a=new Uint8Array(s),u=new DataView(s);let c=0;for(const h of em.strings){const f=n[h],g=f.length;u.setUint32(c,g),a.set(f,c+4),c+=4+g}return bn(c===s.byteLength,"CssFontInfo.write: Buffer overflow"),s}get fontFamily(){return $(this,km,D5).call(this,0)}get fontWeight(){return $(this,km,D5).call(this,1)}get italicAngle(){return $(this,km,D5).call(this,2)}};Im=new WeakMap,Pm=new WeakMap,U2=new WeakMap,km=new WeakSet,D5=function(t){bn(t<em.strings.length,"Invalid string index");let e=0;for(let r=0;r<t;r++)e+=p(this,Pm).getUint32(e)+4;const n=p(this,Pm).getUint32(e);return p(this,U2).decode(new Uint8Array(p(this,Im),e+4,n))},Kt(em,"strings",["fontFamily","fontWeight","italicAngle"]);let tA=em;var Kf,Yu,H0,q0,zv;const nm=class nm{constructor(t){z(this,q0);z(this,Kf);z(this,Yu);z(this,H0);k(this,Kf,t),k(this,Yu,new DataView(p(this,Kf))),k(this,H0,new TextDecoder)}static write(t){const e=new TextEncoder,n={};let r=0;for(const m of nm.strings){const y=e.encode(t[m]);n[m]=y,r+=4+y.length}r+=4;let s,a,u=1+r;t.style&&(s=e.encode(t.style.style),a=e.encode(t.style.weight),u+=4+s.length+4+a.length);const c=new ArrayBuffer(u),h=new Uint8Array(c),f=new DataView(c);let g=0;f.setUint8(g++,t.guessFallback?1:0),f.setUint32(g,0),g+=4,r=0;for(const m of nm.strings){const y=n[m],w=y.length;r+=4+w,f.setUint32(g,w),h.set(y,g+4),g+=4+w}return f.setUint32(g-r-4,r),t.style&&(f.setUint32(g,s.length),h.set(s,g+4),g+=4+s.length,f.setUint32(g,a.length),h.set(a,g+4),g+=4+a.length),bn(g<=c.byteLength,"SubstitionInfo.write: Buffer overflow"),c.transferToFixedLength(g)}get guessFallback(){return p(this,Yu).getUint8(0)!==0}get css(){return $(this,q0,zv).call(this,0)}get loadedName(){return $(this,q0,zv).call(this,1)}get baseFontName(){return $(this,q0,zv).call(this,2)}get src(){return $(this,q0,zv).call(this,3)}get style(){let t=1;t+=4+p(this,Yu).getUint32(t);const e=p(this,Yu).getUint32(t),n=p(this,H0).decode(new Uint8Array(p(this,Kf),t+4,e));t+=4+e;const r=p(this,Yu).getUint32(t),s=p(this,H0).decode(new Uint8Array(p(this,Kf),t+4,r));return{style:n,weight:s}}};Kf=new WeakMap,Yu=new WeakMap,H0=new WeakMap,q0=new WeakSet,zv=function(t){bn(t<nm.strings.length,"Invalid string index");let e=5;for(let r=0;r<t;r++)e+=p(this,Yu).getUint32(e)+4;const n=p(this,Yu).getUint32(e);return p(this,H0).decode(new Uint8Array(p(this,Kf),e+4,n))},Kt(nm,"strings",["css","loadedName","baseFontName","src"]);let eA=nm;var Fm,Bm,Om,Um,aa,$u,H2,Jn,Qi,Ll,L5,Gv;const je=class je{constructor({data:t,extra:e}){z(this,Qi);z(this,$u);z(this,H2);z(this,Jn);k(this,$u,t),k(this,H2,new TextDecoder),k(this,Jn,new DataView(p(this,$u))),e&&Object.assign(this,e)}get black(){return $(this,Qi,Ll).call(this,0)}get bold(){return $(this,Qi,Ll).call(this,1)}get disableFontFace(){return $(this,Qi,Ll).call(this,2)}get fontExtraProperties(){return $(this,Qi,Ll).call(this,3)}get isInvalidPDFjsFont(){return $(this,Qi,Ll).call(this,4)}get isType3Font(){return $(this,Qi,Ll).call(this,5)}get italic(){return $(this,Qi,Ll).call(this,6)}get missingFile(){return $(this,Qi,Ll).call(this,7)}get remeasure(){return $(this,Qi,Ll).call(this,8)}get vertical(){return $(this,Qi,Ll).call(this,9)}get ascent(){return $(this,Qi,L5).call(this,0)}get defaultWidth(){return $(this,Qi,L5).call(this,1)}get descent(){return $(this,Qi,L5).call(this,2)}get bbox(){let t=p(je,Bm);if(p(this,Jn).getUint8(t)===0)return;t+=1;const n=[];for(let r=0;r<4;r++)n.push(p(this,Jn).getInt16(t,!0)),t+=2;return n}get fontMatrix(){let t=p(je,Om);if(p(this,Jn).getUint8(t)===0)return;t+=1;const n=[];for(let r=0;r<6;r++)n.push(p(this,Jn).getFloat64(t,!0)),t+=8;return n}get defaultVMetrics(){let t=p(je,Um);if(p(this,Jn).getUint8(t)===0)return;t+=1;const n=[];for(let r=0;r<3;r++)n.push(p(this,Jn).getInt16(t,!0)),t+=2;return n}get fallbackName(){return $(this,Qi,Gv).call(this,0)}get loadedName(){return $(this,Qi,Gv).call(this,1)}get mimetype(){return $(this,Qi,Gv).call(this,2)}get name(){return $(this,Qi,Gv).call(this,3)}get data(){let t=p(je,aa);const e=p(this,Jn).getUint32(t);t+=4+e;const n=p(this,Jn).getUint32(t);t+=4+n;const r=p(this,Jn).getUint32(t);t+=4+r;const s=p(this,Jn).getUint32(t);if(s!==0)return new Uint8Array(p(this,$u),t+4,s)}clearData(){let t=p(je,aa);const e=p(this,Jn).getUint32(t);t+=4+e;const n=p(this,Jn).getUint32(t);t+=4+n;const r=p(this,Jn).getUint32(t);t+=4+r;const s=p(this,Jn).getUint32(t);new Uint8Array(p(this,$u),t+4,s).fill(0),p(this,Jn).setUint32(t,0)}get cssFontInfo(){let t=p(je,aa);const e=p(this,Jn).getUint32(t);t+=4+e;const n=p(this,Jn).getUint32(t);t+=4+n;const r=p(this,Jn).getUint32(t);if(r===0)return null;const s=new Uint8Array(r);return s.set(new Uint8Array(p(this,$u),t+4,r)),new tA(s.buffer)}get systemFontInfo(){let t=p(je,aa);const e=p(this,Jn).getUint32(t);t+=4+e;const n=p(this,Jn).getUint32(t);if(n===0)return null;const r=new Uint8Array(n);return r.set(new Uint8Array(p(this,$u),t+4,n)),new eA(r.buffer)}static write(t){const e=t.systemFontInfo?eA.write(t.systemFontInfo):null,n=t.cssFontInfo?tA.write(t.cssFontInfo):null,r=new TextEncoder,s={};let a=0;for(const S of je.strings)s[S]=r.encode(t[S]),a+=4+s[S].length;const u=p(je,aa)+4+a+4+(e?e.byteLength:0)+4+(n?n.byteLength:0)+4+(t.data?t.data.length:0),c=new ArrayBuffer(u),h=new Uint8Array(c),f=new DataView(c);let g=0;const m=je.bools.length;let y=0,w=0;for(let S=0;S<m;S++){const T=t[je.bools[S]];y|=(T===void 0?0:T?2:1)<<w,w+=2,(w===8||S===m-1)&&(f.setUint8(g++,y),y=0,w=0)}bn(g===p(je,Fm),"FontInfo.write: Boolean properties offset mismatch");for(const S of je.numbers)f.setFloat64(g,t[S]),g+=8;if(bn(g===p(je,Bm),"FontInfo.write: Number properties offset mismatch"),t.bbox){f.setUint8(g++,4);for(const S of t.bbox)f.setInt16(g,S,!0),g+=2}else f.setUint8(g++,0),g+=8;if(bn(g===p(je,Om),"FontInfo.write: BBox properties offset mismatch"),t.fontMatrix){f.setUint8(g++,6);for(const S of t.fontMatrix)f.setFloat64(g,S,!0),g+=8}else f.setUint8(g++,0),g+=48;if(bn(g===p(je,Um),"FontInfo.write: FontMatrix properties offset mismatch"),t.defaultVMetrics){f.setUint8(g++,1);for(const S of t.defaultVMetrics)f.setInt16(g,S,!0),g+=2}else f.setUint8(g++,0),g+=6;bn(g===p(je,aa),"FontInfo.write: DefaultVMetrics properties offset mismatch"),f.setUint32(p(je,aa),0),g+=4;for(const S of je.strings){const T=s[S],C=T.length;f.setUint32(g,C),h.set(T,g+4),g+=4+C}if(f.setUint32(p(je,aa),g-p(je,aa)-4),!e)f.setUint32(g,0),g+=4;else{const S=e.byteLength;f.setUint32(g,S),bn(g+4+S<=c.byteLength,"FontInfo.write: Buffer overflow at systemFontInfo"),h.set(new Uint8Array(e),g+4),g+=4+S}if(!n)f.setUint32(g,0),g+=4;else{const S=n.byteLength;f.setUint32(g,S),bn(g+4+S<=c.byteLength,"FontInfo.write: Buffer overflow at cssFontInfo"),h.set(new Uint8Array(n),g+4),g+=4+S}return t.data===void 0?(f.setUint32(g,0),g+=4):(f.setUint32(g,t.data.length),h.set(t.data,g+4),g+=4+t.data.length),bn(g<=c.byteLength,"FontInfo.write: Buffer overflow"),c.transferToFixedLength(g)}};Fm=new WeakMap,Bm=new WeakMap,Om=new WeakMap,Um=new WeakMap,aa=new WeakMap,$u=new WeakMap,H2=new WeakMap,Jn=new WeakMap,Qi=new WeakSet,Ll=function(t){bn(t<je.bools.length,"Invalid boolean index");const e=Math.floor(t/4),n=t*2%8,r=p(this,Jn).getUint8(e)>>n&3;return r===0?void 0:r===2},L5=function(t){return bn(t<je.numbers.length,"Invalid number index"),p(this,Jn).getFloat64(p(je,Fm)+t*8)},Gv=function(t){bn(t<je.strings.length,"Invalid string index");let e=p(je,aa)+4;for(let s=0;s<t;s++)e+=p(this,Jn).getUint32(e)+4;const n=p(this,Jn).getUint32(e),r=new Uint8Array(n);return r.set(new Uint8Array(p(this,$u),e+4,n)),p(this,H2).decode(r)},Kt(je,"bools",["black","bold","disableFontFace","fontExtraProperties","isInvalidPDFjsFont","isType3Font","italic","missingFile","remeasure","vertical"]),Kt(je,"numbers",["ascent","defaultWidth","descent"]),Kt(je,"strings",["fallbackName","loadedName","mimetype","name"]),z(je,Fm,Math.ceil(je.bools.length*2/8)),z(je,Bm,p(je,Fm)+je.numbers.length*8),z(je,Om,p(je,Bm)+1+8),z(je,Um,p(je,Om)+1+48),z(je,aa,p(je,Um)+1+6);let SS=je;var q2,z2,G2,V2,Y2,$2,W2,X2;const yi=class yi{constructor(t){this.buffer=t,this.view=new DataView(t),this.data=new Uint8Array(t)}static write(t){let e,n=null,r=[],s=[],a=[],u=[],c=null,h=null;switch(t[0]){case"RadialAxial":e=t[1]==="axial"?1:2,n=t[2],a=t[3],e===1?r.push(...t[4],...t[5]):r.push(t[4][0],t[4][1],t[6],t[5][0],t[5][1],t[7]);break;case"Mesh":e=3,c=t[1],r=t[2],s=t[3],u=t[4]||[],n=t[6],h=t[7];break;default:throw new Error(`Unsupported pattern type: ${t[0]}`)}const f=Math.floor(r.length/2),g=Math.floor(s.length/3),m=a.length,y=u.length;let w=0;for(const F of u)w+=1,w=Math.ceil(w/4)*4,w+=4+F.coords.length*4,w+=4+F.colors.length*4,F.verticesPerRow!==void 0&&(w+=4);const S=20+f*8+g*3+m*8+(n?16:0)+(h?3:0)+w,T=new ArrayBuffer(S),C=new DataView(T),D=new Uint8Array(T);C.setUint8(p(yi,q2),e),C.setUint8(p(yi,z2),n?1:0),C.setUint8(p(yi,G2),h?1:0),C.setUint8(p(yi,V2),c),C.setUint32(p(yi,Y2),f,!0),C.setUint32(p(yi,$2),g,!0),C.setUint32(p(yi,W2),m,!0),C.setUint32(p(yi,X2),y,!0);let R=20;new Float32Array(T,R,f*2).set(r),R+=f*8,D.set(s,R),R+=g*3;for(const[F,q]of a)C.setFloat32(R,F,!0),R+=4,C.setUint32(R,parseInt(q.slice(1),16),!0),R+=4;if(n)for(const F of n)C.setFloat32(R,F,!0),R+=4;h&&(D.set(h,R),R+=3);for(let F=0;F<u.length;F++){const q=u[F];C.setUint8(R,q.type),R+=1,R=Math.ceil(R/4)*4,C.setUint32(R,q.coords.length,!0),R+=4,new Int32Array(T,R,q.coords.length).set(q.coords),R+=q.coords.length*4,C.setUint32(R,q.colors.length,!0),R+=4,new Int32Array(T,R,q.colors.length).set(q.colors),R+=q.colors.length*4,q.verticesPerRow!==void 0&&(C.setUint32(R,q.verticesPerRow,!0),R+=4)}return T}getIR(){const t=this.view,e=this.data[p(yi,q2)],n=!!this.data[p(yi,z2)],r=!!this.data[p(yi,G2)],s=t.getUint32(p(yi,Y2),!0),a=t.getUint32(p(yi,$2),!0),u=t.getUint32(p(yi,W2),!0),c=t.getUint32(p(yi,X2),!0);let h=20;const f=new Float32Array(this.buffer,h,s*2);h+=s*8;const g=new Uint8Array(this.buffer,h,a*3);h+=a*3;const m=[];for(let T=0;T<u;++T){const C=t.getFloat32(h,!0);h+=4;const D=t.getUint32(h,!0);h+=4,m.push([C,`#${D.toString(16).padStart(6,"0")}`])}let y=null;if(n){y=[];for(let T=0;T<4;++T)y.push(t.getFloat32(h,!0)),h+=4}let w=null;r&&(w=new Uint8Array(this.buffer,h,3),h+=3);const S=[];for(let T=0;T<c;++T){const C=t.getUint8(h);h+=1,h=Math.ceil(h/4)*4;const D=t.getUint32(h,!0);h+=4;const R=new Int32Array(this.buffer,h,D);h+=D*4;const I=t.getUint32(h,!0);h+=4;const F=new Int32Array(this.buffer,h,I);h+=I*4;const q={type:C,coords:R,colors:F};C===nS.LATTICE&&(q.verticesPerRow=t.getUint32(h,!0),h+=4),S.push(q)}if(e===1)return["RadialAxial","axial",y,m,Array.from(f.slice(0,2)),Array.from(f.slice(2,4)),null,null];if(e===2)return["RadialAxial","radial",y,m,[f[0],f[1]],[f[3],f[4]],f[2],f[5]];if(e===3){const T=this.data[p(yi,V2)];let C=null;if(f.length>0){let D=f[0],R=f[0],I=f[1],F=f[1];for(let q=0;q<f.length;q+=2){const U=f[q],V=f[q+1];D=D>U?U:D,I=I>V?V:I,R=R<U?U:R,F=F<V?V:F}C=[D,I,R,F]}return["Mesh",T,f,g,S,C,y,w]}throw new Error(`Unsupported pattern kind: ${e}`)}};q2=new WeakMap,z2=new WeakMap,G2=new WeakMap,V2=new WeakMap,Y2=new WeakMap,$2=new WeakMap,W2=new WeakMap,X2=new WeakMap,z(yi,q2,0),z(yi,z2,1),z(yi,G2,2),z(yi,V2,3),z(yi,Y2,4),z(yi,$2,8),z(yi,W2,12),z(yi,X2,16);let ES=yi;function nq(i){if(i instanceof URL)return i.href;if(typeof i=="string"){if(io)return i;const t=URL.parse(i,window.location);if(t)return t.href}throw new Error("Invalid PDF url data: either string or URL-object is expected in the url property.")}function iq(i){if(io&&typeof Buffer<"u"&&i instanceof Buffer)throw new Error("Please provide binary data as `Uint8Array`, rather than `Buffer`.");if(i instanceof Uint8Array&&i.byteLength===i.buffer.byteLength)return i;if(typeof i=="string")return ix(i);if(i instanceof ArrayBuffer||ArrayBuffer.isView(i)||typeof i=="object"&&!isNaN(i==null?void 0:i.length))return new Uint8Array(i);throw new Error("Invalid PDF binary data: either TypedArray, string, or array-like object is expected in the data property.")}function o5(i){if(typeof i!="string")return null;if(i.endsWith("/"))return i;throw new Error(`Invalid factory url: "${i}" must include trailing slash.`)}const CS=i=>typeof i=="object"&&Number.isInteger(i==null?void 0:i.num)&&i.num>=0&&Number.isInteger(i==null?void 0:i.gen)&&i.gen>=0,rq=i=>typeof i=="object"&&typeof(i==null?void 0:i.name)=="string",sq=UH.bind(null,CS,rq);var nh,yA;class oq{constructor(){z(this,nh,new Map);z(this,yA,Promise.resolve())}postMessage(t,e){const n={data:structuredClone(t,e?{transfer:e}:null)};p(this,yA).then(()=>{for(const[r]of p(this,nh))r.call(this,n)})}addEventListener(t,e,n=null){let r=null;if((n==null?void 0:n.signal)instanceof AbortSignal){const{signal:s}=n;if(s.aborted){Ge("LoopbackPort - cannot use an `aborted` signal.");return}const a=()=>this.removeEventListener(t,e);r=()=>s.removeEventListener("abort",a),s.addEventListener("abort",a)}p(this,nh).set(e,r)}removeEventListener(t,e){const n=p(this,nh).get(e);n==null||n(),p(this,nh).delete(e)}terminate(){for(const[,t]of p(this,nh))t==null||t();p(this,nh).clear()}}nh=new WeakMap,yA=new WeakMap;const a5={DATA:1,ERROR:2},mr={CANCEL:1,CANCEL_COMPLETE:2,CLOSE:3,ENQUEUE:4,ERROR:5,PULL:6,PULL_COMPLETE:7,START_COMPLETE:8};function V6(){}function Mo(i){if(i instanceof Cd||i instanceof iS||i instanceof F6||i instanceof Jb||i instanceof bw)return i;switch(i instanceof Error||typeof i=="object"&&i!==null||ui('wrapReason: Expected "reason" to be a (possibly cloned) Error.'),i.name){case"AbortException":return new Cd(i.message);case"InvalidPDFException":return new iS(i.message);case"PasswordException":return new F6(i.message,i.code);case"ResponseException":return new Jb(i.message,i.status,i.missing);case"UnknownErrorException":return new bw(i.message,i.details)}return new bw(i.message,i.toString())}var Hm,sl,vD,yD,xD,M5;class Vv{constructor(t,e,n){z(this,sl);z(this,Hm,new AbortController);this.sourceName=t,this.targetName=e,this.comObj=n,this.callbackId=1,this.streamId=1,this.streamSinks=Object.create(null),this.streamControllers=Object.create(null),this.callbackCapabilities=Object.create(null),this.actionHandler=Object.create(null),n.addEventListener("message",$(this,sl,vD).bind(this),{signal:p(this,Hm).signal})}on(t,e){const n=this.actionHandler;if(n[t])throw new Error(`There is already an actionName called "${t}"`);n[t]=e}send(t,e,n){this.comObj.postMessage({sourceName:this.sourceName,targetName:this.targetName,action:t,data:e},n)}sendWithPromise(t,e,n){const r=this.callbackId++,s=Promise.withResolvers();this.callbackCapabilities[r]=s;try{this.comObj.postMessage({sourceName:this.sourceName,targetName:this.targetName,action:t,callbackId:r,data:e},n)}catch(a){s.reject(a)}return s.promise}sendWithStream(t,e,n,r){const s=this.streamId++,a=this.sourceName,u=this.targetName,c=this.comObj;return new ReadableStream({start:h=>{const f=Promise.withResolvers();return this.streamControllers[s]={controller:h,startCall:f,pullCall:null,cancelCall:null,isClosed:!1},c.postMessage({sourceName:a,targetName:u,action:t,streamId:s,data:e,desiredSize:h.desiredSize},r),f.promise},pull:h=>{const f=Promise.withResolvers();return this.streamControllers[s].pullCall=f,c.postMessage({sourceName:a,targetName:u,stream:mr.PULL,streamId:s,desiredSize:h.desiredSize}),f.promise},cancel:h=>{bn(h instanceof Error,"cancel must have a valid reason");const f=Promise.withResolvers();return this.streamControllers[s].cancelCall=f,this.streamControllers[s].isClosed=!0,c.postMessage({sourceName:a,targetName:u,stream:mr.CANCEL,streamId:s,reason:Mo(h)}),f.promise}},n)}destroy(){var t;(t=p(this,Hm))==null||t.abort(),k(this,Hm,null)}}Hm=new WeakMap,sl=new WeakSet,vD=function({data:t}){if(t.targetName!==this.sourceName)return;if(t.stream){$(this,sl,xD).call(this,t);return}if(t.callback){const n=t.callbackId,r=this.callbackCapabilities[n];if(!r)throw new Error(`Cannot resolve callback ${n}`);if(delete this.callbackCapabilities[n],t.callback===a5.DATA)r.resolve(t.data);else if(t.callback===a5.ERROR)r.reject(Mo(t.reason));else throw new Error("Unexpected callback case");return}const e=this.actionHandler[t.action];if(!e)throw new Error(`Unknown action from worker: ${t.action}`);if(t.callbackId){const n=this.sourceName,r=t.sourceName,s=this.comObj;Promise.try(e,t.data).then(function(a){s.postMessage({sourceName:n,targetName:r,callback:a5.DATA,callbackId:t.callbackId,data:a})},function(a){s.postMessage({sourceName:n,targetName:r,callback:a5.ERROR,callbackId:t.callbackId,reason:Mo(a)})});return}if(t.streamId){$(this,sl,yD).call(this,t);return}e(t.data)},yD=function(t){const e=t.streamId,n=this.sourceName,r=t.sourceName,s=this.comObj,a=this,u=this.actionHandler[t.action],c={enqueue(h,f=1,g){if(this.isCancelled)return;const m=this.desiredSize;this.desiredSize-=f,m>0&&this.desiredSize<=0&&(this.sinkCapability=Promise.withResolvers(),this.ready=this.sinkCapability.promise),s.postMessage({sourceName:n,targetName:r,stream:mr.ENQUEUE,streamId:e,chunk:h},g)},close(){this.isCancelled||(this.isCancelled=!0,s.postMessage({sourceName:n,targetName:r,stream:mr.CLOSE,streamId:e}),delete a.streamSinks[e])},error(h){bn(h instanceof Error,"error must have a valid reason"),!this.isCancelled&&(this.isCancelled=!0,s.postMessage({sourceName:n,targetName:r,stream:mr.ERROR,streamId:e,reason:Mo(h)}))},sinkCapability:Promise.withResolvers(),onPull:null,onCancel:null,isCancelled:!1,desiredSize:t.desiredSize,ready:null};c.sinkCapability.resolve(),c.ready=c.sinkCapability.promise,this.streamSinks[e]=c,Promise.try(u,t.data,c).then(function(){s.postMessage({sourceName:n,targetName:r,stream:mr.START_COMPLETE,streamId:e,success:!0})},function(h){s.postMessage({sourceName:n,targetName:r,stream:mr.START_COMPLETE,streamId:e,reason:Mo(h)})})},xD=function(t){const e=t.streamId,n=this.sourceName,r=t.sourceName,s=this.comObj,a=this.streamControllers[e],u=this.streamSinks[e];switch(t.stream){case mr.START_COMPLETE:t.success?a.startCall.resolve():a.startCall.reject(Mo(t.reason));break;case mr.PULL_COMPLETE:t.success?a.pullCall.resolve():a.pullCall.reject(Mo(t.reason));break;case mr.PULL:if(!u){s.postMessage({sourceName:n,targetName:r,stream:mr.PULL_COMPLETE,streamId:e,success:!0});break}u.desiredSize<=0&&t.desiredSize>0&&u.sinkCapability.resolve(),u.desiredSize=t.desiredSize,Promise.try(u.onPull||V6).then(function(){s.postMessage({sourceName:n,targetName:r,stream:mr.PULL_COMPLETE,streamId:e,success:!0})},function(h){s.postMessage({sourceName:n,targetName:r,stream:mr.PULL_COMPLETE,streamId:e,reason:Mo(h)})});break;case mr.ENQUEUE:if(bn(a,"enqueue should have stream controller"),a.isClosed)break;a.controller.enqueue(t.chunk);break;case mr.CLOSE:if(bn(a,"close should have stream controller"),a.isClosed)break;a.isClosed=!0,a.controller.close(),$(this,sl,M5).call(this,a,e);break;case mr.ERROR:bn(a,"error should have stream controller"),a.controller.error(Mo(t.reason)),$(this,sl,M5).call(this,a,e);break;case mr.CANCEL_COMPLETE:t.success?a.cancelCall.resolve():a.cancelCall.reject(Mo(t.reason)),$(this,sl,M5).call(this,a,e);break;case mr.CANCEL:if(!u)break;const c=Mo(t.reason);Promise.try(u.onCancel||V6,c).then(function(){s.postMessage({sourceName:n,targetName:r,stream:mr.CANCEL_COMPLETE,streamId:e,success:!0})},function(h){s.postMessage({sourceName:n,targetName:r,stream:mr.CANCEL_COMPLETE,streamId:e,reason:Mo(h)})}),u.sinkCapability.reject(c),u.isCancelled=!0,delete this.streamSinks[e];break;default:throw new Error("Unexpected stream case")}},M5=async function(t,e){var n,r,s;await Promise.allSettled([(n=t.startCall)==null?void 0:n.promise,(r=t.pullCall)==null?void 0:r.promise,(s=t.cancelCall)==null?void 0:s.promise]),delete this.streamControllers[e]};var j2;class bD{constructor({enableHWA:t=!1}){z(this,j2,!1);k(this,j2,t)}create(t,e){if(t<=0||e<=0)throw new Error("Invalid canvas size");const n=this._createCanvas(t,e);return{canvas:n,context:n.getContext("2d",{willReadFrequently:!p(this,j2)})}}reset(t,e,n){if(!t.canvas)throw new Error("Canvas is not specified");if(e<=0||n<=0)throw new Error("Invalid canvas size");t.canvas.width=e,t.canvas.height=n}destroy(t){if(!t.canvas)throw new Error("Canvas is not specified");t.canvas.width=0,t.canvas.height=0,t.canvas=null,t.context=null}_createCanvas(t,e){ui("Abstract method `_createCanvas` called.")}}j2=new WeakMap;class aq extends bD{constructor({ownerDocument:t=globalThis.document,enableHWA:e=!1}){super({enableHWA:e}),this._document=t}_createCanvas(t,e){const n=this._document.createElement("canvas");return n.width=t,n.height=e,n}}class AD{constructor({baseUrl:t=null,isCompressed:e=!0}){this.baseUrl=t,this.isCompressed=e}async fetch({name:t}){if(!this.baseUrl)throw new Error("Ensure that the `cMapUrl` and `cMapPacked` API parameters are provided.");if(!t)throw new Error("CMap name must be specified.");const e=this.baseUrl+t+(this.isCompressed?".bcmap":"");return this._fetch(e).then(n=>({cMapData:n,isCompressed:this.isCompressed})).catch(n=>{throw new Error(`Unable to load ${this.isCompressed?"binary ":""}CMap at: ${e}`)})}async _fetch(t){ui("Abstract method `_fetch` called.")}}class Y6 extends AD{async _fetch(t){const e=await rx(t,this.isCompressed?"arraybuffer":"text");return e instanceof ArrayBuffer?new Uint8Array(e):ix(e)}}class _D{addFilter(t){return"none"}addHCMFilter(t,e){return"none"}addAlphaFilter(t){return"none"}addLuminosityFilter(t){return"none"}addHighlightHCMFilter(t,e,n,r,s){return"none"}destroy(t=!1){}}var z0,qm,ih,rh,Bs,G0,V0,fe,Is,Yv,qg,I5,zg,wD,TS,Gg,$v,Wv,NS,Xv;class lq extends _D{constructor({docId:e,ownerDocument:n=globalThis.document}){super();z(this,fe);z(this,z0);z(this,qm);z(this,ih);z(this,rh);z(this,Bs);z(this,G0);z(this,V0,0);k(this,rh,e),k(this,Bs,n)}addFilter(e){if(!e)return"none";let n=p(this,fe,Is).get(e);if(n)return n;const[r,s,a]=$(this,fe,I5).call(this,e),u=e.length===1?r:`${r}${s}${a}`;if(n=p(this,fe,Is).get(u),n)return p(this,fe,Is).set(e,n),n;const c=`g_${p(this,rh)}_transfer_map_${Nr(this,V0)._++}`,h=$(this,fe,zg).call(this,c);p(this,fe,Is).set(e,h),p(this,fe,Is).set(u,h);const f=$(this,fe,Gg).call(this,c);return $(this,fe,Wv).call(this,r,s,a,f),h}addHCMFilter(e,n){var w;const r=`${e}-${n}`,s="base";let a=p(this,fe,Yv).get(s);if((a==null?void 0:a.key)===r||(a?((w=a.filter)==null||w.remove(),a.key=r,a.url="none",a.filter=null):(a={key:r,url:"none",filter:null},p(this,fe,Yv).set(s,a)),!e||!n))return a.url;const u=$(this,fe,Xv).call(this,e);e=ge.makeHexColor(...u);const c=$(this,fe,Xv).call(this,n);if(n=ge.makeHexColor(...c),p(this,fe,qg).style.color="",e==="#000000"&&n==="#ffffff"||e===n)return a.url;const h=new Array(256);for(let S=0;S<=255;S++){const T=S/255;h[S]=T<=.03928?T/12.92:((T+.055)/1.055)**2.4}const f=h.join(","),g=`g_${p(this,rh)}_hcm_filter`,m=a.filter=$(this,fe,Gg).call(this,g);$(this,fe,Wv).call(this,f,f,f,m),$(this,fe,TS).call(this,m);const y=(S,T)=>{const C=u[S]/255,D=c[S]/255,R=new Array(T+1);for(let I=0;I<=T;I++)R[I]=C+I/T*(D-C);return R.join(",")};return $(this,fe,Wv).call(this,y(0,5),y(1,5),y(2,5),m),a.url=$(this,fe,zg).call(this,g),a.url}addAlphaFilter(e){let n=p(this,fe,Is).get(e);if(n)return n;const[r]=$(this,fe,I5).call(this,[e]),s=`alpha_${r}`;if(n=p(this,fe,Is).get(s),n)return p(this,fe,Is).set(e,n),n;const a=`g_${p(this,rh)}_alpha_map_${Nr(this,V0)._++}`,u=$(this,fe,zg).call(this,a);p(this,fe,Is).set(e,u),p(this,fe,Is).set(s,u);const c=$(this,fe,Gg).call(this,a);return $(this,fe,NS).call(this,r,c),u}addLuminosityFilter(e){let n=p(this,fe,Is).get(e||"luminosity");if(n)return n;let r,s;if(e?([r]=$(this,fe,I5).call(this,[e]),s=`luminosity_${r}`):s="luminosity",n=p(this,fe,Is).get(s),n)return p(this,fe,Is).set(e,n),n;const a=`g_${p(this,rh)}_luminosity_map_${Nr(this,V0)._++}`,u=$(this,fe,zg).call(this,a);p(this,fe,Is).set(e,u),p(this,fe,Is).set(s,u);const c=$(this,fe,Gg).call(this,a);return $(this,fe,wD).call(this,c),e&&$(this,fe,NS).call(this,r,c),u}addHighlightHCMFilter(e,n,r,s,a){var D;const u=`${n}-${r}-${s}-${a}`;let c=p(this,fe,Yv).get(e);if((c==null?void 0:c.key)===u||(c?((D=c.filter)==null||D.remove(),c.key=u,c.url="none",c.filter=null):(c={key:u,url:"none",filter:null},p(this,fe,Yv).set(e,c)),!n||!r))return c.url;const[h,f]=[n,r].map($(this,fe,Xv).bind(this));let g=Math.round(.2126*h[0]+.7152*h[1]+.0722*h[2]),m=Math.round(.2126*f[0]+.7152*f[1]+.0722*f[2]),[y,w]=[s,a].map($(this,fe,Xv).bind(this));m<g&&([g,m,y,w]=[m,g,w,y]),p(this,fe,qg).style.color="";const S=(R,I,F)=>{const q=new Array(256),U=(m-g)/F,V=R/255,tt=(I-R)/(255*F);let J=0;for(let O=0;O<=F;O++){const G=Math.round(g+O*U),et=V+O*tt;for(let st=J;st<=G;st++)q[st]=et;J=G+1}for(let O=J;O<256;O++)q[O]=q[J-1];return q.join(",")},T=`g_${p(this,rh)}_hcm_${e}_filter`,C=c.filter=$(this,fe,Gg).call(this,T);return $(this,fe,TS).call(this,C),$(this,fe,Wv).call(this,S(y[0],w[0],5),S(y[1],w[1],5),S(y[2],w[2],5),C),c.url=$(this,fe,zg).call(this,T),c.url}destroy(e=!1){var n,r,s,a;e&&((n=p(this,G0))!=null&&n.size)||((r=p(this,ih))==null||r.parentNode.parentNode.remove(),k(this,ih,null),(s=p(this,qm))==null||s.clear(),k(this,qm,null),(a=p(this,G0))==null||a.clear(),k(this,G0,null),k(this,V0,0))}}z0=new WeakMap,qm=new WeakMap,ih=new WeakMap,rh=new WeakMap,Bs=new WeakMap,G0=new WeakMap,V0=new WeakMap,fe=new WeakSet,Is=function(){return p(this,qm)||k(this,qm,new Map)},Yv=function(){return p(this,G0)||k(this,G0,new Map)},qg=function(){if(!p(this,ih)){const e=p(this,Bs).createElement("div"),{style:n}=e;n.visibility="hidden",n.contain="strict",n.width=n.height=0,n.position="absolute",n.top=n.left=0,n.zIndex=-1;const r=p(this,Bs).createElementNS(Hc,"svg");r.setAttribute("width",0),r.setAttribute("height",0),k(this,ih,p(this,Bs).createElementNS(Hc,"defs")),e.append(r),r.append(p(this,ih)),p(this,Bs).body.append(e)}return p(this,ih)},I5=function(e){if(e.length===1){const h=e[0],f=new Array(256);for(let m=0;m<256;m++)f[m]=h[m]/255;const g=f.join(",");return[g,g,g]}const[n,r,s]=e,a=new Array(256),u=new Array(256),c=new Array(256);for(let h=0;h<256;h++)a[h]=n[h]/255,u[h]=r[h]/255,c[h]=s[h]/255;return[a.join(","),u.join(","),c.join(",")]},zg=function(e){if(p(this,z0)===void 0){k(this,z0,"");const n=p(this,Bs).URL;n!==p(this,Bs).baseURI&&(zA(n)?Ge('#createUrl: ignore "data:"-URL for performance reasons.'):k(this,z0,DR(n,"")))}return`url(${p(this,z0)}#${e})`},wD=function(e){const n=p(this,Bs).createElementNS(Hc,"feColorMatrix");n.setAttribute("type","matrix"),n.setAttribute("values","0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0.3 0.59 0.11 0 0"),e.append(n)},TS=function(e){const n=p(this,Bs).createElementNS(Hc,"feColorMatrix");n.setAttribute("type","matrix"),n.setAttribute("values","0.2126 0.7152 0.0722 0 0 0.2126 0.7152 0.0722 0 0 0.2126 0.7152 0.0722 0 0 0 0 0 1 0"),e.append(n)},Gg=function(e){const n=p(this,Bs).createElementNS(Hc,"filter");return n.setAttribute("color-interpolation-filters","sRGB"),n.setAttribute("id",e),p(this,fe,qg).append(n),n},$v=function(e,n,r){const s=p(this,Bs).createElementNS(Hc,n);s.setAttribute("type","discrete"),s.setAttribute("tableValues",r),e.append(s)},Wv=function(e,n,r,s){const a=p(this,Bs).createElementNS(Hc,"feComponentTransfer");s.append(a),$(this,fe,$v).call(this,a,"feFuncR",e),$(this,fe,$v).call(this,a,"feFuncG",n),$(this,fe,$v).call(this,a,"feFuncB",r)},NS=function(e,n){const r=p(this,Bs).createElementNS(Hc,"feComponentTransfer");n.append(r),$(this,fe,$v).call(this,r,"feFuncA",e)},Xv=function(e){return p(this,fe,qg).style.color=e,ox(getComputedStyle(p(this,fe,qg)).getPropertyValue("color"))};class SD{constructor({baseUrl:t=null}){this.baseUrl=t}async fetch({filename:t}){if(!this.baseUrl)throw new Error("Ensure that the `standardFontDataUrl` API parameter is provided.");if(!t)throw new Error("Font filename must be specified.");const e=`${this.baseUrl}${t}`;return this._fetch(e).catch(n=>{throw new Error(`Unable to load font data at: ${e}`)})}async _fetch(t){ui("Abstract method `_fetch` called.")}}class $6 extends SD{async _fetch(t){const e=await rx(t,"arraybuffer");return new Uint8Array(e)}}class ED{constructor({baseUrl:t=null}){this.baseUrl=t}async fetch({filename:t}){if(!this.baseUrl)throw new Error("Ensure that the `wasmUrl` API parameter is provided.");if(!t)throw new Error("Wasm filename must be specified.");const e=`${this.baseUrl}${t}`;return this._fetch(e).catch(n=>{throw new Error(`Unable to load wasm data at: ${e}`)})}async _fetch(t){ui("Abstract method `_fetch` called.")}}class W6 extends ED{async _fetch(t){const e=await rx(t,"arraybuffer");return new Uint8Array(e)}}io&&Ge("Please use the `legacy` build in Node.js environments.");async function aC(i){const e=await process.getBuiltinModule("fs").promises.readFile(i);return new Uint8Array(e)}class uq extends _D{}class cq extends bD{_createCanvas(t,e){return process.getBuiltinModule("module").createRequire(import.meta.url)("@napi-rs/canvas").createCanvas(t,e)}}class hq extends AD{async _fetch(t){return aC(t)}}class fq extends SD{async _fetch(t){return aC(t)}}class dq extends ED{async _fetch(t){return aC(t)}}const Pg="__forcedDependency",{floor:X6,ceil:j6}=Math;function l5(i,t,e,n,r,s){i[t*4+0]=Math.min(i[t*4+0],e),i[t*4+1]=Math.min(i[t*4+1],n),i[t*4+2]=Math.max(i[t*4+2],r),i[t*4+3]=Math.max(i[t*4+3],s)}const RS=new Uint32Array(new Uint8Array([255,255,0,0]).buffer)[0];var zm,Qf;class pq{constructor(t,e){z(this,zm);z(this,Qf);k(this,zm,t),k(this,Qf,e)}get length(){return p(this,zm).length}isEmpty(t){return p(this,zm)[t]===RS}minX(t){return p(this,Qf)[t*4+0]/256}minY(t){return p(this,Qf)[t*4+1]/256}maxX(t){return(p(this,Qf)[t*4+2]+1)/256}maxY(t){return(p(this,Qf)[t*4+3]+1)/256}}zm=new WeakMap,Qf=new WeakMap;const u5=(i,t)=>{if(!i)return;let e=i.get(t);return e||(e={dependencies:new Set,isRenderingOperation:!1},i.set(t,e)),e};var ko,Fo,Y0,Bl,$0,sh,zn,Kn,oh,Bo,J2,Gm,W0,X0,ah,Os,Wu,K2,DS;class gq{constructor(t,e,n=!1){z(this,K2);z(this,ko,{__proto__:null});z(this,Fo,{__proto__:null,transform:[],moveText:[],sameLineText:[],[Pg]:[]});z(this,Y0,new Map);z(this,Bl,[]);z(this,$0,[]);z(this,sh,[[1,0,0,1,0,0]]);z(this,zn,[-1/0,-1/0,1/0,1/0]);z(this,Kn,new Float64Array([1/0,1/0,-1/0,-1/0]));z(this,oh,-1);z(this,Bo,new Set);z(this,J2,new Map);z(this,Gm,new Map);z(this,W0);z(this,X0);z(this,ah);z(this,Os);z(this,Wu);k(this,W0,t.width),k(this,X0,t.height),$(this,K2,DS).call(this,e),n&&k(this,Wu,new Map)}growOperationsCount(t){t>=p(this,Os).length&&$(this,K2,DS).call(this,t,p(this,Os))}save(t){return k(this,ko,{__proto__:p(this,ko)}),k(this,Fo,{__proto__:p(this,Fo),transform:{__proto__:p(this,Fo).transform},moveText:{__proto__:p(this,Fo).moveText},sameLineText:{__proto__:p(this,Fo).sameLineText},[Pg]:{__proto__:p(this,Fo)[Pg]}}),k(this,zn,{__proto__:p(this,zn)}),p(this,Bl).push(t),this}restore(t){var r;const e=Object.getPrototypeOf(p(this,ko));if(e===null)return this;k(this,ko,e),k(this,Fo,Object.getPrototypeOf(p(this,Fo))),k(this,zn,Object.getPrototypeOf(p(this,zn)));const n=p(this,Bl).pop();return n!==void 0&&((r=u5(p(this,Wu),t))==null||r.dependencies.add(n),p(this,Os)[t]=p(this,Os)[n]),this}recordOpenMarker(t){return p(this,Bl).push(t),this}getOpenMarker(){return p(this,Bl).length===0?null:p(this,Bl).at(-1)}recordCloseMarker(t){var n;const e=p(this,Bl).pop();return e!==void 0&&((n=u5(p(this,Wu),t))==null||n.dependencies.add(e),p(this,Os)[t]=p(this,Os)[e]),this}beginMarkedContent(t){return p(this,$0).push(t),this}endMarkedContent(t){var n;const e=p(this,$0).pop();return e!==void 0&&((n=u5(p(this,Wu),t))==null||n.dependencies.add(e),p(this,Os)[t]=p(this,Os)[e]),this}pushBaseTransform(t){return p(this,sh).push(ge.multiplyByDOMMatrix(p(this,sh).at(-1),t.getTransform())),this}popBaseTransform(){return p(this,sh).length>1&&p(this,sh).pop(),this}recordSimpleData(t,e){return p(this,ko)[t]=e,this}recordIncrementalData(t,e){return p(this,Fo)[t].push(e),this}resetIncrementalData(t,e){return p(this,Fo)[t].length=0,this}recordNamedData(t,e){return p(this,Y0).set(t,e),this}recordSimpleDataFromNamed(t,e,n){p(this,ko)[t]=p(this,Y0).get(e)??n}recordFutureForcedDependency(t,e){return this.recordIncrementalData(Pg,e),this}inheritSimpleDataAsFutureForcedDependencies(t){for(const e of t)e in p(this,ko)&&this.recordFutureForcedDependency(e,p(this,ko)[e]);return this}inheritPendingDependenciesAsFutureForcedDependencies(){for(const t of p(this,Bo))this.recordFutureForcedDependency(Pg,t);return this}resetBBox(t){return p(this,oh)!==t&&(k(this,oh,t),p(this,Kn)[0]=1/0,p(this,Kn)[1]=1/0,p(this,Kn)[2]=-1/0,p(this,Kn)[3]=-1/0),this}recordClipBox(t,e,n,r,s,a){const u=ge.multiplyByDOMMatrix(p(this,sh).at(-1),e.getTransform()),c=[1/0,1/0,-1/0,-1/0];ge.axialAlignedBoundingBox([n,s,r,a],u,c);const h=ge.intersect(p(this,zn),c);return h?(p(this,zn)[0]=h[0],p(this,zn)[1]=h[1],p(this,zn)[2]=h[2],p(this,zn)[3]=h[3]):(p(this,zn)[0]=p(this,zn)[1]=1/0,p(this,zn)[2]=p(this,zn)[3]=-1/0),this}recordBBox(t,e,n,r,s,a){const u=p(this,zn);if(u[0]===1/0)return this;const c=ge.multiplyByDOMMatrix(p(this,sh).at(-1),e.getTransform());if(u[0]===-1/0)return ge.axialAlignedBoundingBox([n,s,r,a],c,p(this,Kn)),this;const h=[1/0,1/0,-1/0,-1/0];return ge.axialAlignedBoundingBox([n,s,r,a],c,h),p(this,Kn)[0]=Math.min(p(this,Kn)[0],Math.max(h[0],u[0])),p(this,Kn)[1]=Math.min(p(this,Kn)[1],Math.max(h[1],u[1])),p(this,Kn)[2]=Math.max(p(this,Kn)[2],Math.min(h[2],u[2])),p(this,Kn)[3]=Math.max(p(this,Kn)[3],Math.min(h[3],u[3])),this}recordCharacterBBox(t,e,n,r=1,s=0,a=0,u){const c=n.bbox;let h,f;if(c&&(h=c[2]!==c[0]&&c[3]!==c[1]&&p(this,Gm).get(n),h!==!1&&(f=[0,0,0,0],ge.axialAlignedBoundingBox(c,n.fontMatrix,f),(r!==1||s!==0||a!==0)&&ge.scaleMinMax([r,0,0,-r,s,a],f),h)))return this.recordBBox(t,e,f[0],f[2],f[1],f[3]);if(!u)return this.recordFullPageBBox(t);const g=u();return c&&f&&h===void 0&&(h=f[0]<=s-g.actualBoundingBoxLeft&&f[2]>=s+g.actualBoundingBoxRight&&f[1]<=a-g.actualBoundingBoxAscent&&f[3]>=a+g.actualBoundingBoxDescent,p(this,Gm).set(n,h),h)?this.recordBBox(t,e,f[0],f[2],f[1],f[3]):this.recordBBox(t,e,s-g.actualBoundingBoxLeft,s+g.actualBoundingBoxRight,a-g.actualBoundingBoxAscent,a+g.actualBoundingBoxDescent)}recordFullPageBBox(t){return p(this,Kn)[0]=Math.max(0,p(this,zn)[0]),p(this,Kn)[1]=Math.max(0,p(this,zn)[1]),p(this,Kn)[2]=Math.min(p(this,W0),p(this,zn)[2]),p(this,Kn)[3]=Math.min(p(this,X0),p(this,zn)[3]),this}getSimpleIndex(t){return p(this,ko)[t]}recordDependencies(t,e){const n=p(this,Bo),r=p(this,ko),s=p(this,Fo);for(const a of e)a in p(this,ko)?n.add(r[a]):a in s&&s[a].forEach(n.add,n);return this}recordNamedDependency(t,e){return p(this,Y0).has(e)&&p(this,Bo).add(p(this,Y0).get(e)),this}recordOperation(t,e=!1){if(this.recordDependencies(t,[Pg]),p(this,Wu)){const n=u5(p(this,Wu),t),{dependencies:r}=n;p(this,Bo).forEach(r.add,r),p(this,Bl).forEach(r.add,r),p(this,$0).forEach(r.add,r),r.delete(t),n.isRenderingOperation=!0}if(p(this,oh)===t){const n=X6(p(this,Kn)[0]*256/p(this,W0)),r=X6(p(this,Kn)[1]*256/p(this,X0)),s=j6(p(this,Kn)[2]*256/p(this,W0)),a=j6(p(this,Kn)[3]*256/p(this,X0));l5(p(this,ah),t,n,r,s,a);for(const u of p(this,Bo))u!==t&&l5(p(this,ah),u,n,r,s,a);for(const u of p(this,Bl))u!==t&&l5(p(this,ah),u,n,r,s,a);for(const u of p(this,$0))u!==t&&l5(p(this,ah),u,n,r,s,a);e||(p(this,Bo).clear(),k(this,oh,-1))}return this}recordShowTextOperation(t,e=!1){const n=Array.from(p(this,Bo));this.recordOperation(t,e),this.recordIncrementalData("sameLineText",t);for(const r of n)this.recordIncrementalData("sameLineText",r);return this}bboxToClipBoxDropOperation(t,e=!1){return p(this,oh)===t&&(k(this,oh,-1),p(this,zn)[0]=Math.max(p(this,zn)[0],p(this,Kn)[0]),p(this,zn)[1]=Math.max(p(this,zn)[1],p(this,Kn)[1]),p(this,zn)[2]=Math.min(p(this,zn)[2],p(this,Kn)[2]),p(this,zn)[3]=Math.min(p(this,zn)[3],p(this,Kn)[3]),e||p(this,Bo).clear()),this}_takePendingDependencies(){const t=p(this,Bo);return k(this,Bo,new Set),t}_extractOperation(t){const e=p(this,J2).get(t);return p(this,J2).delete(t),e}_pushPendingDependencies(t){for(const e of t)p(this,Bo).add(e)}take(){return p(this,Gm).clear(),new pq(p(this,Os),p(this,ah))}takeDebugMetadata(){return p(this,Wu)}}ko=new WeakMap,Fo=new WeakMap,Y0=new WeakMap,Bl=new WeakMap,$0=new WeakMap,sh=new WeakMap,zn=new WeakMap,Kn=new WeakMap,oh=new WeakMap,Bo=new WeakMap,J2=new WeakMap,Gm=new WeakMap,W0=new WeakMap,X0=new WeakMap,ah=new WeakMap,Os=new WeakMap,Wu=new WeakMap,K2=new WeakSet,DS=function(t,e){const n=new ArrayBuffer(t*4);k(this,ah,new Uint8ClampedArray(n)),k(this,Os,new Uint32Array(n)),e&&e.length>0?(p(this,Os).set(e),p(this,Os).fill(RS,e.length)):p(this,Os).fill(RS)};var oi,Xi,Ol,Vm,Ym;const bC=class bC{constructor(t,e,n){z(this,oi);z(this,Xi);z(this,Ol);z(this,Vm,0);z(this,Ym,0);if(t instanceof bC&&p(t,Ol)===!!n)return t;k(this,oi,t),k(this,Xi,e),k(this,Ol,!!n)}growOperationsCount(){throw new Error("Unreachable")}save(t){return Nr(this,Ym)._++,p(this,oi).save(p(this,Xi)),this}restore(t){return p(this,Ym)>0&&(p(this,oi).restore(p(this,Xi)),Nr(this,Ym)._--),this}recordOpenMarker(t){return Nr(this,Vm)._++,this}getOpenMarker(){return p(this,Vm)>0?p(this,Xi):p(this,oi).getOpenMarker()}recordCloseMarker(t){return Nr(this,Vm)._--,this}beginMarkedContent(t){return this}endMarkedContent(t){return this}pushBaseTransform(t){return p(this,oi).pushBaseTransform(t),this}popBaseTransform(){return p(this,oi).popBaseTransform(),this}recordSimpleData(t,e){return p(this,oi).recordSimpleData(t,p(this,Xi)),this}recordIncrementalData(t,e){return p(this,oi).recordIncrementalData(t,p(this,Xi)),this}resetIncrementalData(t,e){return p(this,oi).resetIncrementalData(t,p(this,Xi)),this}recordNamedData(t,e){return this}recordSimpleDataFromNamed(t,e,n){return p(this,oi).recordSimpleDataFromNamed(t,e,p(this,Xi)),this}recordFutureForcedDependency(t,e){return p(this,oi).recordFutureForcedDependency(t,p(this,Xi)),this}inheritSimpleDataAsFutureForcedDependencies(t){return p(this,oi).inheritSimpleDataAsFutureForcedDependencies(t),this}inheritPendingDependenciesAsFutureForcedDependencies(){return p(this,oi).inheritPendingDependenciesAsFutureForcedDependencies(),this}resetBBox(t){return p(this,Ol)||p(this,oi).resetBBox(p(this,Xi)),this}recordClipBox(t,e,n,r,s,a){return p(this,Ol)||p(this,oi).recordClipBox(p(this,Xi),e,n,r,s,a),this}recordBBox(t,e,n,r,s,a){return p(this,Ol)||p(this,oi).recordBBox(p(this,Xi),e,n,r,s,a),this}recordCharacterBBox(t,e,n,r,s,a,u){return p(this,Ol)||p(this,oi).recordCharacterBBox(p(this,Xi),e,n,r,s,a,u),this}recordFullPageBBox(t){return p(this,Ol)||p(this,oi).recordFullPageBBox(p(this,Xi)),this}getSimpleIndex(t){return p(this,oi).getSimpleIndex(t)}recordDependencies(t,e){return p(this,oi).recordDependencies(p(this,Xi),e),this}recordNamedDependency(t,e){return p(this,oi).recordNamedDependency(p(this,Xi),e),this}recordOperation(t){return p(this,oi).recordOperation(p(this,Xi),!0),this}recordShowTextOperation(t){return p(this,oi).recordShowTextOperation(p(this,Xi),!0),this}bboxToClipBoxDropOperation(t){return p(this,Ol)||p(this,oi).bboxToClipBoxDropOperation(p(this,Xi),!0),this}take(){throw new Error("Unreachable")}takeDebugMetadata(){throw new Error("Unreachable")}};oi=new WeakMap,Xi=new WeakMap,Ol=new WeakMap,Vm=new WeakMap,Ym=new WeakMap;let nA=bC;const Va={stroke:["path","transform","filter","strokeColor","strokeAlpha","lineWidth","lineCap","lineJoin","miterLimit","dash"],fill:["path","transform","filter","fillColor","fillAlpha","globalCompositeOperation","SMask"],imageXObject:["transform","SMask","filter","fillAlpha","strokeAlpha","globalCompositeOperation"],rawFillPath:["filter","fillColor","fillAlpha"],showText:["transform","leading","charSpacing","wordSpacing","hScale","textRise","moveText","textMatrix","font","fontObj","filter","fillColor","textRenderingMode","SMask","fillAlpha","strokeAlpha","globalCompositeOperation","sameLineText"],transform:["transform"],transformAndFill:["transform","fillColor"]},vs={FILL:"Fill",STROKE:"Stroke",SHADING:"Shading"};function LS(i,t){if(!t)return;const e=t[2]-t[0],n=t[3]-t[1],r=new Path2D;r.rect(t[0],t[1],e,n),i.clip(r)}class lC{isModifyingCurrentTransform(){return!1}getPattern(){ui("Abstract method `getPattern` called.")}}class mq extends lC{constructor(t){super(),this._type=t[1],this._bbox=t[2],this._colorStops=t[3],this._p0=t[4],this._p1=t[5],this._r0=t[6],this._r1=t[7],this.matrix=null}_createGradient(t){let e;this._type==="axial"?e=t.createLinearGradient(this._p0[0],this._p0[1],this._p1[0],this._p1[1]):this._type==="radial"&&(e=t.createRadialGradient(this._p0[0],this._p0[1],this._r0,this._p1[0],this._p1[1],this._r1));for(const n of this._colorStops)e.addColorStop(n[0],n[1]);return e}getPattern(t,e,n,r){let s;if(r===vs.STROKE||r===vs.FILL){const a=e.current.getClippedPathBoundingBox(r,Hi(t))||[0,0,0,0],u=Math.ceil(a[2]-a[0])||1,c=Math.ceil(a[3]-a[1])||1,h=e.cachedCanvases.getCanvas("pattern",u,c),f=h.context;f.clearRect(0,0,f.canvas.width,f.canvas.height),f.beginPath(),f.rect(0,0,f.canvas.width,f.canvas.height),f.translate(-a[0],-a[1]),n=ge.transform(n,[1,0,0,1,a[0],a[1]]),f.transform(...e.baseTransform),this.matrix&&f.transform(...this.matrix),LS(f,this._bbox),f.fillStyle=this._createGradient(f),f.fill(),s=t.createPattern(h.canvas,"no-repeat");const g=new DOMMatrix(n);s.setTransform(g)}else LS(t,this._bbox),s=this._createGradient(t);return s}}function ww(i,t,e,n,r,s,a,u){const c=t.coords,h=t.colors,f=i.data,g=i.width*4;let m;c[e+1]>c[n+1]&&(m=e,e=n,n=m,m=s,s=a,a=m),c[n+1]>c[r+1]&&(m=n,n=r,r=m,m=a,a=u,u=m),c[e+1]>c[n+1]&&(m=e,e=n,n=m,m=s,s=a,a=m);const y=(c[e]+t.offsetX)*t.scaleX,w=(c[e+1]+t.offsetY)*t.scaleY,S=(c[n]+t.offsetX)*t.scaleX,T=(c[n+1]+t.offsetY)*t.scaleY,C=(c[r]+t.offsetX)*t.scaleX,D=(c[r+1]+t.offsetY)*t.scaleY;if(w>=D)return;const R=h[s],I=h[s+1],F=h[s+2],q=h[a],U=h[a+1],V=h[a+2],tt=h[u],J=h[u+1],O=h[u+2],G=Math.round(w),et=Math.round(D);let st,pt,nt,at,ht,bt,St,K;for(let P=G;P<=et;P++){if(P<T){const mt=P<w?0:(w-P)/(w-T);st=y-(y-S)*mt,pt=R-(R-q)*mt,nt=I-(I-U)*mt,at=F-(F-V)*mt}else{let mt;P>D?mt=1:T===D?mt=0:mt=(T-P)/(T-D),st=S-(S-C)*mt,pt=q-(q-tt)*mt,nt=U-(U-J)*mt,at=V-(V-O)*mt}let Y;P<w?Y=0:P>D?Y=1:Y=(w-P)/(w-D),ht=y-(y-C)*Y,bt=R-(R-tt)*Y,St=I-(I-J)*Y,K=F-(F-O)*Y;const j=Math.round(Math.min(st,ht)),ut=Math.round(Math.max(st,ht));let ft=g*P+j*4;for(let mt=j;mt<=ut;mt++)Y=(st-mt)/(st-ht),Y<0?Y=0:Y>1&&(Y=1),f[ft++]=pt-(pt-bt)*Y|0,f[ft++]=nt-(nt-St)*Y|0,f[ft++]=at-(at-K)*Y|0,f[ft++]=255}}function vq(i,t,e){const n=t.coords,r=t.colors;let s,a;switch(t.type){case nS.LATTICE:const u=t.verticesPerRow,c=Math.floor(n.length/u)-1,h=u-1;for(s=0;s<c;s++){let f=s*u;for(let g=0;g<h;g++,f++)ww(i,e,n[f],n[f+1],n[f+u],r[f],r[f+1],r[f+u]),ww(i,e,n[f+u+1],n[f+1],n[f+u],r[f+u+1],r[f+1],r[f+u])}break;case nS.TRIANGLES:for(s=0,a=n.length;s<a;s+=3)ww(i,e,n[s],n[s+1],n[s+2],r[s],r[s+1],r[s+2]);break;default:throw new Error("illegal figure")}}class yq extends lC{constructor(t){super(),this._coords=t[2],this._colors=t[3],this._figures=t[4],this._bounds=t[5],this._bbox=t[6],this._background=t[7],this.matrix=null}_createMeshCanvas(t,e,n){const u=Math.floor(this._bounds[0]),c=Math.floor(this._bounds[1]),h=Math.ceil(this._bounds[2])-u,f=Math.ceil(this._bounds[3])-c,g=Math.min(Math.ceil(Math.abs(h*t[0]*1.1)),3e3),m=Math.min(Math.ceil(Math.abs(f*t[1]*1.1)),3e3),y=h/g,w=f/m,S={coords:this._coords,colors:this._colors,offsetX:-u,offsetY:-c,scaleX:1/y,scaleY:1/w},T=g+4,C=m+4,D=n.getCanvas("mesh",T,C),R=D.context,I=R.createImageData(g,m);if(e){const q=I.data;for(let U=0,V=q.length;U<V;U+=4)q[U]=e[0],q[U+1]=e[1],q[U+2]=e[2],q[U+3]=255}for(const q of this._figures)vq(I,q,S);return R.putImageData(I,2,2),{canvas:D.canvas,offsetX:u-2*y,offsetY:c-2*w,scaleX:y,scaleY:w}}isModifyingCurrentTransform(){return!0}getPattern(t,e,n,r){LS(t,this._bbox);const s=new Float32Array(2);if(r===vs.SHADING)ge.singularValueDecompose2dScale(Hi(t),s);else if(this.matrix){ge.singularValueDecompose2dScale(this.matrix,s);const[u,c]=s;ge.singularValueDecompose2dScale(e.baseTransform,s),s[0]*=u,s[1]*=c}else ge.singularValueDecompose2dScale(e.baseTransform,s);const a=this._createMeshCanvas(s,r===vs.SHADING?null:this._background,e.cachedCanvases);return r!==vs.SHADING&&(t.setTransform(...e.baseTransform),this.matrix&&t.transform(...this.matrix)),t.translate(a.offsetX,a.offsetY),t.scale(a.scaleX,a.scaleY),t.createPattern(a.canvas,"no-repeat")}}class xq extends lC{getPattern(){return"hotpink"}}function bq(i){switch(i[0]){case"RadialAxial":return new mq(i);case"Mesh":return new yq(i);case"Dummy":return new xq}throw new Error(`Unknown IR type: ${i[0]}`)}const J6={COLORED:1,UNCOLORED:2},xA=class xA{constructor(t,e,n,r){this.color=t[1],this.operatorList=t[2],this.matrix=t[3],this.bbox=t[4],this.xstep=t[5],this.ystep=t[6],this.paintType=t[7],this.tilingType=t[8],this.ctx=e,this.canvasGraphicsFactory=n,this.baseTransform=r}createPatternCanvas(t,e){var bt,St;const{bbox:n,operatorList:r,paintType:s,tilingType:a,color:u,canvasGraphicsFactory:c}=this;let{xstep:h,ystep:f}=this;h=Math.abs(h),f=Math.abs(f),qA("TilingType: "+a);const g=n[0],m=n[1],y=n[2],w=n[3],S=y-g,T=w-m,C=new Float32Array(2);ge.singularValueDecompose2dScale(this.matrix,C);const[D,R]=C;ge.singularValueDecompose2dScale(this.baseTransform,C);const I=D*C[0],F=R*C[1];let q=S,U=T,V=!1,tt=!1;const J=Math.ceil(h*I),O=Math.ceil(f*F),G=Math.ceil(S*I),et=Math.ceil(T*F);J>=G?q=h:V=!0,O>=et?U=f:tt=!0;const st=this.getSizeAndScale(q,this.ctx.canvas.width,I),pt=this.getSizeAndScale(U,this.ctx.canvas.height,F),nt=t.cachedCanvases.getCanvas("pattern",st.size,pt.size),at=nt.context,ht=c.createCanvasGraphics(at,e);if(ht.groupLevel=t.groupLevel,this.setFillAndStrokeStyleToContext(ht,s,u),at.translate(-st.scale*g,-pt.scale*m),ht.transform(0,st.scale,0,0,pt.scale,0,0),at.save(),(bt=ht.dependencyTracker)==null||bt.save(),this.clipBbox(ht,g,m,y,w),ht.baseTransform=Hi(ht.ctx),ht.executeOperatorList(r),ht.endDrawing(),(St=ht.dependencyTracker)==null||St.restore(),at.restore(),V||tt){const K=nt.canvas;V&&(q=h),tt&&(U=f);const P=this.getSizeAndScale(q,this.ctx.canvas.width,I),Y=this.getSizeAndScale(U,this.ctx.canvas.height,F),j=P.size,ut=Y.size,ft=t.cachedCanvases.getCanvas("pattern-workaround",j,ut),mt=ft.context,At=V?Math.floor(S/h):0,Tt=tt?Math.floor(T/f):0;for(let Xt=0;Xt<=At;Xt++)for(let $t=0;$t<=Tt;$t++)mt.drawImage(K,j*Xt,ut*$t,j,ut,0,0,j,ut);return{canvas:ft.canvas,scaleX:P.scale,scaleY:Y.scale,offsetX:g,offsetY:m}}return{canvas:nt.canvas,scaleX:st.scale,scaleY:pt.scale,offsetX:g,offsetY:m}}getSizeAndScale(t,e,n){const r=Math.max(xA.MAX_PATTERN_SIZE,e);let s=Math.ceil(t*n);return s>=r?s=r:n=s/t,{scale:n,size:s}}clipBbox(t,e,n,r,s){const a=r-e,u=s-n;t.ctx.rect(e,n,a,u),ge.axialAlignedBoundingBox([e,n,r,s],Hi(t.ctx),t.current.minMax),t.clip(),t.endPath()}setFillAndStrokeStyleToContext(t,e,n){const r=t.ctx,s=t.current;switch(e){case J6.COLORED:const{fillStyle:a,strokeStyle:u}=this.ctx;r.fillStyle=s.fillColor=a,r.strokeStyle=s.strokeColor=u;break;case J6.UNCOLORED:r.fillStyle=r.strokeStyle=n,s.fillColor=s.strokeColor=n;break;default:throw new IH(`Unsupported paint type: ${e}`)}}isModifyingCurrentTransform(){return!1}getPattern(t,e,n,r,s){let a=n;r!==vs.SHADING&&(a=ge.transform(a,e.baseTransform),this.matrix&&(a=ge.transform(a,this.matrix)));const u=this.createPatternCanvas(e,s);let c=new DOMMatrix(a);c=c.translate(u.offsetX,u.offsetY),c=c.scale(1/u.scaleX,1/u.scaleY);const h=t.createPattern(u.canvas,"repeat");return h.setTransform(c),h}};Kt(xA,"MAX_PATTERN_SIZE",3e3);let MS=xA;function Aq({src:i,srcPos:t=0,dest:e,width:n,height:r,nonBlackColor:s=4294967295,inverseDecode:a=!1}){const u=bs.isLittleEndian?4278190080:255,[c,h]=a?[s,u]:[u,s],f=n>>3,g=n&7,m=i.length;e=new Uint32Array(e.buffer);let y=0;for(let w=0;w<r;w++){for(const T=t+f;t<T;t++){const C=t<m?i[t]:255;e[y++]=C&128?h:c,e[y++]=C&64?h:c,e[y++]=C&32?h:c,e[y++]=C&16?h:c,e[y++]=C&8?h:c,e[y++]=C&4?h:c,e[y++]=C&2?h:c,e[y++]=C&1?h:c}if(g===0)continue;const S=t<m?i[t++]:255;for(let T=0;T<g;T++)e[y++]=S&1<<7-T?h:c}return{srcPos:t,destPos:y}}const K6=16,Q6=100,_q=15,Z6=10,qo=16,Sw=new DOMMatrix,wa=new Float32Array(2),Qg=new Float32Array([1/0,1/0,-1/0,-1/0]);function wq(i,t){if(i._removeMirroring)throw new Error("Context is already forwarding operations.");i.__originalSave=i.save,i.__originalRestore=i.restore,i.__originalRotate=i.rotate,i.__originalScale=i.scale,i.__originalTranslate=i.translate,i.__originalTransform=i.transform,i.__originalSetTransform=i.setTransform,i.__originalResetTransform=i.resetTransform,i.__originalClip=i.clip,i.__originalMoveTo=i.moveTo,i.__originalLineTo=i.lineTo,i.__originalBezierCurveTo=i.bezierCurveTo,i.__originalRect=i.rect,i.__originalClosePath=i.closePath,i.__originalBeginPath=i.beginPath,i._removeMirroring=()=>{i.save=i.__originalSave,i.restore=i.__originalRestore,i.rotate=i.__originalRotate,i.scale=i.__originalScale,i.translate=i.__originalTranslate,i.transform=i.__originalTransform,i.setTransform=i.__originalSetTransform,i.resetTransform=i.__originalResetTransform,i.clip=i.__originalClip,i.moveTo=i.__originalMoveTo,i.lineTo=i.__originalLineTo,i.bezierCurveTo=i.__originalBezierCurveTo,i.rect=i.__originalRect,i.closePath=i.__originalClosePath,i.beginPath=i.__originalBeginPath,delete i._removeMirroring},i.save=function(){t.save(),this.__originalSave()},i.restore=function(){t.restore(),this.__originalRestore()},i.translate=function(e,n){t.translate(e,n),this.__originalTranslate(e,n)},i.scale=function(e,n){t.scale(e,n),this.__originalScale(e,n)},i.transform=function(e,n,r,s,a,u){t.transform(e,n,r,s,a,u),this.__originalTransform(e,n,r,s,a,u)},i.setTransform=function(e,n,r,s,a,u){t.setTransform(e,n,r,s,a,u),this.__originalSetTransform(e,n,r,s,a,u)},i.resetTransform=function(){t.resetTransform(),this.__originalResetTransform()},i.rotate=function(e){t.rotate(e),this.__originalRotate(e)},i.clip=function(e){t.clip(e),this.__originalClip(e)},i.moveTo=function(e,n){t.moveTo(e,n),this.__originalMoveTo(e,n)},i.lineTo=function(e,n){t.lineTo(e,n),this.__originalLineTo(e,n)},i.bezierCurveTo=function(e,n,r,s,a,u){t.bezierCurveTo(e,n,r,s,a,u),this.__originalBezierCurveTo(e,n,r,s,a,u)},i.rect=function(e,n,r,s){t.rect(e,n,r,s),this.__originalRect(e,n,r,s)},i.closePath=function(){t.closePath(),this.__originalClosePath()},i.beginPath=function(){t.beginPath(),this.__originalBeginPath()}}class Sq{constructor(t){this.canvasFactory=t,this.cache=Object.create(null)}getCanvas(t,e,n){let r;return this.cache[t]!==void 0?(r=this.cache[t],this.canvasFactory.reset(r,e,n)):(r=this.canvasFactory.create(e,n),this.cache[t]=r),r}delete(t){delete this.cache[t]}clear(){for(const t in this.cache){const e=this.cache[t];this.canvasFactory.destroy(e),delete this.cache[t]}}}function c5(i,t,e,n,r,s,a,u,c,h){const[f,g,m,y,w,S]=Hi(i);if(g===0&&m===0){const D=a*f+w,R=Math.round(D),I=u*y+S,F=Math.round(I),q=(a+c)*f+w,U=Math.abs(Math.round(q)-R)||1,V=(u+h)*y+S,tt=Math.abs(Math.round(V)-F)||1;return i.setTransform(Math.sign(f),0,0,Math.sign(y),R,F),i.drawImage(t,e,n,r,s,0,0,U,tt),i.setTransform(f,g,m,y,w,S),[U,tt]}if(f===0&&y===0){const D=u*m+w,R=Math.round(D),I=a*g+S,F=Math.round(I),q=(u+h)*m+w,U=Math.abs(Math.round(q)-R)||1,V=(a+c)*g+S,tt=Math.abs(Math.round(V)-F)||1;return i.setTransform(0,Math.sign(g),Math.sign(m),0,R,F),i.drawImage(t,e,n,r,s,0,0,tt,U),i.setTransform(f,g,m,y,w,S),[tt,U]}i.drawImage(t,e,n,r,s,a,u,c,h);const T=Math.hypot(f,g),C=Math.hypot(m,y);return[T*c,C*h]}class t8{constructor(t,e,n){Kt(this,"alphaIsShape",!1);Kt(this,"fontSize",0);Kt(this,"fontSizeScale",1);Kt(this,"textMatrix",null);Kt(this,"textMatrixScale",1);Kt(this,"fontMatrix",eS);Kt(this,"leading",0);Kt(this,"x",0);Kt(this,"y",0);Kt(this,"lineX",0);Kt(this,"lineY",0);Kt(this,"charSpacing",0);Kt(this,"wordSpacing",0);Kt(this,"textHScale",1);Kt(this,"textRenderingMode",cs.FILL);Kt(this,"textRise",0);Kt(this,"fillColor","#000000");Kt(this,"strokeColor","#000000");Kt(this,"patternFill",!1);Kt(this,"patternStroke",!1);Kt(this,"fillAlpha",1);Kt(this,"strokeAlpha",1);Kt(this,"lineWidth",1);Kt(this,"activeSMask",null);Kt(this,"transferMaps","none");n==null||n(this),this.clipBox=new Float32Array([0,0,t,e]),this.minMax=Qg.slice()}clone(){const t=Object.create(this);return t.clipBox=this.clipBox.slice(),t.minMax=this.minMax.slice(),t}getPathBoundingBox(t=vs.FILL,e=null){const n=this.minMax.slice();if(t===vs.STROKE){e||ui("Stroke bounding box must include transform."),ge.singularValueDecompose2dScale(e,wa);const r=wa[0]*this.lineWidth/2,s=wa[1]*this.lineWidth/2;n[0]-=r,n[1]-=s,n[2]+=r,n[3]+=s}return n}updateClipFromPath(){const t=ge.intersect(this.clipBox,this.getPathBoundingBox());this.startNewPathAndClipBox(t||[0,0,0,0])}isEmptyClip(){return this.minMax[0]===1/0}startNewPathAndClipBox(t){this.clipBox.set(t,0),this.minMax.set(Qg,0)}getClippedPathBoundingBox(t=vs.FILL,e=null){return ge.intersect(this.clipBox,this.getPathBoundingBox(t,e))}}function e8(i,t){if(t instanceof ImageData){i.putImageData(t,0,0);return}const e=t.height,n=t.width,r=e%qo,s=(e-r)/qo,a=r===0?s:s+1,u=i.createImageData(n,qo);let c=0,h;const f=t.data,g=u.data;let m,y,w,S;if(t.kind===w5.GRAYSCALE_1BPP){const T=f.byteLength,C=new Uint32Array(g.buffer,0,g.byteLength>>2),D=C.length,R=n+7>>3,I=4294967295,F=bs.isLittleEndian?4278190080:255;for(m=0;m<a;m++){for(w=m<s?qo:r,h=0,y=0;y<w;y++){const q=T-c;let U=0;const V=q>R?n:q*8-7,tt=V&-8;let J=0,O=0;for(;U<tt;U+=8)O=f[c++],C[h++]=O&128?I:F,C[h++]=O&64?I:F,C[h++]=O&32?I:F,C[h++]=O&16?I:F,C[h++]=O&8?I:F,C[h++]=O&4?I:F,C[h++]=O&2?I:F,C[h++]=O&1?I:F;for(;U<V;U++)J===0&&(O=f[c++],J=128),C[h++]=O&J?I:F,J>>=1}for(;h<D;)C[h++]=0;i.putImageData(u,0,m*qo)}}else if(t.kind===w5.RGBA_32BPP){for(y=0,S=n*qo*4,m=0;m<s;m++)g.set(f.subarray(c,c+S)),c+=S,i.putImageData(u,0,y),y+=qo;m<a&&(S=n*r*4,g.set(f.subarray(c,c+S)),i.putImageData(u,0,y))}else if(t.kind===w5.RGB_24BPP)for(w=qo,S=n*w,m=0;m<a;m++){for(m>=s&&(w=r,S=n*w),h=0,y=S;y--;)g[h++]=f[c++],g[h++]=f[c++],g[h++]=f[c++],g[h++]=255;i.putImageData(u,0,m*qo)}else throw new Error(`bad image kind: ${t.kind}`)}function n8(i,t){if(t.bitmap){i.drawImage(t.bitmap,0,0);return}const e=t.height,n=t.width,r=e%qo,s=(e-r)/qo,a=r===0?s:s+1,u=i.createImageData(n,qo);let c=0;const h=t.data,f=u.data;for(let g=0;g<a;g++){const m=g<s?qo:r;({srcPos:c}=Aq({src:h,srcPos:c,dest:f,width:n,height:m,nonBlackColor:0})),i.putImageData(u,0,g*qo)}}function Rv(i,t){const e=["strokeStyle","fillStyle","fillRule","globalAlpha","lineWidth","lineCap","lineJoin","miterLimit","globalCompositeOperation","font","filter"];for(const n of e)i[n]!==void 0&&(t[n]=i[n]);i.setLineDash!==void 0&&(t.setLineDash(i.getLineDash()),t.lineDashOffset=i.lineDashOffset)}function h5(i){i.strokeStyle=i.fillStyle="#000000",i.fillRule="nonzero",i.globalAlpha=1,i.lineWidth=1,i.lineCap="butt",i.lineJoin="miter",i.miterLimit=10,i.globalCompositeOperation="source-over",i.font="10px sans-serif",i.setLineDash!==void 0&&(i.setLineDash([]),i.lineDashOffset=0);const{filter:t}=i;t!=="none"&&t!==""&&(i.filter="none")}function i8(i,t){if(t)return!0;ge.singularValueDecompose2dScale(i,wa);const e=Math.fround(ac.pixelRatio*Td.PDF_TO_CSS_UNITS);return wa[0]<=e&&wa[1]<=e}const Eq=["butt","round","square"],Cq=["miter","round","bevel"],Tq={},r8={};var jl,IS,PS,kS;const AC=class AC{constructor(t,e,n,r,s,{optionalContentConfig:a,markedContentStack:u=null},c,h,f){z(this,jl);this.ctx=t,this.current=new t8(this.ctx.canvas.width,this.ctx.canvas.height),this.stateStack=[],this.pendingClip=null,this.pendingEOFill=!1,this.res=null,this.xobjs=null,this.commonObjs=e,this.objs=n,this.canvasFactory=r,this.filterFactory=s,this.groupStack=[],this.baseTransform=null,this.baseTransformStack=[],this.groupLevel=0,this.smaskStack=[],this.smaskCounter=0,this.tempSMask=null,this.suspendedCtx=null,this.contentVisible=!0,this.markedContentStack=u||[],this.optionalContentConfig=a,this.cachedCanvases=new Sq(this.canvasFactory),this.cachedPatterns=new Map,this.annotationCanvasMap=c,this.viewportScale=1,this.outputScaleX=1,this.outputScaleY=1,this.pageColors=h,this._cachedScaleForStroking=[-1,0],this._cachedGetSinglePixelWidth=null,this._cachedBitmapsMap=new Map,this.dependencyTracker=f??null}getObject(t,e,n=null){var r;return typeof e=="string"?((r=this.dependencyTracker)==null||r.recordNamedDependency(t,e),e.startsWith("g_")?this.commonObjs.get(e):this.objs.get(e)):n}beginDrawing({transform:t,viewport:e,transparency:n=!1,background:r=null}){const s=this.ctx.canvas.width,a=this.ctx.canvas.height,u=this.ctx.fillStyle;if(this.ctx.fillStyle=r||"#ffffff",this.ctx.fillRect(0,0,s,a),this.ctx.fillStyle=u,n){const c=this.cachedCanvases.getCanvas("transparent",s,a);this.compositeCtx=this.ctx,this.transparentCanvas=c.canvas,this.ctx=c.context,this.ctx.save(),this.ctx.transform(...Hi(this.compositeCtx))}this.ctx.save(),h5(this.ctx),t&&(this.ctx.transform(...t),this.outputScaleX=t[0],this.outputScaleY=t[0]),this.ctx.transform(...e.transform),this.viewportScale=e.scale,this.baseTransform=Hi(this.ctx)}executeOperatorList(t,e,n,r,s){var C;const a=t.argsArray,u=t.fnArray;let c=e||0;const h=a.length;if(h===c)return c;const f=h-c>Z6&&typeof n=="function",g=f?Date.now()+_q:0;let m=0;const y=this.commonObjs,w=this.objs;let S,T;for(;;){if(r!==void 0&&c===r.nextBreakPoint)return r.breakIt(c,n),c;if(!s||s(c))if(S=u[c],T=a[c]??null,S!==o2.dependency)T===null?this[S](c):this[S](c,...T);else for(const D of T){(C=this.dependencyTracker)==null||C.recordNamedData(D,c);const R=D.startsWith("g_")?y:w;if(!R.has(D))return R.get(D,n),c}if(c++,c===h)return c;if(f&&++m>Z6){if(Date.now()>g)return n(),c;m=0}}}endDrawing(){$(this,jl,IS).call(this),this.cachedCanvases.clear(),this.cachedPatterns.clear();for(const t of this._cachedBitmapsMap.values()){for(const e of t.values())typeof HTMLCanvasElement<"u"&&e instanceof HTMLCanvasElement&&(e.width=e.height=0);t.clear()}this._cachedBitmapsMap.clear(),$(this,jl,PS).call(this)}_scaleImage(t,e){const n=t.width??t.displayWidth,r=t.height??t.displayHeight;let s=Math.max(Math.hypot(e[0],e[1]),1),a=Math.max(Math.hypot(e[2],e[3]),1),u=n,c=r,h="prescale1",f,g;for(;s>2&&u>1||a>2&&c>1;){let m=u,y=c;s>2&&u>1&&(m=u>=16384?Math.floor(u/2)-1||1:Math.ceil(u/2),s/=u/m),a>2&&c>1&&(y=c>=16384?Math.floor(c/2)-1||1:Math.ceil(c)/2,a/=c/y),f=this.cachedCanvases.getCanvas(h,m,y),g=f.context,g.clearRect(0,0,m,y),g.drawImage(t,0,0,u,c,0,0,m,y),t=f.canvas,u=m,c=y,h=h==="prescale1"?"prescale2":"prescale1"}return{img:t,paintWidth:u,paintHeight:c}}_createMaskCanvas(t,e){var J,O;const n=this.ctx,{width:r,height:s}=e,a=this.current.fillColor,u=this.current.patternFill,c=Hi(n);let h,f,g,m;if((e.bitmap||e.data)&&e.count>1){const G=e.bitmap||e.data.buffer;f=JSON.stringify(u?c:[c.slice(0,4),a]),h=this._cachedBitmapsMap.get(G),h||(h=new Map,this._cachedBitmapsMap.set(G,h));const et=h.get(f);if(et&&!u){const st=Math.round(Math.min(c[0],c[2])+c[4]),pt=Math.round(Math.min(c[1],c[3])+c[5]);return(J=this.dependencyTracker)==null||J.recordDependencies(t,Va.transformAndFill),{canvas:et,offsetX:st,offsetY:pt}}g=et}g||(m=this.cachedCanvases.getCanvas("maskCanvas",r,s),n8(m.context,e));let y=ge.transform(c,[1/r,0,0,-1/s,0,0]);y=ge.transform(y,[1,0,0,1,0,-s]);const w=Qg.slice();ge.axialAlignedBoundingBox([0,0,r,s],y,w);const[S,T,C,D]=w,R=Math.round(C-S)||1,I=Math.round(D-T)||1,F=this.cachedCanvases.getCanvas("fillCanvas",R,I),q=F.context,U=S,V=T;q.translate(-U,-V),q.transform(...y),g||(g=this._scaleImage(m.canvas,Mu(q)),g=g.img,h&&u&&h.set(f,g)),q.imageSmoothingEnabled=i8(Hi(q),e.interpolate),c5(q,g,0,0,g.width,g.height,0,0,r,s),q.globalCompositeOperation="source-in";const tt=ge.transform(Mu(q),[1,0,0,1,-U,-V]);return q.fillStyle=u?a.getPattern(n,this,tt,vs.FILL,t):a,q.fillRect(0,0,r,s),h&&!u&&(this.cachedCanvases.delete("fillCanvas"),h.set(f,F.canvas)),(O=this.dependencyTracker)==null||O.recordDependencies(t,Va.transformAndFill),{canvas:F.canvas,offsetX:Math.round(U),offsetY:Math.round(V)}}setLineWidth(t,e){var n;(n=this.dependencyTracker)==null||n.recordSimpleData("lineWidth",t),e!==this.current.lineWidth&&(this._cachedScaleForStroking[0]=-1),this.current.lineWidth=e,this.ctx.lineWidth=e}setLineCap(t,e){var n;(n=this.dependencyTracker)==null||n.recordSimpleData("lineCap",t),this.ctx.lineCap=Eq[e]}setLineJoin(t,e){var n;(n=this.dependencyTracker)==null||n.recordSimpleData("lineJoin",t),this.ctx.lineJoin=Cq[e]}setMiterLimit(t,e){var n;(n=this.dependencyTracker)==null||n.recordSimpleData("miterLimit",t),this.ctx.miterLimit=e}setDash(t,e,n){var s;(s=this.dependencyTracker)==null||s.recordSimpleData("dash",t);const r=this.ctx;r.setLineDash!==void 0&&(r.setLineDash(e),r.lineDashOffset=n)}setRenderingIntent(t,e){}setFlatness(t,e){}setGState(t,e){var n,r,s,a,u;for(const[c,h]of e)switch(c){case"LW":this.setLineWidth(t,h);break;case"LC":this.setLineCap(t,h);break;case"LJ":this.setLineJoin(t,h);break;case"ML":this.setMiterLimit(t,h);break;case"D":this.setDash(t,h[0],h[1]);break;case"RI":this.setRenderingIntent(t,h);break;case"FL":this.setFlatness(t,h);break;case"Font":this.setFont(t,h[0],h[1]);break;case"CA":(n=this.dependencyTracker)==null||n.recordSimpleData("strokeAlpha",t),this.current.strokeAlpha=h;break;case"ca":(r=this.dependencyTracker)==null||r.recordSimpleData("fillAlpha",t),this.ctx.globalAlpha=this.current.fillAlpha=h;break;case"BM":(s=this.dependencyTracker)==null||s.recordSimpleData("globalCompositeOperation",t),this.ctx.globalCompositeOperation=h;break;case"SMask":(a=this.dependencyTracker)==null||a.recordSimpleData("SMask",t),this.current.activeSMask=h?this.tempSMask:null,this.tempSMask=null,this.checkSMaskState();break;case"TR":(u=this.dependencyTracker)==null||u.recordSimpleData("filter",t),this.ctx.filter=this.current.transferMaps=this.filterFactory.addFilter(h);break}}get inSMaskMode(){return!!this.suspendedCtx}checkSMaskState(){const t=this.inSMaskMode;this.current.activeSMask&&!t?this.beginSMaskMode():!this.current.activeSMask&&t&&this.endSMaskMode()}beginSMaskMode(t){if(this.inSMaskMode)throw new Error("beginSMaskMode called while already in smask mode");const e=this.ctx.canvas.width,n=this.ctx.canvas.height,r="smaskGroupAt"+this.groupLevel,s=this.cachedCanvases.getCanvas(r,e,n);this.suspendedCtx=this.ctx;const a=this.ctx=s.context;a.setTransform(this.suspendedCtx.getTransform()),Rv(this.suspendedCtx,a),wq(a,this.suspendedCtx),this.setGState(t,[["BM","source-over"]])}endSMaskMode(){if(!this.inSMaskMode)throw new Error("endSMaskMode called while not in smask mode");this.ctx._removeMirroring(),Rv(this.ctx,this.suspendedCtx),this.ctx=this.suspendedCtx,this.suspendedCtx=null}compose(t){if(!this.current.activeSMask)return;t?(t[0]=Math.floor(t[0]),t[1]=Math.floor(t[1]),t[2]=Math.ceil(t[2]),t[3]=Math.ceil(t[3])):t=[0,0,this.ctx.canvas.width,this.ctx.canvas.height];const e=this.current.activeSMask,n=this.suspendedCtx;this.composeSMask(n,e,this.ctx,t),this.ctx.save(),this.ctx.setTransform(1,0,0,1,0,0),this.ctx.clearRect(0,0,this.ctx.canvas.width,this.ctx.canvas.height),this.ctx.restore()}composeSMask(t,e,n,r){const s=r[0],a=r[1],u=r[2]-s,c=r[3]-a;u===0||c===0||(this.genericComposeSMask(e.context,n,u,c,e.subtype,e.backdrop,e.transferMap,s,a,e.offsetX,e.offsetY),t.save(),t.globalAlpha=1,t.globalCompositeOperation="source-over",t.setTransform(1,0,0,1,0,0),t.drawImage(n.canvas,0,0),t.restore())}genericComposeSMask(t,e,n,r,s,a,u,c,h,f,g){let m=t.canvas,y=c-f,w=h-g;if(a)if(y<0||w<0||y+n>m.width||w+r>m.height){const T=this.cachedCanvases.getCanvas("maskExtension",n,r),C=T.context;C.drawImage(m,-y,-w),C.globalCompositeOperation="destination-atop",C.fillStyle=a,C.fillRect(0,0,n,r),C.globalCompositeOperation="source-over",m=T.canvas,y=w=0}else{t.save(),t.globalAlpha=1,t.setTransform(1,0,0,1,0,0);const T=new Path2D;T.rect(y,w,n,r),t.clip(T),t.globalCompositeOperation="destination-atop",t.fillStyle=a,t.fillRect(y,w,n,r),t.restore()}e.save(),e.globalAlpha=1,e.setTransform(1,0,0,1,0,0),s==="Alpha"&&u?e.filter=this.filterFactory.addAlphaFilter(u):s==="Luminosity"&&(e.filter=this.filterFactory.addLuminosityFilter(u));const S=new Path2D;S.rect(c,h,n,r),e.clip(S),e.globalCompositeOperation="destination-in",e.drawImage(m,y,w,n,r,c,h,n,r),e.restore()}save(t){var n;this.inSMaskMode&&Rv(this.ctx,this.suspendedCtx),this.ctx.save();const e=this.current;this.stateStack.push(e),this.current=e.clone(),(n=this.dependencyTracker)==null||n.save(t)}restore(t){var e;if((e=this.dependencyTracker)==null||e.restore(t),this.stateStack.length===0){this.inSMaskMode&&this.endSMaskMode();return}this.current=this.stateStack.pop(),this.ctx.restore(),this.inSMaskMode&&Rv(this.suspendedCtx,this.ctx),this.checkSMaskState(),this.pendingClip=null,this._cachedScaleForStroking[0]=-1,this._cachedGetSinglePixelWidth=null}transform(t,e,n,r,s,a,u){var c;(c=this.dependencyTracker)==null||c.recordIncrementalData("transform",t),this.ctx.transform(e,n,r,s,a,u),this._cachedScaleForStroking[0]=-1,this._cachedGetSinglePixelWidth=null}constructPath(t,e,n,r){let[s]=n;if(!r){s||(s=n[0]=new Path2D),this[e](t,s);return}if(this.dependencyTracker!==null){const a=e===o2.stroke?this.current.lineWidth/2:0;this.dependencyTracker.resetBBox(t).recordBBox(t,this.ctx,r[0]-a,r[2]+a,r[1]-a,r[3]+a).recordDependencies(t,["transform"])}s instanceof Path2D||(s=n[0]=FR(s)),ge.axialAlignedBoundingBox(r,Hi(this.ctx),this.current.minMax),this[e](t,s),this._pathStartIdx=t}closePath(t){this.ctx.closePath()}stroke(t,e,n=!0){var a;const r=this.ctx,s=this.current.strokeColor;if(r.globalAlpha=this.current.strokeAlpha,this.contentVisible)if(typeof s=="object"&&(s!=null&&s.getPattern)){const u=s.isModifyingCurrentTransform()?r.getTransform():null;if(r.save(),r.strokeStyle=s.getPattern(r,this,Mu(r),vs.STROKE,t),u){const c=new Path2D;c.addPath(e,r.getTransform().invertSelf().multiplySelf(u)),e=c}this.rescaleAndStroke(e,!1),r.restore()}else this.rescaleAndStroke(e,!0);(a=this.dependencyTracker)==null||a.recordDependencies(t,Va.stroke),n&&this.consumePath(t,e,this.current.getClippedPathBoundingBox(vs.STROKE,Hi(this.ctx))),r.globalAlpha=this.current.fillAlpha}closeStroke(t,e){this.stroke(t,e)}fill(t,e,n=!0){var h,f,g;const r=this.ctx,s=this.current.fillColor,a=this.current.patternFill;let u=!1;if(a){const m=s.isModifyingCurrentTransform()?r.getTransform():null;if((h=this.dependencyTracker)==null||h.save(t),r.save(),r.fillStyle=s.getPattern(r,this,Mu(r),vs.FILL,t),m){const y=new Path2D;y.addPath(e,r.getTransform().invertSelf().multiplySelf(m)),e=y}u=!0}const c=this.current.getClippedPathBoundingBox();this.contentVisible&&c!==null&&(this.pendingEOFill?(r.fill(e,"evenodd"),this.pendingEOFill=!1):r.fill(e)),(f=this.dependencyTracker)==null||f.recordDependencies(t,Va.fill),u&&(r.restore(),(g=this.dependencyTracker)==null||g.restore(t)),n&&this.consumePath(t,e,c)}eoFill(t,e){this.pendingEOFill=!0,this.fill(t,e)}fillStroke(t,e){this.fill(t,e,!1),this.stroke(t,e,!1),this.consumePath(t,e)}eoFillStroke(t,e){this.pendingEOFill=!0,this.fillStroke(t,e)}closeFillStroke(t,e){this.fillStroke(t,e)}closeEOFillStroke(t,e){this.pendingEOFill=!0,this.fillStroke(t,e)}endPath(t,e){this.consumePath(t,e)}rawFillPath(t,e){var n;this.ctx.fill(e),(n=this.dependencyTracker)==null||n.recordDependencies(t,Va.rawFillPath).recordOperation(t)}clip(t){var e;(e=this.dependencyTracker)==null||e.recordFutureForcedDependency("clipMode",t),this.pendingClip=Tq}eoClip(t){var e;(e=this.dependencyTracker)==null||e.recordFutureForcedDependency("clipMode",t),this.pendingClip=r8}beginText(t){var e;this.current.textMatrix=null,this.current.textMatrixScale=1,this.current.x=this.current.lineX=0,this.current.y=this.current.lineY=0,(e=this.dependencyTracker)==null||e.recordOpenMarker(t).resetIncrementalData("sameLineText").resetIncrementalData("moveText",t)}endText(t){const e=this.pendingTextPaths,n=this.ctx;if(this.dependencyTracker){const{dependencyTracker:r}=this;e!==void 0&&r.recordFutureForcedDependency("textClip",r.getOpenMarker()).recordFutureForcedDependency("textClip",t),r.recordCloseMarker(t)}if(e!==void 0){const r=new Path2D,s=n.getTransform().invertSelf();for(const{transform:a,x:u,y:c,fontSize:h,path:f}of e)f&&r.addPath(f,new DOMMatrix(a).preMultiplySelf(s).translate(u,c).scale(h,-h));n.clip(r)}delete this.pendingTextPaths}setCharSpacing(t,e){var n;(n=this.dependencyTracker)==null||n.recordSimpleData("charSpacing",t),this.current.charSpacing=e}setWordSpacing(t,e){var n;(n=this.dependencyTracker)==null||n.recordSimpleData("wordSpacing",t),this.current.wordSpacing=e}setHScale(t,e){var n;(n=this.dependencyTracker)==null||n.recordSimpleData("hScale",t),this.current.textHScale=e/100}setLeading(t,e){var n;(n=this.dependencyTracker)==null||n.recordSimpleData("leading",t),this.current.leading=-e}setFont(t,e,n){var g,m;(g=this.dependencyTracker)==null||g.recordSimpleData("font",t).recordSimpleDataFromNamed("fontObj",e,t);const r=this.commonObjs.get(e),s=this.current;if(!r)throw new Error(`Can't find font for ${e}`);if(s.fontMatrix=r.fontMatrix||eS,(s.fontMatrix[0]===0||s.fontMatrix[3]===0)&&Ge("Invalid font matrix for font "+e),n<0?(n=-n,s.fontDirection=-1):s.fontDirection=1,this.current.font=r,this.current.fontSize=n,r.isType3Font)return;const a=r.loadedName||"sans-serif",u=((m=r.systemFontInfo)==null?void 0:m.css)||`"${a}", ${r.fallbackName}`;let c="normal";r.black?c="900":r.bold&&(c="bold");const h=r.italic?"italic":"normal";let f=n;n<K6?f=K6:n>Q6&&(f=Q6),this.current.fontSizeScale=n/f,this.ctx.font=`${h} ${c} ${f}px ${u}`}setTextRenderingMode(t,e){var n;(n=this.dependencyTracker)==null||n.recordSimpleData("textRenderingMode",t),this.current.textRenderingMode=e}setTextRise(t,e){var n;(n=this.dependencyTracker)==null||n.recordSimpleData("textRise",t),this.current.textRise=e}moveText(t,e,n){var r;(r=this.dependencyTracker)==null||r.resetIncrementalData("sameLineText").recordIncrementalData("moveText",t),this.current.x=this.current.lineX+=e,this.current.y=this.current.lineY+=n}setLeadingMoveText(t,e,n){this.setLeading(t,-n),this.moveText(t,e,n)}setTextMatrix(t,e){var r;(r=this.dependencyTracker)==null||r.resetIncrementalData("sameLineText").recordSimpleData("textMatrix",t);const{current:n}=this;n.textMatrix=e,n.textMatrixScale=Math.hypot(e[0],e[1]),n.x=n.lineX=0,n.y=n.lineY=0}nextLine(t){var e;this.moveText(t,0,this.current.leading),(e=this.dependencyTracker)==null||e.recordIncrementalData("moveText",this.dependencyTracker.getSimpleIndex("leading")??t)}paintChar(t,e,n,r,s,a){var C,D,R,I;const u=this.ctx,c=this.current,h=c.font,f=c.textRenderingMode,g=c.fontSize/c.fontSizeScale,m=f&cs.FILL_STROKE_MASK,y=!!(f&cs.ADD_TO_PATH_FLAG),w=c.patternFill&&!h.missingFile,S=c.patternStroke&&!h.missingFile;let T;if((h.disableFontFace||y||w||S)&&!h.missingFile&&(T=h.getPathGenerator(this.commonObjs,e)),T&&(h.disableFontFace||w||S)){u.save(),u.translate(n,r),u.scale(g,-g),(C=this.dependencyTracker)==null||C.recordCharacterBBox(t,u,h);let F;if(m===cs.FILL||m===cs.FILL_STROKE)if(s){F=u.getTransform(),u.setTransform(...s);const q=$(this,jl,kS).call(this,T,F,s);u.fill(q)}else u.fill(T);if(m===cs.STROKE||m===cs.FILL_STROKE)if(a){F||(F=u.getTransform()),u.setTransform(...a);const{a:q,b:U,c:V,d:tt}=F,J=ge.inverseTransform(a),O=ge.transform([q,U,V,tt,0,0],J);ge.singularValueDecompose2dScale(O,wa),u.lineWidth*=Math.max(wa[0],wa[1])/g,u.stroke($(this,jl,kS).call(this,T,F,a))}else u.lineWidth/=g,u.stroke(T);u.restore()}else(m===cs.FILL||m===cs.FILL_STROKE)&&(u.fillText(e,n,r),(D=this.dependencyTracker)==null||D.recordCharacterBBox(t,u,h,g,n,r,()=>u.measureText(e))),(m===cs.STROKE||m===cs.FILL_STROKE)&&(this.dependencyTracker&&((R=this.dependencyTracker)==null||R.recordCharacterBBox(t,u,h,g,n,r,()=>u.measureText(e)).recordDependencies(t,Va.stroke)),u.strokeText(e,n,r));y&&((this.pendingTextPaths||(this.pendingTextPaths=[])).push({transform:Hi(u),x:n,y:r,fontSize:g,path:T}),(I=this.dependencyTracker)==null||I.recordCharacterBBox(t,u,h,g,n,r))}get isFontSubpixelAAEnabled(){const{context:t}=this.cachedCanvases.getCanvas("isFontSubpixelAAEnabled",10,10);t.scale(1.5,1),t.fillText("I",0,10);const e=t.getImageData(0,0,10,10).data;let n=!1;for(let r=3;r<e.length;r+=4)if(e[r]>0&&e[r]<255){n=!0;break}return Ve(this,"isFontSubpixelAAEnabled",n)}showText(t,e){var V,tt,J,O;this.dependencyTracker&&(this.dependencyTracker.recordDependencies(t,Va.showText).resetBBox(t),this.current.textRenderingMode&cs.ADD_TO_PATH_FLAG&&this.dependencyTracker.recordFutureForcedDependency("textClip",t).inheritPendingDependenciesAsFutureForcedDependencies());const n=this.current,r=n.font;if(r.isType3Font){this.showType3Text(t,e),(V=this.dependencyTracker)==null||V.recordShowTextOperation(t);return}const s=n.fontSize;if(s===0){(tt=this.dependencyTracker)==null||tt.recordOperation(t);return}const a=this.ctx,u=n.fontSizeScale,c=n.charSpacing,h=n.wordSpacing,f=n.fontDirection,g=n.textHScale*f,m=e.length,y=r.vertical,w=y?1:-1,S=r.defaultVMetrics,T=s*n.fontMatrix[0],C=n.textRenderingMode===cs.FILL&&!r.disableFontFace&&!n.patternFill;a.save(),n.textMatrix&&a.transform(...n.textMatrix),a.translate(n.x,n.y+n.textRise),f>0?a.scale(g,-1):a.scale(g,1);let D,R;if(n.patternFill){a.save();const G=n.fillColor.getPattern(a,this,Mu(a),vs.FILL,t);D=Hi(a),a.restore(),a.fillStyle=G}if(n.patternStroke){a.save();const G=n.strokeColor.getPattern(a,this,Mu(a),vs.STROKE,t);R=Hi(a),a.restore(),a.strokeStyle=G}let I=n.lineWidth;const F=n.textMatrixScale;if(F===0||I===0){const G=n.textRenderingMode&cs.FILL_STROKE_MASK;(G===cs.STROKE||G===cs.FILL_STROKE)&&(I=this.getSinglePixelWidth())}else I/=F;if(u!==1&&(a.scale(u,u),I/=u),a.lineWidth=I,r.isInvalidPDFjsFont){const G=[];let et=0;for(const pt of e)G.push(pt.unicode),et+=pt.width;const st=G.join("");if(a.fillText(st,0,0),this.dependencyTracker!==null){const pt=a.measureText(st);this.dependencyTracker.recordBBox(t,this.ctx,-pt.actualBoundingBoxLeft,pt.actualBoundingBoxRight,-pt.actualBoundingBoxAscent,pt.actualBoundingBoxDescent).recordShowTextOperation(t)}n.x+=et*T*g,a.restore(),this.compose();return}let q=0,U;for(U=0;U<m;++U){const G=e[U];if(typeof G=="number"){q+=w*G*s/1e3;continue}let et=!1;const st=(G.isSpace?h:0)+c,pt=G.fontChar,nt=G.accent;let at,ht,bt=G.width;if(y){const P=G.vmetric||S,Y=-(G.vmetric?P[1]:bt*.5)*T,j=P[2]*T;bt=P?-P[0]:bt,at=Y/u,ht=(q+j)/u}else at=q/u,ht=0;let St;if(r.remeasure&&bt>0){St=a.measureText(pt);const P=St.width*1e3/s*u;if(bt<P&&this.isFontSubpixelAAEnabled){const Y=bt/P;et=!0,a.save(),a.scale(Y,1),at/=Y}else bt!==P&&(at+=(bt-P)/2e3*s/u)}if(this.contentVisible&&(G.isInFont||r.missingFile)){if(C&&!nt)a.fillText(pt,at,ht),(J=this.dependencyTracker)==null||J.recordCharacterBBox(t,a,St?{bbox:null}:r,s/u,at,ht,()=>St??a.measureText(pt));else if(this.paintChar(t,pt,at,ht,D,R),nt){const P=at+s*nt.offset.x/u,Y=ht-s*nt.offset.y/u;this.paintChar(t,nt.fontChar,P,Y,D,R)}}const K=y?bt*T-st*f:bt*T+st*f;q+=K,et&&a.restore()}y?n.y-=q:n.x+=q*g,a.restore(),this.compose(),(O=this.dependencyTracker)==null||O.recordShowTextOperation(t)}showType3Text(t,e){const n=this.ctx,r=this.current,s=r.font,a=r.fontSize,u=r.fontDirection,c=s.vertical?1:-1,h=r.charSpacing,f=r.wordSpacing,g=r.textHScale*u,m=r.fontMatrix||eS,y=e.length,w=r.textRenderingMode===cs.INVISIBLE;let S,T,C,D;if(w||a===0)return;this._cachedScaleForStroking[0]=-1,this._cachedGetSinglePixelWidth=null,n.save(),r.textMatrix&&n.transform(...r.textMatrix),n.translate(r.x,r.y+r.textRise),n.scale(g,u);const R=this.dependencyTracker;for(this.dependencyTracker=R?new nA(R,t):null,S=0;S<y;++S){if(T=e[S],typeof T=="number"){D=c*T*a/1e3,this.ctx.translate(D,0),r.x+=D*g;continue}const I=(T.isSpace?f:0)+h,F=s.charProcOperatorList[T.operatorListId];F?this.contentVisible&&(this.save(),n.scale(a,a),n.transform(...m),this.executeOperatorList(F),this.restore()):Ge(`Type3 character "${T.operatorListId}" is not available.`);const q=[T.width,0];ge.applyTransform(q,m),C=q[0]*a+I,n.translate(C,0),r.x+=C*g}n.restore(),R&&(this.dependencyTracker=R)}setCharWidth(t,e,n){}setCharWidthAndBounds(t,e,n,r,s,a,u){var h;const c=new Path2D;c.rect(r,s,a-r,u-s),this.ctx.clip(c),(h=this.dependencyTracker)==null||h.recordBBox(t,this.ctx,r,a,s,u).recordClipBox(t,this.ctx,r,a,s,u),this.endPath(t)}getColorN_Pattern(t,e){let n;if(e[0]==="TilingPattern"){const r=this.baseTransform||Hi(this.ctx),s={createCanvasGraphics:(a,u)=>new AC(a,this.commonObjs,this.objs,this.canvasFactory,this.filterFactory,{optionalContentConfig:this.optionalContentConfig,markedContentStack:this.markedContentStack},void 0,void 0,this.dependencyTracker?new nA(this.dependencyTracker,u,!0):null)};n=new MS(e,this.ctx,s,r)}else n=this._getPattern(t,e[1],e[2]);return n}setStrokeColorN(t,...e){var n;(n=this.dependencyTracker)==null||n.recordSimpleData("strokeColor",t),this.current.strokeColor=this.getColorN_Pattern(t,e),this.current.patternStroke=!0}setFillColorN(t,...e){var n;(n=this.dependencyTracker)==null||n.recordSimpleData("fillColor",t),this.current.fillColor=this.getColorN_Pattern(t,e),this.current.patternFill=!0}setStrokeRGBColor(t,e){var n;(n=this.dependencyTracker)==null||n.recordSimpleData("strokeColor",t),this.ctx.strokeStyle=this.current.strokeColor=e,this.current.patternStroke=!1}setStrokeTransparent(t){var e;(e=this.dependencyTracker)==null||e.recordSimpleData("strokeColor",t),this.ctx.strokeStyle=this.current.strokeColor="transparent",this.current.patternStroke=!1}setFillRGBColor(t,e){var n;(n=this.dependencyTracker)==null||n.recordSimpleData("fillColor",t),this.ctx.fillStyle=this.current.fillColor=e,this.current.patternFill=!1}setFillTransparent(t){var e;(e=this.dependencyTracker)==null||e.recordSimpleData("fillColor",t),this.ctx.fillStyle=this.current.fillColor="transparent",this.current.patternFill=!1}_getPattern(t,e,n=null){let r;return this.cachedPatterns.has(e)?r=this.cachedPatterns.get(e):(r=bq(this.getObject(t,e)),this.cachedPatterns.set(e,r)),n&&(r.matrix=n),r}shadingFill(t,e){var a;if(!this.contentVisible)return;const n=this.ctx;this.save(t);const r=this._getPattern(t,e);n.fillStyle=r.getPattern(n,this,Mu(n),vs.SHADING,t);const s=Mu(n);if(s){const{width:u,height:c}=n.canvas,h=Qg.slice();ge.axialAlignedBoundingBox([0,0,u,c],s,h);const[f,g,m,y]=h;this.ctx.fillRect(f,g,m-f,y-g)}else this.ctx.fillRect(-1e10,-1e10,2e10,2e10);(a=this.dependencyTracker)==null||a.resetBBox(t).recordFullPageBBox(t).recordDependencies(t,Va.transform).recordDependencies(t,Va.fill).recordOperation(t),this.compose(this.current.getClippedPathBoundingBox()),this.restore(t)}beginInlineImage(){ui("Should not call beginInlineImage")}beginImageData(){ui("Should not call beginImageData")}paintFormXObjectBegin(t,e,n){var r;if(this.contentVisible&&(this.save(t),this.baseTransformStack.push(this.baseTransform),e&&this.transform(t,...e),this.baseTransform=Hi(this.ctx),n)){ge.axialAlignedBoundingBox(n,this.baseTransform,this.current.minMax);const[s,a,u,c]=n,h=new Path2D;h.rect(s,a,u-s,c-a),this.ctx.clip(h),(r=this.dependencyTracker)==null||r.recordClipBox(t,this.ctx,s,u,a,c),this.endPath(t)}}paintFormXObjectEnd(t){this.contentVisible&&(this.restore(t),this.baseTransform=this.baseTransformStack.pop())}beginGroup(t,e){var R;if(!this.contentVisible)return;this.save(t),this.inSMaskMode&&(this.endSMaskMode(),this.current.activeSMask=null);const n=this.ctx;e.isolated||qA("TODO: Support non-isolated groups."),e.knockout&&Ge("Knockout groups not supported.");const r=Hi(n);if(e.matrix&&n.transform(...e.matrix),!e.bbox)throw new Error("Bounding box is required.");let s=Qg.slice();ge.axialAlignedBoundingBox(e.bbox,Hi(n),s);const a=[0,0,n.canvas.width,n.canvas.height];s=ge.intersect(s,a)||[0,0,0,0];const u=Math.floor(s[0]),c=Math.floor(s[1]),h=Math.max(Math.ceil(s[2])-u,1),f=Math.max(Math.ceil(s[3])-c,1);this.current.startNewPathAndClipBox([0,0,h,f]);let g="groupAt"+this.groupLevel;e.smask&&(g+="_smask_"+this.smaskCounter++%2);const m=this.cachedCanvases.getCanvas(g,h,f),y=m.context;y.translate(-u,-c),y.transform(...r);let w=new Path2D;const[S,T,C,D]=e.bbox;if(w.rect(S,T,C-S,D-T),e.matrix){const I=new Path2D;I.addPath(w,new DOMMatrix(e.matrix)),w=I}y.clip(w),e.smask&&this.smaskStack.push({canvas:m.canvas,context:y,offsetX:u,offsetY:c,subtype:e.smask.subtype,backdrop:e.smask.backdrop,transferMap:e.smask.transferMap||null,startTransformInverse:null}),(!e.smask||this.dependencyTracker)&&(n.setTransform(1,0,0,1,0,0),n.translate(u,c),n.save()),Rv(n,y),this.ctx=y,(R=this.dependencyTracker)==null||R.inheritSimpleDataAsFutureForcedDependencies(["fillAlpha","strokeAlpha","globalCompositeOperation"]).pushBaseTransform(n),this.setGState(t,[["BM","source-over"],["ca",1],["CA",1]]),this.groupStack.push(n),this.groupLevel++}endGroup(t,e){var s;if(!this.contentVisible)return;this.groupLevel--;const n=this.ctx,r=this.groupStack.pop();if(this.ctx=r,this.ctx.imageSmoothingEnabled=!1,(s=this.dependencyTracker)==null||s.popBaseTransform(),e.smask)this.tempSMask=this.smaskStack.pop(),this.restore(t),this.dependencyTracker&&this.ctx.restore();else{this.ctx.restore();const a=Hi(this.ctx);this.restore(t),this.ctx.save(),this.ctx.setTransform(...a);const u=Qg.slice();ge.axialAlignedBoundingBox([0,0,n.canvas.width,n.canvas.height],a,u),this.ctx.drawImage(n.canvas,0,0),this.ctx.restore(),this.compose(u)}}beginAnnotation(t,e,n,r,s,a){if($(this,jl,IS).call(this),h5(this.ctx),this.ctx.save(),this.save(t),this.baseTransform&&this.ctx.setTransform(...this.baseTransform),n){const u=n[2]-n[0],c=n[3]-n[1];if(a&&this.annotationCanvasMap){r=r.slice(),r[4]-=n[0],r[5]-=n[1],n=n.slice(),n[0]=n[1]=0,n[2]=u,n[3]=c,ge.singularValueDecompose2dScale(Hi(this.ctx),wa);const{viewportScale:h}=this,f=Math.ceil(u*this.outputScaleX*h),g=Math.ceil(c*this.outputScaleY*h);this.annotationCanvas=this.canvasFactory.create(f,g);const{canvas:m,context:y}=this.annotationCanvas;this.annotationCanvasMap.set(e,m),this.annotationCanvas.savedCtx=this.ctx,this.ctx=y,this.ctx.save(),this.ctx.setTransform(wa[0],0,0,-wa[1],0,c*wa[1]),h5(this.ctx)}else{h5(this.ctx),this.endPath(t);const h=new Path2D;h.rect(n[0],n[1],u,c),this.ctx.clip(h)}}this.current=new t8(this.ctx.canvas.width,this.ctx.canvas.height),this.transform(t,...r),this.transform(t,...s)}endAnnotation(t){this.annotationCanvas&&(this.ctx.restore(),$(this,jl,PS).call(this),this.ctx=this.annotationCanvas.savedCtx,delete this.annotationCanvas.savedCtx,delete this.annotationCanvas)}paintImageMaskXObject(t,e){var u;if(!this.contentVisible)return;const n=e.count;e=this.getObject(t,e.data,e),e.count=n;const r=this.ctx,s=this._createMaskCanvas(t,e),a=s.canvas;r.save(),r.setTransform(1,0,0,1,0,0),r.drawImage(a,s.offsetX,s.offsetY),(u=this.dependencyTracker)==null||u.resetBBox(t).recordBBox(t,this.ctx,s.offsetX,s.offsetX+a.width,s.offsetY,s.offsetY+a.height).recordOperation(t),r.restore(),this.compose()}paintImageMaskXObjectRepeat(t,e,n,r=0,s=0,a,u){var g,m,y;if(!this.contentVisible)return;e=this.getObject(t,e.data,e);const c=this.ctx;c.save();const h=Hi(c);c.transform(n,r,s,a,0,0);const f=this._createMaskCanvas(t,e);c.setTransform(1,0,0,1,f.offsetX-h[4],f.offsetY-h[5]),(g=this.dependencyTracker)==null||g.resetBBox(t);for(let w=0,S=u.length;w<S;w+=2){const T=ge.transform(h,[n,r,s,a,u[w],u[w+1]]);c.drawImage(f.canvas,T[4],T[5]),(m=this.dependencyTracker)==null||m.recordBBox(t,this.ctx,T[4],T[4]+f.canvas.width,T[5],T[5]+f.canvas.height)}c.restore(),this.compose(),(y=this.dependencyTracker)==null||y.recordOperation(t)}paintImageMaskXObjectGroup(t,e){var a,u,c;if(!this.contentVisible)return;const n=this.ctx,r=this.current.fillColor,s=this.current.patternFill;(a=this.dependencyTracker)==null||a.resetBBox(t).recordDependencies(t,Va.transformAndFill);for(const h of e){const{data:f,width:g,height:m,transform:y}=h,w=this.cachedCanvases.getCanvas("maskCanvas",g,m),S=w.context;S.save();const T=this.getObject(t,f,h);n8(S,T),S.globalCompositeOperation="source-in",S.fillStyle=s?r.getPattern(S,this,Mu(n),vs.FILL,t):r,S.fillRect(0,0,g,m),S.restore(),n.save(),n.transform(...y),n.scale(1,-1),c5(n,w.canvas,0,0,g,m,0,-1,1,1),(u=this.dependencyTracker)==null||u.recordBBox(t,n,0,g,0,m),n.restore()}this.compose(),(c=this.dependencyTracker)==null||c.recordOperation(t)}paintImageXObject(t,e){if(!this.contentVisible)return;const n=this.getObject(t,e);if(!n){Ge("Dependent image isn't ready yet");return}this.paintInlineImageXObject(t,n)}paintImageXObjectRepeat(t,e,n,r,s){if(!this.contentVisible)return;const a=this.getObject(t,e);if(!a){Ge("Dependent image isn't ready yet");return}const u=a.width,c=a.height,h=[];for(let f=0,g=s.length;f<g;f+=2)h.push({transform:[n,0,0,r,s[f],s[f+1]],x:0,y:0,w:u,h:c});this.paintInlineImageXObjectGroup(t,a,h)}applyTransferMapsToCanvas(t){return this.current.transferMaps!=="none"&&(t.filter=this.current.transferMaps,t.drawImage(t.canvas,0,0),t.filter="none"),t.canvas}applyTransferMapsToBitmap(t){if(this.current.transferMaps==="none")return t.bitmap;const{bitmap:e,width:n,height:r}=t,s=this.cachedCanvases.getCanvas("inlineImage",n,r),a=s.context;return a.filter=this.current.transferMaps,a.drawImage(e,0,0),a.filter="none",s.canvas}paintInlineImageXObject(t,e){var h;if(!this.contentVisible)return;const n=e.width,r=e.height,s=this.ctx;this.save(t);const{filter:a}=s;a!=="none"&&a!==""&&(s.filter="none"),s.scale(1/n,-1/r);let u;if(e.bitmap)u=this.applyTransferMapsToBitmap(e);else if(typeof HTMLElement=="function"&&e instanceof HTMLElement||!e.data)u=e;else{const g=this.cachedCanvases.getCanvas("inlineImage",n,r).context;e8(g,e),u=this.applyTransferMapsToCanvas(g)}const c=this._scaleImage(u,Mu(s));s.imageSmoothingEnabled=i8(Hi(s),e.interpolate),(h=this.dependencyTracker)==null||h.resetBBox(t).recordBBox(t,s,0,n,-r,0).recordDependencies(t,Va.imageXObject).recordOperation(t),c5(s,c.img,0,0,c.paintWidth,c.paintHeight,0,-r,n,r),this.compose(),this.restore(t)}paintInlineImageXObjectGroup(t,e,n){var a,u,c;if(!this.contentVisible)return;const r=this.ctx;let s;if(e.bitmap)s=e.bitmap;else{const h=e.width,f=e.height,m=this.cachedCanvases.getCanvas("inlineImage",h,f).context;e8(m,e),s=this.applyTransferMapsToCanvas(m)}(a=this.dependencyTracker)==null||a.resetBBox(t);for(const h of n)r.save(),r.transform(...h.transform),r.scale(1,-1),c5(r,s,h.x,h.y,h.w,h.h,0,-1,1,1),(u=this.dependencyTracker)==null||u.recordBBox(t,r,0,1,-1,0),r.restore();(c=this.dependencyTracker)==null||c.recordOperation(t),this.compose()}paintSolidColorImageMask(t){var e;this.contentVisible&&((e=this.dependencyTracker)==null||e.resetBBox(t).recordBBox(t,this.ctx,0,1,0,1).recordDependencies(t,Va.fill).recordOperation(t),this.ctx.fillRect(0,0,1,1),this.compose())}markPoint(t,e){}markPointProps(t,e,n){}beginMarkedContent(t,e){var n;(n=this.dependencyTracker)==null||n.beginMarkedContent(t),this.markedContentStack.push({visible:!0})}beginMarkedContentProps(t,e,n){var r;(r=this.dependencyTracker)==null||r.beginMarkedContent(t),e==="OC"?this.markedContentStack.push({visible:this.optionalContentConfig.isVisible(n)}):this.markedContentStack.push({visible:!0}),this.contentVisible=this.isContentVisible()}endMarkedContent(t){var e;(e=this.dependencyTracker)==null||e.endMarkedContent(t),this.markedContentStack.pop(),this.contentVisible=this.isContentVisible()}beginCompat(t){}endCompat(t){}consumePath(t,e,n){var a,u;const r=this.current.isEmptyClip();this.pendingClip&&this.current.updateClipFromPath(),this.pendingClip||this.compose(n);const s=this.ctx;this.pendingClip?(r||(this.pendingClip===r8?s.clip(e,"evenodd"):s.clip(e)),this.pendingClip=null,(a=this.dependencyTracker)==null||a.bboxToClipBoxDropOperation(t).recordFutureForcedDependency("clipPath",t)):(u=this.dependencyTracker)==null||u.recordOperation(t),this.current.startNewPathAndClipBox(this.current.clipBox)}getSinglePixelWidth(){if(!this._cachedGetSinglePixelWidth){const t=Hi(this.ctx);if(t[1]===0&&t[2]===0)this._cachedGetSinglePixelWidth=1/Math.min(Math.abs(t[0]),Math.abs(t[3]));else{const e=Math.abs(t[0]*t[3]-t[2]*t[1]),n=Math.hypot(t[0],t[2]),r=Math.hypot(t[1],t[3]);this._cachedGetSinglePixelWidth=Math.max(n,r)/e}}return this._cachedGetSinglePixelWidth}getScaleForStroking(){if(this._cachedScaleForStroking[0]===-1){const{lineWidth:t}=this.current,{a:e,b:n,c:r,d:s}=this.ctx.getTransform();let a,u;if(n===0&&r===0){const c=Math.abs(e),h=Math.abs(s);if(c===h)if(t===0)a=u=1/c;else{const f=c*t;a=u=f<1?1/f:1}else if(t===0)a=1/c,u=1/h;else{const f=c*t,g=h*t;a=f<1?1/f:1,u=g<1?1/g:1}}else{const c=Math.abs(e*s-n*r),h=Math.hypot(e,n),f=Math.hypot(r,s);if(t===0)a=f/c,u=h/c;else{const g=t*c;a=f>g?f/g:1,u=h>g?h/g:1}}this._cachedScaleForStroking[0]=a,this._cachedScaleForStroking[1]=u}return this._cachedScaleForStroking}rescaleAndStroke(t,e){const{ctx:n,current:{lineWidth:r}}=this,[s,a]=this.getScaleForStroking();if(s===a){n.lineWidth=(r||1)*s,n.stroke(t);return}const u=n.getLineDash();e&&n.save(),n.scale(s,a),Sw.a=1/s,Sw.d=1/a;const c=new Path2D;if(c.addPath(t,Sw),u.length>0){const h=Math.max(s,a);n.setLineDash(u.map(f=>f/h)),n.lineDashOffset/=h}n.lineWidth=r||1,n.stroke(c),e&&n.restore()}isContentVisible(){for(let t=this.markedContentStack.length-1;t>=0;t--)if(!this.markedContentStack[t].visible)return!1;return!0}};jl=new WeakSet,IS=function(){for(;this.stateStack.length||this.inSMaskMode;)this.restore();this.current.activeSMask=null,this.ctx.restore(),this.transparentCanvas&&(this.ctx=this.compositeCtx,this.ctx.save(),this.ctx.setTransform(1,0,0,1,0,0),this.ctx.drawImage(this.transparentCanvas,0,0),this.ctx.restore(),this.transparentCanvas=null)},PS=function(){if(this.pageColors){const t=this.filterFactory.addHCMFilter(this.pageColors.foreground,this.pageColors.background);if(t!=="none"){const e=this.ctx.filter;this.ctx.filter=t,this.ctx.drawImage(this.ctx.canvas,0,0),this.ctx.filter=e}}},kS=function(t,e,n){const r=new Path2D;return r.addPath(t,new DOMMatrix(n).invertSelf().multiplySelf(e)),r};let om=AC;for(const i in o2)om.prototype[i]!==void 0&&(om.prototype[o2[i]]=om.prototype[i]);var Q2,Z2;class rc{static get workerPort(){return p(this,Q2)}static set workerPort(t){if(!(typeof Worker<"u"&&t instanceof Worker)&&t!==null)throw new Error("Invalid `workerPort` type.");k(this,Q2,t)}static get workerSrc(){return p(this,Z2)}static set workerSrc(t){if(typeof t!="string")throw new Error("Invalid `workerSrc` type.");k(this,Z2,t)}}Q2=new WeakMap,Z2=new WeakMap,z(rc,Q2,null),z(rc,Z2,"");var $m,ty;class Nq{constructor({parsedData:t,rawData:e}){z(this,$m);z(this,ty);k(this,$m,t),k(this,ty,e)}getRaw(){return p(this,ty)}get(t){return p(this,$m).get(t)??null}[Symbol.iterator](){return p(this,$m).entries()}}$m=new WeakMap,ty=new WeakMap;const Vg=Symbol("INTERNAL");var ey,ny,iy,Wm;class Rq{constructor(t,{name:e,intent:n,usage:r,rbGroups:s}){z(this,ey,!1);z(this,ny,!1);z(this,iy,!1);z(this,Wm,!0);k(this,ey,!!(t&_a.DISPLAY)),k(this,ny,!!(t&_a.PRINT)),this.name=e,this.intent=n,this.usage=r,this.rbGroups=s}get visible(){if(p(this,iy))return p(this,Wm);if(!p(this,Wm))return!1;const{print:t,view:e}=this.usage;return p(this,ey)?(e==null?void 0:e.viewState)!=="OFF":p(this,ny)?(t==null?void 0:t.printState)!=="OFF":!0}_setVisible(t,e,n=!1){t!==Vg&&ui("Internal method `_setVisible` called."),k(this,iy,n),k(this,Wm,e)}}ey=new WeakMap,ny=new WeakMap,iy=new WeakMap,Wm=new WeakMap;var Zf,Qn,Xm,jm,ry,FS;class Dq{constructor(t,e=_a.DISPLAY){z(this,ry);z(this,Zf,null);z(this,Qn,new Map);z(this,Xm,null);z(this,jm,null);if(this.renderingIntent=e,this.name=null,this.creator=null,t!==null){this.name=t.name,this.creator=t.creator,k(this,jm,t.order);for(const n of t.groups)p(this,Qn).set(n.id,new Rq(e,n));if(t.baseState==="OFF")for(const n of p(this,Qn).values())n._setVisible(Vg,!1);for(const n of t.on)p(this,Qn).get(n)._setVisible(Vg,!0);for(const n of t.off)p(this,Qn).get(n)._setVisible(Vg,!1);k(this,Xm,this.getHash())}}isVisible(t){if(p(this,Qn).size===0)return!0;if(!t)return qA("Optional content group not defined."),!0;if(t.type==="OCG")return p(this,Qn).has(t.id)?p(this,Qn).get(t.id).visible:(Ge(`Optional content group not found: ${t.id}`),!0);if(t.type==="OCMD"){if(t.expression)return $(this,ry,FS).call(this,t.expression);if(!t.policy||t.policy==="AnyOn"){for(const e of t.ids){if(!p(this,Qn).has(e))return Ge(`Optional content group not found: ${e}`),!0;if(p(this,Qn).get(e).visible)return!0}return!1}else if(t.policy==="AllOn"){for(const e of t.ids){if(!p(this,Qn).has(e))return Ge(`Optional content group not found: ${e}`),!0;if(!p(this,Qn).get(e).visible)return!1}return!0}else if(t.policy==="AnyOff"){for(const e of t.ids){if(!p(this,Qn).has(e))return Ge(`Optional content group not found: ${e}`),!0;if(!p(this,Qn).get(e).visible)return!0}return!1}else if(t.policy==="AllOff"){for(const e of t.ids){if(!p(this,Qn).has(e))return Ge(`Optional content group not found: ${e}`),!0;if(p(this,Qn).get(e).visible)return!1}return!0}return Ge(`Unknown optional content policy ${t.policy}.`),!0}return Ge(`Unknown group type ${t.type}.`),!0}setVisibility(t,e=!0,n=!0){var s;const r=p(this,Qn).get(t);if(!r){Ge(`Optional content group not found: ${t}`);return}if(n&&e&&r.rbGroups.length)for(const a of r.rbGroups)for(const u of a)u!==t&&((s=p(this,Qn).get(u))==null||s._setVisible(Vg,!1,!0));r._setVisible(Vg,!!e,!0),k(this,Zf,null)}setOCGState({state:t,preserveRB:e}){let n;for(const r of t){switch(r){case"ON":case"OFF":case"Toggle":n=r;continue}const s=p(this,Qn).get(r);if(s)switch(n){case"ON":this.setVisibility(r,!0,e);break;case"OFF":this.setVisibility(r,!1,e);break;case"Toggle":this.setVisibility(r,!s.visible,e);break}}k(this,Zf,null)}get hasInitialVisibility(){return p(this,Xm)===null||this.getHash()===p(this,Xm)}getOrder(){return p(this,Qn).size?p(this,jm)?p(this,jm).slice():[...p(this,Qn).keys()]:null}getGroup(t){return p(this,Qn).get(t)||null}getHash(){if(p(this,Zf)!==null)return p(this,Zf);const t=new pD;for(const[e,n]of p(this,Qn))t.update(`${e}:${n.visible}`);return k(this,Zf,t.hexdigest())}[Symbol.iterator](){return p(this,Qn).entries()}}Zf=new WeakMap,Qn=new WeakMap,Xm=new WeakMap,jm=new WeakMap,ry=new WeakSet,FS=function(t){const e=t.length;if(e<2)return!0;const n=t[0];for(let r=1;r<e;r++){const s=t[r];let a;if(Array.isArray(s))a=$(this,ry,FS).call(this,s);else if(p(this,Qn).has(s))a=p(this,Qn).get(s).visible;else return Ge(`Optional content group not found: ${s}`),!0;switch(n){case"And":if(!a)return!1;break;case"Or":if(a)return!0;break;case"Not":return!a;default:return!0}}return n==="And"};class Lq{constructor(t,{disableRange:e=!1,disableStream:n=!1}){bn(t,'PDFDataTransportStream - missing required "pdfDataRangeTransport" argument.');const{length:r,initialData:s,progressiveDone:a,contentDispositionFilename:u}=t;if(this._queuedChunks=[],this._progressiveDone=a,this._contentDispositionFilename=u,(s==null?void 0:s.length)>0){const c=s instanceof Uint8Array&&s.byteLength===s.buffer.byteLength?s.buffer:new Uint8Array(s).buffer;this._queuedChunks.push(c)}this._pdfDataRangeTransport=t,this._isStreamingSupported=!n,this._isRangeSupported=!e,this._contentLength=r,this._fullRequestReader=null,this._rangeReaders=[],t.addRangeListener((c,h)=>{this._onReceiveData({begin:c,chunk:h})}),t.addProgressListener((c,h)=>{this._onProgress({loaded:c,total:h})}),t.addProgressiveReadListener(c=>{this._onReceiveData({chunk:c})}),t.addProgressiveDoneListener(()=>{this._onProgressiveDone()}),t.transportReady()}_onReceiveData({begin:t,chunk:e}){const n=e instanceof Uint8Array&&e.byteLength===e.buffer.byteLength?e.buffer:new Uint8Array(e).buffer;if(t===void 0)this._fullRequestReader?this._fullRequestReader._enqueue(n):this._queuedChunks.push(n);else{const r=this._rangeReaders.some(function(s){return s._begin!==t?!1:(s._enqueue(n),!0)});bn(r,"_onReceiveData - no `PDFDataTransportStreamRangeReader` instance found.")}}get _progressiveDataLength(){var t;return((t=this._fullRequestReader)==null?void 0:t._loaded)??0}_onProgress(t){var e,n,r,s;t.total===void 0?(n=(e=this._rangeReaders[0])==null?void 0:e.onProgress)==null||n.call(e,{loaded:t.loaded}):(s=(r=this._fullRequestReader)==null?void 0:r.onProgress)==null||s.call(r,{loaded:t.loaded,total:t.total})}_onProgressiveDone(){var t;(t=this._fullRequestReader)==null||t.progressiveDone(),this._progressiveDone=!0}_removeRangeReader(t){const e=this._rangeReaders.indexOf(t);e>=0&&this._rangeReaders.splice(e,1)}getFullReader(){bn(!this._fullRequestReader,"PDFDataTransportStream.getFullReader can only be called once.");const t=this._queuedChunks;return this._queuedChunks=null,new Mq(this,t,this._progressiveDone,this._contentDispositionFilename)}getRangeReader(t,e){if(e<=this._progressiveDataLength)return null;const n=new Iq(this,t,e);return this._pdfDataRangeTransport.requestDataRange(t,e),this._rangeReaders.push(n),n}cancelAllRequests(t){var e;(e=this._fullRequestReader)==null||e.cancel(t);for(const n of this._rangeReaders.slice(0))n.cancel(t);this._pdfDataRangeTransport.abort()}}class Mq{constructor(t,e,n=!1,r=null){this._stream=t,this._done=n||!1,this._filename=sC(r)?r:null,this._queuedChunks=e||[],this._loaded=0;for(const s of this._queuedChunks)this._loaded+=s.byteLength;this._requests=[],this._headersReady=Promise.resolve(),t._fullRequestReader=this,this.onProgress=null}_enqueue(t){this._done||(this._requests.length>0?this._requests.shift().resolve({value:t,done:!1}):this._queuedChunks.push(t),this._loaded+=t.byteLength)}get headersReady(){return this._headersReady}get filename(){return this._filename}get isRangeSupported(){return this._stream._isRangeSupported}get isStreamingSupported(){return this._stream._isStreamingSupported}get contentLength(){return this._stream._contentLength}async read(){if(this._queuedChunks.length>0)return{value:this._queuedChunks.shift(),done:!1};if(this._done)return{value:void 0,done:!0};const t=Promise.withResolvers();return this._requests.push(t),t.promise}cancel(t){this._done=!0;for(const e of this._requests)e.resolve({value:void 0,done:!0});this._requests.length=0}progressiveDone(){this._done||(this._done=!0)}}class Iq{constructor(t,e,n){this._stream=t,this._begin=e,this._end=n,this._queuedChunk=null,this._requests=[],this._done=!1,this.onProgress=null}_enqueue(t){if(!this._done){if(this._requests.length===0)this._queuedChunk=t;else{this._requests.shift().resolve({value:t,done:!1});for(const n of this._requests)n.resolve({value:void 0,done:!0});this._requests.length=0}this._done=!0,this._stream._removeRangeReader(this)}}get isStreamingSupported(){return!1}async read(){if(this._queuedChunk){const e=this._queuedChunk;return this._queuedChunk=null,{value:e,done:!1}}if(this._done)return{value:void 0,done:!0};const t=Promise.withResolvers();return this._requests.push(t),t.promise}cancel(t){this._done=!0;for(const e of this._requests)e.resolve({value:void 0,done:!0});this._requests.length=0,this._stream._removeRangeReader(this)}}function Pq(i){let t=!0,e=n("filename\\*","i").exec(i);if(e){e=e[1];let f=u(e);return f=unescape(f),f=c(f),f=h(f),s(f)}if(e=a(i),e){const f=h(e);return s(f)}if(e=n("filename","i").exec(i),e){e=e[1];let f=u(e);return f=h(f),s(f)}function n(f,g){return new RegExp("(?:^|;)\\s*"+f+'\\s*=\\s*([^";\\s][^;\\s]*|"(?:[^"\\\\]|\\\\"?)+"?)',g)}function r(f,g){if(f){if(!/^[\x00-\xFF]+$/.test(g))return g;try{const m=new TextDecoder(f,{fatal:!0}),y=ix(g);g=m.decode(y),t=!1}catch{}}return g}function s(f){return t&&/[\x80-\xff]/.test(f)&&(f=r("utf-8",f),t&&(f=r("iso-8859-1",f))),f}function a(f){const g=[];let m;const y=n("filename\\*((?!0\\d)\\d+)(\\*?)","ig");for(;(m=y.exec(f))!==null;){let[,S,T,C]=m;if(S=parseInt(S,10),S in g){if(S===0)break;continue}g[S]=[T,C]}const w=[];for(let S=0;S<g.length&&S in g;++S){let[T,C]=g[S];C=u(C),T&&(C=unescape(C),S===0&&(C=c(C))),w.push(C)}return w.join("")}function u(f){if(f.startsWith('"')){const g=f.slice(1).split('\\"');for(let m=0;m<g.length;++m){const y=g[m].indexOf('"');y!==-1&&(g[m]=g[m].slice(0,y),g.length=m+1),g[m]=g[m].replaceAll(/\\(.)/g,"$1")}f=g.join('"')}return f}function c(f){const g=f.indexOf("'");if(g===-1)return f;const m=f.slice(0,g),w=f.slice(g+1).replace(/^[^']*'/,"");return r(m,w)}function h(f){return!f.startsWith("=?")||/[\x00-\x19\x80-\xff]/.test(f)?f:f.replaceAll(/=\?([\w-]*)\?([QqBb])\?((?:[^?]|\?(?!=))*)\?=/g,function(g,m,y,w){if(y==="q"||y==="Q")return w=w.replaceAll("_"," "),w=w.replaceAll(/=([0-9a-fA-F]{2})/g,function(S,T){return String.fromCharCode(parseInt(T,16))}),r(m,w);try{w=atob(w)}catch{}return r(m,w)})}return""}function CD(i,t){const e=new Headers;if(!i||!t||typeof t!="object")return e;for(const n in t){const r=t[n];r!==void 0&&e.append(n,r)}return e}function GA(i){var t;return((t=URL.parse(i))==null?void 0:t.origin)??null}function TD({responseHeaders:i,isHttp:t,rangeChunkSize:e,disableRange:n}){const r={allowRangeRequests:!1,suggestedLength:void 0},s=parseInt(i.get("Content-Length"),10);return!Number.isInteger(s)||(r.suggestedLength=s,s<=2*e)||n||!t||i.get("Accept-Ranges")!=="bytes"||(i.get("Content-Encoding")||"identity")!=="identity"||(r.allowRangeRequests=!0),r}function ND(i){const t=i.get("Content-Disposition");if(t){let e=Pq(t);if(e.includes("%"))try{e=decodeURIComponent(e)}catch{}if(sC(e))return e}return null}function lx(i,t){return new Jb(`Unexpected server response (${i}) while retrieving PDF "${t}".`,i,i===404||i===0&&t.startsWith("file:"))}function RD(i){return i===200||i===206}function DD(i,t,e){return{method:"GET",headers:i,signal:e.signal,mode:"cors",credentials:t?"include":"same-origin",redirect:"follow"}}function LD(i){return i instanceof Uint8Array?i.buffer:i instanceof ArrayBuffer?i:(Ge(`getArrayBuffer - unexpected data format: ${i}`),new Uint8Array(i).buffer)}class kq{constructor(t){Kt(this,"_responseOrigin",null);this.source=t,this.isHttp=/^https?:/i.test(t.url),this.headers=CD(this.isHttp,t.httpHeaders),this._fullRequestReader=null,this._rangeRequestReaders=[]}get _progressiveDataLength(){var t;return((t=this._fullRequestReader)==null?void 0:t._loaded)??0}getFullReader(){return bn(!this._fullRequestReader,"PDFFetchStream.getFullReader can only be called once."),this._fullRequestReader=new Fq(this),this._fullRequestReader}getRangeReader(t,e){if(e<=this._progressiveDataLength)return null;const n=new Bq(this,t,e);return this._rangeRequestReaders.push(n),n}cancelAllRequests(t){var e;(e=this._fullRequestReader)==null||e.cancel(t);for(const n of this._rangeRequestReaders.slice(0))n.cancel(t)}}class Fq{constructor(t){this._stream=t,this._reader=null,this._loaded=0,this._filename=null;const e=t.source;this._withCredentials=e.withCredentials||!1,this._contentLength=e.length,this._headersCapability=Promise.withResolvers(),this._disableRange=e.disableRange||!1,this._rangeChunkSize=e.rangeChunkSize,!this._rangeChunkSize&&!this._disableRange&&(this._disableRange=!0),this._abortController=new AbortController,this._isStreamingSupported=!e.disableStream,this._isRangeSupported=!e.disableRange;const n=new Headers(t.headers),r=e.url;fetch(r,DD(n,this._withCredentials,this._abortController)).then(s=>{if(t._responseOrigin=GA(s.url),!RD(s.status))throw lx(s.status,r);this._reader=s.body.getReader(),this._headersCapability.resolve();const a=s.headers,{allowRangeRequests:u,suggestedLength:c}=TD({responseHeaders:a,isHttp:t.isHttp,rangeChunkSize:this._rangeChunkSize,disableRange:this._disableRange});this._isRangeSupported=u,this._contentLength=c||this._contentLength,this._filename=ND(a),!this._isStreamingSupported&&this._isRangeSupported&&this.cancel(new Cd("Streaming is disabled."))}).catch(this._headersCapability.reject),this.onProgress=null}get headersReady(){return this._headersCapability.promise}get filename(){return this._filename}get contentLength(){return this._contentLength}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}async read(){var n;await this._headersCapability.promise;const{value:t,done:e}=await this._reader.read();return e?{value:t,done:e}:(this._loaded+=t.byteLength,(n=this.onProgress)==null||n.call(this,{loaded:this._loaded,total:this._contentLength}),{value:LD(t),done:!1})}cancel(t){var e;(e=this._reader)==null||e.cancel(t),this._abortController.abort()}}class Bq{constructor(t,e,n){this._stream=t,this._reader=null,this._loaded=0;const r=t.source;this._withCredentials=r.withCredentials||!1,this._readCapability=Promise.withResolvers(),this._isStreamingSupported=!r.disableStream,this._abortController=new AbortController;const s=new Headers(t.headers);s.append("Range",`bytes=${e}-${n-1}`);const a=r.url;fetch(a,DD(s,this._withCredentials,this._abortController)).then(u=>{const c=GA(u.url);if(c!==t._responseOrigin)throw new Error(`Expected range response-origin "${c}" to match "${t._responseOrigin}".`);if(!RD(u.status))throw lx(u.status,a);this._readCapability.resolve(),this._reader=u.body.getReader()}).catch(this._readCapability.reject),this.onProgress=null}get isStreamingSupported(){return this._isStreamingSupported}async read(){var n;await this._readCapability.promise;const{value:t,done:e}=await this._reader.read();return e?{value:t,done:e}:(this._loaded+=t.byteLength,(n=this.onProgress)==null||n.call(this,{loaded:this._loaded}),{value:LD(t),done:!1})}cancel(t){var e;(e=this._reader)==null||e.cancel(t),this._abortController.abort()}}const Ew=200,Cw=206;function Oq(i){const t=i.response;return typeof t!="string"?t:ix(t).buffer}class Uq{constructor({url:t,httpHeaders:e,withCredentials:n}){Kt(this,"_responseOrigin",null);this.url=t,this.isHttp=/^https?:/i.test(t),this.headers=CD(this.isHttp,e),this.withCredentials=n||!1,this.currXhrId=0,this.pendingRequests=Object.create(null)}request(t){const e=new XMLHttpRequest,n=this.currXhrId++,r=this.pendingRequests[n]={xhr:e};e.open("GET",this.url),e.withCredentials=this.withCredentials;for(const[s,a]of this.headers)e.setRequestHeader(s,a);return this.isHttp&&"begin"in t&&"end"in t?(e.setRequestHeader("Range",`bytes=${t.begin}-${t.end-1}`),r.expectedStatus=Cw):r.expectedStatus=Ew,e.responseType="arraybuffer",bn(t.onError,"Expected `onError` callback to be provided."),e.onerror=()=>{t.onError(e.status)},e.onreadystatechange=this.onStateChange.bind(this,n),e.onprogress=this.onProgress.bind(this,n),r.onHeadersReceived=t.onHeadersReceived,r.onDone=t.onDone,r.onError=t.onError,r.onProgress=t.onProgress,e.send(null),n}onProgress(t,e){var r;const n=this.pendingRequests[t];n&&((r=n.onProgress)==null||r.call(n,e))}onStateChange(t,e){const n=this.pendingRequests[t];if(!n)return;const r=n.xhr;if(r.readyState>=2&&n.onHeadersReceived&&(n.onHeadersReceived(),delete n.onHeadersReceived),r.readyState!==4||!(t in this.pendingRequests))return;if(delete this.pendingRequests[t],r.status===0&&this.isHttp){n.onError(r.status);return}const s=r.status||Ew;if(!(s===Ew&&n.expectedStatus===Cw)&&s!==n.expectedStatus){n.onError(r.status);return}const u=Oq(r);if(s===Cw){const c=r.getResponseHeader("Content-Range"),h=/bytes (\d+)-(\d+)\/(\d+)/.exec(c);h?n.onDone({begin:parseInt(h[1],10),chunk:u}):(Ge('Missing or invalid "Content-Range" header.'),n.onError(0))}else u?n.onDone({begin:0,chunk:u}):n.onError(r.status)}getRequestXhr(t){return this.pendingRequests[t].xhr}isPendingRequest(t){return t in this.pendingRequests}abortRequest(t){const e=this.pendingRequests[t].xhr;delete this.pendingRequests[t],e.abort()}}class Hq{constructor(t){this._source=t,this._manager=new Uq(t),this._rangeChunkSize=t.rangeChunkSize,this._fullRequestReader=null,this._rangeRequestReaders=[]}_onRangeRequestReaderClosed(t){const e=this._rangeRequestReaders.indexOf(t);e>=0&&this._rangeRequestReaders.splice(e,1)}getFullReader(){return bn(!this._fullRequestReader,"PDFNetworkStream.getFullReader can only be called once."),this._fullRequestReader=new qq(this._manager,this._source),this._fullRequestReader}getRangeReader(t,e){const n=new zq(this._manager,t,e);return n.onClosed=this._onRangeRequestReaderClosed.bind(this),this._rangeRequestReaders.push(n),n}cancelAllRequests(t){var e;(e=this._fullRequestReader)==null||e.cancel(t);for(const n of this._rangeRequestReaders.slice(0))n.cancel(t)}}class qq{constructor(t,e){this._manager=t,this._url=e.url,this._fullRequestId=t.request({onHeadersReceived:this._onHeadersReceived.bind(this),onDone:this._onDone.bind(this),onError:this._onError.bind(this),onProgress:this._onProgress.bind(this)}),this._headersCapability=Promise.withResolvers(),this._disableRange=e.disableRange||!1,this._contentLength=e.length,this._rangeChunkSize=e.rangeChunkSize,!this._rangeChunkSize&&!this._disableRange&&(this._disableRange=!0),this._isStreamingSupported=!1,this._isRangeSupported=!1,this._cachedChunks=[],this._requests=[],this._done=!1,this._storedError=void 0,this._filename=null,this.onProgress=null}_onHeadersReceived(){const t=this._fullRequestId,e=this._manager.getRequestXhr(t);this._manager._responseOrigin=GA(e.responseURL);const n=e.getAllResponseHeaders(),r=new Headers(n?n.trimStart().replace(/[^\S ]+$/,"").split(/[\r\n]+/).map(u=>{const[c,...h]=u.split(": ");return[c,h.join(": ")]}):[]),{allowRangeRequests:s,suggestedLength:a}=TD({responseHeaders:r,isHttp:this._manager.isHttp,rangeChunkSize:this._rangeChunkSize,disableRange:this._disableRange});s&&(this._isRangeSupported=!0),this._contentLength=a||this._contentLength,this._filename=ND(r),this._isRangeSupported&&this._manager.abortRequest(t),this._headersCapability.resolve()}_onDone(t){if(t&&(this._requests.length>0?this._requests.shift().resolve({value:t.chunk,done:!1}):this._cachedChunks.push(t.chunk)),this._done=!0,!(this._cachedChunks.length>0)){for(const e of this._requests)e.resolve({value:void 0,done:!0});this._requests.length=0}}_onError(t){this._storedError=lx(t,this._url),this._headersCapability.reject(this._storedError);for(const e of this._requests)e.reject(this._storedError);this._requests.length=0,this._cachedChunks.length=0}_onProgress(t){var e;(e=this.onProgress)==null||e.call(this,{loaded:t.loaded,total:t.lengthComputable?t.total:this._contentLength})}get filename(){return this._filename}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}get contentLength(){return this._contentLength}get headersReady(){return this._headersCapability.promise}async read(){if(await this._headersCapability.promise,this._storedError)throw this._storedError;if(this._cachedChunks.length>0)return{value:this._cachedChunks.shift(),done:!1};if(this._done)return{value:void 0,done:!0};const t=Promise.withResolvers();return this._requests.push(t),t.promise}cancel(t){this._done=!0,this._headersCapability.reject(t);for(const e of this._requests)e.resolve({value:void 0,done:!0});this._requests.length=0,this._manager.isPendingRequest(this._fullRequestId)&&this._manager.abortRequest(this._fullRequestId),this._fullRequestReader=null}}class zq{constructor(t,e,n){this._manager=t,this._url=t.url,this._requestId=t.request({begin:e,end:n,onHeadersReceived:this._onHeadersReceived.bind(this),onDone:this._onDone.bind(this),onError:this._onError.bind(this),onProgress:this._onProgress.bind(this)}),this._requests=[],this._queuedChunk=null,this._done=!1,this._storedError=void 0,this.onProgress=null,this.onClosed=null}_onHeadersReceived(){var e;const t=GA((e=this._manager.getRequestXhr(this._requestId))==null?void 0:e.responseURL);t!==this._manager._responseOrigin&&(this._storedError=new Error(`Expected range response-origin "${t}" to match "${this._manager._responseOrigin}".`),this._onError(0))}_close(){var t;(t=this.onClosed)==null||t.call(this,this)}_onDone(t){const e=t.chunk;this._requests.length>0?this._requests.shift().resolve({value:e,done:!1}):this._queuedChunk=e,this._done=!0;for(const n of this._requests)n.resolve({value:void 0,done:!0});this._requests.length=0,this._close()}_onError(t){this._storedError??(this._storedError=lx(t,this._url));for(const e of this._requests)e.reject(this._storedError);this._requests.length=0,this._queuedChunk=null}_onProgress(t){var e;this.isStreamingSupported||(e=this.onProgress)==null||e.call(this,{loaded:t.loaded})}get isStreamingSupported(){return!1}async read(){if(this._storedError)throw this._storedError;if(this._queuedChunk!==null){const e=this._queuedChunk;return this._queuedChunk=null,{value:e,done:!1}}if(this._done)return{value:void 0,done:!0};const t=Promise.withResolvers();return this._requests.push(t),t.promise}cancel(t){this._done=!0;for(const e of this._requests)e.resolve({value:void 0,done:!0});this._requests.length=0,this._manager.isPendingRequest(this._requestId)&&this._manager.abortRequest(this._requestId),this._close()}}const Gq=/^[a-z][a-z0-9\-+.]+:/i;function Vq(i){if(Gq.test(i))return new URL(i);const t=process.getBuiltinModule("url");return new URL(t.pathToFileURL(i))}class Yq{constructor(t){this.source=t,this.url=Vq(t.url),bn(this.url.protocol==="file:","PDFNodeStream only supports file:// URLs."),this._fullRequestReader=null,this._rangeRequestReaders=[]}get _progressiveDataLength(){var t;return((t=this._fullRequestReader)==null?void 0:t._loaded)??0}getFullReader(){return bn(!this._fullRequestReader,"PDFNodeStream.getFullReader can only be called once."),this._fullRequestReader=new $q(this),this._fullRequestReader}getRangeReader(t,e){if(e<=this._progressiveDataLength)return null;const n=new Wq(this,t,e);return this._rangeRequestReaders.push(n),n}cancelAllRequests(t){var e;(e=this._fullRequestReader)==null||e.cancel(t);for(const n of this._rangeRequestReaders.slice(0))n.cancel(t)}}class $q{constructor(t){this._url=t.url,this._done=!1,this._storedError=null,this.onProgress=null;const e=t.source;this._contentLength=e.length,this._loaded=0,this._filename=null,this._disableRange=e.disableRange||!1,this._rangeChunkSize=e.rangeChunkSize,!this._rangeChunkSize&&!this._disableRange&&(this._disableRange=!0),this._isStreamingSupported=!e.disableStream,this._isRangeSupported=!e.disableRange,this._readableStream=null,this._readCapability=Promise.withResolvers(),this._headersCapability=Promise.withResolvers();const n=process.getBuiltinModule("fs");n.promises.lstat(this._url).then(r=>{this._contentLength=r.size,this._setReadableStream(n.createReadStream(this._url)),this._headersCapability.resolve()},r=>{r.code==="ENOENT"&&(r=lx(0,this._url.href)),this._storedError=r,this._headersCapability.reject(r)})}get headersReady(){return this._headersCapability.promise}get filename(){return this._filename}get contentLength(){return this._contentLength}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}async read(){var n;if(await this._readCapability.promise,this._done)return{value:void 0,done:!0};if(this._storedError)throw this._storedError;const t=this._readableStream.read();return t===null?(this._readCapability=Promise.withResolvers(),this.read()):(this._loaded+=t.length,(n=this.onProgress)==null||n.call(this,{loaded:this._loaded,total:this._contentLength}),{value:new Uint8Array(t).buffer,done:!1})}cancel(t){if(!this._readableStream){this._error(t);return}this._readableStream.destroy(t)}_error(t){this._storedError=t,this._readCapability.resolve()}_setReadableStream(t){this._readableStream=t,t.on("readable",()=>{this._readCapability.resolve()}),t.on("end",()=>{t.destroy(),this._done=!0,this._readCapability.resolve()}),t.on("error",e=>{this._error(e)}),!this._isStreamingSupported&&this._isRangeSupported&&this._error(new Cd("streaming is disabled")),this._storedError&&this._readableStream.destroy(this._storedError)}}class Wq{constructor(t,e,n){this._url=t.url,this._done=!1,this._storedError=null,this.onProgress=null,this._loaded=0,this._readableStream=null,this._readCapability=Promise.withResolvers();const r=t.source;this._isStreamingSupported=!r.disableStream;const s=process.getBuiltinModule("fs");this._setReadableStream(s.createReadStream(this._url,{start:e,end:n-1}))}get isStreamingSupported(){return this._isStreamingSupported}async read(){var n;if(await this._readCapability.promise,this._done)return{value:void 0,done:!0};if(this._storedError)throw this._storedError;const t=this._readableStream.read();return t===null?(this._readCapability=Promise.withResolvers(),this.read()):(this._loaded+=t.length,(n=this.onProgress)==null||n.call(this,{loaded:this._loaded}),{value:new Uint8Array(t).buffer,done:!1})}cancel(t){if(!this._readableStream){this._error(t);return}this._readableStream.destroy(t)}_error(t){this._storedError=t,this._readCapability.resolve()}_setReadableStream(t){this._readableStream=t,t.on("readable",()=>{this._readCapability.resolve()}),t.on("end",()=>{t.destroy(),this._done=!0,this._readCapability.resolve()}),t.on("error",e=>{this._error(e)}),this._storedError&&this._readableStream.destroy(this._storedError)}}const Dv=Symbol("INITIAL_DATA");var la,sy,BS;class MD{constructor(){z(this,sy);z(this,la,Object.create(null))}get(t,e=null){if(e){const r=$(this,sy,BS).call(this,t);return r.promise.then(()=>e(r.data)),null}const n=p(this,la)[t];if(!n||n.data===Dv)throw new Error(`Requesting object that isn't resolved yet ${t}.`);return n.data}has(t){const e=p(this,la)[t];return!!e&&e.data!==Dv}delete(t){const e=p(this,la)[t];return!e||e.data===Dv?!1:(delete p(this,la)[t],!0)}resolve(t,e=null){const n=$(this,sy,BS).call(this,t);n.data=e,n.resolve()}clear(){var t;for(const e in p(this,la)){const{data:n}=p(this,la)[e];(t=n==null?void 0:n.bitmap)==null||t.close()}k(this,la,Object.create(null))}*[Symbol.iterator](){for(const t in p(this,la)){const{data:e}=p(this,la)[t];e!==Dv&&(yield[t,e])}}}la=new WeakMap,sy=new WeakSet,BS=function(t){var e;return(e=p(this,la))[t]||(e[t]={...Promise.withResolvers(),data:Dv})};const Xq=1e5,s8=30;var dN,td,Oo,oy,ay,j0,lh,ly,uy,J0,Jm,Km,ed,Qm,cy,Zm,K0,hy,fy,t1,Q0,dy,nd,e1,Ih,ID,PD,OS,Ca,P5,US,kD,FD;const Rr=class Rr{constructor({textContentSource:t,container:e,viewport:n}){z(this,Ih);z(this,td,Promise.withResolvers());z(this,Oo,null);z(this,oy,!1);z(this,ay,!!((dN=globalThis.FontInspector)!=null&&dN.enabled));z(this,j0,null);z(this,lh,null);z(this,ly,0);z(this,uy,0);z(this,J0,null);z(this,Jm,null);z(this,Km,0);z(this,ed,0);z(this,Qm,Object.create(null));z(this,cy,[]);z(this,Zm,null);z(this,K0,[]);z(this,hy,new WeakMap);z(this,fy,null);var c;if(t instanceof ReadableStream)k(this,Zm,t);else if(typeof t=="object")k(this,Zm,new ReadableStream({start(h){h.enqueue(t),h.close()}}));else throw new Error('No "textContentSource" parameter specified.');k(this,Oo,k(this,Jm,e)),k(this,ed,n.scale*ac.pixelRatio),k(this,Km,n.rotation),k(this,lh,{div:null,properties:null,ctx:null});const{pageWidth:r,pageHeight:s,pageX:a,pageY:u}=n.rawDims;k(this,fy,[1,0,0,-1,-a,u+s]),k(this,uy,r),k(this,ly,s),$(c=Rr,Ca,kD).call(c),Pp(e,n),p(this,td).promise.finally(()=>{p(Rr,e1).delete(this),k(this,lh,null),k(this,Qm,null)}).catch(()=>{})}static get fontFamilyMap(){const{isWindows:t,isFirefox:e}=bs.platform;return Ve(this,"fontFamilyMap",new Map([["sans-serif",`${t&&e?"Calibri, ":""}sans-serif`],["monospace",`${t&&e?"Lucida Console, ":""}monospace`]]))}render(){const t=()=>{p(this,J0).read().then(({value:e,done:n})=>{if(n){p(this,td).resolve();return}p(this,j0)??k(this,j0,e.lang),Object.assign(p(this,Qm),e.styles),$(this,Ih,ID).call(this,e.items),t()},p(this,td).reject)};return k(this,J0,p(this,Zm).getReader()),p(Rr,e1).add(this),t(),p(this,td).promise}update({viewport:t,onBefore:e=null}){var s;const n=t.scale*ac.pixelRatio,r=t.rotation;if(r!==p(this,Km)&&(e==null||e(),k(this,Km,r),Pp(p(this,Jm),{rotation:r})),n!==p(this,ed)){e==null||e(),k(this,ed,n);const a={div:null,properties:null,ctx:$(s=Rr,Ca,P5).call(s,p(this,j0))};for(const u of p(this,K0))a.properties=p(this,hy).get(u),a.div=u,$(this,Ih,OS).call(this,a)}}cancel(){var e;const t=new Cd("TextLayer task cancelled.");(e=p(this,J0))==null||e.cancel(t).catch(()=>{}),k(this,J0,null),p(this,td).reject(t)}get textDivs(){return p(this,K0)}get textContentItemsStr(){return p(this,cy)}static cleanup(){if(!(p(this,e1).size>0)){p(this,t1).clear();for(const{canvas:t}of p(this,Q0).values())t.remove();p(this,Q0).clear()}}};td=new WeakMap,Oo=new WeakMap,oy=new WeakMap,ay=new WeakMap,j0=new WeakMap,lh=new WeakMap,ly=new WeakMap,uy=new WeakMap,J0=new WeakMap,Jm=new WeakMap,Km=new WeakMap,ed=new WeakMap,Qm=new WeakMap,cy=new WeakMap,Zm=new WeakMap,K0=new WeakMap,hy=new WeakMap,fy=new WeakMap,t1=new WeakMap,Q0=new WeakMap,dy=new WeakMap,nd=new WeakMap,e1=new WeakMap,Ih=new WeakSet,ID=function(t){var r,s;if(p(this,oy))return;(s=p(this,lh)).ctx??(s.ctx=$(r=Rr,Ca,P5).call(r,p(this,j0)));const e=p(this,K0),n=p(this,cy);for(const a of t){if(e.length>Xq){Ge("Ignoring additional textDivs for performance reasons."),k(this,oy,!0);return}if(a.str===void 0){if(a.type==="beginMarkedContentProps"||a.type==="beginMarkedContent"){const u=p(this,Oo);k(this,Oo,document.createElement("span")),p(this,Oo).classList.add("markedContent"),a.id&&p(this,Oo).setAttribute("id",`${a.id}`),u.append(p(this,Oo))}else a.type==="endMarkedContent"&&k(this,Oo,p(this,Oo).parentNode);continue}n.push(a.str),$(this,Ih,PD).call(this,a)}},PD=function(t){var S;const e=document.createElement("span"),n={angle:0,canvasWidth:0,hasText:t.str!=="",hasEOL:t.hasEOL,fontSize:0};p(this,K0).push(e);const r=ge.transform(p(this,fy),t.transform);let s=Math.atan2(r[1],r[0]);const a=p(this,Qm)[t.fontName];a.vertical&&(s+=Math.PI/2);let u=p(this,ay)&&a.fontSubstitution||a.fontFamily;u=Rr.fontFamilyMap.get(u)||u;const c=Math.hypot(r[2],r[3]),h=c*$(S=Rr,Ca,FD).call(S,u,a,p(this,j0));let f,g;s===0?(f=r[4],g=r[5]-h):(f=r[4]+h*Math.sin(s),g=r[5]-h*Math.cos(s));const m="calc(var(--total-scale-factor) *",y=e.style;p(this,Oo)===p(this,Jm)?(y.left=`${(100*f/p(this,uy)).toFixed(2)}%`,y.top=`${(100*g/p(this,ly)).toFixed(2)}%`):(y.left=`${m}${f.toFixed(2)}px)`,y.top=`${m}${g.toFixed(2)}px)`),y.fontSize=`${m}${(p(Rr,nd)*c).toFixed(2)}px)`,y.fontFamily=u,n.fontSize=c,e.setAttribute("role","presentation"),e.textContent=t.str,e.dir=t.dir,p(this,ay)&&(e.dataset.fontName=a.fontSubstitutionLoadedName||t.fontName),s!==0&&(n.angle=s*(180/Math.PI));let w=!1;if(t.str.length>1)w=!0;else if(t.str!==" "&&t.transform[0]!==t.transform[3]){const T=Math.abs(t.transform[0]),C=Math.abs(t.transform[3]);T!==C&&Math.max(T,C)/Math.min(T,C)>1.5&&(w=!0)}if(w&&(n.canvasWidth=a.vertical?t.height:t.width),p(this,hy).set(e,n),p(this,lh).div=e,p(this,lh).properties=n,$(this,Ih,OS).call(this,p(this,lh)),n.hasText&&p(this,Oo).append(e),n.hasEOL){const T=document.createElement("br");T.setAttribute("role","presentation"),p(this,Oo).append(T)}},OS=function(t){var u;const{div:e,properties:n,ctx:r}=t,{style:s}=e;let a="";if(p(Rr,nd)>1&&(a=`scale(${1/p(Rr,nd)})`),n.canvasWidth!==0&&n.hasText){const{fontFamily:c}=s,{canvasWidth:h,fontSize:f}=n;$(u=Rr,Ca,US).call(u,r,f*p(this,ed),c);const{width:g}=r.measureText(e.textContent);g>0&&(a=`scaleX(${h*p(this,ed)/g}) ${a}`)}n.angle!==0&&(a=`rotate(${n.angle}deg) ${a}`),a.length>0&&(s.transform=a)},Ca=new WeakSet,P5=function(t=null){let e=p(this,Q0).get(t||(t=""));if(!e){const n=document.createElement("canvas");n.className="hiddenCanvasElement",n.lang=t,document.body.append(n),e=n.getContext("2d",{alpha:!1,willReadFrequently:!0}),p(this,Q0).set(t,e),p(this,dy).set(e,{size:0,family:""})}return e},US=function(t,e,n){const r=p(this,dy).get(t);e===r.size&&n===r.family||(t.font=`${e}px ${n}`,r.size=e,r.family=n)},kD=function(){if(p(this,nd)!==null)return;const t=document.createElement("div");t.style.opacity=0,t.style.lineHeight=1,t.style.fontSize="1px",t.style.position="absolute",t.textContent="X",document.body.append(t),k(this,nd,t.getBoundingClientRect().height),t.remove()},FD=function(t,e,n){const r=p(this,t1).get(t);if(r)return r;const s=$(this,Ca,P5).call(this,n);s.canvas.width=s.canvas.height=s8,$(this,Ca,US).call(this,s,s8,t);const a=s.measureText(""),u=a.fontBoundingBoxAscent,c=Math.abs(a.fontBoundingBoxDescent);s.canvas.width=s.canvas.height=0;let h=.8;return u?h=u/(u+c):(bs.platform.isFirefox&&Ge("Enable the `dom.textMetrics.fontBoundingBox.enabled` preference in `about:config` to improve TextLayer rendering."),e.ascent?h=e.ascent:e.descent&&(h=1+e.descent)),p(this,t1).set(t,h),h},z(Rr,Ca),z(Rr,t1,new Map),z(Rr,Q0,new Map),z(Rr,dy,new WeakMap),z(Rr,nd,null),z(Rr,e1,new Set);let l2=Rr;const jq=100;function BD(i={}){typeof i=="string"||i instanceof URL?i={url:i}:(i instanceof ArrayBuffer||ArrayBuffer.isView(i))&&(i={data:i});const t=new HS,{docId:e}=t,n=i.url?nq(i.url):null,r=i.data?iq(i.data):null,s=i.httpHeaders||null,a=i.withCredentials===!0,u=i.password??null,c=i.range instanceof OD?i.range:null,h=Number.isInteger(i.rangeChunkSize)&&i.rangeChunkSize>0?i.rangeChunkSize:2**16;let f=i.worker instanceof u2?i.worker:null;const g=i.verbosity,m=typeof i.docBaseUrl=="string"&&!zA(i.docBaseUrl)?i.docBaseUrl:null,y=o5(i.cMapUrl),w=i.cMapPacked!==!1,S=i.CMapReaderFactory||(io?hq:Y6),T=o5(i.iccUrl),C=o5(i.standardFontDataUrl),D=i.StandardFontDataFactory||(io?fq:$6),R=o5(i.wasmUrl),I=i.WasmFactory||(io?dq:W6),F=i.stopAtErrors!==!0,q=Number.isInteger(i.maxImageSize)&&i.maxImageSize>-1?i.maxImageSize:-1,U=i.isEvalSupported!==!1,V=typeof i.isOffscreenCanvasSupported=="boolean"?i.isOffscreenCanvasSupported:!io,tt=typeof i.isImageDecoderSupported=="boolean"?i.isImageDecoderSupported:!io&&(bs.platform.isFirefox||!globalThis.chrome),J=Number.isInteger(i.canvasMaxAreaInBytes)?i.canvasMaxAreaInBytes:-1,O=typeof i.disableFontFace=="boolean"?i.disableFontFace:io,G=i.fontExtraProperties===!0,et=i.enableXfa===!0,st=i.ownerDocument||globalThis.document,pt=i.disableRange===!0,nt=i.disableStream===!0,at=i.disableAutoFetch===!0,ht=i.pdfBug===!0,bt=i.CanvasFactory||(io?cq:aq),St=i.FilterFactory||(io?uq:lq),K=i.enableHWA===!0,P=i.useWasm!==!1,Y=c?c.length:i.length??NaN,j=typeof i.useSystemFonts=="boolean"?i.useSystemFonts:!io&&!O,ut=typeof i.useWorkerFetch=="boolean"?i.useWorkerFetch:!!(S===Y6&&D===$6&&I===W6&&y&&C&&R&&Fv(y,document.baseURI)&&Fv(C,document.baseURI)&&Fv(R,document.baseURI)),ft=null;DH(g);const mt={canvasFactory:new bt({ownerDocument:st,enableHWA:K}),filterFactory:new St({docId:e,ownerDocument:st}),cMapReaderFactory:ut?null:new S({baseUrl:y,isCompressed:w}),standardFontDataFactory:ut?null:new D({baseUrl:C}),wasmFactory:ut?null:new I({baseUrl:R})};f||(f=u2.create({verbosity:g,port:rc.workerPort}),t._worker=f);const At={docId:e,apiVersion:"5.4.449",data:r,password:u,disableAutoFetch:at,rangeChunkSize:h,length:Y,docBaseUrl:m,enableXfa:et,evaluatorOptions:{maxImageSize:q,disableFontFace:O,ignoreErrors:F,isEvalSupported:U,isOffscreenCanvasSupported:V,isImageDecoderSupported:tt,canvasMaxAreaInBytes:J,fontExtraProperties:G,useSystemFonts:j,useWasm:P,useWorkerFetch:ut,cMapUrl:y,iccUrl:T,standardFontDataUrl:C,wasmUrl:R}},Tt={ownerDocument:st,pdfBug:ht,styleElement:ft,loadingParams:{disableAutoFetch:at,enableXfa:et}};return f.promise.then(function(){if(t.destroyed)throw new Error("Loading aborted");if(f.destroyed)throw new Error("Worker was destroyed");const Xt=f.messageHandler.sendWithPromise("GetDocRequest",At,r?[r.buffer]:null);let $t;if(c)$t=new Lq(c,{disableRange:pt,disableStream:nt});else if(!r){if(!n)throw new Error("getDocument - no `url` parameter provided.");const ee=Fv(n)?kq:io?Yq:Hq;$t=new ee({url:n,length:Y,httpHeaders:s,withCredentials:a,rangeChunkSize:h,disableRange:pt,disableStream:nt})}return Xt.then(ee=>{if(t.destroyed)throw new Error("Loading aborted");if(f.destroyed)throw new Error("Worker was destroyed");const Qt=new Vv(e,ee,f.port),le=new Qq(Qt,t,$t,Tt,mt,K);t._transport=le,Qt.send("Ready",null)})}).catch(t._capability.reject),t}var bA;const AA=class AA{constructor(){Kt(this,"_capability",Promise.withResolvers());Kt(this,"_transport",null);Kt(this,"_worker",null);Kt(this,"docId",`d${Nr(AA,bA)._++}`);Kt(this,"destroyed",!1);Kt(this,"onPassword",null);Kt(this,"onProgress",null)}get promise(){return this._capability.promise}async destroy(){var t,e,n,r;this.destroyed=!0;try{(t=this._worker)!=null&&t.port&&(this._worker._pendingDestroy=!0),await((e=this._transport)==null?void 0:e.destroy())}catch(s){throw(n=this._worker)!=null&&n.port&&delete this._worker._pendingDestroy,s}this._transport=null,(r=this._worker)==null||r.destroy(),this._worker=null}async getData(){return this._transport.getData()}};bA=new WeakMap,z(AA,bA,0);let HS=AA;var Z0,py,gy,my,vy;class OD{constructor(t,e,n=!1,r=null){z(this,Z0,Promise.withResolvers());z(this,py,[]);z(this,gy,[]);z(this,my,[]);z(this,vy,[]);this.length=t,this.initialData=e,this.progressiveDone=n,this.contentDispositionFilename=r}addRangeListener(t){p(this,vy).push(t)}addProgressListener(t){p(this,my).push(t)}addProgressiveReadListener(t){p(this,gy).push(t)}addProgressiveDoneListener(t){p(this,py).push(t)}onDataRange(t,e){for(const n of p(this,vy))n(t,e)}onDataProgress(t,e){p(this,Z0).promise.then(()=>{for(const n of p(this,my))n(t,e)})}onDataProgressiveRead(t){p(this,Z0).promise.then(()=>{for(const e of p(this,gy))e(t)})}onDataProgressiveDone(){p(this,Z0).promise.then(()=>{for(const t of p(this,py))t()})}transportReady(){p(this,Z0).resolve()}requestDataRange(t,e){ui("Abstract method PDFDataRangeTransport.requestDataRange")}abort(){}}Z0=new WeakMap,py=new WeakMap,gy=new WeakMap,my=new WeakMap,vy=new WeakMap;class Jq{constructor(t,e){this._pdfInfo=t,this._transport=e}get annotationStorage(){return this._transport.annotationStorage}get canvasFactory(){return this._transport.canvasFactory}get filterFactory(){return this._transport.filterFactory}get numPages(){return this._pdfInfo.numPages}get fingerprints(){return this._pdfInfo.fingerprints}get isPureXfa(){return Ve(this,"isPureXfa",!!this._transport._htmlForXfa)}get allXfaHtml(){return this._transport._htmlForXfa}getPage(t){return this._transport.getPage(t)}getPageIndex(t){return this._transport.getPageIndex(t)}getDestinations(){return this._transport.getDestinations()}getDestination(t){return this._transport.getDestination(t)}getPageLabels(){return this._transport.getPageLabels()}getPageLayout(){return this._transport.getPageLayout()}getPageMode(){return this._transport.getPageMode()}getViewerPreferences(){return this._transport.getViewerPreferences()}getOpenAction(){return this._transport.getOpenAction()}getAttachments(){return this._transport.getAttachments()}getAnnotationsByType(t,e){return this._transport.getAnnotationsByType(t,e)}getJSActions(){return this._transport.getDocJSActions()}getOutline(){return this._transport.getOutline()}getOptionalContentConfig({intent:t="display"}={}){const{renderingIntent:e}=this._transport.getRenderingIntent(t);return this._transport.getOptionalContentConfig(e)}getPermissions(){return this._transport.getPermissions()}getMetadata(){return this._transport.getMetadata()}getMarkInfo(){return this._transport.getMarkInfo()}getData(){return this._transport.getData()}saveDocument(){return this._transport.saveDocument()}extractPages(t){return this._transport.extractPages(t)}getDownloadInfo(){return this._transport.downloadInfoCapability.promise}cleanup(t=!1){return this._transport.startCleanup(t||this.isPureXfa)}destroy(){return this.loadingTask.destroy()}cachedPageNumber(t){return this._transport.cachedPageNumber(t)}get loadingParams(){return this._transport.loadingParams}get loadingTask(){return this._transport.loadingTask}getFieldObjects(){return this._transport.getFieldObjects()}hasJSActions(){return this._transport.hasJSActions()}getCalculationOrderIds(){return this._transport.getCalculationOrderIds()}}var uh,tp,jv;class Kq{constructor(t,e,n,r=!1){z(this,tp);z(this,uh,!1);this._pageIndex=t,this._pageInfo=e,this._transport=n,this._stats=r?new O6:null,this._pdfBug=r,this.commonObjs=n.commonObjs,this.objs=new MD,this._intentStates=new Map,this.destroyed=!1,this.recordedBBoxes=null}get pageNumber(){return this._pageIndex+1}get rotate(){return this._pageInfo.rotate}get ref(){return this._pageInfo.ref}get userUnit(){return this._pageInfo.userUnit}get view(){return this._pageInfo.view}getViewport({scale:t,rotation:e=this.rotate,offsetX:n=0,offsetY:r=0,dontFlip:s=!1}={}){return new sx({viewBox:this.view,userUnit:this.userUnit,scale:t,rotation:e,offsetX:n,offsetY:r,dontFlip:s})}getAnnotations({intent:t="display"}={}){const{renderingIntent:e}=this._transport.getRenderingIntent(t);return this._transport.getAnnotations(this._pageIndex,e)}getJSActions(){return this._transport.getPageJSActions(this._pageIndex)}get filterFactory(){return this._transport.filterFactory}get isPureXfa(){return Ve(this,"isPureXfa",!!this._transport._htmlForXfa)}async getXfa(){var t;return((t=this._transport._htmlForXfa)==null?void 0:t.children[this._pageIndex])||null}render({canvasContext:t,canvas:e=t.canvas,viewport:n,intent:r="display",annotationMode:s=Mf.ENABLE,transform:a=null,background:u=null,optionalContentConfigPromise:c=null,annotationCanvasMap:h=null,pageColors:f=null,printAnnotationStorage:g=null,isEditing:m=!1,recordOperations:y=!1,operationsFilter:w=null}){var tt,J,O;(tt=this._stats)==null||tt.time("Overall");const S=this._transport.getRenderingIntent(r,s,g,m),{renderingIntent:T,cacheKey:C}=S;k(this,uh,!1),c||(c=this._transport.getOptionalContentConfig(T));let D=this._intentStates.get(C);D||(D=Object.create(null),this._intentStates.set(C,D)),D.streamReaderCancelTimeout&&(clearTimeout(D.streamReaderCancelTimeout),D.streamReaderCancelTimeout=null);const R=!!(T&_a.PRINT);D.displayReadyCapability||(D.displayReadyCapability=Promise.withResolvers(),D.operatorList={fnArray:[],argsArray:[],lastChunk:!1,separateAnnots:null},(J=this._stats)==null||J.time("Page Request"),this._pumpOperatorList(S));const I=!!(this._pdfBug&&((O=globalThis.StepperManager)!=null&&O.enabled)),F=!this.recordedBBoxes&&(y||I),q=G=>{var et,st;if(D.renderTasks.delete(U),F){const pt=(et=U.gfx)==null?void 0:et.dependencyTracker.take();pt&&(U.stepper&&U.stepper.setOperatorBBoxes(pt,U.gfx.dependencyTracker.takeDebugMetadata()),y&&(this.recordedBBoxes=pt))}R&&k(this,uh,!0),$(this,tp,jv).call(this),G?(U.capability.reject(G),this._abortOperatorList({intentState:D,reason:G instanceof Error?G:new Error(G)})):U.capability.resolve(),this._stats&&(this._stats.timeEnd("Rendering"),this._stats.timeEnd("Overall"),(st=globalThis.Stats)!=null&&st.enabled&&globalThis.Stats.add(this.pageNumber,this._stats))},U=new qS({callback:q,params:{canvas:e,canvasContext:t,dependencyTracker:F?new gq(e,D.operatorList.length,I):null,viewport:n,transform:a,background:u},objs:this.objs,commonObjs:this.commonObjs,annotationCanvasMap:h,operatorList:D.operatorList,pageIndex:this._pageIndex,canvasFactory:this._transport.canvasFactory,filterFactory:this._transport.filterFactory,useRequestAnimationFrame:!R,pdfBug:this._pdfBug,pageColors:f,enableHWA:this._transport.enableHWA,operationsFilter:w});(D.renderTasks||(D.renderTasks=new Set)).add(U);const V=U.task;return Promise.all([D.displayReadyCapability.promise,c]).then(([G,et])=>{var st;if(this.destroyed){q();return}if((st=this._stats)==null||st.time("Rendering"),!(et.renderingIntent&T))throw new Error("Must use the same `intent`-argument when calling the `PDFPageProxy.render` and `PDFDocumentProxy.getOptionalContentConfig` methods.");U.initializeGraphics({transparency:G,optionalContentConfig:et}),U.operatorListChanged()}).catch(q),V}getOperatorList({intent:t="display",annotationMode:e=Mf.ENABLE,printAnnotationStorage:n=null,isEditing:r=!1}={}){var h;function s(){u.operatorList.lastChunk&&(u.opListReadCapability.resolve(u.operatorList),u.renderTasks.delete(c))}const a=this._transport.getRenderingIntent(t,e,n,r,!0);let u=this._intentStates.get(a.cacheKey);u||(u=Object.create(null),this._intentStates.set(a.cacheKey,u));let c;return u.opListReadCapability||(c=Object.create(null),c.operatorListChanged=s,u.opListReadCapability=Promise.withResolvers(),(u.renderTasks||(u.renderTasks=new Set)).add(c),u.operatorList={fnArray:[],argsArray:[],lastChunk:!1,separateAnnots:null},(h=this._stats)==null||h.time("Page Request"),this._pumpOperatorList(a)),u.opListReadCapability.promise}streamTextContent({includeMarkedContent:t=!1,disableNormalization:e=!1}={}){return this._transport.messageHandler.sendWithStream("GetTextContent",{pageIndex:this._pageIndex,includeMarkedContent:t===!0,disableNormalization:e===!0},{highWaterMark:100,size(r){return r.items.length}})}getTextContent(t={}){if(this._transport._htmlForXfa)return this.getXfa().then(n=>a2.textContent(n));const e=this.streamTextContent(t);return new Promise(function(n,r){function s(){a.read().then(function({value:c,done:h}){if(h){n(u);return}u.lang??(u.lang=c.lang),Object.assign(u.styles,c.styles),u.items.push(...c.items),s()},r)}const a=e.getReader(),u={items:[],styles:Object.create(null),lang:null};s()})}getStructTree(){return this._transport.getStructTree(this._pageIndex)}_destroy(){this.destroyed=!0;const t=[];for(const e of this._intentStates.values())if(this._abortOperatorList({intentState:e,reason:new Error("Page was destroyed."),force:!0}),!e.opListReadCapability)for(const n of e.renderTasks)t.push(n.completed),n.cancel();return this.objs.clear(),k(this,uh,!1),Promise.all(t)}cleanup(t=!1){k(this,uh,!0);const e=$(this,tp,jv).call(this);return t&&e&&this._stats&&(this._stats=new O6),e}_startRenderPage(t,e){var r,s;const n=this._intentStates.get(e);n&&((r=this._stats)==null||r.timeEnd("Page Request"),(s=n.displayReadyCapability)==null||s.resolve(t))}_renderPageChunk(t,e){for(let n=0,r=t.length;n<r;n++)e.operatorList.fnArray.push(t.fnArray[n]),e.operatorList.argsArray.push(t.argsArray[n]);e.operatorList.lastChunk=t.lastChunk,e.operatorList.separateAnnots=t.separateAnnots;for(const n of e.renderTasks)n.operatorListChanged();t.lastChunk&&$(this,tp,jv).call(this)}_pumpOperatorList({renderingIntent:t,cacheKey:e,annotationStorageSerializable:n,modifiedIds:r}){const{map:s,transfer:a}=n,c=this._transport.messageHandler.sendWithStream("GetOperatorList",{pageIndex:this._pageIndex,intent:t,cacheKey:e,annotationStorage:s,modifiedIds:r},a).getReader(),h=this._intentStates.get(e);h.streamReader=c;const f=()=>{c.read().then(({value:g,done:m})=>{if(m){h.streamReader=null;return}this._transport.destroyed||(this._renderPageChunk(g,h),f())},g=>{if(h.streamReader=null,!this._transport.destroyed){if(h.operatorList){h.operatorList.lastChunk=!0;for(const m of h.renderTasks)m.operatorListChanged();$(this,tp,jv).call(this)}if(h.displayReadyCapability)h.displayReadyCapability.reject(g);else if(h.opListReadCapability)h.opListReadCapability.reject(g);else throw g}})};f()}_abortOperatorList({intentState:t,reason:e,force:n=!1}){if(t.streamReader){if(t.streamReaderCancelTimeout&&(clearTimeout(t.streamReaderCancelTimeout),t.streamReaderCancelTimeout=null),!n){if(t.renderTasks.size>0)return;if(e instanceof rC){let r=jq;e.extraDelay>0&&e.extraDelay<1e3&&(r+=e.extraDelay),t.streamReaderCancelTimeout=setTimeout(()=>{t.streamReaderCancelTimeout=null,this._abortOperatorList({intentState:t,reason:e,force:!0})},r);return}}if(t.streamReader.cancel(new Cd(e.message)).catch(()=>{}),t.streamReader=null,!this._transport.destroyed){for(const[r,s]of this._intentStates)if(s===t){this._intentStates.delete(r);break}this.cleanup()}}}get stats(){return this._stats}}uh=new WeakMap,tp=new WeakSet,jv=function(){if(!p(this,uh)||this.destroyed)return!1;for(const{renderTasks:t,operatorList:e}of this._intentStates.values())if(t.size>0||!e.lastChunk)return!1;return this._intentStates.clear(),this.objs.clear(),k(this,uh,!1),!0};var id,Ul,ch,ep,_A,np,ip,so,k5,UD,HD,Jv,n1,F5;const Ii=class Ii{constructor({name:t=null,port:e=null,verbosity:n=LH()}={}){z(this,so);z(this,id,Promise.withResolvers());z(this,Ul,null);z(this,ch,null);z(this,ep,null);if(this.name=t,this.destroyed=!1,this.verbosity=n,e){if(p(Ii,ip).has(e))throw new Error("Cannot use more than one PDFWorker per port.");p(Ii,ip).set(e,this),$(this,so,UD).call(this,e)}else $(this,so,HD).call(this)}get promise(){return p(this,id).promise}get port(){return p(this,ch)}get messageHandler(){return p(this,Ul)}destroy(){var t,e;this.destroyed=!0,(t=p(this,ep))==null||t.terminate(),k(this,ep,null),p(Ii,ip).delete(p(this,ch)),k(this,ch,null),(e=p(this,Ul))==null||e.destroy(),k(this,Ul,null)}static create(t){const e=p(this,ip).get(t==null?void 0:t.port);if(e){if(e._pendingDestroy)throw new Error("PDFWorker.create - the worker is being destroyed.\nPlease remember to await `PDFDocumentLoadingTask.destroy()`-calls.");return e}return new Ii(t)}static get workerSrc(){if(rc.workerSrc)return rc.workerSrc;throw new Error('No "GlobalWorkerOptions.workerSrc" specified.')}static get _setupFakeWorkerGlobal(){return Ve(this,"_setupFakeWorkerGlobal",(async()=>p(this,n1,F5)?p(this,n1,F5):(await import(this.workerSrc)).WorkerMessageHandler)())}};id=new WeakMap,Ul=new WeakMap,ch=new WeakMap,ep=new WeakMap,_A=new WeakMap,np=new WeakMap,ip=new WeakMap,so=new WeakSet,k5=function(){p(this,id).resolve(),p(this,Ul).send("configure",{verbosity:this.verbosity})},UD=function(t){k(this,ch,t),k(this,Ul,new Vv("main","worker",t)),p(this,Ul).on("ready",()=>{}),$(this,so,k5).call(this)},HD=function(){if(p(Ii,np)||p(Ii,n1,F5)){$(this,so,Jv).call(this);return}let{workerSrc:t}=Ii;try{Ii._isSameOrigin(window.location,t)||(t=Ii._createCDNWrapper(new URL(t,window.location).href));const e=new Worker(t,{type:"module"}),n=new Vv("main","worker",e),r=()=>{s.abort(),n.destroy(),e.terminate(),this.destroyed?p(this,id).reject(new Error("Worker was destroyed")):$(this,so,Jv).call(this)},s=new AbortController;e.addEventListener("error",()=>{p(this,ep)||r()},{signal:s.signal}),n.on("test",u=>{if(s.abort(),this.destroyed||!u){r();return}k(this,Ul,n),k(this,ch,e),k(this,ep,e),$(this,so,k5).call(this)}),n.on("ready",u=>{if(s.abort(),this.destroyed){r();return}try{a()}catch{$(this,so,Jv).call(this)}});const a=()=>{const u=new Uint8Array;n.send("test",u,[u.buffer])};a();return}catch{qA("The worker has been disabled.")}$(this,so,Jv).call(this)},Jv=function(){p(Ii,np)||(Ge("Setting up fake worker."),k(Ii,np,!0)),Ii._setupFakeWorkerGlobal.then(t=>{if(this.destroyed){p(this,id).reject(new Error("Worker was destroyed"));return}const e=new oq;k(this,ch,e);const n=`fake${Nr(Ii,_A)._++}`,r=new Vv(n+"_worker",n,e);t.setup(r,e),k(this,Ul,new Vv(n,n+"_worker",e)),$(this,so,k5).call(this)}).catch(t=>{p(this,id).reject(new Error(`Setting up fake worker failed: "${t.message}".`))})},n1=new WeakSet,F5=function(){var t;try{return((t=globalThis.pdfjsWorker)==null?void 0:t.WorkerMessageHandler)||null}catch{return null}},z(Ii,n1),z(Ii,_A,0),z(Ii,np,!1),z(Ii,ip,new WeakMap),io&&(k(Ii,np,!0),rc.workerSrc||(rc.workerSrc="./pdf.worker.mjs")),Ii._isSameOrigin=(t,e)=>{const n=URL.parse(t);if(!(n!=null&&n.origin)||n.origin==="null")return!1;const r=new URL(e,n);return n.origin===r.origin},Ii._createCDNWrapper=t=>{const e=`await import("${t}");`;return URL.createObjectURL(new Blob([e],{type:"text/javascript"}))},Ii.fromPort=t=>{if(GH("`PDFWorker.fromPort` - please use `PDFWorker.create` instead."),!(t!=null&&t.port))throw new Error("PDFWorker.fromPort - invalid method signature.");return Ii.create(t)};let u2=Ii;var hh,Xu,i1,r1,fh,rp,Kv;class Qq{constructor(t,e,n,r,s,a){z(this,rp);z(this,hh,new Map);z(this,Xu,new Map);z(this,i1,new Map);z(this,r1,new Map);z(this,fh,null);this.messageHandler=t,this.loadingTask=e,this.commonObjs=new MD,this.fontLoader=new tq({ownerDocument:r.ownerDocument,styleElement:r.styleElement}),this.loadingParams=r.loadingParams,this._params=r,this.canvasFactory=s.canvasFactory,this.filterFactory=s.filterFactory,this.cMapReaderFactory=s.cMapReaderFactory,this.standardFontDataFactory=s.standardFontDataFactory,this.wasmFactory=s.wasmFactory,this.destroyed=!1,this.destroyCapability=null,this._networkStream=n,this._fullReader=null,this._lastProgress=null,this.downloadInfoCapability=Promise.withResolvers(),this.enableHWA=a,this.setupMessageHandler()}get annotationStorage(){return Ve(this,"annotationStorage",new oC)}getRenderingIntent(t,e=Mf.ENABLE,n=null,r=!1,s=!1){let a=_a.DISPLAY,u=wS;switch(t){case"any":a=_a.ANY;break;case"display":break;case"print":a=_a.PRINT;break;default:Ge(`getRenderingIntent - invalid intent: ${t}`)}const c=a&_a.PRINT&&n instanceof mD?n:this.annotationStorage;switch(e){case Mf.DISABLE:a+=_a.ANNOTATIONS_DISABLE;break;case Mf.ENABLE:break;case Mf.ENABLE_FORMS:a+=_a.ANNOTATIONS_FORMS;break;case Mf.ENABLE_STORAGE:a+=_a.ANNOTATIONS_STORAGE,u=c.serializable;break;default:Ge(`getRenderingIntent - invalid annotationMode: ${e}`)}r&&(a+=_a.IS_EDITING),s&&(a+=_a.OPLIST);const{ids:h,hash:f}=c.modifiedIds,g=[a,u.hash,f];return{renderingIntent:a,cacheKey:g.join("_"),annotationStorageSerializable:u,modifiedIds:h}}destroy(){var n;if(this.destroyCapability)return this.destroyCapability.promise;this.destroyed=!0,this.destroyCapability=Promise.withResolvers(),(n=p(this,fh))==null||n.reject(new Error("Worker was destroyed during onPassword callback"));const t=[];for(const r of p(this,Xu).values())t.push(r._destroy());p(this,Xu).clear(),p(this,i1).clear(),p(this,r1).clear(),this.hasOwnProperty("annotationStorage")&&this.annotationStorage.resetModified();const e=this.messageHandler.sendWithPromise("Terminate",null);return t.push(e),Promise.all(t).then(()=>{var r,s;this.commonObjs.clear(),this.fontLoader.clear(),p(this,hh).clear(),this.filterFactory.destroy(),l2.cleanup(),(r=this._networkStream)==null||r.cancelAllRequests(new Cd("Worker was terminated.")),(s=this.messageHandler)==null||s.destroy(),this.messageHandler=null,this.destroyCapability.resolve()},this.destroyCapability.reject),this.destroyCapability.promise}setupMessageHandler(){const{messageHandler:t,loadingTask:e}=this;t.on("GetReader",(n,r)=>{bn(this._networkStream,"GetReader - no `IPDFStream` instance available."),this._fullReader=this._networkStream.getFullReader(),this._fullReader.onProgress=s=>{this._lastProgress={loaded:s.loaded,total:s.total}},r.onPull=()=>{this._fullReader.read().then(function({value:s,done:a}){if(a){r.close();return}bn(s instanceof ArrayBuffer,"GetReader - expected an ArrayBuffer."),r.enqueue(new Uint8Array(s),1,[s])}).catch(s=>{r.error(s)})},r.onCancel=s=>{this._fullReader.cancel(s),r.ready.catch(a=>{if(!this.destroyed)throw a})}}),t.on("ReaderHeadersReady",async n=>{var u;await this._fullReader.headersReady;const{isStreamingSupported:r,isRangeSupported:s,contentLength:a}=this._fullReader;return(!r||!s)&&(this._lastProgress&&((u=e.onProgress)==null||u.call(e,this._lastProgress)),this._fullReader.onProgress=c=>{var h;(h=e.onProgress)==null||h.call(e,{loaded:c.loaded,total:c.total})}),{isStreamingSupported:r,isRangeSupported:s,contentLength:a}}),t.on("GetRangeReader",(n,r)=>{bn(this._networkStream,"GetRangeReader - no `IPDFStream` instance available.");const s=this._networkStream.getRangeReader(n.begin,n.end);if(!s){r.close();return}r.onPull=()=>{s.read().then(function({value:a,done:u}){if(u){r.close();return}bn(a instanceof ArrayBuffer,"GetRangeReader - expected an ArrayBuffer."),r.enqueue(new Uint8Array(a),1,[a])}).catch(a=>{r.error(a)})},r.onCancel=a=>{s.cancel(a),r.ready.catch(u=>{if(!this.destroyed)throw u})}}),t.on("GetDoc",({pdfInfo:n})=>{this._numPages=n.numPages,this._htmlForXfa=n.htmlForXfa,delete n.htmlForXfa,e._capability.resolve(new Jq(n,this))}),t.on("DocException",n=>{e._capability.reject(Mo(n))}),t.on("PasswordRequest",n=>{k(this,fh,Promise.withResolvers());try{if(!e.onPassword)throw Mo(n);const r=s=>{s instanceof Error?p(this,fh).reject(s):p(this,fh).resolve({password:s})};e.onPassword(r,n.code)}catch(r){p(this,fh).reject(r)}return p(this,fh).promise}),t.on("DataLoaded",n=>{var r;(r=e.onProgress)==null||r.call(e,{loaded:n.length,total:n.length}),this.downloadInfoCapability.resolve(n)}),t.on("StartRenderPage",n=>{if(this.destroyed)return;p(this,Xu).get(n.pageIndex)._startRenderPage(n.transparency,n.cacheKey)}),t.on("commonobj",([n,r,s])=>{var a;if(this.destroyed||this.commonObjs.has(n))return null;switch(r){case"Font":if("error"in s){const m=s.error;Ge(`Error during font loading: ${m}`),this.commonObjs.resolve(n,m);break}const u=new SS(s),c=this._params.pdfBug&&((a=globalThis.FontInspector)!=null&&a.enabled)?(m,y)=>globalThis.FontInspector.fontAdded(m,y):null,h=new eq(u,c,s.extra,s.charProcOperatorList);this.fontLoader.bind(h).catch(()=>t.sendWithPromise("FontFallback",{id:n})).finally(()=>{!h.fontExtraProperties&&h.data&&h.clearData(),this.commonObjs.resolve(n,h)});break;case"CopyLocalImage":const{imageRef:f}=s;bn(f,"The imageRef must be defined.");for(const m of p(this,Xu).values())for(const[,y]of m.objs)if((y==null?void 0:y.ref)===f)return y.dataLen?(this.commonObjs.resolve(n,structuredClone(y)),y.dataLen):null;break;case"FontPath":case"Image":this.commonObjs.resolve(n,s);break;case"Pattern":const g=new ES(s);this.commonObjs.resolve(n,g.getIR());break;default:throw new Error(`Got unknown common object type ${r}`)}return null}),t.on("obj",([n,r,s,a])=>{var c;if(this.destroyed)return;const u=p(this,Xu).get(r);if(!u.objs.has(n)){if(u._intentStates.size===0){(c=a==null?void 0:a.bitmap)==null||c.close();return}switch(s){case"Image":case"Pattern":u.objs.resolve(n,a);break;default:throw new Error(`Got unknown object type ${s}`)}}}),t.on("DocProgress",n=>{var r;this.destroyed||(r=e.onProgress)==null||r.call(e,{loaded:n.loaded,total:n.total})}),t.on("FetchBinaryData",async n=>{if(this.destroyed)throw new Error("Worker was destroyed.");const r=this[n.type];if(!r)throw new Error(`${n.type} not initialized, see the \`useWorkerFetch\` parameter.`);return r.fetch(n)})}getData(){return this.messageHandler.sendWithPromise("GetData",null)}saveDocument(){var n;this.annotationStorage.size<=0&&Ge("saveDocument called while `annotationStorage` is empty, please use the getData-method instead.");const{map:t,transfer:e}=this.annotationStorage.serializable;return this.messageHandler.sendWithPromise("SaveDocument",{isPureXfa:!!this._htmlForXfa,numPages:this._numPages,annotationStorage:t,filename:((n=this._fullReader)==null?void 0:n.filename)??null},e).finally(()=>{this.annotationStorage.resetModified()})}extractPages(t){return this.messageHandler.sendWithPromise("ExtractPages",{pageInfos:t})}getPage(t){if(!Number.isInteger(t)||t<=0||t>this._numPages)return Promise.reject(new Error("Invalid page request."));const e=t-1,n=p(this,i1).get(e);if(n)return n;const r=this.messageHandler.sendWithPromise("GetPage",{pageIndex:e}).then(s=>{if(this.destroyed)throw new Error("Transport destroyed");s.refStr&&p(this,r1).set(s.refStr,t);const a=new Kq(e,s,this,this._params.pdfBug);return p(this,Xu).set(e,a),a});return p(this,i1).set(e,r),r}getPageIndex(t){return CS(t)?this.messageHandler.sendWithPromise("GetPageIndex",{num:t.num,gen:t.gen}):Promise.reject(new Error("Invalid pageIndex request."))}getAnnotations(t,e){return this.messageHandler.sendWithPromise("GetAnnotations",{pageIndex:t,intent:e})}getFieldObjects(){return $(this,rp,Kv).call(this,"GetFieldObjects")}hasJSActions(){return $(this,rp,Kv).call(this,"HasJSActions")}getCalculationOrderIds(){return this.messageHandler.sendWithPromise("GetCalculationOrderIds",null)}getDestinations(){return this.messageHandler.sendWithPromise("GetDestinations",null)}getDestination(t){return typeof t!="string"?Promise.reject(new Error("Invalid destination request.")):this.messageHandler.sendWithPromise("GetDestination",{id:t})}getPageLabels(){return this.messageHandler.sendWithPromise("GetPageLabels",null)}getPageLayout(){return this.messageHandler.sendWithPromise("GetPageLayout",null)}getPageMode(){return this.messageHandler.sendWithPromise("GetPageMode",null)}getViewerPreferences(){return this.messageHandler.sendWithPromise("GetViewerPreferences",null)}getOpenAction(){return this.messageHandler.sendWithPromise("GetOpenAction",null)}getAttachments(){return this.messageHandler.sendWithPromise("GetAttachments",null)}getAnnotationsByType(t,e){return this.messageHandler.sendWithPromise("GetAnnotationsByType",{types:t,pageIndexesToSkip:e})}getDocJSActions(){return $(this,rp,Kv).call(this,"GetDocJSActions")}getPageJSActions(t){return this.messageHandler.sendWithPromise("GetPageJSActions",{pageIndex:t})}getStructTree(t){return this.messageHandler.sendWithPromise("GetStructTree",{pageIndex:t})}getOutline(){return this.messageHandler.sendWithPromise("GetOutline",null)}getOptionalContentConfig(t){return $(this,rp,Kv).call(this,"GetOptionalContentConfig").then(e=>new Dq(e,t))}getPermissions(){return this.messageHandler.sendWithPromise("GetPermissions",null)}getMetadata(){const t="GetMetadata",e=p(this,hh).get(t);if(e)return e;const n=this.messageHandler.sendWithPromise(t,null).then(r=>{var s,a;return{info:r[0],metadata:r[1]?new Nq(r[1]):null,contentDispositionFilename:((s=this._fullReader)==null?void 0:s.filename)??null,contentLength:((a=this._fullReader)==null?void 0:a.contentLength)??null,hasStructTree:r[2]}});return p(this,hh).set(t,n),n}getMarkInfo(){return this.messageHandler.sendWithPromise("GetMarkInfo",null)}async startCleanup(t=!1){if(!this.destroyed){await this.messageHandler.sendWithPromise("Cleanup",null);for(const e of p(this,Xu).values())if(!e.cleanup())throw new Error(`startCleanup: Page ${e.pageNumber} is currently rendering.`);this.commonObjs.clear(),t||this.fontLoader.clear(),p(this,hh).clear(),this.filterFactory.destroy(!0),l2.cleanup()}}cachedPageNumber(t){if(!CS(t))return null;const e=t.gen===0?`${t.num}R`:`${t.num}R${t.gen}`;return p(this,r1).get(e)??null}}hh=new WeakMap,Xu=new WeakMap,i1=new WeakMap,r1=new WeakMap,fh=new WeakMap,rp=new WeakSet,Kv=function(t,e=null){const n=p(this,hh).get(t);if(n)return n;const r=this.messageHandler.sendWithPromise(t,e);return p(this,hh).set(t,r),r};var rd;class Zq{constructor(t){z(this,rd,null);Kt(this,"onContinue",null);Kt(this,"onError",null);k(this,rd,t)}get promise(){return p(this,rd).capability.promise}cancel(t=0){p(this,rd).cancel(null,t)}get separateAnnots(){const{separateAnnots:t}=p(this,rd).operatorList;if(!t)return!1;const{annotationCanvasMap:e}=p(this,rd);return t.form||t.canvas&&(e==null?void 0:e.size)>0}}rd=new WeakMap;var sd,sp;const m0=class m0{constructor({callback:t,params:e,objs:n,commonObjs:r,annotationCanvasMap:s,operatorList:a,pageIndex:u,canvasFactory:c,filterFactory:h,useRequestAnimationFrame:f=!1,pdfBug:g=!1,pageColors:m=null,enableHWA:y=!1,operationsFilter:w=null}){z(this,sd,null);this.callback=t,this.params=e,this.objs=n,this.commonObjs=r,this.annotationCanvasMap=s,this.operatorListIdx=null,this.operatorList=a,this._pageIndex=u,this.canvasFactory=c,this.filterFactory=h,this._pdfBug=g,this.pageColors=m,this.running=!1,this.graphicsReadyCallback=null,this.graphicsReady=!1,this._useRequestAnimationFrame=f===!0&&typeof window<"u",this.cancelled=!1,this.capability=Promise.withResolvers(),this.task=new Zq(this),this._cancelBound=this.cancel.bind(this),this._continueBound=this._continue.bind(this),this._scheduleNextBound=this._scheduleNext.bind(this),this._nextBound=this._next.bind(this),this._canvas=e.canvas,this._canvasContext=e.canvas?null:e.canvasContext,this._enableHWA=y,this._dependencyTracker=e.dependencyTracker,this._operationsFilter=w}get completed(){return this.capability.promise.catch(function(){})}initializeGraphics({transparency:t=!1,optionalContentConfig:e}){var c,h;if(this.cancelled)return;if(this._canvas){if(p(m0,sp).has(this._canvas))throw new Error("Cannot use the same canvas during multiple render() operations. Use different canvas or ensure previous operations were cancelled or completed.");p(m0,sp).add(this._canvas)}this._pdfBug&&((c=globalThis.StepperManager)!=null&&c.enabled)&&(this.stepper=globalThis.StepperManager.create(this._pageIndex),this.stepper.init(this.operatorList),this.stepper.nextBreakPoint=this.stepper.getNextBreakPoint());const{viewport:n,transform:r,background:s,dependencyTracker:a}=this.params,u=this._canvasContext||this._canvas.getContext("2d",{alpha:!1,willReadFrequently:!this._enableHWA});this.gfx=new om(u,this.commonObjs,this.objs,this.canvasFactory,this.filterFactory,{optionalContentConfig:e},this.annotationCanvasMap,this.pageColors,a),this.gfx.beginDrawing({transform:r,viewport:n,transparency:t,background:s}),this.operatorListIdx=0,this.graphicsReady=!0,(h=this.graphicsReadyCallback)==null||h.call(this)}cancel(t=null,e=0){var n,r,s;this.running=!1,this.cancelled=!0,(n=this.gfx)==null||n.endDrawing(),p(this,sd)&&(window.cancelAnimationFrame(p(this,sd)),k(this,sd,null)),p(m0,sp).delete(this._canvas),t||(t=new rC(`Rendering cancelled, page ${this._pageIndex+1}`,e)),this.callback(t),(s=(r=this.task).onError)==null||s.call(r,t)}operatorListChanged(){var t,e;if(!this.graphicsReady){this.graphicsReadyCallback||(this.graphicsReadyCallback=this._continueBound);return}(t=this.gfx.dependencyTracker)==null||t.growOperationsCount(this.operatorList.fnArray.length),(e=this.stepper)==null||e.updateOperatorList(this.operatorList),!this.running&&this._continue()}_continue(){this.running=!0,!this.cancelled&&(this.task.onContinue?this.task.onContinue(this._scheduleNextBound):this._scheduleNext())}_scheduleNext(){this._useRequestAnimationFrame?k(this,sd,window.requestAnimationFrame(()=>{k(this,sd,null),this._nextBound().catch(this._cancelBound)})):Promise.resolve().then(this._nextBound).catch(this._cancelBound)}async _next(){this.cancelled||(this.operatorListIdx=this.gfx.executeOperatorList(this.operatorList,this.operatorListIdx,this._continueBound,this.stepper,this._operationsFilter),this.operatorListIdx===this.operatorList.argsArray.length&&(this.running=!1,this.operatorList.lastChunk&&(this.gfx.endDrawing(),p(m0,sp).delete(this._canvas),this.callback())))}};sd=new WeakMap,sp=new WeakMap,z(m0,sp,new WeakSet);let qS=m0;const qD="5.4.449",tz="f44e5f0e6";var ua,op,s1,Mr,yy,o1,dh,xy,od,Hl,by,Zn,zS,GS,VS,c0,zD,Lf;const Io=class Io{constructor({editor:t=null,uiManager:e=null}){z(this,Zn);z(this,ua,null);z(this,op,null);z(this,s1);z(this,Mr,null);z(this,yy,!1);z(this,o1,!1);z(this,dh,null);z(this,xy);z(this,od,null);z(this,Hl,null);var n,r;t?(k(this,o1,!1),k(this,dh,t)):k(this,o1,!0),k(this,Hl,(t==null?void 0:t._uiManager)||e),k(this,xy,p(this,Hl)._eventBus),k(this,s1,((n=t==null?void 0:t.color)==null?void 0:n.toUpperCase())||((r=p(this,Hl))==null?void 0:r.highlightColors.values().next().value)||"#FFFF98"),p(Io,by)||k(Io,by,Object.freeze({blue:"pdfjs-editor-colorpicker-blue",green:"pdfjs-editor-colorpicker-green",pink:"pdfjs-editor-colorpicker-pink",red:"pdfjs-editor-colorpicker-red",yellow:"pdfjs-editor-colorpicker-yellow"}))}static get _keyboardManager(){return Ve(this,"_keyboardManager",new ax([[["Escape","mac+Escape"],Io.prototype._hideDropdownFromKeyboard],[[" ","mac+ "],Io.prototype._colorSelectFromKeyboard],[["ArrowDown","ArrowRight","mac+ArrowDown","mac+ArrowRight"],Io.prototype._moveToNext],[["ArrowUp","ArrowLeft","mac+ArrowUp","mac+ArrowLeft"],Io.prototype._moveToPrevious],[["Home","mac+Home"],Io.prototype._moveToBeginning],[["End","mac+End"],Io.prototype._moveToEnd]]))}renderButton(){const t=k(this,ua,document.createElement("button"));t.className="colorPicker",t.tabIndex="0",t.setAttribute("data-l10n-id","pdfjs-editor-colorpicker-button"),t.ariaHasPopup="true",p(this,dh)&&(t.ariaControls=`${p(this,dh).id}_colorpicker_dropdown`);const e=p(this,Hl)._signal;t.addEventListener("click",$(this,Zn,c0).bind(this),{signal:e}),t.addEventListener("keydown",$(this,Zn,VS).bind(this),{signal:e});const n=k(this,op,document.createElement("span"));return n.className="swatch",n.ariaHidden="true",n.style.backgroundColor=p(this,s1),t.append(n),t}renderMainDropdown(){const t=k(this,Mr,$(this,Zn,zS).call(this));return t.ariaOrientation="horizontal",t.ariaLabelledBy="highlightColorPickerLabel",t}_colorSelectFromKeyboard(t){if(t.target===p(this,ua)){$(this,Zn,c0).call(this,t);return}const e=t.target.getAttribute("data-color");e&&$(this,Zn,GS).call(this,e,t)}_moveToNext(t){var e,n;if(!p(this,Zn,Lf)){$(this,Zn,c0).call(this,t);return}if(t.target===p(this,ua)){(e=p(this,Mr).firstElementChild)==null||e.focus();return}(n=t.target.nextSibling)==null||n.focus()}_moveToPrevious(t){var e,n;if(t.target===((e=p(this,Mr))==null?void 0:e.firstElementChild)||t.target===p(this,ua)){p(this,Zn,Lf)&&this._hideDropdownFromKeyboard();return}p(this,Zn,Lf)||$(this,Zn,c0).call(this,t),(n=t.target.previousSibling)==null||n.focus()}_moveToBeginning(t){var e;if(!p(this,Zn,Lf)){$(this,Zn,c0).call(this,t);return}(e=p(this,Mr).firstElementChild)==null||e.focus()}_moveToEnd(t){var e;if(!p(this,Zn,Lf)){$(this,Zn,c0).call(this,t);return}(e=p(this,Mr).lastElementChild)==null||e.focus()}hideDropdown(){var t,e;(t=p(this,Mr))==null||t.classList.add("hidden"),p(this,ua).ariaExpanded="false",(e=p(this,od))==null||e.abort(),k(this,od,null)}_hideDropdownFromKeyboard(){var t;if(!p(this,o1)){if(!p(this,Zn,Lf)){(t=p(this,dh))==null||t.unselect();return}this.hideDropdown(),p(this,ua).focus({preventScroll:!0,focusVisible:p(this,yy)})}}updateColor(t){if(p(this,op)&&(p(this,op).style.backgroundColor=t),!p(this,Mr))return;const e=p(this,Hl).highlightColors.values();for(const n of p(this,Mr).children)n.ariaSelected=e.next().value===t.toUpperCase()}destroy(){var t,e;(t=p(this,ua))==null||t.remove(),k(this,ua,null),k(this,op,null),(e=p(this,Mr))==null||e.remove(),k(this,Mr,null)}};ua=new WeakMap,op=new WeakMap,s1=new WeakMap,Mr=new WeakMap,yy=new WeakMap,o1=new WeakMap,dh=new WeakMap,xy=new WeakMap,od=new WeakMap,Hl=new WeakMap,by=new WeakMap,Zn=new WeakSet,zS=function(){const t=document.createElement("div"),e=p(this,Hl)._signal;t.addEventListener("contextmenu",ll,{signal:e}),t.className="dropdown",t.role="listbox",t.ariaMultiSelectable="false",t.ariaOrientation="vertical",t.setAttribute("data-l10n-id","pdfjs-editor-colorpicker-dropdown"),p(this,dh)&&(t.id=`${p(this,dh).id}_colorpicker_dropdown`);for(const[n,r]of p(this,Hl).highlightColors){const s=document.createElement("button");s.tabIndex="0",s.role="option",s.setAttribute("data-color",r),s.title=n,s.setAttribute("data-l10n-id",p(Io,by)[n]);const a=document.createElement("span");s.append(a),a.className="swatch",a.style.backgroundColor=r,s.ariaSelected=r===p(this,s1),s.addEventListener("click",$(this,Zn,GS).bind(this,r),{signal:e}),t.append(s)}return t.addEventListener("keydown",$(this,Zn,VS).bind(this),{signal:e}),t},GS=function(t,e){e.stopPropagation(),p(this,xy).dispatch("switchannotationeditorparams",{source:this,type:xn.HIGHLIGHT_COLOR,value:t}),this.updateColor(t)},VS=function(t){Io._keyboardManager.exec(this,t)},c0=function(t){if(p(this,Zn,Lf)){this.hideDropdown();return}if(k(this,yy,t.detail===0),p(this,od)||(k(this,od,new AbortController),window.addEventListener("pointerdown",$(this,Zn,zD).bind(this),{signal:p(this,Hl).combinedSignal(p(this,od))})),p(this,ua).ariaExpanded="true",p(this,Mr)){p(this,Mr).classList.remove("hidden");return}const e=k(this,Mr,$(this,Zn,zS).call(this));p(this,ua).append(e)},zD=function(t){var e;(e=p(this,Mr))!=null&&e.contains(t.target)||this.hideDropdown()},Lf=function(){return p(this,Mr)&&!p(this,Mr).classList.contains("hidden")},z(Io,by,null);let iA=Io;var ju,Ay,a1,_y;const v0=class v0{constructor(t){z(this,ju,null);z(this,Ay,null);z(this,a1,null);k(this,Ay,t),k(this,a1,t._uiManager),p(v0,_y)||k(v0,_y,Object.freeze({freetext:"pdfjs-editor-color-picker-free-text-input",ink:"pdfjs-editor-color-picker-ink-input"}))}renderButton(){if(p(this,ju))return p(this,ju);const{editorType:t,colorType:e,color:n}=p(this,Ay),r=k(this,ju,document.createElement("input"));return r.type="color",r.value=n||"#000000",r.className="basicColorPicker",r.tabIndex=0,r.setAttribute("data-l10n-id",p(v0,_y)[t]),r.addEventListener("input",()=>{p(this,a1).updateParams(e,r.value)},{signal:p(this,a1)._signal}),r}update(t){p(this,ju)&&(p(this,ju).value=t)}destroy(){var t;(t=p(this,ju))==null||t.remove(),k(this,ju,null)}hideDropdown(){}};ju=new WeakMap,Ay=new WeakMap,a1=new WeakMap,_y=new WeakMap,z(v0,_y,null);let rA=v0;function o8(i){return Math.floor(Math.max(0,Math.min(1,i))*255).toString(16).padStart(2,"0")}function Lv(i){return Math.max(0,Math.min(255,255*i))}class a8{static CMYK_G([t,e,n,r]){return["G",1-Math.min(1,.3*t+.59*n+.11*e+r)]}static G_CMYK([t]){return["CMYK",0,0,0,1-t]}static G_RGB([t]){return["RGB",t,t,t]}static G_rgb([t]){return t=Lv(t),[t,t,t]}static G_HTML([t]){const e=o8(t);return`#${e}${e}${e}`}static RGB_G([t,e,n]){return["G",.3*t+.59*e+.11*n]}static RGB_rgb(t){return t.map(Lv)}static RGB_HTML(t){return`#${t.map(o8).join("")}`}static T_HTML(){return"#00000000"}static T_rgb(){return[null]}static CMYK_RGB([t,e,n,r]){return["RGB",1-Math.min(1,t+r),1-Math.min(1,n+r),1-Math.min(1,e+r)]}static CMYK_rgb([t,e,n,r]){return[Lv(1-Math.min(1,t+r)),Lv(1-Math.min(1,n+r)),Lv(1-Math.min(1,e+r))]}static CMYK_HTML(t){const e=this.CMYK_RGB(t).slice(1);return this.RGB_HTML(e)}static RGB_CMYK([t,e,n]){const r=1-t,s=1-e,a=1-n,u=Math.min(r,s,a);return["CMYK",r,s,a,u]}}class ez{create(t,e,n=!1){if(t<=0||e<=0)throw new Error("Invalid SVG dimensions");const r=this._createSVG("svg:svg");return r.setAttribute("version","1.1"),n||(r.setAttribute("width",`${t}px`),r.setAttribute("height",`${e}px`)),r.setAttribute("preserveAspectRatio","none"),r.setAttribute("viewBox",`0 0 ${t} ${e}`),r}createElement(t){if(typeof t!="string")throw new Error("Invalid SVG element type");return this._createSVG(t)}_createSVG(t){ui("Abstract method `_createSVG` called.")}}class sA extends ez{_createSVG(t){return document.createElementNS(Hc,t)}}const nz=9,Fp=new WeakSet,iz=new Date().getTimezoneOffset()*60*1e3;class Tw{static create(t){switch(t.data.annotationType){case vr.LINK:return new uC(t);case vr.TEXT:return new sz(t);case vr.WIDGET:switch(t.data.fieldType){case"Tx":return new oz(t);case"Btn":return t.data.radioButton?new YD(t):t.data.checkBox?new lz(t):new uz(t);case"Ch":return new cz(t);case"Sig":return new az(t)}return new Hp(t);case vr.POPUP:return new $S(t);case vr.FREETEXT:return new JD(t);case vr.LINE:return new fz(t);case vr.SQUARE:return new dz(t);case vr.CIRCLE:return new pz(t);case vr.POLYLINE:return new KD(t);case vr.CARET:return new mz(t);case vr.INK:return new cC(t);case vr.POLYGON:return new gz(t);case vr.HIGHLIGHT:return new QD(t);case vr.UNDERLINE:return new vz(t);case vr.SQUIGGLY:return new yz(t);case vr.STRIKEOUT:return new xz(t);case vr.STAMP:return new ZD(t);case vr.FILEATTACHMENT:return new bz(t);default:return new zi(t)}}}var ap,l1,tl,wy,YS;const _C=class _C{constructor(t,{isRenderable:e=!1,ignoreBorder:n=!1,createQuadrilaterals:r=!1}={}){z(this,wy);z(this,ap,null);z(this,l1,!1);z(this,tl,null);this.isRenderable=e,this.data=t.data,this.layer=t.layer,this.linkService=t.linkService,this.downloadManager=t.downloadManager,this.imageResourcesPath=t.imageResourcesPath,this.renderForms=t.renderForms,this.svgFactory=t.svgFactory,this.annotationStorage=t.annotationStorage,this.enableComment=t.enableComment,this.enableScripting=t.enableScripting,this.hasJSActions=t.hasJSActions,this._fieldObjects=t.fieldObjects,this.parent=t.parent,this.hasOwnCommentButton=!1,e&&(this.contentElement=this.container=this._createContainer(n)),r&&this._createQuadrilaterals()}static _hasPopupData({contentsObj:t,richText:e}){return!!(t!=null&&t.str||e!=null&&e.str)}get _isEditable(){return this.data.isEditable}get hasPopupData(){return _C._hasPopupData(this.data)||this.enableComment&&!!this.commentText}get commentData(){var n;const{data:t}=this,e=(n=this.annotationStorage)==null?void 0:n.getEditor(t.id);return e?e.getData():t}get hasCommentButton(){return this.enableComment&&this.hasPopupElement}get commentButtonPosition(){var u;const t=(u=this.annotationStorage)==null?void 0:u.getEditor(this.data.id);if(t)return t.commentButtonPositionInPage;const{quadPoints:e,inkLists:n,rect:r}=this.data;let s=-1/0,a=-1/0;if((e==null?void 0:e.length)>=8){for(let c=0;c<e.length;c+=8)e[c+1]>a?(a=e[c+1],s=e[c+2]):e[c+1]===a&&(s=Math.max(s,e[c+2]));return[s,a]}if((n==null?void 0:n.length)>=1){for(const c of n)for(let h=0,f=c.length;h<f;h+=2)c[h+1]>a?(a=c[h+1],s=c[h]):c[h+1]===a&&(s=Math.max(s,c[h]));if(s!==1/0)return[s,a]}return r?[r[2],r[3]]:null}_normalizePoint(t){const{page:{view:e},viewport:{rawDims:{pageWidth:n,pageHeight:r,pageX:s,pageY:a}}}=this.parent;return t[1]=e[3]-t[1]+e[1],t[0]=100*(t[0]-s)/n,t[1]=100*(t[1]-a)/r,t}get commentText(){var e,n,r;const{data:t}=this;return((n=(e=this.annotationStorage.getRawValue(`${s2}${t.id}`))==null?void 0:e.popup)==null?void 0:n.contents)||((r=t.contentsObj)==null?void 0:r.str)||""}set commentText(t){const{data:e}=this,n={deleted:!t,contents:t||""};this.annotationStorage.updateEditor(e.id,{popup:n})||this.annotationStorage.setValue(`${s2}${e.id}`,{id:e.id,annotationType:e.annotationType,pageIndex:this.parent.page._pageIndex,popup:n,popupRef:e.popupRef,modificationDate:new Date}),t||this.removePopup()}removePopup(){var t,e;(e=((t=p(this,tl))==null?void 0:t.popup)||this.popup)==null||e.remove(),k(this,tl,this.popup=null)}updateEdited(t){var s;if(!this.container)return;t.rect&&(p(this,ap)||k(this,ap,{rect:this.data.rect.slice(0)}));const{rect:e,popup:n}=t;e&&$(this,wy,YS).call(this,e);let r=((s=p(this,tl))==null?void 0:s.popup)||this.popup;!r&&(n!=null&&n.text)&&(this._createPopup(n),r=p(this,tl).popup),r&&(r.updateEdited(t),n!=null&&n.deleted&&(r.remove(),k(this,tl,null),this.popup=null))}resetEdited(){var t;p(this,ap)&&($(this,wy,YS).call(this,p(this,ap).rect),(t=p(this,tl))==null||t.popup.resetEdited(),k(this,ap,null))}_createContainer(t){const{data:e,parent:{page:n,viewport:r}}=this,s=document.createElement("section");s.setAttribute("data-annotation-id",e.id),!(this instanceof Hp)&&!(this instanceof uC)&&(s.tabIndex=0);const{style:a}=s;if(a.zIndex=this.parent.zIndex,this.parent.zIndex+=2,e.alternativeText&&(s.title=e.alternativeText),e.noRotate&&s.classList.add("norotate"),!e.rect||this instanceof $S){const{rotation:S}=e;return!e.hasOwnCanvas&&S!==0&&this.setRotation(S,s),s}const{width:u,height:c}=this;if(!t&&e.borderStyle.width>0){a.borderWidth=`${e.borderStyle.width}px`;const S=e.borderStyle.horizontalCornerRadius,T=e.borderStyle.verticalCornerRadius;if(S>0||T>0){const D=`calc(${S}px * var(--total-scale-factor)) / calc(${T}px * var(--total-scale-factor))`;a.borderRadius=D}else if(this instanceof YD){const D=`calc(${u}px * var(--total-scale-factor)) / calc(${c}px * var(--total-scale-factor))`;a.borderRadius=D}switch(e.borderStyle.style){case Ug.SOLID:a.borderStyle="solid";break;case Ug.DASHED:a.borderStyle="dashed";break;case Ug.BEVELED:Ge("Unimplemented border style: beveled");break;case Ug.INSET:Ge("Unimplemented border style: inset");break;case Ug.UNDERLINE:a.borderBottomStyle="solid";break}const C=e.borderColor||null;C?(k(this,l1,!0),a.borderColor=ge.makeHexColor(C[0]|0,C[1]|0,C[2]|0)):a.borderWidth=0}const h=ge.normalizeRect([e.rect[0],n.view[3]-e.rect[1]+n.view[1],e.rect[2],n.view[3]-e.rect[3]+n.view[1]]),{pageWidth:f,pageHeight:g,pageX:m,pageY:y}=r.rawDims;a.left=`${100*(h[0]-m)/f}%`,a.top=`${100*(h[1]-y)/g}%`;const{rotation:w}=e;return e.hasOwnCanvas||w===0?(a.width=`${100*u/f}%`,a.height=`${100*c/g}%`):this.setRotation(w,s),s}setRotation(t,e=this.container){if(!this.data.rect)return;const{pageWidth:n,pageHeight:r}=this.parent.viewport.rawDims;let{width:s,height:a}=this;t%180!==0&&([s,a]=[a,s]),e.style.width=`${100*s/n}%`,e.style.height=`${100*a/r}%`,e.setAttribute("data-main-rotation",(360-t)%360)}get _commonActions(){const t=(e,n,r)=>{const s=r.detail[e],a=s[0],u=s.slice(1);r.target.style[n]=a8[`${a}_HTML`](u),this.annotationStorage.setValue(this.data.id,{[n]:a8[`${a}_rgb`](u)})};return Ve(this,"_commonActions",{display:e=>{const{display:n}=e.detail,r=n%2===1;this.container.style.visibility=r?"hidden":"visible",this.annotationStorage.setValue(this.data.id,{noView:r,noPrint:n===1||n===2})},print:e=>{this.annotationStorage.setValue(this.data.id,{noPrint:!e.detail.print})},hidden:e=>{const{hidden:n}=e.detail;this.container.style.visibility=n?"hidden":"visible",this.annotationStorage.setValue(this.data.id,{noPrint:n,noView:n})},focus:e=>{setTimeout(()=>e.target.focus({preventScroll:!1}),0)},userName:e=>{e.target.title=e.detail.userName},readonly:e=>{e.target.disabled=e.detail.readonly},required:e=>{this._setRequired(e.target,e.detail.required)},bgColor:e=>{t("bgColor","backgroundColor",e)},fillColor:e=>{t("fillColor","backgroundColor",e)},fgColor:e=>{t("fgColor","color",e)},textColor:e=>{t("textColor","color",e)},borderColor:e=>{t("borderColor","borderColor",e)},strokeColor:e=>{t("strokeColor","borderColor",e)},rotation:e=>{const n=e.detail.rotation;this.setRotation(n),this.annotationStorage.setValue(this.data.id,{rotation:n})}})}_dispatchEventFromSandbox(t,e){const n=this._commonActions;for(const r of Object.keys(e.detail)){const s=t[r]||n[r];s==null||s(e)}}_setDefaultPropertiesFromJS(t){if(!this.enableScripting)return;const e=this.annotationStorage.getRawValue(this.data.id);if(!e)return;const n=this._commonActions;for(const[r,s]of Object.entries(e)){const a=n[r];if(a){const u={detail:{[r]:s},target:t};a(u),delete e[r]}}}_createQuadrilaterals(){if(!this.container)return;const{quadPoints:t}=this.data;if(!t)return;const[e,n,r,s]=this.data.rect.map(S=>Math.fround(S));if(t.length===8){const[S,T,C,D]=t.subarray(2,6);if(r===S&&s===T&&e===C&&n===D)return}const{style:a}=this.container;let u;if(p(this,l1)){const{borderColor:S,borderWidth:T}=a;a.borderWidth=0,u=["url('data:image/svg+xml;utf8,",'<svg xmlns="http://www.w3.org/2000/svg"',' preserveAspectRatio="none" viewBox="0 0 1 1">',`<g fill="transparent" stroke="${S}" stroke-width="${T}">`],this.container.classList.add("hasBorder")}const c=r-e,h=s-n,{svgFactory:f}=this,g=f.createElement("svg");g.classList.add("quadrilateralsContainer"),g.setAttribute("width",0),g.setAttribute("height",0),g.role="none";const m=f.createElement("defs");g.append(m);const y=f.createElement("clipPath"),w=`clippath_${this.data.id}`;y.setAttribute("id",w),y.setAttribute("clipPathUnits","objectBoundingBox"),m.append(y);for(let S=2,T=t.length;S<T;S+=8){const C=t[S],D=t[S+1],R=t[S+2],I=t[S+3],F=f.createElement("rect"),q=(R-e)/c,U=(s-D)/h,V=(C-R)/c,tt=(D-I)/h;F.setAttribute("x",q),F.setAttribute("y",U),F.setAttribute("width",V),F.setAttribute("height",tt),y.append(F),u==null||u.push(`<rect vector-effect="non-scaling-stroke" x="${q}" y="${U}" width="${V}" height="${tt}"/>`)}p(this,l1)&&(u.push("</g></svg>')"),a.backgroundImage=u.join("")),this.container.append(g),this.container.style.clipPath=`url(#${w})`}_createPopup(t=null){const{data:e}=this;let n,r;t?(n={str:t.text},r=t.date):(n=e.contentsObj,r=e.modificationDate),k(this,tl,new $S({data:{color:e.color,titleObj:e.titleObj,modificationDate:r,contentsObj:n,richText:e.richText,parentRect:e.rect,borderStyle:0,id:`popup_${e.id}`,rotation:e.rotation,noRotate:!0},linkService:this.linkService,parent:this.parent,elements:[this]}))}get hasPopupElement(){return!!(p(this,tl)||this.popup||this.data.popupRef)}get extraPopupElement(){return p(this,tl)}render(){ui("Abstract method `AnnotationElement.render` called")}_getElementsByName(t,e=null){const n=[];if(this._fieldObjects){const r=this._fieldObjects[t];if(r)for(const{page:s,id:a,exportValues:u}of r){if(s===-1||a===e)continue;const c=typeof u=="string"?u:null,h=document.querySelector(`[data-element-id="${a}"]`);if(h&&!Fp.has(h)){Ge(`_getElementsByName - element not allowed: ${a}`);continue}n.push({id:a,exportValue:c,domElement:h})}return n}for(const r of document.getElementsByName(t)){const{exportValue:s}=r,a=r.getAttribute("data-element-id");a!==e&&Fp.has(r)&&n.push({id:a,exportValue:s,domElement:r})}return n}show(){var t;this.container&&(this.container.hidden=!1),(t=this.popup)==null||t.maybeShow()}hide(){var t;this.container&&(this.container.hidden=!0),(t=this.popup)==null||t.forceHide()}getElementsToTriggerPopup(){return this.container}addHighlightArea(){const t=this.getElementsToTriggerPopup();if(Array.isArray(t))for(const e of t)e.classList.add("highlightArea");else t.classList.add("highlightArea")}_editOnDoubleClick(){if(!this._isEditable)return;const{annotationEditorType:t,data:{id:e}}=this;this.container.addEventListener("dblclick",()=>{var n;(n=this.linkService.eventBus)==null||n.dispatch("switchannotationeditormode",{source:this,mode:t,editId:e,mustEnterInEditMode:!0})})}get width(){return this.data.rect[2]-this.data.rect[0]}get height(){return this.data.rect[3]-this.data.rect[1]}};ap=new WeakMap,l1=new WeakMap,tl=new WeakMap,wy=new WeakSet,YS=function(t){const{container:{style:e},data:{rect:n,rotation:r},parent:{viewport:{rawDims:{pageWidth:s,pageHeight:a,pageX:u,pageY:c}}}}=this;n==null||n.splice(0,4,...t),e.left=`${100*(t[0]-u)/s}%`,e.top=`${100*(a-t[3]+c)/a}%`,r===0?(e.width=`${100*(t[2]-t[0])/s}%`,e.height=`${100*(t[3]-t[1])/a}%`):this.setRotation(r)};let zi=_C;class rz extends zi{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0}),this.editor=t.editor}render(){return this.container.className="editorAnnotation",this.container}createOrUpdatePopup(){const{editor:t}=this;t.hasComment&&this._createPopup(t.comment)}get hasCommentButton(){return this.enableComment&&this.editor.hasComment}get commentButtonPosition(){return this.editor.commentButtonPositionInPage}get commentText(){return this.editor.comment.text}set commentText(t){this.editor.comment=t,t||this.removePopup()}get commentData(){return this.editor.getData()}remove(){this.parent.removeAnnotation(this.data.id),this.container.remove(),this.container=null,this.removePopup()}}var Sa,h0,GD,VD;class uC extends zi{constructor(e,n=null){super(e,{isRenderable:!0,ignoreBorder:!!(n!=null&&n.ignoreBorder),createQuadrilaterals:!0});z(this,Sa);this.isTooltipOnly=e.data.isTooltipOnly}render(){const{data:e,linkService:n}=this,r=document.createElement("a");r.setAttribute("data-element-id",e.id);let s=!1;return e.url?(n.addLinkAttributes(r,e.url,e.newWindow),s=!0):e.action?(this._bindNamedAction(r,e.action,e.overlaidText),s=!0):e.attachment?($(this,Sa,GD).call(this,r,e.attachment,e.overlaidText,e.attachmentDest),s=!0):e.setOCGState?($(this,Sa,VD).call(this,r,e.setOCGState,e.overlaidText),s=!0):e.dest?(this._bindLink(r,e.dest,e.overlaidText),s=!0):(e.actions&&(e.actions.Action||e.actions["Mouse Up"]||e.actions["Mouse Down"])&&this.enableScripting&&this.hasJSActions&&(this._bindJSAction(r,e),s=!0),e.resetForm?(this._bindResetFormAction(r,e.resetForm),s=!0):this.isTooltipOnly&&!s&&(this._bindLink(r,""),s=!0)),this.container.classList.add("linkAnnotation"),s&&(this.contentElement=r,this.container.append(r)),this.container}_bindLink(e,n,r=""){e.href=this.linkService.getDestinationHash(n),e.onclick=()=>(n&&this.linkService.goToDestination(n),!1),(n||n==="")&&$(this,Sa,h0).call(this),r&&(e.title=r)}_bindNamedAction(e,n,r=""){e.href=this.linkService.getAnchorUrl(""),e.onclick=()=>(this.linkService.executeNamedAction(n),!1),r&&(e.title=r),$(this,Sa,h0).call(this)}_bindJSAction(e,n){e.href=this.linkService.getAnchorUrl("");const r=new Map([["Action","onclick"],["Mouse Up","onmouseup"],["Mouse Down","onmousedown"]]);for(const s of Object.keys(n.actions)){const a=r.get(s);a&&(e[a]=()=>{var u;return(u=this.linkService.eventBus)==null||u.dispatch("dispatcheventinsandbox",{source:this,detail:{id:n.id,name:s}}),!1})}n.overlaidText&&(e.title=n.overlaidText),e.onclick||(e.onclick=()=>!1),$(this,Sa,h0).call(this)}_bindResetFormAction(e,n){const r=e.onclick;if(r||(e.href=this.linkService.getAnchorUrl("")),$(this,Sa,h0).call(this),!this._fieldObjects){Ge('_bindResetFormAction - "resetForm" action not supported, ensure that the `fieldObjects` parameter is provided.'),r||(e.onclick=()=>!1);return}e.onclick=()=>{var g;r==null||r();const{fields:s,refs:a,include:u}=n,c=[];if(s.length!==0||a.length!==0){const m=new Set(a);for(const y of s){const w=this._fieldObjects[y]||[];for(const{id:S}of w)m.add(S)}for(const y of Object.values(this._fieldObjects))for(const w of y)m.has(w.id)===u&&c.push(w)}else for(const m of Object.values(this._fieldObjects))c.push(...m);const h=this.annotationStorage,f=[];for(const m of c){const{id:y}=m;switch(f.push(y),m.type){case"text":{const S=m.defaultValue||"";h.setValue(y,{value:S});break}case"checkbox":case"radiobutton":{const S=m.defaultValue===m.exportValues;h.setValue(y,{value:S});break}case"combobox":case"listbox":{const S=m.defaultValue||"";h.setValue(y,{value:S});break}default:continue}const w=document.querySelector(`[data-element-id="${y}"]`);if(w){if(!Fp.has(w)){Ge(`_bindResetFormAction - element not allowed: ${y}`);continue}}else continue;w.dispatchEvent(new Event("resetform"))}return this.enableScripting&&((g=this.linkService.eventBus)==null||g.dispatch("dispatcheventinsandbox",{source:this,detail:{id:"app",ids:f,name:"ResetForm"}})),!1}}}Sa=new WeakSet,h0=function(){this.container.setAttribute("data-internal-link","")},GD=function(e,n,r="",s=null){e.href=this.linkService.getAnchorUrl(""),n.description?e.title=n.description:r&&(e.title=r),e.onclick=()=>{var a;return(a=this.downloadManager)==null||a.openOrDownloadData(n.content,n.filename,s),!1},$(this,Sa,h0).call(this)},VD=function(e,n,r=""){e.href=this.linkService.getAnchorUrl(""),e.onclick=()=>(this.linkService.executeSetOCGState(n),!1),r&&(e.title=r),$(this,Sa,h0).call(this)};class sz extends zi{constructor(t){super(t,{isRenderable:!0})}render(){this.container.classList.add("textAnnotation");const t=document.createElement("img");return t.src=this.imageResourcesPath+"annotation-"+this.data.name.toLowerCase()+".svg",t.setAttribute("data-l10n-id","pdfjs-text-annotation-type"),t.setAttribute("data-l10n-args",JSON.stringify({type:this.data.name})),!this.data.popupRef&&this.hasPopupData&&(this.hasOwnCommentButton=!0,this._createPopup()),this.container.append(t),this.container}}class Hp extends zi{render(){return this.container}showElementAndHideCanvas(t){var e;this.data.hasOwnCanvas&&(((e=t.previousSibling)==null?void 0:e.nodeName)==="CANVAS"&&(t.previousSibling.hidden=!0),t.hidden=!1)}_getKeyModifier(t){return bs.platform.isMac?t.metaKey:t.ctrlKey}_setEventListener(t,e,n,r,s){n.includes("mouse")?t.addEventListener(n,a=>{var u;(u=this.linkService.eventBus)==null||u.dispatch("dispatcheventinsandbox",{source:this,detail:{id:this.data.id,name:r,value:s(a),shift:a.shiftKey,modifier:this._getKeyModifier(a)}})}):t.addEventListener(n,a=>{var u;if(n==="blur"){if(!e.focused||!a.relatedTarget)return;e.focused=!1}else if(n==="focus"){if(e.focused)return;e.focused=!0}s&&((u=this.linkService.eventBus)==null||u.dispatch("dispatcheventinsandbox",{source:this,detail:{id:this.data.id,name:r,value:s(a)}}))})}_setEventListeners(t,e,n,r){var s,a,u;for(const[c,h]of n)(h==="Action"||(s=this.data.actions)!=null&&s[h])&&((h==="Focus"||h==="Blur")&&(e||(e={focused:!1})),this._setEventListener(t,e,c,h,r),h==="Focus"&&!((a=this.data.actions)!=null&&a.Blur)?this._setEventListener(t,e,"blur","Blur",null):h==="Blur"&&!((u=this.data.actions)!=null&&u.Focus)&&this._setEventListener(t,e,"focus","Focus",null))}_setBackgroundColor(t){const e=this.data.backgroundColor||null;t.style.backgroundColor=e===null?"transparent":ge.makeHexColor(e[0],e[1],e[2])}_setTextStyle(t){const e=["left","center","right"],{fontColor:n}=this.data.defaultAppearanceData,r=this.data.defaultAppearanceData.fontSize||nz,s=t.style;let a;const u=2,c=h=>Math.round(10*h)/10;if(this.data.multiLine){const h=Math.abs(this.data.rect[3]-this.data.rect[1]-u),f=Math.round(h/(xw*r))||1,g=h/f;a=Math.min(r,c(g/xw))}else{const h=Math.abs(this.data.rect[3]-this.data.rect[1]-u);a=Math.min(r,c(h/xw))}s.fontSize=`calc(${a}px * var(--total-scale-factor))`,s.color=ge.makeHexColor(n[0],n[1],n[2]),this.data.textAlignment!==null&&(s.textAlign=e[this.data.textAlignment])}_setRequired(t,e){e?t.setAttribute("required",!0):t.removeAttribute("required"),t.setAttribute("aria-required",e)}}class oz extends Hp{constructor(t){const e=t.renderForms||t.data.hasOwnCanvas||!t.data.hasAppearance&&!!t.data.fieldValue;super(t,{isRenderable:e})}setPropertyOnSiblings(t,e,n,r){const s=this.annotationStorage;for(const a of this._getElementsByName(t.name,t.id))a.domElement&&(a.domElement[e]=n),s.setValue(a.id,{[r]:n})}render(){var r,s;const t=this.annotationStorage,e=this.data.id;this.container.classList.add("textWidgetAnnotation");let n=null;if(this.renderForms){const a=t.getValue(e,{value:this.data.fieldValue});let u=a.value||"";const c=t.getValue(e,{charLimit:this.data.maxLen}).charLimit;c&&u.length>c&&(u=u.slice(0,c));let h=a.formattedValue||((r=this.data.textContent)==null?void 0:r.join(`
`))||null;h&&this.data.comb&&(h=h.replaceAll(/\s+/g,""));const f={userValue:u,formattedValue:h,lastCommittedValue:null,commitKey:1,focused:!1};this.data.multiLine?(n=document.createElement("textarea"),n.textContent=h??u,this.data.doNotScroll&&(n.style.overflowY="hidden")):(n=document.createElement("input"),n.type=this.data.password?"password":"text",n.setAttribute("value",h??u),this.data.doNotScroll&&(n.style.overflowX="hidden")),this.data.hasOwnCanvas&&(n.hidden=!0),Fp.add(n),this.contentElement=n,n.setAttribute("data-element-id",e),n.disabled=this.data.readOnly,n.name=this.data.fieldName,n.tabIndex=0;const{datetimeFormat:g,datetimeType:m,timeStep:y}=this.data,w=!!m&&this.enableScripting;g&&(n.title=g),this._setRequired(n,this.data.required),c&&(n.maxLength=c),n.addEventListener("input",T=>{t.setValue(e,{value:T.target.value}),this.setPropertyOnSiblings(n,"value",T.target.value,"value"),f.formattedValue=null}),n.addEventListener("resetform",T=>{const C=this.data.defaultFieldValue??"";n.value=f.userValue=C,f.formattedValue=null});let S=T=>{const{formattedValue:C}=f;C!=null&&(T.target.value=C),T.target.scrollLeft=0};if(this.enableScripting&&this.hasJSActions){n.addEventListener("focus",C=>{var R;if(f.focused)return;const{target:D}=C;if(w&&(D.type=m,y&&(D.step=y)),f.userValue){const I=f.userValue;if(w)if(m==="time"){const F=new Date(I),q=[F.getHours(),F.getMinutes(),F.getSeconds()];D.value=q.map(U=>U.toString().padStart(2,"0")).join(":")}else D.value=new Date(I-iz).toISOString().split(m==="date"?"T":".",1)[0];else D.value=I}f.lastCommittedValue=D.value,f.commitKey=1,(R=this.data.actions)!=null&&R.Focus||(f.focused=!0)}),n.addEventListener("updatefromsandbox",C=>{this.showElementAndHideCanvas(C.target);const D={value(R){f.userValue=R.detail.value??"",w||t.setValue(e,{value:f.userValue.toString()}),R.target.value=f.userValue},formattedValue(R){const{formattedValue:I}=R.detail;f.formattedValue=I,I!=null&&R.target!==document.activeElement&&(R.target.value=I);const F={formattedValue:I};w&&(F.value=I),t.setValue(e,F)},selRange(R){R.target.setSelectionRange(...R.detail.selRange)},charLimit:R=>{var U;const{charLimit:I}=R.detail,{target:F}=R;if(I===0){F.removeAttribute("maxLength");return}F.setAttribute("maxLength",I);let q=f.userValue;!q||q.length<=I||(q=q.slice(0,I),F.value=f.userValue=q,t.setValue(e,{value:q}),(U=this.linkService.eventBus)==null||U.dispatch("dispatcheventinsandbox",{source:this,detail:{id:e,name:"Keystroke",value:q,willCommit:!0,commitKey:1,selStart:F.selectionStart,selEnd:F.selectionEnd}}))}};this._dispatchEventFromSandbox(D,C)}),n.addEventListener("keydown",C=>{var I;f.commitKey=1;let D=-1;if(C.key==="Escape"?D=0:C.key==="Enter"&&!this.data.multiLine?D=2:C.key==="Tab"&&(f.commitKey=3),D===-1)return;const{value:R}=C.target;f.lastCommittedValue!==R&&(f.lastCommittedValue=R,f.userValue=R,(I=this.linkService.eventBus)==null||I.dispatch("dispatcheventinsandbox",{source:this,detail:{id:e,name:"Keystroke",value:R,willCommit:!0,commitKey:D,selStart:C.target.selectionStart,selEnd:C.target.selectionEnd}}))});const T=S;S=null,n.addEventListener("blur",C=>{var I,F;if(!f.focused||!C.relatedTarget)return;(I=this.data.actions)!=null&&I.Blur||(f.focused=!1);const{target:D}=C;let{value:R}=D;if(w){if(R&&m==="time"){const q=R.split(":").map(U=>parseInt(U,10));R=new Date(2e3,0,1,q[0],q[1],q[2]||0).valueOf(),D.step=""}else R.includes("T")||(R=`${R}T00:00`),R=new Date(R).valueOf();D.type="text"}f.userValue=R,f.lastCommittedValue!==R&&((F=this.linkService.eventBus)==null||F.dispatch("dispatcheventinsandbox",{source:this,detail:{id:e,name:"Keystroke",value:R,willCommit:!0,commitKey:f.commitKey,selStart:C.target.selectionStart,selEnd:C.target.selectionEnd}})),T(C)}),(s=this.data.actions)!=null&&s.Keystroke&&n.addEventListener("beforeinput",C=>{var tt;f.lastCommittedValue=null;const{data:D,target:R}=C,{value:I,selectionStart:F,selectionEnd:q}=R;let U=F,V=q;switch(C.inputType){case"deleteWordBackward":{const J=I.substring(0,F).match(/\w*[^\w]*$/);J&&(U-=J[0].length);break}case"deleteWordForward":{const J=I.substring(F).match(/^[^\w]*\w*/);J&&(V+=J[0].length);break}case"deleteContentBackward":F===q&&(U-=1);break;case"deleteContentForward":F===q&&(V+=1);break}C.preventDefault(),(tt=this.linkService.eventBus)==null||tt.dispatch("dispatcheventinsandbox",{source:this,detail:{id:e,name:"Keystroke",value:I,change:D||"",willCommit:!1,selStart:U,selEnd:V}})}),this._setEventListeners(n,f,[["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],C=>C.target.value)}if(S&&n.addEventListener("blur",S),this.data.comb){const C=(this.data.rect[2]-this.data.rect[0])/c;n.classList.add("comb"),n.style.letterSpacing=`calc(${C}px * var(--total-scale-factor) - 1ch)`}}else n=document.createElement("div"),n.textContent=this.data.fieldValue,n.style.verticalAlign="middle",n.style.display="table-cell",this.data.hasOwnCanvas&&(n.hidden=!0);return this._setTextStyle(n),this._setBackgroundColor(n),this._setDefaultPropertiesFromJS(n),this.container.append(n),this.container}}class az extends Hp{constructor(t){super(t,{isRenderable:!!t.data.hasOwnCanvas})}}class lz extends Hp{constructor(t){super(t,{isRenderable:t.renderForms})}render(){const t=this.annotationStorage,e=this.data,n=e.id;let r=t.getValue(n,{value:e.exportValue===e.fieldValue}).value;typeof r=="string"&&(r=r!=="Off",t.setValue(n,{value:r})),this.container.classList.add("buttonWidgetAnnotation","checkBox");const s=document.createElement("input");return Fp.add(s),s.setAttribute("data-element-id",n),s.disabled=e.readOnly,this._setRequired(s,this.data.required),s.type="checkbox",s.name=e.fieldName,r&&s.setAttribute("checked",!0),s.setAttribute("exportValue",e.exportValue),s.tabIndex=0,s.addEventListener("change",a=>{const{name:u,checked:c}=a.target;for(const h of this._getElementsByName(u,n)){const f=c&&h.exportValue===e.exportValue;h.domElement&&(h.domElement.checked=f),t.setValue(h.id,{value:f})}t.setValue(n,{value:c})}),s.addEventListener("resetform",a=>{const u=e.defaultFieldValue||"Off";a.target.checked=u===e.exportValue}),this.enableScripting&&this.hasJSActions&&(s.addEventListener("updatefromsandbox",a=>{const u={value(c){c.target.checked=c.detail.value!=="Off",t.setValue(n,{value:c.target.checked})}};this._dispatchEventFromSandbox(u,a)}),this._setEventListeners(s,null,[["change","Validate"],["change","Action"],["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],a=>a.target.checked)),this._setBackgroundColor(s),this._setDefaultPropertiesFromJS(s),this.container.append(s),this.container}}class YD extends Hp{constructor(t){super(t,{isRenderable:t.renderForms})}render(){this.container.classList.add("buttonWidgetAnnotation","radioButton");const t=this.annotationStorage,e=this.data,n=e.id;let r=t.getValue(n,{value:e.fieldValue===e.buttonValue}).value;if(typeof r=="string"&&(r=r!==e.buttonValue,t.setValue(n,{value:r})),r)for(const a of this._getElementsByName(e.fieldName,n))t.setValue(a.id,{value:!1});const s=document.createElement("input");if(Fp.add(s),s.setAttribute("data-element-id",n),s.disabled=e.readOnly,this._setRequired(s,this.data.required),s.type="radio",s.name=e.fieldName,r&&s.setAttribute("checked",!0),s.tabIndex=0,s.addEventListener("change",a=>{const{name:u,checked:c}=a.target;for(const h of this._getElementsByName(u,n))t.setValue(h.id,{value:!1});t.setValue(n,{value:c})}),s.addEventListener("resetform",a=>{const u=e.defaultFieldValue;a.target.checked=u!=null&&u===e.buttonValue}),this.enableScripting&&this.hasJSActions){const a=e.buttonValue;s.addEventListener("updatefromsandbox",u=>{const c={value:h=>{const f=a===h.detail.value;for(const g of this._getElementsByName(h.target.name)){const m=f&&g.id===n;g.domElement&&(g.domElement.checked=m),t.setValue(g.id,{value:m})}}};this._dispatchEventFromSandbox(c,u)}),this._setEventListeners(s,null,[["change","Validate"],["change","Action"],["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],u=>u.target.checked)}return this._setBackgroundColor(s),this._setDefaultPropertiesFromJS(s),this.container.append(s),this.container}}class uz extends uC{constructor(t){super(t,{ignoreBorder:t.data.hasAppearance})}render(){const t=super.render();t.classList.add("buttonWidgetAnnotation","pushButton");const e=t.lastChild;return this.enableScripting&&this.hasJSActions&&e&&(this._setDefaultPropertiesFromJS(e),e.addEventListener("updatefromsandbox",n=>{this._dispatchEventFromSandbox({},n)})),t}}class cz extends Hp{constructor(t){super(t,{isRenderable:t.renderForms})}render(){this.container.classList.add("choiceWidgetAnnotation");const t=this.annotationStorage,e=this.data.id,n=t.getValue(e,{value:this.data.fieldValue}),r=document.createElement("select");Fp.add(r),r.setAttribute("data-element-id",e),r.disabled=this.data.readOnly,this._setRequired(r,this.data.required),r.name=this.data.fieldName,r.tabIndex=0;let s=this.data.combo&&this.data.options.length>0;this.data.combo||(r.size=this.data.options.length,this.data.multiSelect&&(r.multiple=!0)),r.addEventListener("resetform",f=>{const g=this.data.defaultFieldValue;for(const m of r.options)m.selected=m.value===g});for(const f of this.data.options){const g=document.createElement("option");g.textContent=f.displayValue,g.value=f.exportValue,n.value.includes(f.exportValue)&&(g.setAttribute("selected",!0),s=!1),r.append(g)}let a=null;if(s){const f=document.createElement("option");f.value=" ",f.setAttribute("hidden",!0),f.setAttribute("selected",!0),r.prepend(f),a=()=>{f.remove(),r.removeEventListener("input",a),a=null},r.addEventListener("input",a)}const u=f=>{const g=f?"value":"textContent",{options:m,multiple:y}=r;return y?Array.prototype.filter.call(m,w=>w.selected).map(w=>w[g]):m.selectedIndex===-1?null:m[m.selectedIndex][g]};let c=u(!1);const h=f=>{const g=f.target.options;return Array.prototype.map.call(g,m=>({displayValue:m.textContent,exportValue:m.value}))};return this.enableScripting&&this.hasJSActions?(r.addEventListener("updatefromsandbox",f=>{const g={value(m){a==null||a();const y=m.detail.value,w=new Set(Array.isArray(y)?y:[y]);for(const S of r.options)S.selected=w.has(S.value);t.setValue(e,{value:u(!0)}),c=u(!1)},multipleSelection(m){r.multiple=!0},remove(m){const y=r.options,w=m.detail.remove;y[w].selected=!1,r.remove(w),y.length>0&&Array.prototype.findIndex.call(y,T=>T.selected)===-1&&(y[0].selected=!0),t.setValue(e,{value:u(!0),items:h(m)}),c=u(!1)},clear(m){for(;r.length!==0;)r.remove(0);t.setValue(e,{value:null,items:[]}),c=u(!1)},insert(m){const{index:y,displayValue:w,exportValue:S}=m.detail.insert,T=r.children[y],C=document.createElement("option");C.textContent=w,C.value=S,T?T.before(C):r.append(C),t.setValue(e,{value:u(!0),items:h(m)}),c=u(!1)},items(m){const{items:y}=m.detail;for(;r.length!==0;)r.remove(0);for(const w of y){const{displayValue:S,exportValue:T}=w,C=document.createElement("option");C.textContent=S,C.value=T,r.append(C)}r.options.length>0&&(r.options[0].selected=!0),t.setValue(e,{value:u(!0),items:h(m)}),c=u(!1)},indices(m){const y=new Set(m.detail.indices);for(const w of m.target.options)w.selected=y.has(w.index);t.setValue(e,{value:u(!0)}),c=u(!1)},editable(m){m.target.disabled=!m.detail.editable}};this._dispatchEventFromSandbox(g,f)}),r.addEventListener("input",f=>{var y;const g=u(!0),m=u(!1);t.setValue(e,{value:g}),f.preventDefault(),(y=this.linkService.eventBus)==null||y.dispatch("dispatcheventinsandbox",{source:this,detail:{id:e,name:"Keystroke",value:c,change:m,changeEx:g,willCommit:!1,commitKey:1,keyDown:!1}})}),this._setEventListeners(r,null,[["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"],["input","Action"],["input","Validate"]],f=>f.target.value)):r.addEventListener("input",function(f){t.setValue(e,{value:u(!0)})}),this.data.combo&&this._setTextStyle(r),this._setBackgroundColor(r),this._setDefaultPropertiesFromJS(r),this.container.append(r),this.container}}var Sy,WS;class $S extends zi{constructor(e){const{data:n,elements:r,parent:s}=e,a=!!s._commentManager;super(e,{isRenderable:!a&&zi._hasPopupData(n)});z(this,Sy);if(this.elements=r,a&&zi._hasPopupData(n)){const u=this.popup=$(this,Sy,WS).call(this);for(const c of r)c.popup=u}else this.popup=null}render(){const{container:e}=this;e.classList.add("popupAnnotation"),e.role="comment";const n=this.popup=$(this,Sy,WS).call(this),r=[];for(const s of this.elements)s.popup=n,s.container.ariaHasPopup="dialog",r.push(s.data.id),s.addHighlightArea();return this.container.setAttribute("aria-controls",r.map(s=>`${Kg}${s}`).join(",")),this.container}}Sy=new WeakSet,WS=function(){return new hz({container:this.container,color:this.data.color,titleObj:this.data.titleObj,modificationDate:this.data.modificationDate||this.data.creationDate,contentsObj:this.data.contentsObj,richText:this.data.richText,rect:this.data.rect,parentRect:this.data.parentRect||null,parent:this.parent,elements:this.elements,open:this.data.open,commentManager:this.parent._commentManager})};var ca,ad,wA,SA,u1,c1,ji,Ju,ld,lp,h1,f1,Ku,ha,ph,gh,Ji,mh,ud,Ey,vh,d1,up,cd,Wr,hd,Qe,B5,XS,jS,JS,O5,KS,$D,WD,XD,jD,U5,H5,QS;class hz{constructor({container:t,color:e,elements:n,titleObj:r,modificationDate:s,contentsObj:a,richText:u,parent:c,rect:h,parentRect:f,open:g,commentManager:m=null}){z(this,Qe);z(this,ca,null);z(this,ad,$(this,Qe,XD).bind(this));z(this,wA,$(this,Qe,QS).bind(this));z(this,SA,$(this,Qe,H5).bind(this));z(this,u1,$(this,Qe,U5).bind(this));z(this,c1,null);z(this,ji,null);z(this,Ju,null);z(this,ld,null);z(this,lp,null);z(this,h1,null);z(this,f1,null);z(this,Ku,!1);z(this,ha,null);z(this,ph,null);z(this,gh,null);z(this,Ji,null);z(this,mh,null);z(this,ud,null);z(this,Ey,null);z(this,vh,null);z(this,d1,null);z(this,up,null);z(this,cd,!1);z(this,Wr,null);z(this,hd,null);k(this,ji,t),k(this,d1,r),k(this,Ju,a),k(this,vh,u),k(this,h1,c),k(this,c1,e),k(this,Ey,h),k(this,f1,f),k(this,lp,n),k(this,ca,m),k(this,Wr,n[0]),k(this,ld,Kb.toDateObject(s)),this.trigger=n.flatMap(y=>y.getElementsToTriggerPopup()),m||($(this,Qe,B5).call(this),p(this,ji).hidden=!0,g&&$(this,Qe,U5).call(this))}renderCommentButton(){if(p(this,Ji)){p(this,Ji).parentNode||p(this,Wr).container.after(p(this,Ji));return}if(p(this,mh)||$(this,Qe,XS).call(this),!p(this,mh))return;const{signal:t}=k(this,ph,new AbortController),e=p(this,Wr).hasOwnCommentButton,n=()=>{p(this,ca).toggleCommentPopup(this,!0,void 0,!e)},r=()=>{p(this,ca).toggleCommentPopup(this,!1,!0,!e)},s=()=>{p(this,ca).toggleCommentPopup(this,!1,!1)};if(e){k(this,Ji,p(this,Wr).container);for(const a of this.trigger)a.ariaHasPopup="dialog",a.ariaControls="commentPopup",a.addEventListener("keydown",p(this,ad),{signal:t}),a.addEventListener("click",n,{signal:t}),a.addEventListener("pointerenter",r,{signal:t}),a.addEventListener("pointerleave",s,{signal:t}),a.classList.add("popupTriggerArea")}else{const a=k(this,Ji,document.createElement("button"));a.className="annotationCommentButton";const u=p(this,Wr).container;a.style.zIndex=u.style.zIndex+1,a.tabIndex=0,a.ariaHasPopup="dialog",a.ariaControls="commentPopup",a.setAttribute("data-l10n-id","pdfjs-show-comment-button"),$(this,Qe,JS).call(this),$(this,Qe,jS).call(this),a.addEventListener("keydown",p(this,ad),{signal:t}),a.addEventListener("click",n,{signal:t}),a.addEventListener("pointerenter",r,{signal:t}),a.addEventListener("pointerleave",s,{signal:t}),u.after(a)}}get commentButtonColor(){const{color:t,opacity:e}=p(this,Wr).commentData;return t?p(this,h1)._commentManager.makeCommentColor(t,e):null}focusCommentButton(){setTimeout(()=>{var t;(t=p(this,Ji))==null||t.focus()},0)}getData(){const{richText:t,color:e,opacity:n,creationDate:r,modificationDate:s}=p(this,Wr).commentData;return{contentsObj:{str:this.comment},richText:t,color:e,opacity:n,creationDate:r,modificationDate:s}}get elementBeforePopup(){return p(this,Ji)}get comment(){return p(this,hd)||k(this,hd,p(this,Wr).commentText),p(this,hd)}set comment(t){t!==this.comment&&(p(this,Wr).commentText=k(this,hd,t))}focus(){var t;(t=p(this,Wr).container)==null||t.focus()}get parentBoundingClientRect(){return p(this,Wr).layer.getBoundingClientRect()}setCommentButtonStates({selected:t,hasPopup:e}){p(this,Ji)&&(p(this,Ji).classList.toggle("selected",t),p(this,Ji).ariaExpanded=e)}setSelectedCommentButton(t){p(this,Ji).classList.toggle("selected",t)}get commentPopupPosition(){if(p(this,ud))return p(this,ud);const{x:t,y:e,height:n}=p(this,Ji).getBoundingClientRect(),{x:r,y:s,width:a,height:u}=p(this,Wr).layer.getBoundingClientRect();return[(t-r)/a,(e+n-s)/u]}set commentPopupPosition(t){k(this,ud,t)}hasDefaultPopupPosition(){return p(this,ud)===null}get commentButtonPosition(){return p(this,mh)}get commentButtonWidth(){return p(this,Ji).getBoundingClientRect().width/this.parentBoundingClientRect.width}editComment(t){const[e,n]=p(this,ud)||this.commentButtonPosition.map(h=>h/100),r=this.parentBoundingClientRect,{x:s,y:a,width:u,height:c}=r;p(this,ca).showDialog(null,this,s+e*u,a+n*c,{...t,parentDimensions:r})}render(){var n,r;if(p(this,ha))return;const t=k(this,ha,document.createElement("div"));if(t.className="popup",p(this,c1)){const s=t.style.outlineColor=ge.makeHexColor(...p(this,c1));t.style.backgroundColor=`color-mix(in srgb, ${s} 30%, white)`}const e=document.createElement("span");if(e.className="header",(n=p(this,d1))!=null&&n.str){const s=document.createElement("span");s.className="title",e.append(s),{dir:s.dir,str:s.textContent}=p(this,d1)}if(t.append(e),p(this,ld)){const s=document.createElement("time");s.className="popupDate",s.setAttribute("data-l10n-id","pdfjs-annotation-date-time-string"),s.setAttribute("data-l10n-args",JSON.stringify({dateObj:p(this,ld).valueOf()})),s.dateTime=p(this,ld).toISOString(),e.append(s)}kR({html:p(this,Qe,O5)||p(this,Ju).str,dir:(r=p(this,Ju))==null?void 0:r.dir,className:"popupContent"},t),p(this,ji).append(t)}updateEdited({rect:t,popup:e,deleted:n}){var r;if(p(this,ca)){n?(this.remove(),k(this,hd,null)):e&&(e.deleted?this.remove():($(this,Qe,JS).call(this),k(this,hd,e.text))),t&&(k(this,mh,null),$(this,Qe,XS).call(this),$(this,Qe,jS).call(this));return}if(n||e!=null&&e.deleted){this.remove();return}$(this,Qe,B5).call(this),p(this,up)||k(this,up,{contentsObj:p(this,Ju),richText:p(this,vh)}),t&&k(this,gh,null),e&&e.text&&(k(this,vh,$(this,Qe,WD).call(this,e.text)),k(this,ld,Kb.toDateObject(e.date)),k(this,Ju,null)),(r=p(this,ha))==null||r.remove(),k(this,ha,null)}resetEdited(){var t;p(this,up)&&({contentsObj:Nr(this,Ju)._,richText:Nr(this,vh)._}=p(this,up),k(this,up,null),(t=p(this,ha))==null||t.remove(),k(this,ha,null),k(this,gh,null))}remove(){var t,e,n;if((t=p(this,ph))==null||t.abort(),k(this,ph,null),(e=p(this,ha))==null||e.remove(),k(this,ha,null),k(this,cd,!1),k(this,Ku,!1),(n=p(this,Ji))==null||n.remove(),k(this,Ji,null),this.trigger)for(const r of this.trigger)r.classList.remove("popupTriggerArea")}forceHide(){k(this,cd,this.isVisible),p(this,cd)&&(p(this,ji).hidden=!0)}maybeShow(){p(this,ca)||($(this,Qe,B5).call(this),p(this,cd)&&(p(this,ha)||$(this,Qe,H5).call(this),k(this,cd,!1),p(this,ji).hidden=!1))}get isVisible(){return p(this,ca)?!1:p(this,ji).hidden===!1}}ca=new WeakMap,ad=new WeakMap,wA=new WeakMap,SA=new WeakMap,u1=new WeakMap,c1=new WeakMap,ji=new WeakMap,Ju=new WeakMap,ld=new WeakMap,lp=new WeakMap,h1=new WeakMap,f1=new WeakMap,Ku=new WeakMap,ha=new WeakMap,ph=new WeakMap,gh=new WeakMap,Ji=new WeakMap,mh=new WeakMap,ud=new WeakMap,Ey=new WeakMap,vh=new WeakMap,d1=new WeakMap,up=new WeakMap,cd=new WeakMap,Wr=new WeakMap,hd=new WeakMap,Qe=new WeakSet,B5=function(){var e;if(p(this,ph))return;k(this,ph,new AbortController);const{signal:t}=p(this,ph);for(const n of this.trigger)n.addEventListener("click",p(this,u1),{signal:t}),n.addEventListener("pointerenter",p(this,SA),{signal:t}),n.addEventListener("pointerleave",p(this,wA),{signal:t}),n.classList.add("popupTriggerArea");for(const n of p(this,lp))(e=n.container)==null||e.addEventListener("keydown",p(this,ad),{signal:t})},XS=function(){const t=p(this,lp).find(e=>e.hasCommentButton);t&&k(this,mh,t._normalizePoint(t.commentButtonPosition))},jS=function(){if(p(this,Wr).extraPopupElement&&!p(this,Wr).editor)return;p(this,Ji)||this.renderCommentButton();const[t,e]=p(this,mh),{style:n}=p(this,Ji);n.left=`calc(${t}%)`,n.top=`calc(${e}% - var(--comment-button-dim))`},JS=function(){p(this,Wr).extraPopupElement||(p(this,Ji)||this.renderCommentButton(),p(this,Ji).style.backgroundColor=this.commentButtonColor||"")},O5=function(){const t=p(this,vh),e=p(this,Ju);return t!=null&&t.str&&(!(e!=null&&e.str)||e.str===t.str)&&p(this,vh).html||null},KS=function(){var t,e,n;return((n=(e=(t=p(this,Qe,O5))==null?void 0:t.attributes)==null?void 0:e.style)==null?void 0:n.fontSize)||0},$D=function(){var t,e,n;return((n=(e=(t=p(this,Qe,O5))==null?void 0:t.attributes)==null?void 0:e.style)==null?void 0:n.color)||null},WD=function(t){const e=[],n={str:t,html:{name:"div",attributes:{dir:"auto"},children:[{name:"p",children:e}]}},r={style:{color:p(this,Qe,$D),fontSize:p(this,Qe,KS)?`calc(${p(this,Qe,KS)}px * var(--total-scale-factor))`:""}};for(const s of t.split(`
`))e.push({name:"span",value:s,attributes:r});return n},XD=function(t){t.altKey||t.shiftKey||t.ctrlKey||t.metaKey||(t.key==="Enter"||t.key==="Escape"&&p(this,Ku))&&$(this,Qe,U5).call(this)},jD=function(){if(p(this,gh)!==null)return;const{page:{view:t},viewport:{rawDims:{pageWidth:e,pageHeight:n,pageX:r,pageY:s}}}=p(this,h1);let a=!!p(this,f1),u=a?p(this,f1):p(this,Ey);for(const w of p(this,lp))if(!u||ge.intersect(w.data.rect,u)!==null){u=w.data.rect,a=!0;break}const c=ge.normalizeRect([u[0],t[3]-u[1]+t[1],u[2],t[3]-u[3]+t[1]]),f=a?u[2]-u[0]+5:0,g=c[0]+f,m=c[1];k(this,gh,[100*(g-r)/e,100*(m-s)/n]);const{style:y}=p(this,ji);y.left=`${p(this,gh)[0]}%`,y.top=`${p(this,gh)[1]}%`},U5=function(){if(p(this,ca)){p(this,ca).toggleCommentPopup(this,!1);return}k(this,Ku,!p(this,Ku)),p(this,Ku)?($(this,Qe,H5).call(this),p(this,ji).addEventListener("click",p(this,u1)),p(this,ji).addEventListener("keydown",p(this,ad))):($(this,Qe,QS).call(this),p(this,ji).removeEventListener("click",p(this,u1)),p(this,ji).removeEventListener("keydown",p(this,ad)))},H5=function(){p(this,ha)||this.render(),this.isVisible?p(this,Ku)&&p(this,ji).classList.add("focused"):($(this,Qe,jD).call(this),p(this,ji).hidden=!1,p(this,ji).style.zIndex=parseInt(p(this,ji).style.zIndex)+1e3)},QS=function(){p(this,ji).classList.remove("focused"),!(p(this,Ku)||!this.isVisible)&&(p(this,ji).hidden=!0,p(this,ji).style.zIndex=parseInt(p(this,ji).style.zIndex)-1e3)};class JD extends zi{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0}),this.textContent=t.data.textContent,this.textPosition=t.data.textPosition,this.annotationEditorType=We.FREETEXT}render(){if(this.container.classList.add("freeTextAnnotation"),this.textContent){const t=this.contentElement=document.createElement("div");t.classList.add("annotationTextContent"),t.setAttribute("role","comment");for(const e of this.textContent){const n=document.createElement("span");n.textContent=e,t.append(n)}this.container.append(t)}return!this.data.popupRef&&this.hasPopupData&&(this.hasOwnCommentButton=!0,this._createPopup()),this._editOnDoubleClick(),this.container}}var Cy;class fz extends zi{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0});z(this,Cy,null)}render(){this.container.classList.add("lineAnnotation");const{data:e,width:n,height:r}=this,s=this.svgFactory.create(n,r,!0),a=k(this,Cy,this.svgFactory.createElement("svg:line"));return a.setAttribute("x1",e.rect[2]-e.lineCoordinates[0]),a.setAttribute("y1",e.rect[3]-e.lineCoordinates[1]),a.setAttribute("x2",e.rect[2]-e.lineCoordinates[2]),a.setAttribute("y2",e.rect[3]-e.lineCoordinates[3]),a.setAttribute("stroke-width",e.borderStyle.width||1),a.setAttribute("stroke","transparent"),a.setAttribute("fill","transparent"),s.append(a),this.container.append(s),!e.popupRef&&this.hasPopupData&&(this.hasOwnCommentButton=!0,this._createPopup()),this.container}getElementsToTriggerPopup(){return p(this,Cy)}addHighlightArea(){this.container.classList.add("highlightArea")}}Cy=new WeakMap;var Ty;class dz extends zi{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0});z(this,Ty,null)}render(){this.container.classList.add("squareAnnotation");const{data:e,width:n,height:r}=this,s=this.svgFactory.create(n,r,!0),a=e.borderStyle.width,u=k(this,Ty,this.svgFactory.createElement("svg:rect"));return u.setAttribute("x",a/2),u.setAttribute("y",a/2),u.setAttribute("width",n-a),u.setAttribute("height",r-a),u.setAttribute("stroke-width",a||1),u.setAttribute("stroke","transparent"),u.setAttribute("fill","transparent"),s.append(u),this.container.append(s),!e.popupRef&&this.hasPopupData&&(this.hasOwnCommentButton=!0,this._createPopup()),this.container}getElementsToTriggerPopup(){return p(this,Ty)}addHighlightArea(){this.container.classList.add("highlightArea")}}Ty=new WeakMap;var Ny;class pz extends zi{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0});z(this,Ny,null)}render(){this.container.classList.add("circleAnnotation");const{data:e,width:n,height:r}=this,s=this.svgFactory.create(n,r,!0),a=e.borderStyle.width,u=k(this,Ny,this.svgFactory.createElement("svg:ellipse"));return u.setAttribute("cx",n/2),u.setAttribute("cy",r/2),u.setAttribute("rx",n/2-a/2),u.setAttribute("ry",r/2-a/2),u.setAttribute("stroke-width",a||1),u.setAttribute("stroke","transparent"),u.setAttribute("fill","transparent"),s.append(u),this.container.append(s),!e.popupRef&&this.hasPopupData&&(this.hasOwnCommentButton=!0,this._createPopup()),this.container}getElementsToTriggerPopup(){return p(this,Ny)}addHighlightArea(){this.container.classList.add("highlightArea")}}Ny=new WeakMap;var Ry;class KD extends zi{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0});z(this,Ry,null);this.containerClassName="polylineAnnotation",this.svgElementName="svg:polyline"}render(){this.container.classList.add(this.containerClassName);const{data:{rect:e,vertices:n,borderStyle:r,popupRef:s},width:a,height:u}=this;if(!n)return this.container;const c=this.svgFactory.create(a,u,!0);let h=[];for(let g=0,m=n.length;g<m;g+=2){const y=n[g]-e[0],w=e[3]-n[g+1];h.push(`${y},${w}`)}h=h.join(" ");const f=k(this,Ry,this.svgFactory.createElement(this.svgElementName));return f.setAttribute("points",h),f.setAttribute("stroke-width",r.width||1),f.setAttribute("stroke","transparent"),f.setAttribute("fill","transparent"),c.append(f),this.container.append(c),!s&&this.hasPopupData&&(this.hasOwnCommentButton=!0,this._createPopup()),this.container}getElementsToTriggerPopup(){return p(this,Ry)}addHighlightArea(){this.container.classList.add("highlightArea")}}Ry=new WeakMap;class gz extends KD{constructor(t){super(t),this.containerClassName="polygonAnnotation",this.svgElementName="svg:polygon"}}class mz extends zi{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0})}render(){return this.container.classList.add("caretAnnotation"),!this.data.popupRef&&this.hasPopupData&&(this.hasOwnCommentButton=!0,this._createPopup()),this.container}}var Dy,cp,Ly,ZS;class cC extends zi{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0});z(this,Ly);z(this,Dy,null);z(this,cp,[]);this.containerClassName="inkAnnotation",this.svgElementName="svg:polyline",this.annotationEditorType=this.data.it==="InkHighlight"?We.HIGHLIGHT:We.INK}render(){this.container.classList.add(this.containerClassName);const{data:{rect:e,rotation:n,inkLists:r,borderStyle:s,popupRef:a}}=this,{transform:u,width:c,height:h}=$(this,Ly,ZS).call(this,n,e),f=this.svgFactory.create(c,h,!0),g=k(this,Dy,this.svgFactory.createElement("svg:g"));f.append(g),g.setAttribute("stroke-width",s.width||1),g.setAttribute("stroke-linecap","round"),g.setAttribute("stroke-linejoin","round"),g.setAttribute("stroke-miterlimit",10),g.setAttribute("stroke","transparent"),g.setAttribute("fill","transparent"),g.setAttribute("transform",u);for(let m=0,y=r.length;m<y;m++){const w=this.svgFactory.createElement(this.svgElementName);p(this,cp).push(w),w.setAttribute("points",r[m].join(",")),g.append(w)}return!a&&this.hasPopupData&&(this.hasOwnCommentButton=!0,this._createPopup()),this.container.append(f),this._editOnDoubleClick(),this.container}updateEdited(e){super.updateEdited(e);const{thickness:n,points:r,rect:s}=e,a=p(this,Dy);if(n>=0&&a.setAttribute("stroke-width",n||1),r)for(let u=0,c=p(this,cp).length;u<c;u++)p(this,cp)[u].setAttribute("points",r[u].join(","));if(s){const{transform:u,width:c,height:h}=$(this,Ly,ZS).call(this,this.data.rotation,s);a.parentElement.setAttribute("viewBox",`0 0 ${c} ${h}`),a.setAttribute("transform",u)}}getElementsToTriggerPopup(){return p(this,cp)}addHighlightArea(){this.container.classList.add("highlightArea")}}Dy=new WeakMap,cp=new WeakMap,Ly=new WeakSet,ZS=function(e,n){switch(e){case 90:return{transform:`rotate(90) translate(${-n[0]},${n[1]}) scale(1,-1)`,width:n[3]-n[1],height:n[2]-n[0]};case 180:return{transform:`rotate(180) translate(${-n[2]},${n[1]}) scale(1,-1)`,width:n[2]-n[0],height:n[3]-n[1]};case 270:return{transform:`rotate(270) translate(${-n[2]},${n[3]}) scale(1,-1)`,width:n[3]-n[1],height:n[2]-n[0]};default:return{transform:`translate(${-n[0]},${n[3]}) scale(1,-1)`,width:n[2]-n[0],height:n[3]-n[1]}}};class QD extends zi{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0}),this.annotationEditorType=We.HIGHLIGHT}render(){const{data:{overlaidText:t,popupRef:e}}=this;if(!e&&this.hasPopupData&&(this.hasOwnCommentButton=!0,this._createPopup()),this.container.classList.add("highlightAnnotation"),this._editOnDoubleClick(),t){const n=document.createElement("mark");n.classList.add("overlaidText"),n.textContent=t,this.container.append(n)}return this.container}}class vz extends zi{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0})}render(){const{data:{overlaidText:t,popupRef:e}}=this;if(!e&&this.hasPopupData&&(this.hasOwnCommentButton=!0,this._createPopup()),this.container.classList.add("underlineAnnotation"),t){const n=document.createElement("u");n.classList.add("overlaidText"),n.textContent=t,this.container.append(n)}return this.container}}class yz extends zi{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0})}render(){const{data:{overlaidText:t,popupRef:e}}=this;if(!e&&this.hasPopupData&&(this.hasOwnCommentButton=!0,this._createPopup()),this.container.classList.add("squigglyAnnotation"),t){const n=document.createElement("u");n.classList.add("overlaidText"),n.textContent=t,this.container.append(n)}return this.container}}class xz extends zi{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0})}render(){const{data:{overlaidText:t,popupRef:e}}=this;if(!e&&this.hasPopupData&&(this.hasOwnCommentButton=!0,this._createPopup()),this.container.classList.add("strikeoutAnnotation"),t){const n=document.createElement("s");n.classList.add("overlaidText"),n.textContent=t,this.container.append(n)}return this.container}}class ZD extends zi{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0}),this.annotationEditorType=We.STAMP}render(){return this.container.classList.add("stampAnnotation"),this.container.setAttribute("role","img"),!this.data.popupRef&&this.hasPopupData&&(this.hasOwnCommentButton=!0,this._createPopup()),this._editOnDoubleClick(),this.container}}var My,Iy,tE;class bz extends zi{constructor(e){var r;super(e,{isRenderable:!0});z(this,Iy);z(this,My,null);const{file:n}=this.data;this.filename=n.filename,this.content=n.content,(r=this.linkService.eventBus)==null||r.dispatch("fileattachmentannotation",{source:this,...n})}render(){this.container.classList.add("fileAttachmentAnnotation");const{container:e,data:n}=this;let r;n.hasAppearance||n.fillAlpha===0?r=document.createElement("div"):(r=document.createElement("img"),r.src=`${this.imageResourcesPath}annotation-${/paperclip/i.test(n.name)?"paperclip":"pushpin"}.svg`,n.fillAlpha&&n.fillAlpha<1&&(r.style=`filter: opacity(${Math.round(n.fillAlpha*100)}%);`)),r.addEventListener("dblclick",$(this,Iy,tE).bind(this)),k(this,My,r);const{isMac:s}=bs.platform;return e.addEventListener("keydown",a=>{a.key==="Enter"&&(s?a.metaKey:a.ctrlKey)&&$(this,Iy,tE).call(this)}),!n.popupRef&&this.hasPopupData?(this.hasOwnCommentButton=!0,this._createPopup()):r.classList.add("popupTriggerArea"),e.append(r),e}getElementsToTriggerPopup(){return p(this,My)}addHighlightArea(){this.container.classList.add("highlightArea")}}My=new WeakMap,Iy=new WeakSet,tE=function(){var e;(e=this.downloadManager)==null||e.openOrDownloadData(this.content,this.filename)};var hp,fp,p1,fd,Py,dp,fa,ky,Nh,q5,nE;const wC=class wC{constructor({div:t,accessibilityManager:e,annotationCanvasMap:n,annotationEditorUIManager:r,page:s,viewport:a,structTreeLayer:u,commentManager:c,linkService:h,annotationStorage:f}){z(this,Nh);z(this,hp,null);z(this,fp,null);z(this,p1,null);z(this,fd,new Map);z(this,Py,null);z(this,dp,null);z(this,fa,[]);z(this,ky,!1);this.div=t,k(this,hp,e),k(this,fp,n),k(this,Py,u||null),k(this,dp,h||null),k(this,p1,f||new oC),this.page=s,this.viewport=a,this.zIndex=0,this._annotationEditorUIManager=r,this._commentManager=c||null}hasEditableAnnotations(){return p(this,fd).size>0}async render(t){var u;const{annotations:e}=t,n=this.div;Pp(n,this.viewport);const r=new Map,s=[],a={data:null,layer:n,linkService:p(this,dp),downloadManager:t.downloadManager,imageResourcesPath:t.imageResourcesPath||"",renderForms:t.renderForms!==!1,svgFactory:new sA,annotationStorage:p(this,p1),enableComment:t.enableComment===!0,enableScripting:t.enableScripting===!0,hasJSActions:t.hasJSActions,fieldObjects:t.fieldObjects,parent:this,elements:null};for(const c of e){if(c.noHTML)continue;const h=c.annotationType===vr.POPUP;if(h){const m=r.get(c.id);if(!m)continue;if(!this._commentManager){s.push(c);continue}a.elements=m}else if(c.rect[2]===c.rect[0]||c.rect[3]===c.rect[1])continue;a.data=c;const f=Tw.create(a);if(!f.isRenderable)continue;if(!h&&(p(this,fa).push(f),c.popupRef)){const m=r.get(c.popupRef);m?m.push(f):r.set(c.popupRef,[f])}const g=f.render();c.hidden&&(g.style.visibility="hidden"),f._isEditable&&(p(this,fd).set(f.data.id,f),(u=this._annotationEditorUIManager)==null||u.renderAnnotationElement(f))}await $(this,Nh,q5).call(this);for(const c of s){const h=a.elements=r.get(c.id);a.data=c;const f=Tw.create(a);if(!f.isRenderable)continue;const g=f.render();f.contentElement.id=`${Kg}${c.id}`,c.hidden&&(g.style.visibility="hidden"),h.at(-1).container.after(g)}$(this,Nh,nE).call(this)}async addLinkAnnotations(t){const e={data:null,layer:this.div,linkService:p(this,dp),svgFactory:new sA,parent:this};for(const n of t){n.borderStyle||(n.borderStyle=wC._defaultBorderStyle),e.data=n;const r=Tw.create(e);r.isRenderable&&(r.render(),r.contentElement.id=`${Kg}${n.id}`,p(this,fa).push(r))}await $(this,Nh,q5).call(this)}update({viewport:t}){const e=this.div;this.viewport=t,Pp(e,{rotation:t.rotation}),$(this,Nh,nE).call(this),e.hidden=!1}getEditableAnnotations(){return Array.from(p(this,fd).values())}getEditableAnnotation(t){return p(this,fd).get(t)}addFakeAnnotation(t){const{div:e}=this,{id:n,rotation:r}=t,s=new rz({data:{id:n,rect:t.getPDFRect(),rotation:r},editor:t,layer:e,parent:this,enableComment:!!this._commentManager,linkService:p(this,dp),annotationStorage:p(this,p1)});return s.render(),s.contentElement.id=`${Kg}${n}`,s.createOrUpdatePopup(),p(this,fa).push(s),s}removeAnnotation(t){var r;const e=p(this,fa).findIndex(s=>s.data.id===t);if(e<0)return;const[n]=p(this,fa).splice(e,1);(r=p(this,hp))==null||r.removePointerInTextLayer(n.contentElement)}updateFakeAnnotations(t){if(t.length!==0){for(const e of t)e.updateFakeAnnotationElement(this);$(this,Nh,q5).call(this)}}togglePointerEvents(t=!1){this.div.classList.toggle("disabled",!t)}static get _defaultBorderStyle(){return Ve(this,"_defaultBorderStyle",Object.freeze({width:1,rawWidth:1,style:Ug.SOLID,dashArray:[3],horizontalCornerRadius:0,verticalCornerRadius:0}))}};hp=new WeakMap,fp=new WeakMap,p1=new WeakMap,fd=new WeakMap,Py=new WeakMap,dp=new WeakMap,fa=new WeakMap,ky=new WeakMap,Nh=new WeakSet,q5=async function(){var n,r,s;if(p(this,fa).length===0)return;this.div.replaceChildren();const t=[];if(!p(this,ky)){k(this,ky,!0);for(const{contentElement:a,data:{id:u}}of p(this,fa)){const c=a.id=`${Kg}${u}`;t.push((n=p(this,Py))==null?void 0:n.getAriaAttributes(c).then(h=>{if(h)for(const[f,g]of h)a.setAttribute(f,g)}))}}p(this,fa).sort(({data:{rect:[a,u,c,h]}},{data:{rect:[f,g,m,y]}})=>{if(a===c&&u===h)return 1;if(f===m&&g===y)return-1;const w=h,S=u,T=(u+h)/2,C=y,D=g,R=(g+y)/2;if(T>=C&&R<=S)return-1;if(R>=w&&T<=D)return 1;const I=(a+c)/2,F=(f+m)/2;return I-F});const e=document.createDocumentFragment();for(const a of p(this,fa))e.append(a.container),this._commentManager?(s=((r=a.extraPopupElement)==null?void 0:r.popup)||a.popup)==null||s.renderCommentButton():a.extraPopupElement&&e.append(a.extraPopupElement.render());if(this.div.append(e),await Promise.all(t),p(this,hp))for(const a of p(this,fa))p(this,hp).addPointerInTextLayer(a.contentElement,!1)},nE=function(){var e;if(!p(this,fp))return;const t=this.div;for(const[n,r]of p(this,fp)){const s=t.querySelector(`[data-annotation-id="${n}"]`);if(!s)continue;r.className="annotationContent";const{firstChild:a}=s;a?a.nodeName==="CANVAS"?a.replaceWith(r):a.classList.contains("annotationContent")?a.after(r):a.before(r):s.append(r);const u=p(this,fd).get(n);u&&(u._hasNoCanvas?((e=this._annotationEditorUIManager)==null||e.setMissingCanvas(n,s.id,r),u._hasNoCanvas=!1):u.canvas=r)}p(this,fp).clear()};let eE=wC;const f5=/\r\n?|\n/g;var da,Fy,pp,pa,xr,tL,eL,nL,z5,Rh,G5,V5,iL,rE,rL;const Si=class Si extends bi{constructor(e){super({...e,name:"freeTextEditor"});z(this,xr);z(this,da,"");z(this,Fy,`${this.id}-editor`);z(this,pp,null);z(this,pa);Kt(this,"_colorPicker",null);this.color=e.color||Si._defaultColor||bi._defaultLineColor,k(this,pa,e.fontSize||Si._defaultFontSize),this.annotationElementId||this._uiManager.a11yAlert("pdfjs-editor-freetext-added-alert"),this.canAddComment=!1}static get _keyboardManager(){const e=Si.prototype,n=a=>a.isEmpty(),r=kp.TRANSLATE_SMALL,s=kp.TRANSLATE_BIG;return Ve(this,"_keyboardManager",new ax([[["ctrl+s","mac+meta+s","ctrl+p","mac+meta+p"],e.commitOrRemove,{bubbles:!0}],[["ctrl+Enter","mac+meta+Enter","Escape","mac+Escape"],e.commitOrRemove],[["ArrowLeft","mac+ArrowLeft"],e._translateEmpty,{args:[-r,0],checker:n}],[["ctrl+ArrowLeft","mac+shift+ArrowLeft"],e._translateEmpty,{args:[-s,0],checker:n}],[["ArrowRight","mac+ArrowRight"],e._translateEmpty,{args:[r,0],checker:n}],[["ctrl+ArrowRight","mac+shift+ArrowRight"],e._translateEmpty,{args:[s,0],checker:n}],[["ArrowUp","mac+ArrowUp"],e._translateEmpty,{args:[0,-r],checker:n}],[["ctrl+ArrowUp","mac+shift+ArrowUp"],e._translateEmpty,{args:[0,-s],checker:n}],[["ArrowDown","mac+ArrowDown"],e._translateEmpty,{args:[0,r],checker:n}],[["ctrl+ArrowDown","mac+shift+ArrowDown"],e._translateEmpty,{args:[0,s],checker:n}]]))}static initialize(e,n){bi.initialize(e,n);const r=getComputedStyle(document.documentElement);this._internalPadding=parseFloat(r.getPropertyValue("--freetext-padding"))}static updateDefaultParams(e,n){switch(e){case xn.FREETEXT_SIZE:Si._defaultFontSize=n;break;case xn.FREETEXT_COLOR:Si._defaultColor=n;break}}updateParams(e,n){switch(e){case xn.FREETEXT_SIZE:$(this,xr,tL).call(this,n);break;case xn.FREETEXT_COLOR:$(this,xr,eL).call(this,n);break}}static get defaultPropertiesToUpdate(){return[[xn.FREETEXT_SIZE,Si._defaultFontSize],[xn.FREETEXT_COLOR,Si._defaultColor||bi._defaultLineColor]]}get propertiesToUpdate(){return[[xn.FREETEXT_SIZE,p(this,pa)],[xn.FREETEXT_COLOR,this.color]]}get toolbarButtons(){return this._colorPicker||(this._colorPicker=new rA(this)),[["colorPicker",this._colorPicker]]}get colorType(){return xn.FREETEXT_COLOR}onUpdatedColor(){var e;this.editorDiv.style.color=this.color,(e=this._colorPicker)==null||e.update(this.color),super.onUpdatedColor()}_translateEmpty(e,n){this._uiManager.translateSelectedEditors(e,n,!0)}getInitialTranslation(){const e=this.parentScale;return[-Si._internalPadding*e,-(Si._internalPadding+p(this,pa))*e]}rebuild(){this.parent&&(super.rebuild(),this.div!==null&&(this.isAttachedToDOM||this.parent.add(this)))}enableEditMode(){if(!super.enableEditMode())return!1;this.overlayDiv.classList.remove("enabled"),this.editorDiv.contentEditable=!0,this._isDraggable=!1,this.div.removeAttribute("aria-activedescendant"),k(this,pp,new AbortController);const e=this._uiManager.combinedSignal(p(this,pp));return this.editorDiv.addEventListener("keydown",this.editorDivKeydown.bind(this),{signal:e}),this.editorDiv.addEventListener("focus",this.editorDivFocus.bind(this),{signal:e}),this.editorDiv.addEventListener("blur",this.editorDivBlur.bind(this),{signal:e}),this.editorDiv.addEventListener("input",this.editorDivInput.bind(this),{signal:e}),this.editorDiv.addEventListener("paste",this.editorDivPaste.bind(this),{signal:e}),!0}disableEditMode(){var e;return super.disableEditMode()?(this.overlayDiv.classList.add("enabled"),this.editorDiv.contentEditable=!1,this.div.setAttribute("aria-activedescendant",p(this,Fy)),this._isDraggable=!0,(e=p(this,pp))==null||e.abort(),k(this,pp,null),this.div.focus({preventScroll:!0}),this.isEditing=!1,this.parent.div.classList.add("freetextEditing"),!0):!1}focusin(e){this._focusEventsAllowed&&(super.focusin(e),e.target!==this.editorDiv&&this.editorDiv.focus())}onceAdded(e){var n;this.width||(this.enableEditMode(),e&&this.editorDiv.focus(),(n=this._initialOptions)!=null&&n.isCentered&&this.center(),this._initialOptions=null)}isEmpty(){return!this.editorDiv||this.editorDiv.innerText.trim()===""}remove(){this.isEditing=!1,this.parent&&(this.parent.setEditingState(!0),this.parent.div.classList.add("freetextEditing")),super.remove()}commit(){if(!this.isInEditMode())return;super.commit(),this.disableEditMode();const e=p(this,da),n=k(this,da,$(this,xr,nL).call(this).trimEnd());if(e===n)return;const r=s=>{if(k(this,da,s),!s){this.remove();return}$(this,xr,V5).call(this),this._uiManager.rebuild(this),$(this,xr,z5).call(this)};this.addCommands({cmd:()=>{r(n)},undo:()=>{r(e)},mustExec:!1}),$(this,xr,z5).call(this)}shouldGetKeyboardEvents(){return this.isInEditMode()}enterInEditMode(){this.enableEditMode(),this.editorDiv.focus()}keydown(e){e.target===this.div&&e.key==="Enter"&&(this.enterInEditMode(),e.preventDefault())}editorDivKeydown(e){Si._keyboardManager.exec(this,e)}editorDivFocus(e){this.isEditing=!0}editorDivBlur(e){this.isEditing=!1}editorDivInput(e){this.parent.div.classList.toggle("freetextEditing",this.isEmpty())}disableEditing(){this.editorDiv.setAttribute("role","comment"),this.editorDiv.removeAttribute("aria-multiline")}enableEditing(){this.editorDiv.setAttribute("role","textbox"),this.editorDiv.setAttribute("aria-multiline",!0)}get canChangeContent(){return!0}render(){if(this.div)return this.div;let e,n;(this._isCopy||this.annotationElementId)&&(e=this.x,n=this.y),super.render(),this.editorDiv=document.createElement("div"),this.editorDiv.className="internal",this.editorDiv.setAttribute("id",p(this,Fy)),this.editorDiv.setAttribute("data-l10n-id","pdfjs-free-text2"),this.editorDiv.setAttribute("data-l10n-attrs","default-content"),this.enableEditing(),this.editorDiv.contentEditable=!0;const{style:r}=this.editorDiv;if(r.fontSize=`calc(${p(this,pa)}px * var(--total-scale-factor))`,r.color=this.color,this.div.append(this.editorDiv),this.overlayDiv=document.createElement("div"),this.overlayDiv.classList.add("overlay","enabled"),this.div.append(this.overlayDiv),this._isCopy||this.annotationElementId){const[s,a]=this.parentDimensions;if(this.annotationElementId){const{position:u}=this._initialData;let[c,h]=this.getInitialTranslation();[c,h]=this.pageTranslationToScreen(c,h);const[f,g]=this.pageDimensions,[m,y]=this.pageTranslation;let w,S;switch(this.rotation){case 0:w=e+(u[0]-m)/f,S=n+this.height-(u[1]-y)/g;break;case 90:w=e+(u[0]-m)/f,S=n-(u[1]-y)/g,[c,h]=[h,-c];break;case 180:w=e-this.width+(u[0]-m)/f,S=n-(u[1]-y)/g,[c,h]=[-c,-h];break;case 270:w=e+(u[0]-m-this.height*g)/f,S=n+(u[1]-y-this.width*f)/g,[c,h]=[-h,c];break}this.setAt(w*s,S*a,c,h)}else this._moveAfterPaste(e,n);$(this,xr,V5).call(this),this._isDraggable=!0,this.editorDiv.contentEditable=!1}else this._isDraggable=!1,this.editorDiv.contentEditable=!0;return this.div}editorDivPaste(e){var w,S,T;const n=e.clipboardData||window.clipboardData,{types:r}=n;if(r.length===1&&r[0]==="text/plain")return;e.preventDefault();const s=$(w=Si,Rh,rE).call(w,n.getData("text")||"").replaceAll(f5,`
`);if(!s)return;const a=window.getSelection();if(!a.rangeCount)return;this.editorDiv.normalize(),a.deleteFromDocument();const u=a.getRangeAt(0);if(!s.includes(`
`)){u.insertNode(document.createTextNode(s)),this.editorDiv.normalize(),a.collapseToStart();return}const{startContainer:c,startOffset:h}=u,f=[],g=[];if(c.nodeType===Node.TEXT_NODE){const C=c.parentElement;if(g.push(c.nodeValue.slice(h).replaceAll(f5,"")),C!==this.editorDiv){let D=f;for(const R of this.editorDiv.childNodes){if(R===C){D=g;continue}D.push($(S=Si,Rh,G5).call(S,R))}}f.push(c.nodeValue.slice(0,h).replaceAll(f5,""))}else if(c===this.editorDiv){let C=f,D=0;for(const R of this.editorDiv.childNodes)D++===h&&(C=g),C.push($(T=Si,Rh,G5).call(T,R))}k(this,da,`${f.join(`
`)}${s}${g.join(`
`)}`),$(this,xr,V5).call(this);const m=new Range;let y=Math.sumPrecise(f.map(C=>C.length));for(const{firstChild:C}of this.editorDiv.childNodes)if(C.nodeType===Node.TEXT_NODE){const D=C.nodeValue.length;if(y<=D){m.setStart(C,y),m.setEnd(C,y);break}y-=D}a.removeAllRanges(),a.addRange(m)}get contentDiv(){return this.editorDiv}getPDFRect(){const e=Si._internalPadding*this.parentScale;return this.getRect(e,e)}static async deserialize(e,n,r){var u;let s=null;if(e instanceof JD){const{data:{defaultAppearanceData:{fontSize:c,fontColor:h},rect:f,rotation:g,id:m,popupRef:y,richText:w,contentsObj:S,creationDate:T,modificationDate:C},textContent:D,textPosition:R,parent:{page:{pageNumber:I}}}=e;if(!D||D.length===0)return null;s=e={annotationType:We.FREETEXT,color:Array.from(h),fontSize:c,value:D.join(`
`),position:R,pageIndex:I-1,rect:f.slice(0),rotation:g,annotationElementId:m,id:m,deleted:!1,popupRef:y,comment:(S==null?void 0:S.str)||null,richText:w,creationDate:T,modificationDate:C}}const a=await super.deserialize(e,n,r);return k(a,pa,e.fontSize),a.color=ge.makeHexColor(...e.color),k(a,da,$(u=Si,Rh,rE).call(u,e.value)),a._initialData=s,e.comment&&a.setCommentData(e),a}serialize(e=!1){if(this.isEmpty())return null;if(this.deleted)return this.serializeDeleted();const n=bi._colorManager.convert(this.isAttachedToDOM?getComputedStyle(this.editorDiv).color:this.color),r=Object.assign(super.serialize(e),{color:n,fontSize:p(this,pa),value:$(this,xr,iL).call(this)});return this.addComment(r),e?(r.isCopy=!0,r):this.annotationElementId&&!$(this,xr,rL).call(this,r)?null:(r.id=this.annotationElementId,r)}renderAnnotationElement(e){const n=super.renderAnnotationElement(e);if(!n)return null;const{style:r}=n;r.fontSize=`calc(${p(this,pa)}px * var(--total-scale-factor))`,r.color=this.color,n.replaceChildren();for(const s of p(this,da).split(`
`)){const a=document.createElement("div");a.append(s?document.createTextNode(s):document.createElement("br")),n.append(a)}return e.updateEdited({rect:this.getPDFRect(),popup:this._uiManager.hasCommentManager()||this.hasEditedComment?this.comment:{text:p(this,da)}}),n}resetAnnotationElement(e){super.resetAnnotationElement(e),e.resetEdited()}};da=new WeakMap,Fy=new WeakMap,pp=new WeakMap,pa=new WeakMap,xr=new WeakSet,tL=function(e){const n=s=>{this.editorDiv.style.fontSize=`calc(${s}px * var(--total-scale-factor))`,this.translate(0,-(s-p(this,pa))*this.parentScale),k(this,pa,s),$(this,xr,z5).call(this)},r=p(this,pa);this.addCommands({cmd:n.bind(this,e),undo:n.bind(this,r),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:xn.FREETEXT_SIZE,overwriteIfSameType:!0,keepUndo:!0})},eL=function(e){const n=s=>{this.color=s,this.onUpdatedColor()},r=this.color;this.addCommands({cmd:n.bind(this,e),undo:n.bind(this,r),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:xn.FREETEXT_COLOR,overwriteIfSameType:!0,keepUndo:!0})},nL=function(){var r;const e=[];this.editorDiv.normalize();let n=null;for(const s of this.editorDiv.childNodes)(n==null?void 0:n.nodeType)===Node.TEXT_NODE&&s.nodeName==="BR"||(e.push($(r=Si,Rh,G5).call(r,s)),n=s);return e.join(`
`)},z5=function(){const[e,n]=this.parentDimensions;let r;if(this.isAttachedToDOM)r=this.div.getBoundingClientRect();else{const{currentLayer:s,div:a}=this,u=a.style.display,c=a.classList.contains("hidden");a.classList.remove("hidden"),a.style.display="hidden",s.div.append(this.div),r=a.getBoundingClientRect(),a.remove(),a.style.display=u,a.classList.toggle("hidden",c)}this.rotation%180===this.parentRotation%180?(this.width=r.width/e,this.height=r.height/n):(this.width=r.height/e,this.height=r.width/n),this.fixAndSetPosition()},Rh=new WeakSet,G5=function(e){return(e.nodeType===Node.TEXT_NODE?e.nodeValue:e.innerText).replaceAll(f5,"")},V5=function(){if(this.editorDiv.replaceChildren(),!!p(this,da))for(const e of p(this,da).split(`
`)){const n=document.createElement("div");n.append(e?document.createTextNode(e):document.createElement("br")),this.editorDiv.append(n)}},iL=function(){return p(this,da).replaceAll(""," ")},rE=function(e){return e.replaceAll(" ","")},rL=function(e){const{value:n,fontSize:r,color:s,pageIndex:a}=this._initialData;return this.hasEditedComment||this._hasBeenMoved||e.value!==n||e.fontSize!==r||e.color.some((u,c)=>u!==s[c])||e.pageIndex!==a},z(Si,Rh),Kt(Si,"_freeTextDefaultContent",""),Kt(Si,"_internalPadding",0),Kt(Si,"_defaultColor",null),Kt(Si,"_defaultFontSize",10),Kt(Si,"_type","freetext"),Kt(Si,"_editorType",We.FREETEXT);let iE=Si;class de{toSVGPath(){ui("Abstract method `toSVGPath` must be implemented.")}get box(){ui("Abstract getter `box` must be implemented.")}serialize(t,e){ui("Abstract method `serialize` must be implemented.")}static _rescale(t,e,n,r,s,a){a||(a=new Float32Array(t.length));for(let u=0,c=t.length;u<c;u+=2)a[u]=e+t[u]*r,a[u+1]=n+t[u+1]*s;return a}static _rescaleAndSwap(t,e,n,r,s,a){a||(a=new Float32Array(t.length));for(let u=0,c=t.length;u<c;u+=2)a[u]=e+t[u+1]*r,a[u+1]=n+t[u]*s;return a}static _translate(t,e,n,r){r||(r=new Float32Array(t.length));for(let s=0,a=t.length;s<a;s+=2)r[s]=e+t[s],r[s+1]=n+t[s+1];return r}static svgRound(t){return Math.round(t*1e4)}static _normalizePoint(t,e,n,r,s){switch(s){case 90:return[1-e/n,t/r];case 180:return[1-t/n,1-e/r];case 270:return[e/n,1-t/r];default:return[t/n,e/r]}}static _normalizePagePoint(t,e,n){switch(n){case 90:return[1-e,t];case 180:return[1-t,1-e];case 270:return[e,1-t];default:return[t,e]}}static createBezierPoints(t,e,n,r,s,a){return[(t+5*n)/6,(e+5*r)/6,(5*n+s)/6,(5*r+a)/6,(n+s)/2,(r+a)/2]}}Kt(de,"PRECISION",1e-4);var ga,ql,g1,m1,Qu,on,gp,mp,By,Oy,v1,y1,dd,Uy,EA,CA,Ir,Qv,sL,oL,aL,lL,uL,cL;const Vc=class Vc{constructor({x:t,y:e},n,r,s,a,u=0){z(this,Ir);z(this,ga);z(this,ql,[]);z(this,g1);z(this,m1);z(this,Qu,[]);z(this,on,new Float32Array(18));z(this,gp);z(this,mp);z(this,By);z(this,Oy);z(this,v1);z(this,y1);z(this,dd,[]);k(this,ga,n),k(this,y1,s*r),k(this,m1,a),p(this,on).set([NaN,NaN,NaN,NaN,t,e],6),k(this,g1,u),k(this,Oy,p(Vc,Uy)*r),k(this,By,p(Vc,CA)*r),k(this,v1,r),p(this,dd).push(t,e)}isEmpty(){return isNaN(p(this,on)[8])}add({x:t,y:e}){var tt;k(this,gp,t),k(this,mp,e);const[n,r,s,a]=p(this,ga);let[u,c,h,f]=p(this,on).subarray(8,12);const g=t-h,m=e-f,y=Math.hypot(g,m);if(y<p(this,By))return!1;const w=y-p(this,Oy),S=w/y,T=S*g,C=S*m;let D=u,R=c;u=h,c=f,h+=T,f+=C,(tt=p(this,dd))==null||tt.push(t,e);const I=-C/w,F=T/w,q=I*p(this,y1),U=F*p(this,y1);return p(this,on).set(p(this,on).subarray(2,8),0),p(this,on).set([h+q,f+U],4),p(this,on).set(p(this,on).subarray(14,18),12),p(this,on).set([h-q,f-U],16),isNaN(p(this,on)[6])?(p(this,Qu).length===0&&(p(this,on).set([u+q,c+U],2),p(this,Qu).push(NaN,NaN,NaN,NaN,(u+q-n)/s,(c+U-r)/a),p(this,on).set([u-q,c-U],14),p(this,ql).push(NaN,NaN,NaN,NaN,(u-q-n)/s,(c-U-r)/a)),p(this,on).set([D,R,u,c,h,f],6),!this.isEmpty()):(p(this,on).set([D,R,u,c,h,f],6),Math.abs(Math.atan2(R-c,D-u)-Math.atan2(C,T))<Math.PI/2?([u,c,h,f]=p(this,on).subarray(2,6),p(this,Qu).push(NaN,NaN,NaN,NaN,((u+h)/2-n)/s,((c+f)/2-r)/a),[u,c,D,R]=p(this,on).subarray(14,18),p(this,ql).push(NaN,NaN,NaN,NaN,((D+u)/2-n)/s,((R+c)/2-r)/a),!0):([D,R,u,c,h,f]=p(this,on).subarray(0,6),p(this,Qu).push(((D+5*u)/6-n)/s,((R+5*c)/6-r)/a,((5*u+h)/6-n)/s,((5*c+f)/6-r)/a,((u+h)/2-n)/s,((c+f)/2-r)/a),[h,f,u,c,D,R]=p(this,on).subarray(12,18),p(this,ql).push(((D+5*u)/6-n)/s,((R+5*c)/6-r)/a,((5*u+h)/6-n)/s,((5*c+f)/6-r)/a,((u+h)/2-n)/s,((c+f)/2-r)/a),!0))}toSVGPath(){if(this.isEmpty())return"";const t=p(this,Qu),e=p(this,ql);if(isNaN(p(this,on)[6])&&!this.isEmpty())return $(this,Ir,sL).call(this);const n=[];n.push(`M${t[4]} ${t[5]}`);for(let r=6;r<t.length;r+=6)isNaN(t[r])?n.push(`L${t[r+4]} ${t[r+5]}`):n.push(`C${t[r]} ${t[r+1]} ${t[r+2]} ${t[r+3]} ${t[r+4]} ${t[r+5]}`);$(this,Ir,aL).call(this,n);for(let r=e.length-6;r>=6;r-=6)isNaN(e[r])?n.push(`L${e[r+4]} ${e[r+5]}`):n.push(`C${e[r]} ${e[r+1]} ${e[r+2]} ${e[r+3]} ${e[r+4]} ${e[r+5]}`);return $(this,Ir,oL).call(this,n),n.join(" ")}newFreeDrawOutline(t,e,n,r,s,a){return new hL(t,e,n,r,s,a)}getOutlines(){var g;const t=p(this,Qu),e=p(this,ql),n=p(this,on),[r,s,a,u]=p(this,ga),c=new Float32Array((((g=p(this,dd))==null?void 0:g.length)??0)+2);for(let m=0,y=c.length-2;m<y;m+=2)c[m]=(p(this,dd)[m]-r)/a,c[m+1]=(p(this,dd)[m+1]-s)/u;if(c[c.length-2]=(p(this,gp)-r)/a,c[c.length-1]=(p(this,mp)-s)/u,isNaN(n[6])&&!this.isEmpty())return $(this,Ir,lL).call(this,c);const h=new Float32Array(p(this,Qu).length+24+p(this,ql).length);let f=t.length;for(let m=0;m<f;m+=2){if(isNaN(t[m])){h[m]=h[m+1]=NaN;continue}h[m]=t[m],h[m+1]=t[m+1]}f=$(this,Ir,cL).call(this,h,f);for(let m=e.length-6;m>=6;m-=6)for(let y=0;y<6;y+=2){if(isNaN(e[m+y])){h[f]=h[f+1]=NaN,f+=2;continue}h[f]=e[m+y],h[f+1]=e[m+y+1],f+=2}return $(this,Ir,uL).call(this,h,f),this.newFreeDrawOutline(h,c,p(this,ga),p(this,v1),p(this,g1),p(this,m1))}};ga=new WeakMap,ql=new WeakMap,g1=new WeakMap,m1=new WeakMap,Qu=new WeakMap,on=new WeakMap,gp=new WeakMap,mp=new WeakMap,By=new WeakMap,Oy=new WeakMap,v1=new WeakMap,y1=new WeakMap,dd=new WeakMap,Uy=new WeakMap,EA=new WeakMap,CA=new WeakMap,Ir=new WeakSet,Qv=function(){const t=p(this,on).subarray(4,6),e=p(this,on).subarray(16,18),[n,r,s,a]=p(this,ga);return[(p(this,gp)+(t[0]-e[0])/2-n)/s,(p(this,mp)+(t[1]-e[1])/2-r)/a,(p(this,gp)+(e[0]-t[0])/2-n)/s,(p(this,mp)+(e[1]-t[1])/2-r)/a]},sL=function(){const[t,e,n,r]=p(this,ga),[s,a,u,c]=$(this,Ir,Qv).call(this);return`M${(p(this,on)[2]-t)/n} ${(p(this,on)[3]-e)/r} L${(p(this,on)[4]-t)/n} ${(p(this,on)[5]-e)/r} L${s} ${a} L${u} ${c} L${(p(this,on)[16]-t)/n} ${(p(this,on)[17]-e)/r} L${(p(this,on)[14]-t)/n} ${(p(this,on)[15]-e)/r} Z`},oL=function(t){const e=p(this,ql);t.push(`L${e[4]} ${e[5]} Z`)},aL=function(t){const[e,n,r,s]=p(this,ga),a=p(this,on).subarray(4,6),u=p(this,on).subarray(16,18),[c,h,f,g]=$(this,Ir,Qv).call(this);t.push(`L${(a[0]-e)/r} ${(a[1]-n)/s} L${c} ${h} L${f} ${g} L${(u[0]-e)/r} ${(u[1]-n)/s}`)},lL=function(t){const e=p(this,on),[n,r,s,a]=p(this,ga),[u,c,h,f]=$(this,Ir,Qv).call(this),g=new Float32Array(36);return g.set([NaN,NaN,NaN,NaN,(e[2]-n)/s,(e[3]-r)/a,NaN,NaN,NaN,NaN,(e[4]-n)/s,(e[5]-r)/a,NaN,NaN,NaN,NaN,u,c,NaN,NaN,NaN,NaN,h,f,NaN,NaN,NaN,NaN,(e[16]-n)/s,(e[17]-r)/a,NaN,NaN,NaN,NaN,(e[14]-n)/s,(e[15]-r)/a],0),this.newFreeDrawOutline(g,t,p(this,ga),p(this,v1),p(this,g1),p(this,m1))},uL=function(t,e){const n=p(this,ql);return t.set([NaN,NaN,NaN,NaN,n[4],n[5]],e),e+=6},cL=function(t,e){const n=p(this,on).subarray(4,6),r=p(this,on).subarray(16,18),[s,a,u,c]=p(this,ga),[h,f,g,m]=$(this,Ir,Qv).call(this);return t.set([NaN,NaN,NaN,NaN,(n[0]-s)/u,(n[1]-a)/c,NaN,NaN,NaN,NaN,h,f,NaN,NaN,NaN,NaN,g,m,NaN,NaN,NaN,NaN,(r[0]-s)/u,(r[1]-a)/c],e),e+=24},z(Vc,Uy,8),z(Vc,EA,2),z(Vc,CA,p(Vc,Uy)+p(Vc,EA));let oA=Vc;var x1,vp,yh,Hy,ma,qy,ir,TA,fL;class hL extends de{constructor(e,n,r,s,a,u){super();z(this,TA);z(this,x1);z(this,vp,new Float32Array(4));z(this,yh);z(this,Hy);z(this,ma);z(this,qy);z(this,ir);k(this,ir,e),k(this,ma,n),k(this,x1,r),k(this,qy,s),k(this,yh,a),k(this,Hy,u),this.firstPoint=[NaN,NaN],this.lastPoint=[NaN,NaN],$(this,TA,fL).call(this,u);const[c,h,f,g]=p(this,vp);for(let m=0,y=e.length;m<y;m+=2)e[m]=(e[m]-c)/f,e[m+1]=(e[m+1]-h)/g;for(let m=0,y=n.length;m<y;m+=2)n[m]=(n[m]-c)/f,n[m+1]=(n[m+1]-h)/g}toSVGPath(){const e=[`M${p(this,ir)[4]} ${p(this,ir)[5]}`];for(let n=6,r=p(this,ir).length;n<r;n+=6){if(isNaN(p(this,ir)[n])){e.push(`L${p(this,ir)[n+4]} ${p(this,ir)[n+5]}`);continue}e.push(`C${p(this,ir)[n]} ${p(this,ir)[n+1]} ${p(this,ir)[n+2]} ${p(this,ir)[n+3]} ${p(this,ir)[n+4]} ${p(this,ir)[n+5]}`)}return e.push("Z"),e.join(" ")}serialize([e,n,r,s],a){const u=r-e,c=s-n;let h,f;switch(a){case 0:h=de._rescale(p(this,ir),e,s,u,-c),f=de._rescale(p(this,ma),e,s,u,-c);break;case 90:h=de._rescaleAndSwap(p(this,ir),e,n,u,c),f=de._rescaleAndSwap(p(this,ma),e,n,u,c);break;case 180:h=de._rescale(p(this,ir),r,n,-u,c),f=de._rescale(p(this,ma),r,n,-u,c);break;case 270:h=de._rescaleAndSwap(p(this,ir),r,s,-u,-c),f=de._rescaleAndSwap(p(this,ma),r,s,-u,-c);break}return{outline:Array.from(h),points:[Array.from(f)]}}get box(){return p(this,vp)}newOutliner(e,n,r,s,a,u=0){return new oA(e,n,r,s,a,u)}getNewOutline(e,n){const[r,s,a,u]=p(this,vp),[c,h,f,g]=p(this,x1),m=a*f,y=u*g,w=r*f+c,S=s*g+h,T=this.newOutliner({x:p(this,ma)[0]*m+w,y:p(this,ma)[1]*y+S},p(this,x1),p(this,qy),e,p(this,Hy),n??p(this,yh));for(let C=2;C<p(this,ma).length;C+=2)T.add({x:p(this,ma)[C]*m+w,y:p(this,ma)[C+1]*y+S});return T.getOutlines()}}x1=new WeakMap,vp=new WeakMap,yh=new WeakMap,Hy=new WeakMap,ma=new WeakMap,qy=new WeakMap,ir=new WeakMap,TA=new WeakSet,fL=function(e){const n=p(this,ir);let r=n[4],s=n[5];const a=[r,s,r,s];let u=r,c=s,h=r,f=s;const g=e?Math.max:Math.min,m=new Float32Array(4);for(let w=6,S=n.length;w<S;w+=6){const T=n[w+4],C=n[w+5];isNaN(n[w])?(ge.pointBoundingBox(T,C,a),c>C?(u=T,c=C):c===C&&(u=g(u,T)),f<C?(h=T,f=C):f===C&&(h=g(h,T))):(m[0]=m[1]=1/0,m[2]=m[3]=-1/0,ge.bezierBoundingBox(r,s,...n.slice(w,w+6),m),ge.rectBoundingBox(m[0],m[1],m[2],m[3],a),c>m[1]?(u=m[0],c=m[1]):c===m[1]&&(u=g(u,m[0])),f<m[3]?(h=m[2],f=m[3]):f===m[3]&&(h=g(h,m[2]))),r=T,s=C}const y=p(this,vp);y[0]=a[0]-p(this,yh),y[1]=a[1]-p(this,yh),y[2]=a[2]-a[0]+2*p(this,yh),y[3]=a[3]-a[1]+2*p(this,yh),this.firstPoint=[u,c],this.lastPoint=[h,f]};var zy,Gy,Vy,pd,zl,oo,dL,Y5,pL,gL,oE;class sE{constructor(t,e=0,n=0,r=!0){z(this,oo);z(this,zy);z(this,Gy);z(this,Vy);z(this,pd,[]);z(this,zl,[]);const s=[1/0,1/0,-1/0,-1/0],a=10**-4;for(const{x:S,y:T,width:C,height:D}of t){const R=Math.floor((S-e)/a)*a,I=Math.ceil((S+C+e)/a)*a,F=Math.floor((T-e)/a)*a,q=Math.ceil((T+D+e)/a)*a,U=[R,F,q,!0],V=[I,F,q,!1];p(this,pd).push(U,V),ge.rectBoundingBox(R,F,I,q,s)}const u=s[2]-s[0]+2*n,c=s[3]-s[1]+2*n,h=s[0]-n,f=s[1]-n;let g=r?-1/0:1/0,m=1/0;const y=p(this,pd).at(r?-1:-2),w=[y[0],y[2]];for(const S of p(this,pd)){const[T,C,D,R]=S;!R&&r?C<m?(m=C,g=T):C===m&&(g=Math.max(g,T)):R&&!r&&(C<m?(m=C,g=T):C===m&&(g=Math.min(g,T))),S[0]=(T-h)/u,S[1]=(C-f)/c,S[2]=(D-f)/c}k(this,zy,new Float32Array([h,f,u,c])),k(this,Gy,[g,m]),k(this,Vy,w)}getOutlines(){p(this,pd).sort((e,n)=>e[0]-n[0]||e[1]-n[1]||e[2]-n[2]);const t=[];for(const e of p(this,pd))e[3]?(t.push(...$(this,oo,oE).call(this,e)),$(this,oo,pL).call(this,e)):($(this,oo,gL).call(this,e),t.push(...$(this,oo,oE).call(this,e)));return $(this,oo,dL).call(this,t)}}zy=new WeakMap,Gy=new WeakMap,Vy=new WeakMap,pd=new WeakMap,zl=new WeakMap,oo=new WeakSet,dL=function(t){const e=[],n=new Set;for(const a of t){const[u,c,h]=a;e.push([u,c,a],[u,h,a])}e.sort((a,u)=>a[1]-u[1]||a[0]-u[0]);for(let a=0,u=e.length;a<u;a+=2){const c=e[a][2],h=e[a+1][2];c.push(h),h.push(c),n.add(c),n.add(h)}const r=[];let s;for(;n.size>0;){const a=n.values().next().value;let[u,c,h,f,g]=a;n.delete(a);let m=u,y=c;for(s=[u,h],r.push(s);;){let w;if(n.has(f))w=f;else if(n.has(g))w=g;else break;n.delete(w),[u,c,h,f,g]=w,m!==u&&(s.push(m,y,u,y===c?c:h),m=u),y=y===c?h:c}s.push(m,y)}return new Az(r,p(this,zy),p(this,Gy),p(this,Vy))},Y5=function(t){const e=p(this,zl);let n=0,r=e.length-1;for(;n<=r;){const s=n+r>>1,a=e[s][0];if(a===t)return s;a<t?n=s+1:r=s-1}return r+1},pL=function([,t,e]){const n=$(this,oo,Y5).call(this,t);p(this,zl).splice(n,0,[t,e])},gL=function([,t,e]){const n=$(this,oo,Y5).call(this,t);for(let r=n;r<p(this,zl).length;r++){const[s,a]=p(this,zl)[r];if(s!==t)break;if(s===t&&a===e){p(this,zl).splice(r,1);return}}for(let r=n-1;r>=0;r--){const[s,a]=p(this,zl)[r];if(s!==t)break;if(s===t&&a===e){p(this,zl).splice(r,1);return}}},oE=function(t){const[e,n,r]=t,s=[[e,n,r]],a=$(this,oo,Y5).call(this,r);for(let u=0;u<a;u++){const[c,h]=p(this,zl)[u];for(let f=0,g=s.length;f<g;f++){const[,m,y]=s[f];if(!(h<=m||y<=c)){if(m>=c){if(y>h)s[f][1]=h;else{if(g===1)return[];s.splice(f,1),f--,g--}continue}s[f][2]=c,y>h&&s.push([e,h,y])}}}return s};var Yy,b1;class Az extends de{constructor(e,n,r,s){super();z(this,Yy);z(this,b1);k(this,b1,e),k(this,Yy,n),this.firstPoint=r,this.lastPoint=s}toSVGPath(){const e=[];for(const n of p(this,b1)){let[r,s]=n;e.push(`M${r} ${s}`);for(let a=2;a<n.length;a+=2){const u=n[a],c=n[a+1];u===r?(e.push(`V${c}`),s=c):c===s&&(e.push(`H${u}`),r=u)}e.push("Z")}return e.join(" ")}serialize([e,n,r,s],a){const u=[],c=r-e,h=s-n;for(const f of p(this,b1)){const g=new Array(f.length);for(let m=0;m<f.length;m+=2)g[m]=e+f[m]*c,g[m+1]=s-f[m+1]*h;u.push(g)}return u}get box(){return p(this,Yy)}get classNamesForOutlining(){return["highlightOutline"]}}Yy=new WeakMap,b1=new WeakMap;class aE extends oA{newFreeDrawOutline(t,e,n,r,s,a){return new _z(t,e,n,r,s,a)}}class _z extends hL{newOutliner(t,e,n,r,s,a=0){return new aE(t,e,n,r,s,a)}}var A1,$y,xh,yp,Wy,Uo,Xy,jy,xp,va,ya,gs,_1,w1,Us,S1,el,Jy,Ke,lE,$5,mL,vL,yL,uE,f0,il,Yg,xL,W5,X5,bL,AL,_L,wL,SL;const Pn=class Pn extends bi{constructor(e){super({...e,name:"highlightEditor"});z(this,Ke);z(this,A1,null);z(this,$y,0);z(this,xh);z(this,yp,null);z(this,Wy,null);z(this,Uo,null);z(this,Xy,null);z(this,jy,0);z(this,xp,null);z(this,va,null);z(this,ya,null);z(this,gs,!1);z(this,_1,null);z(this,w1,null);z(this,Us,null);z(this,S1,"");z(this,el);z(this,Jy,"");this.color=e.color||Pn._defaultColor,k(this,el,e.thickness||Pn._defaultThickness),this.opacity=e.opacity||Pn._defaultOpacity,k(this,xh,e.boxes||null),k(this,Jy,e.methodOfCreation||""),k(this,S1,e.text||""),this._isDraggable=!1,this.defaultL10nId="pdfjs-editor-highlight-editor",e.highlightId>-1?(k(this,gs,!0),$(this,Ke,$5).call(this,e),$(this,Ke,f0).call(this)):p(this,xh)&&(k(this,A1,e.anchorNode),k(this,$y,e.anchorOffset),k(this,Xy,e.focusNode),k(this,jy,e.focusOffset),$(this,Ke,lE).call(this),$(this,Ke,f0).call(this),this.rotate(this.rotation)),this.annotationElementId||this._uiManager.a11yAlert("pdfjs-editor-highlight-added-alert")}static get _keyboardManager(){const e=Pn.prototype;return Ve(this,"_keyboardManager",new ax([[["ArrowLeft","mac+ArrowLeft"],e._moveCaret,{args:[0]}],[["ArrowRight","mac+ArrowRight"],e._moveCaret,{args:[1]}],[["ArrowUp","mac+ArrowUp"],e._moveCaret,{args:[2]}],[["ArrowDown","mac+ArrowDown"],e._moveCaret,{args:[3]}]]))}get telemetryInitialData(){return{action:"added",type:p(this,gs)?"free_highlight":"highlight",color:this._uiManager.getNonHCMColorName(this.color),thickness:p(this,el),methodOfCreation:p(this,Jy)}}get telemetryFinalData(){return{type:"highlight",color:this._uiManager.getNonHCMColorName(this.color)}}static computeTelemetryFinalData(e){return{numberOfColors:e.get("color").size}}static initialize(e,n){var r;bi.initialize(e,n),Pn._defaultColor||(Pn._defaultColor=((r=n.highlightColors)==null?void 0:r.values().next().value)||"#fff066")}static updateDefaultParams(e,n){switch(e){case xn.HIGHLIGHT_COLOR:Pn._defaultColor=n;break;case xn.HIGHLIGHT_THICKNESS:Pn._defaultThickness=n;break}}translateInPage(e,n){}get toolbarPosition(){return p(this,w1)}get commentButtonPosition(){return p(this,_1)}updateParams(e,n){switch(e){case xn.HIGHLIGHT_COLOR:$(this,Ke,mL).call(this,n);break;case xn.HIGHLIGHT_THICKNESS:$(this,Ke,vL).call(this,n);break}}static get defaultPropertiesToUpdate(){return[[xn.HIGHLIGHT_COLOR,Pn._defaultColor],[xn.HIGHLIGHT_THICKNESS,Pn._defaultThickness]]}get propertiesToUpdate(){return[[xn.HIGHLIGHT_COLOR,this.color||Pn._defaultColor],[xn.HIGHLIGHT_THICKNESS,p(this,el)||Pn._defaultThickness],[xn.HIGHLIGHT_FREE,p(this,gs)]]}onUpdatedColor(){var e,n;(e=this.parent)==null||e.drawLayer.updateProperties(p(this,ya),{root:{fill:this.color,"fill-opacity":this.opacity}}),(n=p(this,Wy))==null||n.updateColor(this.color),super.onUpdatedColor()}get toolbarButtons(){return this._uiManager.highlightColors?[["colorPicker",k(this,Wy,new iA({editor:this}))]]:super.toolbarButtons}disableEditing(){super.disableEditing(),this.div.classList.toggle("disabled",!0)}enableEditing(){super.enableEditing(),this.div.classList.toggle("disabled",!1)}fixAndSetPosition(){return super.fixAndSetPosition($(this,Ke,X5).call(this))}getBaseTranslation(){return[0,0]}getRect(e,n){return super.getRect(e,n,$(this,Ke,X5).call(this))}onceAdded(e){this.annotationElementId||this.parent.addUndoableEditor(this),e&&this.div.focus()}remove(){$(this,Ke,uE).call(this),this._reportTelemetry({action:"deleted"}),super.remove()}rebuild(){this.parent&&(super.rebuild(),this.div!==null&&($(this,Ke,f0).call(this),this.isAttachedToDOM||this.parent.add(this)))}setParent(e){var r;let n=!1;this.parent&&!e?$(this,Ke,uE).call(this):e&&($(this,Ke,f0).call(this,e),n=!this.parent&&((r=this.div)==null?void 0:r.classList.contains("selectedEditor"))),super.setParent(e),this.show(this._isVisible),n&&this.select()}rotate(e){var s,a,u;const{drawLayer:n}=this.parent;let r;p(this,gs)?(e=(e-this.rotation+360)%360,r=$(s=Pn,il,Yg).call(s,p(this,va).box,e)):r=$(a=Pn,il,Yg).call(a,[this.x,this.y,this.width,this.height],e),n.updateProperties(p(this,ya),{bbox:r,root:{"data-main-rotation":e}}),n.updateProperties(p(this,Us),{bbox:$(u=Pn,il,Yg).call(u,p(this,Uo).box,e),root:{"data-main-rotation":e}})}render(){if(this.div)return this.div;const e=super.render();p(this,S1)&&(e.setAttribute("aria-label",p(this,S1)),e.setAttribute("role","mark")),p(this,gs)?e.classList.add("free"):this.div.addEventListener("keydown",$(this,Ke,xL).bind(this),{signal:this._uiManager._signal});const n=k(this,xp,document.createElement("div"));return e.append(n),n.setAttribute("aria-hidden","true"),n.className="internal",n.style.clipPath=p(this,yp),this.setDims(),zR(this,p(this,xp),["pointerover","pointerleave"]),this.enableEditing(),e}pointerover(){var e;this.isSelected||(e=this.parent)==null||e.drawLayer.updateProperties(p(this,Us),{rootClass:{hovered:!0}})}pointerleave(){var e;this.isSelected||(e=this.parent)==null||e.drawLayer.updateProperties(p(this,Us),{rootClass:{hovered:!1}})}_moveCaret(e){switch(this.parent.unselect(this),e){case 0:case 2:$(this,Ke,W5).call(this,!0);break;case 1:case 3:$(this,Ke,W5).call(this,!1);break}}select(){var e;super.select(),p(this,Us)&&((e=this.parent)==null||e.drawLayer.updateProperties(p(this,Us),{rootClass:{hovered:!1,selected:!0}}))}unselect(){var e;super.unselect(),p(this,Us)&&((e=this.parent)==null||e.drawLayer.updateProperties(p(this,Us),{rootClass:{selected:!1}}),p(this,gs)||$(this,Ke,W5).call(this,!1))}get _mustFixPosition(){return!p(this,gs)}show(e=this._isVisible){super.show(e),this.parent&&(this.parent.drawLayer.updateProperties(p(this,ya),{rootClass:{hidden:!e}}),this.parent.drawLayer.updateProperties(p(this,Us),{rootClass:{hidden:!e}}))}static startHighlighting(e,n,{target:r,x:s,y:a}){const{x:u,y:c,width:h,height:f}=r.getBoundingClientRect(),g=new AbortController,m=e.combinedSignal(g),y=w=>{g.abort(),$(this,il,wL).call(this,e,w)};window.addEventListener("blur",y,{signal:m}),window.addEventListener("pointerup",y,{signal:m}),window.addEventListener("pointerdown",Zi,{capture:!0,passive:!1,signal:m}),window.addEventListener("contextmenu",ll,{signal:m}),r.addEventListener("pointermove",$(this,il,_L).bind(this,e),{signal:m}),this._freeHighlight=new aE({x:s,y:a},[u,c,h,f],e.scale,this._defaultThickness/2,n,.001),{id:this._freeHighlightId,clipPathId:this._freeHighlightClipId}=e.drawLayer.draw({bbox:[0,0,1,1],root:{viewBox:"0 0 1 1",fill:this._defaultColor,"fill-opacity":this._defaultOpacity},rootClass:{highlight:!0,free:!0},path:{d:this._freeHighlight.toSVGPath()}},!0,!0)}static async deserialize(e,n,r){var S,T,C,D;let s=null;if(e instanceof QD){const{data:{quadPoints:R,rect:I,rotation:F,id:q,color:U,opacity:V,popupRef:tt,richText:J,contentsObj:O,creationDate:G,modificationDate:et},parent:{page:{pageNumber:st}}}=e;s=e={annotationType:We.HIGHLIGHT,color:Array.from(U),opacity:V,quadPoints:R,boxes:null,pageIndex:st-1,rect:I.slice(0),rotation:F,annotationElementId:q,id:q,deleted:!1,popupRef:tt,richText:J,comment:(O==null?void 0:O.str)||null,creationDate:G,modificationDate:et}}else if(e instanceof cC){const{data:{inkLists:R,rect:I,rotation:F,id:q,color:U,borderStyle:{rawWidth:V},popupRef:tt,richText:J,contentsObj:O,creationDate:G,modificationDate:et},parent:{page:{pageNumber:st}}}=e;s=e={annotationType:We.HIGHLIGHT,color:Array.from(U),thickness:V,inkLists:R,boxes:null,pageIndex:st-1,rect:I.slice(0),rotation:F,annotationElementId:q,id:q,deleted:!1,popupRef:tt,richText:J,comment:(O==null?void 0:O.str)||null,creationDate:G,modificationDate:et}}const{color:a,quadPoints:u,inkLists:c,opacity:h}=e,f=await super.deserialize(e,n,r);f.color=ge.makeHexColor(...a),f.opacity=h||1,c&&k(f,el,e.thickness),f._initialData=s,e.comment&&f.setCommentData(e);const[g,m]=f.pageDimensions,[y,w]=f.pageTranslation;if(u){const R=k(f,xh,[]);for(let I=0;I<u.length;I+=8)R.push({x:(u[I]-y)/g,y:1-(u[I+1]-w)/m,width:(u[I+2]-u[I])/g,height:(u[I+1]-u[I+5])/m});$(S=f,Ke,lE).call(S),$(T=f,Ke,f0).call(T),f.rotate(f.rotation)}else if(c){k(f,gs,!0);const R=c[0],I={x:R[0]-y,y:m-(R[1]-w)},F=new aE(I,[0,0,g,m],1,p(f,el)/2,!0,.001);for(let V=0,tt=R.length;V<tt;V+=2)I.x=R[V]-y,I.y=m-(R[V+1]-w),F.add(I);const{id:q,clipPathId:U}=n.drawLayer.draw({bbox:[0,0,1,1],root:{viewBox:"0 0 1 1",fill:f.color,"fill-opacity":f._defaultOpacity},rootClass:{highlight:!0,free:!0},path:{d:F.toSVGPath()}},!0,!0);$(C=f,Ke,$5).call(C,{highlightOutlines:F.getOutlines(),highlightId:q,clipPathId:U}),$(D=f,Ke,f0).call(D),f.rotate(f.parentRotation)}return f}serialize(e=!1){if(this.isEmpty()||e)return null;if(this.deleted)return this.serializeDeleted();const n=bi._colorManager.convert(this._uiManager.getNonHCMColor(this.color)),r=super.serialize(e);return Object.assign(r,{color:n,opacity:this.opacity,thickness:p(this,el),quadPoints:$(this,Ke,bL).call(this),outlines:$(this,Ke,AL).call(this,r.rect)}),this.addComment(r),this.annotationElementId&&!$(this,Ke,SL).call(this,r)?null:(r.id=this.annotationElementId,r)}renderAnnotationElement(e){return this.deleted?(e.hide(),null):(e.updateEdited({rect:this.getPDFRect(),popup:this.comment}),null)}static canCreateNewEmptyEditor(){return!1}};A1=new WeakMap,$y=new WeakMap,xh=new WeakMap,yp=new WeakMap,Wy=new WeakMap,Uo=new WeakMap,Xy=new WeakMap,jy=new WeakMap,xp=new WeakMap,va=new WeakMap,ya=new WeakMap,gs=new WeakMap,_1=new WeakMap,w1=new WeakMap,Us=new WeakMap,S1=new WeakMap,el=new WeakMap,Jy=new WeakMap,Ke=new WeakSet,lE=function(){const e=new sE(p(this,xh),.001);k(this,va,e.getOutlines()),[this.x,this.y,this.width,this.height]=p(this,va).box;const n=new sE(p(this,xh),.0025,.001,this._uiManager.direction==="ltr");k(this,Uo,n.getOutlines());const{firstPoint:r}=p(this,va);k(this,_1,[(r[0]-this.x)/this.width,(r[1]-this.y)/this.height]);const{lastPoint:s}=p(this,Uo);k(this,w1,[(s[0]-this.x)/this.width,(s[1]-this.y)/this.height])},$5=function({highlightOutlines:e,highlightId:n,clipPathId:r}){var m,y;if(k(this,va,e),k(this,Uo,e.getNewOutline(p(this,el)/2+1.5,.0025)),n>=0)k(this,ya,n),k(this,yp,r),this.parent.drawLayer.finalizeDraw(n,{bbox:e.box,path:{d:e.toSVGPath()}}),k(this,Us,this.parent.drawLayer.drawOutline({rootClass:{highlightOutline:!0,free:!0},bbox:p(this,Uo).box,path:{d:p(this,Uo).toSVGPath()}},!0));else if(this.parent){const w=this.parent.viewport.rotation;this.parent.drawLayer.updateProperties(p(this,ya),{bbox:$(m=Pn,il,Yg).call(m,p(this,va).box,(w-this.rotation+360)%360),path:{d:e.toSVGPath()}}),this.parent.drawLayer.updateProperties(p(this,Us),{bbox:$(y=Pn,il,Yg).call(y,p(this,Uo).box,w),path:{d:p(this,Uo).toSVGPath()}})}const[a,u,c,h]=e.box;switch(this.rotation){case 0:this.x=a,this.y=u,this.width=c,this.height=h;break;case 90:{const[w,S]=this.parentDimensions;this.x=u,this.y=1-a,this.width=c*S/w,this.height=h*w/S;break}case 180:this.x=1-a,this.y=1-u,this.width=c,this.height=h;break;case 270:{const[w,S]=this.parentDimensions;this.x=1-u,this.y=a,this.width=c*S/w,this.height=h*w/S;break}}const{firstPoint:f}=e;k(this,_1,[(f[0]-a)/c,(f[1]-u)/h]);const{lastPoint:g}=p(this,Uo);k(this,w1,[(g[0]-a)/c,(g[1]-u)/h])},mL=function(e){const n=(a,u)=>{this.color=a,this.opacity=u,this.onUpdatedColor()},r=this.color,s=this.opacity;this.addCommands({cmd:n.bind(this,e,Pn._defaultOpacity),undo:n.bind(this,r,s),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:xn.HIGHLIGHT_COLOR,overwriteIfSameType:!0,keepUndo:!0}),this._reportTelemetry({action:"color_changed",color:this._uiManager.getNonHCMColorName(e)},!0)},vL=function(e){const n=p(this,el),r=s=>{k(this,el,s),$(this,Ke,yL).call(this,s)};this.addCommands({cmd:r.bind(this,e),undo:r.bind(this,n),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:xn.INK_THICKNESS,overwriteIfSameType:!0,keepUndo:!0}),this._reportTelemetry({action:"thickness_changed",thickness:e},!0)},yL=function(e){p(this,gs)&&($(this,Ke,$5).call(this,{highlightOutlines:p(this,va).getNewOutline(e/2)}),this.fixAndSetPosition(),this.setDims())},uE=function(){p(this,ya)===null||!this.parent||(this.parent.drawLayer.remove(p(this,ya)),k(this,ya,null),this.parent.drawLayer.remove(p(this,Us)),k(this,Us,null))},f0=function(e=this.parent){p(this,ya)===null&&({id:Nr(this,ya)._,clipPathId:Nr(this,yp)._}=e.drawLayer.draw({bbox:p(this,va).box,root:{viewBox:"0 0 1 1",fill:this.color,"fill-opacity":this.opacity},rootClass:{highlight:!0,free:p(this,gs)},path:{d:p(this,va).toSVGPath()}},!1,!0),k(this,Us,e.drawLayer.drawOutline({rootClass:{highlightOutline:!0,free:p(this,gs)},bbox:p(this,Uo).box,path:{d:p(this,Uo).toSVGPath()}},p(this,gs))),p(this,xp)&&(p(this,xp).style.clipPath=p(this,yp)))},il=new WeakSet,Yg=function([e,n,r,s],a){switch(a){case 90:return[1-n-s,e,s,r];case 180:return[1-e-r,1-n-s,r,s];case 270:return[n,1-e-r,s,r]}return[e,n,r,s]},xL=function(e){Pn._keyboardManager.exec(this,e)},W5=function(e){if(!p(this,A1))return;const n=window.getSelection();e?n.setPosition(p(this,A1),p(this,$y)):n.setPosition(p(this,Xy),p(this,jy))},X5=function(){return p(this,gs)?this.rotation:0},bL=function(){if(p(this,gs))return null;const[e,n]=this.pageDimensions,[r,s]=this.pageTranslation,a=p(this,xh),u=new Float32Array(a.length*8);let c=0;for(const{x:h,y:f,width:g,height:m}of a){const y=h*e+r,w=(1-f)*n+s;u[c]=u[c+4]=y,u[c+1]=u[c+3]=w,u[c+2]=u[c+6]=y+g*e,u[c+5]=u[c+7]=w-m*n,c+=8}return u},AL=function(e){return p(this,va).serialize(e,$(this,Ke,X5).call(this))},_L=function(e,n){this._freeHighlight.add(n)&&e.drawLayer.updateProperties(this._freeHighlightId,{path:{d:this._freeHighlight.toSVGPath()}})},wL=function(e,n){this._freeHighlight.isEmpty()?e.drawLayer.remove(this._freeHighlightId):e.createAndAddNewEditor(n,!1,{highlightId:this._freeHighlightId,highlightOutlines:this._freeHighlight.getOutlines(),clipPathId:this._freeHighlightClipId,methodOfCreation:"main_toolbar"}),this._freeHighlightId=-1,this._freeHighlight=null,this._freeHighlightClipId=""},SL=function(e){const{color:n}=this._initialData;return this.hasEditedComment||e.color.some((r,s)=>r!==n[s])},z(Pn,il),Kt(Pn,"_defaultColor",null),Kt(Pn,"_defaultOpacity",1),Kt(Pn,"_defaultThickness",12),Kt(Pn,"_type","highlight"),Kt(Pn,"_editorType",We.HIGHLIGHT),Kt(Pn,"_freeHighlightId",-1),Kt(Pn,"_freeHighlight",null),Kt(Pn,"_freeHighlightClipId","");let aA=Pn;var bp;class EL{constructor(){z(this,bp,Object.create(null))}updateProperty(t,e){this[t]=e,this.updateSVGProperty(t,e)}updateProperties(t){if(t)for(const[e,n]of Object.entries(t))e.startsWith("_")||this.updateProperty(e,n)}updateSVGProperty(t,e){p(this,bp)[t]=e}toSVGProperties(){const t=p(this,bp);return k(this,bp,Object.create(null)),{root:t}}reset(){k(this,bp,Object.create(null))}updateAll(t=this){this.updateProperties(t)}clone(){ui("Not implemented")}}bp=new WeakMap;var xa,E1,Xr,Ap,_p,Sn,cE,hE,fE,Zv,CL,j5,t2,$g;const gn=class gn extends bi{constructor(e){super(e);z(this,Sn);z(this,xa,null);z(this,E1);Kt(this,"_colorPicker",null);Kt(this,"_drawId",null);k(this,E1,e.mustBeCommitted||!1),this._addOutlines(e)}onUpdatedColor(){var e;(e=this._colorPicker)==null||e.update(this.color),super.onUpdatedColor()}_addOutlines(e){e.drawOutlines&&($(this,Sn,cE).call(this,e),$(this,Sn,Zv).call(this))}static _mergeSVGProperties(e,n){const r=new Set(Object.keys(e));for(const[s,a]of Object.entries(n))r.has(s)?Object.assign(e[s],a):e[s]=a;return e}static getDefaultDrawingOptions(e){ui("Not implemented")}static get typesMap(){ui("Not implemented")}static get isDrawer(){return!0}static get supportMultipleDrawings(){return!1}static updateDefaultParams(e,n){const r=this.typesMap.get(e);r&&this._defaultDrawingOptions.updateProperty(r,n),this._currentParent&&(p(gn,Xr).updateProperty(r,n),this._currentParent.drawLayer.updateProperties(this._currentDrawId,this._defaultDrawingOptions.toSVGProperties()))}updateParams(e,n){const r=this.constructor.typesMap.get(e);r&&this._updateProperty(e,r,n)}static get defaultPropertiesToUpdate(){const e=[],n=this._defaultDrawingOptions;for(const[r,s]of this.typesMap)e.push([r,n[s]]);return e}get propertiesToUpdate(){const e=[],{_drawingOptions:n}=this;for(const[r,s]of this.constructor.typesMap)e.push([r,n[s]]);return e}_updateProperty(e,n,r){const s=this._drawingOptions,a=s[n],u=c=>{var f;s.updateProperty(n,c);const h=p(this,xa).updateProperty(n,c);h&&$(this,Sn,t2).call(this,h),(f=this.parent)==null||f.drawLayer.updateProperties(this._drawId,s.toSVGProperties()),e===this.colorType&&this.onUpdatedColor()};this.addCommands({cmd:u.bind(this,r),undo:u.bind(this,a),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:e,overwriteIfSameType:!0,keepUndo:!0})}_onResizing(){var e;(e=this.parent)==null||e.drawLayer.updateProperties(this._drawId,gn._mergeSVGProperties(p(this,xa).getPathResizingSVGProperties($(this,Sn,j5).call(this)),{bbox:$(this,Sn,$g).call(this)}))}_onResized(){var e;(e=this.parent)==null||e.drawLayer.updateProperties(this._drawId,gn._mergeSVGProperties(p(this,xa).getPathResizedSVGProperties($(this,Sn,j5).call(this)),{bbox:$(this,Sn,$g).call(this)}))}_onTranslating(e,n){var r;(r=this.parent)==null||r.drawLayer.updateProperties(this._drawId,{bbox:$(this,Sn,$g).call(this)})}_onTranslated(){var e;(e=this.parent)==null||e.drawLayer.updateProperties(this._drawId,gn._mergeSVGProperties(p(this,xa).getPathTranslatedSVGProperties($(this,Sn,j5).call(this),this.parentDimensions),{bbox:$(this,Sn,$g).call(this)}))}_onStartDragging(){var e;(e=this.parent)==null||e.drawLayer.updateProperties(this._drawId,{rootClass:{moving:!0}})}_onStopDragging(){var e;(e=this.parent)==null||e.drawLayer.updateProperties(this._drawId,{rootClass:{moving:!1}})}commit(){super.commit(),this.disableEditMode(),this.disableEditing()}disableEditing(){super.disableEditing(),this.div.classList.toggle("disabled",!0)}enableEditing(){super.enableEditing(),this.div.classList.toggle("disabled",!1)}getBaseTranslation(){return[0,0]}get isResizable(){return!0}onceAdded(e){this.annotationElementId||this.parent.addUndoableEditor(this),this._isDraggable=!0,p(this,E1)&&(k(this,E1,!1),this.commit(),this.parent.setSelected(this),e&&this.isOnScreen&&this.div.focus())}remove(){$(this,Sn,fE).call(this),super.remove()}rebuild(){this.parent&&(super.rebuild(),this.div!==null&&($(this,Sn,Zv).call(this),$(this,Sn,t2).call(this,p(this,xa).box),this.isAttachedToDOM||this.parent.add(this)))}setParent(e){var r;let n=!1;this.parent&&!e?(this._uiManager.removeShouldRescale(this),$(this,Sn,fE).call(this)):e&&(this._uiManager.addShouldRescale(this),$(this,Sn,Zv).call(this,e),n=!this.parent&&((r=this.div)==null?void 0:r.classList.contains("selectedEditor"))),super.setParent(e),n&&this.select()}rotate(){this.parent&&this.parent.drawLayer.updateProperties(this._drawId,gn._mergeSVGProperties({bbox:$(this,Sn,$g).call(this)},p(this,xa).updateRotation((this.parentRotation-this.rotation+360)%360)))}onScaleChanging(){this.parent&&$(this,Sn,t2).call(this,p(this,xa).updateParentDimensions(this.parentDimensions,this.parent.scale))}static onScaleChangingWhenDrawing(){}render(){if(this.div)return this.div;let e,n;this._isCopy&&(e=this.x,n=this.y);const r=super.render();r.classList.add("draw");const s=document.createElement("div");return r.append(s),s.setAttribute("aria-hidden","true"),s.className="internal",this.setDims(),this._uiManager.addShouldRescale(this),this.disableEditing(),this._isCopy&&this._moveAfterPaste(e,n),r}static createDrawerInstance(e,n,r,s,a){ui("Not implemented")}static startDrawing(e,n,r,s){var T;const{target:a,offsetX:u,offsetY:c,pointerId:h,pointerType:f}=s;if(Ps.isInitializedAndDifferentPointerType(f))return;const{viewport:{rotation:g}}=e,{width:m,height:y}=a.getBoundingClientRect(),w=k(gn,Ap,new AbortController),S=e.combinedSignal(w);if(Ps.setPointer(f,h),window.addEventListener("pointerup",C=>{Ps.isSamePointerIdOrRemove(C.pointerId)&&this._endDraw(C)},{signal:S}),window.addEventListener("pointercancel",C=>{Ps.isSamePointerIdOrRemove(C.pointerId)&&this._currentParent.endDrawingSession()},{signal:S}),window.addEventListener("pointerdown",C=>{Ps.isSamePointerType(C.pointerType)&&(Ps.initializeAndAddPointerId(C.pointerId),p(gn,Xr).isCancellable()&&(p(gn,Xr).removeLastElement(),p(gn,Xr).isEmpty()?this._currentParent.endDrawingSession(!0):this._endDraw(null)))},{capture:!0,passive:!1,signal:S}),window.addEventListener("contextmenu",ll,{signal:S}),a.addEventListener("pointermove",this._drawMove.bind(this),{signal:S}),a.addEventListener("touchmove",C=>{Ps.isSameTimeStamp(C.timeStamp)&&Zi(C)},{signal:S}),e.toggleDrawing(),(T=n._editorUndoBar)==null||T.hide(),p(gn,Xr)){e.drawLayer.updateProperties(this._currentDrawId,p(gn,Xr).startNew(u,c,m,y,g));return}n.updateUIForDefaultProperties(this),k(gn,Xr,this.createDrawerInstance(u,c,m,y,g)),k(gn,_p,this.getDefaultDrawingOptions()),this._currentParent=e,{id:this._currentDrawId}=e.drawLayer.draw(this._mergeSVGProperties(p(gn,_p).toSVGProperties(),p(gn,Xr).defaultSVGProperties),!0,!1)}static _drawMove(e){if(Ps.isSameTimeStamp(e.timeStamp),!p(gn,Xr))return;const{offsetX:n,offsetY:r,pointerId:s}=e;if(Ps.isSamePointerId(s)){if(Ps.isUsingMultiplePointers()){this._endDraw(e);return}this._currentParent.drawLayer.updateProperties(this._currentDrawId,p(gn,Xr).add(n,r)),Ps.setTimeStamp(e.timeStamp),Zi(e)}}static _cleanup(e){e&&(this._currentDrawId=-1,this._currentParent=null,k(gn,Xr,null),k(gn,_p,null),Ps.clearPointerType(),Ps.clearTimeStamp()),p(gn,Ap)&&(p(gn,Ap).abort(),k(gn,Ap,null),Ps.clearPointerIds())}static _endDraw(e){const n=this._currentParent;if(n){if(n.toggleDrawing(!0),this._cleanup(!1),(e==null?void 0:e.target)===n.div&&n.drawLayer.updateProperties(this._currentDrawId,p(gn,Xr).end(e.offsetX,e.offsetY)),this.supportMultipleDrawings){const r=p(gn,Xr),s=this._currentDrawId,a=r.getLastElement();n.addCommands({cmd:()=>{n.drawLayer.updateProperties(s,r.setLastElement(a))},undo:()=>{n.drawLayer.updateProperties(s,r.removeLastElement())},mustExec:!1,type:xn.DRAW_STEP});return}this.endDrawing(!1)}}static endDrawing(e){const n=this._currentParent;if(!n)return null;if(n.toggleDrawing(!0),n.cleanUndoStack(xn.DRAW_STEP),!p(gn,Xr).isEmpty()){const{pageDimensions:[r,s],scale:a}=n,u=n.createAndAddNewEditor({offsetX:0,offsetY:0},!1,{drawId:this._currentDrawId,drawOutlines:p(gn,Xr).getOutlines(r*a,s*a,a,this._INNER_MARGIN),drawingOptions:p(gn,_p),mustBeCommitted:!e});return this._cleanup(!0),u}return n.drawLayer.remove(this._currentDrawId),this._cleanup(!0),null}createDrawingOptions(e){}static deserializeDraw(e,n,r,s,a,u){ui("Not implemented")}static async deserialize(e,n,r){var g,m;const{rawDims:{pageWidth:s,pageHeight:a,pageX:u,pageY:c}}=n.viewport,h=this.deserializeDraw(u,c,s,a,this._INNER_MARGIN,e),f=await super.deserialize(e,n,r);return f.createDrawingOptions(e),$(g=f,Sn,cE).call(g,{drawOutlines:h}),$(m=f,Sn,Zv).call(m),f.onScaleChanging(),f.rotate(),f}serializeDraw(e){const[n,r]=this.pageTranslation,[s,a]=this.pageDimensions;return p(this,xa).serialize([n,r,s,a],e)}renderAnnotationElement(e){return e.updateEdited({rect:this.getPDFRect()}),null}static canCreateNewEmptyEditor(){return!1}};xa=new WeakMap,E1=new WeakMap,Xr=new WeakMap,Ap=new WeakMap,_p=new WeakMap,Sn=new WeakSet,cE=function({drawOutlines:e,drawId:n,drawingOptions:r}){k(this,xa,e),this._drawingOptions||(this._drawingOptions=r),this.annotationElementId||this._uiManager.a11yAlert(`pdfjs-editor-${this.editorType}-added-alert`),n>=0?(this._drawId=n,this.parent.drawLayer.finalizeDraw(n,e.defaultProperties)):this._drawId=$(this,Sn,hE).call(this,e,this.parent),$(this,Sn,t2).call(this,e.box)},hE=function(e,n){const{id:r}=n.drawLayer.draw(gn._mergeSVGProperties(this._drawingOptions.toSVGProperties(),e.defaultSVGProperties),!1,!1);return r},fE=function(){this._drawId===null||!this.parent||(this.parent.drawLayer.remove(this._drawId),this._drawId=null,this._drawingOptions.reset())},Zv=function(e=this.parent){if(!(this._drawId!==null&&this.parent===e)){if(this._drawId!==null){this.parent.drawLayer.updateParent(this._drawId,e.drawLayer);return}this._drawingOptions.updateAll(),this._drawId=$(this,Sn,hE).call(this,p(this,xa),e)}},CL=function([e,n,r,s]){const{parentDimensions:[a,u],rotation:c}=this;switch(c){case 90:return[n,1-e,r*(u/a),s*(a/u)];case 180:return[1-e,1-n,r,s];case 270:return[1-n,e,r*(u/a),s*(a/u)];default:return[e,n,r,s]}},j5=function(){const{x:e,y:n,width:r,height:s,parentDimensions:[a,u],rotation:c}=this;switch(c){case 90:return[1-n,e,r*(a/u),s*(u/a)];case 180:return[1-e,1-n,r,s];case 270:return[n,1-e,r*(a/u),s*(u/a)];default:return[e,n,r,s]}},t2=function(e){[this.x,this.y,this.width,this.height]=$(this,Sn,CL).call(this,e),this.div&&(this.fixAndSetPosition(),this.setDims()),this._onResized()},$g=function(){const{x:e,y:n,width:r,height:s,rotation:a,parentRotation:u,parentDimensions:[c,h]}=this;switch((a*4+u)/90){case 1:return[1-n-s,e,s,r];case 2:return[1-e-r,1-n-s,r,s];case 3:return[n,1-e-r,s,r];case 4:return[e,n-r*(c/h),s*(h/c),r*(c/h)];case 5:return[1-n,e,r*(c/h),s*(h/c)];case 6:return[1-e-s*(h/c),1-n,s*(h/c),r*(c/h)];case 7:return[n-r*(c/h),1-e-s*(h/c),r*(c/h),s*(h/c)];case 8:return[e-r,n-s,r,s];case 9:return[1-n,e-r,s,r];case 10:return[1-e,1-n,r,s];case 11:return[n-s,1-e,s,r];case 12:return[e-s*(h/c),n,s*(h/c),r*(c/h)];case 13:return[1-n-r*(c/h),e-s*(h/c),r*(c/h),s*(h/c)];case 14:return[1-e,1-n-r*(c/h),s*(h/c),r*(c/h)];case 15:return[n,1-e,r*(c/h),s*(h/c)];default:return[e,n,r,s]}},Kt(gn,"_currentDrawId",-1),Kt(gn,"_currentParent",null),z(gn,Xr,null),z(gn,Ap,null),z(gn,_p,null),Kt(gn,"_INNER_MARGIN",3);let lA=gn;var Zu,jr,Jr,wp,C1,Zs,ms,nl,Sp,Ep,Cp,T1,J5;class wz{constructor(t,e,n,r,s,a){z(this,T1);z(this,Zu,new Float64Array(6));z(this,jr);z(this,Jr);z(this,wp);z(this,C1);z(this,Zs);z(this,ms,"");z(this,nl,0);z(this,Sp,new ux);z(this,Ep);z(this,Cp);k(this,Ep,n),k(this,Cp,r),k(this,wp,s),k(this,C1,a),[t,e]=$(this,T1,J5).call(this,t,e);const u=k(this,jr,[NaN,NaN,NaN,NaN,t,e]);k(this,Zs,[t,e]),k(this,Jr,[{line:u,points:p(this,Zs)}]),p(this,Zu).set(u,0)}updateProperty(t,e){t==="stroke-width"&&k(this,C1,e)}isEmpty(){return!p(this,Jr)||p(this,Jr).length===0}isCancellable(){return p(this,Zs).length<=10}add(t,e){[t,e]=$(this,T1,J5).call(this,t,e);const[n,r,s,a]=p(this,Zu).subarray(2,6),u=t-s,c=e-a;return Math.hypot(p(this,Ep)*u,p(this,Cp)*c)<=2?null:(p(this,Zs).push(t,e),isNaN(n)?(p(this,Zu).set([s,a,t,e],2),p(this,jr).push(NaN,NaN,NaN,NaN,t,e),{path:{d:this.toSVGPath()}}):(isNaN(p(this,Zu)[0])&&p(this,jr).splice(6,6),p(this,Zu).set([n,r,s,a,t,e],0),p(this,jr).push(...de.createBezierPoints(n,r,s,a,t,e)),{path:{d:this.toSVGPath()}}))}end(t,e){const n=this.add(t,e);return n||(p(this,Zs).length===2?{path:{d:this.toSVGPath()}}:null)}startNew(t,e,n,r,s){k(this,Ep,n),k(this,Cp,r),k(this,wp,s),[t,e]=$(this,T1,J5).call(this,t,e);const a=k(this,jr,[NaN,NaN,NaN,NaN,t,e]);k(this,Zs,[t,e]);const u=p(this,Jr).at(-1);return u&&(u.line=new Float32Array(u.line),u.points=new Float32Array(u.points)),p(this,Jr).push({line:a,points:p(this,Zs)}),p(this,Zu).set(a,0),k(this,nl,0),this.toSVGPath(),null}getLastElement(){return p(this,Jr).at(-1)}setLastElement(t){return p(this,Jr)?(p(this,Jr).push(t),k(this,jr,t.line),k(this,Zs,t.points),k(this,nl,0),{path:{d:this.toSVGPath()}}):p(this,Sp).setLastElement(t)}removeLastElement(){if(!p(this,Jr))return p(this,Sp).removeLastElement();p(this,Jr).pop(),k(this,ms,"");for(let t=0,e=p(this,Jr).length;t<e;t++){const{line:n,points:r}=p(this,Jr)[t];k(this,jr,n),k(this,Zs,r),k(this,nl,0),this.toSVGPath()}return{path:{d:p(this,ms)}}}toSVGPath(){const t=de.svgRound(p(this,jr)[4]),e=de.svgRound(p(this,jr)[5]);if(p(this,Zs).length===2)return k(this,ms,`${p(this,ms)} M ${t} ${e} Z`),p(this,ms);if(p(this,Zs).length<=6){const r=p(this,ms).lastIndexOf("M");k(this,ms,`${p(this,ms).slice(0,r)} M ${t} ${e}`),k(this,nl,6)}if(p(this,Zs).length===4){const r=de.svgRound(p(this,jr)[10]),s=de.svgRound(p(this,jr)[11]);return k(this,ms,`${p(this,ms)} L ${r} ${s}`),k(this,nl,12),p(this,ms)}const n=[];p(this,nl)===0&&(n.push(`M ${t} ${e}`),k(this,nl,6));for(let r=p(this,nl),s=p(this,jr).length;r<s;r+=6){const[a,u,c,h,f,g]=p(this,jr).slice(r,r+6).map(de.svgRound);n.push(`C${a} ${u} ${c} ${h} ${f} ${g}`)}return k(this,ms,p(this,ms)+n.join(" ")),k(this,nl,p(this,jr).length),p(this,ms)}getOutlines(t,e,n,r){const s=p(this,Jr).at(-1);return s.line=new Float32Array(s.line),s.points=new Float32Array(s.points),p(this,Sp).build(p(this,Jr),t,e,n,p(this,wp),p(this,C1),r),k(this,Zu,null),k(this,jr,null),k(this,Jr,null),k(this,ms,null),p(this,Sp)}get defaultSVGProperties(){return{root:{viewBox:"0 0 10000 10000"},rootClass:{draw:!0},bbox:[0,0,1,1]}}}Zu=new WeakMap,jr=new WeakMap,Jr=new WeakMap,wp=new WeakMap,C1=new WeakMap,Zs=new WeakMap,ms=new WeakMap,nl=new WeakMap,Sp=new WeakMap,Ep=new WeakMap,Cp=new WeakMap,T1=new WeakSet,J5=function(t,e){return de._normalizePoint(t,e,p(this,Ep),p(this,Cp),p(this,wp))};var to,Ky,Qy,ba,tc,ec,N1,R1,Tp,ys,zc,TL,NL,RL;class ux extends de{constructor(){super(...arguments);z(this,ys);z(this,to);z(this,Ky,0);z(this,Qy);z(this,ba);z(this,tc);z(this,ec);z(this,N1);z(this,R1);z(this,Tp)}build(e,n,r,s,a,u,c){k(this,tc,n),k(this,ec,r),k(this,N1,s),k(this,R1,a),k(this,Tp,u),k(this,Qy,c??0),k(this,ba,e),$(this,ys,NL).call(this)}get thickness(){return p(this,Tp)}setLastElement(e){return p(this,ba).push(e),{path:{d:this.toSVGPath()}}}removeLastElement(){return p(this,ba).pop(),{path:{d:this.toSVGPath()}}}toSVGPath(){const e=[];for(const{line:n}of p(this,ba)){if(e.push(`M${de.svgRound(n[4])} ${de.svgRound(n[5])}`),n.length===6){e.push("Z");continue}if(n.length===12&&isNaN(n[6])){e.push(`L${de.svgRound(n[10])} ${de.svgRound(n[11])}`);continue}for(let r=6,s=n.length;r<s;r+=6){const[a,u,c,h,f,g]=n.subarray(r,r+6).map(de.svgRound);e.push(`C${a} ${u} ${c} ${h} ${f} ${g}`)}}return e.join("")}serialize([e,n,r,s],a){const u=[],c=[],[h,f,g,m]=$(this,ys,TL).call(this);let y,w,S,T,C,D,R,I,F;switch(p(this,R1)){case 0:F=de._rescale,y=e,w=n+s,S=r,T=-s,C=e+h*r,D=n+(1-f-m)*s,R=e+(h+g)*r,I=n+(1-f)*s;break;case 90:F=de._rescaleAndSwap,y=e,w=n,S=r,T=s,C=e+f*r,D=n+h*s,R=e+(f+m)*r,I=n+(h+g)*s;break;case 180:F=de._rescale,y=e+r,w=n,S=-r,T=s,C=e+(1-h-g)*r,D=n+f*s,R=e+(1-h)*r,I=n+(f+m)*s;break;case 270:F=de._rescaleAndSwap,y=e+r,w=n+s,S=-r,T=-s,C=e+(1-f-m)*r,D=n+(1-h-g)*s,R=e+(1-f)*r,I=n+(1-h)*s;break}for(const{line:q,points:U}of p(this,ba))u.push(F(q,y,w,S,T,a?new Array(q.length):null)),c.push(F(U,y,w,S,T,a?new Array(U.length):null));return{lines:u,points:c,rect:[C,D,R,I]}}static deserialize(e,n,r,s,a,{paths:{lines:u,points:c},rotation:h,thickness:f}){const g=[];let m,y,w,S,T;switch(h){case 0:T=de._rescale,m=-e/r,y=n/s+1,w=1/r,S=-1/s;break;case 90:T=de._rescaleAndSwap,m=-n/s,y=-e/r,w=1/s,S=1/r;break;case 180:T=de._rescale,m=e/r+1,y=-n/s,w=-1/r,S=1/s;break;case 270:T=de._rescaleAndSwap,m=n/s+1,y=e/r+1,w=-1/s,S=-1/r;break}if(!u){u=[];for(const D of c){const R=D.length;if(R===2){u.push(new Float32Array([NaN,NaN,NaN,NaN,D[0],D[1]]));continue}if(R===4){u.push(new Float32Array([NaN,NaN,NaN,NaN,D[0],D[1],NaN,NaN,NaN,NaN,D[2],D[3]]));continue}const I=new Float32Array(3*(R-2));u.push(I);let[F,q,U,V]=D.subarray(0,4);I.set([NaN,NaN,NaN,NaN,F,q],0);for(let tt=4;tt<R;tt+=2){const J=D[tt],O=D[tt+1];I.set(de.createBezierPoints(F,q,U,V,J,O),(tt-2)*3),[F,q,U,V]=[U,V,J,O]}}}for(let D=0,R=u.length;D<R;D++)g.push({line:T(u[D].map(I=>I??NaN),m,y,w,S),points:T(c[D].map(I=>I??NaN),m,y,w,S)});const C=new this.prototype.constructor;return C.build(g,r,s,1,h,f,a),C}get box(){return p(this,to)}updateProperty(e,n){return e==="stroke-width"?$(this,ys,RL).call(this,n):null}updateParentDimensions([e,n],r){const[s,a]=$(this,ys,zc).call(this);k(this,tc,e),k(this,ec,n),k(this,N1,r);const[u,c]=$(this,ys,zc).call(this),h=u-s,f=c-a,g=p(this,to);return g[0]-=h,g[1]-=f,g[2]+=2*h,g[3]+=2*f,g}updateRotation(e){return k(this,Ky,e),{path:{transform:this.rotationTransform}}}get viewBox(){return p(this,to).map(de.svgRound).join(" ")}get defaultProperties(){const[e,n]=p(this,to);return{root:{viewBox:this.viewBox},path:{"transform-origin":`${de.svgRound(e)} ${de.svgRound(n)}`}}}get rotationTransform(){const[,,e,n]=p(this,to);let r=0,s=0,a=0,u=0,c=0,h=0;switch(p(this,Ky)){case 90:s=n/e,a=-e/n,c=e;break;case 180:r=-1,u=-1,c=e,h=n;break;case 270:s=-n/e,a=e/n,h=n;break;default:return""}return`matrix(${r} ${s} ${a} ${u} ${de.svgRound(c)} ${de.svgRound(h)})`}getPathResizingSVGProperties([e,n,r,s]){const[a,u]=$(this,ys,zc).call(this),[c,h,f,g]=p(this,to);if(Math.abs(f-a)<=de.PRECISION||Math.abs(g-u)<=de.PRECISION){const T=e+r/2-(c+f/2),C=n+s/2-(h+g/2);return{path:{"transform-origin":`${de.svgRound(e)} ${de.svgRound(n)}`,transform:`${this.rotationTransform} translate(${T} ${C})`}}}const m=(r-2*a)/(f-2*a),y=(s-2*u)/(g-2*u),w=f/r,S=g/s;return{path:{"transform-origin":`${de.svgRound(c)} ${de.svgRound(h)}`,transform:`${this.rotationTransform} scale(${w} ${S}) translate(${de.svgRound(a)} ${de.svgRound(u)}) scale(${m} ${y}) translate(${de.svgRound(-a)} ${de.svgRound(-u)})`}}}getPathResizedSVGProperties([e,n,r,s]){const[a,u]=$(this,ys,zc).call(this),c=p(this,to),[h,f,g,m]=c;if(c[0]=e,c[1]=n,c[2]=r,c[3]=s,Math.abs(g-a)<=de.PRECISION||Math.abs(m-u)<=de.PRECISION){const C=e+r/2-(h+g/2),D=n+s/2-(f+m/2);for(const{line:R,points:I}of p(this,ba))de._translate(R,C,D,R),de._translate(I,C,D,I);return{root:{viewBox:this.viewBox},path:{"transform-origin":`${de.svgRound(e)} ${de.svgRound(n)}`,transform:this.rotationTransform||null,d:this.toSVGPath()}}}const y=(r-2*a)/(g-2*a),w=(s-2*u)/(m-2*u),S=-y*(h+a)+e+a,T=-w*(f+u)+n+u;if(y!==1||w!==1||S!==0||T!==0)for(const{line:C,points:D}of p(this,ba))de._rescale(C,S,T,y,w,C),de._rescale(D,S,T,y,w,D);return{root:{viewBox:this.viewBox},path:{"transform-origin":`${de.svgRound(e)} ${de.svgRound(n)}`,transform:this.rotationTransform||null,d:this.toSVGPath()}}}getPathTranslatedSVGProperties([e,n],r){const[s,a]=r,u=p(this,to),c=e-u[0],h=n-u[1];if(p(this,tc)===s&&p(this,ec)===a)for(const{line:f,points:g}of p(this,ba))de._translate(f,c,h,f),de._translate(g,c,h,g);else{const f=p(this,tc)/s,g=p(this,ec)/a;k(this,tc,s),k(this,ec,a);for(const{line:m,points:y}of p(this,ba))de._rescale(m,c,h,f,g,m),de._rescale(y,c,h,f,g,y);u[2]*=f,u[3]*=g}return u[0]=e,u[1]=n,{root:{viewBox:this.viewBox},path:{d:this.toSVGPath(),"transform-origin":`${de.svgRound(e)} ${de.svgRound(n)}`}}}get defaultSVGProperties(){const e=p(this,to);return{root:{viewBox:this.viewBox},rootClass:{draw:!0},path:{d:this.toSVGPath(),"transform-origin":`${de.svgRound(e[0])} ${de.svgRound(e[1])}`,transform:this.rotationTransform||null},bbox:e}}}to=new WeakMap,Ky=new WeakMap,Qy=new WeakMap,ba=new WeakMap,tc=new WeakMap,ec=new WeakMap,N1=new WeakMap,R1=new WeakMap,Tp=new WeakMap,ys=new WeakSet,zc=function(e=p(this,Tp)){const n=p(this,Qy)+e/2*p(this,N1);return p(this,R1)%180===0?[n/p(this,tc),n/p(this,ec)]:[n/p(this,ec),n/p(this,tc)]},TL=function(){const[e,n,r,s]=p(this,to),[a,u]=$(this,ys,zc).call(this,0);return[e+a,n+u,r-2*a,s-2*u]},NL=function(){const e=k(this,to,new Float32Array([1/0,1/0,-1/0,-1/0]));for(const{line:s}of p(this,ba)){if(s.length<=12){for(let c=4,h=s.length;c<h;c+=6)ge.pointBoundingBox(s[c],s[c+1],e);continue}let a=s[4],u=s[5];for(let c=6,h=s.length;c<h;c+=6){const[f,g,m,y,w,S]=s.subarray(c,c+6);ge.bezierBoundingBox(a,u,f,g,m,y,w,S,e),a=w,u=S}}const[n,r]=$(this,ys,zc).call(this);e[0]=ro(e[0]-n,0,1),e[1]=ro(e[1]-r,0,1),e[2]=ro(e[2]+n,0,1),e[3]=ro(e[3]+r,0,1),e[2]-=e[0],e[3]-=e[1]},RL=function(e){const[n,r]=$(this,ys,zc).call(this);k(this,Tp,e);const[s,a]=$(this,ys,zc).call(this),[u,c]=[s-n,a-r],h=p(this,to);return h[0]-=u,h[1]-=c,h[2]+=2*u,h[3]+=2*c,h};class VA extends EL{constructor(t){super(),this._viewParameters=t,super.updateProperties({fill:"none",stroke:bi._defaultLineColor,"stroke-opacity":1,"stroke-width":1,"stroke-linecap":"round","stroke-linejoin":"round","stroke-miterlimit":10})}updateSVGProperty(t,e){t==="stroke-width"&&(e??(e=this["stroke-width"]),e*=this._viewParameters.realScale),super.updateSVGProperty(t,e)}clone(){const t=new VA(this._viewParameters);return t.updateAll(this),t}}var NA,DL;const im=class im extends lA{constructor(e){super({...e,name:"inkEditor"});z(this,NA);this._willKeepAspectRatio=!0,this.defaultL10nId="pdfjs-editor-ink-editor"}static initialize(e,n){bi.initialize(e,n),this._defaultDrawingOptions=new VA(n.viewParameters)}static getDefaultDrawingOptions(e){const n=this._defaultDrawingOptions.clone();return n.updateProperties(e),n}static get supportMultipleDrawings(){return!0}static get typesMap(){return Ve(this,"typesMap",new Map([[xn.INK_THICKNESS,"stroke-width"],[xn.INK_COLOR,"stroke"],[xn.INK_OPACITY,"stroke-opacity"]]))}static createDrawerInstance(e,n,r,s,a){return new wz(e,n,r,s,a,this._defaultDrawingOptions["stroke-width"])}static deserializeDraw(e,n,r,s,a,u){return ux.deserialize(e,n,r,s,a,u)}static async deserialize(e,n,r){let s=null;if(e instanceof cC){const{data:{inkLists:u,rect:c,rotation:h,id:f,color:g,opacity:m,borderStyle:{rawWidth:y},popupRef:w,richText:S,contentsObj:T,creationDate:C,modificationDate:D},parent:{page:{pageNumber:R}}}=e;s=e={annotationType:We.INK,color:Array.from(g),thickness:y,opacity:m,paths:{points:u},boxes:null,pageIndex:R-1,rect:c.slice(0),rotation:h,annotationElementId:f,id:f,deleted:!1,popupRef:w,richText:S,comment:(T==null?void 0:T.str)||null,creationDate:C,modificationDate:D}}const a=await super.deserialize(e,n,r);return a._initialData=s,e.comment&&a.setCommentData(e),a}get toolbarButtons(){return this._colorPicker||(this._colorPicker=new rA(this)),[["colorPicker",this._colorPicker]]}get colorType(){return xn.INK_COLOR}get color(){return this._drawingOptions.stroke}get opacity(){return this._drawingOptions["stroke-opacity"]}onScaleChanging(){if(!this.parent)return;super.onScaleChanging();const{_drawId:e,_drawingOptions:n,parent:r}=this;n.updateSVGProperty("stroke-width"),r.drawLayer.updateProperties(e,n.toSVGProperties())}static onScaleChangingWhenDrawing(){const e=this._currentParent;e&&(super.onScaleChangingWhenDrawing(),this._defaultDrawingOptions.updateSVGProperty("stroke-width"),e.drawLayer.updateProperties(this._currentDrawId,this._defaultDrawingOptions.toSVGProperties()))}createDrawingOptions({color:e,thickness:n,opacity:r}){this._drawingOptions=im.getDefaultDrawingOptions({stroke:ge.makeHexColor(...e),"stroke-width":n,"stroke-opacity":r})}serialize(e=!1){if(this.isEmpty())return null;if(this.deleted)return this.serializeDeleted();const{lines:n,points:r}=this.serializeDraw(e),{_drawingOptions:{stroke:s,"stroke-opacity":a,"stroke-width":u}}=this,c=Object.assign(super.serialize(e),{color:bi._colorManager.convert(s),opacity:a,thickness:u,paths:{lines:n,points:r}});return this.addComment(c),e?(c.isCopy=!0,c):this.annotationElementId&&!$(this,NA,DL).call(this,c)?null:(c.id=this.annotationElementId,c)}renderAnnotationElement(e){if(this.deleted)return e.hide(),null;const{points:n,rect:r}=this.serializeDraw(!1);return e.updateEdited({rect:r,thickness:this._drawingOptions["stroke-width"],points:n,popup:this.comment}),null}};NA=new WeakSet,DL=function(e){const{color:n,thickness:r,opacity:s,pageIndex:a}=this._initialData;return this.hasEditedComment||this._hasBeenMoved||this._hasBeenResized||e.color.some((u,c)=>u!==n[c])||e.thickness!==r||e.opacity!==s||e.pageIndex!==a},Kt(im,"_type","ink"),Kt(im,"_editorType",We.INK),Kt(im,"_defaultDrawingOptions",null);let dE=im;class pE extends ux{toSVGPath(){let t=super.toSVGPath();return t.endsWith("Z")||(t+="Z"),t}}const d5=8,Mv=3;var Np,Fn,gE,Gl,LL,ML,mE,K5,IL,PL,kL,vE,yE,FL;class Eh{static extractContoursFromText(t,{fontFamily:e,fontStyle:n,fontWeight:r},s,a,u,c){let h=new OffscreenCanvas(1,1),f=h.getContext("2d",{alpha:!1});const g=200,m=f.font=`${n} ${r} ${g}px ${e}`,{actualBoundingBoxLeft:y,actualBoundingBoxRight:w,actualBoundingBoxAscent:S,actualBoundingBoxDescent:T,fontBoundingBoxAscent:C,fontBoundingBoxDescent:D,width:R}=f.measureText(t),I=1.5,F=Math.ceil(Math.max(Math.abs(y)+Math.abs(w)||0,R)*I),q=Math.ceil(Math.max(Math.abs(S)+Math.abs(T)||g,Math.abs(C)+Math.abs(D)||g)*I);h=new OffscreenCanvas(F,q),f=h.getContext("2d",{alpha:!0,willReadFrequently:!0}),f.font=m,f.filter="grayscale(1)",f.fillStyle="white",f.fillRect(0,0,F,q),f.fillStyle="black",f.fillText(t,F*(I-1)/2,q*(3-I)/2);const U=$(this,Fn,vE).call(this,f.getImageData(0,0,F,q).data),V=$(this,Fn,kL).call(this,U),tt=$(this,Fn,yE).call(this,V),J=$(this,Fn,mE).call(this,U,F,q,tt);return this.processDrawnLines({lines:{curves:J,width:F,height:q},pageWidth:s,pageHeight:a,rotation:u,innerMargin:c,mustSmooth:!0,areContours:!0})}static process(t,e,n,r,s){const[a,u,c]=$(this,Fn,FL).call(this,t),[h,f]=$(this,Fn,PL).call(this,a,u,c,Math.hypot(u,c)*p(this,Np).sigmaSFactor,p(this,Np).sigmaR,p(this,Np).kernelSize),g=$(this,Fn,yE).call(this,f),m=$(this,Fn,mE).call(this,h,u,c,g);return this.processDrawnLines({lines:{curves:m,width:u,height:c},pageWidth:e,pageHeight:n,rotation:r,innerMargin:s,mustSmooth:!0,areContours:!0})}static processDrawnLines({lines:t,pageWidth:e,pageHeight:n,rotation:r,innerMargin:s,mustSmooth:a,areContours:u}){r%180!==0&&([e,n]=[n,e]);const{curves:c,width:h,height:f}=t,g=t.thickness??0,m=[],y=Math.min(e/h,n/f),w=y/e,S=y/n,T=[];for(const{points:D}of c){const R=a?$(this,Fn,IL).call(this,D):D;if(!R)continue;T.push(R);const I=R.length,F=new Float32Array(I),q=new Float32Array(3*(I===2?2:I-2));if(m.push({line:q,points:F}),I===2){F[0]=R[0]*w,F[1]=R[1]*S,q.set([NaN,NaN,NaN,NaN,F[0],F[1]],0);continue}let[U,V,tt,J]=R;U*=w,V*=S,tt*=w,J*=S,F.set([U,V,tt,J],0),q.set([NaN,NaN,NaN,NaN,U,V],0);for(let O=4;O<I;O+=2){const G=F[O]=R[O]*w,et=F[O+1]=R[O+1]*S;q.set(de.createBezierPoints(U,V,tt,J,G,et),(O-2)*3),[U,V,tt,J]=[tt,J,G,et]}}if(m.length===0)return null;const C=u?new pE:new ux;return C.build(m,e,n,1,r,u?0:g,s),{outline:C,newCurves:T,areContours:u,thickness:g,width:h,height:f}}static async compressSignature({outlines:t,areContours:e,thickness:n,width:r,height:s}){let a=1/0,u=-1/0,c=0;for(const R of t){c+=R.length;for(let I=2,F=R.length;I<F;I++){const q=R[I]-R[I-2];a=Math.min(a,q),u=Math.max(u,q)}}let h;a>=-128&&u<=127?h=Int8Array:a>=-32768&&u<=32767?h=Int16Array:h=Int32Array;const f=t.length,g=d5+Mv*f,m=new Uint32Array(g);let y=0;m[y++]=g*Uint32Array.BYTES_PER_ELEMENT+(c-2*f)*h.BYTES_PER_ELEMENT,m[y++]=0,m[y++]=r,m[y++]=s,m[y++]=e?0:1,m[y++]=Math.max(0,Math.floor(n??0)),m[y++]=f,m[y++]=h.BYTES_PER_ELEMENT;for(const R of t)m[y++]=R.length-2,m[y++]=R[0],m[y++]=R[1];const w=new CompressionStream("deflate-raw"),S=w.writable.getWriter();await S.ready,S.write(m);const T=h.prototype.constructor;for(const R of t){const I=new T(R.length-2);for(let F=2,q=R.length;F<q;F++)I[F-2]=R[F]-R[F-2];S.write(I)}S.close();const C=await new Response(w.readable).arrayBuffer(),D=new Uint8Array(C);return IR(D)}static async decompressSignature(t){try{const e=HH(t),{readable:n,writable:r}=new DecompressionStream("deflate-raw"),s=r.getWriter();await s.ready,s.write(e).then(async()=>{await s.ready,await s.close()}).catch(()=>{});let a=null,u=0;for await(const R of n)a||(a=new Uint8Array(new Uint32Array(R.buffer,0,4)[0])),a.set(R,u),u+=R.length;const c=new Uint32Array(a.buffer,0,a.length>>2),h=c[1];if(h!==0)throw new Error(`Invalid version: ${h}`);const f=c[2],g=c[3],m=c[4]===0,y=c[5],w=c[6],S=c[7],T=[],C=(d5+Mv*w)*Uint32Array.BYTES_PER_ELEMENT;let D;switch(S){case Int8Array.BYTES_PER_ELEMENT:D=new Int8Array(a.buffer,C);break;case Int16Array.BYTES_PER_ELEMENT:D=new Int16Array(a.buffer,C);break;case Int32Array.BYTES_PER_ELEMENT:D=new Int32Array(a.buffer,C);break}u=0;for(let R=0;R<w;R++){const I=c[Mv*R+d5],F=new Float32Array(I+2);T.push(F);for(let q=0;q<Mv-1;q++)F[q]=c[Mv*R+d5+q+1];for(let q=0;q<I;q++)F[q+2]=F[q]+D[u++]}return{areContours:m,thickness:y,outlines:T,width:f,height:g}}catch(e){return Ge(`decompressSignature: ${e}`),null}}}Np=new WeakMap,Fn=new WeakSet,gE=function(t,e,n,r){return n-=t,r-=e,n===0?r>0?0:4:n===1?r+6:2-r},Gl=new WeakMap,LL=function(t,e,n,r,s,a,u){const c=$(this,Fn,gE).call(this,n,r,s,a);for(let h=0;h<8;h++){const f=(-h+c-u+16)%8,g=p(this,Gl)[2*f],m=p(this,Gl)[2*f+1];if(t[(n+g)*e+(r+m)]!==0)return f}return-1},ML=function(t,e,n,r,s,a,u){const c=$(this,Fn,gE).call(this,n,r,s,a);for(let h=0;h<8;h++){const f=(h+c+u+16)%8,g=p(this,Gl)[2*f],m=p(this,Gl)[2*f+1];if(t[(n+g)*e+(r+m)]!==0)return f}return-1},mE=function(t,e,n,r){const s=t.length,a=new Int32Array(s);for(let f=0;f<s;f++)a[f]=t[f]<=r?1:0;for(let f=1;f<n-1;f++)a[f*e]=a[f*e+e-1]=0;for(let f=0;f<e;f++)a[f]=a[e*n-1-f]=0;let u=1,c;const h=[];for(let f=1;f<n-1;f++){c=1;for(let g=1;g<e-1;g++){const m=f*e+g,y=a[m];if(y===0)continue;let w=f,S=g;if(y===1&&a[m-1]===0)u+=1,S-=1;else if(y>=1&&a[m+1]===0)u+=1,S+=1,y>1&&(c=y);else{y!==1&&(c=Math.abs(y));continue}const T=[g,f],C=S===g+1,D={isHole:C,points:T,id:u,parent:0};h.push(D);let R;for(const O of h)if(O.id===c){R=O;break}R?R.isHole?D.parent=C?R.parent:c:D.parent=C?c:R.parent:D.parent=C?c:0;const I=$(this,Fn,LL).call(this,a,e,f,g,w,S,0);if(I===-1){a[m]=-u,a[m]!==1&&(c=Math.abs(a[m]));continue}let F=p(this,Gl)[2*I],q=p(this,Gl)[2*I+1];const U=f+F,V=g+q;w=U,S=V;let tt=f,J=g;for(;;){const O=$(this,Fn,ML).call(this,a,e,tt,J,w,S,1);F=p(this,Gl)[2*O],q=p(this,Gl)[2*O+1];const G=tt+F,et=J+q;T.push(et,G);const st=tt*e+J;if(a[st+1]===0?a[st]=-u:a[st]===1&&(a[st]=u),G===f&&et===g&&tt===U&&J===V){a[m]!==1&&(c=Math.abs(a[m]));break}else w=tt,S=J,tt=G,J=et}}}return h},K5=function(t,e,n,r){if(n-e<=4){for(let U=e;U<n-2;U+=2)r.push(t[U],t[U+1]);return}const s=t[e],a=t[e+1],u=t[n-4]-s,c=t[n-3]-a,h=Math.hypot(u,c),f=u/h,g=c/h,m=f*a-g*s,y=c/u,w=1/h,S=Math.atan(y),T=Math.cos(S),C=Math.sin(S),D=w*(Math.abs(T)+Math.abs(C)),R=w*(1-D+D**2),I=Math.max(Math.atan(Math.abs(C+T)*R),Math.atan(Math.abs(C-T)*R));let F=0,q=e;for(let U=e+2;U<n-2;U+=2){const V=Math.abs(m-f*t[U+1]+g*t[U]);V>F&&(q=U,F=V)}F>(h*I)**2?($(this,Fn,K5).call(this,t,e,q+2,r),$(this,Fn,K5).call(this,t,q,n,r)):r.push(s,a)},IL=function(t){const e=[],n=t.length;return $(this,Fn,K5).call(this,t,0,n,e),e.push(t[n-2],t[n-1]),e.length<=4?null:e},PL=function(t,e,n,r,s,a){const u=new Float32Array(a**2),c=-2*r**2,h=a>>1;for(let S=0;S<a;S++){const T=(S-h)**2;for(let C=0;C<a;C++)u[S*a+C]=Math.exp((T+(C-h)**2)/c)}const f=new Float32Array(256),g=-2*s**2;for(let S=0;S<256;S++)f[S]=Math.exp(S**2/g);const m=t.length,y=new Uint8Array(m),w=new Uint32Array(256);for(let S=0;S<n;S++)for(let T=0;T<e;T++){const C=S*e+T,D=t[C];let R=0,I=0;for(let q=0;q<a;q++){const U=S+q-h;if(!(U<0||U>=n))for(let V=0;V<a;V++){const tt=T+V-h;if(tt<0||tt>=e)continue;const J=t[U*e+tt],O=u[q*a+V]*f[Math.abs(J-D)];R+=J*O,I+=O}}const F=y[C]=Math.round(R/I);w[F]++}return[y,w]},kL=function(t){const e=new Uint32Array(256);for(const n of t)e[n]++;return e},vE=function(t){const e=t.length,n=new Uint8ClampedArray(e>>2);let r=-1/0,s=1/0;for(let u=0,c=n.length;u<c;u++){const h=n[u]=t[u<<2];r=Math.max(r,h),s=Math.min(s,h)}const a=255/(r-s);for(let u=0,c=n.length;u<c;u++)n[u]=(n[u]-s)*a;return n},yE=function(t){let e,n=-1/0,r=-1/0;const s=t.findIndex(c=>c!==0);let a=s,u=s;for(e=s;e<256;e++){const c=t[e];c>n&&(e-a>r&&(r=e-a,u=e-1),n=c,a=e)}for(e=u-1;e>=0&&!(t[e]>t[e+1]);e--);return e},FL=function(t){const e=t,{width:n,height:r}=t,{maxDim:s}=p(this,Np);let a=n,u=r;if(n>s||r>s){let m=n,y=r,w=Math.log2(Math.max(n,r)/s);const S=Math.floor(w);w=w===S?S-1:S;for(let C=0;C<w;C++){a=Math.ceil(m/2),u=Math.ceil(y/2);const D=new OffscreenCanvas(a,u);D.getContext("2d").drawImage(t,0,0,m,y,0,0,a,u),m=a,y=u,t!==e&&t.close(),t=D.transferToImageBitmap()}const T=Math.min(s/a,s/u);a=Math.round(a*T),u=Math.round(u*T)}const h=new OffscreenCanvas(a,u).getContext("2d",{willReadFrequently:!0});h.fillStyle="white",h.fillRect(0,0,a,u),h.filter="grayscale(1)",h.drawImage(t,0,0,t.width,t.height,0,0,a,u);const f=h.getImageData(0,0,a,u).data;return[$(this,Fn,vE).call(this,f),a,u]},z(Eh,Fn),z(Eh,Np,{maxDim:512,sigmaSFactor:.02,sigmaR:25,kernelSize:16}),z(Eh,Gl,new Int32Array([0,1,-1,1,-1,0,-1,-1,0,-1,1,-1,1,0,1,1]));class hC extends EL{constructor(){super(),super.updateProperties({fill:bi._defaultLineColor,"stroke-width":0})}clone(){const t=new hC;return t.updateAll(this),t}}class fC extends VA{constructor(t){super(t),super.updateProperties({stroke:bi._defaultLineColor,"stroke-width":1})}clone(){const t=new fC(this._viewParameters);return t.updateAll(this),t}}var gd,nc,md,Rp;const ia=class ia extends lA{constructor(e){super({...e,mustBeCommitted:!0,name:"signatureEditor"});z(this,gd,!1);z(this,nc,null);z(this,md,null);z(this,Rp,null);this._willKeepAspectRatio=!0,k(this,md,e.signatureData||null),k(this,nc,null),this.defaultL10nId="pdfjs-editor-signature-editor1"}static initialize(e,n){bi.initialize(e,n),this._defaultDrawingOptions=new hC,this._defaultDrawnSignatureOptions=new fC(n.viewParameters)}static getDefaultDrawingOptions(e){const n=this._defaultDrawingOptions.clone();return n.updateProperties(e),n}static get supportMultipleDrawings(){return!1}static get typesMap(){return Ve(this,"typesMap",new Map)}static get isDrawer(){return!1}get telemetryFinalData(){return{type:"signature",hasDescription:!!p(this,nc)}}static computeTelemetryFinalData(e){const n=e.get("hasDescription");return{hasAltText:n.get(!0)??0,hasNoAltText:n.get(!1)??0}}get isResizable(){return!0}onScaleChanging(){this._drawId!==null&&super.onScaleChanging()}render(){if(this.div)return this.div;let e,n;const{_isCopy:r}=this;if(r&&(this._isCopy=!1,e=this.x,n=this.y),super.render(),this._drawId===null)if(p(this,md)){const{lines:s,mustSmooth:a,areContours:u,description:c,uuid:h,heightInPage:f}=p(this,md),{rawDims:{pageWidth:g,pageHeight:m},rotation:y}=this.parent.viewport,w=Eh.processDrawnLines({lines:s,pageWidth:g,pageHeight:m,rotation:y,innerMargin:ia._INNER_MARGIN,mustSmooth:a,areContours:u});this.addSignature(w,f,c,h)}else this.div.setAttribute("data-l10n-args",JSON.stringify({description:""})),this.div.hidden=!0,this._uiManager.getSignature(this);else this.div.setAttribute("data-l10n-args",JSON.stringify({description:p(this,nc)||""}));return r&&(this._isCopy=!0,this._moveAfterPaste(e,n)),this.div}setUuid(e){k(this,Rp,e),this.addEditToolbar()}getUuid(){return p(this,Rp)}get description(){return p(this,nc)}set description(e){k(this,nc,e),this.div&&(this.div.setAttribute("data-l10n-args",JSON.stringify({description:e})),super.addEditToolbar().then(n=>{n==null||n.updateEditSignatureButton(e)}))}getSignaturePreview(){const{newCurves:e,areContours:n,thickness:r,width:s,height:a}=p(this,md),u=Math.max(s,a),c=Eh.processDrawnLines({lines:{curves:e.map(h=>({points:h})),thickness:r,width:s,height:a},pageWidth:u,pageHeight:u,rotation:0,innerMargin:0,mustSmooth:!1,areContours:n});return{areContours:n,outline:c.outline}}get toolbarButtons(){return this._uiManager.signatureManager?[["editSignature",this._uiManager.signatureManager]]:super.toolbarButtons}addSignature(e,n,r,s){const{x:a,y:u}=this,{outline:c}=k(this,md,e);k(this,gd,c instanceof pE),this.description=r;let h;p(this,gd)?h=ia.getDefaultDrawingOptions():(h=ia._defaultDrawnSignatureOptions.clone(),h.updateProperties({"stroke-width":c.thickness})),this._addOutlines({drawOutlines:c,drawingOptions:h});const[,f]=this.pageDimensions;let g=n/f;g=g>=1?.5:g,this.width*=g/this.height,this.width>=1&&(g*=.9/this.width,this.width=.9),this.height=g,this.setDims(),this.x=a,this.y=u,this.center(),this._onResized(),this.onScaleChanging(),this.rotate(),this._uiManager.addToAnnotationStorage(this),this.setUuid(s),this._reportTelemetry({action:"pdfjs.signature.inserted",data:{hasBeenSaved:!!s,hasDescription:!!r}}),this.div.hidden=!1}getFromImage(e){const{rawDims:{pageWidth:n,pageHeight:r},rotation:s}=this.parent.viewport;return Eh.process(e,n,r,s,ia._INNER_MARGIN)}getFromText(e,n){const{rawDims:{pageWidth:r,pageHeight:s},rotation:a}=this.parent.viewport;return Eh.extractContoursFromText(e,n,r,s,a,ia._INNER_MARGIN)}getDrawnSignature(e){const{rawDims:{pageWidth:n,pageHeight:r},rotation:s}=this.parent.viewport;return Eh.processDrawnLines({lines:e,pageWidth:n,pageHeight:r,rotation:s,innerMargin:ia._INNER_MARGIN,mustSmooth:!1,areContours:!1})}createDrawingOptions({areContours:e,thickness:n}){e?this._drawingOptions=ia.getDefaultDrawingOptions():(this._drawingOptions=ia._defaultDrawnSignatureOptions.clone(),this._drawingOptions.updateProperties({"stroke-width":n}))}serialize(e=!1){if(this.isEmpty())return null;const{lines:n,points:r}=this.serializeDraw(e),{_drawingOptions:{"stroke-width":s}}=this,a=Object.assign(super.serialize(e),{isSignature:!0,areContours:p(this,gd),color:[0,0,0],thickness:p(this,gd)?0:s});return this.addComment(a),e?(a.paths={lines:n,points:r},a.uuid=p(this,Rp),a.isCopy=!0):a.lines=n,p(this,nc)&&(a.accessibilityData={type:"Figure",alt:p(this,nc)}),a}static deserializeDraw(e,n,r,s,a,u){return u.areContours?pE.deserialize(e,n,r,s,a,u):ux.deserialize(e,n,r,s,a,u)}static async deserialize(e,n,r){var a;const s=await super.deserialize(e,n,r);return k(s,gd,e.areContours),s.description=((a=e.accessibilityData)==null?void 0:a.alt)||"",k(s,Rp,e.uuid),s}};gd=new WeakMap,nc=new WeakMap,md=new WeakMap,Rp=new WeakMap,Kt(ia,"_type","signature"),Kt(ia,"_editorType",We.SIGNATURE),Kt(ia,"_defaultDrawingOptions",null);let xE=ia;var ki,Kr,vd,bh,yd,D1,Ah,Dp,ic,Aa,L1,En,e2,n2,Q5,Z5,tb,AE,eb,BL;class bE extends bi{constructor(e){super({...e,name:"stampEditor"});z(this,En);z(this,ki,null);z(this,Kr,null);z(this,vd,null);z(this,bh,null);z(this,yd,null);z(this,D1,"");z(this,Ah,null);z(this,Dp,!1);z(this,ic,null);z(this,Aa,!1);z(this,L1,!1);k(this,bh,e.bitmapUrl),k(this,yd,e.bitmapFile),this.defaultL10nId="pdfjs-editor-stamp-editor"}static initialize(e,n){bi.initialize(e,n)}static isHandlingMimeForPasting(e){return sS.includes(e)}static paste(e,n){n.pasteEditor({mode:We.STAMP},{bitmapFile:e.getAsFile()})}altTextFinish(){this._uiManager.useNewAltTextFlow&&(this.div.hidden=!1),super.altTextFinish()}get telemetryFinalData(){var e;return{type:"stamp",hasAltText:!!((e=this.altTextData)!=null&&e.altText)}}static computeTelemetryFinalData(e){const n=e.get("hasAltText");return{hasAltText:n.get(!0)??0,hasNoAltText:n.get(!1)??0}}async mlGuessAltText(e=null,n=!0){if(this.hasAltTextData())return null;const{mlManager:r}=this._uiManager;if(!r)throw new Error("No ML.");if(!await r.isEnabledFor("altText"))throw new Error("ML isn't enabled for alt text.");const{data:s,width:a,height:u}=e||this.copyCanvas(null,null,!0).imageData,c=await r.guess({name:"altText",request:{data:s,width:a,height:u,channels:s.length/(a*u)}});if(!c)throw new Error("No response from the AI service.");if(c.error)throw new Error("Error from the AI service.");if(c.cancel)return null;if(!c.output)throw new Error("No valid response from the AI service.");const h=c.output;return await this.setGuessedAltText(h),n&&!this.hasAltTextData()&&(this.altTextData={alt:h,decorative:!1}),h}remove(){var e;p(this,Kr)&&(k(this,ki,null),this._uiManager.imageManager.deleteId(p(this,Kr)),(e=p(this,Ah))==null||e.remove(),k(this,Ah,null),p(this,ic)&&(clearTimeout(p(this,ic)),k(this,ic,null))),super.remove()}rebuild(){if(!this.parent){p(this,Kr)&&$(this,En,Q5).call(this);return}super.rebuild(),this.div!==null&&(p(this,Kr)&&p(this,Ah)===null&&$(this,En,Q5).call(this),this.isAttachedToDOM||this.parent.add(this))}onceAdded(e){this._isDraggable=!0,e&&this.div.focus()}isEmpty(){return!(p(this,vd)||p(this,ki)||p(this,bh)||p(this,yd)||p(this,Kr)||p(this,Dp))}get toolbarButtons(){return[["altText",this.createAltText()]]}get isResizable(){return!0}render(){if(this.div)return this.div;let e,n;return this._isCopy&&(e=this.x,n=this.y),super.render(),this.div.hidden=!0,this.createAltText(),p(this,Dp)||(p(this,ki)?$(this,En,Z5).call(this):$(this,En,Q5).call(this)),this._isCopy&&this._moveAfterPaste(e,n),this._uiManager.addShouldRescale(this),this.div}setCanvas(e,n){const{id:r,bitmap:s}=this._uiManager.imageManager.getFromCanvas(e,n);n.remove(),r&&this._uiManager.imageManager.isValidId(r)&&(k(this,Kr,r),s&&k(this,ki,s),k(this,Dp,!1),$(this,En,Z5).call(this))}_onResized(){this.onScaleChanging()}onScaleChanging(){if(!this.parent)return;p(this,ic)!==null&&clearTimeout(p(this,ic)),k(this,ic,setTimeout(()=>{k(this,ic,null),$(this,En,AE).call(this)},200))}copyCanvas(e,n,r=!1){e||(e=224);const{width:s,height:a}=p(this,ki),u=new ac;let c=p(this,ki),h=s,f=a,g=null;if(n){if(s>n||a>n){const U=Math.min(n/s,n/a);h=Math.floor(s*U),f=Math.floor(a*U)}g=document.createElement("canvas");const y=g.width=Math.ceil(h*u.sx),w=g.height=Math.ceil(f*u.sy);p(this,Aa)||(c=$(this,En,tb).call(this,y,w));const S=g.getContext("2d");S.filter=this._uiManager.hcmFilter;let T="white",C="#cfcfd8";this._uiManager.hcmFilter!=="none"?C="black":$H.isDarkMode&&(T="#8f8f9d",C="#42414d");const D=15,R=D*u.sx,I=D*u.sy,F=new OffscreenCanvas(R*2,I*2),q=F.getContext("2d");q.fillStyle=T,q.fillRect(0,0,R*2,I*2),q.fillStyle=C,q.fillRect(0,0,R,I),q.fillRect(R,I,R,I),S.fillStyle=S.createPattern(F,"repeat"),S.fillRect(0,0,y,w),S.drawImage(c,0,0,c.width,c.height,0,0,y,w)}let m=null;if(r){let y,w;if(u.symmetric&&c.width<e&&c.height<e)y=c.width,w=c.height;else if(c=p(this,ki),s>e||a>e){const C=Math.min(e/s,e/a);y=Math.floor(s*C),w=Math.floor(a*C),p(this,Aa)||(c=$(this,En,tb).call(this,y,w))}const T=new OffscreenCanvas(y,w).getContext("2d",{willReadFrequently:!0});T.drawImage(c,0,0,c.width,c.height,0,0,y,w),m={width:y,height:w,data:T.getImageData(0,0,y,w).data}}return{canvas:g,width:h,height:f,imageData:m}}static async deserialize(e,n,r){var T;let s=null,a=!1;if(e instanceof ZD){const{data:{rect:C,rotation:D,id:R,structParent:I,popupRef:F,richText:q,contentsObj:U,creationDate:V,modificationDate:tt},container:J,parent:{page:{pageNumber:O}},canvas:G}=e;let et,st;G?(delete e.canvas,{id:et,bitmap:st}=r.imageManager.getFromCanvas(J.id,G),G.remove()):(a=!0,e._hasNoCanvas=!0);const pt=((T=await n._structTree.getAriaAttributes(`${Kg}${R}`))==null?void 0:T.get("aria-label"))||"";s=e={annotationType:We.STAMP,bitmapId:et,bitmap:st,pageIndex:O-1,rect:C.slice(0),rotation:D,annotationElementId:R,id:R,deleted:!1,accessibilityData:{decorative:!1,altText:pt},isSvg:!1,structParent:I,popupRef:F,richText:q,comment:(U==null?void 0:U.str)||null,creationDate:V,modificationDate:tt}}const u=await super.deserialize(e,n,r),{rect:c,bitmap:h,bitmapUrl:f,bitmapId:g,isSvg:m,accessibilityData:y}=e;a?(r.addMissingCanvas(e.id,u),k(u,Dp,!0)):g&&r.imageManager.isValidId(g)?(k(u,Kr,g),h&&k(u,ki,h)):k(u,bh,f),k(u,Aa,m);const[w,S]=u.pageDimensions;return u.width=(c[2]-c[0])/w,u.height=(c[3]-c[1])/S,y&&(u.altTextData=y),u._initialData=s,e.comment&&u.setCommentData(e),k(u,L1,!!s),u}serialize(e=!1,n=null){if(this.isEmpty())return null;if(this.deleted)return this.serializeDeleted();const r=Object.assign(super.serialize(e),{bitmapId:p(this,Kr),isSvg:p(this,Aa)});if(this.addComment(r),e)return r.bitmapUrl=$(this,En,eb).call(this,!0),r.accessibilityData=this.serializeAltText(!0),r.isCopy=!0,r;const{decorative:s,altText:a}=this.serializeAltText(!1);if(!s&&a&&(r.accessibilityData={type:"Figure",alt:a}),this.annotationElementId){const c=$(this,En,BL).call(this,r);return c.isSame?null:(c.isSameAltText?delete r.accessibilityData:r.accessibilityData.structParent=this._initialData.structParent??-1,r.id=this.annotationElementId,delete r.bitmapId,r)}if(n===null)return r;n.stamps||(n.stamps=new Map);const u=p(this,Aa)?(r.rect[2]-r.rect[0])*(r.rect[3]-r.rect[1]):null;if(!n.stamps.has(p(this,Kr)))n.stamps.set(p(this,Kr),{area:u,serialized:r}),r.bitmap=$(this,En,eb).call(this,!1);else if(p(this,Aa)){const c=n.stamps.get(p(this,Kr));u>c.area&&(c.area=u,c.serialized.bitmap.close(),c.serialized.bitmap=$(this,En,eb).call(this,!1))}return r}renderAnnotationElement(e){return this.deleted?(e.hide(),null):(e.updateEdited({rect:this.getPDFRect(),popup:this.comment}),null)}}ki=new WeakMap,Kr=new WeakMap,vd=new WeakMap,bh=new WeakMap,yd=new WeakMap,D1=new WeakMap,Ah=new WeakMap,Dp=new WeakMap,ic=new WeakMap,Aa=new WeakMap,L1=new WeakMap,En=new WeakSet,e2=function(e,n=!1){if(!e){this.remove();return}k(this,ki,e.bitmap),n||(k(this,Kr,e.id),k(this,Aa,e.isSvg)),e.file&&k(this,D1,e.file.name),$(this,En,Z5).call(this)},n2=function(){if(k(this,vd,null),this._uiManager.enableWaiting(!1),!!p(this,Ah)){if(this._uiManager.useNewAltTextWhenAddingImage&&this._uiManager.useNewAltTextFlow&&p(this,ki)){this.addEditToolbar().then(()=>{this._editToolbar.hide(),this._uiManager.editAltText(this,!0)});return}if(!this._uiManager.useNewAltTextWhenAddingImage&&this._uiManager.useNewAltTextFlow&&p(this,ki)){this._reportTelemetry({action:"pdfjs.image.image_added",data:{alt_text_modal:!1,alt_text_type:"empty"}});try{this.mlGuessAltText()}catch{}}this.div.focus()}},Q5=function(){if(p(this,Kr)){this._uiManager.enableWaiting(!0),this._uiManager.imageManager.getFromId(p(this,Kr)).then(r=>$(this,En,e2).call(this,r,!0)).finally(()=>$(this,En,n2).call(this));return}if(p(this,bh)){const r=p(this,bh);k(this,bh,null),this._uiManager.enableWaiting(!0),k(this,vd,this._uiManager.imageManager.getFromUrl(r).then(s=>$(this,En,e2).call(this,s)).finally(()=>$(this,En,n2).call(this)));return}if(p(this,yd)){const r=p(this,yd);k(this,yd,null),this._uiManager.enableWaiting(!0),k(this,vd,this._uiManager.imageManager.getFromFile(r).then(s=>$(this,En,e2).call(this,s)).finally(()=>$(this,En,n2).call(this)));return}const e=document.createElement("input");e.type="file",e.accept=sS.join(",");const n=this._uiManager._signal;k(this,vd,new Promise(r=>{e.addEventListener("change",async()=>{if(!e.files||e.files.length===0)this.remove();else{this._uiManager.enableWaiting(!0);const s=await this._uiManager.imageManager.getFromFile(e.files[0]);this._reportTelemetry({action:"pdfjs.image.image_selected",data:{alt_text_modal:this._uiManager.useNewAltTextFlow}}),$(this,En,e2).call(this,s)}r()},{signal:n}),e.addEventListener("cancel",()=>{this.remove(),r()},{signal:n})}).finally(()=>$(this,En,n2).call(this))),e.click()},Z5=function(){var h;const{div:e}=this;let{width:n,height:r}=p(this,ki);const[s,a]=this.pageDimensions,u=.75;if(this.width)n=this.width*s,r=this.height*a;else if(n>u*s||r>u*a){const f=Math.min(u*s/n,u*a/r);n*=f,r*=f}this._uiManager.enableWaiting(!1);const c=k(this,Ah,document.createElement("canvas"));c.setAttribute("role","img"),this.addContainer(c),this.width=n/s,this.height=r/a,this.setDims(),(h=this._initialOptions)!=null&&h.isCentered?this.center():this.fixAndSetPosition(),this._initialOptions=null,(!this._uiManager.useNewAltTextWhenAddingImage||!this._uiManager.useNewAltTextFlow||this.annotationElementId)&&(e.hidden=!1),$(this,En,AE).call(this),p(this,L1)||(this.parent.addUndoableEditor(this),k(this,L1,!0)),this._reportTelemetry({action:"inserted_image"}),p(this,D1)&&this.div.setAttribute("aria-description",p(this,D1)),this.annotationElementId||this._uiManager.a11yAlert("pdfjs-editor-stamp-added-alert")},tb=function(e,n){const{width:r,height:s}=p(this,ki);let a=r,u=s,c=p(this,ki);for(;a>2*e||u>2*n;){const h=a,f=u;a>2*e&&(a=a>=16384?Math.floor(a/2)-1:Math.ceil(a/2)),u>2*n&&(u=u>=16384?Math.floor(u/2)-1:Math.ceil(u/2));const g=new OffscreenCanvas(a,u);g.getContext("2d").drawImage(c,0,0,h,f,0,0,a,u),c=g.transferToImageBitmap()}return c},AE=function(){const[e,n]=this.parentDimensions,{width:r,height:s}=this,a=new ac,u=Math.ceil(r*e*a.sx),c=Math.ceil(s*n*a.sy),h=p(this,Ah);if(!h||h.width===u&&h.height===c)return;h.width=u,h.height=c;const f=p(this,Aa)?p(this,ki):$(this,En,tb).call(this,u,c),g=h.getContext("2d");g.filter=this._uiManager.hcmFilter,g.drawImage(f,0,0,f.width,f.height,0,0,u,c)},eb=function(e){if(e){if(p(this,Aa)){const s=this._uiManager.imageManager.getSvgUrl(p(this,Kr));if(s)return s}const n=document.createElement("canvas");return{width:n.width,height:n.height}=p(this,ki),n.getContext("2d").drawImage(p(this,ki),0,0),n.toDataURL()}if(p(this,Aa)){const[n,r]=this.pageDimensions,s=Math.round(this.width*n*Td.PDF_TO_CSS_UNITS),a=Math.round(this.height*r*Td.PDF_TO_CSS_UNITS),u=new OffscreenCanvas(s,a);return u.getContext("2d").drawImage(p(this,ki),0,0,p(this,ki).width,p(this,ki).height,0,0,s,a),u.transferToImageBitmap()}return structuredClone(p(this,ki))},BL=function(e){var u;const{pageIndex:n,accessibilityData:{altText:r}}=this._initialData,s=e.pageIndex===n,a=(((u=e.accessibilityData)==null?void 0:u.alt)||"")===r;return{isSame:!this.hasEditedComment&&!this._hasBeenMoved&&!this._hasBeenResized&&s&&a,isSameAltText:a}},Kt(bE,"_type","stamp"),Kt(bE,"_editorType",We.STAMP);var Lp,M1,xd,bd,_h,Ho,Ad,I1,P1,Vl,wh,Qr,Sh,_d,k1,be,wd,li,wE,OL,Pu,SE,EE,nb;const Ml=class Ml{constructor({uiManager:t,pageIndex:e,div:n,structTreeLayer:r,accessibilityManager:s,annotationLayer:a,drawLayer:u,textLayer:c,viewport:h,l10n:f}){z(this,li);z(this,Lp);z(this,M1,!1);z(this,xd,null);z(this,bd,null);z(this,_h,null);z(this,Ho,new Map);z(this,Ad,!1);z(this,I1,!1);z(this,P1,!1);z(this,Vl,null);z(this,wh,null);z(this,Qr,null);z(this,Sh,null);z(this,_d,null);z(this,k1,-1);z(this,be);const g=[...p(Ml,wd).values()];if(!Ml._initialized){Ml._initialized=!0;for(const m of g)m.initialize(f,t)}t.registerEditorTypes(g),k(this,be,t),this.pageIndex=e,this.div=n,k(this,Lp,s),k(this,xd,a),this.viewport=h,k(this,Qr,c),this.drawLayer=u,this._structTree=r,p(this,be).addLayer(this)}get isEmpty(){return p(this,Ho).size===0}get isInvisible(){return this.isEmpty&&p(this,be).getMode()===We.NONE}updateToolbar(t){p(this,be).updateToolbar(t)}updateMode(t=p(this,be).getMode()){switch($(this,li,nb).call(this),t){case We.NONE:this.div.classList.toggle("nonEditing",!0),this.disableTextSelection(),this.togglePointerEvents(!1),this.toggleAnnotationLayerPointerEvents(!0),this.disableClick();return;case We.INK:this.disableTextSelection(),this.togglePointerEvents(!0),this.enableClick();break;case We.HIGHLIGHT:this.enableTextSelection(),this.togglePointerEvents(!1),this.disableClick();break;default:this.disableTextSelection(),this.togglePointerEvents(!0),this.enableClick()}this.toggleAnnotationLayerPointerEvents(!1);const{classList:e}=this.div;if(e.toggle("nonEditing",!1),t===We.POPUP)e.toggle("commentEditing",!0);else{e.toggle("commentEditing",!1);for(const n of p(Ml,wd).values())e.toggle(`${n._type}Editing`,t===n._editorType)}this.div.hidden=!1}hasTextLayer(t){var e;return t===((e=p(this,Qr))==null?void 0:e.div)}setEditingState(t){p(this,be).setEditingState(t)}addCommands(t){p(this,be).addCommands(t)}cleanUndoStack(t){p(this,be).cleanUndoStack(t)}toggleDrawing(t=!1){this.div.classList.toggle("drawing",!t)}togglePointerEvents(t=!1){this.div.classList.toggle("disabled",!t)}toggleAnnotationLayerPointerEvents(t=!1){var e;(e=p(this,xd))==null||e.togglePointerEvents(t)}async enable(){var n;k(this,P1,!0),this.div.tabIndex=0,this.togglePointerEvents(!0),this.div.classList.toggle("nonEditing",!1),(n=p(this,_d))==null||n.abort(),k(this,_d,null);const t=new Set;for(const r of p(this,li,wE))r.enableEditing(),r.show(!0),r.annotationElementId&&(p(this,be).removeChangedExistingAnnotation(r),t.add(r.annotationElementId));const e=p(this,xd);if(e)for(const r of e.getEditableAnnotations()){if(r.hide(),p(this,be).isDeletedAnnotationElement(r.data.id)||t.has(r.data.id))continue;const s=await this.deserialize(r);s&&(this.addOrRebuild(s),s.enableEditing())}k(this,P1,!1),p(this,be)._eventBus.dispatch("editorsrendered",{source:this,pageNumber:this.pageIndex+1})}disable(){var r;if(k(this,I1,!0),this.div.tabIndex=-1,this.togglePointerEvents(!1),this.div.classList.toggle("nonEditing",!0),p(this,Qr)&&!p(this,_d)){k(this,_d,new AbortController);const s=p(this,be).combinedSignal(p(this,_d));p(this,Qr).div.addEventListener("pointerdown",a=>{const{clientX:c,clientY:h,timeStamp:f}=a,g=p(this,k1);if(f-g>500){k(this,k1,f);return}k(this,k1,-1);const{classList:m}=this.div;m.toggle("getElements",!0);const y=document.elementsFromPoint(c,h);if(m.toggle("getElements",!1),!this.div.contains(y[0]))return;let w;const S=new RegExp(`^${s2}[0-9]+$`);for(const C of y)if(S.test(C.id)){w=C.id;break}if(!w)return;const T=p(this,Ho).get(w);(T==null?void 0:T.annotationElementId)===null&&(a.stopPropagation(),a.preventDefault(),T.dblclick(a))},{signal:s,capture:!0})}const t=p(this,xd),e=[];if(t){const s=new Map,a=new Map;for(const c of p(this,li,wE)){if(c.disableEditing(),!c.annotationElementId){e.push(c);continue}if(c.serialize()!==null){s.set(c.annotationElementId,c);continue}else a.set(c.annotationElementId,c);(r=this.getEditableAnnotation(c.annotationElementId))==null||r.show(),c.remove()}const u=t.getEditableAnnotations();for(const c of u){const{id:h}=c.data;if(p(this,be).isDeletedAnnotationElement(h)){c.updateEdited({deleted:!0});continue}let f=a.get(h);if(f){f.resetAnnotationElement(c),f.show(!1),c.show();continue}f=s.get(h),f&&(p(this,be).addChangedExistingAnnotation(f),f.renderAnnotationElement(c)&&f.show(!1)),c.show()}}$(this,li,nb).call(this),this.isEmpty&&(this.div.hidden=!0);const{classList:n}=this.div;for(const s of p(Ml,wd).values())n.remove(`${s._type}Editing`);this.disableTextSelection(),this.toggleAnnotationLayerPointerEvents(!0),t==null||t.updateFakeAnnotations(e),k(this,I1,!1)}getEditableAnnotation(t){var e;return((e=p(this,xd))==null?void 0:e.getEditableAnnotation(t))||null}setActiveEditor(t){p(this,be).getActive()!==t&&p(this,be).setActiveEditor(t)}enableTextSelection(){var t;if(this.div.tabIndex=-1,(t=p(this,Qr))!=null&&t.div&&!p(this,Sh)){k(this,Sh,new AbortController);const e=p(this,be).combinedSignal(p(this,Sh));p(this,Qr).div.addEventListener("pointerdown",$(this,li,OL).bind(this),{signal:e}),p(this,Qr).div.classList.add("highlighting")}}disableTextSelection(){var t;this.div.tabIndex=0,(t=p(this,Qr))!=null&&t.div&&p(this,Sh)&&(p(this,Sh).abort(),k(this,Sh,null),p(this,Qr).div.classList.remove("highlighting"))}enableClick(){if(p(this,bd))return;k(this,bd,new AbortController);const t=p(this,be).combinedSignal(p(this,bd));this.div.addEventListener("pointerdown",this.pointerdown.bind(this),{signal:t});const e=this.pointerup.bind(this);this.div.addEventListener("pointerup",e,{signal:t}),this.div.addEventListener("pointercancel",e,{signal:t})}disableClick(){var t;(t=p(this,bd))==null||t.abort(),k(this,bd,null)}attach(t){p(this,Ho).set(t.id,t);const{annotationElementId:e}=t;e&&p(this,be).isDeletedAnnotationElement(e)&&p(this,be).removeDeletedAnnotationElement(t)}detach(t){var e;p(this,Ho).delete(t.id),(e=p(this,Lp))==null||e.removePointerInTextLayer(t.contentDiv),!p(this,I1)&&t.annotationElementId&&p(this,be).addDeletedAnnotationElement(t)}remove(t){this.detach(t),p(this,be).removeEditor(t),t.div.remove(),t.isAttachedToDOM=!1}changeParent(t){var e;t.parent!==this&&(t.parent&&t.annotationElementId&&(p(this,be).addDeletedAnnotationElement(t),bi.deleteAnnotationElement(t),t.annotationElementId=null),this.attach(t),(e=t.parent)==null||e.detach(t),t.setParent(this),t.div&&t.isAttachedToDOM&&(t.div.remove(),this.div.append(t.div)))}add(t){if(!(t.parent===this&&t.isAttachedToDOM)){if(this.changeParent(t),p(this,be).addEditor(t),this.attach(t),!t.isAttachedToDOM){const e=t.render();this.div.append(e),t.isAttachedToDOM=!0}t.fixAndSetPosition(),t.onceAdded(!p(this,P1)),p(this,be).addToAnnotationStorage(t),t._reportTelemetry(t.telemetryInitialData)}}moveEditorInDOM(t){var n;if(!t.isAttachedToDOM)return;const{activeElement:e}=document;t.div.contains(e)&&!p(this,_h)&&(t._focusEventsAllowed=!1,k(this,_h,setTimeout(()=>{k(this,_h,null),t.div.contains(document.activeElement)?t._focusEventsAllowed=!0:(t.div.addEventListener("focusin",()=>{t._focusEventsAllowed=!0},{once:!0,signal:p(this,be)._signal}),e.focus())},0))),t._structTreeParentId=(n=p(this,Lp))==null?void 0:n.moveElementInDOM(this.div,t.div,t.contentDiv,!0)}addOrRebuild(t){t.needsToBeRebuilt()?(t.parent||(t.parent=this),t.rebuild(),t.show()):this.add(t)}addUndoableEditor(t){const e=()=>t._uiManager.rebuild(t),n=()=>{t.remove()};this.addCommands({cmd:e,undo:n,mustExec:!1})}getEditorByUID(t){for(const e of p(this,Ho).values())if(e.uid===t)return e;return null}getNextId(){return p(this,be).getId()}combinedSignal(t){return p(this,be).combinedSignal(t)}canCreateNewEmptyEditor(){var t;return(t=p(this,li,Pu))==null?void 0:t.canCreateNewEmptyEditor()}async pasteEditor(t,e){this.updateToolbar(t),await p(this,be).updateMode(t.mode);const{offsetX:n,offsetY:r}=$(this,li,EE).call(this),s=this.getNextId(),a=$(this,li,SE).call(this,{parent:this,id:s,x:n,y:r,uiManager:p(this,be),isCentered:!0,...e});a&&this.add(a)}async deserialize(t){var e;return await((e=p(Ml,wd).get(t.annotationType??t.annotationEditorType))==null?void 0:e.deserialize(t,this,p(this,be)))||null}createAndAddNewEditor(t,e,n={}){const r=this.getNextId(),s=$(this,li,SE).call(this,{parent:this,id:r,x:t.offsetX,y:t.offsetY,uiManager:p(this,be),isCentered:e,...n});return s&&this.add(s),s}get boundingClientRect(){return this.div.getBoundingClientRect()}addNewEditor(t={}){this.createAndAddNewEditor($(this,li,EE).call(this),!0,t)}setSelected(t){p(this,be).setSelected(t)}toggleSelected(t){p(this,be).toggleSelected(t)}unselect(t){p(this,be).unselect(t)}pointerup(t){var r;const{isMac:e}=bs.platform;if(t.button!==0||t.ctrlKey&&e||t.target!==this.div||!p(this,Ad)||(k(this,Ad,!1),(r=p(this,li,Pu))!=null&&r.isDrawer&&p(this,li,Pu).supportMultipleDrawings))return;if(!p(this,M1)){k(this,M1,!0);return}const n=p(this,be).getMode();if(n===We.STAMP||n===We.SIGNATURE){p(this,be).unselectAll();return}this.createAndAddNewEditor(t,!1)}pointerdown(t){var r;if(p(this,be).getMode()===We.HIGHLIGHT&&this.enableTextSelection(),p(this,Ad)){k(this,Ad,!1);return}const{isMac:e}=bs.platform;if(t.button!==0||t.ctrlKey&&e||t.target!==this.div)return;if(k(this,Ad,!0),(r=p(this,li,Pu))!=null&&r.isDrawer){this.startDrawingSession(t);return}const n=p(this,be).getActive();k(this,M1,!n||n.isEmpty())}startDrawingSession(t){if(this.div.focus({preventScroll:!0}),p(this,Vl)){p(this,li,Pu).startDrawing(this,p(this,be),!1,t);return}p(this,be).setCurrentDrawingSession(this),k(this,Vl,new AbortController);const e=p(this,be).combinedSignal(p(this,Vl));this.div.addEventListener("blur",({relatedTarget:n})=>{n&&!this.div.contains(n)&&(k(this,wh,null),this.commitOrRemove())},{signal:e}),p(this,li,Pu).startDrawing(this,p(this,be),!1,t)}pause(t){if(t){const{activeElement:e}=document;this.div.contains(e)&&k(this,wh,e);return}p(this,wh)&&setTimeout(()=>{var e;(e=p(this,wh))==null||e.focus(),k(this,wh,null)},0)}endDrawingSession(t=!1){return p(this,Vl)?(p(this,be).setCurrentDrawingSession(null),p(this,Vl).abort(),k(this,Vl,null),k(this,wh,null),p(this,li,Pu).endDrawing(t)):null}findNewParent(t,e,n){const r=p(this,be).findParent(e,n);return r===null||r===this?!1:(r.changeParent(t),!0)}commitOrRemove(){return p(this,Vl)?(this.endDrawingSession(),!0):!1}onScaleChanging(){p(this,Vl)&&p(this,li,Pu).onScaleChangingWhenDrawing(this)}destroy(){var t,e;this.commitOrRemove(),((t=p(this,be).getActive())==null?void 0:t.parent)===this&&(p(this,be).commitOrRemove(),p(this,be).setActiveEditor(null)),p(this,_h)&&(clearTimeout(p(this,_h)),k(this,_h,null));for(const n of p(this,Ho).values())(e=p(this,Lp))==null||e.removePointerInTextLayer(n.contentDiv),n.setParent(null),n.isAttachedToDOM=!1,n.div.remove();this.div=null,p(this,Ho).clear(),p(this,be).removeLayer(this)}render({viewport:t}){this.viewport=t,Pp(this.div,t);for(const e of p(this,be).getEditors(this.pageIndex))this.add(e),e.rebuild();this.updateMode()}update({viewport:t}){p(this,be).commitOrRemove(),$(this,li,nb).call(this);const e=this.viewport.rotation,n=t.rotation;if(this.viewport=t,Pp(this.div,{rotation:n}),e!==n)for(const r of p(this,Ho).values())r.rotate(n)}get pageDimensions(){const{pageWidth:t,pageHeight:e}=this.viewport.rawDims;return[t,e]}get scale(){return p(this,be).viewParameters.realScale}};Lp=new WeakMap,M1=new WeakMap,xd=new WeakMap,bd=new WeakMap,_h=new WeakMap,Ho=new WeakMap,Ad=new WeakMap,I1=new WeakMap,P1=new WeakMap,Vl=new WeakMap,wh=new WeakMap,Qr=new WeakMap,Sh=new WeakMap,_d=new WeakMap,k1=new WeakMap,be=new WeakMap,wd=new WeakMap,li=new WeakSet,wE=function(){return p(this,Ho).size!==0?p(this,Ho).values():p(this,be).getEditors(this.pageIndex)},OL=function(t){p(this,be).unselectAll();const{target:e}=t;if(e===p(this,Qr).div||(e.getAttribute("role")==="img"||e.classList.contains("endOfContent"))&&p(this,Qr).div.contains(e)){const{isMac:n}=bs.platform;if(t.button!==0||t.ctrlKey&&n)return;p(this,be).showAllEditors("highlight",!0,!0),p(this,Qr).div.classList.add("free"),this.toggleDrawing(),aA.startHighlighting(this,p(this,be).direction==="ltr",{target:p(this,Qr).div,x:t.x,y:t.y}),p(this,Qr).div.addEventListener("pointerup",()=>{p(this,Qr).div.classList.remove("free"),this.toggleDrawing(!0)},{once:!0,signal:p(this,be)._signal}),t.preventDefault()}},Pu=function(){return p(Ml,wd).get(p(this,be).getMode())},SE=function(t){const e=p(this,li,Pu);return e?new e.prototype.constructor(t):null},EE=function(){const{x:t,y:e,width:n,height:r}=this.boundingClientRect,s=Math.max(0,t),a=Math.max(0,e),u=Math.min(window.innerWidth,t+n),c=Math.min(window.innerHeight,e+r),h=(s+u)/2-t,f=(a+c)/2-e,[g,m]=this.viewport.rotation%180===0?[h,f]:[f,h];return{offsetX:g,offsetY:m}},nb=function(){for(const t of p(this,Ho).values())t.isEmpty()&&t.remove()},Kt(Ml,"_initialized",!1),z(Ml,wd,new Map([iE,dE,bE,aA,xE].map(t=>[t._editorType,t])));let _E=Ml;var Yl,eo,Mp,Zy,RA,UL,lc,TE,HL,NE;const Dr=class Dr{constructor({pageIndex:t}){z(this,lc);z(this,Yl,null);z(this,eo,new Map);z(this,Mp,new Map);this.pageIndex=t}setParent(t){if(!p(this,Yl)){k(this,Yl,t);return}if(p(this,Yl)!==t){if(p(this,eo).size>0)for(const e of p(this,eo).values())e.remove(),t.append(e);k(this,Yl,t)}}static get _svgFactory(){return Ve(this,"_svgFactory",new sA)}draw(t,e=!1,n=!1){const r=Nr(Dr,Zy)._++,s=$(this,lc,TE).call(this),a=Dr._svgFactory.createElement("defs");s.append(a);const u=Dr._svgFactory.createElement("path");a.append(u);const c=`path_p${this.pageIndex}_${r}`;u.setAttribute("id",c),u.setAttribute("vector-effect","non-scaling-stroke"),e&&p(this,Mp).set(r,u);const h=n?$(this,lc,HL).call(this,a,c):null,f=Dr._svgFactory.createElement("use");return s.append(f),f.setAttribute("href",`#${c}`),this.updateProperties(s,t),p(this,eo).set(r,s),{id:r,clipPathId:`url(#${h})`}}drawOutline(t,e){const n=Nr(Dr,Zy)._++,r=$(this,lc,TE).call(this),s=Dr._svgFactory.createElement("defs");r.append(s);const a=Dr._svgFactory.createElement("path");s.append(a);const u=`path_p${this.pageIndex}_${n}`;a.setAttribute("id",u),a.setAttribute("vector-effect","non-scaling-stroke");let c;if(e){const g=Dr._svgFactory.createElement("mask");s.append(g),c=`mask_p${this.pageIndex}_${n}`,g.setAttribute("id",c),g.setAttribute("maskUnits","objectBoundingBox");const m=Dr._svgFactory.createElement("rect");g.append(m),m.setAttribute("width","1"),m.setAttribute("height","1"),m.setAttribute("fill","white");const y=Dr._svgFactory.createElement("use");g.append(y),y.setAttribute("href",`#${u}`),y.setAttribute("stroke","none"),y.setAttribute("fill","black"),y.setAttribute("fill-rule","nonzero"),y.classList.add("mask")}const h=Dr._svgFactory.createElement("use");r.append(h),h.setAttribute("href",`#${u}`),c&&h.setAttribute("mask",`url(#${c})`);const f=h.cloneNode();return r.append(f),h.classList.add("mainOutline"),f.classList.add("secondaryOutline"),this.updateProperties(r,t),p(this,eo).set(n,r),n}finalizeDraw(t,e){p(this,Mp).delete(t),this.updateProperties(t,e)}updateProperties(t,e){var c;if(!e)return;const{root:n,bbox:r,rootClass:s,path:a}=e,u=typeof t=="number"?p(this,eo).get(t):t;if(u){if(n&&$(this,lc,NE).call(this,u,n),r&&$(c=Dr,RA,UL).call(c,u,r),s){const{classList:h}=u;for(const[f,g]of Object.entries(s))h.toggle(f,g)}if(a){const f=u.firstElementChild.firstElementChild;$(this,lc,NE).call(this,f,a)}}}updateParent(t,e){if(e===this)return;const n=p(this,eo).get(t);n&&(p(e,Yl).append(n),p(this,eo).delete(t),p(e,eo).set(t,n))}remove(t){p(this,Mp).delete(t),p(this,Yl)!==null&&(p(this,eo).get(t).remove(),p(this,eo).delete(t))}destroy(){k(this,Yl,null);for(const t of p(this,eo).values())t.remove();p(this,eo).clear(),p(this,Mp).clear()}};Yl=new WeakMap,eo=new WeakMap,Mp=new WeakMap,Zy=new WeakMap,RA=new WeakSet,UL=function(t,[e,n,r,s]){const{style:a}=t;a.top=`${100*n}%`,a.left=`${100*e}%`,a.width=`${100*r}%`,a.height=`${100*s}%`},lc=new WeakSet,TE=function(){const t=Dr._svgFactory.create(1,1,!0);return p(this,Yl).append(t),t.setAttribute("aria-hidden",!0),t},HL=function(t,e){const n=Dr._svgFactory.createElement("clipPath");t.append(n);const r=`clip_${e}`;n.setAttribute("id",r),n.setAttribute("clipPathUnits","objectBoundingBox");const s=Dr._svgFactory.createElement("use");return n.append(s),s.setAttribute("href",`#${e}`),s.classList.add("clip"),r},NE=function(t,e){for(const[n,r]of Object.entries(e))r===null?t.removeAttribute(n):t.setAttribute(n,r)},z(Dr,RA),z(Dr,Zy,0);let CE=Dr;globalThis._pdfjsTestingUtils={HighlightOutliner:sE};globalThis.pdfjsLib={AbortException:Cd,AnnotationEditorLayer:_E,AnnotationEditorParamsType:xn,AnnotationEditorType:We,AnnotationEditorUIManager:kp,AnnotationLayer:eE,AnnotationMode:Mf,AnnotationType:vr,applyOpacity:XH,build:tz,ColorPicker:iA,createValidAbsoluteUrl:RR,CSSConstants:WH,DOMSVGFactory:sA,DrawLayer:CE,FeatureTest:bs,fetchData:rx,findContrastColor:jH,getDocument:BD,getFilenameFromUrl:qH,getPdfFilenameFromUrl:zH,getRGB:ox,getUuid:MR,getXfaPageViewport:VH,GlobalWorkerOptions:rc,ImageKind:w5,InvalidPDFException:iS,isDataScheme:zA,isPdfFile:sC,isValidExplicitDest:sq,MathClamp:ro,noContextMenu:ll,normalizeUnicode:OH,OPS:o2,OutputScale:ac,PasswordResponses:RH,PDFDataRangeTransport:OD,PDFDateString:Kb,PDFWorker:u2,PermissionFlag:NH,PixelsPerInch:Td,RenderingCancelledException:rC,renderRichText:kR,ResponseException:Jb,setLayerDimensions:Pp,shadow:Ve,SignatureExtractor:Eh,stopEvent:Zi,SupportedImageMimeTypes:sS,TextLayer:l2,TouchManager:Zb,updateUrlHash:DR,Util:ge,VerbosityLevel:UA,version:qD,XfaLayer:PR};rc.workerSrc=`//cdnjs.cloudflare.com/ajax/libs/pdf.js/${qD}/pdf.worker.min.js`;async function Sz(i){const t=await i.arrayBuffer(),e=await BD(t).promise,n=e.numPages;let r="";for(let s=1;s<=n;s++){const c=(await(await e.getPage(s)).getTextContent()).items.map(h=>"str"in h?h.str:"").join(" ");r+=c+`

`}return r}const hs=[];for(let i=0;i<256;++i)hs.push((i+256).toString(16).slice(1));function Ez(i,t=0){return(hs[i[t+0]]+hs[i[t+1]]+hs[i[t+2]]+hs[i[t+3]]+"-"+hs[i[t+4]]+hs[i[t+5]]+"-"+hs[i[t+6]]+hs[i[t+7]]+"-"+hs[i[t+8]]+hs[i[t+9]]+"-"+hs[i[t+10]]+hs[i[t+11]]+hs[i[t+12]]+hs[i[t+13]]+hs[i[t+14]]+hs[i[t+15]]).toLowerCase()}let Nw;const Cz=new Uint8Array(16);function Tz(){if(!Nw){if(typeof crypto>"u"||!crypto.getRandomValues)throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");Nw=crypto.getRandomValues.bind(crypto)}return Nw(Cz)}const Nz=typeof crypto<"u"&&crypto.randomUUID&&crypto.randomUUID.bind(crypto),l8={randomUUID:Nz};function Rz(i,t,e){var r;i=i||{};const n=i.random??((r=i.rng)==null?void 0:r.call(i))??Tz();if(n.length<16)throw new Error("Random bytes length must be >= 16");return n[6]=n[6]&15|64,n[8]=n[8]&63|128,Ez(n)}function u8(i,t,e){return l8.randomUUID&&!i?l8.randomUUID():Rz(i)}var ib={exports:{}};function Dz(i){throw new Error('Could not dynamically require "'+i+'". Please configure the dynamicRequireTargets or/and ignoreDynamicRequires option of @rollup/plugin-commonjs appropriately for this require call to work.')}var rb={exports:{}};const Lz={},Mz=Object.freeze(Object.defineProperty({__proto__:null,default:Lz},Symbol.toStringTag,{value:"Module"})),Iz=AI(Mz);var Pz=rb.exports,c8;function An(){return c8||(c8=1,(function(i,t){(function(e,n){i.exports=n()})(Pz,function(){var e=e||(function(n,r){var s;if(typeof window<"u"&&window.crypto&&(s=window.crypto),typeof self<"u"&&self.crypto&&(s=self.crypto),typeof globalThis<"u"&&globalThis.crypto&&(s=globalThis.crypto),!s&&typeof window<"u"&&window.msCrypto&&(s=window.msCrypto),!s&&typeof aw<"u"&&aw.crypto&&(s=aw.crypto),!s&&typeof Dz=="function")try{s=Iz}catch{}var a=function(){if(s){if(typeof s.getRandomValues=="function")try{return s.getRandomValues(new Uint32Array(1))[0]}catch{}if(typeof s.randomBytes=="function")try{return s.randomBytes(4).readInt32LE()}catch{}}throw new Error("Native crypto module could not be used to get secure random number.")},u=Object.create||(function(){function D(){}return function(R){var I;return D.prototype=R,I=new D,D.prototype=null,I}})(),c={},h=c.lib={},f=h.Base=(function(){return{extend:function(D){var R=u(this);return D&&R.mixIn(D),(!R.hasOwnProperty("init")||this.init===R.init)&&(R.init=function(){R.$super.init.apply(this,arguments)}),R.init.prototype=R,R.$super=this,R},create:function(){var D=this.extend();return D.init.apply(D,arguments),D},init:function(){},mixIn:function(D){for(var R in D)D.hasOwnProperty(R)&&(this[R]=D[R]);D.hasOwnProperty("toString")&&(this.toString=D.toString)},clone:function(){return this.init.prototype.extend(this)}}})(),g=h.WordArray=f.extend({init:function(D,R){D=this.words=D||[],R!=r?this.sigBytes=R:this.sigBytes=D.length*4},toString:function(D){return(D||y).stringify(this)},concat:function(D){var R=this.words,I=D.words,F=this.sigBytes,q=D.sigBytes;if(this.clamp(),F%4)for(var U=0;U<q;U++){var V=I[U>>>2]>>>24-U%4*8&255;R[F+U>>>2]|=V<<24-(F+U)%4*8}else for(var tt=0;tt<q;tt+=4)R[F+tt>>>2]=I[tt>>>2];return this.sigBytes+=q,this},clamp:function(){var D=this.words,R=this.sigBytes;D[R>>>2]&=4294967295<<32-R%4*8,D.length=n.ceil(R/4)},clone:function(){var D=f.clone.call(this);return D.words=this.words.slice(0),D},random:function(D){for(var R=[],I=0;I<D;I+=4)R.push(a());return new g.init(R,D)}}),m=c.enc={},y=m.Hex={stringify:function(D){for(var R=D.words,I=D.sigBytes,F=[],q=0;q<I;q++){var U=R[q>>>2]>>>24-q%4*8&255;F.push((U>>>4).toString(16)),F.push((U&15).toString(16))}return F.join("")},parse:function(D){for(var R=D.length,I=[],F=0;F<R;F+=2)I[F>>>3]|=parseInt(D.substr(F,2),16)<<24-F%8*4;return new g.init(I,R/2)}},w=m.Latin1={stringify:function(D){for(var R=D.words,I=D.sigBytes,F=[],q=0;q<I;q++){var U=R[q>>>2]>>>24-q%4*8&255;F.push(String.fromCharCode(U))}return F.join("")},parse:function(D){for(var R=D.length,I=[],F=0;F<R;F++)I[F>>>2]|=(D.charCodeAt(F)&255)<<24-F%4*8;return new g.init(I,R)}},S=m.Utf8={stringify:function(D){try{return decodeURIComponent(escape(w.stringify(D)))}catch{throw new Error("Malformed UTF-8 data")}},parse:function(D){return w.parse(unescape(encodeURIComponent(D)))}},T=h.BufferedBlockAlgorithm=f.extend({reset:function(){this._data=new g.init,this._nDataBytes=0},_append:function(D){typeof D=="string"&&(D=S.parse(D)),this._data.concat(D),this._nDataBytes+=D.sigBytes},_process:function(D){var R,I=this._data,F=I.words,q=I.sigBytes,U=this.blockSize,V=U*4,tt=q/V;D?tt=n.ceil(tt):tt=n.max((tt|0)-this._minBufferSize,0);var J=tt*U,O=n.min(J*4,q);if(J){for(var G=0;G<J;G+=U)this._doProcessBlock(F,G);R=F.splice(0,J),I.sigBytes-=O}return new g.init(R,O)},clone:function(){var D=f.clone.call(this);return D._data=this._data.clone(),D},_minBufferSize:0});h.Hasher=T.extend({cfg:f.extend(),init:function(D){this.cfg=this.cfg.extend(D),this.reset()},reset:function(){T.reset.call(this),this._doReset()},update:function(D){return this._append(D),this._process(),this},finalize:function(D){D&&this._append(D);var R=this._doFinalize();return R},blockSize:16,_createHelper:function(D){return function(R,I){return new D.init(I).finalize(R)}},_createHmacHelper:function(D){return function(R,I){return new C.HMAC.init(D,I).finalize(R)}}});var C=c.algo={};return c})(Math);return e})})(rb)),rb.exports}var sb={exports:{}},kz=sb.exports,h8;function YA(){return h8||(h8=1,(function(i,t){(function(e,n){i.exports=n(An())})(kz,function(e){return(function(n){var r=e,s=r.lib,a=s.Base,u=s.WordArray,c=r.x64={};c.Word=a.extend({init:function(h,f){this.high=h,this.low=f}}),c.WordArray=a.extend({init:function(h,f){h=this.words=h||[],f!=n?this.sigBytes=f:this.sigBytes=h.length*8},toX32:function(){for(var h=this.words,f=h.length,g=[],m=0;m<f;m++){var y=h[m];g.push(y.high),g.push(y.low)}return u.create(g,this.sigBytes)},clone:function(){for(var h=a.clone.call(this),f=h.words=this.words.slice(0),g=f.length,m=0;m<g;m++)f[m]=f[m].clone();return h}})})(),e})})(sb)),sb.exports}var ob={exports:{}},Fz=ob.exports,f8;function Bz(){return f8||(f8=1,(function(i,t){(function(e,n){i.exports=n(An())})(Fz,function(e){return(function(){if(typeof ArrayBuffer=="function"){var n=e,r=n.lib,s=r.WordArray,a=s.init,u=s.init=function(c){if(c instanceof ArrayBuffer&&(c=new Uint8Array(c)),(c instanceof Int8Array||typeof Uint8ClampedArray<"u"&&c instanceof Uint8ClampedArray||c instanceof Int16Array||c instanceof Uint16Array||c instanceof Int32Array||c instanceof Uint32Array||c instanceof Float32Array||c instanceof Float64Array)&&(c=new Uint8Array(c.buffer,c.byteOffset,c.byteLength)),c instanceof Uint8Array){for(var h=c.byteLength,f=[],g=0;g<h;g++)f[g>>>2]|=c[g]<<24-g%4*8;a.call(this,f,h)}else a.apply(this,arguments)};u.prototype=s}})(),e.lib.WordArray})})(ob)),ob.exports}var ab={exports:{}},Oz=ab.exports,d8;function Uz(){return d8||(d8=1,(function(i,t){(function(e,n){i.exports=n(An())})(Oz,function(e){return(function(){var n=e,r=n.lib,s=r.WordArray,a=n.enc;a.Utf16=a.Utf16BE={stringify:function(c){for(var h=c.words,f=c.sigBytes,g=[],m=0;m<f;m+=2){var y=h[m>>>2]>>>16-m%4*8&65535;g.push(String.fromCharCode(y))}return g.join("")},parse:function(c){for(var h=c.length,f=[],g=0;g<h;g++)f[g>>>1]|=c.charCodeAt(g)<<16-g%2*16;return s.create(f,h*2)}},a.Utf16LE={stringify:function(c){for(var h=c.words,f=c.sigBytes,g=[],m=0;m<f;m+=2){var y=u(h[m>>>2]>>>16-m%4*8&65535);g.push(String.fromCharCode(y))}return g.join("")},parse:function(c){for(var h=c.length,f=[],g=0;g<h;g++)f[g>>>1]|=u(c.charCodeAt(g)<<16-g%2*16);return s.create(f,h*2)}};function u(c){return c<<8&4278255360|c>>>8&16711935}})(),e.enc.Utf16})})(ab)),ab.exports}var lb={exports:{}},Hz=lb.exports,p8;function qp(){return p8||(p8=1,(function(i,t){(function(e,n){i.exports=n(An())})(Hz,function(e){return(function(){var n=e,r=n.lib,s=r.WordArray,a=n.enc;a.Base64={stringify:function(c){var h=c.words,f=c.sigBytes,g=this._map;c.clamp();for(var m=[],y=0;y<f;y+=3)for(var w=h[y>>>2]>>>24-y%4*8&255,S=h[y+1>>>2]>>>24-(y+1)%4*8&255,T=h[y+2>>>2]>>>24-(y+2)%4*8&255,C=w<<16|S<<8|T,D=0;D<4&&y+D*.75<f;D++)m.push(g.charAt(C>>>6*(3-D)&63));var R=g.charAt(64);if(R)for(;m.length%4;)m.push(R);return m.join("")},parse:function(c){var h=c.length,f=this._map,g=this._reverseMap;if(!g){g=this._reverseMap=[];for(var m=0;m<f.length;m++)g[f.charCodeAt(m)]=m}var y=f.charAt(64);if(y){var w=c.indexOf(y);w!==-1&&(h=w)}return u(c,h,g)},_map:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/="};function u(c,h,f){for(var g=[],m=0,y=0;y<h;y++)if(y%4){var w=f[c.charCodeAt(y-1)]<<y%4*2,S=f[c.charCodeAt(y)]>>>6-y%4*2,T=w|S;g[m>>>2]|=T<<24-m%4*8,m++}return s.create(g,m)}})(),e.enc.Base64})})(lb)),lb.exports}var ub={exports:{}},qz=ub.exports,g8;function zz(){return g8||(g8=1,(function(i,t){(function(e,n){i.exports=n(An())})(qz,function(e){return(function(){var n=e,r=n.lib,s=r.WordArray,a=n.enc;a.Base64url={stringify:function(c,h){h===void 0&&(h=!0);var f=c.words,g=c.sigBytes,m=h?this._safe_map:this._map;c.clamp();for(var y=[],w=0;w<g;w+=3)for(var S=f[w>>>2]>>>24-w%4*8&255,T=f[w+1>>>2]>>>24-(w+1)%4*8&255,C=f[w+2>>>2]>>>24-(w+2)%4*8&255,D=S<<16|T<<8|C,R=0;R<4&&w+R*.75<g;R++)y.push(m.charAt(D>>>6*(3-R)&63));var I=m.charAt(64);if(I)for(;y.length%4;)y.push(I);return y.join("")},parse:function(c,h){h===void 0&&(h=!0);var f=c.length,g=h?this._safe_map:this._map,m=this._reverseMap;if(!m){m=this._reverseMap=[];for(var y=0;y<g.length;y++)m[g.charCodeAt(y)]=y}var w=g.charAt(64);if(w){var S=c.indexOf(w);S!==-1&&(f=S)}return u(c,f,m)},_map:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",_safe_map:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_"};function u(c,h,f){for(var g=[],m=0,y=0;y<h;y++)if(y%4){var w=f[c.charCodeAt(y-1)]<<y%4*2,S=f[c.charCodeAt(y)]>>>6-y%4*2,T=w|S;g[m>>>2]|=T<<24-m%4*8,m++}return s.create(g,m)}})(),e.enc.Base64url})})(ub)),ub.exports}var cb={exports:{}},Gz=cb.exports,m8;function zp(){return m8||(m8=1,(function(i,t){(function(e,n){i.exports=n(An())})(Gz,function(e){return(function(n){var r=e,s=r.lib,a=s.WordArray,u=s.Hasher,c=r.algo,h=[];(function(){for(var S=0;S<64;S++)h[S]=n.abs(n.sin(S+1))*4294967296|0})();var f=c.MD5=u.extend({_doReset:function(){this._hash=new a.init([1732584193,4023233417,2562383102,271733878])},_doProcessBlock:function(S,T){for(var C=0;C<16;C++){var D=T+C,R=S[D];S[D]=(R<<8|R>>>24)&16711935|(R<<24|R>>>8)&4278255360}var I=this._hash.words,F=S[T+0],q=S[T+1],U=S[T+2],V=S[T+3],tt=S[T+4],J=S[T+5],O=S[T+6],G=S[T+7],et=S[T+8],st=S[T+9],pt=S[T+10],nt=S[T+11],at=S[T+12],ht=S[T+13],bt=S[T+14],St=S[T+15],K=I[0],P=I[1],Y=I[2],j=I[3];K=g(K,P,Y,j,F,7,h[0]),j=g(j,K,P,Y,q,12,h[1]),Y=g(Y,j,K,P,U,17,h[2]),P=g(P,Y,j,K,V,22,h[3]),K=g(K,P,Y,j,tt,7,h[4]),j=g(j,K,P,Y,J,12,h[5]),Y=g(Y,j,K,P,O,17,h[6]),P=g(P,Y,j,K,G,22,h[7]),K=g(K,P,Y,j,et,7,h[8]),j=g(j,K,P,Y,st,12,h[9]),Y=g(Y,j,K,P,pt,17,h[10]),P=g(P,Y,j,K,nt,22,h[11]),K=g(K,P,Y,j,at,7,h[12]),j=g(j,K,P,Y,ht,12,h[13]),Y=g(Y,j,K,P,bt,17,h[14]),P=g(P,Y,j,K,St,22,h[15]),K=m(K,P,Y,j,q,5,h[16]),j=m(j,K,P,Y,O,9,h[17]),Y=m(Y,j,K,P,nt,14,h[18]),P=m(P,Y,j,K,F,20,h[19]),K=m(K,P,Y,j,J,5,h[20]),j=m(j,K,P,Y,pt,9,h[21]),Y=m(Y,j,K,P,St,14,h[22]),P=m(P,Y,j,K,tt,20,h[23]),K=m(K,P,Y,j,st,5,h[24]),j=m(j,K,P,Y,bt,9,h[25]),Y=m(Y,j,K,P,V,14,h[26]),P=m(P,Y,j,K,et,20,h[27]),K=m(K,P,Y,j,ht,5,h[28]),j=m(j,K,P,Y,U,9,h[29]),Y=m(Y,j,K,P,G,14,h[30]),P=m(P,Y,j,K,at,20,h[31]),K=y(K,P,Y,j,J,4,h[32]),j=y(j,K,P,Y,et,11,h[33]),Y=y(Y,j,K,P,nt,16,h[34]),P=y(P,Y,j,K,bt,23,h[35]),K=y(K,P,Y,j,q,4,h[36]),j=y(j,K,P,Y,tt,11,h[37]),Y=y(Y,j,K,P,G,16,h[38]),P=y(P,Y,j,K,pt,23,h[39]),K=y(K,P,Y,j,ht,4,h[40]),j=y(j,K,P,Y,F,11,h[41]),Y=y(Y,j,K,P,V,16,h[42]),P=y(P,Y,j,K,O,23,h[43]),K=y(K,P,Y,j,st,4,h[44]),j=y(j,K,P,Y,at,11,h[45]),Y=y(Y,j,K,P,St,16,h[46]),P=y(P,Y,j,K,U,23,h[47]),K=w(K,P,Y,j,F,6,h[48]),j=w(j,K,P,Y,G,10,h[49]),Y=w(Y,j,K,P,bt,15,h[50]),P=w(P,Y,j,K,J,21,h[51]),K=w(K,P,Y,j,at,6,h[52]),j=w(j,K,P,Y,V,10,h[53]),Y=w(Y,j,K,P,pt,15,h[54]),P=w(P,Y,j,K,q,21,h[55]),K=w(K,P,Y,j,et,6,h[56]),j=w(j,K,P,Y,St,10,h[57]),Y=w(Y,j,K,P,O,15,h[58]),P=w(P,Y,j,K,ht,21,h[59]),K=w(K,P,Y,j,tt,6,h[60]),j=w(j,K,P,Y,nt,10,h[61]),Y=w(Y,j,K,P,U,15,h[62]),P=w(P,Y,j,K,st,21,h[63]),I[0]=I[0]+K|0,I[1]=I[1]+P|0,I[2]=I[2]+Y|0,I[3]=I[3]+j|0},_doFinalize:function(){var S=this._data,T=S.words,C=this._nDataBytes*8,D=S.sigBytes*8;T[D>>>5]|=128<<24-D%32;var R=n.floor(C/4294967296),I=C;T[(D+64>>>9<<4)+15]=(R<<8|R>>>24)&16711935|(R<<24|R>>>8)&4278255360,T[(D+64>>>9<<4)+14]=(I<<8|I>>>24)&16711935|(I<<24|I>>>8)&4278255360,S.sigBytes=(T.length+1)*4,this._process();for(var F=this._hash,q=F.words,U=0;U<4;U++){var V=q[U];q[U]=(V<<8|V>>>24)&16711935|(V<<24|V>>>8)&4278255360}return F},clone:function(){var S=u.clone.call(this);return S._hash=this._hash.clone(),S}});function g(S,T,C,D,R,I,F){var q=S+(T&C|~T&D)+R+F;return(q<<I|q>>>32-I)+T}function m(S,T,C,D,R,I,F){var q=S+(T&D|C&~D)+R+F;return(q<<I|q>>>32-I)+T}function y(S,T,C,D,R,I,F){var q=S+(T^C^D)+R+F;return(q<<I|q>>>32-I)+T}function w(S,T,C,D,R,I,F){var q=S+(C^(T|~D))+R+F;return(q<<I|q>>>32-I)+T}r.MD5=u._createHelper(f),r.HmacMD5=u._createHmacHelper(f)})(Math),e.MD5})})(cb)),cb.exports}var hb={exports:{}},Vz=hb.exports,v8;function qL(){return v8||(v8=1,(function(i,t){(function(e,n){i.exports=n(An())})(Vz,function(e){return(function(){var n=e,r=n.lib,s=r.WordArray,a=r.Hasher,u=n.algo,c=[],h=u.SHA1=a.extend({_doReset:function(){this._hash=new s.init([1732584193,4023233417,2562383102,271733878,3285377520])},_doProcessBlock:function(f,g){for(var m=this._hash.words,y=m[0],w=m[1],S=m[2],T=m[3],C=m[4],D=0;D<80;D++){if(D<16)c[D]=f[g+D]|0;else{var R=c[D-3]^c[D-8]^c[D-14]^c[D-16];c[D]=R<<1|R>>>31}var I=(y<<5|y>>>27)+C+c[D];D<20?I+=(w&S|~w&T)+1518500249:D<40?I+=(w^S^T)+1859775393:D<60?I+=(w&S|w&T|S&T)-1894007588:I+=(w^S^T)-899497514,C=T,T=S,S=w<<30|w>>>2,w=y,y=I}m[0]=m[0]+y|0,m[1]=m[1]+w|0,m[2]=m[2]+S|0,m[3]=m[3]+T|0,m[4]=m[4]+C|0},_doFinalize:function(){var f=this._data,g=f.words,m=this._nDataBytes*8,y=f.sigBytes*8;return g[y>>>5]|=128<<24-y%32,g[(y+64>>>9<<4)+14]=Math.floor(m/4294967296),g[(y+64>>>9<<4)+15]=m,f.sigBytes=g.length*4,this._process(),this._hash},clone:function(){var f=a.clone.call(this);return f._hash=this._hash.clone(),f}});n.SHA1=a._createHelper(h),n.HmacSHA1=a._createHmacHelper(h)})(),e.SHA1})})(hb)),hb.exports}var fb={exports:{}},Yz=fb.exports,y8;function dC(){return y8||(y8=1,(function(i,t){(function(e,n){i.exports=n(An())})(Yz,function(e){return(function(n){var r=e,s=r.lib,a=s.WordArray,u=s.Hasher,c=r.algo,h=[],f=[];(function(){function y(C){for(var D=n.sqrt(C),R=2;R<=D;R++)if(!(C%R))return!1;return!0}function w(C){return(C-(C|0))*4294967296|0}for(var S=2,T=0;T<64;)y(S)&&(T<8&&(h[T]=w(n.pow(S,1/2))),f[T]=w(n.pow(S,1/3)),T++),S++})();var g=[],m=c.SHA256=u.extend({_doReset:function(){this._hash=new a.init(h.slice(0))},_doProcessBlock:function(y,w){for(var S=this._hash.words,T=S[0],C=S[1],D=S[2],R=S[3],I=S[4],F=S[5],q=S[6],U=S[7],V=0;V<64;V++){if(V<16)g[V]=y[w+V]|0;else{var tt=g[V-15],J=(tt<<25|tt>>>7)^(tt<<14|tt>>>18)^tt>>>3,O=g[V-2],G=(O<<15|O>>>17)^(O<<13|O>>>19)^O>>>10;g[V]=J+g[V-7]+G+g[V-16]}var et=I&F^~I&q,st=T&C^T&D^C&D,pt=(T<<30|T>>>2)^(T<<19|T>>>13)^(T<<10|T>>>22),nt=(I<<26|I>>>6)^(I<<21|I>>>11)^(I<<7|I>>>25),at=U+nt+et+f[V]+g[V],ht=pt+st;U=q,q=F,F=I,I=R+at|0,R=D,D=C,C=T,T=at+ht|0}S[0]=S[0]+T|0,S[1]=S[1]+C|0,S[2]=S[2]+D|0,S[3]=S[3]+R|0,S[4]=S[4]+I|0,S[5]=S[5]+F|0,S[6]=S[6]+q|0,S[7]=S[7]+U|0},_doFinalize:function(){var y=this._data,w=y.words,S=this._nDataBytes*8,T=y.sigBytes*8;return w[T>>>5]|=128<<24-T%32,w[(T+64>>>9<<4)+14]=n.floor(S/4294967296),w[(T+64>>>9<<4)+15]=S,y.sigBytes=w.length*4,this._process(),this._hash},clone:function(){var y=u.clone.call(this);return y._hash=this._hash.clone(),y}});r.SHA256=u._createHelper(m),r.HmacSHA256=u._createHmacHelper(m)})(Math),e.SHA256})})(fb)),fb.exports}var db={exports:{}},$z=db.exports,x8;function Wz(){return x8||(x8=1,(function(i,t){(function(e,n,r){i.exports=n(An(),dC())})($z,function(e){return(function(){var n=e,r=n.lib,s=r.WordArray,a=n.algo,u=a.SHA256,c=a.SHA224=u.extend({_doReset:function(){this._hash=new s.init([3238371032,914150663,812702999,4144912697,4290775857,1750603025,1694076839,3204075428])},_doFinalize:function(){var h=u._doFinalize.call(this);return h.sigBytes-=4,h}});n.SHA224=u._createHelper(c),n.HmacSHA224=u._createHmacHelper(c)})(),e.SHA224})})(db)),db.exports}var pb={exports:{}},Xz=pb.exports,b8;function zL(){return b8||(b8=1,(function(i,t){(function(e,n,r){i.exports=n(An(),YA())})(Xz,function(e){return(function(){var n=e,r=n.lib,s=r.Hasher,a=n.x64,u=a.Word,c=a.WordArray,h=n.algo;function f(){return u.create.apply(u,arguments)}var g=[f(1116352408,3609767458),f(1899447441,602891725),f(3049323471,3964484399),f(3921009573,2173295548),f(961987163,4081628472),f(1508970993,3053834265),f(2453635748,2937671579),f(2870763221,3664609560),f(3624381080,2734883394),f(310598401,1164996542),f(607225278,1323610764),f(1426881987,3590304994),f(1925078388,4068182383),f(2162078206,991336113),f(2614888103,633803317),f(3248222580,3479774868),f(3835390401,2666613458),f(4022224774,944711139),f(264347078,2341262773),f(604807628,2007800933),f(770255983,1495990901),f(1249150122,1856431235),f(1555081692,3175218132),f(1996064986,2198950837),f(2554220882,3999719339),f(2821834349,766784016),f(2952996808,2566594879),f(3210313671,3203337956),f(3336571891,1034457026),f(3584528711,2466948901),f(113926993,3758326383),f(338241895,168717936),f(666307205,1188179964),f(773529912,1546045734),f(1294757372,1522805485),f(1396182291,2643833823),f(1695183700,2343527390),f(1986661051,1014477480),f(2177026350,1206759142),f(2456956037,344077627),f(2730485921,1290863460),f(2820302411,3158454273),f(3259730800,3505952657),f(3345764771,106217008),f(3516065817,3606008344),f(3600352804,1432725776),f(4094571909,1467031594),f(275423344,851169720),f(430227734,3100823752),f(506948616,1363258195),f(659060556,3750685593),f(883997877,3785050280),f(958139571,3318307427),f(1322822218,3812723403),f(1537002063,2003034995),f(1747873779,3602036899),f(1955562222,1575990012),f(2024104815,1125592928),f(2227730452,2716904306),f(2361852424,442776044),f(2428436474,593698344),f(2756734187,3733110249),f(3204031479,2999351573),f(3329325298,3815920427),f(3391569614,3928383900),f(3515267271,566280711),f(3940187606,3454069534),f(4118630271,4000239992),f(116418474,1914138554),f(174292421,2731055270),f(289380356,3203993006),f(460393269,320620315),f(685471733,587496836),f(852142971,1086792851),f(1017036298,365543100),f(1126000580,2618297676),f(1288033470,3409855158),f(1501505948,4234509866),f(1607167915,987167468),f(1816402316,1246189591)],m=[];(function(){for(var w=0;w<80;w++)m[w]=f()})();var y=h.SHA512=s.extend({_doReset:function(){this._hash=new c.init([new u.init(1779033703,4089235720),new u.init(3144134277,2227873595),new u.init(1013904242,4271175723),new u.init(2773480762,1595750129),new u.init(1359893119,2917565137),new u.init(2600822924,725511199),new u.init(528734635,4215389547),new u.init(1541459225,327033209)])},_doProcessBlock:function(w,S){for(var T=this._hash.words,C=T[0],D=T[1],R=T[2],I=T[3],F=T[4],q=T[5],U=T[6],V=T[7],tt=C.high,J=C.low,O=D.high,G=D.low,et=R.high,st=R.low,pt=I.high,nt=I.low,at=F.high,ht=F.low,bt=q.high,St=q.low,K=U.high,P=U.low,Y=V.high,j=V.low,ut=tt,ft=J,mt=O,At=G,Tt=et,Xt=st,$t=pt,ee=nt,Qt=at,le=ht,Bt=bt,dt=St,Le=K,he=P,Jt=Y,te=j,ne=0;ne<80;ne++){var Zt,pe,ye=m[ne];if(ne<16)pe=ye.high=w[S+ne*2]|0,Zt=ye.low=w[S+ne*2+1]|0;else{var Oe=m[ne-15],ke=Oe.high,Xe=Oe.low,mn=(ke>>>1|Xe<<31)^(ke>>>8|Xe<<24)^ke>>>7,Ee=(Xe>>>1|ke<<31)^(Xe>>>8|ke<<24)^(Xe>>>7|ke<<25),Ye=m[ne-2],re=Ye.high,Ci=Ye.low,Ze=(re>>>19|Ci<<13)^(re<<3|Ci>>>29)^re>>>6,Vn=(Ci>>>19|re<<13)^(Ci<<3|re>>>29)^(Ci>>>6|re<<26),nn=m[ne-7],tn=nn.high,lo=nn.low,vn=m[ne-16],cl=vn.high,kn=vn.low;Zt=Ee+lo,pe=mn+tn+(Zt>>>0<Ee>>>0?1:0),Zt=Zt+Vn,pe=pe+Ze+(Zt>>>0<Vn>>>0?1:0),Zt=Zt+kn,pe=pe+cl+(Zt>>>0<kn>>>0?1:0),ye.high=pe,ye.low=Zt}var Pr=Qt&Bt^~Qt&Le,ns=le&dt^~le&he,Cn=ut&mt^ut&Tt^mt&Tt,Te=ft&At^ft&Xt^At&Xt,rn=(ut>>>28|ft<<4)^(ut<<30|ft>>>2)^(ut<<25|ft>>>7),Ta=(ft>>>28|ut<<4)^(ft<<30|ut>>>2)^(ft<<25|ut>>>7),Gi=(Qt>>>14|le<<18)^(Qt>>>18|le<<14)^(Qt<<23|le>>>9),As=(le>>>14|Qt<<18)^(le>>>18|Qt<<14)^(le<<23|Qt>>>9),br=g[ne],Se=br.high,is=br.low,ti=te+As,ci=Jt+Gi+(ti>>>0<te>>>0?1:0),ti=ti+ns,ci=ci+Pr+(ti>>>0<ns>>>0?1:0),ti=ti+is,ci=ci+Se+(ti>>>0<is>>>0?1:0),ti=ti+Zt,ci=ci+pe+(ti>>>0<Zt>>>0?1:0),hi=Ta+Te,fi=rn+Cn+(hi>>>0<Ta>>>0?1:0);Jt=Le,te=he,Le=Bt,he=dt,Bt=Qt,dt=le,le=ee+ti|0,Qt=$t+ci+(le>>>0<ee>>>0?1:0)|0,$t=Tt,ee=Xt,Tt=mt,Xt=At,mt=ut,At=ft,ft=ti+hi|0,ut=ci+fi+(ft>>>0<ti>>>0?1:0)|0}J=C.low=J+ft,C.high=tt+ut+(J>>>0<ft>>>0?1:0),G=D.low=G+At,D.high=O+mt+(G>>>0<At>>>0?1:0),st=R.low=st+Xt,R.high=et+Tt+(st>>>0<Xt>>>0?1:0),nt=I.low=nt+ee,I.high=pt+$t+(nt>>>0<ee>>>0?1:0),ht=F.low=ht+le,F.high=at+Qt+(ht>>>0<le>>>0?1:0),St=q.low=St+dt,q.high=bt+Bt+(St>>>0<dt>>>0?1:0),P=U.low=P+he,U.high=K+Le+(P>>>0<he>>>0?1:0),j=V.low=j+te,V.high=Y+Jt+(j>>>0<te>>>0?1:0)},_doFinalize:function(){var w=this._data,S=w.words,T=this._nDataBytes*8,C=w.sigBytes*8;S[C>>>5]|=128<<24-C%32,S[(C+128>>>10<<5)+30]=Math.floor(T/4294967296),S[(C+128>>>10<<5)+31]=T,w.sigBytes=S.length*4,this._process();var D=this._hash.toX32();return D},clone:function(){var w=s.clone.call(this);return w._hash=this._hash.clone(),w},blockSize:1024/32});n.SHA512=s._createHelper(y),n.HmacSHA512=s._createHmacHelper(y)})(),e.SHA512})})(pb)),pb.exports}var gb={exports:{}},jz=gb.exports,A8;function Jz(){return A8||(A8=1,(function(i,t){(function(e,n,r){i.exports=n(An(),YA(),zL())})(jz,function(e){return(function(){var n=e,r=n.x64,s=r.Word,a=r.WordArray,u=n.algo,c=u.SHA512,h=u.SHA384=c.extend({_doReset:function(){this._hash=new a.init([new s.init(3418070365,3238371032),new s.init(1654270250,914150663),new s.init(2438529370,812702999),new s.init(355462360,4144912697),new s.init(1731405415,4290775857),new s.init(2394180231,1750603025),new s.init(3675008525,1694076839),new s.init(1203062813,3204075428)])},_doFinalize:function(){var f=c._doFinalize.call(this);return f.sigBytes-=16,f}});n.SHA384=c._createHelper(h),n.HmacSHA384=c._createHmacHelper(h)})(),e.SHA384})})(gb)),gb.exports}var mb={exports:{}},Kz=mb.exports,_8;function Qz(){return _8||(_8=1,(function(i,t){(function(e,n,r){i.exports=n(An(),YA())})(Kz,function(e){return(function(n){var r=e,s=r.lib,a=s.WordArray,u=s.Hasher,c=r.x64,h=c.Word,f=r.algo,g=[],m=[],y=[];(function(){for(var T=1,C=0,D=0;D<24;D++){g[T+5*C]=(D+1)*(D+2)/2%64;var R=C%5,I=(2*T+3*C)%5;T=R,C=I}for(var T=0;T<5;T++)for(var C=0;C<5;C++)m[T+5*C]=C+(2*T+3*C)%5*5;for(var F=1,q=0;q<24;q++){for(var U=0,V=0,tt=0;tt<7;tt++){if(F&1){var J=(1<<tt)-1;J<32?V^=1<<J:U^=1<<J-32}F&128?F=F<<1^113:F<<=1}y[q]=h.create(U,V)}})();var w=[];(function(){for(var T=0;T<25;T++)w[T]=h.create()})();var S=f.SHA3=u.extend({cfg:u.cfg.extend({outputLength:512}),_doReset:function(){for(var T=this._state=[],C=0;C<25;C++)T[C]=new h.init;this.blockSize=(1600-2*this.cfg.outputLength)/32},_doProcessBlock:function(T,C){for(var D=this._state,R=this.blockSize/2,I=0;I<R;I++){var F=T[C+2*I],q=T[C+2*I+1];F=(F<<8|F>>>24)&16711935|(F<<24|F>>>8)&4278255360,q=(q<<8|q>>>24)&16711935|(q<<24|q>>>8)&4278255360;var U=D[I];U.high^=q,U.low^=F}for(var V=0;V<24;V++){for(var tt=0;tt<5;tt++){for(var J=0,O=0,G=0;G<5;G++){var U=D[tt+5*G];J^=U.high,O^=U.low}var et=w[tt];et.high=J,et.low=O}for(var tt=0;tt<5;tt++)for(var st=w[(tt+4)%5],pt=w[(tt+1)%5],nt=pt.high,at=pt.low,J=st.high^(nt<<1|at>>>31),O=st.low^(at<<1|nt>>>31),G=0;G<5;G++){var U=D[tt+5*G];U.high^=J,U.low^=O}for(var ht=1;ht<25;ht++){var J,O,U=D[ht],bt=U.high,St=U.low,K=g[ht];K<32?(J=bt<<K|St>>>32-K,O=St<<K|bt>>>32-K):(J=St<<K-32|bt>>>64-K,O=bt<<K-32|St>>>64-K);var P=w[m[ht]];P.high=J,P.low=O}var Y=w[0],j=D[0];Y.high=j.high,Y.low=j.low;for(var tt=0;tt<5;tt++)for(var G=0;G<5;G++){var ht=tt+5*G,U=D[ht],ut=w[ht],ft=w[(tt+1)%5+5*G],mt=w[(tt+2)%5+5*G];U.high=ut.high^~ft.high&mt.high,U.low=ut.low^~ft.low&mt.low}var U=D[0],At=y[V];U.high^=At.high,U.low^=At.low}},_doFinalize:function(){var T=this._data,C=T.words;this._nDataBytes*8;var D=T.sigBytes*8,R=this.blockSize*32;C[D>>>5]|=1<<24-D%32,C[(n.ceil((D+1)/R)*R>>>5)-1]|=128,T.sigBytes=C.length*4,this._process();for(var I=this._state,F=this.cfg.outputLength/8,q=F/8,U=[],V=0;V<q;V++){var tt=I[V],J=tt.high,O=tt.low;J=(J<<8|J>>>24)&16711935|(J<<24|J>>>8)&4278255360,O=(O<<8|O>>>24)&16711935|(O<<24|O>>>8)&4278255360,U.push(O),U.push(J)}return new a.init(U,F)},clone:function(){for(var T=u.clone.call(this),C=T._state=this._state.slice(0),D=0;D<25;D++)C[D]=C[D].clone();return T}});r.SHA3=u._createHelper(S),r.HmacSHA3=u._createHmacHelper(S)})(Math),e.SHA3})})(mb)),mb.exports}var vb={exports:{}},Zz=vb.exports,w8;function tG(){return w8||(w8=1,(function(i,t){(function(e,n){i.exports=n(An())})(Zz,function(e){/** @preserve
			(c) 2012 by Cdric Mesnil. All rights reserved.

			Redistribution and use in source and binary forms, with or without modification, are permitted provided that the following conditions are met:

			    - Redistributions of source code must retain the above copyright notice, this list of conditions and the following disclaimer.
			    - Redistributions in binary form must reproduce the above copyright notice, this list of conditions and the following disclaimer in the documentation and/or other materials provided with the distribution.

			THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS "AS IS" AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT HOLDER OR CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
			*/return(function(n){var r=e,s=r.lib,a=s.WordArray,u=s.Hasher,c=r.algo,h=a.create([0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,7,4,13,1,10,6,15,3,12,0,9,5,2,14,11,8,3,10,14,4,9,15,8,1,2,7,0,6,13,11,5,12,1,9,11,10,0,8,12,4,13,3,7,15,14,5,6,2,4,0,5,9,7,12,2,10,14,1,3,8,11,6,15,13]),f=a.create([5,14,7,0,9,2,11,4,13,6,15,8,1,10,3,12,6,11,3,7,0,13,5,10,14,15,8,12,4,9,1,2,15,5,1,3,7,14,6,9,11,8,12,2,10,0,4,13,8,6,4,1,3,11,15,0,5,12,2,13,9,7,10,14,12,15,10,4,1,5,8,7,6,2,13,14,0,3,9,11]),g=a.create([11,14,15,12,5,8,7,9,11,13,14,15,6,7,9,8,7,6,8,13,11,9,7,15,7,12,15,9,11,7,13,12,11,13,6,7,14,9,13,15,14,8,13,6,5,12,7,5,11,12,14,15,14,15,9,8,9,14,5,6,8,6,5,12,9,15,5,11,6,8,13,12,5,12,13,14,11,8,5,6]),m=a.create([8,9,9,11,13,15,15,5,7,7,8,11,14,14,12,6,9,13,15,7,12,8,9,11,7,7,12,7,6,15,13,11,9,7,15,11,8,6,6,14,12,13,5,14,13,13,7,5,15,5,8,11,14,14,6,14,6,9,12,9,12,5,15,8,8,5,12,9,12,5,14,6,8,13,6,5,15,13,11,11]),y=a.create([0,1518500249,1859775393,2400959708,2840853838]),w=a.create([1352829926,1548603684,1836072691,2053994217,0]),S=c.RIPEMD160=u.extend({_doReset:function(){this._hash=a.create([1732584193,4023233417,2562383102,271733878,3285377520])},_doProcessBlock:function(q,U){for(var V=0;V<16;V++){var tt=U+V,J=q[tt];q[tt]=(J<<8|J>>>24)&16711935|(J<<24|J>>>8)&4278255360}var O=this._hash.words,G=y.words,et=w.words,st=h.words,pt=f.words,nt=g.words,at=m.words,ht,bt,St,K,P,Y,j,ut,ft,mt;Y=ht=O[0],j=bt=O[1],ut=St=O[2],ft=K=O[3],mt=P=O[4];for(var At,V=0;V<80;V+=1)At=ht+q[U+st[V]]|0,V<16?At+=T(bt,St,K)+G[0]:V<32?At+=C(bt,St,K)+G[1]:V<48?At+=D(bt,St,K)+G[2]:V<64?At+=R(bt,St,K)+G[3]:At+=I(bt,St,K)+G[4],At=At|0,At=F(At,nt[V]),At=At+P|0,ht=P,P=K,K=F(St,10),St=bt,bt=At,At=Y+q[U+pt[V]]|0,V<16?At+=I(j,ut,ft)+et[0]:V<32?At+=R(j,ut,ft)+et[1]:V<48?At+=D(j,ut,ft)+et[2]:V<64?At+=C(j,ut,ft)+et[3]:At+=T(j,ut,ft)+et[4],At=At|0,At=F(At,at[V]),At=At+mt|0,Y=mt,mt=ft,ft=F(ut,10),ut=j,j=At;At=O[1]+St+ft|0,O[1]=O[2]+K+mt|0,O[2]=O[3]+P+Y|0,O[3]=O[4]+ht+j|0,O[4]=O[0]+bt+ut|0,O[0]=At},_doFinalize:function(){var q=this._data,U=q.words,V=this._nDataBytes*8,tt=q.sigBytes*8;U[tt>>>5]|=128<<24-tt%32,U[(tt+64>>>9<<4)+14]=(V<<8|V>>>24)&16711935|(V<<24|V>>>8)&4278255360,q.sigBytes=(U.length+1)*4,this._process();for(var J=this._hash,O=J.words,G=0;G<5;G++){var et=O[G];O[G]=(et<<8|et>>>24)&16711935|(et<<24|et>>>8)&4278255360}return J},clone:function(){var q=u.clone.call(this);return q._hash=this._hash.clone(),q}});function T(q,U,V){return q^U^V}function C(q,U,V){return q&U|~q&V}function D(q,U,V){return(q|~U)^V}function R(q,U,V){return q&V|U&~V}function I(q,U,V){return q^(U|~V)}function F(q,U){return q<<U|q>>>32-U}r.RIPEMD160=u._createHelper(S),r.HmacRIPEMD160=u._createHmacHelper(S)})(),e.RIPEMD160})})(vb)),vb.exports}var yb={exports:{}},eG=yb.exports,S8;function pC(){return S8||(S8=1,(function(i,t){(function(e,n){i.exports=n(An())})(eG,function(e){(function(){var n=e,r=n.lib,s=r.Base,a=n.enc,u=a.Utf8,c=n.algo;c.HMAC=s.extend({init:function(h,f){h=this._hasher=new h.init,typeof f=="string"&&(f=u.parse(f));var g=h.blockSize,m=g*4;f.sigBytes>m&&(f=h.finalize(f)),f.clamp();for(var y=this._oKey=f.clone(),w=this._iKey=f.clone(),S=y.words,T=w.words,C=0;C<g;C++)S[C]^=1549556828,T[C]^=909522486;y.sigBytes=w.sigBytes=m,this.reset()},reset:function(){var h=this._hasher;h.reset(),h.update(this._iKey)},update:function(h){return this._hasher.update(h),this},finalize:function(h){var f=this._hasher,g=f.finalize(h);f.reset();var m=f.finalize(this._oKey.clone().concat(g));return m}})})()})})(yb)),yb.exports}var xb={exports:{}},nG=xb.exports,E8;function iG(){return E8||(E8=1,(function(i,t){(function(e,n,r){i.exports=n(An(),dC(),pC())})(nG,function(e){return(function(){var n=e,r=n.lib,s=r.Base,a=r.WordArray,u=n.algo,c=u.SHA256,h=u.HMAC,f=u.PBKDF2=s.extend({cfg:s.extend({keySize:128/32,hasher:c,iterations:25e4}),init:function(g){this.cfg=this.cfg.extend(g)},compute:function(g,m){for(var y=this.cfg,w=h.create(y.hasher,g),S=a.create(),T=a.create([1]),C=S.words,D=T.words,R=y.keySize,I=y.iterations;C.length<R;){var F=w.update(m).finalize(T);w.reset();for(var q=F.words,U=q.length,V=F,tt=1;tt<I;tt++){V=w.finalize(V),w.reset();for(var J=V.words,O=0;O<U;O++)q[O]^=J[O]}S.concat(F),D[0]++}return S.sigBytes=R*4,S}});n.PBKDF2=function(g,m,y){return f.create(y).compute(g,m)}})(),e.PBKDF2})})(xb)),xb.exports}var bb={exports:{}},rG=bb.exports,C8;function Md(){return C8||(C8=1,(function(i,t){(function(e,n,r){i.exports=n(An(),qL(),pC())})(rG,function(e){return(function(){var n=e,r=n.lib,s=r.Base,a=r.WordArray,u=n.algo,c=u.MD5,h=u.EvpKDF=s.extend({cfg:s.extend({keySize:128/32,hasher:c,iterations:1}),init:function(f){this.cfg=this.cfg.extend(f)},compute:function(f,g){for(var m,y=this.cfg,w=y.hasher.create(),S=a.create(),T=S.words,C=y.keySize,D=y.iterations;T.length<C;){m&&w.update(m),m=w.update(f).finalize(g),w.reset();for(var R=1;R<D;R++)m=w.finalize(m),w.reset();S.concat(m)}return S.sigBytes=C*4,S}});n.EvpKDF=function(f,g,m){return h.create(m).compute(f,g)}})(),e.EvpKDF})})(bb)),bb.exports}var Ab={exports:{}},sG=Ab.exports,T8;function es(){return T8||(T8=1,(function(i,t){(function(e,n,r){i.exports=n(An(),Md())})(sG,function(e){e.lib.Cipher||(function(n){var r=e,s=r.lib,a=s.Base,u=s.WordArray,c=s.BufferedBlockAlgorithm,h=r.enc;h.Utf8;var f=h.Base64,g=r.algo,m=g.EvpKDF,y=s.Cipher=c.extend({cfg:a.extend(),createEncryptor:function(J,O){return this.create(this._ENC_XFORM_MODE,J,O)},createDecryptor:function(J,O){return this.create(this._DEC_XFORM_MODE,J,O)},init:function(J,O,G){this.cfg=this.cfg.extend(G),this._xformMode=J,this._key=O,this.reset()},reset:function(){c.reset.call(this),this._doReset()},process:function(J){return this._append(J),this._process()},finalize:function(J){J&&this._append(J);var O=this._doFinalize();return O},keySize:128/32,ivSize:128/32,_ENC_XFORM_MODE:1,_DEC_XFORM_MODE:2,_createHelper:(function(){function J(O){return typeof O=="string"?tt:q}return function(O){return{encrypt:function(G,et,st){return J(et).encrypt(O,G,et,st)},decrypt:function(G,et,st){return J(et).decrypt(O,G,et,st)}}}})()});s.StreamCipher=y.extend({_doFinalize:function(){var J=this._process(!0);return J},blockSize:1});var w=r.mode={},S=s.BlockCipherMode=a.extend({createEncryptor:function(J,O){return this.Encryptor.create(J,O)},createDecryptor:function(J,O){return this.Decryptor.create(J,O)},init:function(J,O){this._cipher=J,this._iv=O}}),T=w.CBC=(function(){var J=S.extend();J.Encryptor=J.extend({processBlock:function(G,et){var st=this._cipher,pt=st.blockSize;O.call(this,G,et,pt),st.encryptBlock(G,et),this._prevBlock=G.slice(et,et+pt)}}),J.Decryptor=J.extend({processBlock:function(G,et){var st=this._cipher,pt=st.blockSize,nt=G.slice(et,et+pt);st.decryptBlock(G,et),O.call(this,G,et,pt),this._prevBlock=nt}});function O(G,et,st){var pt,nt=this._iv;nt?(pt=nt,this._iv=n):pt=this._prevBlock;for(var at=0;at<st;at++)G[et+at]^=pt[at]}return J})(),C=r.pad={},D=C.Pkcs7={pad:function(J,O){for(var G=O*4,et=G-J.sigBytes%G,st=et<<24|et<<16|et<<8|et,pt=[],nt=0;nt<et;nt+=4)pt.push(st);var at=u.create(pt,et);J.concat(at)},unpad:function(J){var O=J.words[J.sigBytes-1>>>2]&255;J.sigBytes-=O}};s.BlockCipher=y.extend({cfg:y.cfg.extend({mode:T,padding:D}),reset:function(){var J;y.reset.call(this);var O=this.cfg,G=O.iv,et=O.mode;this._xformMode==this._ENC_XFORM_MODE?J=et.createEncryptor:(J=et.createDecryptor,this._minBufferSize=1),this._mode&&this._mode.__creator==J?this._mode.init(this,G&&G.words):(this._mode=J.call(et,this,G&&G.words),this._mode.__creator=J)},_doProcessBlock:function(J,O){this._mode.processBlock(J,O)},_doFinalize:function(){var J,O=this.cfg.padding;return this._xformMode==this._ENC_XFORM_MODE?(O.pad(this._data,this.blockSize),J=this._process(!0)):(J=this._process(!0),O.unpad(J)),J},blockSize:128/32});var R=s.CipherParams=a.extend({init:function(J){this.mixIn(J)},toString:function(J){return(J||this.formatter).stringify(this)}}),I=r.format={},F=I.OpenSSL={stringify:function(J){var O,G=J.ciphertext,et=J.salt;return et?O=u.create([1398893684,1701076831]).concat(et).concat(G):O=G,O.toString(f)},parse:function(J){var O,G=f.parse(J),et=G.words;return et[0]==1398893684&&et[1]==1701076831&&(O=u.create(et.slice(2,4)),et.splice(0,4),G.sigBytes-=16),R.create({ciphertext:G,salt:O})}},q=s.SerializableCipher=a.extend({cfg:a.extend({format:F}),encrypt:function(J,O,G,et){et=this.cfg.extend(et);var st=J.createEncryptor(G,et),pt=st.finalize(O),nt=st.cfg;return R.create({ciphertext:pt,key:G,iv:nt.iv,algorithm:J,mode:nt.mode,padding:nt.padding,blockSize:J.blockSize,formatter:et.format})},decrypt:function(J,O,G,et){et=this.cfg.extend(et),O=this._parse(O,et.format);var st=J.createDecryptor(G,et).finalize(O.ciphertext);return st},_parse:function(J,O){return typeof J=="string"?O.parse(J,this):J}}),U=r.kdf={},V=U.OpenSSL={execute:function(J,O,G,et,st){if(et||(et=u.random(64/8)),st)var pt=m.create({keySize:O+G,hasher:st}).compute(J,et);else var pt=m.create({keySize:O+G}).compute(J,et);var nt=u.create(pt.words.slice(O),G*4);return pt.sigBytes=O*4,R.create({key:pt,iv:nt,salt:et})}},tt=s.PasswordBasedCipher=q.extend({cfg:q.cfg.extend({kdf:V}),encrypt:function(J,O,G,et){et=this.cfg.extend(et);var st=et.kdf.execute(G,J.keySize,J.ivSize,et.salt,et.hasher);et.iv=st.iv;var pt=q.encrypt.call(this,J,O,st.key,et);return pt.mixIn(st),pt},decrypt:function(J,O,G,et){et=this.cfg.extend(et),O=this._parse(O,et.format);var st=et.kdf.execute(G,J.keySize,J.ivSize,O.salt,et.hasher);et.iv=st.iv;var pt=q.decrypt.call(this,J,O,st.key,et);return pt}})})()})})(Ab)),Ab.exports}var _b={exports:{}},oG=_b.exports,N8;function aG(){return N8||(N8=1,(function(i,t){(function(e,n,r){i.exports=n(An(),es())})(oG,function(e){return e.mode.CFB=(function(){var n=e.lib.BlockCipherMode.extend();n.Encryptor=n.extend({processBlock:function(s,a){var u=this._cipher,c=u.blockSize;r.call(this,s,a,c,u),this._prevBlock=s.slice(a,a+c)}}),n.Decryptor=n.extend({processBlock:function(s,a){var u=this._cipher,c=u.blockSize,h=s.slice(a,a+c);r.call(this,s,a,c,u),this._prevBlock=h}});function r(s,a,u,c){var h,f=this._iv;f?(h=f.slice(0),this._iv=void 0):h=this._prevBlock,c.encryptBlock(h,0);for(var g=0;g<u;g++)s[a+g]^=h[g]}return n})(),e.mode.CFB})})(_b)),_b.exports}var wb={exports:{}},lG=wb.exports,R8;function uG(){return R8||(R8=1,(function(i,t){(function(e,n,r){i.exports=n(An(),es())})(lG,function(e){return e.mode.CTR=(function(){var n=e.lib.BlockCipherMode.extend(),r=n.Encryptor=n.extend({processBlock:function(s,a){var u=this._cipher,c=u.blockSize,h=this._iv,f=this._counter;h&&(f=this._counter=h.slice(0),this._iv=void 0);var g=f.slice(0);u.encryptBlock(g,0),f[c-1]=f[c-1]+1|0;for(var m=0;m<c;m++)s[a+m]^=g[m]}});return n.Decryptor=r,n})(),e.mode.CTR})})(wb)),wb.exports}var Sb={exports:{}},cG=Sb.exports,D8;function hG(){return D8||(D8=1,(function(i,t){(function(e,n,r){i.exports=n(An(),es())})(cG,function(e){/** @preserve
 * Counter block mode compatible with  Dr Brian Gladman fileenc.c
 * derived from CryptoJS.mode.CTR
 * Jan Hruby jhruby.web@gmail.com
 */return e.mode.CTRGladman=(function(){var n=e.lib.BlockCipherMode.extend();function r(u){if((u>>24&255)===255){var c=u>>16&255,h=u>>8&255,f=u&255;c===255?(c=0,h===255?(h=0,f===255?f=0:++f):++h):++c,u=0,u+=c<<16,u+=h<<8,u+=f}else u+=1<<24;return u}function s(u){return(u[0]=r(u[0]))===0&&(u[1]=r(u[1])),u}var a=n.Encryptor=n.extend({processBlock:function(u,c){var h=this._cipher,f=h.blockSize,g=this._iv,m=this._counter;g&&(m=this._counter=g.slice(0),this._iv=void 0),s(m);var y=m.slice(0);h.encryptBlock(y,0);for(var w=0;w<f;w++)u[c+w]^=y[w]}});return n.Decryptor=a,n})(),e.mode.CTRGladman})})(Sb)),Sb.exports}var Eb={exports:{}},fG=Eb.exports,L8;function dG(){return L8||(L8=1,(function(i,t){(function(e,n,r){i.exports=n(An(),es())})(fG,function(e){return e.mode.OFB=(function(){var n=e.lib.BlockCipherMode.extend(),r=n.Encryptor=n.extend({processBlock:function(s,a){var u=this._cipher,c=u.blockSize,h=this._iv,f=this._keystream;h&&(f=this._keystream=h.slice(0),this._iv=void 0),u.encryptBlock(f,0);for(var g=0;g<c;g++)s[a+g]^=f[g]}});return n.Decryptor=r,n})(),e.mode.OFB})})(Eb)),Eb.exports}var Cb={exports:{}},pG=Cb.exports,M8;function gG(){return M8||(M8=1,(function(i,t){(function(e,n,r){i.exports=n(An(),es())})(pG,function(e){return e.mode.ECB=(function(){var n=e.lib.BlockCipherMode.extend();return n.Encryptor=n.extend({processBlock:function(r,s){this._cipher.encryptBlock(r,s)}}),n.Decryptor=n.extend({processBlock:function(r,s){this._cipher.decryptBlock(r,s)}}),n})(),e.mode.ECB})})(Cb)),Cb.exports}var Tb={exports:{}},mG=Tb.exports,I8;function vG(){return I8||(I8=1,(function(i,t){(function(e,n,r){i.exports=n(An(),es())})(mG,function(e){return e.pad.AnsiX923={pad:function(n,r){var s=n.sigBytes,a=r*4,u=a-s%a,c=s+u-1;n.clamp(),n.words[c>>>2]|=u<<24-c%4*8,n.sigBytes+=u},unpad:function(n){var r=n.words[n.sigBytes-1>>>2]&255;n.sigBytes-=r}},e.pad.Ansix923})})(Tb)),Tb.exports}var Nb={exports:{}},yG=Nb.exports,P8;function xG(){return P8||(P8=1,(function(i,t){(function(e,n,r){i.exports=n(An(),es())})(yG,function(e){return e.pad.Iso10126={pad:function(n,r){var s=r*4,a=s-n.sigBytes%s;n.concat(e.lib.WordArray.random(a-1)).concat(e.lib.WordArray.create([a<<24],1))},unpad:function(n){var r=n.words[n.sigBytes-1>>>2]&255;n.sigBytes-=r}},e.pad.Iso10126})})(Nb)),Nb.exports}var Rb={exports:{}},bG=Rb.exports,k8;function AG(){return k8||(k8=1,(function(i,t){(function(e,n,r){i.exports=n(An(),es())})(bG,function(e){return e.pad.Iso97971={pad:function(n,r){n.concat(e.lib.WordArray.create([2147483648],1)),e.pad.ZeroPadding.pad(n,r)},unpad:function(n){e.pad.ZeroPadding.unpad(n),n.sigBytes--}},e.pad.Iso97971})})(Rb)),Rb.exports}var Db={exports:{}},_G=Db.exports,F8;function wG(){return F8||(F8=1,(function(i,t){(function(e,n,r){i.exports=n(An(),es())})(_G,function(e){return e.pad.ZeroPadding={pad:function(n,r){var s=r*4;n.clamp(),n.sigBytes+=s-(n.sigBytes%s||s)},unpad:function(n){for(var r=n.words,s=n.sigBytes-1,s=n.sigBytes-1;s>=0;s--)if(r[s>>>2]>>>24-s%4*8&255){n.sigBytes=s+1;break}}},e.pad.ZeroPadding})})(Db)),Db.exports}var Lb={exports:{}},SG=Lb.exports,B8;function EG(){return B8||(B8=1,(function(i,t){(function(e,n,r){i.exports=n(An(),es())})(SG,function(e){return e.pad.NoPadding={pad:function(){},unpad:function(){}},e.pad.NoPadding})})(Lb)),Lb.exports}var Mb={exports:{}},CG=Mb.exports,O8;function TG(){return O8||(O8=1,(function(i,t){(function(e,n,r){i.exports=n(An(),es())})(CG,function(e){return(function(n){var r=e,s=r.lib,a=s.CipherParams,u=r.enc,c=u.Hex,h=r.format;h.Hex={stringify:function(f){return f.ciphertext.toString(c)},parse:function(f){var g=c.parse(f);return a.create({ciphertext:g})}}})(),e.format.Hex})})(Mb)),Mb.exports}var Ib={exports:{}},NG=Ib.exports,U8;function RG(){return U8||(U8=1,(function(i,t){(function(e,n,r){i.exports=n(An(),qp(),zp(),Md(),es())})(NG,function(e){return(function(){var n=e,r=n.lib,s=r.BlockCipher,a=n.algo,u=[],c=[],h=[],f=[],g=[],m=[],y=[],w=[],S=[],T=[];(function(){for(var R=[],I=0;I<256;I++)I<128?R[I]=I<<1:R[I]=I<<1^283;for(var F=0,q=0,I=0;I<256;I++){var U=q^q<<1^q<<2^q<<3^q<<4;U=U>>>8^U&255^99,u[F]=U,c[U]=F;var V=R[F],tt=R[V],J=R[tt],O=R[U]*257^U*16843008;h[F]=O<<24|O>>>8,f[F]=O<<16|O>>>16,g[F]=O<<8|O>>>24,m[F]=O;var O=J*16843009^tt*65537^V*257^F*16843008;y[U]=O<<24|O>>>8,w[U]=O<<16|O>>>16,S[U]=O<<8|O>>>24,T[U]=O,F?(F=V^R[R[R[J^V]]],q^=R[R[q]]):F=q=1}})();var C=[0,1,2,4,8,16,32,64,128,27,54],D=a.AES=s.extend({_doReset:function(){var R;if(!(this._nRounds&&this._keyPriorReset===this._key)){for(var I=this._keyPriorReset=this._key,F=I.words,q=I.sigBytes/4,U=this._nRounds=q+6,V=(U+1)*4,tt=this._keySchedule=[],J=0;J<V;J++)J<q?tt[J]=F[J]:(R=tt[J-1],J%q?q>6&&J%q==4&&(R=u[R>>>24]<<24|u[R>>>16&255]<<16|u[R>>>8&255]<<8|u[R&255]):(R=R<<8|R>>>24,R=u[R>>>24]<<24|u[R>>>16&255]<<16|u[R>>>8&255]<<8|u[R&255],R^=C[J/q|0]<<24),tt[J]=tt[J-q]^R);for(var O=this._invKeySchedule=[],G=0;G<V;G++){var J=V-G;if(G%4)var R=tt[J];else var R=tt[J-4];G<4||J<=4?O[G]=R:O[G]=y[u[R>>>24]]^w[u[R>>>16&255]]^S[u[R>>>8&255]]^T[u[R&255]]}}},encryptBlock:function(R,I){this._doCryptBlock(R,I,this._keySchedule,h,f,g,m,u)},decryptBlock:function(R,I){var F=R[I+1];R[I+1]=R[I+3],R[I+3]=F,this._doCryptBlock(R,I,this._invKeySchedule,y,w,S,T,c);var F=R[I+1];R[I+1]=R[I+3],R[I+3]=F},_doCryptBlock:function(R,I,F,q,U,V,tt,J){for(var O=this._nRounds,G=R[I]^F[0],et=R[I+1]^F[1],st=R[I+2]^F[2],pt=R[I+3]^F[3],nt=4,at=1;at<O;at++){var ht=q[G>>>24]^U[et>>>16&255]^V[st>>>8&255]^tt[pt&255]^F[nt++],bt=q[et>>>24]^U[st>>>16&255]^V[pt>>>8&255]^tt[G&255]^F[nt++],St=q[st>>>24]^U[pt>>>16&255]^V[G>>>8&255]^tt[et&255]^F[nt++],K=q[pt>>>24]^U[G>>>16&255]^V[et>>>8&255]^tt[st&255]^F[nt++];G=ht,et=bt,st=St,pt=K}var ht=(J[G>>>24]<<24|J[et>>>16&255]<<16|J[st>>>8&255]<<8|J[pt&255])^F[nt++],bt=(J[et>>>24]<<24|J[st>>>16&255]<<16|J[pt>>>8&255]<<8|J[G&255])^F[nt++],St=(J[st>>>24]<<24|J[pt>>>16&255]<<16|J[G>>>8&255]<<8|J[et&255])^F[nt++],K=(J[pt>>>24]<<24|J[G>>>16&255]<<16|J[et>>>8&255]<<8|J[st&255])^F[nt++];R[I]=ht,R[I+1]=bt,R[I+2]=St,R[I+3]=K},keySize:256/32});n.AES=s._createHelper(D)})(),e.AES})})(Ib)),Ib.exports}var Pb={exports:{}},DG=Pb.exports,H8;function LG(){return H8||(H8=1,(function(i,t){(function(e,n,r){i.exports=n(An(),qp(),zp(),Md(),es())})(DG,function(e){return(function(){var n=e,r=n.lib,s=r.WordArray,a=r.BlockCipher,u=n.algo,c=[57,49,41,33,25,17,9,1,58,50,42,34,26,18,10,2,59,51,43,35,27,19,11,3,60,52,44,36,63,55,47,39,31,23,15,7,62,54,46,38,30,22,14,6,61,53,45,37,29,21,13,5,28,20,12,4],h=[14,17,11,24,1,5,3,28,15,6,21,10,23,19,12,4,26,8,16,7,27,20,13,2,41,52,31,37,47,55,30,40,51,45,33,48,44,49,39,56,34,53,46,42,50,36,29,32],f=[1,2,4,6,8,10,12,14,15,17,19,21,23,25,27,28],g=[{0:8421888,268435456:32768,536870912:8421378,805306368:2,1073741824:512,1342177280:8421890,1610612736:8389122,1879048192:8388608,2147483648:514,2415919104:8389120,2684354560:33280,2952790016:8421376,3221225472:32770,3489660928:8388610,3758096384:0,4026531840:33282,134217728:0,402653184:8421890,671088640:33282,939524096:32768,1207959552:8421888,1476395008:512,1744830464:8421378,2013265920:2,2281701376:8389120,2550136832:33280,2818572288:8421376,3087007744:8389122,3355443200:8388610,3623878656:32770,3892314112:514,4160749568:8388608,1:32768,268435457:2,536870913:8421888,805306369:8388608,1073741825:8421378,1342177281:33280,1610612737:512,1879048193:8389122,2147483649:8421890,2415919105:8421376,2684354561:8388610,2952790017:33282,3221225473:514,3489660929:8389120,3758096385:32770,4026531841:0,134217729:8421890,402653185:8421376,671088641:8388608,939524097:512,1207959553:32768,1476395009:8388610,1744830465:2,2013265921:33282,2281701377:32770,2550136833:8389122,2818572289:514,3087007745:8421888,3355443201:8389120,3623878657:0,3892314113:33280,4160749569:8421378},{0:1074282512,16777216:16384,33554432:524288,50331648:1074266128,67108864:1073741840,83886080:1074282496,100663296:1073758208,117440512:16,134217728:540672,150994944:1073758224,167772160:1073741824,184549376:540688,201326592:524304,218103808:0,234881024:16400,251658240:1074266112,8388608:1073758208,25165824:540688,41943040:16,58720256:1073758224,75497472:1074282512,92274688:1073741824,109051904:524288,125829120:1074266128,142606336:524304,159383552:0,176160768:16384,192937984:1074266112,209715200:1073741840,226492416:540672,243269632:1074282496,260046848:16400,268435456:0,285212672:1074266128,301989888:1073758224,318767104:1074282496,335544320:1074266112,352321536:16,369098752:540688,385875968:16384,402653184:16400,419430400:524288,436207616:524304,452984832:1073741840,469762048:540672,486539264:1073758208,503316480:1073741824,520093696:1074282512,276824064:540688,293601280:524288,310378496:1074266112,327155712:16384,343932928:1073758208,360710144:1074282512,377487360:16,394264576:1073741824,411041792:1074282496,427819008:1073741840,444596224:1073758224,461373440:524304,478150656:0,494927872:16400,511705088:1074266128,528482304:540672},{0:260,1048576:0,2097152:67109120,3145728:65796,4194304:65540,5242880:67108868,6291456:67174660,7340032:67174400,8388608:67108864,9437184:67174656,10485760:65792,11534336:67174404,12582912:67109124,13631488:65536,14680064:4,15728640:256,524288:67174656,1572864:67174404,2621440:0,3670016:67109120,4718592:67108868,5767168:65536,6815744:65540,7864320:260,8912896:4,9961472:256,11010048:67174400,12058624:65796,13107200:65792,14155776:67109124,15204352:67174660,16252928:67108864,16777216:67174656,17825792:65540,18874368:65536,19922944:67109120,20971520:256,22020096:67174660,23068672:67108868,24117248:0,25165824:67109124,26214400:67108864,27262976:4,28311552:65792,29360128:67174400,30408704:260,31457280:65796,32505856:67174404,17301504:67108864,18350080:260,19398656:67174656,20447232:0,21495808:65540,22544384:67109120,23592960:256,24641536:67174404,25690112:65536,26738688:67174660,27787264:65796,28835840:67108868,29884416:67109124,30932992:67174400,31981568:4,33030144:65792},{0:2151682048,65536:2147487808,131072:4198464,196608:2151677952,262144:0,327680:4198400,393216:2147483712,458752:4194368,524288:2147483648,589824:4194304,655360:64,720896:2147487744,786432:2151678016,851968:4160,917504:4096,983040:2151682112,32768:2147487808,98304:64,163840:2151678016,229376:2147487744,294912:4198400,360448:2151682112,425984:0,491520:2151677952,557056:4096,622592:2151682048,688128:4194304,753664:4160,819200:2147483648,884736:4194368,950272:4198464,1015808:2147483712,1048576:4194368,1114112:4198400,1179648:2147483712,1245184:0,1310720:4160,1376256:2151678016,1441792:2151682048,1507328:2147487808,1572864:2151682112,1638400:2147483648,1703936:2151677952,1769472:4198464,1835008:2147487744,1900544:4194304,1966080:64,2031616:4096,1081344:2151677952,1146880:2151682112,1212416:0,1277952:4198400,1343488:4194368,1409024:2147483648,1474560:2147487808,1540096:64,1605632:2147483712,1671168:4096,1736704:2147487744,1802240:2151678016,1867776:4160,1933312:2151682048,1998848:4194304,2064384:4198464},{0:128,4096:17039360,8192:262144,12288:536870912,16384:537133184,20480:16777344,24576:553648256,28672:262272,32768:16777216,36864:537133056,40960:536871040,45056:553910400,49152:553910272,53248:0,57344:17039488,61440:553648128,2048:17039488,6144:553648256,10240:128,14336:17039360,18432:262144,22528:537133184,26624:553910272,30720:536870912,34816:537133056,38912:0,43008:553910400,47104:16777344,51200:536871040,55296:553648128,59392:16777216,63488:262272,65536:262144,69632:128,73728:536870912,77824:553648256,81920:16777344,86016:553910272,90112:537133184,94208:16777216,98304:553910400,102400:553648128,106496:17039360,110592:537133056,114688:262272,118784:536871040,122880:0,126976:17039488,67584:553648256,71680:16777216,75776:17039360,79872:537133184,83968:536870912,88064:17039488,92160:128,96256:553910272,100352:262272,104448:553910400,108544:0,112640:553648128,116736:16777344,120832:262144,124928:537133056,129024:536871040},{0:268435464,256:8192,512:270532608,768:270540808,1024:268443648,1280:2097152,1536:2097160,1792:268435456,2048:0,2304:268443656,2560:2105344,2816:8,3072:270532616,3328:2105352,3584:8200,3840:270540800,128:270532608,384:270540808,640:8,896:2097152,1152:2105352,1408:268435464,1664:268443648,1920:8200,2176:2097160,2432:8192,2688:268443656,2944:270532616,3200:0,3456:270540800,3712:2105344,3968:268435456,4096:268443648,4352:270532616,4608:270540808,4864:8200,5120:2097152,5376:268435456,5632:268435464,5888:2105344,6144:2105352,6400:0,6656:8,6912:270532608,7168:8192,7424:268443656,7680:270540800,7936:2097160,4224:8,4480:2105344,4736:2097152,4992:268435464,5248:268443648,5504:8200,5760:270540808,6016:270532608,6272:270540800,6528:270532616,6784:8192,7040:2105352,7296:2097160,7552:0,7808:268435456,8064:268443656},{0:1048576,16:33555457,32:1024,48:1049601,64:34604033,80:0,96:1,112:34603009,128:33555456,144:1048577,160:33554433,176:34604032,192:34603008,208:1025,224:1049600,240:33554432,8:34603009,24:0,40:33555457,56:34604032,72:1048576,88:33554433,104:33554432,120:1025,136:1049601,152:33555456,168:34603008,184:1048577,200:1024,216:34604033,232:1,248:1049600,256:33554432,272:1048576,288:33555457,304:34603009,320:1048577,336:33555456,352:34604032,368:1049601,384:1025,400:34604033,416:1049600,432:1,448:0,464:34603008,480:33554433,496:1024,264:1049600,280:33555457,296:34603009,312:1,328:33554432,344:1048576,360:1025,376:34604032,392:33554433,408:34603008,424:0,440:34604033,456:1049601,472:1024,488:33555456,504:1048577},{0:134219808,1:131072,2:134217728,3:32,4:131104,5:134350880,6:134350848,7:2048,8:134348800,9:134219776,10:133120,11:134348832,12:2080,13:0,14:134217760,15:133152,2147483648:2048,2147483649:134350880,2147483650:134219808,2147483651:134217728,2147483652:134348800,2147483653:133120,2147483654:133152,2147483655:32,2147483656:134217760,2147483657:2080,2147483658:131104,2147483659:134350848,2147483660:0,2147483661:134348832,2147483662:134219776,2147483663:131072,16:133152,17:134350848,18:32,19:2048,20:134219776,21:134217760,22:134348832,23:131072,24:0,25:131104,26:134348800,27:134219808,28:134350880,29:133120,30:2080,31:134217728,2147483664:131072,2147483665:2048,2147483666:134348832,2147483667:133152,2147483668:32,2147483669:134348800,2147483670:134217728,2147483671:134219808,2147483672:134350880,2147483673:134217760,2147483674:134219776,2147483675:0,2147483676:133120,2147483677:2080,2147483678:131104,2147483679:134350848}],m=[4160749569,528482304,33030144,2064384,129024,8064,504,2147483679],y=u.DES=a.extend({_doReset:function(){for(var C=this._key,D=C.words,R=[],I=0;I<56;I++){var F=c[I]-1;R[I]=D[F>>>5]>>>31-F%32&1}for(var q=this._subKeys=[],U=0;U<16;U++){for(var V=q[U]=[],tt=f[U],I=0;I<24;I++)V[I/6|0]|=R[(h[I]-1+tt)%28]<<31-I%6,V[4+(I/6|0)]|=R[28+(h[I+24]-1+tt)%28]<<31-I%6;V[0]=V[0]<<1|V[0]>>>31;for(var I=1;I<7;I++)V[I]=V[I]>>>(I-1)*4+3;V[7]=V[7]<<5|V[7]>>>27}for(var J=this._invSubKeys=[],I=0;I<16;I++)J[I]=q[15-I]},encryptBlock:function(C,D){this._doCryptBlock(C,D,this._subKeys)},decryptBlock:function(C,D){this._doCryptBlock(C,D,this._invSubKeys)},_doCryptBlock:function(C,D,R){this._lBlock=C[D],this._rBlock=C[D+1],w.call(this,4,252645135),w.call(this,16,65535),S.call(this,2,858993459),S.call(this,8,16711935),w.call(this,1,1431655765);for(var I=0;I<16;I++){for(var F=R[I],q=this._lBlock,U=this._rBlock,V=0,tt=0;tt<8;tt++)V|=g[tt][((U^F[tt])&m[tt])>>>0];this._lBlock=U,this._rBlock=q^V}var J=this._lBlock;this._lBlock=this._rBlock,this._rBlock=J,w.call(this,1,1431655765),S.call(this,8,16711935),S.call(this,2,858993459),w.call(this,16,65535),w.call(this,4,252645135),C[D]=this._lBlock,C[D+1]=this._rBlock},keySize:64/32,ivSize:64/32,blockSize:64/32});function w(C,D){var R=(this._lBlock>>>C^this._rBlock)&D;this._rBlock^=R,this._lBlock^=R<<C}function S(C,D){var R=(this._rBlock>>>C^this._lBlock)&D;this._lBlock^=R,this._rBlock^=R<<C}n.DES=a._createHelper(y);var T=u.TripleDES=a.extend({_doReset:function(){var C=this._key,D=C.words;if(D.length!==2&&D.length!==4&&D.length<6)throw new Error("Invalid key length - 3DES requires the key length to be 64, 128, 192 or >192.");var R=D.slice(0,2),I=D.length<4?D.slice(0,2):D.slice(2,4),F=D.length<6?D.slice(0,2):D.slice(4,6);this._des1=y.createEncryptor(s.create(R)),this._des2=y.createEncryptor(s.create(I)),this._des3=y.createEncryptor(s.create(F))},encryptBlock:function(C,D){this._des1.encryptBlock(C,D),this._des2.decryptBlock(C,D),this._des3.encryptBlock(C,D)},decryptBlock:function(C,D){this._des3.decryptBlock(C,D),this._des2.encryptBlock(C,D),this._des1.decryptBlock(C,D)},keySize:192/32,ivSize:64/32,blockSize:64/32});n.TripleDES=a._createHelper(T)})(),e.TripleDES})})(Pb)),Pb.exports}var kb={exports:{}},MG=kb.exports,q8;function IG(){return q8||(q8=1,(function(i,t){(function(e,n,r){i.exports=n(An(),qp(),zp(),Md(),es())})(MG,function(e){return(function(){var n=e,r=n.lib,s=r.StreamCipher,a=n.algo,u=a.RC4=s.extend({_doReset:function(){for(var f=this._key,g=f.words,m=f.sigBytes,y=this._S=[],w=0;w<256;w++)y[w]=w;for(var w=0,S=0;w<256;w++){var T=w%m,C=g[T>>>2]>>>24-T%4*8&255;S=(S+y[w]+C)%256;var D=y[w];y[w]=y[S],y[S]=D}this._i=this._j=0},_doProcessBlock:function(f,g){f[g]^=c.call(this)},keySize:256/32,ivSize:0});function c(){for(var f=this._S,g=this._i,m=this._j,y=0,w=0;w<4;w++){g=(g+1)%256,m=(m+f[g])%256;var S=f[g];f[g]=f[m],f[m]=S,y|=f[(f[g]+f[m])%256]<<24-w*8}return this._i=g,this._j=m,y}n.RC4=s._createHelper(u);var h=a.RC4Drop=u.extend({cfg:u.cfg.extend({drop:192}),_doReset:function(){u._doReset.call(this);for(var f=this.cfg.drop;f>0;f--)c.call(this)}});n.RC4Drop=s._createHelper(h)})(),e.RC4})})(kb)),kb.exports}var Fb={exports:{}},PG=Fb.exports,z8;function kG(){return z8||(z8=1,(function(i,t){(function(e,n,r){i.exports=n(An(),qp(),zp(),Md(),es())})(PG,function(e){return(function(){var n=e,r=n.lib,s=r.StreamCipher,a=n.algo,u=[],c=[],h=[],f=a.Rabbit=s.extend({_doReset:function(){for(var m=this._key.words,y=this.cfg.iv,w=0;w<4;w++)m[w]=(m[w]<<8|m[w]>>>24)&16711935|(m[w]<<24|m[w]>>>8)&4278255360;var S=this._X=[m[0],m[3]<<16|m[2]>>>16,m[1],m[0]<<16|m[3]>>>16,m[2],m[1]<<16|m[0]>>>16,m[3],m[2]<<16|m[1]>>>16],T=this._C=[m[2]<<16|m[2]>>>16,m[0]&4294901760|m[1]&65535,m[3]<<16|m[3]>>>16,m[1]&4294901760|m[2]&65535,m[0]<<16|m[0]>>>16,m[2]&4294901760|m[3]&65535,m[1]<<16|m[1]>>>16,m[3]&4294901760|m[0]&65535];this._b=0;for(var w=0;w<4;w++)g.call(this);for(var w=0;w<8;w++)T[w]^=S[w+4&7];if(y){var C=y.words,D=C[0],R=C[1],I=(D<<8|D>>>24)&16711935|(D<<24|D>>>8)&4278255360,F=(R<<8|R>>>24)&16711935|(R<<24|R>>>8)&4278255360,q=I>>>16|F&4294901760,U=F<<16|I&65535;T[0]^=I,T[1]^=q,T[2]^=F,T[3]^=U,T[4]^=I,T[5]^=q,T[6]^=F,T[7]^=U;for(var w=0;w<4;w++)g.call(this)}},_doProcessBlock:function(m,y){var w=this._X;g.call(this),u[0]=w[0]^w[5]>>>16^w[3]<<16,u[1]=w[2]^w[7]>>>16^w[5]<<16,u[2]=w[4]^w[1]>>>16^w[7]<<16,u[3]=w[6]^w[3]>>>16^w[1]<<16;for(var S=0;S<4;S++)u[S]=(u[S]<<8|u[S]>>>24)&16711935|(u[S]<<24|u[S]>>>8)&4278255360,m[y+S]^=u[S]},blockSize:128/32,ivSize:64/32});function g(){for(var m=this._X,y=this._C,w=0;w<8;w++)c[w]=y[w];y[0]=y[0]+1295307597+this._b|0,y[1]=y[1]+3545052371+(y[0]>>>0<c[0]>>>0?1:0)|0,y[2]=y[2]+886263092+(y[1]>>>0<c[1]>>>0?1:0)|0,y[3]=y[3]+1295307597+(y[2]>>>0<c[2]>>>0?1:0)|0,y[4]=y[4]+3545052371+(y[3]>>>0<c[3]>>>0?1:0)|0,y[5]=y[5]+886263092+(y[4]>>>0<c[4]>>>0?1:0)|0,y[6]=y[6]+1295307597+(y[5]>>>0<c[5]>>>0?1:0)|0,y[7]=y[7]+3545052371+(y[6]>>>0<c[6]>>>0?1:0)|0,this._b=y[7]>>>0<c[7]>>>0?1:0;for(var w=0;w<8;w++){var S=m[w]+y[w],T=S&65535,C=S>>>16,D=((T*T>>>17)+T*C>>>15)+C*C,R=((S&4294901760)*S|0)+((S&65535)*S|0);h[w]=D^R}m[0]=h[0]+(h[7]<<16|h[7]>>>16)+(h[6]<<16|h[6]>>>16)|0,m[1]=h[1]+(h[0]<<8|h[0]>>>24)+h[7]|0,m[2]=h[2]+(h[1]<<16|h[1]>>>16)+(h[0]<<16|h[0]>>>16)|0,m[3]=h[3]+(h[2]<<8|h[2]>>>24)+h[1]|0,m[4]=h[4]+(h[3]<<16|h[3]>>>16)+(h[2]<<16|h[2]>>>16)|0,m[5]=h[5]+(h[4]<<8|h[4]>>>24)+h[3]|0,m[6]=h[6]+(h[5]<<16|h[5]>>>16)+(h[4]<<16|h[4]>>>16)|0,m[7]=h[7]+(h[6]<<8|h[6]>>>24)+h[5]|0}n.Rabbit=s._createHelper(f)})(),e.Rabbit})})(Fb)),Fb.exports}var Bb={exports:{}},FG=Bb.exports,G8;function BG(){return G8||(G8=1,(function(i,t){(function(e,n,r){i.exports=n(An(),qp(),zp(),Md(),es())})(FG,function(e){return(function(){var n=e,r=n.lib,s=r.StreamCipher,a=n.algo,u=[],c=[],h=[],f=a.RabbitLegacy=s.extend({_doReset:function(){var m=this._key.words,y=this.cfg.iv,w=this._X=[m[0],m[3]<<16|m[2]>>>16,m[1],m[0]<<16|m[3]>>>16,m[2],m[1]<<16|m[0]>>>16,m[3],m[2]<<16|m[1]>>>16],S=this._C=[m[2]<<16|m[2]>>>16,m[0]&4294901760|m[1]&65535,m[3]<<16|m[3]>>>16,m[1]&4294901760|m[2]&65535,m[0]<<16|m[0]>>>16,m[2]&4294901760|m[3]&65535,m[1]<<16|m[1]>>>16,m[3]&4294901760|m[0]&65535];this._b=0;for(var T=0;T<4;T++)g.call(this);for(var T=0;T<8;T++)S[T]^=w[T+4&7];if(y){var C=y.words,D=C[0],R=C[1],I=(D<<8|D>>>24)&16711935|(D<<24|D>>>8)&4278255360,F=(R<<8|R>>>24)&16711935|(R<<24|R>>>8)&4278255360,q=I>>>16|F&4294901760,U=F<<16|I&65535;S[0]^=I,S[1]^=q,S[2]^=F,S[3]^=U,S[4]^=I,S[5]^=q,S[6]^=F,S[7]^=U;for(var T=0;T<4;T++)g.call(this)}},_doProcessBlock:function(m,y){var w=this._X;g.call(this),u[0]=w[0]^w[5]>>>16^w[3]<<16,u[1]=w[2]^w[7]>>>16^w[5]<<16,u[2]=w[4]^w[1]>>>16^w[7]<<16,u[3]=w[6]^w[3]>>>16^w[1]<<16;for(var S=0;S<4;S++)u[S]=(u[S]<<8|u[S]>>>24)&16711935|(u[S]<<24|u[S]>>>8)&4278255360,m[y+S]^=u[S]},blockSize:128/32,ivSize:64/32});function g(){for(var m=this._X,y=this._C,w=0;w<8;w++)c[w]=y[w];y[0]=y[0]+1295307597+this._b|0,y[1]=y[1]+3545052371+(y[0]>>>0<c[0]>>>0?1:0)|0,y[2]=y[2]+886263092+(y[1]>>>0<c[1]>>>0?1:0)|0,y[3]=y[3]+1295307597+(y[2]>>>0<c[2]>>>0?1:0)|0,y[4]=y[4]+3545052371+(y[3]>>>0<c[3]>>>0?1:0)|0,y[5]=y[5]+886263092+(y[4]>>>0<c[4]>>>0?1:0)|0,y[6]=y[6]+1295307597+(y[5]>>>0<c[5]>>>0?1:0)|0,y[7]=y[7]+3545052371+(y[6]>>>0<c[6]>>>0?1:0)|0,this._b=y[7]>>>0<c[7]>>>0?1:0;for(var w=0;w<8;w++){var S=m[w]+y[w],T=S&65535,C=S>>>16,D=((T*T>>>17)+T*C>>>15)+C*C,R=((S&4294901760)*S|0)+((S&65535)*S|0);h[w]=D^R}m[0]=h[0]+(h[7]<<16|h[7]>>>16)+(h[6]<<16|h[6]>>>16)|0,m[1]=h[1]+(h[0]<<8|h[0]>>>24)+h[7]|0,m[2]=h[2]+(h[1]<<16|h[1]>>>16)+(h[0]<<16|h[0]>>>16)|0,m[3]=h[3]+(h[2]<<8|h[2]>>>24)+h[1]|0,m[4]=h[4]+(h[3]<<16|h[3]>>>16)+(h[2]<<16|h[2]>>>16)|0,m[5]=h[5]+(h[4]<<8|h[4]>>>24)+h[3]|0,m[6]=h[6]+(h[5]<<16|h[5]>>>16)+(h[4]<<16|h[4]>>>16)|0,m[7]=h[7]+(h[6]<<8|h[6]>>>24)+h[5]|0}n.RabbitLegacy=s._createHelper(f)})(),e.RabbitLegacy})})(Bb)),Bb.exports}var Ob={exports:{}},OG=Ob.exports,V8;function UG(){return V8||(V8=1,(function(i,t){(function(e,n,r){i.exports=n(An(),qp(),zp(),Md(),es())})(OG,function(e){return(function(){var n=e,r=n.lib,s=r.BlockCipher,a=n.algo;const u=16,c=[608135816,2242054355,320440878,57701188,2752067618,698298832,137296536,3964562569,1160258022,953160567,3193202383,887688300,3232508343,3380367581,1065670069,3041331479,2450970073,2306472731],h=[[3509652390,2564797868,805139163,3491422135,3101798381,1780907670,3128725573,4046225305,614570311,3012652279,134345442,2240740374,1667834072,1901547113,2757295779,4103290238,227898511,1921955416,1904987480,2182433518,2069144605,3260701109,2620446009,720527379,3318853667,677414384,3393288472,3101374703,2390351024,1614419982,1822297739,2954791486,3608508353,3174124327,2024746970,1432378464,3864339955,2857741204,1464375394,1676153920,1439316330,715854006,3033291828,289532110,2706671279,2087905683,3018724369,1668267050,732546397,1947742710,3462151702,2609353502,2950085171,1814351708,2050118529,680887927,999245976,1800124847,3300911131,1713906067,1641548236,4213287313,1216130144,1575780402,4018429277,3917837745,3693486850,3949271944,596196993,3549867205,258830323,2213823033,772490370,2760122372,1774776394,2652871518,566650946,4142492826,1728879713,2882767088,1783734482,3629395816,2517608232,2874225571,1861159788,326777828,3124490320,2130389656,2716951837,967770486,1724537150,2185432712,2364442137,1164943284,2105845187,998989502,3765401048,2244026483,1075463327,1455516326,1322494562,910128902,469688178,1117454909,936433444,3490320968,3675253459,1240580251,122909385,2157517691,634681816,4142456567,3825094682,3061402683,2540495037,79693498,3249098678,1084186820,1583128258,426386531,1761308591,1047286709,322548459,995290223,1845252383,2603652396,3431023940,2942221577,3202600964,3727903485,1712269319,422464435,3234572375,1170764815,3523960633,3117677531,1434042557,442511882,3600875718,1076654713,1738483198,4213154764,2393238008,3677496056,1014306527,4251020053,793779912,2902807211,842905082,4246964064,1395751752,1040244610,2656851899,3396308128,445077038,3742853595,3577915638,679411651,2892444358,2354009459,1767581616,3150600392,3791627101,3102740896,284835224,4246832056,1258075500,768725851,2589189241,3069724005,3532540348,1274779536,3789419226,2764799539,1660621633,3471099624,4011903706,913787905,3497959166,737222580,2514213453,2928710040,3937242737,1804850592,3499020752,2949064160,2386320175,2390070455,2415321851,4061277028,2290661394,2416832540,1336762016,1754252060,3520065937,3014181293,791618072,3188594551,3933548030,2332172193,3852520463,3043980520,413987798,3465142937,3030929376,4245938359,2093235073,3534596313,375366246,2157278981,2479649556,555357303,3870105701,2008414854,3344188149,4221384143,3956125452,2067696032,3594591187,2921233993,2428461,544322398,577241275,1471733935,610547355,4027169054,1432588573,1507829418,2025931657,3646575487,545086370,48609733,2200306550,1653985193,298326376,1316178497,3007786442,2064951626,458293330,2589141269,3591329599,3164325604,727753846,2179363840,146436021,1461446943,4069977195,705550613,3059967265,3887724982,4281599278,3313849956,1404054877,2845806497,146425753,1854211946],[1266315497,3048417604,3681880366,3289982499,290971e4,1235738493,2632868024,2414719590,3970600049,1771706367,1449415276,3266420449,422970021,1963543593,2690192192,3826793022,1062508698,1531092325,1804592342,2583117782,2714934279,4024971509,1294809318,4028980673,1289560198,2221992742,1669523910,35572830,157838143,1052438473,1016535060,1802137761,1753167236,1386275462,3080475397,2857371447,1040679964,2145300060,2390574316,1461121720,2956646967,4031777805,4028374788,33600511,2920084762,1018524850,629373528,3691585981,3515945977,2091462646,2486323059,586499841,988145025,935516892,3367335476,2599673255,2839830854,265290510,3972581182,2759138881,3795373465,1005194799,847297441,406762289,1314163512,1332590856,1866599683,4127851711,750260880,613907577,1450815602,3165620655,3734664991,3650291728,3012275730,3704569646,1427272223,778793252,1343938022,2676280711,2052605720,1946737175,3164576444,3914038668,3967478842,3682934266,1661551462,3294938066,4011595847,840292616,3712170807,616741398,312560963,711312465,1351876610,322626781,1910503582,271666773,2175563734,1594956187,70604529,3617834859,1007753275,1495573769,4069517037,2549218298,2663038764,504708206,2263041392,3941167025,2249088522,1514023603,1998579484,1312622330,694541497,2582060303,2151582166,1382467621,776784248,2618340202,3323268794,2497899128,2784771155,503983604,4076293799,907881277,423175695,432175456,1378068232,4145222326,3954048622,3938656102,3820766613,2793130115,2977904593,26017576,3274890735,3194772133,1700274565,1756076034,4006520079,3677328699,720338349,1533947780,354530856,688349552,3973924725,1637815568,332179504,3949051286,53804574,2852348879,3044236432,1282449977,3583942155,3416972820,4006381244,1617046695,2628476075,3002303598,1686838959,431878346,2686675385,1700445008,1080580658,1009431731,832498133,3223435511,2605976345,2271191193,2516031870,1648197032,4164389018,2548247927,300782431,375919233,238389289,3353747414,2531188641,2019080857,1475708069,455242339,2609103871,448939670,3451063019,1395535956,2413381860,1841049896,1491858159,885456874,4264095073,4001119347,1565136089,3898914787,1108368660,540939232,1173283510,2745871338,3681308437,4207628240,3343053890,4016749493,1699691293,1103962373,3625875870,2256883143,3830138730,1031889488,3479347698,1535977030,4236805024,3251091107,2132092099,1774941330,1199868427,1452454533,157007616,2904115357,342012276,595725824,1480756522,206960106,497939518,591360097,863170706,2375253569,3596610801,1814182875,2094937945,3421402208,1082520231,3463918190,2785509508,435703966,3908032597,1641649973,2842273706,3305899714,1510255612,2148256476,2655287854,3276092548,4258621189,236887753,3681803219,274041037,1734335097,3815195456,3317970021,1899903192,1026095262,4050517792,356393447,2410691914,3873677099,3682840055],[3913112168,2491498743,4132185628,2489919796,1091903735,1979897079,3170134830,3567386728,3557303409,857797738,1136121015,1342202287,507115054,2535736646,337727348,3213592640,1301675037,2528481711,1895095763,1721773893,3216771564,62756741,2142006736,835421444,2531993523,1442658625,3659876326,2882144922,676362277,1392781812,170690266,3921047035,1759253602,3611846912,1745797284,664899054,1329594018,3901205900,3045908486,2062866102,2865634940,3543621612,3464012697,1080764994,553557557,3656615353,3996768171,991055499,499776247,1265440854,648242737,3940784050,980351604,3713745714,1749149687,3396870395,4211799374,3640570775,1161844396,3125318951,1431517754,545492359,4268468663,3499529547,1437099964,2702547544,3433638243,2581715763,2787789398,1060185593,1593081372,2418618748,4260947970,69676912,2159744348,86519011,2512459080,3838209314,1220612927,3339683548,133810670,1090789135,1078426020,1569222167,845107691,3583754449,4072456591,1091646820,628848692,1613405280,3757631651,526609435,236106946,48312990,2942717905,3402727701,1797494240,859738849,992217954,4005476642,2243076622,3870952857,3732016268,765654824,3490871365,2511836413,1685915746,3888969200,1414112111,2273134842,3281911079,4080962846,172450625,2569994100,980381355,4109958455,2819808352,2716589560,2568741196,3681446669,3329971472,1835478071,660984891,3704678404,4045999559,3422617507,3040415634,1762651403,1719377915,3470491036,2693910283,3642056355,3138596744,1364962596,2073328063,1983633131,926494387,3423689081,2150032023,4096667949,1749200295,3328846651,309677260,2016342300,1779581495,3079819751,111262694,1274766160,443224088,298511866,1025883608,3806446537,1145181785,168956806,3641502830,3584813610,1689216846,3666258015,3200248200,1692713982,2646376535,4042768518,1618508792,1610833997,3523052358,4130873264,2001055236,3610705100,2202168115,4028541809,2961195399,1006657119,2006996926,3186142756,1430667929,3210227297,1314452623,4074634658,4101304120,2273951170,1399257539,3367210612,3027628629,1190975929,2062231137,2333990788,2221543033,2438960610,1181637006,548689776,2362791313,3372408396,3104550113,3145860560,296247880,1970579870,3078560182,3769228297,1714227617,3291629107,3898220290,166772364,1251581989,493813264,448347421,195405023,2709975567,677966185,3703036547,1463355134,2715995803,1338867538,1343315457,2802222074,2684532164,233230375,2599980071,2000651841,3277868038,1638401717,4028070440,3237316320,6314154,819756386,300326615,590932579,1405279636,3267499572,3150704214,2428286686,3959192993,3461946742,1862657033,1266418056,963775037,2089974820,2263052895,1917689273,448879540,3550394620,3981727096,150775221,3627908307,1303187396,508620638,2975983352,2726630617,1817252668,1876281319,1457606340,908771278,3720792119,3617206836,2455994898,1729034894,1080033504],[976866871,3556439503,2881648439,1522871579,1555064734,1336096578,3548522304,2579274686,3574697629,3205460757,3593280638,3338716283,3079412587,564236357,2993598910,1781952180,1464380207,3163844217,3332601554,1699332808,1393555694,1183702653,3581086237,1288719814,691649499,2847557200,2895455976,3193889540,2717570544,1781354906,1676643554,2592534050,3230253752,1126444790,2770207658,2633158820,2210423226,2615765581,2414155088,3127139286,673620729,2805611233,1269405062,4015350505,3341807571,4149409754,1057255273,2012875353,2162469141,2276492801,2601117357,993977747,3918593370,2654263191,753973209,36408145,2530585658,25011837,3520020182,2088578344,530523599,2918365339,1524020338,1518925132,3760827505,3759777254,1202760957,3985898139,3906192525,674977740,4174734889,2031300136,2019492241,3983892565,4153806404,3822280332,352677332,2297720250,60907813,90501309,3286998549,1016092578,2535922412,2839152426,457141659,509813237,4120667899,652014361,1966332200,2975202805,55981186,2327461051,676427537,3255491064,2882294119,3433927263,1307055953,942726286,933058658,2468411793,3933900994,4215176142,1361170020,2001714738,2830558078,3274259782,1222529897,1679025792,2729314320,3714953764,1770335741,151462246,3013232138,1682292957,1483529935,471910574,1539241949,458788160,3436315007,1807016891,3718408830,978976581,1043663428,3165965781,1927990952,4200891579,2372276910,3208408903,3533431907,1412390302,2931980059,4132332400,1947078029,3881505623,4168226417,2941484381,1077988104,1320477388,886195818,18198404,3786409e3,2509781533,112762804,3463356488,1866414978,891333506,18488651,661792760,1628790961,3885187036,3141171499,876946877,2693282273,1372485963,791857591,2686433993,3759982718,3167212022,3472953795,2716379847,445679433,3561995674,3504004811,3574258232,54117162,3331405415,2381918588,3769707343,4154350007,1140177722,4074052095,668550556,3214352940,367459370,261225585,2610173221,4209349473,3468074219,3265815641,314222801,3066103646,3808782860,282218597,3406013506,3773591054,379116347,1285071038,846784868,2669647154,3771962079,3550491691,2305946142,453669953,1268987020,3317592352,3279303384,3744833421,2610507566,3859509063,266596637,3847019092,517658769,3462560207,3443424879,370717030,4247526661,2224018117,4143653529,4112773975,2788324899,2477274417,1456262402,2901442914,1517677493,1846949527,2295493580,3734397586,2176403920,1280348187,1908823572,3871786941,846861322,1172426758,3287448474,3383383037,1655181056,3139813346,901632758,1897031941,2986607138,3066810236,3447102507,1393639104,373351379,950779232,625454576,3124240540,4148612726,2007998917,544563296,2244738638,2330496472,2058025392,1291430526,424198748,50039436,29584100,3605783033,2429876329,2791104160,1057563949,3255363231,3075367218,3463963227,1469046755,985887462]];var f={pbox:[],sbox:[]};function g(T,C){let D=C>>24&255,R=C>>16&255,I=C>>8&255,F=C&255,q=T.sbox[0][D]+T.sbox[1][R];return q=q^T.sbox[2][I],q=q+T.sbox[3][F],q}function m(T,C,D){let R=C,I=D,F;for(let q=0;q<u;++q)R=R^T.pbox[q],I=g(T,R)^I,F=R,R=I,I=F;return F=R,R=I,I=F,I=I^T.pbox[u],R=R^T.pbox[u+1],{left:R,right:I}}function y(T,C,D){let R=C,I=D,F;for(let q=u+1;q>1;--q)R=R^T.pbox[q],I=g(T,R)^I,F=R,R=I,I=F;return F=R,R=I,I=F,I=I^T.pbox[1],R=R^T.pbox[0],{left:R,right:I}}function w(T,C,D){for(let U=0;U<4;U++){T.sbox[U]=[];for(let V=0;V<256;V++)T.sbox[U][V]=h[U][V]}let R=0;for(let U=0;U<u+2;U++)T.pbox[U]=c[U]^C[R],R++,R>=D&&(R=0);let I=0,F=0,q=0;for(let U=0;U<u+2;U+=2)q=m(T,I,F),I=q.left,F=q.right,T.pbox[U]=I,T.pbox[U+1]=F;for(let U=0;U<4;U++)for(let V=0;V<256;V+=2)q=m(T,I,F),I=q.left,F=q.right,T.sbox[U][V]=I,T.sbox[U][V+1]=F;return!0}var S=a.Blowfish=s.extend({_doReset:function(){if(this._keyPriorReset!==this._key){var T=this._keyPriorReset=this._key,C=T.words,D=T.sigBytes/4;w(f,C,D)}},encryptBlock:function(T,C){var D=m(f,T[C],T[C+1]);T[C]=D.left,T[C+1]=D.right},decryptBlock:function(T,C){var D=y(f,T[C],T[C+1]);T[C]=D.left,T[C+1]=D.right},blockSize:64/32,keySize:128/32,ivSize:64/32});n.Blowfish=s._createHelper(S)})(),e.Blowfish})})(Ob)),Ob.exports}var HG=ib.exports,Y8;function qG(){return Y8||(Y8=1,(function(i,t){(function(e,n,r){i.exports=n(An(),YA(),Bz(),Uz(),qp(),zz(),zp(),qL(),dC(),Wz(),zL(),Jz(),Qz(),tG(),pC(),iG(),Md(),es(),aG(),uG(),hG(),dG(),gG(),vG(),xG(),AG(),wG(),EG(),TG(),RG(),LG(),IG(),kG(),BG(),UG())})(HG,function(e){return e})})(ib)),ib.exports}var zG=qG();const GG=qE(zG);console.warn("API_KEY environment variable not set. Using a placeholder. Analysis will fail.");const GL=new EH({apiKey:"YOUR_API_KEY_HERE"}),VG="data_sale, data_sharing, auto_renewal, hard_cancel, arbitration, class_action_waiver, biometric, profiling, indefinite_retention, children_data, other";async function YG(i,t){var n;const e=`
    You are a precise legal-policy summarizer. Return JSON only. Quote exact clauses. No legal advice.
    
    CHUNK_ID: ${t}
    TEXT:
    '''${i}'''

    Tasks:
    1. Identify risks among: ${VG}.
    2. For each risk return:
       risk_type (string, from the list), risk_label (string, human-readable title), excerpt (string, exact text, max 100 words), confidence (number, 0-1),
       suggested_action (string, clear user action).
    3. Provide TLDR for this chunk (string, max 3 lines).
    4. Provide chunk_score (number, 0-100, where 100 is most private/safe) + 1-line rationale (string).
    
    Return a single JSON object matching this schema:
    {
     "chunk_id": "${t}",
     "tldr": "",
     "chunk_score": 0,
     "rationale": "",
     "extractions": [
        { "risk_type": "", "risk_label": "", "excerpt": "", "confidence": 0.0, "suggested_action": "" }
     ]
    }
  `;try{const s=(n=(await GL.models.generateContent({model:"gemini-2.5-flash",contents:e,config:{responseMimeType:"application/json"}})).text)==null?void 0:n.trim();if(!s)throw new Error("Empty response from AI for chunk analysis.");const a=s.replace(/```json/g,"").replace(/```/g,"").trim();return JSON.parse(a)}catch(r){return console.error(`Error analyzing chunk ${t}:`,r),{chunk_id:String(t),tldr:"Analysis failed for this chunk.",chunk_score:0,rationale:"An error occurred during AI processing.",extractions:[]}}}function $G(i){if(i.length===0)return{score:100,rationale:"No text to analyze."};const t=i.reduce((r,s)=>r+s.chunk_score,0),e=Math.round(t/i.length);let n=`The overall score of ${e} is an average of the scores from ${i.length} analyzed text chunks. `;return e>=75?n+="This indicates a generally positive and user-friendly policy.":e>=40?n+="This suggests some areas of concern that warrant your attention.":n+="This points to several potentially high-risk clauses that you should review carefully.",{score:e,rationale:n}}function WG(i){switch(i){case"data_sale":case"auto_renewal":case"hard_cancel":case"biometric":case"children_data":return"high";case"data_sharing":case"arbitration":case"class_action_waiver":case"indefinite_retention":return"medium";case"profiling":default:return"low"}}async function XG(i,t,e){var m;const n=i.flatMap(y=>y.extractions.map(w=>({...w,chunk_id:y.chunk_id}))),r=`
      You are a final report generator. Your task is to synthesize the provided chunk-based analyses into a single, cohesive report.
      Do NOT hallucinate information. Use only the data provided below.
      
      SOURCE: ${typeof t.value=="string"?t.value:t.value.name}

      CHUNK ANALYSES:
      ${JSON.stringify(i,null,2)}
      
      TASKS:
      1. Write a global TL;DR (string, max 3 lines) summarizing the most important findings from all chunks.
      2. Identify 3 recommended actions for the user (e.g., "Look for opt-out settings", "Be aware of auto-renewal terms").
      3. Extract contact information from the full text: support email, support phone, and a link for cancellation/account deletion.
      
      Return a single JSON object:
      {
        "tldr": "",
        "actions": [
          {"title": "Action 1", "description": "Description 1"},
          {"title": "Action 2", "description": "Description 2"},
          {"title": "Action 3", "description": "Description 3"}
        ],
        "contact_info": { "support_email": "", "support_phone": "", "cancellation_link": "" }
      }
    `,a=(m=(await GL.models.generateContent({model:"gemini-3-pro-preview",contents:r,config:{responseMimeType:"application/json"}})).text)==null?void 0:m.trim();if(!a)throw new Error("Empty response from AI for aggregation.");const u=a.replace(/```json/g,"").replace(/```/g,"").trim(),c=JSON.parse(u),{score:h,rationale:f}=$G(i);return{report_id:u8(),source:{type:t.type,value:typeof t.value=="string"?t.value:t.value.name},language:"en",tldr:c.tldr,score:h,score_rationale:f,risks:n.map(y=>({risk_id:u8(),risk_type:y.risk_type,risk_label:y.risk_label,severity:WG(y.risk_type),confidence:y.confidence,excerpt:y.excerpt,suggested_action:y.suggested_action,source_refs:[{chunk_id:y.chunk_id}]})),actions:c.actions,contact_info:c.contact_info,raw_text_hash:GG.SHA256(e).toString(),model_version:"gemini-policy-v1",created_at:new Date().toISOString()}}async function Rw(i){let t="";if(i.type===Hs.TEXT?t=i.value:i.type===Hs.PDF?t=await Sz(i.value):i.type===Hs.URL&&(console.warn("URL fetching is mocked. Using placeholder text."),t=`This is placeholder text for the URL: ${i.value}. In a real application, a backend service would fetch the URL content. This service would handle various data-sharing agreements. For example, your data may be sold to third parties. Subscription services may auto-renew unless you perform a hard-to-find cancellation process.`),!t.trim())throw new Error("Could not extract any text from the provided source.");const e=TH(t);if(e.length===0)throw new Error("Document is too short to be analyzed.");const n=e.map((a,u)=>YG(a,u)),r=await Promise.all(n);return await XG(r,i,t)}const jG=()=>{const[i,t]=Ut.useState(Hs.URL),[e,n]=Ut.useState(""),[r,s]=Ut.useState(""),[a,u]=Ut.useState(null),[c,h]=Ut.useState(""),[f,g]=Ut.useState(!1),[m,y]=Ut.useState(null),w=TN(),S=R=>{if(R.target.files&&R.target.files[0]){const I=R.target.files[0];I.type==="application/pdf"?(u(I),h(I.name),y(null)):y("Please upload a valid PDF.")}},T=Ut.useCallback(async R=>{R.preventDefault(),g(!0),y(null);let I,F="";try{if(i===Hs.URL&&e)F=e,I=Rw({type:Hs.URL,value:e});else if(i===Hs.PDF&&a)F=a.name,I=Rw({type:Hs.PDF,value:a});else if(i===Hs.TEXT&&r)F="Custom Content",I=Rw({type:Hs.TEXT,value:r});else{y("Please enter source data."),g(!1);return}w("/loading",{state:{sourceValue:F}});const q=await I;w("/report",{state:{report:q}})}catch(q){y(q instanceof Error?q.message:"Analysis failed."),w("/")}finally{g(!1)}},[i,e,a,r,w]),C="w-full p-4 bg-white border border-neutral-200 rounded-2xl focus:ring-0 focus:border-neutral-900 outline-none text-sm shadow-sm",D=()=>{switch(i){case Hs.PDF:return Pt.jsx("div",{className:"mt-6",children:Pt.jsxs("label",{htmlFor:"file-upload",className:"cursor-pointer block",children:[Pt.jsxs("div",{className:"flex flex-col items-center justify-center border border-dashed border-neutral-300 rounded-2xl p-10 bg-neutral-50 hover:bg-white transition",children:[Pt.jsx(pk,{className:"h-8 w-8 text-neutral-700"}),Pt.jsx("span",{className:"mt-4 text-sm font-semibold text-neutral-900",children:c||"Upload PDF"}),Pt.jsx("p",{className:"text-xs text-neutral-500 mt-1",children:"Click to browse"})]}),Pt.jsx("input",{id:"file-upload",type:"file",className:"sr-only",onChange:S,accept:".pdf"})]})});case Hs.TEXT:return Pt.jsx("div",{className:"mt-6",children:Pt.jsx("textarea",{value:r,onChange:R=>s(R.target.value),placeholder:"Paste policy text here...",className:`${C} h-40 resize-none`,disabled:f})});default:return Pt.jsx("div",{className:"mt-6",children:Pt.jsx("input",{type:"url",value:e,onChange:R=>n(R.target.value),placeholder:"https://apple.com/privacy",className:C,disabled:f})})}};return Pt.jsxs("div",{className:"max-w-xl mx-auto px-5 py-10",children:[Pt.jsxs("div",{className:"text-center mb-10",children:[Pt.jsxs("h1",{className:"text-4xl font-black text-neutral-900 tracking-tight leading-tight",children:["Privacy ",Pt.jsx("span",{className:"text-neutral-300",children:"decoded"})]}),Pt.jsx("p",{className:"text-sm text-neutral-600 mt-3",children:"Understand complex privacy policies in seconds."})]}),Pt.jsx("div",{className:"bg-white rounded-3xl border border-neutral-200 p-6 shadow-sm",children:Pt.jsxs("form",{onSubmit:T,children:[Pt.jsx("div",{className:"bg-neutral-100 p-1 rounded-2xl flex mb-6",children:[{id:Hs.URL,label:"Link",icon:FN},{id:Hs.PDF,label:"File",icon:fk},{id:Hs.TEXT,label:"Text",icon:dk}].map(R=>Pt.jsxs("button",{type:"button",onClick:()=>t(R.id),className:`flex-1 py-2 text-xs font-semibold flex items-center justify-center gap-1 rounded-xl transition ${i===R.id?"bg-white shadow text-neutral-900":"text-neutral-500"}`,children:[Pt.jsx(R.icon,{className:"w-3 h-3"}),R.label]},R.id))}),D(),m&&Pt.jsx("div",{className:"mt-4 text-xs text-red-600 text-center",children:m}),Pt.jsx("button",{type:"submit",disabled:f,className:"mt-6 w-full py-4 bg-neutral-900 text-white text-sm font-semibold rounded-full hover:bg-black transition disabled:opacity-40",children:f?"Analyzing":"Start Audit"})]})})]})},JG=()=>{const i=kh(),{sourceValue:t}=i.state||{sourceValue:"Content"},[e,n]=Ut.useState("Starting analysis"),[r,s]=Ut.useState(0),a=["Parsing policy structure","Identifying risk clauses","Evaluating data practices","Generating final report"];return Ut.useEffect(()=>{let u=0;const c=setInterval(()=>{u<a.length?(n(a[u]),s((u+1)/a.length*100),u++):clearInterval(c)},1400);return()=>clearInterval(c)},[]),Pt.jsxs("div",{className:"flex flex-col items-center justify-center min-h-[60vh] px-4 text-center",children:[Pt.jsxs("div",{className:"relative mb-10",children:[Pt.jsx("div",{className:"w-10 h-10 border border-neutral-200 rounded-full absolute inset-0"}),Pt.jsx("div",{className:"w-10 h-10 border border-neutral-900 rounded-full border-t-transparent animate-spin"})]}),Pt.jsx("h1",{className:"text-xl font-semibold text-neutral-900",children:"Analyzing policy"}),Pt.jsx("p",{className:"mt-1 text-xs text-neutral-500 truncate max-w-[240px]",children:t}),Pt.jsx("div",{className:"w-full max-w-[260px] h-[3px] bg-neutral-100 rounded-full mt-8 overflow-hidden",children:Pt.jsx("div",{className:"bg-neutral-900 h-full transition-all duration-700 ease-out",style:{width:`${r}%`}})}),Pt.jsx("p",{className:"mt-6 text-[11px] text-neutral-400 tracking-wide animate-pulse",children:e})]})},KG=({score:i})=>{const t=2*Math.PI*36,e=t-i/100*t;return Pt.jsxs("div",{className:"relative w-24 h-24 flex items-center justify-center",children:[Pt.jsxs("svg",{className:"w-full h-full transform -rotate-90",viewBox:"0 0 100 100",children:[Pt.jsx("circle",{stroke:"currentColor",className:"text-neutral-200",strokeWidth:"6",fill:"transparent",r:"36",cx:"50",cy:"50"}),Pt.jsx("circle",{stroke:"currentColor",className:"text-neutral-900",strokeWidth:"6",strokeDasharray:t,strokeDashoffset:e,strokeLinecap:"round",fill:"transparent",r:"36",cx:"50",cy:"50",style:{transition:"stroke-dashoffset 1.2s ease-out"}})]}),Pt.jsxs("div",{className:"absolute inset-0 flex flex-col items-center justify-center",children:[Pt.jsx("span",{className:"text-[9px] text-neutral-400 uppercase tracking-wide",children:"Score"}),Pt.jsx("span",{className:"text-2xl font-semibold text-neutral-900 leading-none",children:i})]})]})},QG=({risk:i})=>{const t=i.severity==="high";return Pt.jsxs("div",{className:"bg-white border border-neutral-200 rounded-2xl p-4 hover:border-neutral-400 transition",children:[Pt.jsxs("div",{className:"flex items-start justify-between gap-3",children:[Pt.jsx("h3",{className:"text-sm font-semibold text-neutral-900 leading-snug",children:i.risk_label}),Pt.jsx("span",{className:`text-[10px] font-semibold uppercase px-2 py-1 rounded-full border ${t?"bg-neutral-900 text-white border-neutral-900":"bg-neutral-100 text-neutral-700 border-neutral-300"}`,children:i.severity})]}),Pt.jsxs("p",{className:"mt-2 text-sm text-neutral-700",children:[Pt.jsx("span",{className:"font-semibold text-neutral-900",children:"Recommendation:"})," ",i.suggested_action]}),Pt.jsxs("div",{className:"mt-3 bg-neutral-50 border border-neutral-200 rounded-xl p-3 text-sm text-neutral-600 leading-relaxed",children:["",i.excerpt,""]})]})},ZG=({title:i,description:t})=>Pt.jsxs("div",{className:"bg-white border border-neutral-200 rounded-2xl p-4 flex gap-3 hover:border-neutral-400 transition",children:[Pt.jsx("div",{className:"bg-neutral-900 w-8 h-8 rounded-xl flex items-center justify-center shrink-0",children:Pt.jsx(kN,{className:"w-4 h-4 text-white"})}),Pt.jsxs("div",{children:[Pt.jsx("h4",{className:"text-sm font-semibold text-neutral-900 leading-tight",children:i}),Pt.jsx("p",{className:"text-sm text-neutral-600 mt-1 leading-snug",children:t})]})]}),tV="modulepreload",eV=function(i){return"/"+i},$8={},RE=function(t,e,n){let r=Promise.resolve();if(e&&e.length>0){let a=function(h){return Promise.all(h.map(f=>Promise.resolve(f).then(g=>({status:"fulfilled",value:g}),g=>({status:"rejected",reason:g}))))};document.getElementsByTagName("link");const u=document.querySelector("meta[property=csp-nonce]"),c=(u==null?void 0:u.nonce)||(u==null?void 0:u.getAttribute("nonce"));r=a(e.map(h=>{if(h=eV(h),h in $8)return;$8[h]=!0;const f=h.endsWith(".css"),g=f?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${h}"]${g}`))return;const m=document.createElement("link");if(m.rel=f?"stylesheet":tV,f||(m.as="script"),m.crossOrigin="",m.href=h,c&&m.setAttribute("nonce",c),document.head.appendChild(m),f)return new Promise((y,w)=>{m.addEventListener("load",y),m.addEventListener("error",()=>w(new Error(`Unable to preload CSS for ${h}`)))})}))}function s(a){const u=new Event("vite:preloadError",{cancelable:!0});if(u.payload=a,window.dispatchEvent(u),!u.defaultPrevented)throw a}return r.then(a=>{for(const u of a||[])u.status==="rejected"&&s(u.reason);return t().catch(s)})};function Gn(i){"@babel/helpers - typeof";return Gn=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Gn(i)}var qs=Uint8Array,Ea=Uint16Array,gC=Int32Array,$A=new qs([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0]),WA=new qs([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0]),DE=new qs([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),VL=function(i,t){for(var e=new Ea(31),n=0;n<31;++n)e[n]=t+=1<<i[n-1];for(var r=new gC(e[30]),n=1;n<30;++n)for(var s=e[n];s<e[n+1];++s)r[s]=s-e[n]<<5|n;return{b:e,r}},YL=VL($A,2),$L=YL.b,LE=YL.r;$L[28]=258,LE[258]=28;var WL=VL(WA,0),nV=WL.b,W8=WL.r,ME=new Ea(32768);for(var Ei=0;Ei<32768;++Ei){var Rf=(Ei&43690)>>1|(Ei&21845)<<1;Rf=(Rf&52428)>>2|(Rf&13107)<<2,Rf=(Rf&61680)>>4|(Rf&3855)<<4,ME[Ei]=((Rf&65280)>>8|(Rf&255)<<8)>>1}var oc=(function(i,t,e){for(var n=i.length,r=0,s=new Ea(t);r<n;++r)i[r]&&++s[i[r]-1];var a=new Ea(t);for(r=1;r<t;++r)a[r]=a[r-1]+s[r-1]<<1;var u;if(e){u=new Ea(1<<t);var c=15-t;for(r=0;r<n;++r)if(i[r])for(var h=r<<4|i[r],f=t-i[r],g=a[i[r]-1]++<<f,m=g|(1<<f)-1;g<=m;++g)u[ME[g]>>c]=h}else for(u=new Ea(n),r=0;r<n;++r)i[r]&&(u[r]=ME[a[i[r]-1]++]>>15-i[r]);return u}),Nd=new qs(288);for(var Ei=0;Ei<144;++Ei)Nd[Ei]=8;for(var Ei=144;Ei<256;++Ei)Nd[Ei]=9;for(var Ei=256;Ei<280;++Ei)Nd[Ei]=7;for(var Ei=280;Ei<288;++Ei)Nd[Ei]=8;var c2=new qs(32);for(var Ei=0;Ei<32;++Ei)c2[Ei]=5;var iV=oc(Nd,9,0),rV=oc(Nd,9,1),sV=oc(c2,5,0),oV=oc(c2,5,1),Dw=function(i){for(var t=i[0],e=1;e<i.length;++e)i[e]>t&&(t=i[e]);return t},Rl=function(i,t,e){var n=t/8|0;return(i[n]|i[n+1]<<8)>>(t&7)&e},Lw=function(i,t){var e=t/8|0;return(i[e]|i[e+1]<<8|i[e+2]<<16)>>(t&7)},mC=function(i){return(i+7)/8|0},XL=function(i,t,e){return(e==null||e>i.length)&&(e=i.length),new qs(i.subarray(t,e))},aV=["unexpected EOF","invalid block type","invalid length/literal","invalid distance","stream finished","no stream handler",,"no callback","invalid UTF-8 data","extra field too long","date not in range 1980-2099","filename too long","stream finishing","invalid zip data"],Il=function(i,t,e){var n=new Error(t||aV[i]);if(n.code=i,Error.captureStackTrace&&Error.captureStackTrace(n,Il),!e)throw n;return n},lV=function(i,t,e,n){var r=i.length,s=0;if(!r||t.f&&!t.l)return e||new qs(0);var a=!e,u=a||t.i!=2,c=t.i;a&&(e=new qs(r*3));var h=function($t){var ee=e.length;if($t>ee){var Qt=new qs(Math.max(ee*2,$t));Qt.set(e),e=Qt}},f=t.f||0,g=t.p||0,m=t.b||0,y=t.l,w=t.d,S=t.m,T=t.n,C=r*8;do{if(!y){f=Rl(i,g,1);var D=Rl(i,g+1,3);if(g+=3,D)if(D==1)y=rV,w=oV,S=9,T=5;else if(D==2){var q=Rl(i,g,31)+257,U=Rl(i,g+10,15)+4,V=q+Rl(i,g+5,31)+1;g+=14;for(var tt=new qs(V),J=new qs(19),O=0;O<U;++O)J[DE[O]]=Rl(i,g+O*3,7);g+=U*3;for(var G=Dw(J),et=(1<<G)-1,st=oc(J,G,1),O=0;O<V;){var pt=st[Rl(i,g,et)];g+=pt&15;var R=pt>>4;if(R<16)tt[O++]=R;else{var nt=0,at=0;for(R==16?(at=3+Rl(i,g,3),g+=2,nt=tt[O-1]):R==17?(at=3+Rl(i,g,7),g+=3):R==18&&(at=11+Rl(i,g,127),g+=7);at--;)tt[O++]=nt}}var ht=tt.subarray(0,q),bt=tt.subarray(q);S=Dw(ht),T=Dw(bt),y=oc(ht,S,1),w=oc(bt,T,1)}else Il(1);else{var R=mC(g)+4,I=i[R-4]|i[R-3]<<8,F=R+I;if(F>r){c&&Il(0);break}u&&h(m+I),e.set(i.subarray(R,F),m),t.b=m+=I,t.p=g=F*8,t.f=f;continue}if(g>C){c&&Il(0);break}}u&&h(m+131072);for(var St=(1<<S)-1,K=(1<<T)-1,P=g;;P=g){var nt=y[Lw(i,g)&St],Y=nt>>4;if(g+=nt&15,g>C){c&&Il(0);break}if(nt||Il(2),Y<256)e[m++]=Y;else if(Y==256){P=g,y=null;break}else{var j=Y-254;if(Y>264){var O=Y-257,ut=$A[O];j=Rl(i,g,(1<<ut)-1)+$L[O],g+=ut}var ft=w[Lw(i,g)&K],mt=ft>>4;ft||Il(3),g+=ft&15;var bt=nV[mt];if(mt>3){var ut=WA[mt];bt+=Lw(i,g)&(1<<ut)-1,g+=ut}if(g>C){c&&Il(0);break}u&&h(m+131072);var At=m+j;if(m<bt){var Tt=s-bt,Xt=Math.min(bt,At);for(Tt+m<0&&Il(3);m<Xt;++m)e[m]=n[Tt+m]}for(;m<At;++m)e[m]=e[m-bt]}}t.l=y,t.p=P,t.b=m,t.f=f,y&&(f=1,t.m=S,t.d=w,t.n=T)}while(!f);return m!=e.length&&a?XL(e,0,m):e.subarray(0,m)},Uc=function(i,t,e){e<<=t&7;var n=t/8|0;i[n]|=e,i[n+1]|=e>>8},Iv=function(i,t,e){e<<=t&7;var n=t/8|0;i[n]|=e,i[n+1]|=e>>8,i[n+2]|=e>>16},Mw=function(i,t){for(var e=[],n=0;n<i.length;++n)i[n]&&e.push({s:n,f:i[n]});var r=e.length,s=e.slice();if(!r)return{t:JL,l:0};if(r==1){var a=new qs(e[0].s+1);return a[e[0].s]=1,{t:a,l:1}}e.sort(function(F,q){return F.f-q.f}),e.push({s:-1,f:25001});var u=e[0],c=e[1],h=0,f=1,g=2;for(e[0]={s:-1,f:u.f+c.f,l:u,r:c};f!=r-1;)u=e[e[h].f<e[g].f?h++:g++],c=e[h!=f&&e[h].f<e[g].f?h++:g++],e[f++]={s:-1,f:u.f+c.f,l:u,r:c};for(var m=s[0].s,n=1;n<r;++n)s[n].s>m&&(m=s[n].s);var y=new Ea(m+1),w=IE(e[f-1],y,0);if(w>t){var n=0,S=0,T=w-t,C=1<<T;for(s.sort(function(q,U){return y[U.s]-y[q.s]||q.f-U.f});n<r;++n){var D=s[n].s;if(y[D]>t)S+=C-(1<<w-y[D]),y[D]=t;else break}for(S>>=T;S>0;){var R=s[n].s;y[R]<t?S-=1<<t-y[R]++-1:++n}for(;n>=0&&S;--n){var I=s[n].s;y[I]==t&&(--y[I],++S)}w=t}return{t:new qs(y),l:w}},IE=function(i,t,e){return i.s==-1?Math.max(IE(i.l,t,e+1),IE(i.r,t,e+1)):t[i.s]=e},X8=function(i){for(var t=i.length;t&&!i[--t];);for(var e=new Ea(++t),n=0,r=i[0],s=1,a=function(c){e[n++]=c},u=1;u<=t;++u)if(i[u]==r&&u!=t)++s;else{if(!r&&s>2){for(;s>138;s-=138)a(32754);s>2&&(a(s>10?s-11<<5|28690:s-3<<5|12305),s=0)}else if(s>3){for(a(r),--s;s>6;s-=6)a(8304);s>2&&(a(s-3<<5|8208),s=0)}for(;s--;)a(r);s=1,r=i[u]}return{c:e.subarray(0,n),n:t}},Pv=function(i,t){for(var e=0,n=0;n<t.length;++n)e+=i[n]*t[n];return e},jL=function(i,t,e){var n=e.length,r=mC(t+2);i[r]=n&255,i[r+1]=n>>8,i[r+2]=i[r]^255,i[r+3]=i[r+1]^255;for(var s=0;s<n;++s)i[r+s+4]=e[s];return(r+4+n)*8},j8=function(i,t,e,n,r,s,a,u,c,h,f){Uc(t,f++,e),++r[256];for(var g=Mw(r,15),m=g.t,y=g.l,w=Mw(s,15),S=w.t,T=w.l,C=X8(m),D=C.c,R=C.n,I=X8(S),F=I.c,q=I.n,U=new Ea(19),V=0;V<D.length;++V)++U[D[V]&31];for(var V=0;V<F.length;++V)++U[F[V]&31];for(var tt=Mw(U,7),J=tt.t,O=tt.l,G=19;G>4&&!J[DE[G-1]];--G);var et=h+5<<3,st=Pv(r,Nd)+Pv(s,c2)+a,pt=Pv(r,m)+Pv(s,S)+a+14+3*G+Pv(U,J)+2*U[16]+3*U[17]+7*U[18];if(c>=0&&et<=st&&et<=pt)return jL(t,f,i.subarray(c,c+h));var nt,at,ht,bt;if(Uc(t,f,1+(pt<st)),f+=2,pt<st){nt=oc(m,y,0),at=m,ht=oc(S,T,0),bt=S;var St=oc(J,O,0);Uc(t,f,R-257),Uc(t,f+5,q-1),Uc(t,f+10,G-4),f+=14;for(var V=0;V<G;++V)Uc(t,f+3*V,J[DE[V]]);f+=3*G;for(var K=[D,F],P=0;P<2;++P)for(var Y=K[P],V=0;V<Y.length;++V){var j=Y[V]&31;Uc(t,f,St[j]),f+=J[j],j>15&&(Uc(t,f,Y[V]>>5&127),f+=Y[V]>>12)}}else nt=iV,at=Nd,ht=sV,bt=c2;for(var V=0;V<u;++V){var ut=n[V];if(ut>255){var j=ut>>18&31;Iv(t,f,nt[j+257]),f+=at[j+257],j>7&&(Uc(t,f,ut>>23&31),f+=$A[j]);var ft=ut&31;Iv(t,f,ht[ft]),f+=bt[ft],ft>3&&(Iv(t,f,ut>>5&8191),f+=WA[ft])}else Iv(t,f,nt[ut]),f+=at[ut]}return Iv(t,f,nt[256]),f+at[256]},uV=new gC([65540,131080,131088,131104,262176,1048704,1048832,2114560,2117632]),JL=new qs(0),cV=function(i,t,e,n,r,s){var a=s.z||i.length,u=new qs(n+a+5*(1+Math.ceil(a/7e3))+r),c=u.subarray(n,u.length-r),h=s.l,f=(s.r||0)&7;if(t){f&&(c[0]=s.r>>3);for(var g=uV[t-1],m=g>>13,y=g&8191,w=(1<<e)-1,S=s.p||new Ea(32768),T=s.h||new Ea(w+1),C=Math.ceil(e/3),D=2*C,R=function(le){return(i[le]^i[le+1]<<C^i[le+2]<<D)&w},I=new gC(25e3),F=new Ea(288),q=new Ea(32),U=0,V=0,tt=s.i||0,J=0,O=s.w||0,G=0;tt+2<a;++tt){var et=R(tt),st=tt&32767,pt=T[et];if(S[st]=pt,T[et]=st,O<=tt){var nt=a-tt;if((U>7e3||J>24576)&&(nt>423||!h)){f=j8(i,c,0,I,F,q,V,J,G,tt-G,f),J=U=V=0,G=tt;for(var at=0;at<286;++at)F[at]=0;for(var at=0;at<30;++at)q[at]=0}var ht=2,bt=0,St=y,K=st-pt&32767;if(nt>2&&et==R(tt-K))for(var P=Math.min(m,nt)-1,Y=Math.min(32767,tt),j=Math.min(258,nt);K<=Y&&--St&&st!=pt;){if(i[tt+ht]==i[tt+ht-K]){for(var ut=0;ut<j&&i[tt+ut]==i[tt+ut-K];++ut);if(ut>ht){if(ht=ut,bt=K,ut>P)break;for(var ft=Math.min(K,ut-2),mt=0,at=0;at<ft;++at){var At=tt-K+at&32767,Tt=S[At],Xt=At-Tt&32767;Xt>mt&&(mt=Xt,pt=At)}}}st=pt,pt=S[st],K+=st-pt&32767}if(bt){I[J++]=268435456|LE[ht]<<18|W8[bt];var $t=LE[ht]&31,ee=W8[bt]&31;V+=$A[$t]+WA[ee],++F[257+$t],++q[ee],O=tt+ht,++U}else I[J++]=i[tt],++F[i[tt]]}}for(tt=Math.max(tt,O);tt<a;++tt)I[J++]=i[tt],++F[i[tt]];f=j8(i,c,h,I,F,q,V,J,G,tt-G,f),h||(s.r=f&7|c[f/8|0]<<3,f-=7,s.h=T,s.p=S,s.i=tt,s.w=O)}else{for(var tt=s.w||0;tt<a+h;tt+=65535){var Qt=tt+65535;Qt>=a&&(c[f/8|0]=h,Qt=a),f=jL(c,f+1,i.subarray(tt,Qt))}s.i=a}return XL(u,0,n+mC(f)+r)},KL=function(){var i=1,t=0;return{p:function(e){for(var n=i,r=t,s=e.length|0,a=0;a!=s;){for(var u=Math.min(a+2655,s);a<u;++a)r+=n+=e[a];n=(n&65535)+15*(n>>16),r=(r&65535)+15*(r>>16)}i=n,t=r},d:function(){return i%=65521,t%=65521,(i&255)<<24|(i&65280)<<8|(t&255)<<8|t>>8}}},hV=function(i,t,e,n,r){if(!r&&(r={l:1},t.dictionary)){var s=t.dictionary.subarray(-32768),a=new qs(s.length+i.length);a.set(s),a.set(i,s.length),i=a,r.w=s.length}return cV(i,t.level==null?6:t.level,t.mem==null?r.l?Math.ceil(Math.max(8,Math.min(13,Math.log(i.length)))*1.5):20:12+t.mem,e,n,r)},QL=function(i,t,e){for(;e;++t)i[t]=e,e>>>=8},fV=function(i,t){var e=t.level,n=e==0?0:e<6?1:e==9?3:2;if(i[0]=120,i[1]=n<<6|(t.dictionary&&32),i[1]|=31-(i[0]<<8|i[1])%31,t.dictionary){var r=KL();r.p(t.dictionary),QL(i,2,r.d())}},dV=function(i,t){return((i[0]&15)!=8||i[0]>>4>7||(i[0]<<8|i[1])%31)&&Il(6,"invalid zlib data"),(i[1]>>5&1)==1&&Il(6,"invalid zlib data: "+(i[1]&32?"need":"unexpected")+" dictionary"),(i[1]>>3&4)+2};function PE(i,t){t||(t={});var e=KL();e.p(i);var n=hV(i,t,t.dictionary?6:2,4);return fV(n,t),QL(n,n.length-4,e.d()),n}function pV(i,t){return lV(i.subarray(dV(i),-4),{i:2},t,t)}var gV=typeof TextDecoder<"u"&&new TextDecoder,mV=0;try{gV.decode(JL,{stream:!0}),mV=1}catch{}var Pe=(function(){return typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:this})();function Iw(){Pe.console&&typeof Pe.console.log=="function"&&Pe.console.log.apply(Pe.console,arguments)}var ai={log:Iw,warn:function(i){Pe.console&&(typeof Pe.console.warn=="function"?Pe.console.warn.apply(Pe.console,arguments):Iw.call(null,arguments))},error:function(i){Pe.console&&(typeof Pe.console.error=="function"?Pe.console.error.apply(Pe.console,arguments):Iw(i))}};function Pw(i,t,e){var n=new XMLHttpRequest;n.open("GET",i),n.responseType="blob",n.onload=function(){d0(n.response,t,e)},n.onerror=function(){ai.error("could not download file")},n.send()}function J8(i){var t=new XMLHttpRequest;t.open("HEAD",i,!1);try{t.send()}catch{}return t.status>=200&&t.status<=299}function p5(i){try{i.dispatchEvent(new MouseEvent("click"))}catch{var t=document.createEvent("MouseEvents");t.initMouseEvent("click",!0,!0,window,0,0,0,80,20,!1,!1,!1,!1,0,null),i.dispatchEvent(t)}}var i2,kE,d0=Pe.saveAs||((typeof window>"u"?"undefined":Gn(window))!=="object"||window!==Pe?function(){}:typeof HTMLAnchorElement<"u"&&"download"in HTMLAnchorElement.prototype?function(i,t,e){var n=Pe.URL||Pe.webkitURL,r=document.createElement("a");t=t||i.name||"download",r.download=t,r.rel="noopener",typeof i=="string"?(r.href=i,r.origin!==location.origin?J8(r.href)?Pw(i,t,e):p5(r,r.target="_blank"):p5(r)):(r.href=n.createObjectURL(i),setTimeout((function(){n.revokeObjectURL(r.href)}),4e4),setTimeout((function(){p5(r)}),0))}:"msSaveOrOpenBlob"in navigator?function(i,t,e){if(t=t||i.name||"download",typeof i=="string")if(J8(i))Pw(i,t,e);else{var n=document.createElement("a");n.href=i,n.target="_blank",setTimeout((function(){p5(n)}))}else navigator.msSaveOrOpenBlob((function(r,s){return s===void 0?s={autoBom:!1}:Gn(s)!=="object"&&(ai.warn("Deprecated: Expected third argument to be a object"),s={autoBom:!s}),s.autoBom&&/^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(r.type)?new Blob(["\uFEFF",r],{type:r.type}):r})(i,e),t)}:function(i,t,e,n){if((n=n||open("","_blank"))&&(n.document.title=n.document.body.innerText="downloading..."),typeof i=="string")return Pw(i,t,e);var r=i.type==="application/octet-stream",s=/constructor/i.test(Pe.HTMLElement)||Pe.safari,a=/CriOS\/[\d]+/.test(navigator.userAgent);if((a||r&&s)&&(typeof FileReader>"u"?"undefined":Gn(FileReader))==="object"){var u=new FileReader;u.onloadend=function(){var f=u.result;f=a?f:f.replace(/^data:[^;]*;/,"data:attachment/file;"),n?n.location.href=f:location=f,n=null},u.readAsDataURL(i)}else{var c=Pe.URL||Pe.webkitURL,h=c.createObjectURL(i);n?n.location=h:location.href=h,n=null,setTimeout((function(){c.revokeObjectURL(h)}),4e4)}});/**
 * A class to parse color values
 * @author Stoyan Stefanov <sstoo@gmail.com>
 * {@link   http://www.phpied.com/rgb-color-parser-in-javascript/}
 * @license Use it if you like it
 */function ZL(i){var t;i=i||"",this.ok=!1,i.charAt(0)=="#"&&(i=i.substr(1,6)),i={aliceblue:"f0f8ff",antiquewhite:"faebd7",aqua:"00ffff",aquamarine:"7fffd4",azure:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"000000",blanchedalmond:"ffebcd",blue:"0000ff",blueviolet:"8a2be2",brown:"a52a2a",burlywood:"deb887",cadetblue:"5f9ea0",chartreuse:"7fff00",chocolate:"d2691e",coral:"ff7f50",cornflowerblue:"6495ed",cornsilk:"fff8dc",crimson:"dc143c",cyan:"00ffff",darkblue:"00008b",darkcyan:"008b8b",darkgoldenrod:"b8860b",darkgray:"a9a9a9",darkgreen:"006400",darkkhaki:"bdb76b",darkmagenta:"8b008b",darkolivegreen:"556b2f",darkorange:"ff8c00",darkorchid:"9932cc",darkred:"8b0000",darksalmon:"e9967a",darkseagreen:"8fbc8f",darkslateblue:"483d8b",darkslategray:"2f4f4f",darkturquoise:"00ced1",darkviolet:"9400d3",deeppink:"ff1493",deepskyblue:"00bfff",dimgray:"696969",dodgerblue:"1e90ff",feldspar:"d19275",firebrick:"b22222",floralwhite:"fffaf0",forestgreen:"228b22",fuchsia:"ff00ff",gainsboro:"dcdcdc",ghostwhite:"f8f8ff",gold:"ffd700",goldenrod:"daa520",gray:"808080",green:"008000",greenyellow:"adff2f",honeydew:"f0fff0",hotpink:"ff69b4",indianred:"cd5c5c",indigo:"4b0082",ivory:"fffff0",khaki:"f0e68c",lavender:"e6e6fa",lavenderblush:"fff0f5",lawngreen:"7cfc00",lemonchiffon:"fffacd",lightblue:"add8e6",lightcoral:"f08080",lightcyan:"e0ffff",lightgoldenrodyellow:"fafad2",lightgrey:"d3d3d3",lightgreen:"90ee90",lightpink:"ffb6c1",lightsalmon:"ffa07a",lightseagreen:"20b2aa",lightskyblue:"87cefa",lightslateblue:"8470ff",lightslategray:"778899",lightsteelblue:"b0c4de",lightyellow:"ffffe0",lime:"00ff00",limegreen:"32cd32",linen:"faf0e6",magenta:"ff00ff",maroon:"800000",mediumaquamarine:"66cdaa",mediumblue:"0000cd",mediumorchid:"ba55d3",mediumpurple:"9370d8",mediumseagreen:"3cb371",mediumslateblue:"7b68ee",mediumspringgreen:"00fa9a",mediumturquoise:"48d1cc",mediumvioletred:"c71585",midnightblue:"191970",mintcream:"f5fffa",mistyrose:"ffe4e1",moccasin:"ffe4b5",navajowhite:"ffdead",navy:"000080",oldlace:"fdf5e6",olive:"808000",olivedrab:"6b8e23",orange:"ffa500",orangered:"ff4500",orchid:"da70d6",palegoldenrod:"eee8aa",palegreen:"98fb98",paleturquoise:"afeeee",palevioletred:"d87093",papayawhip:"ffefd5",peachpuff:"ffdab9",peru:"cd853f",pink:"ffc0cb",plum:"dda0dd",powderblue:"b0e0e6",purple:"800080",red:"ff0000",rosybrown:"bc8f8f",royalblue:"4169e1",saddlebrown:"8b4513",salmon:"fa8072",sandybrown:"f4a460",seagreen:"2e8b57",seashell:"fff5ee",sienna:"a0522d",silver:"c0c0c0",skyblue:"87ceeb",slateblue:"6a5acd",slategray:"708090",snow:"fffafa",springgreen:"00ff7f",steelblue:"4682b4",tan:"d2b48c",teal:"008080",thistle:"d8bfd8",tomato:"ff6347",turquoise:"40e0d0",violet:"ee82ee",violetred:"d02090",wheat:"f5deb3",white:"ffffff",whitesmoke:"f5f5f5",yellow:"ffff00",yellowgreen:"9acd32"}[i=(i=i.replace(/ /g,"")).toLowerCase()]||i;for(var e=[{re:/^rgb\((\d{1,3}),\s*(\d{1,3}),\s*(\d{1,3})\)$/,example:["rgb(123, 234, 45)","rgb(255,234,245)"],process:function(u){return[parseInt(u[1]),parseInt(u[2]),parseInt(u[3])]}},{re:/^(\w{2})(\w{2})(\w{2})$/,example:["#00ff00","336699"],process:function(u){return[parseInt(u[1],16),parseInt(u[2],16),parseInt(u[3],16)]}},{re:/^(\w{1})(\w{1})(\w{1})$/,example:["#fb0","f0f"],process:function(u){return[parseInt(u[1]+u[1],16),parseInt(u[2]+u[2],16),parseInt(u[3]+u[3],16)]}}],n=0;n<e.length;n++){var r=e[n].re,s=e[n].process,a=r.exec(i);a&&(t=s(a),this.r=t[0],this.g=t[1],this.b=t[2],this.ok=!0)}this.r=this.r<0||isNaN(this.r)?0:this.r>255?255:this.r,this.g=this.g<0||isNaN(this.g)?0:this.g>255?255:this.g,this.b=this.b<0||isNaN(this.b)?0:this.b>255?255:this.b,this.toRGB=function(){return"rgb("+this.r+", "+this.g+", "+this.b+")"},this.toHex=function(){var u=this.r.toString(16),c=this.g.toString(16),h=this.b.toString(16);return u.length==1&&(u="0"+u),c.length==1&&(c="0"+c),h.length==1&&(h="0"+h),"#"+u+c+h}}/**
 * @license
 * Joseph Myers does not specify a particular license for his work.
 *
 * Author: Joseph Myers
 * Accessed from: http://www.myersdaily.org/joseph/javascript/md5.js
 *
 * Modified by: Owen Leong
 */function kw(i,t){var e=i[0],n=i[1],r=i[2],s=i[3];e=Rs(e,n,r,s,t[0],7,-680876936),s=Rs(s,e,n,r,t[1],12,-389564586),r=Rs(r,s,e,n,t[2],17,606105819),n=Rs(n,r,s,e,t[3],22,-1044525330),e=Rs(e,n,r,s,t[4],7,-176418897),s=Rs(s,e,n,r,t[5],12,1200080426),r=Rs(r,s,e,n,t[6],17,-1473231341),n=Rs(n,r,s,e,t[7],22,-45705983),e=Rs(e,n,r,s,t[8],7,1770035416),s=Rs(s,e,n,r,t[9],12,-1958414417),r=Rs(r,s,e,n,t[10],17,-42063),n=Rs(n,r,s,e,t[11],22,-1990404162),e=Rs(e,n,r,s,t[12],7,1804603682),s=Rs(s,e,n,r,t[13],12,-40341101),r=Rs(r,s,e,n,t[14],17,-1502002290),e=Ds(e,n=Rs(n,r,s,e,t[15],22,1236535329),r,s,t[1],5,-165796510),s=Ds(s,e,n,r,t[6],9,-1069501632),r=Ds(r,s,e,n,t[11],14,643717713),n=Ds(n,r,s,e,t[0],20,-373897302),e=Ds(e,n,r,s,t[5],5,-701558691),s=Ds(s,e,n,r,t[10],9,38016083),r=Ds(r,s,e,n,t[15],14,-660478335),n=Ds(n,r,s,e,t[4],20,-405537848),e=Ds(e,n,r,s,t[9],5,568446438),s=Ds(s,e,n,r,t[14],9,-1019803690),r=Ds(r,s,e,n,t[3],14,-187363961),n=Ds(n,r,s,e,t[8],20,1163531501),e=Ds(e,n,r,s,t[13],5,-1444681467),s=Ds(s,e,n,r,t[2],9,-51403784),r=Ds(r,s,e,n,t[7],14,1735328473),e=Ls(e,n=Ds(n,r,s,e,t[12],20,-1926607734),r,s,t[5],4,-378558),s=Ls(s,e,n,r,t[8],11,-2022574463),r=Ls(r,s,e,n,t[11],16,1839030562),n=Ls(n,r,s,e,t[14],23,-35309556),e=Ls(e,n,r,s,t[1],4,-1530992060),s=Ls(s,e,n,r,t[4],11,1272893353),r=Ls(r,s,e,n,t[7],16,-155497632),n=Ls(n,r,s,e,t[10],23,-1094730640),e=Ls(e,n,r,s,t[13],4,681279174),s=Ls(s,e,n,r,t[0],11,-358537222),r=Ls(r,s,e,n,t[3],16,-722521979),n=Ls(n,r,s,e,t[6],23,76029189),e=Ls(e,n,r,s,t[9],4,-640364487),s=Ls(s,e,n,r,t[12],11,-421815835),r=Ls(r,s,e,n,t[15],16,530742520),e=Ms(e,n=Ls(n,r,s,e,t[2],23,-995338651),r,s,t[0],6,-198630844),s=Ms(s,e,n,r,t[7],10,1126891415),r=Ms(r,s,e,n,t[14],15,-1416354905),n=Ms(n,r,s,e,t[5],21,-57434055),e=Ms(e,n,r,s,t[12],6,1700485571),s=Ms(s,e,n,r,t[3],10,-1894986606),r=Ms(r,s,e,n,t[10],15,-1051523),n=Ms(n,r,s,e,t[1],21,-2054922799),e=Ms(e,n,r,s,t[8],6,1873313359),s=Ms(s,e,n,r,t[15],10,-30611744),r=Ms(r,s,e,n,t[6],15,-1560198380),n=Ms(n,r,s,e,t[13],21,1309151649),e=Ms(e,n,r,s,t[4],6,-145523070),s=Ms(s,e,n,r,t[11],10,-1120210379),r=Ms(r,s,e,n,t[2],15,718787259),n=Ms(n,r,s,e,t[9],21,-343485551),i[0]=Ed(e,i[0]),i[1]=Ed(n,i[1]),i[2]=Ed(r,i[2]),i[3]=Ed(s,i[3])}function XA(i,t,e,n,r,s){return t=Ed(Ed(t,i),Ed(n,s)),Ed(t<<r|t>>>32-r,e)}function Rs(i,t,e,n,r,s,a){return XA(t&e|~t&n,i,t,r,s,a)}function Ds(i,t,e,n,r,s,a){return XA(t&n|e&~n,i,t,r,s,a)}function Ls(i,t,e,n,r,s,a){return XA(t^e^n,i,t,r,s,a)}function Ms(i,t,e,n,r,s,a){return XA(e^(t|~n),i,t,r,s,a)}function tM(i){var t,e=i.length,n=[1732584193,-271733879,-1732584194,271733878];for(t=64;t<=i.length;t+=64)kw(n,vV(i.substring(t-64,t)));i=i.substring(t-64);var r=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0];for(t=0;t<i.length;t++)r[t>>2]|=i.charCodeAt(t)<<(t%4<<3);if(r[t>>2]|=128<<(t%4<<3),t>55)for(kw(n,r),t=0;t<16;t++)r[t]=0;return r[14]=8*e,kw(n,r),n}function vV(i){var t,e=[];for(t=0;t<64;t+=4)e[t>>2]=i.charCodeAt(t)+(i.charCodeAt(t+1)<<8)+(i.charCodeAt(t+2)<<16)+(i.charCodeAt(t+3)<<24);return e}i2=Pe.atob.bind(Pe),kE=Pe.btoa.bind(Pe);var K8="0123456789abcdef".split("");function yV(i){for(var t="",e=0;e<4;e++)t+=K8[i>>8*e+4&15]+K8[i>>8*e&15];return t}function xV(i){return String.fromCharCode((255&i)>>0,(65280&i)>>8,(16711680&i)>>16,(4278190080&i)>>24)}function FE(i){return tM(i).map(xV).join("")}var bV=(function(i){for(var t=0;t<i.length;t++)i[t]=yV(i[t]);return i.join("")})(tM("hello"))!="5d41402abc4b2a76b9719d911017c592";function Ed(i,t){if(bV){var e=(65535&i)+(65535&t);return(i>>16)+(t>>16)+(e>>16)<<16|65535&e}return i+t&4294967295}/**
 * @license
 * FPDF is released under a permissive license: there is no usage restriction.
 * You may embed it freely in your application (commercial or not), with or
 * without modifications.
 *
 * Reference: http://www.fpdf.org/en/script/script37.php
 */function BE(i,t){var e,n,r,s;if(i!==e){for(var a=(r=i,s=1+(256/i.length>>0),new Array(s+1).join(r)),u=[],c=0;c<256;c++)u[c]=c;var h=0;for(c=0;c<256;c++){var f=u[c];h=(h+f+a.charCodeAt(c))%256,u[c]=u[h],u[h]=f}e=i,n=u}else u=n;var g=t.length,m=0,y=0,w="";for(c=0;c<g;c++)y=(y+(f=u[m=(m+1)%256]))%256,u[m]=u[y],u[y]=f,a=u[(u[m]+u[y])%256],w+=String.fromCharCode(t.charCodeAt(c)^a);return w}/**
 * @license
 * Licensed under the MIT License.
 * http://opensource.org/licenses/mit-license
 * Author: Owen Leong (@owenl131)
 * Date: 15 Oct 2020
 * References:
 * https://www.cs.cmu.edu/~dst/Adobe/Gallery/anon21jul01-pdf-encryption.txt
 * https://github.com/foliojs/pdfkit/blob/master/lib/security.js
 * http://www.fpdf.org/en/script/script37.php
 */var Q8={print:4,modify:8,copy:16,"annot-forms":32};function Wg(i,t,e,n){this.v=1,this.r=2;var r=192;i.forEach((function(u){if(Q8.perm!==void 0)throw new Error("Invalid permission: "+u);r+=Q8[u]})),this.padding="(N^NuAd\0NV\b..\0h>/\fdSiz";var s=(t+this.padding).substr(0,32),a=(e+this.padding).substr(0,32);this.O=this.processOwnerPassword(s,a),this.P=-(1+(255^r)),this.encryptionKey=FE(s+this.O+this.lsbFirstWord(this.P)+this.hexToBytes(n)).substr(0,5),this.U=BE(this.encryptionKey,this.padding)}function Xg(i){if(/[^\u0000-\u00ff]/.test(i))throw new Error("Invalid PDF Name Object: "+i+", Only accept ASCII characters.");for(var t="",e=i.length,n=0;n<e;n++){var r=i.charCodeAt(n);r<33||r===35||r===37||r===40||r===41||r===47||r===60||r===62||r===91||r===93||r===123||r===125||r>126?t+="#"+("0"+r.toString(16)).slice(-2):t+=i[n]}return t}function Z8(i){if(Gn(i)!=="object")throw new Error("Invalid Context passed to initialize PubSub (jsPDF-module)");var t={};this.subscribe=function(e,n,r){if(r=r||!1,typeof e!="string"||typeof n!="function"||typeof r!="boolean")throw new Error("Invalid arguments passed to PubSub.subscribe (jsPDF-module)");t.hasOwnProperty(e)||(t[e]={});var s=Math.random().toString(35);return t[e][s]=[n,!!r],s},this.unsubscribe=function(e){for(var n in t)if(t[n][e])return delete t[n][e],Object.keys(t[n]).length===0&&delete t[n],!0;return!1},this.publish=function(e){if(t.hasOwnProperty(e)){var n=Array.prototype.slice.call(arguments,1),r=[];for(var s in t[e]){var a=t[e][s];try{a[0].apply(i,n)}catch(u){Pe.console&&ai.error("jsPDF PubSub Error",u.message,u)}a[1]&&r.push(s)}r.length&&r.forEach(this.unsubscribe)}},this.getTopics=function(){return t}}function uA(i){if(!(this instanceof uA))return new uA(i);var t="opacity,stroke-opacity".split(",");for(var e in i)i.hasOwnProperty(e)&&t.indexOf(e)>=0&&(this[e]=i[e]);this.id="",this.objectNumber=-1}function eM(i,t){this.gState=i,this.matrix=t,this.id="",this.objectNumber=-1}function p0(i,t,e,n,r){if(!(this instanceof p0))return new p0(i,t,e,n,r);this.type=i==="axial"?2:3,this.coords=t,this.colors=e,eM.call(this,n,r)}function Zg(i,t,e,n,r){if(!(this instanceof Zg))return new Zg(i,t,e,n,r);this.boundingBox=i,this.xStep=t,this.yStep=e,this.stream="",this.cloneIndex=0,eM.call(this,n,r)}function Ie(i){var t,e=typeof arguments[0]=="string"?arguments[0]:"p",n=arguments[1],r=arguments[2],s=arguments[3],a=[],u=1,c=16,h="S",f=null;Gn(i=i||{})==="object"&&(e=i.orientation,n=i.unit||n,r=i.format||r,s=i.compress||i.compressPdf||s,(f=i.encryption||null)!==null&&(f.userPassword=f.userPassword||"",f.ownerPassword=f.ownerPassword||"",f.userPermissions=f.userPermissions||[]),u=typeof i.userUnit=="number"?Math.abs(i.userUnit):1,i.precision!==void 0&&(t=i.precision),i.floatPrecision!==void 0&&(c=i.floatPrecision),h=i.defaultPathOperation||"S"),a=i.filters||(s===!0?["FlateEncode"]:a),n=n||"mm",e=(""+(e||"P")).toLowerCase();var g=i.putOnlyUsedFonts||!1,m={},y={internal:{},__private__:{}};y.__private__.PubSub=Z8;var w="1.3",S=y.__private__.getPdfVersion=function(){return w};y.__private__.setPdfVersion=function(L){w=L};var T={a0:[2383.94,3370.39],a1:[1683.78,2383.94],a2:[1190.55,1683.78],a3:[841.89,1190.55],a4:[595.28,841.89],a5:[419.53,595.28],a6:[297.64,419.53],a7:[209.76,297.64],a8:[147.4,209.76],a9:[104.88,147.4],a10:[73.7,104.88],b0:[2834.65,4008.19],b1:[2004.09,2834.65],b2:[1417.32,2004.09],b3:[1000.63,1417.32],b4:[708.66,1000.63],b5:[498.9,708.66],b6:[354.33,498.9],b7:[249.45,354.33],b8:[175.75,249.45],b9:[124.72,175.75],b10:[87.87,124.72],c0:[2599.37,3676.54],c1:[1836.85,2599.37],c2:[1298.27,1836.85],c3:[918.43,1298.27],c4:[649.13,918.43],c5:[459.21,649.13],c6:[323.15,459.21],c7:[229.61,323.15],c8:[161.57,229.61],c9:[113.39,161.57],c10:[79.37,113.39],dl:[311.81,623.62],letter:[612,792],"government-letter":[576,756],legal:[612,1008],"junior-legal":[576,360],ledger:[1224,792],tabloid:[792,1224],"credit-card":[153,243]};y.__private__.getPageFormats=function(){return T};var C=y.__private__.getPageFormat=function(L){return T[L]};r=r||"a4";var D={COMPAT:"compat",ADVANCED:"advanced"},R=D.COMPAT;function I(){this.saveGraphicsState(),dt(new Se(re,0,0,-re,0,hu()*re).toString()+" cm"),this.setFontSize(this.getFontSize()/re),h="n",R=D.ADVANCED}function F(){this.restoreGraphicsState(),h="S",R=D.COMPAT}var q=y.__private__.combineFontStyleAndFontWeight=function(L,X){if(L=="bold"&&X=="normal"||L=="bold"&&X==400||L=="normal"&&X=="italic"||L=="bold"&&X=="italic")throw new Error("Invalid Combination of fontweight and fontstyle");return X&&(L=X==400||X==="normal"?L==="italic"?"italic":"normal":X!=700&&X!=="bold"||L!=="normal"?(X==700?"bold":X)+""+L:"bold"),L};y.advancedAPI=function(L){var X=R===D.COMPAT;return X&&I.call(this),typeof L!="function"||(L(this),X&&F.call(this)),this},y.compatAPI=function(L){var X=R===D.ADVANCED;return X&&F.call(this),typeof L!="function"||(L(this),X&&I.call(this)),this},y.isAdvancedAPI=function(){return R===D.ADVANCED};var U,V=function(L){if(R!==D.ADVANCED)throw new Error(L+" is only available in 'advanced' API mode. You need to call advancedAPI() first.")},tt=y.roundToPrecision=y.__private__.roundToPrecision=function(L,X){var ct=t||X;if(isNaN(L)||isNaN(ct))throw new Error("Invalid argument passed to jsPDF.roundToPrecision");return L.toFixed(ct).replace(/0+$/,"")};U=y.hpf=y.__private__.hpf=typeof c=="number"?function(L){if(isNaN(L))throw new Error("Invalid argument passed to jsPDF.hpf");return tt(L,c)}:c==="smart"?function(L){if(isNaN(L))throw new Error("Invalid argument passed to jsPDF.hpf");return tt(L,L>-1&&L<1?16:5)}:function(L){if(isNaN(L))throw new Error("Invalid argument passed to jsPDF.hpf");return tt(L,16)};var J=y.f2=y.__private__.f2=function(L){if(isNaN(L))throw new Error("Invalid argument passed to jsPDF.f2");return tt(L,2)},O=y.__private__.f3=function(L){if(isNaN(L))throw new Error("Invalid argument passed to jsPDF.f3");return tt(L,3)},G=y.scale=y.__private__.scale=function(L){if(isNaN(L))throw new Error("Invalid argument passed to jsPDF.scale");return R===D.COMPAT?L*re:R===D.ADVANCED?L:void 0},et=function(L){return R===D.COMPAT?hu()-L:R===D.ADVANCED?L:void 0},st=function(L){return G(et(L))};y.__private__.setPrecision=y.setPrecision=function(L){typeof parseInt(L,10)=="number"&&(t=parseInt(L,10))};var pt,nt="00000000000000000000000000000000",at=y.__private__.getFileId=function(){return nt},ht=y.__private__.setFileId=function(L){return nt=L!==void 0&&/^[a-fA-F0-9]{32}$/.test(L)?L.toUpperCase():nt.split("").map((function(){return"ABCDEF0123456789".charAt(Math.floor(16*Math.random()))})).join(""),f!==null&&(gi=new Wg(f.userPermissions,f.userPassword,f.ownerPassword,nt)),nt};y.setFileId=function(L){return ht(L),this},y.getFileId=function(){return at()};var bt=y.__private__.convertDateToPDFDate=function(L){var X=L.getTimezoneOffset(),ct=X<0?"+":"-",vt=Math.floor(Math.abs(X/60)),Nt=Math.abs(X%60),Ot=[ct,j(vt),"'",j(Nt),"'"].join("");return["D:",L.getFullYear(),j(L.getMonth()+1),j(L.getDate()),j(L.getHours()),j(L.getMinutes()),j(L.getSeconds()),Ot].join("")},St=y.__private__.convertPDFDateToDate=function(L){var X=parseInt(L.substr(2,4),10),ct=parseInt(L.substr(6,2),10)-1,vt=parseInt(L.substr(8,2),10),Nt=parseInt(L.substr(10,2),10),Ot=parseInt(L.substr(12,2),10),jt=parseInt(L.substr(14,2),10);return new Date(X,ct,vt,Nt,Ot,jt,0)},K=y.__private__.setCreationDate=function(L){var X;if(L===void 0&&(L=new Date),L instanceof Date)X=bt(L);else{if(!/^D:(20[0-2][0-9]|203[0-7]|19[7-9][0-9])(0[0-9]|1[0-2])([0-2][0-9]|3[0-1])(0[0-9]|1[0-9]|2[0-3])(0[0-9]|[1-5][0-9])(0[0-9]|[1-5][0-9])(\+0[0-9]|\+1[0-4]|-0[0-9]|-1[0-1])'(0[0-9]|[1-5][0-9])'?$/.test(L))throw new Error("Invalid argument passed to jsPDF.setCreationDate");X=L}return pt=X},P=y.__private__.getCreationDate=function(L){var X=pt;return L==="jsDate"&&(X=St(pt)),X};y.setCreationDate=function(L){return K(L),this},y.getCreationDate=function(L){return P(L)};var Y,j=y.__private__.padd2=function(L){return("0"+parseInt(L)).slice(-2)},ut=y.__private__.padd2Hex=function(L){return("00"+(L=L.toString())).substr(L.length)},ft=0,mt=[],At=[],Tt=0,Xt=[],$t=[],ee=!1,Qt=At,le=function(){ft=0,Tt=0,At=[],mt=[],Xt=[],kr=fi(),Bn=fi()};y.__private__.setCustomOutputDestination=function(L){ee=!0,Qt=L};var Bt=function(L){ee||(Qt=L)};y.__private__.resetCustomOutputDestination=function(){ee=!1,Qt=At};var dt=y.__private__.out=function(L){return L=L.toString(),Tt+=L.length+1,Qt.push(L),Qt},Le=y.__private__.write=function(L){return dt(arguments.length===1?L.toString():Array.prototype.join.call(arguments," "))},he=y.__private__.getArrayBuffer=function(L){for(var X=L.length,ct=new ArrayBuffer(X),vt=new Uint8Array(ct);X--;)vt[X]=L.charCodeAt(X);return ct},Jt=[["Helvetica","helvetica","normal","WinAnsiEncoding"],["Helvetica-Bold","helvetica","bold","WinAnsiEncoding"],["Helvetica-Oblique","helvetica","italic","WinAnsiEncoding"],["Helvetica-BoldOblique","helvetica","bolditalic","WinAnsiEncoding"],["Courier","courier","normal","WinAnsiEncoding"],["Courier-Bold","courier","bold","WinAnsiEncoding"],["Courier-Oblique","courier","italic","WinAnsiEncoding"],["Courier-BoldOblique","courier","bolditalic","WinAnsiEncoding"],["Times-Roman","times","normal","WinAnsiEncoding"],["Times-Bold","times","bold","WinAnsiEncoding"],["Times-Italic","times","italic","WinAnsiEncoding"],["Times-BoldItalic","times","bolditalic","WinAnsiEncoding"],["ZapfDingbats","zapfdingbats","normal",null],["Symbol","symbol","normal",null]];y.__private__.getStandardFonts=function(){return Jt};var te=i.fontSize||16;y.__private__.setFontSize=y.setFontSize=function(L){return te=R===D.ADVANCED?L/re:L,this};var ne,Zt=y.__private__.getFontSize=y.getFontSize=function(){return R===D.COMPAT?te:te*re},pe=i.R2L||!1;y.__private__.setR2L=y.setR2L=function(L){return pe=L,this},y.__private__.getR2L=y.getR2L=function(){return pe};var ye,Oe=y.__private__.setZoomMode=function(L){var X=[void 0,null,"fullwidth","fullheight","fullpage","original"];if(/^(?:\d+\.\d*|\d*\.\d+|\d+)%$/.test(L))ne=L;else if(isNaN(L)){if(X.indexOf(L)===-1)throw new Error('zoom must be Integer (e.g. 2), a percentage Value (e.g. 300%) or fullwidth, fullheight, fullpage, original. "'+L+'" is not recognized.');ne=L}else ne=parseInt(L,10)};y.__private__.getZoomMode=function(){return ne};var ke,Xe=y.__private__.setPageMode=function(L){if([void 0,null,"UseNone","UseOutlines","UseThumbs","FullScreen"].indexOf(L)==-1)throw new Error('Page mode must be one of UseNone, UseOutlines, UseThumbs, or FullScreen. "'+L+'" is not recognized.');ye=L};y.__private__.getPageMode=function(){return ye};var mn=y.__private__.setLayoutMode=function(L){if([void 0,null,"continuous","single","twoleft","tworight","two"].indexOf(L)==-1)throw new Error('Layout mode must be one of continuous, single, twoleft, tworight. "'+L+'" is not recognized.');ke=L};y.__private__.getLayoutMode=function(){return ke},y.__private__.setDisplayMode=y.setDisplayMode=function(L,X,ct){return Oe(L),mn(X),Xe(ct),this};var Ee={title:"",subject:"",author:"",keywords:"",creator:""};y.__private__.getDocumentProperty=function(L){if(Object.keys(Ee).indexOf(L)===-1)throw new Error("Invalid argument passed to jsPDF.getDocumentProperty");return Ee[L]},y.__private__.getDocumentProperties=function(){return Ee},y.__private__.setDocumentProperties=y.setProperties=y.setDocumentProperties=function(L){for(var X in Ee)Ee.hasOwnProperty(X)&&L[X]&&(Ee[X]=L[X]);return this},y.__private__.setDocumentProperty=function(L,X){if(Object.keys(Ee).indexOf(L)===-1)throw new Error("Invalid arguments passed to jsPDF.setDocumentProperty");return Ee[L]=X};var Ye,re,Ci,Ze,Vn,nn={},tn={},lo=[],vn={},cl={},kn={},Pr={},ns=null,Cn=0,Te=[],rn=new Z8(y),Ta=i.hotfixes||[],Gi={},As={},br=[],Se=function L(X,ct,vt,Nt,Ot,jt){if(!(this instanceof L))return new L(X,ct,vt,Nt,Ot,jt);isNaN(X)&&(X=1),isNaN(ct)&&(ct=0),isNaN(vt)&&(vt=0),isNaN(Nt)&&(Nt=1),isNaN(Ot)&&(Ot=0),isNaN(jt)&&(jt=0),this._matrix=[X,ct,vt,Nt,Ot,jt]};Object.defineProperty(Se.prototype,"sx",{get:function(){return this._matrix[0]},set:function(L){this._matrix[0]=L}}),Object.defineProperty(Se.prototype,"shy",{get:function(){return this._matrix[1]},set:function(L){this._matrix[1]=L}}),Object.defineProperty(Se.prototype,"shx",{get:function(){return this._matrix[2]},set:function(L){this._matrix[2]=L}}),Object.defineProperty(Se.prototype,"sy",{get:function(){return this._matrix[3]},set:function(L){this._matrix[3]=L}}),Object.defineProperty(Se.prototype,"tx",{get:function(){return this._matrix[4]},set:function(L){this._matrix[4]=L}}),Object.defineProperty(Se.prototype,"ty",{get:function(){return this._matrix[5]},set:function(L){this._matrix[5]=L}}),Object.defineProperty(Se.prototype,"a",{get:function(){return this._matrix[0]},set:function(L){this._matrix[0]=L}}),Object.defineProperty(Se.prototype,"b",{get:function(){return this._matrix[1]},set:function(L){this._matrix[1]=L}}),Object.defineProperty(Se.prototype,"c",{get:function(){return this._matrix[2]},set:function(L){this._matrix[2]=L}}),Object.defineProperty(Se.prototype,"d",{get:function(){return this._matrix[3]},set:function(L){this._matrix[3]=L}}),Object.defineProperty(Se.prototype,"e",{get:function(){return this._matrix[4]},set:function(L){this._matrix[4]=L}}),Object.defineProperty(Se.prototype,"f",{get:function(){return this._matrix[5]},set:function(L){this._matrix[5]=L}}),Object.defineProperty(Se.prototype,"rotation",{get:function(){return Math.atan2(this.shx,this.sx)}}),Object.defineProperty(Se.prototype,"scaleX",{get:function(){return this.decompose().scale.sx}}),Object.defineProperty(Se.prototype,"scaleY",{get:function(){return this.decompose().scale.sy}}),Object.defineProperty(Se.prototype,"isIdentity",{get:function(){return this.sx===1&&this.shy===0&&this.shx===0&&this.sy===1&&this.tx===0&&this.ty===0}}),Se.prototype.join=function(L){return[this.sx,this.shy,this.shx,this.sy,this.tx,this.ty].map(U).join(L)},Se.prototype.multiply=function(L){var X=L.sx*this.sx+L.shy*this.shx,ct=L.sx*this.shy+L.shy*this.sy,vt=L.shx*this.sx+L.sy*this.shx,Nt=L.shx*this.shy+L.sy*this.sy,Ot=L.tx*this.sx+L.ty*this.shx+this.tx,jt=L.tx*this.shy+L.ty*this.sy+this.ty;return new Se(X,ct,vt,Nt,Ot,jt)},Se.prototype.decompose=function(){var L=this.sx,X=this.shy,ct=this.shx,vt=this.sy,Nt=this.tx,Ot=this.ty,jt=Math.sqrt(L*L+X*X),ue=(L/=jt)*ct+(X/=jt)*vt;ct-=L*ue,vt-=X*ue;var _e=Math.sqrt(ct*ct+vt*vt);return ue/=_e,L*(vt/=_e)<X*(ct/=_e)&&(L=-L,X=-X,ue=-ue,jt=-jt),{scale:new Se(jt,0,0,_e,0,0),translate:new Se(1,0,0,1,Nt,Ot),rotate:new Se(L,X,-X,L,0,0),skew:new Se(1,0,ue,1,0,0)}},Se.prototype.toString=function(L){return this.join(" ")},Se.prototype.inversed=function(){var L=this.sx,X=this.shy,ct=this.shx,vt=this.sy,Nt=this.tx,Ot=this.ty,jt=1/(L*vt-X*ct),ue=vt*jt,_e=-X*jt,Fe=-ct*jt,Me=L*jt;return new Se(ue,_e,Fe,Me,-ue*Nt-Fe*Ot,-_e*Nt-Me*Ot)},Se.prototype.applyToPoint=function(L){var X=L.x*this.sx+L.y*this.shx+this.tx,ct=L.x*this.shy+L.y*this.sy+this.ty;return new vc(X,ct)},Se.prototype.applyToRectangle=function(L){var X=this.applyToPoint(L),ct=this.applyToPoint(new vc(L.x+L.w,L.y+L.h));return new $d(X.x,X.y,ct.x-X.x,ct.y-X.y)},Se.prototype.clone=function(){var L=this.sx,X=this.shy,ct=this.shx,vt=this.sy,Nt=this.tx,Ot=this.ty;return new Se(L,X,ct,vt,Nt,Ot)},y.Matrix=Se;var is=y.matrixMult=function(L,X){return X.multiply(L)},ti=new Se(1,0,0,1,0,0);y.unitMatrix=y.identityMatrix=ti;var ci=function(L,X){if(!cl[L]){var ct=(X instanceof p0?"Sh":"P")+(Object.keys(vn).length+1).toString(10);X.id=ct,cl[L]=ct,vn[ct]=X,rn.publish("addPattern",X)}};y.ShadingPattern=p0,y.TilingPattern=Zg,y.addShadingPattern=function(L,X){return V("addShadingPattern()"),ci(L,X),this},y.beginTilingPattern=function(L){V("beginTilingPattern()"),Qp(L.boundingBox[0],L.boundingBox[1],L.boundingBox[2]-L.boundingBox[0],L.boundingBox[3]-L.boundingBox[1],L.matrix)},y.endTilingPattern=function(L,X){V("endTilingPattern()"),X.stream=$t[Y].join(`
`),ci(L,X),rn.publish("endTilingPattern",X),br.pop().restore()};var hi=y.__private__.newObject=function(){var L=fi();return _s(L,!0),L},fi=y.__private__.newObjectDeferred=function(){return ft++,mt[ft]=function(){return Tt},ft},_s=function(L,X){return X=typeof X=="boolean"&&X,mt[L]=Tt,X&&dt(L+" 0 obj"),L},cc=y.__private__.newAdditionalObject=function(){var L={objId:fi(),content:""};return Xt.push(L),L},kr=fi(),Bn=fi(),di=y.__private__.decodeColorString=function(L){var X=L.split(" ");if(X.length!==2||X[1]!=="g"&&X[1]!=="G")X.length===5&&(X[4]==="k"||X[4]==="K")&&(X=[(1-X[0])*(1-X[3]),(1-X[1])*(1-X[3]),(1-X[2])*(1-X[3]),"r"]);else{var ct=parseFloat(X[0]);X=[ct,ct,ct,"r"]}for(var vt="#",Nt=0;Nt<3;Nt++)vt+=("0"+Math.floor(255*parseFloat(X[Nt])).toString(16)).slice(-2);return vt},Fr=y.__private__.encodeColorString=function(L){var X;typeof L=="string"&&(L={ch1:L});var ct=L.ch1,vt=L.ch2,Nt=L.ch3,Ot=L.ch4,jt=L.pdfColorType==="draw"?["G","RG","K"]:["g","rg","k"];if(typeof ct=="string"&&ct.charAt(0)!=="#"){var ue=new ZL(ct);if(ue.ok)ct=ue.toHex();else if(!/^\d*\.?\d*$/.test(ct))throw new Error('Invalid color "'+ct+'" passed to jsPDF.encodeColorString.')}if(typeof ct=="string"&&/^#[0-9A-Fa-f]{3}$/.test(ct)&&(ct="#"+ct[1]+ct[1]+ct[2]+ct[2]+ct[3]+ct[3]),typeof ct=="string"&&/^#[0-9A-Fa-f]{6}$/.test(ct)){var _e=parseInt(ct.substr(1),16);ct=_e>>16&255,vt=_e>>8&255,Nt=255&_e}if(vt===void 0||Ot===void 0&&ct===vt&&vt===Nt)if(typeof ct=="string")X=ct+" "+jt[0];else switch(L.precision){case 2:X=J(ct/255)+" "+jt[0];break;case 3:default:X=O(ct/255)+" "+jt[0]}else if(Ot===void 0||Gn(Ot)==="object"){if(Ot&&!isNaN(Ot.a)&&Ot.a===0)return X=["1.","1.","1.",jt[1]].join(" ");if(typeof ct=="string")X=[ct,vt,Nt,jt[1]].join(" ");else switch(L.precision){case 2:X=[J(ct/255),J(vt/255),J(Nt/255),jt[1]].join(" ");break;default:case 3:X=[O(ct/255),O(vt/255),O(Nt/255),jt[1]].join(" ")}}else if(typeof ct=="string")X=[ct,vt,Nt,Ot,jt[2]].join(" ");else switch(L.precision){case 2:X=[J(ct),J(vt),J(Nt),J(Ot),jt[2]].join(" ");break;case 3:default:X=[O(ct),O(vt),O(Nt),O(Ot),jt[2]].join(" ")}return X},uo=y.__private__.getFilters=function(){return a},co=y.__private__.putStream=function(L){var X=(L=L||{}).data||"",ct=L.filters||uo(),vt=L.alreadyAppliedFilters||[],Nt=L.addLength1||!1,Ot=X.length,jt=L.objectId,ue=function(Ar){return Ar};if(f!==null&&jt===void 0)throw new Error("ObjectId must be passed to putStream for file encryption");f!==null&&(ue=gi.encryptor(jt,0));var _e={};ct===!0&&(ct=["FlateEncode"]);var Fe=L.additionalKeyValues||[],Me=(_e=Ie.API.processDataByFilters!==void 0?Ie.API.processDataByFilters(X,ct):{data:X,reverseChain:[]}).reverseChain+(Array.isArray(vt)?vt.join(" "):vt.toString());if(_e.data.length!==0&&(Fe.push({key:"Length",value:_e.data.length}),Nt===!0&&Fe.push({key:"Length1",value:Ot})),Me.length!=0)if(Me.split("/").length-1==1)Fe.push({key:"Filter",value:Me});else{Fe.push({key:"Filter",value:"["+Me+"]"});for(var hn=0;hn<Fe.length;hn+=1)if(Fe[hn].key==="DecodeParms"){for(var mi=[],Ai=0;Ai<_e.reverseChain.split("/").length-1;Ai+=1)mi.push("null");mi.push(Fe[hn].value),Fe[hn].value="["+mi.join(" ")+"]"}}dt("<<");for(var Fi=0;Fi<Fe.length;Fi++)dt("/"+Fe[Fi].key+" "+Fe[Fi].value);dt(">>"),_e.data.length!==0&&(dt("stream"),dt(ue(_e.data)),dt("endstream"))},Na=y.__private__.putPage=function(L){var X=L.number,ct=L.data,vt=L.objId,Nt=L.contentsObjId;_s(vt,!0),dt("<</Type /Page"),dt("/Parent "+L.rootDictionaryObjId+" 0 R"),dt("/Resources "+L.resourceDictionaryObjId+" 0 R"),dt("/MediaBox ["+parseFloat(U(L.mediaBox.bottomLeftX))+" "+parseFloat(U(L.mediaBox.bottomLeftY))+" "+U(L.mediaBox.topRightX)+" "+U(L.mediaBox.topRightY)+"]"),L.cropBox!==null&&dt("/CropBox ["+U(L.cropBox.bottomLeftX)+" "+U(L.cropBox.bottomLeftY)+" "+U(L.cropBox.topRightX)+" "+U(L.cropBox.topRightY)+"]"),L.bleedBox!==null&&dt("/BleedBox ["+U(L.bleedBox.bottomLeftX)+" "+U(L.bleedBox.bottomLeftY)+" "+U(L.bleedBox.topRightX)+" "+U(L.bleedBox.topRightY)+"]"),L.trimBox!==null&&dt("/TrimBox ["+U(L.trimBox.bottomLeftX)+" "+U(L.trimBox.bottomLeftY)+" "+U(L.trimBox.topRightX)+" "+U(L.trimBox.topRightY)+"]"),L.artBox!==null&&dt("/ArtBox ["+U(L.artBox.bottomLeftX)+" "+U(L.artBox.bottomLeftY)+" "+U(L.artBox.topRightX)+" "+U(L.artBox.topRightY)+"]"),typeof L.userUnit=="number"&&L.userUnit!==1&&dt("/UserUnit "+L.userUnit),rn.publish("putPage",{objId:vt,pageContext:Te[X],pageNumber:X,page:ct}),dt("/Contents "+Nt+" 0 R"),dt(">>"),dt("endobj");var Ot=ct.join(`
`);return R===D.ADVANCED&&(Ot+=`
Q`),_s(Nt,!0),co({data:Ot,filters:uo(),objectId:Nt}),dt("endobj"),vt},Zl=y.__private__.putPages=function(){var L,X,ct=[];for(L=1;L<=Cn;L++)Te[L].objId=fi(),Te[L].contentsObjId=fi();for(L=1;L<=Cn;L++)ct.push(Na({number:L,data:$t[L],objId:Te[L].objId,contentsObjId:Te[L].contentsObjId,mediaBox:Te[L].mediaBox,cropBox:Te[L].cropBox,bleedBox:Te[L].bleedBox,trimBox:Te[L].trimBox,artBox:Te[L].artBox,userUnit:Te[L].userUnit,rootDictionaryObjId:kr,resourceDictionaryObjId:Bn}));_s(kr,!0),dt("<</Type /Pages");var vt="/Kids [";for(X=0;X<Cn;X++)vt+=ct[X]+" 0 R ";dt(vt+"]"),dt("/Count "+Cn),dt(">>"),dt("endobj"),rn.publish("postPutPages")},Ra=function(L){rn.publish("putFont",{font:L,out:dt,newObject:hi,putStream:co}),L.isAlreadyPutted!==!0&&(L.objectNumber=hi(),dt("<<"),dt("/Type /Font"),dt("/BaseFont /"+Xg(L.postScriptName)),dt("/Subtype /Type1"),typeof L.encoding=="string"&&dt("/Encoding /"+L.encoding),dt("/FirstChar 32"),dt("/LastChar 255"),dt(">>"),dt("endobj"))},tu=function(){for(var L in nn)nn.hasOwnProperty(L)&&(g===!1||g===!0&&m.hasOwnProperty(L))&&Ra(nn[L])},Go=function(L){L.objectNumber=hi();var X=[];X.push({key:"Type",value:"/XObject"}),X.push({key:"Subtype",value:"/Form"}),X.push({key:"BBox",value:"["+[U(L.x),U(L.y),U(L.x+L.width),U(L.y+L.height)].join(" ")+"]"}),X.push({key:"Matrix",value:"["+L.matrix.toString()+"]"});var ct=L.pages[1].join(`
`);co({data:ct,additionalKeyValues:X,objectId:L.objectNumber}),dt("endobj")},Vo=function(){for(var L in Gi)Gi.hasOwnProperty(L)&&Go(Gi[L])},eu=function(L,X){var ct,vt=[],Nt=1/(X-1);for(ct=0;ct<1;ct+=Nt)vt.push(ct);if(vt.push(1),L[0].offset!=0){var Ot={offset:0,color:L[0].color};L.unshift(Ot)}if(L[L.length-1].offset!=1){var jt={offset:1,color:L[L.length-1].color};L.push(jt)}for(var ue="",_e=0,Fe=0;Fe<vt.length;Fe++){for(ct=vt[Fe];ct>L[_e+1].offset;)_e++;var Me=L[_e].offset,hn=(ct-Me)/(L[_e+1].offset-Me),mi=L[_e].color,Ai=L[_e+1].color;ue+=ut(Math.round((1-hn)*mi[0]+hn*Ai[0]).toString(16))+ut(Math.round((1-hn)*mi[1]+hn*Ai[1]).toString(16))+ut(Math.round((1-hn)*mi[2]+hn*Ai[2]).toString(16))}return ue.trim()},nu=function(L,X){X||(X=21);var ct=hi(),vt=eu(L.colors,X),Nt=[];Nt.push({key:"FunctionType",value:"0"}),Nt.push({key:"Domain",value:"[0.0 1.0]"}),Nt.push({key:"Size",value:"["+X+"]"}),Nt.push({key:"BitsPerSample",value:"8"}),Nt.push({key:"Range",value:"[0.0 1.0 0.0 1.0 0.0 1.0]"}),Nt.push({key:"Decode",value:"[0.0 1.0 0.0 1.0 0.0 1.0]"}),co({data:vt,additionalKeyValues:Nt,alreadyAppliedFilters:["/ASCIIHexDecode"],objectId:ct}),dt("endobj"),L.objectNumber=hi(),dt("<< /ShadingType "+L.type),dt("/ColorSpace /DeviceRGB");var Ot="/Coords ["+U(parseFloat(L.coords[0]))+" "+U(parseFloat(L.coords[1]))+" ";L.type===2?Ot+=U(parseFloat(L.coords[2]))+" "+U(parseFloat(L.coords[3])):Ot+=U(parseFloat(L.coords[2]))+" "+U(parseFloat(L.coords[3]))+" "+U(parseFloat(L.coords[4]))+" "+U(parseFloat(L.coords[5])),dt(Ot+="]"),L.matrix&&dt("/Matrix ["+L.matrix.toString()+"]"),dt("/Function "+ct+" 0 R"),dt("/Extend [true true]"),dt(">>"),dt("endobj")},Vi=function(L,X){var ct=fi(),vt=hi();X.push({resourcesOid:ct,objectOid:vt}),L.objectNumber=vt;var Nt=[];Nt.push({key:"Type",value:"/Pattern"}),Nt.push({key:"PatternType",value:"1"}),Nt.push({key:"PaintType",value:"1"}),Nt.push({key:"TilingType",value:"1"}),Nt.push({key:"BBox",value:"["+L.boundingBox.map(U).join(" ")+"]"}),Nt.push({key:"XStep",value:U(L.xStep)}),Nt.push({key:"YStep",value:U(L.yStep)}),Nt.push({key:"Resources",value:ct+" 0 R"}),L.matrix&&Nt.push({key:"Matrix",value:"["+L.matrix.toString()+"]"}),co({data:L.stream,additionalKeyValues:Nt,objectId:L.objectNumber}),dt("endobj")},hc=function(L){var X;for(X in vn)vn.hasOwnProperty(X)&&(vn[X]instanceof p0?nu(vn[X]):vn[X]instanceof Zg&&Vi(vn[X],L))},Id=function(L){for(var X in L.objectNumber=hi(),dt("<<"),L)switch(X){case"opacity":dt("/ca "+J(L[X]));break;case"stroke-opacity":dt("/CA "+J(L[X]))}dt(">>"),dt("endobj")},hl=function(){var L;for(L in kn)kn.hasOwnProperty(L)&&Id(kn[L])},Da=function(){for(var L in dt("/XObject <<"),Gi)Gi.hasOwnProperty(L)&&Gi[L].objectNumber>=0&&dt("/"+L+" "+Gi[L].objectNumber+" 0 R");rn.publish("putXobjectDict"),dt(">>")},q1=function(){gi.oid=hi(),dt("<<"),dt("/Filter /Standard"),dt("/V "+gi.v),dt("/R "+gi.r),dt("/U <"+gi.toHexString(gi.U)+">"),dt("/O <"+gi.toHexString(gi.O)+">"),dt("/P "+gi.P),dt(">>"),dt("endobj")},Pd=function(){for(var L in dt("/Font <<"),nn)nn.hasOwnProperty(L)&&(g===!1||g===!0&&m.hasOwnProperty(L))&&dt("/"+L+" "+nn[L].objectNumber+" 0 R");dt(">>")},Vp=function(){if(Object.keys(vn).length>0){for(var L in dt("/Shading <<"),vn)vn.hasOwnProperty(L)&&vn[L]instanceof p0&&vn[L].objectNumber>=0&&dt("/"+L+" "+vn[L].objectNumber+" 0 R");rn.publish("putShadingPatternDict"),dt(">>")}},Oh=function(L){if(Object.keys(vn).length>0){for(var X in dt("/Pattern <<"),vn)vn.hasOwnProperty(X)&&vn[X]instanceof y.TilingPattern&&vn[X].objectNumber>=0&&vn[X].objectNumber<L&&dt("/"+X+" "+vn[X].objectNumber+" 0 R");rn.publish("putTilingPatternDict"),dt(">>")}},Uh=function(){if(Object.keys(kn).length>0){var L;for(L in dt("/ExtGState <<"),kn)kn.hasOwnProperty(L)&&kn[L].objectNumber>=0&&dt("/"+L+" "+kn[L].objectNumber+" 0 R");rn.publish("putGStateDict"),dt(">>")}},pi=function(L){_s(L.resourcesOid,!0),dt("<<"),dt("/ProcSet [/PDF /Text /ImageB /ImageC /ImageI]"),Pd(),Vp(),Oh(L.objectOid),Uh(),Da(),dt(">>"),dt("endobj")},ho=function(){var L=[];tu(),hl(),Vo(),hc(L),rn.publish("putResources"),L.forEach(pi),pi({resourcesOid:Bn,objectOid:Number.MAX_SAFE_INTEGER}),rn.publish("postPutResources")},rs=function(){rn.publish("putAdditionalObjects");for(var L=0;L<Xt.length;L++){var X=Xt[L];_s(X.objId,!0),dt(X.content),dt("endobj")}rn.publish("postPutAdditionalObjects")},kd=function(L){tn[L.fontName]=tn[L.fontName]||{},tn[L.fontName][L.fontStyle]=L.id},Fd=function(L,X,ct,vt,Nt){var Ot={id:"F"+(Object.keys(nn).length+1).toString(10),postScriptName:L,fontName:X,fontStyle:ct,encoding:vt,isStandardFont:Nt||!1,metadata:{}};return rn.publish("addFont",{font:Ot,instance:this}),nn[Ot.id]=Ot,kd(Ot),Ot.id},Bd=function(L){for(var X=0,ct=Jt.length;X<ct;X++){var vt=Fd.call(this,L[X][0],L[X][1],L[X][2],Jt[X][3],!0);g===!1&&(m[vt]=!0);var Nt=L[X][0].split("-");kd({id:vt,fontName:Nt[0],fontStyle:Nt[1]||""})}rn.publish("addFonts",{fonts:nn,dictionary:tn})},fo=function(L){return L.foo=function(){try{return L.apply(this,arguments)}catch(vt){var X=vt.stack||"";~X.indexOf(" at ")&&(X=X.split(" at ")[1]);var ct="Error in function "+X.split(`
`)[0].split("<")[0]+": "+vt.message;if(!Pe.console)throw new Error(ct);Pe.console.error(ct,vt),Pe.alert&&alert(ct)}},L.foo.bar=L,L.foo},fl=function(L,X){var ct,vt,Nt,Ot,jt,ue,_e,Fe,Me;if(Nt=(X=X||{}).sourceEncoding||"Unicode",jt=X.outputEncoding,(X.autoencode||jt)&&nn[Ye].metadata&&nn[Ye].metadata[Nt]&&nn[Ye].metadata[Nt].encoding&&(Ot=nn[Ye].metadata[Nt].encoding,!jt&&nn[Ye].encoding&&(jt=nn[Ye].encoding),!jt&&Ot.codePages&&(jt=Ot.codePages[0]),typeof jt=="string"&&(jt=Ot[jt]),jt)){for(_e=!1,ue=[],ct=0,vt=L.length;ct<vt;ct++)(Fe=jt[L.charCodeAt(ct)])?ue.push(String.fromCharCode(Fe)):ue.push(L[ct]),ue[ct].charCodeAt(0)>>8&&(_e=!0);L=ue.join("")}for(ct=L.length;_e===void 0&&ct!==0;)L.charCodeAt(ct-1)>>8&&(_e=!0),ct--;if(!_e)return L;for(ue=X.noBOM?[]:[254,255],ct=0,vt=L.length;ct<vt;ct++){if((Me=(Fe=L.charCodeAt(ct))>>8)>>8)throw new Error("Character at position "+ct+" of string '"+L+"' exceeds 16bits. Cannot be encoded into UCS-2 BE");ue.push(Me),ue.push(Fe-(Me<<8))}return String.fromCharCode.apply(void 0,ue)},ws=y.__private__.pdfEscape=y.pdfEscape=function(L,X){return fl(L,X).replace(/\\/g,"\\\\").replace(/\(/g,"\\(").replace(/\)/g,"\\)")},Br=y.__private__.beginPage=function(L){$t[++Cn]=[],Te[Cn]={objId:0,contentsObjId:0,userUnit:Number(u),artBox:null,bleedBox:null,cropBox:null,trimBox:null,mediaBox:{bottomLeftX:0,bottomLeftY:0,topRightX:Number(L[0]),topRightY:Number(L[1])}},qh(Cn),Bt($t[Y])},Hh=function(L,X){var ct,vt,Nt;switch(e=X||e,typeof L=="string"&&(ct=C(L.toLowerCase()),Array.isArray(ct)&&(vt=ct[0],Nt=ct[1])),Array.isArray(L)&&(vt=L[0]*re,Nt=L[1]*re),isNaN(vt)&&(vt=r[0],Nt=r[1]),(vt>14400||Nt>14400)&&(ai.warn("A page in a PDF can not be wider or taller than 14400 userUnit. jsPDF limits the width/height to 14400"),vt=Math.min(14400,vt),Nt=Math.min(14400,Nt)),r=[vt,Nt],e.substr(0,1)){case"l":Nt>vt&&(r=[Nt,vt]);break;case"p":vt>Nt&&(r=[Nt,vt])}Br(r),gc(ar),dt(Wo),Vd!==0&&dt(Vd+" J"),Yd!==0&&dt(Yd+" j"),rn.publish("addPage",{pageNumber:Cn})},Yp=function(L){L>0&&L<=Cn&&($t.splice(L,1),Te.splice(L,1),Cn--,Y>Cn&&(Y=Cn),this.setPage(Y))},qh=function(L){L>0&&L<=Cn&&(Y=L)},iu=y.__private__.getNumberOfPages=y.getNumberOfPages=function(){return $t.length-1},Od=function(L,X,ct){var vt,Nt=void 0;return ct=ct||{},L=L!==void 0?L:nn[Ye].fontName,X=X!==void 0?X:nn[Ye].fontStyle,vt=L.toLowerCase(),tn[vt]!==void 0&&tn[vt][X]!==void 0?Nt=tn[vt][X]:tn[L]!==void 0&&tn[L][X]!==void 0?Nt=tn[L][X]:ct.disableWarning===!1&&ai.warn("Unable to look up font label for font '"+L+"', '"+X+"'. Refer to getFontList() for available fonts."),Nt||ct.noFallback||(Nt=tn.times[X])==null&&(Nt=tn.times.normal),Nt},$p=y.__private__.putInfo=function(){var L=hi(),X=function(vt){return vt};for(var ct in f!==null&&(X=gi.encryptor(L,0)),dt("<<"),dt("/Producer ("+ws(X("jsPDF "+Ie.version))+")"),Ee)Ee.hasOwnProperty(ct)&&Ee[ct]&&dt("/"+ct.substr(0,1).toUpperCase()+ct.substr(1)+" ("+ws(X(Ee[ct]))+")");dt("/CreationDate ("+ws(X(pt))+")"),dt(">>"),dt("endobj")},La=y.__private__.putCatalog=function(L){var X=(L=L||{}).rootDictionaryObjId||kr;switch(hi(),dt("<<"),dt("/Type /Catalog"),dt("/Pages "+X+" 0 R"),ne||(ne="fullwidth"),ne){case"fullwidth":dt("/OpenAction [3 0 R /FitH null]");break;case"fullheight":dt("/OpenAction [3 0 R /FitV null]");break;case"fullpage":dt("/OpenAction [3 0 R /Fit]");break;case"original":dt("/OpenAction [3 0 R /XYZ null null 1]");break;default:var ct=""+ne;ct.substr(ct.length-1)==="%"&&(ne=parseInt(ne)/100),typeof ne=="number"&&dt("/OpenAction [3 0 R /XYZ null null "+J(ne)+"]")}switch(ke||(ke="continuous"),ke){case"continuous":dt("/PageLayout /OneColumn");break;case"single":dt("/PageLayout /SinglePage");break;case"two":case"twoleft":dt("/PageLayout /TwoColumnLeft");break;case"tworight":dt("/PageLayout /TwoColumnRight")}ye&&dt("/PageMode /"+ye),rn.publish("putCatalog"),dt(">>"),dt("endobj")},z1=y.__private__.putTrailer=function(){dt("trailer"),dt("<<"),dt("/Size "+(ft+1)),dt("/Root "+ft+" 0 R"),dt("/Info "+(ft-1)+" 0 R"),f!==null&&dt("/Encrypt "+gi.oid+" 0 R"),dt("/ID [ <"+nt+"> <"+nt+"> ]"),dt(">>")},Wp=y.__private__.putHeader=function(){dt("%PDF-"+w),dt("%")},Xp=y.__private__.putXRef=function(){var L="0000000000";dt("xref"),dt("0 "+(ft+1)),dt("0000000000 65535 f ");for(var X=1;X<=ft;X++)typeof mt[X]=="function"?dt((L+mt[X]()).slice(-10)+" 00000 n "):mt[X]!==void 0?dt((L+mt[X]).slice(-10)+" 00000 n "):dt("0000000000 00000 n ")},Yo=y.__private__.buildDocument=function(){le(),Bt(At),rn.publish("buildDocument"),Wp(),Zl(),rs(),ho(),f!==null&&q1(),$p(),La();var L=Tt;return Xp(),z1(),dt("startxref"),dt(""+L),dt("%%EOF"),Bt($t[Y]),At.join(`
`)},zh=y.__private__.getBlob=function(L){return new Blob([he(L)],{type:"application/pdf"})},Gh=y.output=y.__private__.output=fo((function(L,X){switch(typeof(X=X||{})=="string"?X={filename:X}:X.filename=X.filename||"generated.pdf",L){case void 0:return Yo();case"save":y.save(X.filename);break;case"arraybuffer":return he(Yo());case"blob":return zh(Yo());case"bloburi":case"bloburl":if(Pe.URL!==void 0&&typeof Pe.URL.createObjectURL=="function")return Pe.URL&&Pe.URL.createObjectURL(zh(Yo()))||void 0;ai.warn("bloburl is not supported by your system, because URL.createObjectURL is not supported by your browser.");break;case"datauristring":case"dataurlstring":var ct="",vt=Yo();try{ct=kE(vt)}catch{ct=kE(unescape(encodeURIComponent(vt)))}return"data:application/pdf;filename="+X.filename+";base64,"+ct;case"pdfobjectnewwindow":if(Object.prototype.toString.call(Pe)==="[object Window]"){var Nt="https://cdnjs.cloudflare.com/ajax/libs/pdfobject/2.1.1/pdfobject.min.js",Ot=' integrity="sha512-4ze/a9/4jqu+tX9dfOqJYSvyYd5M6qum/3HpCLr+/Jqf0whc37VUbkpNGHR7/8pSnCFw47T1fmIpwBV7UySh3g==" crossorigin="anonymous"';X.pdfObjectUrl&&(Nt=X.pdfObjectUrl,Ot="");var jt='<html><style>html, body { padding: 0; margin: 0; } iframe { width: 100%; height: 100%; border: 0;}  </style><body><script src="'+Nt+'"'+Ot+'><\/script><script >PDFObject.embed("'+this.output("dataurlstring")+'", '+JSON.stringify(X)+");<\/script></body></html>",ue=Pe.open();return ue!==null&&ue.document.write(jt),ue}throw new Error("The option pdfobjectnewwindow just works in a browser-environment.");case"pdfjsnewwindow":if(Object.prototype.toString.call(Pe)==="[object Window]"){var _e='<html><style>html, body { padding: 0; margin: 0; } iframe { width: 100%; height: 100%; border: 0;}  </style><body><iframe id="pdfViewer" src="'+(X.pdfJsUrl||"examples/PDF.js/web/viewer.html")+"?file=&downloadName="+X.filename+'" width="500px" height="400px" /></body></html>',Fe=Pe.open();if(Fe!==null){Fe.document.write(_e);var Me=this;Fe.document.documentElement.querySelector("#pdfViewer").onload=function(){Fe.document.title=X.filename,Fe.document.documentElement.querySelector("#pdfViewer").contentWindow.PDFViewerApplication.open(Me.output("bloburl"))}}return Fe}throw new Error("The option pdfjsnewwindow just works in a browser-environment.");case"dataurlnewwindow":if(Object.prototype.toString.call(Pe)!=="[object Window]")throw new Error("The option dataurlnewwindow just works in a browser-environment.");var hn='<html><style>html, body { padding: 0; margin: 0; } iframe { width: 100%; height: 100%; border: 0;}  </style><body><iframe src="'+this.output("datauristring",X)+'"></iframe></body></html>',mi=Pe.open();if(mi!==null&&(mi.document.write(hn),mi.document.title=X.filename),mi||typeof safari>"u")return mi;break;case"datauri":case"dataurl":return Pe.document.location.href=this.output("datauristring",X);default:return null}})),fc=function(L){return Array.isArray(Ta)===!0&&Ta.indexOf(L)>-1};switch(n){case"pt":re=1;break;case"mm":re=72/25.4;break;case"cm":re=72/2.54;break;case"in":re=72;break;case"px":re=fc("px_scaling")==1?.75:96/72;break;case"pc":case"em":re=12;break;case"ex":re=6;break;default:if(typeof n!="number")throw new Error("Invalid unit: "+n);re=n}var gi=null;K(),ht();var Ud=function(L){return f!==null?gi.encryptor(L,0):function(X){return X}},Vh=y.__private__.getPageInfo=y.getPageInfo=function(L){if(isNaN(L)||L%1!=0)throw new Error("Invalid argument passed to jsPDF.getPageInfo");return{objId:Te[L].objId,pageNumber:L,pageContext:Te[L]}},Ce=y.__private__.getPageInfoByObjId=function(L){if(isNaN(L)||L%1!=0)throw new Error("Invalid argument passed to jsPDF.getPageInfoByObjId");for(var X in Te)if(Te[X].objId===L)break;return Vh(X)},ru=y.__private__.getCurrentPageInfo=y.getCurrentPageInfo=function(){return{objId:Te[Y].objId,pageNumber:Y,pageContext:Te[Y]}};y.addPage=function(){return Hh.apply(this,arguments),this},y.setPage=function(){return qh.apply(this,arguments),Bt.call(this,$t[Y]),this},y.insertPage=function(L){return this.addPage(),this.movePage(Y,L),this},y.movePage=function(L,X){var ct,vt;if(L>X){ct=$t[L],vt=Te[L];for(var Nt=L;Nt>X;Nt--)$t[Nt]=$t[Nt-1],Te[Nt]=Te[Nt-1];$t[X]=ct,Te[X]=vt,this.setPage(X)}else if(L<X){ct=$t[L],vt=Te[L];for(var Ot=L;Ot<X;Ot++)$t[Ot]=$t[Ot+1],Te[Ot]=Te[Ot+1];$t[X]=ct,Te[X]=vt,this.setPage(X)}return this},y.deletePage=function(){return Yp.apply(this,arguments),this},y.__private__.text=y.text=function(L,X,ct,vt,Nt){var Ot,jt,ue,_e,Fe,Me,hn,mi,Ai,Fi=(vt=vt||{}).scope||this;if(typeof L=="number"&&typeof X=="number"&&(typeof ct=="string"||Array.isArray(ct))){var Ar=ct;ct=X,X=L,L=Ar}if(arguments[3]instanceof Se?(V("The transform parameter of text() with a Matrix value"),Ai=Nt):(ue=arguments[4],_e=arguments[5],Gn(hn=arguments[3])==="object"&&hn!==null||(typeof ue=="string"&&(_e=ue,ue=null),typeof hn=="string"&&(_e=hn,hn=null),typeof hn=="number"&&(ue=hn,hn=null),vt={flags:hn,angle:ue,align:_e})),isNaN(X)||isNaN(ct)||L==null)throw new Error("Invalid arguments passed to jsPDF.text");if(L.length===0)return Fi;var tr="",Or=!1,Vs=typeof vt.lineHeightFactor=="number"?vt.lineHeightFactor:lu,Ia=Fi.internal.scaleFactor;function Zp(sn){return sn=sn.split("	").join(Array(vt.TabLen||9).join(" ")),ws(sn,hn)}function Jh(sn){for(var Ln,_n=sn.concat(),vi=[],Qo=_n.length;Qo--;)typeof(Ln=_n.shift())=="string"?vi.push(Ln):Array.isArray(sn)&&(Ln.length===1||Ln[1]===void 0&&Ln[2]===void 0)?vi.push(Ln[0]):vi.push([Ln[0],Ln[1],Ln[2]]);return vi}function Kh(sn,Ln){var _n;if(typeof sn=="string")_n=Ln(sn)[0];else if(Array.isArray(sn)){for(var vi,Qo,yu=sn.concat(),xl=[],sf=yu.length;sf--;)typeof(vi=yu.shift())=="string"?xl.push(Ln(vi)[0]):Array.isArray(vi)&&typeof vi[0]=="string"&&(Qo=Ln(vi[0],vi[1],vi[2]),xl.push([Qo[0],Qo[1],Qo[2]]));_n=xl}return _n}var Pa=!1,pl=!0;if(typeof L=="string")Pa=!0;else if(Array.isArray(L)){var jd=L.concat();jt=[];for(var gl,lr=jd.length;lr--;)(typeof(gl=jd.shift())!="string"||Array.isArray(gl)&&typeof gl[0]!="string")&&(pl=!1);Pa=pl}if(Pa===!1)throw new Error('Type of text must be string or Array. "'+L+'" is not recognized.');typeof L=="string"&&(L=L.match(/[\r?\n]/)?L.split(/\r\n|\r|\n/g):[L]);var xc=te/Fi.internal.scaleFactor,fu=xc*(Vs-1);switch(vt.baseline){case"bottom":ct-=fu;break;case"top":ct+=xc-fu;break;case"hanging":ct+=xc-2*fu;break;case"middle":ct+=xc/2-fu}if((Me=vt.maxWidth||0)>0&&(typeof L=="string"?L=Fi.splitTextToSize(L,Me):Object.prototype.toString.call(L)==="[object Array]"&&(L=L.reduce((function(sn,Ln){return sn.concat(Fi.splitTextToSize(Ln,Me))}),[]))),Ot={text:L,x:X,y:ct,options:vt,mutex:{pdfEscape:ws,activeFontKey:Ye,fonts:nn,activeFontSize:te}},rn.publish("preProcessText",Ot),L=Ot.text,ue=(vt=Ot.options).angle,!(Ai instanceof Se)&&ue&&typeof ue=="number"){ue*=Math.PI/180,vt.rotationDirection===0&&(ue=-ue),R===D.ADVANCED&&(ue=-ue);var du=Math.cos(ue),Qh=Math.sin(ue);Ai=new Se(du,Qh,-Qh,du,0,0)}else ue&&ue instanceof Se&&(Ai=ue);R!==D.ADVANCED||Ai||(Ai=ti),(Fe=vt.charSpace||Xh)!==void 0&&(tr+=U(G(Fe))+` Tc
`,this.setCharSpace(this.getCharSpace()||0)),(mi=vt.horizontalScale)!==void 0&&(tr+=U(100*mi)+` Tz
`),vt.lang;var ss=-1,tg=vt.renderingMode!==void 0?vt.renderingMode:vt.stroke,Jd=Fi.internal.getCurrentPageInfo().pageContext;switch(tg){case 0:case!1:case"fill":ss=0;break;case 1:case!0:case"stroke":ss=1;break;case 2:case"fillThenStroke":ss=2;break;case 3:case"invisible":ss=3;break;case 4:case"fillAndAddForClipping":ss=4;break;case 5:case"strokeAndAddPathForClipping":ss=5;break;case 6:case"fillThenStrokeAndAddToPathForClipping":ss=6;break;case 7:case"addToPathForClipping":ss=7}var eg=Jd.usedRenderingMode!==void 0?Jd.usedRenderingMode:-1;ss!==-1?tr+=ss+` Tr
`:eg!==-1&&(tr+=`0 Tr
`),ss!==-1&&(Jd.usedRenderingMode=ss),_e=vt.align||"left";var vo,Zh=te*Vs,ng=Fi.internal.pageSize.getWidth(),Ur=nn[Ye];Fe=vt.charSpace||Xh,Me=vt.maxWidth||0,hn=Object.assign({autoencode:!0,noBOM:!0},vt.flags);var yo=[],pu=function(sn){return Fi.getStringUnitWidth(sn,{font:Ur,charSpace:Fe,fontSize:te,doKerning:!1})*te/Ia};if(Object.prototype.toString.call(L)==="[object Array]"){var os;jt=Jh(L),_e!=="left"&&(vo=jt.map(pu));var Hr,ml=0;if(_e==="right"){X-=vo[0],L=[],lr=jt.length;for(var Xo=0;Xo<lr;Xo++)Xo===0?(Hr=mo(X),os=Gs(ct)):(Hr=G(ml-vo[Xo]),os=-Zh),L.push([jt[Xo],Hr,os]),ml=vo[Xo]}else if(_e==="center"){X-=vo[0]/2,L=[],lr=jt.length;for(var vl=0;vl<lr;vl++)vl===0?(Hr=mo(X),os=Gs(ct)):(Hr=G((ml-vo[vl])/2),os=-Zh),L.push([jt[vl],Hr,os]),ml=vo[vl]}else if(_e==="left"){L=[],lr=jt.length;for(var jo=0;jo<lr;jo++)L.push(jt[jo])}else if(_e==="justify"&&Ur.encoding==="Identity-H"){L=[],lr=jt.length,Me=Me!==0?Me:ng;for(var Jo=0,ei=0;ei<lr;ei++)if(os=ei===0?Gs(ct):-Zh,Hr=ei===0?mo(X):Jo,ei<lr-1){var bc=G((Me-vo[ei])/(jt[ei].split(" ").length-1)),qr=jt[ei].split(" ");L.push([qr[0]+" ",Hr,os]),Jo=0;for(var ur=1;ur<qr.length;ur++){var Ko=(pu(qr[ur-1]+" "+qr[ur])-pu(qr[ur]))*Ia+bc;ur==qr.length-1?L.push([qr[ur],Ko,0]):L.push([qr[ur]+" ",Ko,0]),Jo-=Ko}}else L.push([jt[ei],Hr,os]);L.push(["",Jo,0])}else{if(_e!=="justify")throw new Error('Unrecognized alignment option, use "left", "center", "right" or "justify".');for(L=[],lr=jt.length,Me=Me!==0?Me:ng,ei=0;ei<lr;ei++)os=ei===0?Gs(ct):-Zh,Hr=ei===0?mo(X):0,ei<lr-1?yo.push(U(G((Me-vo[ei])/(jt[ei].split(" ").length-1)))):yo.push(0),L.push([jt[ei],Hr,os])}}var tf=typeof vt.R2L=="boolean"?vt.R2L:pe;tf===!0&&(L=Kh(L,(function(sn,Ln,_n){return[sn.split("").reverse().join(""),Ln,_n]}))),Ot={text:L,x:X,y:ct,options:vt,mutex:{pdfEscape:ws,activeFontKey:Ye,fonts:nn,activeFontSize:te}},rn.publish("postProcessText",Ot),L=Ot.text,Or=Ot.mutex.isHex||!1;var ef=nn[Ye].encoding;ef!=="WinAnsiEncoding"&&ef!=="StandardEncoding"||(L=Kh(L,(function(sn,Ln,_n){return[Zp(sn),Ln,_n]}))),jt=Jh(L),L=[];for(var Ys,gu,yl,mu=0,nf=1,Ac=Array.isArray(jt[0])?nf:mu,vu="",rf=function(sn,Ln,_n){var vi="";return _n instanceof Se?(_n=typeof vt.angle=="number"?is(_n,new Se(1,0,0,1,sn,Ln)):is(new Se(1,0,0,1,sn,Ln),_n),R===D.ADVANCED&&(_n=is(new Se(1,0,0,-1,0,0),_n)),vi=_n.join(" ")+` Tm
`):vi=U(sn)+" "+U(Ln)+` Td
`,vi},$s=0;$s<jt.length;$s++){switch(vu="",Ac){case nf:yl=(Or?"<":"(")+jt[$s][0]+(Or?">":")"),Ys=parseFloat(jt[$s][1]),gu=parseFloat(jt[$s][2]);break;case mu:yl=(Or?"<":"(")+jt[$s]+(Or?">":")"),Ys=mo(X),gu=Gs(ct)}yo!==void 0&&yo[$s]!==void 0&&(vu=yo[$s]+` Tw
`),$s===0?L.push(vu+rf(Ys,gu,Ai)+yl):Ac===mu?L.push(vu+yl):Ac===nf&&L.push(vu+rf(Ys,gu,Ai)+yl)}L=Ac===mu?L.join(` Tj
T* `):L.join(` Tj
`),L+=` Tj
`;var Es=`BT
/`;return Es+=Ye+" "+te+` Tf
`,Es+=U(te*Vs)+` TL
`,Es+=mc+`
`,Es+=tr,Es+=L,dt(Es+="ET"),m[Ye]=!0,Fi};var jp=y.__private__.clip=y.clip=function(L){return dt(L==="evenodd"?"W*":"W"),this};y.clipEvenOdd=function(){return jp("evenodd")},y.__private__.discardPath=y.discardPath=function(){return dt("n"),this};var po=y.__private__.isValidStyle=function(L){var X=!1;return[void 0,null,"S","D","F","DF","FD","f","f*","B","B*","n"].indexOf(L)!==-1&&(X=!0),X};y.__private__.setDefaultPathOperation=y.setDefaultPathOperation=function(L){return po(L)&&(h=L),this};var Hd=y.__private__.getStyle=y.getStyle=function(L){var X=h;switch(L){case"D":case"S":X="S";break;case"F":X="f";break;case"FD":case"DF":X="B";break;case"f":case"f*":case"B":case"B*":X=L}return X},su=y.close=function(){return dt("h"),this};y.stroke=function(){return dt("S"),this},y.fill=function(L){return Ss("f",L),this},y.fillEvenOdd=function(L){return Ss("f*",L),this},y.fillStroke=function(L){return Ss("B",L),this},y.fillStrokeEvenOdd=function(L){return Ss("B*",L),this};var Ss=function(L,X){Gn(X)==="object"?Ma(X,L):dt(L)},dc=function(L){L===null||R===D.ADVANCED&&L===void 0||(L=Hd(L),dt(L))};function pc(L,X,ct,vt,Nt){var Ot=new Zg(X||this.boundingBox,ct||this.xStep,vt||this.yStep,this.gState,Nt||this.matrix);Ot.stream=this.stream;var jt=L+"$$"+this.cloneIndex+++"$$";return ci(jt,Ot),Ot}var Ma=function(L,X){var ct=cl[L.key],vt=vn[ct];if(vt instanceof p0)dt("q"),dt(qd(X)),vt.gState&&y.setGState(vt.gState),dt(L.matrix.toString()+" cm"),dt("/"+ct+" sh"),dt("Q");else if(vt instanceof Zg){var Nt=new Se(1,0,0,-1,0,hu());L.matrix&&(Nt=Nt.multiply(L.matrix||ti),ct=pc.call(vt,L.key,L.boundingBox,L.xStep,L.yStep,Nt).id),dt("q"),dt("/Pattern cs"),dt("/"+ct+" scn"),vt.gState&&y.setGState(vt.gState),dt(X),dt("Q")}},qd=function(L){switch(L){case"f":case"F":return"W n";case"f*":return"W* n";case"B":return"W S";case"B*":return"W* S";case"S":return"W S";case"n":return"W n"}},ou=y.moveTo=function(L,X){return dt(U(G(L))+" "+U(st(X))+" m"),this},au=y.lineTo=function(L,X){return dt(U(G(L))+" "+U(st(X))+" l"),this},$o=y.curveTo=function(L,X,ct,vt,Nt,Ot){return dt([U(G(L)),U(st(X)),U(G(ct)),U(st(vt)),U(G(Nt)),U(st(Ot)),"c"].join(" ")),this};y.__private__.line=y.line=function(L,X,ct,vt,Nt){if(isNaN(L)||isNaN(X)||isNaN(ct)||isNaN(vt)||!po(Nt))throw new Error("Invalid arguments passed to jsPDF.line");return R===D.COMPAT?this.lines([[ct-L,vt-X]],L,X,[1,1],Nt||"S"):this.lines([[ct-L,vt-X]],L,X,[1,1]).stroke()},y.__private__.lines=y.lines=function(L,X,ct,vt,Nt,Ot){var jt,ue,_e,Fe,Me,hn,mi,Ai,Fi,Ar,tr,Or;if(typeof L=="number"&&(Or=ct,ct=X,X=L,L=Or),vt=vt||[1,1],Ot=Ot||!1,isNaN(X)||isNaN(ct)||!Array.isArray(L)||!Array.isArray(vt)||!po(Nt)||typeof Ot!="boolean")throw new Error("Invalid arguments passed to jsPDF.lines");for(ou(X,ct),jt=vt[0],ue=vt[1],Fe=L.length,Ar=X,tr=ct,_e=0;_e<Fe;_e++)(Me=L[_e]).length===2?(Ar=Me[0]*jt+Ar,tr=Me[1]*ue+tr,au(Ar,tr)):(hn=Me[0]*jt+Ar,mi=Me[1]*ue+tr,Ai=Me[2]*jt+Ar,Fi=Me[3]*ue+tr,Ar=Me[4]*jt+Ar,tr=Me[5]*ue+tr,$o(hn,mi,Ai,Fi,Ar,tr));return Ot&&su(),dc(Nt),this},y.path=function(L){for(var X=0;X<L.length;X++){var ct=L[X],vt=ct.c;switch(ct.op){case"m":ou(vt[0],vt[1]);break;case"l":au(vt[0],vt[1]);break;case"c":$o.apply(this,vt);break;case"h":su()}}return this},y.__private__.rect=y.rect=function(L,X,ct,vt,Nt){if(isNaN(L)||isNaN(X)||isNaN(ct)||isNaN(vt)||!po(Nt))throw new Error("Invalid arguments passed to jsPDF.rect");return R===D.COMPAT&&(vt=-vt),dt([U(G(L)),U(st(X)),U(G(ct)),U(G(vt)),"re"].join(" ")),dc(Nt),this},y.__private__.triangle=y.triangle=function(L,X,ct,vt,Nt,Ot,jt){if(isNaN(L)||isNaN(X)||isNaN(ct)||isNaN(vt)||isNaN(Nt)||isNaN(Ot)||!po(jt))throw new Error("Invalid arguments passed to jsPDF.triangle");return this.lines([[ct-L,vt-X],[Nt-ct,Ot-vt],[L-Nt,X-Ot]],L,X,[1,1],jt,!0),this},y.__private__.roundedRect=y.roundedRect=function(L,X,ct,vt,Nt,Ot,jt){if(isNaN(L)||isNaN(X)||isNaN(ct)||isNaN(vt)||isNaN(Nt)||isNaN(Ot)||!po(jt))throw new Error("Invalid arguments passed to jsPDF.roundedRect");var ue=4/3*(Math.SQRT2-1);return Nt=Math.min(Nt,.5*ct),Ot=Math.min(Ot,.5*vt),this.lines([[ct-2*Nt,0],[Nt*ue,0,Nt,Ot-Ot*ue,Nt,Ot],[0,vt-2*Ot],[0,Ot*ue,-Nt*ue,Ot,-Nt,Ot],[2*Nt-ct,0],[-Nt*ue,0,-Nt,-Ot*ue,-Nt,-Ot],[0,2*Ot-vt],[0,-Ot*ue,Nt*ue,-Ot,Nt,-Ot]],L+Nt,X,[1,1],jt,!0),this},y.__private__.ellipse=y.ellipse=function(L,X,ct,vt,Nt){if(isNaN(L)||isNaN(X)||isNaN(ct)||isNaN(vt)||!po(Nt))throw new Error("Invalid arguments passed to jsPDF.ellipse");var Ot=4/3*(Math.SQRT2-1)*ct,jt=4/3*(Math.SQRT2-1)*vt;return ou(L+ct,X),$o(L+ct,X-jt,L+Ot,X-vt,L,X-vt),$o(L-Ot,X-vt,L-ct,X-jt,L-ct,X),$o(L-ct,X+jt,L-Ot,X+vt,L,X+vt),$o(L+Ot,X+vt,L+ct,X+jt,L+ct,X),dc(Nt),this},y.__private__.circle=y.circle=function(L,X,ct,vt){if(isNaN(L)||isNaN(X)||isNaN(ct)||!po(vt))throw new Error("Invalid arguments passed to jsPDF.circle");return this.ellipse(L,X,ct,ct,vt)},y.setFont=function(L,X,ct){return ct&&(X=q(X,ct)),Ye=Od(L,X,{disableWarning:!1}),this};var Yh=y.__private__.getFont=y.getFont=function(){return nn[Od.apply(y,arguments)]};y.__private__.getFontList=y.getFontList=function(){var L,X,ct={};for(L in tn)if(tn.hasOwnProperty(L))for(X in ct[L]=[],tn[L])tn[L].hasOwnProperty(X)&&ct[L].push(X);return ct},y.addFont=function(L,X,ct,vt,Nt){var Ot=["StandardEncoding","MacRomanEncoding","Identity-H","WinAnsiEncoding"];return arguments[3]&&Ot.indexOf(arguments[3])!==-1?Nt=arguments[3]:arguments[3]&&Ot.indexOf(arguments[3])==-1&&(ct=q(ct,vt)),Nt=Nt||"Identity-H",Fd.call(this,L,X,ct,Nt)};var lu,ar=i.lineWidth||.200025,go=y.__private__.getLineWidth=y.getLineWidth=function(){return ar},gc=y.__private__.setLineWidth=y.setLineWidth=function(L){return ar=L,dt(U(G(L))+" w"),this};y.__private__.setLineDash=Ie.API.setLineDash=Ie.API.setLineDashPattern=function(L,X){if(L=L||[],X=X||0,isNaN(X)||!Array.isArray(L))throw new Error("Invalid arguments passed to jsPDF.setLineDash");return L=L.map((function(ct){return U(G(ct))})).join(" "),X=U(G(X)),dt("["+L+"] "+X+" d"),this};var uu=y.__private__.getLineHeight=y.getLineHeight=function(){return te*lu};y.__private__.getLineHeight=y.getLineHeight=function(){return te*lu};var Jp=y.__private__.setLineHeightFactor=y.setLineHeightFactor=function(L){return typeof(L=L||1.15)=="number"&&(lu=L),this},$h=y.__private__.getLineHeightFactor=y.getLineHeightFactor=function(){return lu};Jp(i.lineHeight);var mo=y.__private__.getHorizontalCoordinate=function(L){return G(L)},Gs=y.__private__.getVerticalCoordinate=function(L){return R===D.ADVANCED?L:Te[Y].mediaBox.topRightY-Te[Y].mediaBox.bottomLeftY-G(L)},Wh=y.__private__.getHorizontalCoordinateString=y.getHorizontalCoordinateString=function(L){return U(mo(L))},dl=y.__private__.getVerticalCoordinateString=y.getVerticalCoordinateString=function(L){return U(Gs(L))},Wo=i.strokeColor||"0 G";y.__private__.getStrokeColor=y.getDrawColor=function(){return di(Wo)},y.__private__.setStrokeColor=y.setDrawColor=function(L,X,ct,vt){return Wo=Fr({ch1:L,ch2:X,ch3:ct,ch4:vt,pdfColorType:"draw",precision:2}),dt(Wo),this};var zd=i.fillColor||"0 g";y.__private__.getFillColor=y.getFillColor=function(){return di(zd)},y.__private__.setFillColor=y.setFillColor=function(L,X,ct,vt){return zd=Fr({ch1:L,ch2:X,ch3:ct,ch4:vt,pdfColorType:"fill",precision:2}),dt(zd),this};var mc=i.textColor||"0 g",Gd=y.__private__.getTextColor=y.getTextColor=function(){return di(mc)};y.__private__.setTextColor=y.setTextColor=function(L,X,ct,vt){return mc=Fr({ch1:L,ch2:X,ch3:ct,ch4:vt,pdfColorType:"text",precision:3}),this};var Xh=i.charSpace,G1=y.__private__.getCharSpace=y.getCharSpace=function(){return parseFloat(Xh||0)};y.__private__.setCharSpace=y.setCharSpace=function(L){if(isNaN(L))throw new Error("Invalid argument passed to jsPDF.setCharSpace");return Xh=L,this};var Vd=0;y.CapJoinStyles={0:0,butt:0,but:0,miter:0,1:1,round:1,rounded:1,circle:1,2:2,projecting:2,project:2,square:2,bevel:2},y.__private__.setLineCap=y.setLineCap=function(L){var X=y.CapJoinStyles[L];if(X===void 0)throw new Error("Line cap style of '"+L+"' is not recognized. See or extend .CapJoinStyles property for valid styles");return Vd=X,dt(X+" J"),this};var Yd=0;y.__private__.setLineJoin=y.setLineJoin=function(L){var X=y.CapJoinStyles[L];if(X===void 0)throw new Error("Line join style of '"+L+"' is not recognized. See or extend .CapJoinStyles property for valid styles");return Yd=X,dt(X+" j"),this},y.__private__.setLineMiterLimit=y.__private__.setMiterLimit=y.setLineMiterLimit=y.setMiterLimit=function(L){if(L=L||0,isNaN(L))throw new Error("Invalid argument passed to jsPDF.setLineMiterLimit");return dt(U(G(L))+" M"),this},y.GState=uA,y.setGState=function(L){(L=typeof L=="string"?kn[Pr[L]]:Kp(null,L)).equals(ns)||(dt("/"+L.id+" gs"),ns=L)};var Kp=function(L,X){if(!L||!Pr[L]){var ct=!1;for(var vt in kn)if(kn.hasOwnProperty(vt)&&kn[vt].equals(X)){ct=!0;break}if(ct)X=kn[vt];else{var Nt="GS"+(Object.keys(kn).length+1).toString(10);kn[Nt]=X,X.id=Nt}return L&&(Pr[L]=X.id),rn.publish("addGState",X),X}};y.addGState=function(L,X){return Kp(L,X),this},y.saveGraphicsState=function(){return dt("q"),lo.push({key:Ye,size:te,color:mc}),this},y.restoreGraphicsState=function(){dt("Q");var L=lo.pop();return Ye=L.key,te=L.size,mc=L.color,ns=null,this},y.setCurrentTransformationMatrix=function(L){return dt(L.toString()+" cm"),this},y.comment=function(L){return dt("#"+L),this};var vc=function(L,X){var ct=L||0;Object.defineProperty(this,"x",{enumerable:!0,get:function(){return ct},set:function(Ot){isNaN(Ot)||(ct=parseFloat(Ot))}});var vt=X||0;Object.defineProperty(this,"y",{enumerable:!0,get:function(){return vt},set:function(Ot){isNaN(Ot)||(vt=parseFloat(Ot))}});var Nt="pt";return Object.defineProperty(this,"type",{enumerable:!0,get:function(){return Nt},set:function(Ot){Nt=Ot.toString()}}),this},$d=function(L,X,ct,vt){vc.call(this,L,X),this.type="rect";var Nt=ct||0;Object.defineProperty(this,"w",{enumerable:!0,get:function(){return Nt},set:function(jt){isNaN(jt)||(Nt=parseFloat(jt))}});var Ot=vt||0;return Object.defineProperty(this,"h",{enumerable:!0,get:function(){return Ot},set:function(jt){isNaN(jt)||(Ot=parseFloat(jt))}}),this},Wd=function(){this.page=Cn,this.currentPage=Y,this.pages=$t.slice(0),this.pagesContext=Te.slice(0),this.x=Ci,this.y=Ze,this.matrix=Vn,this.width=yc(Y),this.height=hu(Y),this.outputDestination=Qt,this.id="",this.objectNumber=-1};Wd.prototype.restore=function(){Cn=this.page,Y=this.currentPage,Te=this.pagesContext,$t=this.pages,Ci=this.x,Ze=this.y,Vn=this.matrix,Xd(Y,this.width),jh(Y,this.height),Qt=this.outputDestination};var Qp=function(L,X,ct,vt,Nt){br.push(new Wd),Cn=Y=0,$t=[],Ci=L,Ze=X,Vn=Nt,Br([ct,vt])},V1=function(L){if(As[L])br.pop().restore();else{var X=new Wd,ct="Xo"+(Object.keys(Gi).length+1).toString(10);X.id=ct,As[L]=ct,Gi[ct]=X,rn.publish("addFormObject",X),br.pop().restore()}};for(var cu in y.beginFormObject=function(L,X,ct,vt,Nt){return Qp(L,X,ct,vt,Nt),this},y.endFormObject=function(L){return V1(L),this},y.doFormObject=function(L,X){var ct=Gi[As[L]];return dt("q"),dt(X.toString()+" cm"),dt("/"+ct.id+" Do"),dt("Q"),this},y.getFormObject=function(L){var X=Gi[As[L]];return{x:X.x,y:X.y,width:X.width,height:X.height,matrix:X.matrix}},y.save=function(L,X){return L=L||"generated.pdf",(X=X||{}).returnPromise=X.returnPromise||!1,X.returnPromise===!1?(d0(zh(Yo()),L),typeof d0.unload=="function"&&Pe.setTimeout&&setTimeout(d0.unload,911),this):new Promise((function(ct,vt){try{var Nt=d0(zh(Yo()),L);typeof d0.unload=="function"&&Pe.setTimeout&&setTimeout(d0.unload,911),ct(Nt)}catch(Ot){vt(Ot.message)}}))},Ie.API)Ie.API.hasOwnProperty(cu)&&(cu==="events"&&Ie.API.events.length?(function(L,X){var ct,vt,Nt;for(Nt=X.length-1;Nt!==-1;Nt--)ct=X[Nt][0],vt=X[Nt][1],L.subscribe.apply(L,[ct].concat(typeof vt=="function"?[vt]:vt))})(rn,Ie.API.events):y[cu]=Ie.API[cu]);var yc=y.getPageWidth=function(L){return(Te[L=L||Y].mediaBox.topRightX-Te[L].mediaBox.bottomLeftX)/re},Xd=y.setPageWidth=function(L,X){Te[L].mediaBox.topRightX=X*re+Te[L].mediaBox.bottomLeftX},hu=y.getPageHeight=function(L){return(Te[L=L||Y].mediaBox.topRightY-Te[L].mediaBox.bottomLeftY)/re},jh=y.setPageHeight=function(L,X){Te[L].mediaBox.topRightY=X*re+Te[L].mediaBox.bottomLeftY};return y.internal={pdfEscape:ws,getStyle:Hd,getFont:Yh,getFontSize:Zt,getCharSpace:G1,getTextColor:Gd,getLineHeight:uu,getLineHeightFactor:$h,getLineWidth:go,write:Le,getHorizontalCoordinate:mo,getVerticalCoordinate:Gs,getCoordinateString:Wh,getVerticalCoordinateString:dl,collections:{},newObject:hi,newAdditionalObject:cc,newObjectDeferred:fi,newObjectDeferredBegin:_s,getFilters:uo,putStream:co,events:rn,scaleFactor:re,pageSize:{getWidth:function(){return yc(Y)},setWidth:function(L){Xd(Y,L)},getHeight:function(){return hu(Y)},setHeight:function(L){jh(Y,L)}},encryptionOptions:f,encryption:gi,getEncryptor:Ud,output:Gh,getNumberOfPages:iu,pages:$t,out:dt,f2:J,f3:O,getPageInfo:Vh,getPageInfoByObjId:Ce,getCurrentPageInfo:ru,getPDFVersion:S,Point:vc,Rectangle:$d,Matrix:Se,hasHotfix:fc},Object.defineProperty(y.internal.pageSize,"width",{get:function(){return yc(Y)},set:function(L){Xd(Y,L)},enumerable:!0,configurable:!0}),Object.defineProperty(y.internal.pageSize,"height",{get:function(){return hu(Y)},set:function(L){jh(Y,L)},enumerable:!0,configurable:!0}),Bd.call(y,Jt),Ye="F1",Hh(r,e),rn.publish("initialized"),y}Wg.prototype.lsbFirstWord=function(i){return String.fromCharCode(i>>0&255,i>>8&255,i>>16&255,i>>24&255)},Wg.prototype.toHexString=function(i){return i.split("").map((function(t){return("0"+(255&t.charCodeAt(0)).toString(16)).slice(-2)})).join("")},Wg.prototype.hexToBytes=function(i){for(var t=[],e=0;e<i.length;e+=2)t.push(String.fromCharCode(parseInt(i.substr(e,2),16)));return t.join("")},Wg.prototype.processOwnerPassword=function(i,t){return BE(FE(t).substr(0,5),i)},Wg.prototype.encryptor=function(i,t){var e=FE(this.encryptionKey+String.fromCharCode(255&i,i>>8&255,i>>16&255,255&t,t>>8&255)).substr(0,10);return function(n){return BE(e,n)}},uA.prototype.equals=function(i){var t,e="id,objectNumber,equals";if(!i||Gn(i)!==Gn(this))return!1;var n=0;for(t in this)if(!(e.indexOf(t)>=0)){if(this.hasOwnProperty(t)&&!i.hasOwnProperty(t)||this[t]!==i[t])return!1;n++}for(t in i)i.hasOwnProperty(t)&&e.indexOf(t)<0&&n--;return n===0},Ie.API={events:[]},Ie.version="2.5.2";var Ki=Ie.API,vC=1,Gp=function(i){return i.replace(/\\/g,"\\\\").replace(/\(/g,"\\(").replace(/\)/g,"\\)")},kg=function(i){return i.replace(/\\\\/g,"\\").replace(/\\\(/g,"(").replace(/\\\)/g,")")},ze=function(i){return i.toFixed(2)},Df=function(i){return i.toFixed(5)};Ki.__acroform__={};var zo=function(i,t){i.prototype=Object.create(t.prototype),i.prototype.constructor=i},tN=function(i){return i*vC},ku=function(i){var t=new iM,e=ve.internal.getHeight(i)||0,n=ve.internal.getWidth(i)||0;return t.BBox=[0,0,Number(ze(n)),Number(ze(e))],t},AV=Ki.__acroform__.setBit=function(i,t){if(i=i||0,t=t||0,isNaN(i)||isNaN(t))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.setBit");return i|=1<<t},_V=Ki.__acroform__.clearBit=function(i,t){if(i=i||0,t=t||0,isNaN(i)||isNaN(t))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.clearBit");return i&=~(1<<t)},wV=Ki.__acroform__.getBit=function(i,t){if(isNaN(i)||isNaN(t))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.getBit");return(i&1<<t)==0?0:1},rr=Ki.__acroform__.getBitForPdf=function(i,t){if(isNaN(i)||isNaN(t))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.getBitForPdf");return wV(i,t-1)},sr=Ki.__acroform__.setBitForPdf=function(i,t){if(isNaN(i)||isNaN(t))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.setBitForPdf");return AV(i,t-1)},or=Ki.__acroform__.clearBitForPdf=function(i,t){if(isNaN(i)||isNaN(t))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.clearBitForPdf");return _V(i,t-1)},SV=Ki.__acroform__.calculateCoordinates=function(i,t){var e=t.internal.getHorizontalCoordinate,n=t.internal.getVerticalCoordinate,r=i[0],s=i[1],a=i[2],u=i[3],c={};return c.lowerLeft_X=e(r)||0,c.lowerLeft_Y=n(s+u)||0,c.upperRight_X=e(r+a)||0,c.upperRight_Y=n(s)||0,[Number(ze(c.lowerLeft_X)),Number(ze(c.lowerLeft_Y)),Number(ze(c.upperRight_X)),Number(ze(c.upperRight_Y))]},EV=function(i){if(i.appearanceStreamContent)return i.appearanceStreamContent;if(i.V||i.DV){var t=[],e=i._V||i.DV,n=OE(i,e),r=i.scope.internal.getFont(i.fontName,i.fontStyle).id;t.push("/Tx BMC"),t.push("q"),t.push("BT"),t.push(i.scope.__private__.encodeColorString(i.color)),t.push("/"+r+" "+ze(n.fontSize)+" Tf"),t.push("1 0 0 1 0 0 Tm"),t.push(n.text),t.push("ET"),t.push("Q"),t.push("EMC");var s=ku(i);return s.scope=i.scope,s.stream=t.join(`
`),s}},OE=function(i,t){var e=i.fontSize===0?i.maxFontSize:i.fontSize,n={text:"",fontSize:""},r=(t=(t=t.substr(0,1)=="("?t.substr(1):t).substr(t.length-1)==")"?t.substr(0,t.length-1):t).split(" ");r=i.multiline?r.map((function(O){return O.split(`
`)})):r.map((function(O){return[O]}));var s=e,a=ve.internal.getHeight(i)||0;a=a<0?-a:a;var u=ve.internal.getWidth(i)||0;u=u<0?-u:u;var c=function(O,G,et){if(O+1<r.length){var st=G+" "+r[O+1][0];return g5(st,i,et).width<=u-4}return!1};s++;t:for(;s>0;){t="",s--;var h,f,g=g5("3",i,s).height,m=i.multiline?a-s:(a-g)/2,y=m+=2,w=0,S=0,T=0;if(s<=0){t=`(...) Tj
`,t+="% Width of Text: "+g5(t,i,s=12).width+", FieldWidth:"+u+`
`;break}for(var C="",D=0,R=0;R<r.length;R++)if(r.hasOwnProperty(R)){var I=!1;if(r[R].length!==1&&T!==r[R].length-1){if((g+2)*(D+2)+2>a)continue t;C+=r[R][T],I=!0,S=R,R--}else{C=(C+=r[R][T]+" ").substr(C.length-1)==" "?C.substr(0,C.length-1):C;var F=parseInt(R),q=c(F,C,s),U=R>=r.length-1;if(q&&!U){C+=" ",T=0;continue}if(q||U){if(U)S=F;else if(i.multiline&&(g+2)*(D+2)+2>a)continue t}else{if(!i.multiline||(g+2)*(D+2)+2>a)continue t;S=F}}for(var V="",tt=w;tt<=S;tt++){var J=r[tt];if(i.multiline){if(tt===S){V+=J[T]+" ",T=(T+1)%J.length;continue}if(tt===w){V+=J[J.length-1]+" ";continue}}V+=J[0]+" "}switch(V=V.substr(V.length-1)==" "?V.substr(0,V.length-1):V,f=g5(V,i,s).width,i.textAlign){case"right":h=u-f-2;break;case"center":h=(u-f)/2;break;case"left":default:h=2}t+=ze(h)+" "+ze(y)+` Td
`,t+="("+Gp(V)+`) Tj
`,t+=-ze(h)+` 0 Td
`,y=-(s+2),f=0,w=I?S:S+1,D++,C=""}break}return n.text=t,n.fontSize=s,n},g5=function(i,t,e){var n=t.scope.internal.getFont(t.fontName,t.fontStyle),r=t.scope.getStringUnitWidth(i,{font:n,fontSize:parseFloat(e),charSpace:0})*parseFloat(e);return{height:t.scope.getStringUnitWidth("3",{font:n,fontSize:parseFloat(e),charSpace:0})*parseFloat(e)*1.5,width:r}},CV={fields:[],xForms:[],acroFormDictionaryRoot:null,printedOut:!1,internal:null,isInitialized:!1},TV=function(i,t){var e={type:"reference",object:i};t.internal.getPageInfo(i.page).pageContext.annotations.find((function(n){return n.type===e.type&&n.object===e.object}))===void 0&&t.internal.getPageInfo(i.page).pageContext.annotations.push(e)},NV=function(i,t){for(var e in i)if(i.hasOwnProperty(e)){var n=e,r=i[e];t.internal.newObjectDeferredBegin(r.objId,!0),Gn(r)==="object"&&typeof r.putStream=="function"&&r.putStream(),delete i[n]}},RV=function(i,t){if(t.scope=i,i.internal!==void 0&&(i.internal.acroformPlugin===void 0||i.internal.acroformPlugin.isInitialized===!1)){if(Kl.FieldNum=0,i.internal.acroformPlugin=JSON.parse(JSON.stringify(CV)),i.internal.acroformPlugin.acroFormDictionaryRoot)throw new Error("Exception while creating AcroformDictionary");vC=i.internal.scaleFactor,i.internal.acroformPlugin.acroFormDictionaryRoot=new rM,i.internal.acroformPlugin.acroFormDictionaryRoot.scope=i,i.internal.acroformPlugin.acroFormDictionaryRoot._eventID=i.internal.events.subscribe("postPutResources",(function(){(function(e){e.internal.events.unsubscribe(e.internal.acroformPlugin.acroFormDictionaryRoot._eventID),delete e.internal.acroformPlugin.acroFormDictionaryRoot._eventID,e.internal.acroformPlugin.printedOut=!0})(i)})),i.internal.events.subscribe("buildDocument",(function(){(function(e){e.internal.acroformPlugin.acroFormDictionaryRoot.objId=void 0;var n=e.internal.acroformPlugin.acroFormDictionaryRoot.Fields;for(var r in n)if(n.hasOwnProperty(r)){var s=n[r];s.objId=void 0,s.hasAnnotation&&TV(s,e)}})(i)})),i.internal.events.subscribe("putCatalog",(function(){(function(e){if(e.internal.acroformPlugin.acroFormDictionaryRoot===void 0)throw new Error("putCatalogCallback: Root missing.");e.internal.write("/AcroForm "+e.internal.acroformPlugin.acroFormDictionaryRoot.objId+" 0 R")})(i)})),i.internal.events.subscribe("postPutPages",(function(e){(function(n,r){var s=!n;for(var a in n||(r.internal.newObjectDeferredBegin(r.internal.acroformPlugin.acroFormDictionaryRoot.objId,!0),r.internal.acroformPlugin.acroFormDictionaryRoot.putStream()),n=n||r.internal.acroformPlugin.acroFormDictionaryRoot.Kids)if(n.hasOwnProperty(a)){var u=n[a],c=[],h=u.Rect;if(u.Rect&&(u.Rect=SV(u.Rect,r)),r.internal.newObjectDeferredBegin(u.objId,!0),u.DA=ve.createDefaultAppearanceStream(u),Gn(u)==="object"&&typeof u.getKeyValueListForStream=="function"&&(c=u.getKeyValueListForStream()),u.Rect=h,u.hasAppearanceStream&&!u.appearanceStreamContent){var f=EV(u);c.push({key:"AP",value:"<</N "+f+">>"}),r.internal.acroformPlugin.xForms.push(f)}if(u.appearanceStreamContent){var g="";for(var m in u.appearanceStreamContent)if(u.appearanceStreamContent.hasOwnProperty(m)){var y=u.appearanceStreamContent[m];if(g+="/"+m+" ",g+="<<",Object.keys(y).length>=1||Array.isArray(y)){for(var a in y)if(y.hasOwnProperty(a)){var w=y[a];typeof w=="function"&&(w=w.call(r,u)),g+="/"+a+" "+w+" ",r.internal.acroformPlugin.xForms.indexOf(w)>=0||r.internal.acroformPlugin.xForms.push(w)}}else typeof(w=y)=="function"&&(w=w.call(r,u)),g+="/"+a+" "+w,r.internal.acroformPlugin.xForms.indexOf(w)>=0||r.internal.acroformPlugin.xForms.push(w);g+=">>"}c.push({key:"AP",value:`<<
`+g+">>"})}r.internal.putStream({additionalKeyValues:c,objectId:u.objId}),r.internal.out("endobj")}s&&NV(r.internal.acroformPlugin.xForms,r)})(e,i)})),i.internal.acroformPlugin.isInitialized=!0}},nM=Ki.__acroform__.arrayToPdfArray=function(i,t,e){var n=function(a){return a};if(Array.isArray(i)){for(var r="[",s=0;s<i.length;s++)switch(s!==0&&(r+=" "),Gn(i[s])){case"boolean":case"number":case"object":r+=i[s].toString();break;case"string":i[s].substr(0,1)!=="/"?(t!==void 0&&e&&(n=e.internal.getEncryptor(t)),r+="("+Gp(n(i[s].toString()))+")"):r+=i[s].toString()}return r+="]"}throw new Error("Invalid argument passed to jsPDF.__acroform__.arrayToPdfArray")},Fw=function(i,t,e){var n=function(r){return r};return t!==void 0&&e&&(n=e.internal.getEncryptor(t)),(i=i||"").toString(),i="("+Gp(n(i))+")"},sc=function(){this._objId=void 0,this._scope=void 0,Object.defineProperty(this,"objId",{get:function(){if(this._objId===void 0){if(this.scope===void 0)return;this._objId=this.scope.internal.newObjectDeferred()}return this._objId},set:function(i){this._objId=i}}),Object.defineProperty(this,"scope",{value:this._scope,writable:!0})};sc.prototype.toString=function(){return this.objId+" 0 R"},sc.prototype.putStream=function(){var i=this.getKeyValueListForStream();this.scope.internal.putStream({data:this.stream,additionalKeyValues:i,objectId:this.objId}),this.scope.internal.out("endobj")},sc.prototype.getKeyValueListForStream=function(){var i=[],t=Object.getOwnPropertyNames(this).filter((function(s){return s!="content"&&s!="appearanceStreamContent"&&s!="scope"&&s!="objId"&&s.substring(0,1)!="_"}));for(var e in t)if(Object.getOwnPropertyDescriptor(this,t[e]).configurable===!1){var n=t[e],r=this[n];r&&(Array.isArray(r)?i.push({key:n,value:nM(r,this.objId,this.scope)}):r instanceof sc?(r.scope=this.scope,i.push({key:n,value:r.objId+" 0 R"})):typeof r!="function"&&i.push({key:n,value:r}))}return i};var iM=function(){sc.call(this),Object.defineProperty(this,"Type",{value:"/XObject",configurable:!1,writable:!0}),Object.defineProperty(this,"Subtype",{value:"/Form",configurable:!1,writable:!0}),Object.defineProperty(this,"FormType",{value:1,configurable:!1,writable:!0});var i,t=[];Object.defineProperty(this,"BBox",{configurable:!1,get:function(){return t},set:function(e){t=e}}),Object.defineProperty(this,"Resources",{value:"2 0 R",configurable:!1,writable:!0}),Object.defineProperty(this,"stream",{enumerable:!1,configurable:!0,set:function(e){i=e.trim()},get:function(){return i||null}})};zo(iM,sc);var rM=function(){sc.call(this);var i,t=[];Object.defineProperty(this,"Kids",{enumerable:!1,configurable:!0,get:function(){return t.length>0?t:void 0}}),Object.defineProperty(this,"Fields",{enumerable:!1,configurable:!1,get:function(){return t}}),Object.defineProperty(this,"DA",{enumerable:!1,configurable:!1,get:function(){if(i){var e=function(n){return n};return this.scope&&(e=this.scope.internal.getEncryptor(this.objId)),"("+Gp(e(i))+")"}},set:function(e){i=e}})};zo(rM,sc);var Kl=function i(){sc.call(this);var t=4;Object.defineProperty(this,"F",{enumerable:!1,configurable:!1,get:function(){return t},set:function(C){if(isNaN(C))throw new Error('Invalid value "'+C+'" for attribute F supplied.');t=C}}),Object.defineProperty(this,"showWhenPrinted",{enumerable:!0,configurable:!0,get:function(){return!!rr(t,3)},set:function(C){C?this.F=sr(t,3):this.F=or(t,3)}});var e=0;Object.defineProperty(this,"Ff",{enumerable:!1,configurable:!1,get:function(){return e},set:function(C){if(isNaN(C))throw new Error('Invalid value "'+C+'" for attribute Ff supplied.');e=C}});var n=[];Object.defineProperty(this,"Rect",{enumerable:!1,configurable:!1,get:function(){if(n.length!==0)return n},set:function(C){n=C!==void 0?C:[]}}),Object.defineProperty(this,"x",{enumerable:!0,configurable:!0,get:function(){return!n||isNaN(n[0])?0:n[0]},set:function(C){n[0]=C}}),Object.defineProperty(this,"y",{enumerable:!0,configurable:!0,get:function(){return!n||isNaN(n[1])?0:n[1]},set:function(C){n[1]=C}}),Object.defineProperty(this,"width",{enumerable:!0,configurable:!0,get:function(){return!n||isNaN(n[2])?0:n[2]},set:function(C){n[2]=C}}),Object.defineProperty(this,"height",{enumerable:!0,configurable:!0,get:function(){return!n||isNaN(n[3])?0:n[3]},set:function(C){n[3]=C}});var r="";Object.defineProperty(this,"FT",{enumerable:!0,configurable:!1,get:function(){return r},set:function(C){switch(C){case"/Btn":case"/Tx":case"/Ch":case"/Sig":r=C;break;default:throw new Error('Invalid value "'+C+'" for attribute FT supplied.')}}});var s=null;Object.defineProperty(this,"T",{enumerable:!0,configurable:!1,get:function(){if(!s||s.length<1){if(this instanceof cA)return;s="FieldObject"+i.FieldNum++}var C=function(D){return D};return this.scope&&(C=this.scope.internal.getEncryptor(this.objId)),"("+Gp(C(s))+")"},set:function(C){s=C.toString()}}),Object.defineProperty(this,"fieldName",{configurable:!0,enumerable:!0,get:function(){return s},set:function(C){s=C}});var a="helvetica";Object.defineProperty(this,"fontName",{enumerable:!0,configurable:!0,get:function(){return a},set:function(C){a=C}});var u="normal";Object.defineProperty(this,"fontStyle",{enumerable:!0,configurable:!0,get:function(){return u},set:function(C){u=C}});var c=0;Object.defineProperty(this,"fontSize",{enumerable:!0,configurable:!0,get:function(){return c},set:function(C){c=C}});var h=void 0;Object.defineProperty(this,"maxFontSize",{enumerable:!0,configurable:!0,get:function(){return h===void 0?50/vC:h},set:function(C){h=C}});var f="black";Object.defineProperty(this,"color",{enumerable:!0,configurable:!0,get:function(){return f},set:function(C){f=C}});var g="/F1 0 Tf 0 g";Object.defineProperty(this,"DA",{enumerable:!0,configurable:!1,get:function(){if(!(!g||this instanceof cA||this instanceof Ip))return Fw(g,this.objId,this.scope)},set:function(C){C=C.toString(),g=C}});var m=null;Object.defineProperty(this,"DV",{enumerable:!1,configurable:!1,get:function(){if(m)return this instanceof Zr?m:Fw(m,this.objId,this.scope)},set:function(C){C=C.toString(),m=this instanceof Zr?C:C.substr(0,1)==="("?kg(C.substr(1,C.length-2)):kg(C)}}),Object.defineProperty(this,"defaultValue",{enumerable:!0,configurable:!0,get:function(){return this instanceof Zr?kg(m.substr(1,m.length-1)):m},set:function(C){C=C.toString(),m=this instanceof Zr?"/"+C:C}});var y=null;Object.defineProperty(this,"_V",{enumerable:!1,configurable:!1,get:function(){if(y)return y},set:function(C){this.V=C}}),Object.defineProperty(this,"V",{enumerable:!1,configurable:!1,get:function(){if(y)return this instanceof Zr?y:Fw(y,this.objId,this.scope)},set:function(C){C=C.toString(),y=this instanceof Zr?C:C.substr(0,1)==="("?kg(C.substr(1,C.length-2)):kg(C)}}),Object.defineProperty(this,"value",{enumerable:!0,configurable:!0,get:function(){return this instanceof Zr?kg(y.substr(1,y.length-1)):y},set:function(C){C=C.toString(),y=this instanceof Zr?"/"+C:C}}),Object.defineProperty(this,"hasAnnotation",{enumerable:!0,configurable:!0,get:function(){return this.Rect}}),Object.defineProperty(this,"Type",{enumerable:!0,configurable:!1,get:function(){return this.hasAnnotation?"/Annot":null}}),Object.defineProperty(this,"Subtype",{enumerable:!0,configurable:!1,get:function(){return this.hasAnnotation?"/Widget":null}});var w,S=!1;Object.defineProperty(this,"hasAppearanceStream",{enumerable:!0,configurable:!0,get:function(){return S},set:function(C){C=!!C,S=C}}),Object.defineProperty(this,"page",{enumerable:!0,configurable:!0,get:function(){if(w)return w},set:function(C){w=C}}),Object.defineProperty(this,"readOnly",{enumerable:!0,configurable:!0,get:function(){return!!rr(this.Ff,1)},set:function(C){C?this.Ff=sr(this.Ff,1):this.Ff=or(this.Ff,1)}}),Object.defineProperty(this,"required",{enumerable:!0,configurable:!0,get:function(){return!!rr(this.Ff,2)},set:function(C){C?this.Ff=sr(this.Ff,2):this.Ff=or(this.Ff,2)}}),Object.defineProperty(this,"noExport",{enumerable:!0,configurable:!0,get:function(){return!!rr(this.Ff,3)},set:function(C){C?this.Ff=sr(this.Ff,3):this.Ff=or(this.Ff,3)}});var T=null;Object.defineProperty(this,"Q",{enumerable:!0,configurable:!1,get:function(){if(T!==null)return T},set:function(C){if([0,1,2].indexOf(C)===-1)throw new Error('Invalid value "'+C+'" for attribute Q supplied.');T=C}}),Object.defineProperty(this,"textAlign",{get:function(){var C;switch(T){case 0:default:C="left";break;case 1:C="center";break;case 2:C="right"}return C},configurable:!0,enumerable:!0,set:function(C){switch(C){case"right":case 2:T=2;break;case"center":case 1:T=1;break;case"left":case 0:default:T=0}}})};zo(Kl,sc);var am=function(){Kl.call(this),this.FT="/Ch",this.V="()",this.fontName="zapfdingbats";var i=0;Object.defineProperty(this,"TI",{enumerable:!0,configurable:!1,get:function(){return i},set:function(e){i=e}}),Object.defineProperty(this,"topIndex",{enumerable:!0,configurable:!0,get:function(){return i},set:function(e){i=e}});var t=[];Object.defineProperty(this,"Opt",{enumerable:!0,configurable:!1,get:function(){return nM(t,this.objId,this.scope)},set:function(e){var n,r;r=[],typeof(n=e)=="string"&&(r=(function(s,a,u){u||(u=1);for(var c,h=[];c=a.exec(s);)h.push(c[u]);return h})(n,/\((.*?)\)/g)),t=r}}),this.getOptions=function(){return t},this.setOptions=function(e){t=e,this.sort&&t.sort()},this.addOption=function(e){e=(e=e||"").toString(),t.push(e),this.sort&&t.sort()},this.removeOption=function(e,n){for(n=n||!1,e=(e=e||"").toString();t.indexOf(e)!==-1&&(t.splice(t.indexOf(e),1),n!==!1););},Object.defineProperty(this,"combo",{enumerable:!0,configurable:!0,get:function(){return!!rr(this.Ff,18)},set:function(e){e?this.Ff=sr(this.Ff,18):this.Ff=or(this.Ff,18)}}),Object.defineProperty(this,"edit",{enumerable:!0,configurable:!0,get:function(){return!!rr(this.Ff,19)},set:function(e){this.combo===!0&&(e?this.Ff=sr(this.Ff,19):this.Ff=or(this.Ff,19))}}),Object.defineProperty(this,"sort",{enumerable:!0,configurable:!0,get:function(){return!!rr(this.Ff,20)},set:function(e){e?(this.Ff=sr(this.Ff,20),t.sort()):this.Ff=or(this.Ff,20)}}),Object.defineProperty(this,"multiSelect",{enumerable:!0,configurable:!0,get:function(){return!!rr(this.Ff,22)},set:function(e){e?this.Ff=sr(this.Ff,22):this.Ff=or(this.Ff,22)}}),Object.defineProperty(this,"doNotSpellCheck",{enumerable:!0,configurable:!0,get:function(){return!!rr(this.Ff,23)},set:function(e){e?this.Ff=sr(this.Ff,23):this.Ff=or(this.Ff,23)}}),Object.defineProperty(this,"commitOnSelChange",{enumerable:!0,configurable:!0,get:function(){return!!rr(this.Ff,27)},set:function(e){e?this.Ff=sr(this.Ff,27):this.Ff=or(this.Ff,27)}}),this.hasAppearanceStream=!1};zo(am,Kl);var lm=function(){am.call(this),this.fontName="helvetica",this.combo=!1};zo(lm,am);var um=function(){lm.call(this),this.combo=!0};zo(um,lm);var Ub=function(){um.call(this),this.edit=!0};zo(Ub,um);var Zr=function(){Kl.call(this),this.FT="/Btn",Object.defineProperty(this,"noToggleToOff",{enumerable:!0,configurable:!0,get:function(){return!!rr(this.Ff,15)},set:function(e){e?this.Ff=sr(this.Ff,15):this.Ff=or(this.Ff,15)}}),Object.defineProperty(this,"radio",{enumerable:!0,configurable:!0,get:function(){return!!rr(this.Ff,16)},set:function(e){e?this.Ff=sr(this.Ff,16):this.Ff=or(this.Ff,16)}}),Object.defineProperty(this,"pushButton",{enumerable:!0,configurable:!0,get:function(){return!!rr(this.Ff,17)},set:function(e){e?this.Ff=sr(this.Ff,17):this.Ff=or(this.Ff,17)}}),Object.defineProperty(this,"radioIsUnison",{enumerable:!0,configurable:!0,get:function(){return!!rr(this.Ff,26)},set:function(e){e?this.Ff=sr(this.Ff,26):this.Ff=or(this.Ff,26)}});var i,t={};Object.defineProperty(this,"MK",{enumerable:!1,configurable:!1,get:function(){var e=function(s){return s};if(this.scope&&(e=this.scope.internal.getEncryptor(this.objId)),Object.keys(t).length!==0){var n,r=[];for(n in r.push("<<"),t)r.push("/"+n+" ("+Gp(e(t[n]))+")");return r.push(">>"),r.join(`
`)}},set:function(e){Gn(e)==="object"&&(t=e)}}),Object.defineProperty(this,"caption",{enumerable:!0,configurable:!0,get:function(){return t.CA||""},set:function(e){typeof e=="string"&&(t.CA=e)}}),Object.defineProperty(this,"AS",{enumerable:!1,configurable:!1,get:function(){return i},set:function(e){i=e}}),Object.defineProperty(this,"appearanceState",{enumerable:!0,configurable:!0,get:function(){return i.substr(1,i.length-1)},set:function(e){i="/"+e}})};zo(Zr,Kl);var Hb=function(){Zr.call(this),this.pushButton=!0};zo(Hb,Zr);var cm=function(){Zr.call(this),this.radio=!0,this.pushButton=!1;var i=[];Object.defineProperty(this,"Kids",{enumerable:!0,configurable:!1,get:function(){return i},set:function(t){i=t!==void 0?t:[]}})};zo(cm,Zr);var cA=function(){var i,t;Kl.call(this),Object.defineProperty(this,"Parent",{enumerable:!1,configurable:!1,get:function(){return i},set:function(r){i=r}}),Object.defineProperty(this,"optionName",{enumerable:!1,configurable:!0,get:function(){return t},set:function(r){t=r}});var e,n={};Object.defineProperty(this,"MK",{enumerable:!1,configurable:!1,get:function(){var r=function(u){return u};this.scope&&(r=this.scope.internal.getEncryptor(this.objId));var s,a=[];for(s in a.push("<<"),n)a.push("/"+s+" ("+Gp(r(n[s]))+")");return a.push(">>"),a.join(`
`)},set:function(r){Gn(r)==="object"&&(n=r)}}),Object.defineProperty(this,"caption",{enumerable:!0,configurable:!0,get:function(){return n.CA||""},set:function(r){typeof r=="string"&&(n.CA=r)}}),Object.defineProperty(this,"AS",{enumerable:!1,configurable:!1,get:function(){return e},set:function(r){e=r}}),Object.defineProperty(this,"appearanceState",{enumerable:!0,configurable:!0,get:function(){return e.substr(1,e.length-1)},set:function(r){e="/"+r}}),this.caption="l",this.appearanceState="Off",this._AppearanceType=ve.RadioButton.Circle,this.appearanceStreamContent=this._AppearanceType.createAppearanceStream(this.optionName)};zo(cA,Kl),cm.prototype.setAppearance=function(i){if(!("createAppearanceStream"in i)||!("getCA"in i))throw new Error("Couldn't assign Appearance to RadioButton. Appearance was Invalid!");for(var t in this.Kids)if(this.Kids.hasOwnProperty(t)){var e=this.Kids[t];e.appearanceStreamContent=i.createAppearanceStream(e.optionName),e.caption=i.getCA()}},cm.prototype.createOption=function(i){var t=new cA;return t.Parent=this,t.optionName=i,this.Kids.push(t),DV.call(this.scope,t),t};var qb=function(){Zr.call(this),this.fontName="zapfdingbats",this.caption="3",this.appearanceState="On",this.value="On",this.textAlign="center",this.appearanceStreamContent=ve.CheckBox.createAppearanceStream()};zo(qb,Zr);var Ip=function(){Kl.call(this),this.FT="/Tx",Object.defineProperty(this,"multiline",{enumerable:!0,configurable:!0,get:function(){return!!rr(this.Ff,13)},set:function(t){t?this.Ff=sr(this.Ff,13):this.Ff=or(this.Ff,13)}}),Object.defineProperty(this,"fileSelect",{enumerable:!0,configurable:!0,get:function(){return!!rr(this.Ff,21)},set:function(t){t?this.Ff=sr(this.Ff,21):this.Ff=or(this.Ff,21)}}),Object.defineProperty(this,"doNotSpellCheck",{enumerable:!0,configurable:!0,get:function(){return!!rr(this.Ff,23)},set:function(t){t?this.Ff=sr(this.Ff,23):this.Ff=or(this.Ff,23)}}),Object.defineProperty(this,"doNotScroll",{enumerable:!0,configurable:!0,get:function(){return!!rr(this.Ff,24)},set:function(t){t?this.Ff=sr(this.Ff,24):this.Ff=or(this.Ff,24)}}),Object.defineProperty(this,"comb",{enumerable:!0,configurable:!0,get:function(){return!!rr(this.Ff,25)},set:function(t){t?this.Ff=sr(this.Ff,25):this.Ff=or(this.Ff,25)}}),Object.defineProperty(this,"richText",{enumerable:!0,configurable:!0,get:function(){return!!rr(this.Ff,26)},set:function(t){t?this.Ff=sr(this.Ff,26):this.Ff=or(this.Ff,26)}});var i=null;Object.defineProperty(this,"MaxLen",{enumerable:!0,configurable:!1,get:function(){return i},set:function(t){i=t}}),Object.defineProperty(this,"maxLength",{enumerable:!0,configurable:!0,get:function(){return i},set:function(t){Number.isInteger(t)&&(i=t)}}),Object.defineProperty(this,"hasAppearanceStream",{enumerable:!0,configurable:!0,get:function(){return this.V||this.DV}})};zo(Ip,Kl);var zb=function(){Ip.call(this),Object.defineProperty(this,"password",{enumerable:!0,configurable:!0,get:function(){return!!rr(this.Ff,14)},set:function(i){i?this.Ff=sr(this.Ff,14):this.Ff=or(this.Ff,14)}}),this.password=!0};zo(zb,Ip);var ve={CheckBox:{createAppearanceStream:function(){return{N:{On:ve.CheckBox.YesNormal},D:{On:ve.CheckBox.YesPushDown,Off:ve.CheckBox.OffPushDown}}},YesPushDown:function(i){var t=ku(i);t.scope=i.scope;var e=[],n=i.scope.internal.getFont(i.fontName,i.fontStyle).id,r=i.scope.__private__.encodeColorString(i.color),s=OE(i,i.caption);return e.push("0.749023 g"),e.push("0 0 "+ze(ve.internal.getWidth(i))+" "+ze(ve.internal.getHeight(i))+" re"),e.push("f"),e.push("BMC"),e.push("q"),e.push("0 0 1 rg"),e.push("/"+n+" "+ze(s.fontSize)+" Tf "+r),e.push("BT"),e.push(s.text),e.push("ET"),e.push("Q"),e.push("EMC"),t.stream=e.join(`
`),t},YesNormal:function(i){var t=ku(i);t.scope=i.scope;var e=i.scope.internal.getFont(i.fontName,i.fontStyle).id,n=i.scope.__private__.encodeColorString(i.color),r=[],s=ve.internal.getHeight(i),a=ve.internal.getWidth(i),u=OE(i,i.caption);return r.push("1 g"),r.push("0 0 "+ze(a)+" "+ze(s)+" re"),r.push("f"),r.push("q"),r.push("0 0 1 rg"),r.push("0 0 "+ze(a-1)+" "+ze(s-1)+" re"),r.push("W"),r.push("n"),r.push("0 g"),r.push("BT"),r.push("/"+e+" "+ze(u.fontSize)+" Tf "+n),r.push(u.text),r.push("ET"),r.push("Q"),t.stream=r.join(`
`),t},OffPushDown:function(i){var t=ku(i);t.scope=i.scope;var e=[];return e.push("0.749023 g"),e.push("0 0 "+ze(ve.internal.getWidth(i))+" "+ze(ve.internal.getHeight(i))+" re"),e.push("f"),t.stream=e.join(`
`),t}},RadioButton:{Circle:{createAppearanceStream:function(i){var t={D:{Off:ve.RadioButton.Circle.OffPushDown},N:{}};return t.N[i]=ve.RadioButton.Circle.YesNormal,t.D[i]=ve.RadioButton.Circle.YesPushDown,t},getCA:function(){return"l"},YesNormal:function(i){var t=ku(i);t.scope=i.scope;var e=[],n=ve.internal.getWidth(i)<=ve.internal.getHeight(i)?ve.internal.getWidth(i)/4:ve.internal.getHeight(i)/4;n=Number((.9*n).toFixed(5));var r=ve.internal.Bezier_C,s=Number((n*r).toFixed(5));return e.push("q"),e.push("1 0 0 1 "+Df(ve.internal.getWidth(i)/2)+" "+Df(ve.internal.getHeight(i)/2)+" cm"),e.push(n+" 0 m"),e.push(n+" "+s+" "+s+" "+n+" 0 "+n+" c"),e.push("-"+s+" "+n+" -"+n+" "+s+" -"+n+" 0 c"),e.push("-"+n+" -"+s+" -"+s+" -"+n+" 0 -"+n+" c"),e.push(s+" -"+n+" "+n+" -"+s+" "+n+" 0 c"),e.push("f"),e.push("Q"),t.stream=e.join(`
`),t},YesPushDown:function(i){var t=ku(i);t.scope=i.scope;var e=[],n=ve.internal.getWidth(i)<=ve.internal.getHeight(i)?ve.internal.getWidth(i)/4:ve.internal.getHeight(i)/4;n=Number((.9*n).toFixed(5));var r=Number((2*n).toFixed(5)),s=Number((r*ve.internal.Bezier_C).toFixed(5)),a=Number((n*ve.internal.Bezier_C).toFixed(5));return e.push("0.749023 g"),e.push("q"),e.push("1 0 0 1 "+Df(ve.internal.getWidth(i)/2)+" "+Df(ve.internal.getHeight(i)/2)+" cm"),e.push(r+" 0 m"),e.push(r+" "+s+" "+s+" "+r+" 0 "+r+" c"),e.push("-"+s+" "+r+" -"+r+" "+s+" -"+r+" 0 c"),e.push("-"+r+" -"+s+" -"+s+" -"+r+" 0 -"+r+" c"),e.push(s+" -"+r+" "+r+" -"+s+" "+r+" 0 c"),e.push("f"),e.push("Q"),e.push("0 g"),e.push("q"),e.push("1 0 0 1 "+Df(ve.internal.getWidth(i)/2)+" "+Df(ve.internal.getHeight(i)/2)+" cm"),e.push(n+" 0 m"),e.push(n+" "+a+" "+a+" "+n+" 0 "+n+" c"),e.push("-"+a+" "+n+" -"+n+" "+a+" -"+n+" 0 c"),e.push("-"+n+" -"+a+" -"+a+" -"+n+" 0 -"+n+" c"),e.push(a+" -"+n+" "+n+" -"+a+" "+n+" 0 c"),e.push("f"),e.push("Q"),t.stream=e.join(`
`),t},OffPushDown:function(i){var t=ku(i);t.scope=i.scope;var e=[],n=ve.internal.getWidth(i)<=ve.internal.getHeight(i)?ve.internal.getWidth(i)/4:ve.internal.getHeight(i)/4;n=Number((.9*n).toFixed(5));var r=Number((2*n).toFixed(5)),s=Number((r*ve.internal.Bezier_C).toFixed(5));return e.push("0.749023 g"),e.push("q"),e.push("1 0 0 1 "+Df(ve.internal.getWidth(i)/2)+" "+Df(ve.internal.getHeight(i)/2)+" cm"),e.push(r+" 0 m"),e.push(r+" "+s+" "+s+" "+r+" 0 "+r+" c"),e.push("-"+s+" "+r+" -"+r+" "+s+" -"+r+" 0 c"),e.push("-"+r+" -"+s+" -"+s+" -"+r+" 0 -"+r+" c"),e.push(s+" -"+r+" "+r+" -"+s+" "+r+" 0 c"),e.push("f"),e.push("Q"),t.stream=e.join(`
`),t}},Cross:{createAppearanceStream:function(i){var t={D:{Off:ve.RadioButton.Cross.OffPushDown},N:{}};return t.N[i]=ve.RadioButton.Cross.YesNormal,t.D[i]=ve.RadioButton.Cross.YesPushDown,t},getCA:function(){return"8"},YesNormal:function(i){var t=ku(i);t.scope=i.scope;var e=[],n=ve.internal.calculateCross(i);return e.push("q"),e.push("1 1 "+ze(ve.internal.getWidth(i)-2)+" "+ze(ve.internal.getHeight(i)-2)+" re"),e.push("W"),e.push("n"),e.push(ze(n.x1.x)+" "+ze(n.x1.y)+" m"),e.push(ze(n.x2.x)+" "+ze(n.x2.y)+" l"),e.push(ze(n.x4.x)+" "+ze(n.x4.y)+" m"),e.push(ze(n.x3.x)+" "+ze(n.x3.y)+" l"),e.push("s"),e.push("Q"),t.stream=e.join(`
`),t},YesPushDown:function(i){var t=ku(i);t.scope=i.scope;var e=ve.internal.calculateCross(i),n=[];return n.push("0.749023 g"),n.push("0 0 "+ze(ve.internal.getWidth(i))+" "+ze(ve.internal.getHeight(i))+" re"),n.push("f"),n.push("q"),n.push("1 1 "+ze(ve.internal.getWidth(i)-2)+" "+ze(ve.internal.getHeight(i)-2)+" re"),n.push("W"),n.push("n"),n.push(ze(e.x1.x)+" "+ze(e.x1.y)+" m"),n.push(ze(e.x2.x)+" "+ze(e.x2.y)+" l"),n.push(ze(e.x4.x)+" "+ze(e.x4.y)+" m"),n.push(ze(e.x3.x)+" "+ze(e.x3.y)+" l"),n.push("s"),n.push("Q"),t.stream=n.join(`
`),t},OffPushDown:function(i){var t=ku(i);t.scope=i.scope;var e=[];return e.push("0.749023 g"),e.push("0 0 "+ze(ve.internal.getWidth(i))+" "+ze(ve.internal.getHeight(i))+" re"),e.push("f"),t.stream=e.join(`
`),t}}},createDefaultAppearanceStream:function(i){var t=i.scope.internal.getFont(i.fontName,i.fontStyle).id,e=i.scope.__private__.encodeColorString(i.color);return"/"+t+" "+i.fontSize+" Tf "+e}};ve.internal={Bezier_C:.551915024494,calculateCross:function(i){var t=ve.internal.getWidth(i),e=ve.internal.getHeight(i),n=Math.min(t,e);return{x1:{x:(t-n)/2,y:(e-n)/2+n},x2:{x:(t-n)/2+n,y:(e-n)/2},x3:{x:(t-n)/2,y:(e-n)/2},x4:{x:(t-n)/2+n,y:(e-n)/2+n}}}},ve.internal.getWidth=function(i){var t=0;return Gn(i)==="object"&&(t=tN(i.Rect[2])),t},ve.internal.getHeight=function(i){var t=0;return Gn(i)==="object"&&(t=tN(i.Rect[3])),t};var DV=Ki.addField=function(i){if(RV(this,i),!(i instanceof Kl))throw new Error("Invalid argument passed to jsPDF.addField.");var t;return(t=i).scope.internal.acroformPlugin.printedOut&&(t.scope.internal.acroformPlugin.printedOut=!1,t.scope.internal.acroformPlugin.acroFormDictionaryRoot=null),t.scope.internal.acroformPlugin.acroFormDictionaryRoot.Fields.push(t),i.page=i.scope.internal.getCurrentPageInfo().pageNumber,this};Ki.AcroFormChoiceField=am,Ki.AcroFormListBox=lm,Ki.AcroFormComboBox=um,Ki.AcroFormEditBox=Ub,Ki.AcroFormButton=Zr,Ki.AcroFormPushButton=Hb,Ki.AcroFormRadioButton=cm,Ki.AcroFormCheckBox=qb,Ki.AcroFormTextField=Ip,Ki.AcroFormPasswordField=zb,Ki.AcroFormAppearance=ve,Ki.AcroForm={ChoiceField:am,ListBox:lm,ComboBox:um,EditBox:Ub,Button:Zr,PushButton:Hb,RadioButton:cm,CheckBox:qb,TextField:Ip,PasswordField:zb,Appearance:ve},Ie.AcroForm={ChoiceField:am,ListBox:lm,ComboBox:um,EditBox:Ub,Button:Zr,PushButton:Hb,RadioButton:cm,CheckBox:qb,TextField:Ip,PasswordField:zb,Appearance:ve};Ie.AcroForm;function sM(i){return i.reduce((function(t,e,n){return t[e]=n,t}),{})}(function(i){i.__addimage__={};var t="UNKNOWN",e={PNG:[[137,80,78,71]],TIFF:[[77,77,0,42],[73,73,42,0]],JPEG:[[255,216,255,224,void 0,void 0,74,70,73,70,0],[255,216,255,225,void 0,void 0,69,120,105,102,0,0],[255,216,255,219],[255,216,255,238]],JPEG2000:[[0,0,0,12,106,80,32,32]],GIF87a:[[71,73,70,56,55,97]],GIF89a:[[71,73,70,56,57,97]],WEBP:[[82,73,70,70,void 0,void 0,void 0,void 0,87,69,66,80]],BMP:[[66,77],[66,65],[67,73],[67,80],[73,67],[80,84]]},n=i.__addimage__.getImageFileTypeByImageData=function(O,G){var et,st,pt,nt,at,ht=t;if((G=G||t)==="RGBA"||O.data!==void 0&&O.data instanceof Uint8ClampedArray&&"height"in O&&"width"in O)return"RGBA";if(q(O))for(at in e)for(pt=e[at],et=0;et<pt.length;et+=1){for(nt=!0,st=0;st<pt[et].length;st+=1)if(pt[et][st]!==void 0&&pt[et][st]!==O[st]){nt=!1;break}if(nt===!0){ht=at;break}}else for(at in e)for(pt=e[at],et=0;et<pt.length;et+=1){for(nt=!0,st=0;st<pt[et].length;st+=1)if(pt[et][st]!==void 0&&pt[et][st]!==O.charCodeAt(st)){nt=!1;break}if(nt===!0){ht=at;break}}return ht===t&&G!==t&&(ht=G),ht},r=function O(G){for(var et=this.internal.write,st=this.internal.putStream,pt=(0,this.internal.getFilters)();pt.indexOf("FlateEncode")!==-1;)pt.splice(pt.indexOf("FlateEncode"),1);G.objectId=this.internal.newObject();var nt=[];if(nt.push({key:"Type",value:"/XObject"}),nt.push({key:"Subtype",value:"/Image"}),nt.push({key:"Width",value:G.width}),nt.push({key:"Height",value:G.height}),G.colorSpace===T.INDEXED?nt.push({key:"ColorSpace",value:"[/Indexed /DeviceRGB "+(G.palette.length/3-1)+" "+("sMask"in G&&G.sMask!==void 0?G.objectId+2:G.objectId+1)+" 0 R]"}):(nt.push({key:"ColorSpace",value:"/"+G.colorSpace}),G.colorSpace===T.DEVICE_CMYK&&nt.push({key:"Decode",value:"[1 0 1 0 1 0 1 0]"})),nt.push({key:"BitsPerComponent",value:G.bitsPerComponent}),"decodeParameters"in G&&G.decodeParameters!==void 0&&nt.push({key:"DecodeParms",value:"<<"+G.decodeParameters+">>"}),"transparency"in G&&Array.isArray(G.transparency)){for(var at="",ht=0,bt=G.transparency.length;ht<bt;ht++)at+=G.transparency[ht]+" "+G.transparency[ht]+" ";nt.push({key:"Mask",value:"["+at+"]"})}G.sMask!==void 0&&nt.push({key:"SMask",value:G.objectId+1+" 0 R"});var St=G.filter!==void 0?["/"+G.filter]:void 0;if(st({data:G.data,additionalKeyValues:nt,alreadyAppliedFilters:St,objectId:G.objectId}),et("endobj"),"sMask"in G&&G.sMask!==void 0){var K="/Predictor "+G.predictor+" /Colors 1 /BitsPerComponent "+G.bitsPerComponent+" /Columns "+G.width,P={width:G.width,height:G.height,colorSpace:"DeviceGray",bitsPerComponent:G.bitsPerComponent,decodeParameters:K,data:G.sMask};"filter"in G&&(P.filter=G.filter),O.call(this,P)}if(G.colorSpace===T.INDEXED){var Y=this.internal.newObject();st({data:V(new Uint8Array(G.palette)),objectId:Y}),et("endobj")}},s=function(){var O=this.internal.collections.addImage_images;for(var G in O)r.call(this,O[G])},a=function(){var O,G=this.internal.collections.addImage_images,et=this.internal.write;for(var st in G)et("/I"+(O=G[st]).index,O.objectId,"0","R")},u=function(){this.internal.collections.addImage_images||(this.internal.collections.addImage_images={},this.internal.events.subscribe("putResources",s),this.internal.events.subscribe("putXobjectDict",a))},c=function(){var O=this.internal.collections.addImage_images;return u.call(this),O},h=function(){return Object.keys(this.internal.collections.addImage_images).length},f=function(O){return typeof i["process"+O.toUpperCase()]=="function"},g=function(O){return Gn(O)==="object"&&O.nodeType===1},m=function(O,G){if(O.nodeName==="IMG"&&O.hasAttribute("src")){var et=""+O.getAttribute("src");if(et.indexOf("data:image/")===0)return i2(unescape(et).split("base64,").pop());var st=i.loadFile(et,!0);if(st!==void 0)return st}if(O.nodeName==="CANVAS"){if(O.width===0||O.height===0)throw new Error("Given canvas must have data. Canvas width: "+O.width+", height: "+O.height);var pt;switch(G){case"PNG":pt="image/png";break;case"WEBP":pt="image/webp";break;case"JPEG":case"JPG":default:pt="image/jpeg"}return i2(O.toDataURL(pt,1).split("base64,").pop())}},y=function(O){var G=this.internal.collections.addImage_images;if(G){for(var et in G)if(O===G[et].alias)return G[et]}},w=function(O,G,et){return O||G||(O=-96,G=-96),O<0&&(O=-1*et.width*72/O/this.internal.scaleFactor),G<0&&(G=-1*et.height*72/G/this.internal.scaleFactor),O===0&&(O=G*et.width/et.height),G===0&&(G=O*et.height/et.width),[O,G]},S=function(O,G,et,st,pt,nt){var at=w.call(this,et,st,pt),ht=this.internal.getCoordinateString,bt=this.internal.getVerticalCoordinateString,St=c.call(this);if(et=at[0],st=at[1],St[pt.index]=pt,nt){nt*=Math.PI/180;var K=Math.cos(nt),P=Math.sin(nt),Y=function(ut){return ut.toFixed(4)},j=[Y(K),Y(P),Y(-1*P),Y(K),0,0,"cm"]}this.internal.write("q"),nt?(this.internal.write([1,"0","0",1,ht(O),bt(G+st),"cm"].join(" ")),this.internal.write(j.join(" ")),this.internal.write([ht(et),"0","0",ht(st),"0","0","cm"].join(" "))):this.internal.write([ht(et),"0","0",ht(st),ht(O),bt(G+st),"cm"].join(" ")),this.isAdvancedAPI()&&this.internal.write([1,0,0,-1,0,0,"cm"].join(" ")),this.internal.write("/I"+pt.index+" Do"),this.internal.write("Q")},T=i.color_spaces={DEVICE_RGB:"DeviceRGB",DEVICE_GRAY:"DeviceGray",DEVICE_CMYK:"DeviceCMYK",CAL_GREY:"CalGray",CAL_RGB:"CalRGB",LAB:"Lab",ICC_BASED:"ICCBased",INDEXED:"Indexed",PATTERN:"Pattern",SEPARATION:"Separation",DEVICE_N:"DeviceN"};i.decode={DCT_DECODE:"DCTDecode",FLATE_DECODE:"FlateDecode",LZW_DECODE:"LZWDecode",JPX_DECODE:"JPXDecode",JBIG2_DECODE:"JBIG2Decode",ASCII85_DECODE:"ASCII85Decode",ASCII_HEX_DECODE:"ASCIIHexDecode",RUN_LENGTH_DECODE:"RunLengthDecode",CCITT_FAX_DECODE:"CCITTFaxDecode"};var C=i.image_compression={NONE:"NONE",FAST:"FAST",MEDIUM:"MEDIUM",SLOW:"SLOW"},D=i.__addimage__.sHashCode=function(O){var G,et,st=0;if(typeof O=="string")for(et=O.length,G=0;G<et;G++)st=(st<<5)-st+O.charCodeAt(G),st|=0;else if(q(O))for(et=O.byteLength/2,G=0;G<et;G++)st=(st<<5)-st+O[G],st|=0;return st},R=i.__addimage__.validateStringAsBase64=function(O){(O=O||"").toString().trim();var G=!0;return O.length===0&&(G=!1),O.length%4!=0&&(G=!1),/^[A-Za-z0-9+/]+$/.test(O.substr(0,O.length-2))===!1&&(G=!1),/^[A-Za-z0-9/][A-Za-z0-9+/]|[A-Za-z0-9+/]=|==$/.test(O.substr(-2))===!1&&(G=!1),G},I=i.__addimage__.extractImageFromDataUrl=function(O){var G=(O=O||"").split("base64,"),et=null;if(G.length===2){var st=/^data:(\w*\/\w*);*(charset=(?!charset=)[\w=-]*)*;*$/.exec(G[0]);Array.isArray(st)&&(et={mimeType:st[1],charset:st[2],data:G[1]})}return et},F=i.__addimage__.supportsArrayBuffer=function(){return typeof ArrayBuffer<"u"&&typeof Uint8Array<"u"};i.__addimage__.isArrayBuffer=function(O){return F()&&O instanceof ArrayBuffer};var q=i.__addimage__.isArrayBufferView=function(O){return F()&&typeof Uint32Array<"u"&&(O instanceof Int8Array||O instanceof Uint8Array||typeof Uint8ClampedArray<"u"&&O instanceof Uint8ClampedArray||O instanceof Int16Array||O instanceof Uint16Array||O instanceof Int32Array||O instanceof Uint32Array||O instanceof Float32Array||O instanceof Float64Array)},U=i.__addimage__.binaryStringToUint8Array=function(O){for(var G=O.length,et=new Uint8Array(G),st=0;st<G;st++)et[st]=O.charCodeAt(st);return et},V=i.__addimage__.arrayBufferToBinaryString=function(O){for(var G="",et=q(O)?O:new Uint8Array(O),st=0;st<et.length;st+=8192)G+=String.fromCharCode.apply(null,et.subarray(st,st+8192));return G};i.addImage=function(){var O,G,et,st,pt,nt,at,ht,bt;if(typeof arguments[1]=="number"?(G=t,et=arguments[1],st=arguments[2],pt=arguments[3],nt=arguments[4],at=arguments[5],ht=arguments[6],bt=arguments[7]):(G=arguments[1],et=arguments[2],st=arguments[3],pt=arguments[4],nt=arguments[5],at=arguments[6],ht=arguments[7],bt=arguments[8]),Gn(O=arguments[0])==="object"&&!g(O)&&"imageData"in O){var St=O;O=St.imageData,G=St.format||G||t,et=St.x||et||0,st=St.y||st||0,pt=St.w||St.width||pt,nt=St.h||St.height||nt,at=St.alias||at,ht=St.compression||ht,bt=St.rotation||St.angle||bt}var K=this.internal.getFilters();if(ht===void 0&&K.indexOf("FlateEncode")!==-1&&(ht="SLOW"),isNaN(et)||isNaN(st))throw new Error("Invalid coordinates passed to jsPDF.addImage");u.call(this);var P=tt.call(this,O,G,at,ht);return S.call(this,et,st,pt,nt,P,bt),this};var tt=function(O,G,et,st){var pt,nt,at;if(typeof O=="string"&&n(O)===t){O=unescape(O);var ht=J(O,!1);(ht!==""||(ht=i.loadFile(O,!0))!==void 0)&&(O=ht)}if(g(O)&&(O=m(O,G)),G=n(O,G),!f(G))throw new Error("addImage does not support files of type '"+G+"', please ensure that a plugin for '"+G+"' support is added.");if(((at=et)==null||at.length===0)&&(et=(function(bt){return typeof bt=="string"||q(bt)?D(bt):q(bt.data)?D(bt.data):null})(O)),(pt=y.call(this,et))||(F()&&(O instanceof Uint8Array||G==="RGBA"||(nt=O,O=U(O))),pt=this["process"+G.toUpperCase()](O,h.call(this),et,(function(bt){return bt&&typeof bt=="string"&&(bt=bt.toUpperCase()),bt in i.image_compression?bt:C.NONE})(st),nt)),!pt)throw new Error("An unknown error occurred whilst processing the image.");return pt},J=i.__addimage__.convertBase64ToBinaryString=function(O,G){var et;G=typeof G!="boolean"||G;var st,pt="";if(typeof O=="string"){st=(et=I(O))!==null?et.data:O;try{pt=i2(st)}catch(nt){if(G)throw R(st)?new Error("atob-Error in jsPDF.convertBase64ToBinaryString "+nt.message):new Error("Supplied Data is not a valid base64-String jsPDF.convertBase64ToBinaryString ")}}return pt};i.getImageProperties=function(O){var G,et,st="";if(g(O)&&(O=m(O)),typeof O=="string"&&n(O)===t&&((st=J(O,!1))===""&&(st=i.loadFile(O)||""),O=st),et=n(O),!f(et))throw new Error("addImage does not support files of type '"+et+"', please ensure that a plugin for '"+et+"' support is added.");if(!F()||O instanceof Uint8Array||(O=U(O)),!(G=this["process"+et.toUpperCase()](O)))throw new Error("An unknown error occurred whilst processing the image");return G.fileType=et,G}})(Ie.API),(function(i){var t=function(e){if(e!==void 0&&e!="")return!0};Ie.API.events.push(["addPage",function(e){this.internal.getPageInfo(e.pageNumber).pageContext.annotations=[]}]),i.events.push(["putPage",function(e){for(var n,r,s,a=this.internal.getCoordinateString,u=this.internal.getVerticalCoordinateString,c=this.internal.getPageInfoByObjId(e.objId),h=e.pageContext.annotations,f=!1,g=0;g<h.length&&!f;g++)switch((n=h[g]).type){case"link":(t(n.options.url)||t(n.options.pageNumber))&&(f=!0);break;case"reference":case"text":case"freetext":f=!0}if(f!=0){this.internal.write("/Annots [");for(var m=0;m<h.length;m++){n=h[m];var y=this.internal.pdfEscape,w=this.internal.getEncryptor(e.objId);switch(n.type){case"reference":this.internal.write(" "+n.object.objId+" 0 R ");break;case"text":var S=this.internal.newAdditionalObject(),T=this.internal.newAdditionalObject(),C=this.internal.getEncryptor(S.objId),D=n.title||"Note";s="<</Type /Annot /Subtype /Text "+(r="/Rect ["+a(n.bounds.x)+" "+u(n.bounds.y+n.bounds.h)+" "+a(n.bounds.x+n.bounds.w)+" "+u(n.bounds.y)+"] ")+"/Contents ("+y(C(n.contents))+")",s+=" /Popup "+T.objId+" 0 R",s+=" /P "+c.objId+" 0 R",s+=" /T ("+y(C(D))+") >>",S.content=s;var R=S.objId+" 0 R";s="<</Type /Annot /Subtype /Popup "+(r="/Rect ["+a(n.bounds.x+30)+" "+u(n.bounds.y+n.bounds.h)+" "+a(n.bounds.x+n.bounds.w+30)+" "+u(n.bounds.y)+"] ")+" /Parent "+R,n.open&&(s+=" /Open true"),s+=" >>",T.content=s,this.internal.write(S.objId,"0 R",T.objId,"0 R");break;case"freetext":r="/Rect ["+a(n.bounds.x)+" "+u(n.bounds.y)+" "+a(n.bounds.x+n.bounds.w)+" "+u(n.bounds.y+n.bounds.h)+"] ";var I=n.color||"#000000";s="<</Type /Annot /Subtype /FreeText "+r+"/Contents ("+y(w(n.contents))+")",s+=" /DS(font: Helvetica,sans-serif 12.0pt; text-align:left; color:#"+I+")",s+=" /Border [0 0 0]",s+=" >>",this.internal.write(s);break;case"link":if(n.options.name){var F=this.annotations._nameMap[n.options.name];n.options.pageNumber=F.page,n.options.top=F.y}else n.options.top||(n.options.top=0);if(r="/Rect ["+n.finalBounds.x+" "+n.finalBounds.y+" "+n.finalBounds.w+" "+n.finalBounds.h+"] ",s="",n.options.url)s="<</Type /Annot /Subtype /Link "+r+"/Border [0 0 0] /A <</S /URI /URI ("+y(w(n.options.url))+") >>";else if(n.options.pageNumber)switch(s="<</Type /Annot /Subtype /Link "+r+"/Border [0 0 0] /Dest ["+this.internal.getPageInfo(n.options.pageNumber).objId+" 0 R",n.options.magFactor=n.options.magFactor||"XYZ",n.options.magFactor){case"Fit":s+=" /Fit]";break;case"FitH":s+=" /FitH "+n.options.top+"]";break;case"FitV":n.options.left=n.options.left||0,s+=" /FitV "+n.options.left+"]";break;case"XYZ":default:var q=u(n.options.top);n.options.left=n.options.left||0,n.options.zoom===void 0&&(n.options.zoom=0),s+=" /XYZ "+n.options.left+" "+q+" "+n.options.zoom+"]"}s!=""&&(s+=" >>",this.internal.write(s))}}this.internal.write("]")}}]),i.createAnnotation=function(e){var n=this.internal.getCurrentPageInfo();switch(e.type){case"link":this.link(e.bounds.x,e.bounds.y,e.bounds.w,e.bounds.h,e);break;case"text":case"freetext":n.pageContext.annotations.push(e)}},i.link=function(e,n,r,s,a){var u=this.internal.getCurrentPageInfo(),c=this.internal.getCoordinateString,h=this.internal.getVerticalCoordinateString;u.pageContext.annotations.push({finalBounds:{x:c(e),y:h(n),w:c(e+r),h:h(n+s)},options:a,type:"link"})},i.textWithLink=function(e,n,r,s){var a,u,c=this.getTextWidth(e),h=this.internal.getLineHeight()/this.internal.scaleFactor;if(s.maxWidth!==void 0){u=s.maxWidth;var f=this.splitTextToSize(e,u).length;a=Math.ceil(h*f)}else u=c,a=h;return this.text(e,n,r,s),r+=.2*h,s.align==="center"&&(n-=c/2),s.align==="right"&&(n-=c),this.link(n,r-h,u,a,s),c},i.getTextWidth=function(e){var n=this.internal.getFontSize();return this.getStringUnitWidth(e)*n/this.internal.scaleFactor}})(Ie.API),(function(i){var t={1569:[65152],1570:[65153,65154],1571:[65155,65156],1572:[65157,65158],1573:[65159,65160],1574:[65161,65162,65163,65164],1575:[65165,65166],1576:[65167,65168,65169,65170],1577:[65171,65172],1578:[65173,65174,65175,65176],1579:[65177,65178,65179,65180],1580:[65181,65182,65183,65184],1581:[65185,65186,65187,65188],1582:[65189,65190,65191,65192],1583:[65193,65194],1584:[65195,65196],1585:[65197,65198],1586:[65199,65200],1587:[65201,65202,65203,65204],1588:[65205,65206,65207,65208],1589:[65209,65210,65211,65212],1590:[65213,65214,65215,65216],1591:[65217,65218,65219,65220],1592:[65221,65222,65223,65224],1593:[65225,65226,65227,65228],1594:[65229,65230,65231,65232],1601:[65233,65234,65235,65236],1602:[65237,65238,65239,65240],1603:[65241,65242,65243,65244],1604:[65245,65246,65247,65248],1605:[65249,65250,65251,65252],1606:[65253,65254,65255,65256],1607:[65257,65258,65259,65260],1608:[65261,65262],1609:[65263,65264,64488,64489],1610:[65265,65266,65267,65268],1649:[64336,64337],1655:[64477],1657:[64358,64359,64360,64361],1658:[64350,64351,64352,64353],1659:[64338,64339,64340,64341],1662:[64342,64343,64344,64345],1663:[64354,64355,64356,64357],1664:[64346,64347,64348,64349],1667:[64374,64375,64376,64377],1668:[64370,64371,64372,64373],1670:[64378,64379,64380,64381],1671:[64382,64383,64384,64385],1672:[64392,64393],1676:[64388,64389],1677:[64386,64387],1678:[64390,64391],1681:[64396,64397],1688:[64394,64395],1700:[64362,64363,64364,64365],1702:[64366,64367,64368,64369],1705:[64398,64399,64400,64401],1709:[64467,64468,64469,64470],1711:[64402,64403,64404,64405],1713:[64410,64411,64412,64413],1715:[64406,64407,64408,64409],1722:[64414,64415],1723:[64416,64417,64418,64419],1726:[64426,64427,64428,64429],1728:[64420,64421],1729:[64422,64423,64424,64425],1733:[64480,64481],1734:[64473,64474],1735:[64471,64472],1736:[64475,64476],1737:[64482,64483],1739:[64478,64479],1740:[64508,64509,64510,64511],1744:[64484,64485,64486,64487],1746:[64430,64431],1747:[64432,64433]},e={65247:{65154:65269,65156:65271,65160:65273,65166:65275},65248:{65154:65270,65156:65272,65160:65274,65166:65276},65165:{65247:{65248:{65258:65010}}},1617:{1612:64606,1613:64607,1614:64608,1615:64609,1616:64610}},n={1612:64606,1613:64607,1614:64608,1615:64609,1616:64610},r=[1570,1571,1573,1575];i.__arabicParser__={};var s=i.__arabicParser__.isInArabicSubstitutionA=function(S){return t[S.charCodeAt(0)]!==void 0},a=i.__arabicParser__.isArabicLetter=function(S){return typeof S=="string"&&/^[\u0600-\u06FF\u0750-\u077F\u08A0-\u08FF\uFB50-\uFDFF\uFE70-\uFEFF]+$/.test(S)},u=i.__arabicParser__.isArabicEndLetter=function(S){return a(S)&&s(S)&&t[S.charCodeAt(0)].length<=2},c=i.__arabicParser__.isArabicAlfLetter=function(S){return a(S)&&r.indexOf(S.charCodeAt(0))>=0};i.__arabicParser__.arabicLetterHasIsolatedForm=function(S){return a(S)&&s(S)&&t[S.charCodeAt(0)].length>=1};var h=i.__arabicParser__.arabicLetterHasFinalForm=function(S){return a(S)&&s(S)&&t[S.charCodeAt(0)].length>=2};i.__arabicParser__.arabicLetterHasInitialForm=function(S){return a(S)&&s(S)&&t[S.charCodeAt(0)].length>=3};var f=i.__arabicParser__.arabicLetterHasMedialForm=function(S){return a(S)&&s(S)&&t[S.charCodeAt(0)].length==4},g=i.__arabicParser__.resolveLigatures=function(S){var T=0,C=e,D="",R=0;for(T=0;T<S.length;T+=1)C[S.charCodeAt(T)]!==void 0?(R++,typeof(C=C[S.charCodeAt(T)])=="number"&&(D+=String.fromCharCode(C),C=e,R=0),T===S.length-1&&(C=e,D+=S.charAt(T-(R-1)),T-=R-1,R=0)):(C=e,D+=S.charAt(T-R),T-=R,R=0);return D};i.__arabicParser__.isArabicDiacritic=function(S){return S!==void 0&&n[S.charCodeAt(0)]!==void 0};var m=i.__arabicParser__.getCorrectForm=function(S,T,C){return a(S)?s(S)===!1?-1:!h(S)||!a(T)&&!a(C)||!a(C)&&u(T)||u(S)&&!a(T)||u(S)&&c(T)||u(S)&&u(T)?0:f(S)&&a(T)&&!u(T)&&a(C)&&h(C)?3:u(S)||!a(C)?1:2:-1},y=function(S){var T=0,C=0,D=0,R="",I="",F="",q=(S=S||"").split("\\s+"),U=[];for(T=0;T<q.length;T+=1){for(U.push(""),C=0;C<q[T].length;C+=1)R=q[T][C],I=q[T][C-1],F=q[T][C+1],a(R)?(D=m(R,I,F),U[T]+=D!==-1?String.fromCharCode(t[R.charCodeAt(0)][D]):R):U[T]+=R;U[T]=g(U[T])}return U.join(" ")},w=i.__arabicParser__.processArabic=i.processArabic=function(){var S,T=typeof arguments[0]=="string"?arguments[0]:arguments[0].text,C=[];if(Array.isArray(T)){var D=0;for(C=[],D=0;D<T.length;D+=1)Array.isArray(T[D])?C.push([y(T[D][0]),T[D][1],T[D][2]]):C.push([y(T[D])]);S=C}else S=y(T);return typeof arguments[0]=="string"?S:(arguments[0].text=S,arguments[0])};i.events.push(["preProcessText",w])})(Ie.API),Ie.API.autoPrint=function(i){var t;switch((i=i||{}).variant=i.variant||"non-conform",i.variant){case"javascript":this.addJS("print({});");break;case"non-conform":default:this.internal.events.subscribe("postPutResources",(function(){t=this.internal.newObject(),this.internal.out("<<"),this.internal.out("/S /Named"),this.internal.out("/Type /Action"),this.internal.out("/N /Print"),this.internal.out(">>"),this.internal.out("endobj")})),this.internal.events.subscribe("putCatalog",(function(){this.internal.out("/OpenAction "+t+" 0 R")}))}return this},(function(i){var t=function(){var e=void 0;Object.defineProperty(this,"pdf",{get:function(){return e},set:function(u){e=u}});var n=150;Object.defineProperty(this,"width",{get:function(){return n},set:function(u){n=isNaN(u)||Number.isInteger(u)===!1||u<0?150:u,this.getContext("2d").pageWrapXEnabled&&(this.getContext("2d").pageWrapX=n+1)}});var r=300;Object.defineProperty(this,"height",{get:function(){return r},set:function(u){r=isNaN(u)||Number.isInteger(u)===!1||u<0?300:u,this.getContext("2d").pageWrapYEnabled&&(this.getContext("2d").pageWrapY=r+1)}});var s=[];Object.defineProperty(this,"childNodes",{get:function(){return s},set:function(u){s=u}});var a={};Object.defineProperty(this,"style",{get:function(){return a},set:function(u){a=u}}),Object.defineProperty(this,"parentNode",{})};t.prototype.getContext=function(e,n){var r;if((e=e||"2d")!=="2d")return null;for(r in n)this.pdf.context2d.hasOwnProperty(r)&&(this.pdf.context2d[r]=n[r]);return this.pdf.context2d._canvas=this,this.pdf.context2d},t.prototype.toDataURL=function(){throw new Error("toDataURL is not implemented.")},i.events.push(["initialized",function(){this.canvas=new t,this.canvas.pdf=this}])})(Ie.API),(function(i){var t={left:0,top:0,bottom:0,right:0},e=!1,n=function(){this.internal.__cell__===void 0&&(this.internal.__cell__={},this.internal.__cell__.padding=3,this.internal.__cell__.headerFunction=void 0,this.internal.__cell__.margins=Object.assign({},t),this.internal.__cell__.margins.width=this.getPageWidth(),r.call(this))},r=function(){this.internal.__cell__.lastCell=new s,this.internal.__cell__.pages=1},s=function(){var c=arguments[0];Object.defineProperty(this,"x",{enumerable:!0,get:function(){return c},set:function(S){c=S}});var h=arguments[1];Object.defineProperty(this,"y",{enumerable:!0,get:function(){return h},set:function(S){h=S}});var f=arguments[2];Object.defineProperty(this,"width",{enumerable:!0,get:function(){return f},set:function(S){f=S}});var g=arguments[3];Object.defineProperty(this,"height",{enumerable:!0,get:function(){return g},set:function(S){g=S}});var m=arguments[4];Object.defineProperty(this,"text",{enumerable:!0,get:function(){return m},set:function(S){m=S}});var y=arguments[5];Object.defineProperty(this,"lineNumber",{enumerable:!0,get:function(){return y},set:function(S){y=S}});var w=arguments[6];return Object.defineProperty(this,"align",{enumerable:!0,get:function(){return w},set:function(S){w=S}}),this};s.prototype.clone=function(){return new s(this.x,this.y,this.width,this.height,this.text,this.lineNumber,this.align)},s.prototype.toArray=function(){return[this.x,this.y,this.width,this.height,this.text,this.lineNumber,this.align]},i.setHeaderFunction=function(c){return n.call(this),this.internal.__cell__.headerFunction=typeof c=="function"?c:void 0,this},i.getTextDimensions=function(c,h){n.call(this);var f=(h=h||{}).fontSize||this.getFontSize(),g=h.font||this.getFont(),m=h.scaleFactor||this.internal.scaleFactor,y=0,w=0,S=0,T=this;if(!Array.isArray(c)&&typeof c!="string"){if(typeof c!="number")throw new Error("getTextDimensions expects text-parameter to be of type String or type Number or an Array of Strings.");c=String(c)}var C=h.maxWidth;C>0?typeof c=="string"?c=this.splitTextToSize(c,C):Object.prototype.toString.call(c)==="[object Array]"&&(c=c.reduce((function(R,I){return R.concat(T.splitTextToSize(I,C))}),[])):c=Array.isArray(c)?c:[c];for(var D=0;D<c.length;D++)y<(S=this.getStringUnitWidth(c[D],{font:g})*f)&&(y=S);return y!==0&&(w=c.length),{w:y/=m,h:Math.max((w*f*this.getLineHeightFactor()-f*(this.getLineHeightFactor()-1))/m,0)}},i.cellAddPage=function(){n.call(this),this.addPage();var c=this.internal.__cell__.margins||t;return this.internal.__cell__.lastCell=new s(c.left,c.top,void 0,void 0),this.internal.__cell__.pages+=1,this};var a=i.cell=function(){var c;c=arguments[0]instanceof s?arguments[0]:new s(arguments[0],arguments[1],arguments[2],arguments[3],arguments[4],arguments[5]),n.call(this);var h=this.internal.__cell__.lastCell,f=this.internal.__cell__.padding,g=this.internal.__cell__.margins||t,m=this.internal.__cell__.tableHeaderRow,y=this.internal.__cell__.printHeaders;return h.lineNumber!==void 0&&(h.lineNumber===c.lineNumber?(c.x=(h.x||0)+(h.width||0),c.y=h.y||0):h.y+h.height+c.height+g.bottom>this.getPageHeight()?(this.cellAddPage(),c.y=g.top,y&&m&&(this.printHeaderRow(c.lineNumber,!0),c.y+=m[0].height)):c.y=h.y+h.height||c.y),c.text[0]!==void 0&&(this.rect(c.x,c.y,c.width,c.height,e===!0?"FD":void 0),c.align==="right"?this.text(c.text,c.x+c.width-f,c.y+f,{align:"right",baseline:"top"}):c.align==="center"?this.text(c.text,c.x+c.width/2,c.y+f,{align:"center",baseline:"top",maxWidth:c.width-f-f}):this.text(c.text,c.x+f,c.y+f,{align:"left",baseline:"top",maxWidth:c.width-f-f})),this.internal.__cell__.lastCell=c,this};i.table=function(c,h,f,g,m){if(n.call(this),!f)throw new Error("No data for PDF table.");var y,w,S,T,C=[],D=[],R=[],I={},F={},q=[],U=[],V=(m=m||{}).autoSize||!1,tt=m.printHeaders!==!1,J=m.css&&m.css["font-size"]!==void 0?16*m.css["font-size"]:m.fontSize||12,O=m.margins||Object.assign({width:this.getPageWidth()},t),G=typeof m.padding=="number"?m.padding:3,et=m.headerBackgroundColor||"#c8c8c8",st=m.headerTextColor||"#000";if(r.call(this),this.internal.__cell__.printHeaders=tt,this.internal.__cell__.margins=O,this.internal.__cell__.table_font_size=J,this.internal.__cell__.padding=G,this.internal.__cell__.headerBackgroundColor=et,this.internal.__cell__.headerTextColor=st,this.setFontSize(J),g==null)D=C=Object.keys(f[0]),R=C.map((function(){return"left"}));else if(Array.isArray(g)&&Gn(g[0])==="object")for(C=g.map((function(St){return St.name})),D=g.map((function(St){return St.prompt||St.name||""})),R=g.map((function(St){return St.align||"left"})),y=0;y<g.length;y+=1)F[g[y].name]=g[y].width*(19.049976/25.4);else Array.isArray(g)&&typeof g[0]=="string"&&(D=C=g,R=C.map((function(){return"left"})));if(V||Array.isArray(g)&&typeof g[0]=="string")for(y=0;y<C.length;y+=1){for(I[T=C[y]]=f.map((function(St){return St[T]})),this.setFont(void 0,"bold"),q.push(this.getTextDimensions(D[y],{fontSize:this.internal.__cell__.table_font_size,scaleFactor:this.internal.scaleFactor}).w),w=I[T],this.setFont(void 0,"normal"),S=0;S<w.length;S+=1)q.push(this.getTextDimensions(w[S],{fontSize:this.internal.__cell__.table_font_size,scaleFactor:this.internal.scaleFactor}).w);F[T]=Math.max.apply(null,q)+G+G,q=[]}if(tt){var pt={};for(y=0;y<C.length;y+=1)pt[C[y]]={},pt[C[y]].text=D[y],pt[C[y]].align=R[y];var nt=u.call(this,pt,F);U=C.map((function(St){return new s(c,h,F[St],nt,pt[St].text,void 0,pt[St].align)})),this.setTableHeaderRow(U),this.printHeaderRow(1,!1)}var at=g.reduce((function(St,K){return St[K.name]=K.align,St}),{});for(y=0;y<f.length;y+=1){"rowStart"in m&&m.rowStart instanceof Function&&m.rowStart({row:y,data:f[y]},this);var ht=u.call(this,f[y],F);for(S=0;S<C.length;S+=1){var bt=f[y][C[S]];"cellStart"in m&&m.cellStart instanceof Function&&m.cellStart({row:y,col:S,data:bt},this),a.call(this,new s(c,h,F[C[S]],ht,bt,y+2,at[C[S]]))}}return this.internal.__cell__.table_x=c,this.internal.__cell__.table_y=h,this};var u=function(c,h){var f=this.internal.__cell__.padding,g=this.internal.__cell__.table_font_size,m=this.internal.scaleFactor;return Object.keys(c).map((function(y){var w=c[y];return this.splitTextToSize(w.hasOwnProperty("text")?w.text:w,h[y]-f-f)}),this).map((function(y){return this.getLineHeightFactor()*y.length*g/m+f+f}),this).reduce((function(y,w){return Math.max(y,w)}),0)};i.setTableHeaderRow=function(c){n.call(this),this.internal.__cell__.tableHeaderRow=c},i.printHeaderRow=function(c,h){if(n.call(this),!this.internal.__cell__.tableHeaderRow)throw new Error("Property tableHeaderRow does not exist.");var f;if(e=!0,typeof this.internal.__cell__.headerFunction=="function"){var g=this.internal.__cell__.headerFunction(this,this.internal.__cell__.pages);this.internal.__cell__.lastCell=new s(g[0],g[1],g[2],g[3],void 0,-1)}this.setFont(void 0,"bold");for(var m=[],y=0;y<this.internal.__cell__.tableHeaderRow.length;y+=1){f=this.internal.__cell__.tableHeaderRow[y].clone(),h&&(f.y=this.internal.__cell__.margins.top||0,m.push(f)),f.lineNumber=c;var w=this.getTextColor();this.setTextColor(this.internal.__cell__.headerTextColor),this.setFillColor(this.internal.__cell__.headerBackgroundColor),a.call(this,f),this.setTextColor(w)}m.length>0&&this.setTableHeaderRow(m),this.setFont(void 0,"normal"),e=!1}})(Ie.API);var oM={italic:["italic","oblique","normal"],oblique:["oblique","italic","normal"],normal:["normal","oblique","italic"]},aM=["ultra-condensed","extra-condensed","condensed","semi-condensed","normal","semi-expanded","expanded","extra-expanded","ultra-expanded"],UE=sM(aM),lM=[100,200,300,400,500,600,700,800,900],LV=sM(lM);function HE(i){var t=i.family.replace(/"|'/g,"").toLowerCase(),e=(function(s){return oM[s=s||"normal"]?s:"normal"})(i.style),n=(function(s){if(!s)return 400;if(typeof s=="number")return s>=100&&s<=900&&s%100==0?s:400;if(/^\d00$/.test(s))return parseInt(s);switch(s){case"bold":return 700;case"normal":default:return 400}})(i.weight),r=(function(s){return typeof UE[s=s||"normal"]=="number"?s:"normal"})(i.stretch);return{family:t,style:e,weight:n,stretch:r,src:i.src||[],ref:i.ref||{name:t,style:[r,e,n].join(" ")}}}function eN(i,t,e,n){var r;for(r=e;r>=0&&r<t.length;r+=n)if(i[t[r]])return i[t[r]];for(r=e;r>=0&&r<t.length;r-=n)if(i[t[r]])return i[t[r]]}var MV={"sans-serif":"helvetica",fixed:"courier",monospace:"courier",terminal:"courier",cursive:"times",fantasy:"times",serif:"times"},nN={caption:"times",icon:"times",menu:"times","message-box":"times","small-caption":"times","status-bar":"times"};function iN(i){return[i.stretch,i.style,i.weight,i.family].join(" ")}function IV(i,t,e){for(var n=(e=e||{}).defaultFontFamily||"times",r=Object.assign({},MV,e.genericFontFamilies||{}),s=null,a=null,u=0;u<t.length;++u)if(r[(s=HE(t[u])).family]&&(s.family=r[s.family]),i.hasOwnProperty(s.family)){a=i[s.family];break}if(!(a=a||i[n]))throw new Error("Could not find a font-family for the rule '"+iN(s)+"' and default family '"+n+"'.");if(a=(function(c,h){if(h[c])return h[c];var f=UE[c],g=f<=UE.normal?-1:1,m=eN(h,aM,f,g);if(!m)throw new Error("Could not find a matching font-stretch value for "+c);return m})(s.stretch,a),a=(function(c,h){if(h[c])return h[c];for(var f=oM[c],g=0;g<f.length;++g)if(h[f[g]])return h[f[g]];throw new Error("Could not find a matching font-style for "+c)})(s.style,a),!(a=(function(c,h){if(h[c])return h[c];if(c===400&&h[500])return h[500];if(c===500&&h[400])return h[400];var f=LV[c],g=eN(h,lM,f,c<400?-1:1);if(!g)throw new Error("Could not find a matching font-weight for value "+c);return g})(s.weight,a)))throw new Error("Failed to resolve a font for the rule '"+iN(s)+"'.");return a}function rN(i){return i.trimLeft()}function PV(i,t){for(var e=0;e<i.length;){if(i.charAt(e)===t)return[i.substring(0,e),i.substring(e+1)];e+=1}return null}function kV(i){var t=i.match(/^(-[a-z_]|[a-z_])[a-z0-9_-]*/i);return t===null?null:[t[0],i.substring(t[0].length)]}var m5,sN,oN,Bw=["times"];(function(i){var t,e,n,r,s,a,u,c,h,f=function(P){return P=P||{},this.isStrokeTransparent=P.isStrokeTransparent||!1,this.strokeOpacity=P.strokeOpacity||1,this.strokeStyle=P.strokeStyle||"#000000",this.fillStyle=P.fillStyle||"#000000",this.isFillTransparent=P.isFillTransparent||!1,this.fillOpacity=P.fillOpacity||1,this.font=P.font||"10px sans-serif",this.textBaseline=P.textBaseline||"alphabetic",this.textAlign=P.textAlign||"left",this.lineWidth=P.lineWidth||1,this.lineJoin=P.lineJoin||"miter",this.lineCap=P.lineCap||"butt",this.path=P.path||[],this.transform=P.transform!==void 0?P.transform.clone():new c,this.globalCompositeOperation=P.globalCompositeOperation||"normal",this.globalAlpha=P.globalAlpha||1,this.clip_path=P.clip_path||[],this.currentPoint=P.currentPoint||new a,this.miterLimit=P.miterLimit||10,this.lastPoint=P.lastPoint||new a,this.lineDashOffset=P.lineDashOffset||0,this.lineDash=P.lineDash||[],this.margin=P.margin||[0,0,0,0],this.prevPageLastElemOffset=P.prevPageLastElemOffset||0,this.ignoreClearRect=typeof P.ignoreClearRect!="boolean"||P.ignoreClearRect,this};i.events.push(["initialized",function(){this.context2d=new g(this),t=this.internal.f2,e=this.internal.getCoordinateString,n=this.internal.getVerticalCoordinateString,r=this.internal.getHorizontalCoordinate,s=this.internal.getVerticalCoordinate,a=this.internal.Point,u=this.internal.Rectangle,c=this.internal.Matrix,h=new f}]);var g=function(P){Object.defineProperty(this,"canvas",{get:function(){return{parentNode:!1,style:!1}}});var Y=P;Object.defineProperty(this,"pdf",{get:function(){return Y}});var j=!1;Object.defineProperty(this,"pageWrapXEnabled",{get:function(){return j},set:function(Bt){j=!!Bt}});var ut=!1;Object.defineProperty(this,"pageWrapYEnabled",{get:function(){return ut},set:function(Bt){ut=!!Bt}});var ft=0;Object.defineProperty(this,"posX",{get:function(){return ft},set:function(Bt){isNaN(Bt)||(ft=Bt)}});var mt=0;Object.defineProperty(this,"posY",{get:function(){return mt},set:function(Bt){isNaN(Bt)||(mt=Bt)}}),Object.defineProperty(this,"margin",{get:function(){return h.margin},set:function(Bt){var dt;typeof Bt=="number"?dt=[Bt,Bt,Bt,Bt]:((dt=new Array(4))[0]=Bt[0],dt[1]=Bt.length>=2?Bt[1]:dt[0],dt[2]=Bt.length>=3?Bt[2]:dt[0],dt[3]=Bt.length>=4?Bt[3]:dt[1]),h.margin=dt}});var At=!1;Object.defineProperty(this,"autoPaging",{get:function(){return At},set:function(Bt){At=Bt}});var Tt=0;Object.defineProperty(this,"lastBreak",{get:function(){return Tt},set:function(Bt){Tt=Bt}});var Xt=[];Object.defineProperty(this,"pageBreaks",{get:function(){return Xt},set:function(Bt){Xt=Bt}}),Object.defineProperty(this,"ctx",{get:function(){return h},set:function(Bt){Bt instanceof f&&(h=Bt)}}),Object.defineProperty(this,"path",{get:function(){return h.path},set:function(Bt){h.path=Bt}});var $t=[];Object.defineProperty(this,"ctxStack",{get:function(){return $t},set:function(Bt){$t=Bt}}),Object.defineProperty(this,"fillStyle",{get:function(){return this.ctx.fillStyle},set:function(Bt){var dt;dt=m(Bt),this.ctx.fillStyle=dt.style,this.ctx.isFillTransparent=dt.a===0,this.ctx.fillOpacity=dt.a,this.pdf.setFillColor(dt.r,dt.g,dt.b,{a:dt.a}),this.pdf.setTextColor(dt.r,dt.g,dt.b,{a:dt.a})}}),Object.defineProperty(this,"strokeStyle",{get:function(){return this.ctx.strokeStyle},set:function(Bt){var dt=m(Bt);this.ctx.strokeStyle=dt.style,this.ctx.isStrokeTransparent=dt.a===0,this.ctx.strokeOpacity=dt.a,dt.a===0?this.pdf.setDrawColor(255,255,255):(dt.a,this.pdf.setDrawColor(dt.r,dt.g,dt.b))}}),Object.defineProperty(this,"lineCap",{get:function(){return this.ctx.lineCap},set:function(Bt){["butt","round","square"].indexOf(Bt)!==-1&&(this.ctx.lineCap=Bt,this.pdf.setLineCap(Bt))}}),Object.defineProperty(this,"lineWidth",{get:function(){return this.ctx.lineWidth},set:function(Bt){isNaN(Bt)||(this.ctx.lineWidth=Bt,this.pdf.setLineWidth(Bt))}}),Object.defineProperty(this,"lineJoin",{get:function(){return this.ctx.lineJoin},set:function(Bt){["bevel","round","miter"].indexOf(Bt)!==-1&&(this.ctx.lineJoin=Bt,this.pdf.setLineJoin(Bt))}}),Object.defineProperty(this,"miterLimit",{get:function(){return this.ctx.miterLimit},set:function(Bt){isNaN(Bt)||(this.ctx.miterLimit=Bt,this.pdf.setMiterLimit(Bt))}}),Object.defineProperty(this,"textBaseline",{get:function(){return this.ctx.textBaseline},set:function(Bt){this.ctx.textBaseline=Bt}}),Object.defineProperty(this,"textAlign",{get:function(){return this.ctx.textAlign},set:function(Bt){["right","end","center","left","start"].indexOf(Bt)!==-1&&(this.ctx.textAlign=Bt)}});var ee=null;function Qt(Bt,dt){if(ee===null){var Le=(function(he){var Jt=[];return Object.keys(he).forEach((function(te){he[te].forEach((function(ne){var Zt=null;switch(ne){case"bold":Zt={family:te,weight:"bold"};break;case"italic":Zt={family:te,style:"italic"};break;case"bolditalic":Zt={family:te,weight:"bold",style:"italic"};break;case"":case"normal":Zt={family:te}}Zt!==null&&(Zt.ref={name:te,style:ne},Jt.push(Zt))}))})),Jt})(Bt.getFontList());ee=(function(he){for(var Jt={},te=0;te<he.length;++te){var ne=HE(he[te]),Zt=ne.family,pe=ne.stretch,ye=ne.style,Oe=ne.weight;Jt[Zt]=Jt[Zt]||{},Jt[Zt][pe]=Jt[Zt][pe]||{},Jt[Zt][pe][ye]=Jt[Zt][pe][ye]||{},Jt[Zt][pe][ye][Oe]=ne}return Jt})(Le.concat(dt))}return ee}var le=null;Object.defineProperty(this,"fontFaces",{get:function(){return le},set:function(Bt){ee=null,le=Bt}}),Object.defineProperty(this,"font",{get:function(){return this.ctx.font},set:function(Bt){var dt;if(this.ctx.font=Bt,(dt=/^\s*(?=(?:(?:[-a-z]+\s*){0,2}(italic|oblique))?)(?=(?:(?:[-a-z]+\s*){0,2}(small-caps))?)(?=(?:(?:[-a-z]+\s*){0,2}(bold(?:er)?|lighter|[1-9]00))?)(?:(?:normal|\1|\2|\3)\s*){0,3}((?:xx?-)?(?:small|large)|medium|smaller|larger|[.\d]+(?:\%|in|[cem]m|ex|p[ctx]))(?:\s*\/\s*(normal|[.\d]+(?:\%|in|[cem]m|ex|p[ctx])))?\s*([-_,\"\'\sa-z]+?)\s*$/i.exec(Bt))!==null){var Le=dt[1],he=(dt[2],dt[3]),Jt=dt[4],te=(dt[5],dt[6]),ne=/^([.\d]+)((?:%|in|[cem]m|ex|p[ctx]))$/i.exec(Jt)[2];Jt=Math.floor(ne==="px"?parseFloat(Jt)*this.pdf.internal.scaleFactor:ne==="em"?parseFloat(Jt)*this.pdf.getFontSize():parseFloat(Jt)*this.pdf.internal.scaleFactor),this.pdf.setFontSize(Jt);var Zt=(function(Ee){var Ye,re,Ci=[],Ze=Ee.trim();if(Ze==="")return Bw;if(Ze in nN)return[nN[Ze]];for(;Ze!=="";){switch(re=null,Ye=(Ze=rN(Ze)).charAt(0)){case'"':case"'":re=PV(Ze.substring(1),Ye);break;default:re=kV(Ze)}if(re===null||(Ci.push(re[0]),(Ze=rN(re[1]))!==""&&Ze.charAt(0)!==","))return Bw;Ze=Ze.replace(/^,/,"")}return Ci})(te);if(this.fontFaces){var pe=IV(Qt(this.pdf,this.fontFaces),Zt.map((function(Ee){return{family:Ee,stretch:"normal",weight:he,style:Le}})));this.pdf.setFont(pe.ref.name,pe.ref.style)}else{var ye="";(he==="bold"||parseInt(he,10)>=700||Le==="bold")&&(ye="bold"),Le==="italic"&&(ye+="italic"),ye.length===0&&(ye="normal");for(var Oe="",ke={arial:"Helvetica",Arial:"Helvetica",verdana:"Helvetica",Verdana:"Helvetica",helvetica:"Helvetica",Helvetica:"Helvetica","sans-serif":"Helvetica",fixed:"Courier",monospace:"Courier",terminal:"Courier",cursive:"Times",fantasy:"Times",serif:"Times"},Xe=0;Xe<Zt.length;Xe++){if(this.pdf.internal.getFont(Zt[Xe],ye,{noFallback:!0,disableWarning:!0})!==void 0){Oe=Zt[Xe];break}if(ye==="bolditalic"&&this.pdf.internal.getFont(Zt[Xe],"bold",{noFallback:!0,disableWarning:!0})!==void 0)Oe=Zt[Xe],ye="bold";else if(this.pdf.internal.getFont(Zt[Xe],"normal",{noFallback:!0,disableWarning:!0})!==void 0){Oe=Zt[Xe],ye="normal";break}}if(Oe===""){for(var mn=0;mn<Zt.length;mn++)if(ke[Zt[mn]]){Oe=ke[Zt[mn]];break}}Oe=Oe===""?"Times":Oe,this.pdf.setFont(Oe,ye)}}}}),Object.defineProperty(this,"globalCompositeOperation",{get:function(){return this.ctx.globalCompositeOperation},set:function(Bt){this.ctx.globalCompositeOperation=Bt}}),Object.defineProperty(this,"globalAlpha",{get:function(){return this.ctx.globalAlpha},set:function(Bt){this.ctx.globalAlpha=Bt}}),Object.defineProperty(this,"lineDashOffset",{get:function(){return this.ctx.lineDashOffset},set:function(Bt){this.ctx.lineDashOffset=Bt,K.call(this)}}),Object.defineProperty(this,"lineDash",{get:function(){return this.ctx.lineDash},set:function(Bt){this.ctx.lineDash=Bt,K.call(this)}}),Object.defineProperty(this,"ignoreClearRect",{get:function(){return this.ctx.ignoreClearRect},set:function(Bt){this.ctx.ignoreClearRect=!!Bt}})};g.prototype.setLineDash=function(P){this.lineDash=P},g.prototype.getLineDash=function(){return this.lineDash.length%2?this.lineDash.concat(this.lineDash):this.lineDash.slice()},g.prototype.fill=function(){I.call(this,"fill",!1)},g.prototype.stroke=function(){I.call(this,"stroke",!1)},g.prototype.beginPath=function(){this.path=[{type:"begin"}]},g.prototype.moveTo=function(P,Y){if(isNaN(P)||isNaN(Y))throw ai.error("jsPDF.context2d.moveTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.moveTo");var j=this.ctx.transform.applyToPoint(new a(P,Y));this.path.push({type:"mt",x:j.x,y:j.y}),this.ctx.lastPoint=new a(P,Y)},g.prototype.closePath=function(){var P=new a(0,0),Y=0;for(Y=this.path.length-1;Y!==-1;Y--)if(this.path[Y].type==="begin"&&Gn(this.path[Y+1])==="object"&&typeof this.path[Y+1].x=="number"){P=new a(this.path[Y+1].x,this.path[Y+1].y);break}this.path.push({type:"close"}),this.ctx.lastPoint=new a(P.x,P.y)},g.prototype.lineTo=function(P,Y){if(isNaN(P)||isNaN(Y))throw ai.error("jsPDF.context2d.lineTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.lineTo");var j=this.ctx.transform.applyToPoint(new a(P,Y));this.path.push({type:"lt",x:j.x,y:j.y}),this.ctx.lastPoint=new a(j.x,j.y)},g.prototype.clip=function(){this.ctx.clip_path=JSON.parse(JSON.stringify(this.path)),I.call(this,null,!0)},g.prototype.quadraticCurveTo=function(P,Y,j,ut){if(isNaN(j)||isNaN(ut)||isNaN(P)||isNaN(Y))throw ai.error("jsPDF.context2d.quadraticCurveTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.quadraticCurveTo");var ft=this.ctx.transform.applyToPoint(new a(j,ut)),mt=this.ctx.transform.applyToPoint(new a(P,Y));this.path.push({type:"qct",x1:mt.x,y1:mt.y,x:ft.x,y:ft.y}),this.ctx.lastPoint=new a(ft.x,ft.y)},g.prototype.bezierCurveTo=function(P,Y,j,ut,ft,mt){if(isNaN(ft)||isNaN(mt)||isNaN(P)||isNaN(Y)||isNaN(j)||isNaN(ut))throw ai.error("jsPDF.context2d.bezierCurveTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.bezierCurveTo");var At=this.ctx.transform.applyToPoint(new a(ft,mt)),Tt=this.ctx.transform.applyToPoint(new a(P,Y)),Xt=this.ctx.transform.applyToPoint(new a(j,ut));this.path.push({type:"bct",x1:Tt.x,y1:Tt.y,x2:Xt.x,y2:Xt.y,x:At.x,y:At.y}),this.ctx.lastPoint=new a(At.x,At.y)},g.prototype.arc=function(P,Y,j,ut,ft,mt){if(isNaN(P)||isNaN(Y)||isNaN(j)||isNaN(ut)||isNaN(ft))throw ai.error("jsPDF.context2d.arc: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.arc");if(mt=!!mt,!this.ctx.transform.isIdentity){var At=this.ctx.transform.applyToPoint(new a(P,Y));P=At.x,Y=At.y;var Tt=this.ctx.transform.applyToPoint(new a(0,j)),Xt=this.ctx.transform.applyToPoint(new a(0,0));j=Math.sqrt(Math.pow(Tt.x-Xt.x,2)+Math.pow(Tt.y-Xt.y,2))}Math.abs(ft-ut)>=2*Math.PI&&(ut=0,ft=2*Math.PI),this.path.push({type:"arc",x:P,y:Y,radius:j,startAngle:ut,endAngle:ft,counterclockwise:mt})},g.prototype.arcTo=function(P,Y,j,ut,ft){throw new Error("arcTo not implemented.")},g.prototype.rect=function(P,Y,j,ut){if(isNaN(P)||isNaN(Y)||isNaN(j)||isNaN(ut))throw ai.error("jsPDF.context2d.rect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.rect");this.moveTo(P,Y),this.lineTo(P+j,Y),this.lineTo(P+j,Y+ut),this.lineTo(P,Y+ut),this.lineTo(P,Y),this.lineTo(P+j,Y),this.lineTo(P,Y)},g.prototype.fillRect=function(P,Y,j,ut){if(isNaN(P)||isNaN(Y)||isNaN(j)||isNaN(ut))throw ai.error("jsPDF.context2d.fillRect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.fillRect");if(!y.call(this)){var ft={};this.lineCap!=="butt"&&(ft.lineCap=this.lineCap,this.lineCap="butt"),this.lineJoin!=="miter"&&(ft.lineJoin=this.lineJoin,this.lineJoin="miter"),this.beginPath(),this.rect(P,Y,j,ut),this.fill(),ft.hasOwnProperty("lineCap")&&(this.lineCap=ft.lineCap),ft.hasOwnProperty("lineJoin")&&(this.lineJoin=ft.lineJoin)}},g.prototype.strokeRect=function(P,Y,j,ut){if(isNaN(P)||isNaN(Y)||isNaN(j)||isNaN(ut))throw ai.error("jsPDF.context2d.strokeRect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.strokeRect");w.call(this)||(this.beginPath(),this.rect(P,Y,j,ut),this.stroke())},g.prototype.clearRect=function(P,Y,j,ut){if(isNaN(P)||isNaN(Y)||isNaN(j)||isNaN(ut))throw ai.error("jsPDF.context2d.clearRect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.clearRect");this.ignoreClearRect||(this.fillStyle="#ffffff",this.fillRect(P,Y,j,ut))},g.prototype.save=function(P){P=typeof P!="boolean"||P;for(var Y=this.pdf.internal.getCurrentPageInfo().pageNumber,j=0;j<this.pdf.internal.getNumberOfPages();j++)this.pdf.setPage(j+1),this.pdf.internal.out("q");if(this.pdf.setPage(Y),P){this.ctx.fontSize=this.pdf.internal.getFontSize();var ut=new f(this.ctx);this.ctxStack.push(this.ctx),this.ctx=ut}},g.prototype.restore=function(P){P=typeof P!="boolean"||P;for(var Y=this.pdf.internal.getCurrentPageInfo().pageNumber,j=0;j<this.pdf.internal.getNumberOfPages();j++)this.pdf.setPage(j+1),this.pdf.internal.out("Q");this.pdf.setPage(Y),P&&this.ctxStack.length!==0&&(this.ctx=this.ctxStack.pop(),this.fillStyle=this.ctx.fillStyle,this.strokeStyle=this.ctx.strokeStyle,this.font=this.ctx.font,this.lineCap=this.ctx.lineCap,this.lineWidth=this.ctx.lineWidth,this.lineJoin=this.ctx.lineJoin,this.lineDash=this.ctx.lineDash,this.lineDashOffset=this.ctx.lineDashOffset)},g.prototype.toDataURL=function(){throw new Error("toDataUrl not implemented.")};var m=function(P){var Y,j,ut,ft;if(P.isCanvasGradient===!0&&(P=P.getColor()),!P)return{r:0,g:0,b:0,a:0,style:P};if(/transparent|rgba\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*,\s*0+\s*\)/.test(P))Y=0,j=0,ut=0,ft=0;else{var mt=/rgb\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*\)/.exec(P);if(mt!==null)Y=parseInt(mt[1]),j=parseInt(mt[2]),ut=parseInt(mt[3]),ft=1;else if((mt=/rgba\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*,\s*([\d.]+)\s*\)/.exec(P))!==null)Y=parseInt(mt[1]),j=parseInt(mt[2]),ut=parseInt(mt[3]),ft=parseFloat(mt[4]);else{if(ft=1,typeof P=="string"&&P.charAt(0)!=="#"){var At=new ZL(P);P=At.ok?At.toHex():"#000000"}P.length===4?(Y=P.substring(1,2),Y+=Y,j=P.substring(2,3),j+=j,ut=P.substring(3,4),ut+=ut):(Y=P.substring(1,3),j=P.substring(3,5),ut=P.substring(5,7)),Y=parseInt(Y,16),j=parseInt(j,16),ut=parseInt(ut,16)}}return{r:Y,g:j,b:ut,a:ft,style:P}},y=function(){return this.ctx.isFillTransparent||this.globalAlpha==0},w=function(){return!!(this.ctx.isStrokeTransparent||this.globalAlpha==0)};g.prototype.fillText=function(P,Y,j,ut){if(isNaN(Y)||isNaN(j)||typeof P!="string")throw ai.error("jsPDF.context2d.fillText: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.fillText");if(ut=isNaN(ut)?void 0:ut,!y.call(this)){var ft=ht(this.ctx.transform.rotation),mt=this.ctx.transform.scaleX;G.call(this,{text:P,x:Y,y:j,scale:mt,angle:ft,align:this.textAlign,maxWidth:ut})}},g.prototype.strokeText=function(P,Y,j,ut){if(isNaN(Y)||isNaN(j)||typeof P!="string")throw ai.error("jsPDF.context2d.strokeText: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.strokeText");if(!w.call(this)){ut=isNaN(ut)?void 0:ut;var ft=ht(this.ctx.transform.rotation),mt=this.ctx.transform.scaleX;G.call(this,{text:P,x:Y,y:j,scale:mt,renderingMode:"stroke",angle:ft,align:this.textAlign,maxWidth:ut})}},g.prototype.measureText=function(P){if(typeof P!="string")throw ai.error("jsPDF.context2d.measureText: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.measureText");var Y=this.pdf,j=this.pdf.internal.scaleFactor,ut=Y.internal.getFontSize(),ft=Y.getStringUnitWidth(P)*ut/Y.internal.scaleFactor,mt=function(At){var Tt=(At=At||{}).width||0;return Object.defineProperty(this,"width",{get:function(){return Tt}}),this};return new mt({width:ft*=Math.round(96*j/72*1e4)/1e4})},g.prototype.scale=function(P,Y){if(isNaN(P)||isNaN(Y))throw ai.error("jsPDF.context2d.scale: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.scale");var j=new c(P,0,0,Y,0,0);this.ctx.transform=this.ctx.transform.multiply(j)},g.prototype.rotate=function(P){if(isNaN(P))throw ai.error("jsPDF.context2d.rotate: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.rotate");var Y=new c(Math.cos(P),Math.sin(P),-Math.sin(P),Math.cos(P),0,0);this.ctx.transform=this.ctx.transform.multiply(Y)},g.prototype.translate=function(P,Y){if(isNaN(P)||isNaN(Y))throw ai.error("jsPDF.context2d.translate: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.translate");var j=new c(1,0,0,1,P,Y);this.ctx.transform=this.ctx.transform.multiply(j)},g.prototype.transform=function(P,Y,j,ut,ft,mt){if(isNaN(P)||isNaN(Y)||isNaN(j)||isNaN(ut)||isNaN(ft)||isNaN(mt))throw ai.error("jsPDF.context2d.transform: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.transform");var At=new c(P,Y,j,ut,ft,mt);this.ctx.transform=this.ctx.transform.multiply(At)},g.prototype.setTransform=function(P,Y,j,ut,ft,mt){P=isNaN(P)?1:P,Y=isNaN(Y)?0:Y,j=isNaN(j)?0:j,ut=isNaN(ut)?1:ut,ft=isNaN(ft)?0:ft,mt=isNaN(mt)?0:mt,this.ctx.transform=new c(P,Y,j,ut,ft,mt)};var S=function(){return this.margin[0]>0||this.margin[1]>0||this.margin[2]>0||this.margin[3]>0};g.prototype.drawImage=function(P,Y,j,ut,ft,mt,At,Tt,Xt){var $t=this.pdf.getImageProperties(P),ee=1,Qt=1,le=1,Bt=1;ut!==void 0&&Tt!==void 0&&(le=Tt/ut,Bt=Xt/ft,ee=$t.width/ut*Tt/ut,Qt=$t.height/ft*Xt/ft),mt===void 0&&(mt=Y,At=j,Y=0,j=0),ut!==void 0&&Tt===void 0&&(Tt=ut,Xt=ft),ut===void 0&&Tt===void 0&&(Tt=$t.width,Xt=$t.height);for(var dt,Le=this.ctx.transform.decompose(),he=ht(Le.rotate.shx),Jt=new c,te=(Jt=(Jt=(Jt=Jt.multiply(Le.translate)).multiply(Le.skew)).multiply(Le.scale)).applyToRectangle(new u(mt-Y*le,At-j*Bt,ut*ee,ft*Qt)),ne=T.call(this,te),Zt=[],pe=0;pe<ne.length;pe+=1)Zt.indexOf(ne[pe])===-1&&Zt.push(ne[pe]);if(R(Zt),this.autoPaging)for(var ye=Zt[0],Oe=Zt[Zt.length-1],ke=ye;ke<Oe+1;ke++){this.pdf.setPage(ke);var Xe=this.pdf.internal.pageSize.width-this.margin[3]-this.margin[1],mn=ke===1?this.posY+this.margin[0]:this.margin[0],Ee=this.pdf.internal.pageSize.height-this.posY-this.margin[0]-this.margin[2],Ye=this.pdf.internal.pageSize.height-this.margin[0]-this.margin[2],re=ke===1?0:Ee+(ke-2)*Ye;if(this.ctx.clip_path.length!==0){var Ci=this.path;dt=JSON.parse(JSON.stringify(this.ctx.clip_path)),this.path=D(dt,this.posX+this.margin[3],-re+mn+this.ctx.prevPageLastElemOffset),F.call(this,"fill",!0),this.path=Ci}var Ze=JSON.parse(JSON.stringify(te));Ze=D([Ze],this.posX+this.margin[3],-re+mn+this.ctx.prevPageLastElemOffset)[0];var Vn=(ke>ye||ke<Oe)&&S.call(this);Vn&&(this.pdf.saveGraphicsState(),this.pdf.rect(this.margin[3],this.margin[0],Xe,Ye,null).clip().discardPath()),this.pdf.addImage(P,"JPEG",Ze.x,Ze.y,Ze.w,Ze.h,null,null,he),Vn&&this.pdf.restoreGraphicsState()}else this.pdf.addImage(P,"JPEG",te.x,te.y,te.w,te.h,null,null,he)};var T=function(P,Y,j){var ut=[];Y=Y||this.pdf.internal.pageSize.width,j=j||this.pdf.internal.pageSize.height-this.margin[0]-this.margin[2];var ft=this.posY+this.ctx.prevPageLastElemOffset;switch(P.type){default:case"mt":case"lt":ut.push(Math.floor((P.y+ft)/j)+1);break;case"arc":ut.push(Math.floor((P.y+ft-P.radius)/j)+1),ut.push(Math.floor((P.y+ft+P.radius)/j)+1);break;case"qct":var mt=bt(this.ctx.lastPoint.x,this.ctx.lastPoint.y,P.x1,P.y1,P.x,P.y);ut.push(Math.floor((mt.y+ft)/j)+1),ut.push(Math.floor((mt.y+mt.h+ft)/j)+1);break;case"bct":var At=St(this.ctx.lastPoint.x,this.ctx.lastPoint.y,P.x1,P.y1,P.x2,P.y2,P.x,P.y);ut.push(Math.floor((At.y+ft)/j)+1),ut.push(Math.floor((At.y+At.h+ft)/j)+1);break;case"rect":ut.push(Math.floor((P.y+ft)/j)+1),ut.push(Math.floor((P.y+P.h+ft)/j)+1)}for(var Tt=0;Tt<ut.length;Tt+=1)for(;this.pdf.internal.getNumberOfPages()<ut[Tt];)C.call(this);return ut},C=function(){var P=this.fillStyle,Y=this.strokeStyle,j=this.font,ut=this.lineCap,ft=this.lineWidth,mt=this.lineJoin;this.pdf.addPage(),this.fillStyle=P,this.strokeStyle=Y,this.font=j,this.lineCap=ut,this.lineWidth=ft,this.lineJoin=mt},D=function(P,Y,j){for(var ut=0;ut<P.length;ut++)switch(P[ut].type){case"bct":P[ut].x2+=Y,P[ut].y2+=j;case"qct":P[ut].x1+=Y,P[ut].y1+=j;case"mt":case"lt":case"arc":default:P[ut].x+=Y,P[ut].y+=j}return P},R=function(P){return P.sort((function(Y,j){return Y-j}))},I=function(P,Y){for(var j,ut,ft=this.fillStyle,mt=this.strokeStyle,At=this.lineCap,Tt=this.lineWidth,Xt=Math.abs(Tt*this.ctx.transform.scaleX),$t=this.lineJoin,ee=JSON.parse(JSON.stringify(this.path)),Qt=JSON.parse(JSON.stringify(this.path)),le=[],Bt=0;Bt<Qt.length;Bt++)if(Qt[Bt].x!==void 0)for(var dt=T.call(this,Qt[Bt]),Le=0;Le<dt.length;Le+=1)le.indexOf(dt[Le])===-1&&le.push(dt[Le]);for(var he=0;he<le.length;he++)for(;this.pdf.internal.getNumberOfPages()<le[he];)C.call(this);if(R(le),this.autoPaging)for(var Jt=le[0],te=le[le.length-1],ne=Jt;ne<te+1;ne++){this.pdf.setPage(ne),this.fillStyle=ft,this.strokeStyle=mt,this.lineCap=At,this.lineWidth=Xt,this.lineJoin=$t;var Zt=this.pdf.internal.pageSize.width-this.margin[3]-this.margin[1],pe=ne===1?this.posY+this.margin[0]:this.margin[0],ye=this.pdf.internal.pageSize.height-this.posY-this.margin[0]-this.margin[2],Oe=this.pdf.internal.pageSize.height-this.margin[0]-this.margin[2],ke=ne===1?0:ye+(ne-2)*Oe;if(this.ctx.clip_path.length!==0){var Xe=this.path;j=JSON.parse(JSON.stringify(this.ctx.clip_path)),this.path=D(j,this.posX+this.margin[3],-ke+pe+this.ctx.prevPageLastElemOffset),F.call(this,P,!0),this.path=Xe}if(ut=JSON.parse(JSON.stringify(ee)),this.path=D(ut,this.posX+this.margin[3],-ke+pe+this.ctx.prevPageLastElemOffset),Y===!1||ne===0){var mn=(ne>Jt||ne<te)&&S.call(this);mn&&(this.pdf.saveGraphicsState(),this.pdf.rect(this.margin[3],this.margin[0],Zt,Oe,null).clip().discardPath()),F.call(this,P,Y),mn&&this.pdf.restoreGraphicsState()}this.lineWidth=Tt}else this.lineWidth=Xt,F.call(this,P,Y),this.lineWidth=Tt;this.path=ee},F=function(P,Y){if((P!=="stroke"||Y||!w.call(this))&&(P==="stroke"||Y||!y.call(this))){for(var j,ut,ft=[],mt=this.path,At=0;At<mt.length;At++){var Tt=mt[At];switch(Tt.type){case"begin":ft.push({begin:!0});break;case"close":ft.push({close:!0});break;case"mt":ft.push({start:Tt,deltas:[],abs:[]});break;case"lt":var Xt=ft.length;if(mt[At-1]&&!isNaN(mt[At-1].x)&&(j=[Tt.x-mt[At-1].x,Tt.y-mt[At-1].y],Xt>0)){for(;Xt>=0;Xt--)if(ft[Xt-1].close!==!0&&ft[Xt-1].begin!==!0){ft[Xt-1].deltas.push(j),ft[Xt-1].abs.push(Tt);break}}break;case"bct":j=[Tt.x1-mt[At-1].x,Tt.y1-mt[At-1].y,Tt.x2-mt[At-1].x,Tt.y2-mt[At-1].y,Tt.x-mt[At-1].x,Tt.y-mt[At-1].y],ft[ft.length-1].deltas.push(j);break;case"qct":var $t=mt[At-1].x+2/3*(Tt.x1-mt[At-1].x),ee=mt[At-1].y+2/3*(Tt.y1-mt[At-1].y),Qt=Tt.x+2/3*(Tt.x1-Tt.x),le=Tt.y+2/3*(Tt.y1-Tt.y),Bt=Tt.x,dt=Tt.y;j=[$t-mt[At-1].x,ee-mt[At-1].y,Qt-mt[At-1].x,le-mt[At-1].y,Bt-mt[At-1].x,dt-mt[At-1].y],ft[ft.length-1].deltas.push(j);break;case"arc":ft.push({deltas:[],abs:[],arc:!0}),Array.isArray(ft[ft.length-1].abs)&&ft[ft.length-1].abs.push(Tt)}}ut=Y?null:P==="stroke"?"stroke":"fill";for(var Le=!1,he=0;he<ft.length;he++)if(ft[he].arc)for(var Jt=ft[he].abs,te=0;te<Jt.length;te++){var ne=Jt[te];ne.type==="arc"?V.call(this,ne.x,ne.y,ne.radius,ne.startAngle,ne.endAngle,ne.counterclockwise,void 0,Y,!Le):et.call(this,ne.x,ne.y),Le=!0}else if(ft[he].close===!0)this.pdf.internal.out("h"),Le=!1;else if(ft[he].begin!==!0){var Zt=ft[he].start.x,pe=ft[he].start.y;st.call(this,ft[he].deltas,Zt,pe),Le=!0}ut&&tt.call(this,ut),Y&&J.call(this)}},q=function(P){var Y=this.pdf.internal.getFontSize()/this.pdf.internal.scaleFactor,j=Y*(this.pdf.internal.getLineHeightFactor()-1);switch(this.ctx.textBaseline){case"bottom":return P-j;case"top":return P+Y-j;case"hanging":return P+Y-2*j;case"middle":return P+Y/2-j;case"ideographic":return P;case"alphabetic":default:return P}},U=function(P){return P+this.pdf.internal.getFontSize()/this.pdf.internal.scaleFactor*(this.pdf.internal.getLineHeightFactor()-1)};g.prototype.createLinearGradient=function(){var P=function(){};return P.colorStops=[],P.addColorStop=function(Y,j){this.colorStops.push([Y,j])},P.getColor=function(){return this.colorStops.length===0?"#000000":this.colorStops[0][1]},P.isCanvasGradient=!0,P},g.prototype.createPattern=function(){return this.createLinearGradient()},g.prototype.createRadialGradient=function(){return this.createLinearGradient()};var V=function(P,Y,j,ut,ft,mt,At,Tt,Xt){for(var $t=nt.call(this,j,ut,ft,mt),ee=0;ee<$t.length;ee++){var Qt=$t[ee];ee===0&&(Xt?O.call(this,Qt.x1+P,Qt.y1+Y):et.call(this,Qt.x1+P,Qt.y1+Y)),pt.call(this,P,Y,Qt.x2,Qt.y2,Qt.x3,Qt.y3,Qt.x4,Qt.y4)}Tt?J.call(this):tt.call(this,At)},tt=function(P){switch(P){case"stroke":this.pdf.internal.out("S");break;case"fill":this.pdf.internal.out("f")}},J=function(){this.pdf.clip(),this.pdf.discardPath()},O=function(P,Y){this.pdf.internal.out(e(P)+" "+n(Y)+" m")},G=function(P){var Y;switch(P.align){case"right":case"end":Y="right";break;case"center":Y="center";break;case"left":case"start":default:Y="left"}var j=this.pdf.getTextDimensions(P.text),ut=q.call(this,P.y),ft=U.call(this,ut)-j.h,mt=this.ctx.transform.applyToPoint(new a(P.x,ut)),At=this.ctx.transform.decompose(),Tt=new c;Tt=(Tt=(Tt=Tt.multiply(At.translate)).multiply(At.skew)).multiply(At.scale);for(var Xt,$t,ee,Qt=this.ctx.transform.applyToRectangle(new u(P.x,ut,j.w,j.h)),le=Tt.applyToRectangle(new u(P.x,ft,j.w,j.h)),Bt=T.call(this,le),dt=[],Le=0;Le<Bt.length;Le+=1)dt.indexOf(Bt[Le])===-1&&dt.push(Bt[Le]);if(R(dt),this.autoPaging)for(var he=dt[0],Jt=dt[dt.length-1],te=he;te<Jt+1;te++){this.pdf.setPage(te);var ne=te===1?this.posY+this.margin[0]:this.margin[0],Zt=this.pdf.internal.pageSize.height-this.posY-this.margin[0]-this.margin[2],pe=this.pdf.internal.pageSize.height-this.margin[2],ye=pe-this.margin[0],Oe=this.pdf.internal.pageSize.width-this.margin[1],ke=Oe-this.margin[3],Xe=te===1?0:Zt+(te-2)*ye;if(this.ctx.clip_path.length!==0){var mn=this.path;Xt=JSON.parse(JSON.stringify(this.ctx.clip_path)),this.path=D(Xt,this.posX+this.margin[3],-1*Xe+ne),F.call(this,"fill",!0),this.path=mn}var Ee=D([JSON.parse(JSON.stringify(le))],this.posX+this.margin[3],-Xe+ne+this.ctx.prevPageLastElemOffset)[0];P.scale>=.01&&($t=this.pdf.internal.getFontSize(),this.pdf.setFontSize($t*P.scale),ee=this.lineWidth,this.lineWidth=ee*P.scale);var Ye=this.autoPaging!=="text";if(Ye||Ee.y+Ee.h<=pe){if(Ye||Ee.y>=ne&&Ee.x<=Oe){var re=Ye?P.text:this.pdf.splitTextToSize(P.text,P.maxWidth||Oe-Ee.x)[0],Ci=D([JSON.parse(JSON.stringify(Qt))],this.posX+this.margin[3],-Xe+ne+this.ctx.prevPageLastElemOffset)[0],Ze=Ye&&(te>he||te<Jt)&&S.call(this);Ze&&(this.pdf.saveGraphicsState(),this.pdf.rect(this.margin[3],this.margin[0],ke,ye,null).clip().discardPath()),this.pdf.text(re,Ci.x,Ci.y,{angle:P.angle,align:Y,renderingMode:P.renderingMode}),Ze&&this.pdf.restoreGraphicsState()}}else Ee.y<pe&&(this.ctx.prevPageLastElemOffset+=pe-Ee.y);P.scale>=.01&&(this.pdf.setFontSize($t),this.lineWidth=ee)}else P.scale>=.01&&($t=this.pdf.internal.getFontSize(),this.pdf.setFontSize($t*P.scale),ee=this.lineWidth,this.lineWidth=ee*P.scale),this.pdf.text(P.text,mt.x+this.posX,mt.y+this.posY,{angle:P.angle,align:Y,renderingMode:P.renderingMode,maxWidth:P.maxWidth}),P.scale>=.01&&(this.pdf.setFontSize($t),this.lineWidth=ee)},et=function(P,Y,j,ut){j=j||0,ut=ut||0,this.pdf.internal.out(e(P+j)+" "+n(Y+ut)+" l")},st=function(P,Y,j){return this.pdf.lines(P,Y,j,null,null)},pt=function(P,Y,j,ut,ft,mt,At,Tt){this.pdf.internal.out([t(r(j+P)),t(s(ut+Y)),t(r(ft+P)),t(s(mt+Y)),t(r(At+P)),t(s(Tt+Y)),"c"].join(" "))},nt=function(P,Y,j,ut){for(var ft=2*Math.PI,mt=Math.PI/2;Y>j;)Y-=ft;var At=Math.abs(j-Y);At<ft&&ut&&(At=ft-At);for(var Tt=[],Xt=ut?-1:1,$t=Y;At>1e-5;){var ee=$t+Xt*Math.min(At,mt);Tt.push(at.call(this,P,$t,ee)),At-=Math.abs(ee-$t),$t=ee}return Tt},at=function(P,Y,j){var ut=(j-Y)/2,ft=P*Math.cos(ut),mt=P*Math.sin(ut),At=ft,Tt=-mt,Xt=At*At+Tt*Tt,$t=Xt+At*ft+Tt*mt,ee=4/3*(Math.sqrt(2*Xt*$t)-$t)/(At*mt-Tt*ft),Qt=At-ee*Tt,le=Tt+ee*At,Bt=Qt,dt=-le,Le=ut+Y,he=Math.cos(Le),Jt=Math.sin(Le);return{x1:P*Math.cos(Y),y1:P*Math.sin(Y),x2:Qt*he-le*Jt,y2:Qt*Jt+le*he,x3:Bt*he-dt*Jt,y3:Bt*Jt+dt*he,x4:P*Math.cos(j),y4:P*Math.sin(j)}},ht=function(P){return 180*P/Math.PI},bt=function(P,Y,j,ut,ft,mt){var At=P+.5*(j-P),Tt=Y+.5*(ut-Y),Xt=ft+.5*(j-ft),$t=mt+.5*(ut-mt),ee=Math.min(P,ft,At,Xt),Qt=Math.max(P,ft,At,Xt),le=Math.min(Y,mt,Tt,$t),Bt=Math.max(Y,mt,Tt,$t);return new u(ee,le,Qt-ee,Bt-le)},St=function(P,Y,j,ut,ft,mt,At,Tt){var Xt,$t,ee,Qt,le,Bt,dt,Le,he,Jt,te,ne,Zt,pe,ye=j-P,Oe=ut-Y,ke=ft-j,Xe=mt-ut,mn=At-ft,Ee=Tt-mt;for($t=0;$t<41;$t++)he=(dt=(ee=P+(Xt=$t/40)*ye)+Xt*((le=j+Xt*ke)-ee))+Xt*(le+Xt*(ft+Xt*mn-le)-dt),Jt=(Le=(Qt=Y+Xt*Oe)+Xt*((Bt=ut+Xt*Xe)-Qt))+Xt*(Bt+Xt*(mt+Xt*Ee-Bt)-Le),$t==0?(te=he,ne=Jt,Zt=he,pe=Jt):(te=Math.min(te,he),ne=Math.min(ne,Jt),Zt=Math.max(Zt,he),pe=Math.max(pe,Jt));return new u(Math.round(te),Math.round(ne),Math.round(Zt-te),Math.round(pe-ne))},K=function(){if(this.prevLineDash||this.ctx.lineDash.length||this.ctx.lineDashOffset){var P,Y,j=(P=this.ctx.lineDash,Y=this.ctx.lineDashOffset,JSON.stringify({lineDash:P,lineDashOffset:Y}));this.prevLineDash!==j&&(this.pdf.setLineDash(this.ctx.lineDash,this.ctx.lineDashOffset),this.prevLineDash=j)}}})(Ie.API),(function(i){var t=function(s){var a,u,c,h,f,g,m,y,w,S;for(u=[],c=0,h=(s+=a="\0\0\0\0".slice(s.length%4||4)).length;h>c;c+=4)(f=(s.charCodeAt(c)<<24)+(s.charCodeAt(c+1)<<16)+(s.charCodeAt(c+2)<<8)+s.charCodeAt(c+3))!==0?(g=(f=((f=((f=((f=(f-(S=f%85))/85)-(w=f%85))/85)-(y=f%85))/85)-(m=f%85))/85)%85,u.push(g+33,m+33,y+33,w+33,S+33)):u.push(122);return(function(T,C){for(var D=C;D>0;D--)T.pop()})(u,a.length),String.fromCharCode.apply(String,u)+"~>"},e=function(s){var a,u,c,h,f,g=String,m="length",y=255,w="charCodeAt",S="slice",T="replace";for(s[S](-2),s=s[S](0,-2)[T](/\s/g,"")[T]("z","!!!!!"),c=[],h=0,f=(s+=a="uuuuu"[S](s[m]%5||5))[m];f>h;h+=5)u=52200625*(s[w](h)-33)+614125*(s[w](h+1)-33)+7225*(s[w](h+2)-33)+85*(s[w](h+3)-33)+(s[w](h+4)-33),c.push(y&u>>24,y&u>>16,y&u>>8,y&u);return(function(C,D){for(var R=D;R>0;R--)C.pop()})(c,a[m]),g.fromCharCode.apply(g,c)},n=function(s){var a=new RegExp(/^([0-9A-Fa-f]{2})+$/);if((s=s.replace(/\s/g,"")).indexOf(">")!==-1&&(s=s.substr(0,s.indexOf(">"))),s.length%2&&(s+="0"),a.test(s)===!1)return"";for(var u="",c=0;c<s.length;c+=2)u+=String.fromCharCode("0x"+(s[c]+s[c+1]));return u},r=function(s){for(var a=new Uint8Array(s.length),u=s.length;u--;)a[u]=s.charCodeAt(u);return s=(a=PE(a)).reduce((function(c,h){return c+String.fromCharCode(h)}),"")};i.processDataByFilters=function(s,a){var u=0,c=s||"",h=[];for(typeof(a=a||[])=="string"&&(a=[a]),u=0;u<a.length;u+=1)switch(a[u]){case"ASCII85Decode":case"/ASCII85Decode":c=e(c),h.push("/ASCII85Encode");break;case"ASCII85Encode":case"/ASCII85Encode":c=t(c),h.push("/ASCII85Decode");break;case"ASCIIHexDecode":case"/ASCIIHexDecode":c=n(c),h.push("/ASCIIHexEncode");break;case"ASCIIHexEncode":case"/ASCIIHexEncode":c=c.split("").map((function(f){return("0"+f.charCodeAt().toString(16)).slice(-2)})).join("")+">",h.push("/ASCIIHexDecode");break;case"FlateEncode":case"/FlateEncode":c=r(c),h.push("/FlateDecode");break;default:throw new Error('The filter: "'+a[u]+'" is not implemented')}return{data:c,reverseChain:h.reverse().join(" ")}}})(Ie.API),(function(i){i.loadFile=function(t,e,n){return(function(r,s,a){s=s!==!1,a=typeof a=="function"?a:function(){};var u=void 0;try{u=(function(c,h,f){var g=new XMLHttpRequest,m=0,y=function(w){var S=w.length,T=[],C=String.fromCharCode;for(m=0;m<S;m+=1)T.push(C(255&w.charCodeAt(m)));return T.join("")};if(g.open("GET",c,!h),g.overrideMimeType("text/plain; charset=x-user-defined"),h===!1&&(g.onload=function(){g.status===200?f(y(this.responseText)):f(void 0)}),g.send(null),h&&g.status===200)return y(g.responseText)})(r,s,a)}catch{}return u})(t,e,n)},i.loadImageFile=i.loadFile})(Ie.API),(function(i){function t(){return(Pe.html2canvas?Promise.resolve(Pe.html2canvas):RE(()=>import("./html2canvas.esm-QH1iLAAe.js"),[])).catch((function(a){return Promise.reject(new Error("Could not load html2canvas: "+a))})).then((function(a){return a.default?a.default:a}))}function e(){return(Pe.DOMPurify?Promise.resolve(Pe.DOMPurify):RE(()=>import("./purify.es-C_uT9hQ1.js"),[])).catch((function(a){return Promise.reject(new Error("Could not load dompurify: "+a))})).then((function(a){return a.default?a.default:a}))}var n=function(a){var u=Gn(a);return u==="undefined"?"undefined":u==="string"||a instanceof String?"string":u==="number"||a instanceof Number?"number":u==="function"||a instanceof Function?"function":a&&a.constructor===Array?"array":a&&a.nodeType===1?"element":u==="object"?"object":"unknown"},r=function(a,u){var c=document.createElement(a);for(var h in u.className&&(c.className=u.className),u.innerHTML&&u.dompurify&&(c.innerHTML=u.dompurify.sanitize(u.innerHTML)),u.style)c.style[h]=u.style[h];return c},s=function a(u){var c=Object.assign(a.convert(Promise.resolve()),JSON.parse(JSON.stringify(a.template))),h=a.convert(Promise.resolve(),c);return h=(h=h.setProgress(1,a,1,[a])).set(u)};(s.prototype=Object.create(Promise.prototype)).constructor=s,s.convert=function(a,u){return a.__proto__=u||s.prototype,a},s.template={prop:{src:null,container:null,overlay:null,canvas:null,img:null,pdf:null,pageSize:null,callback:function(){}},progress:{val:0,state:null,n:0,stack:[]},opt:{filename:"file.pdf",margin:[0,0,0,0],enableLinks:!0,x:0,y:0,html2canvas:{},jsPDF:{},backgroundColor:"transparent"}},s.prototype.from=function(a,u){return this.then((function(){switch(u=u||(function(c){switch(n(c)){case"string":return"string";case"element":return c.nodeName.toLowerCase()==="canvas"?"canvas":"element";default:return"unknown"}})(a)){case"string":return this.then(e).then((function(c){return this.set({src:r("div",{innerHTML:a,dompurify:c})})}));case"element":return this.set({src:a});case"canvas":return this.set({canvas:a});case"img":return this.set({img:a});default:return this.error("Unknown source type.")}}))},s.prototype.to=function(a){switch(a){case"container":return this.toContainer();case"canvas":return this.toCanvas();case"img":return this.toImg();case"pdf":return this.toPdf();default:return this.error("Invalid target.")}},s.prototype.toContainer=function(){return this.thenList([function(){return this.prop.src||this.error("Cannot duplicate - no source HTML.")},function(){return this.prop.pageSize||this.setPageSize()}]).then((function(){var a={position:"relative",display:"inline-block",width:(typeof this.opt.width!="number"||isNaN(this.opt.width)||typeof this.opt.windowWidth!="number"||isNaN(this.opt.windowWidth)?Math.max(this.prop.src.clientWidth,this.prop.src.scrollWidth,this.prop.src.offsetWidth):this.opt.windowWidth)+"px",left:0,right:0,top:0,margin:"auto",backgroundColor:this.opt.backgroundColor},u=(function c(h,f){for(var g=h.nodeType===3?document.createTextNode(h.nodeValue):h.cloneNode(!1),m=h.firstChild;m;m=m.nextSibling)f!==!0&&m.nodeType===1&&m.nodeName==="SCRIPT"||g.appendChild(c(m,f));return h.nodeType===1&&(h.nodeName==="CANVAS"?(g.width=h.width,g.height=h.height,g.getContext("2d").drawImage(h,0,0)):h.nodeName!=="TEXTAREA"&&h.nodeName!=="SELECT"||(g.value=h.value),g.addEventListener("load",(function(){g.scrollTop=h.scrollTop,g.scrollLeft=h.scrollLeft}),!0)),g})(this.prop.src,this.opt.html2canvas.javascriptEnabled);u.tagName==="BODY"&&(a.height=Math.max(document.body.scrollHeight,document.body.offsetHeight,document.documentElement.clientHeight,document.documentElement.scrollHeight,document.documentElement.offsetHeight)+"px"),this.prop.overlay=r("div",{className:"html2pdf__overlay",style:{position:"fixed",overflow:"hidden",zIndex:1e3,left:"-100000px",right:0,bottom:0,top:0}}),this.prop.container=r("div",{className:"html2pdf__container",style:a}),this.prop.container.appendChild(u),this.prop.container.firstChild.appendChild(r("div",{style:{clear:"both",border:"0 none transparent",margin:0,padding:0,height:0}})),this.prop.container.style.float="none",this.prop.overlay.appendChild(this.prop.container),document.body.appendChild(this.prop.overlay),this.prop.container.firstChild.style.position="relative",this.prop.container.height=Math.max(this.prop.container.firstChild.clientHeight,this.prop.container.firstChild.scrollHeight,this.prop.container.firstChild.offsetHeight)+"px"}))},s.prototype.toCanvas=function(){var a=[function(){return document.body.contains(this.prop.container)||this.toContainer()}];return this.thenList(a).then(t).then((function(u){var c=Object.assign({},this.opt.html2canvas);return delete c.onrendered,u(this.prop.container,c)})).then((function(u){(this.opt.html2canvas.onrendered||function(){})(u),this.prop.canvas=u,document.body.removeChild(this.prop.overlay)}))},s.prototype.toContext2d=function(){var a=[function(){return document.body.contains(this.prop.container)||this.toContainer()}];return this.thenList(a).then(t).then((function(u){var c=this.opt.jsPDF,h=this.opt.fontFaces,f=typeof this.opt.width!="number"||isNaN(this.opt.width)||typeof this.opt.windowWidth!="number"||isNaN(this.opt.windowWidth)?1:this.opt.width/this.opt.windowWidth,g=Object.assign({async:!0,allowTaint:!0,scale:f,scrollX:this.opt.scrollX||0,scrollY:this.opt.scrollY||0,backgroundColor:"#ffffff",imageTimeout:15e3,logging:!0,proxy:null,removeContainer:!0,foreignObjectRendering:!1,useCORS:!1},this.opt.html2canvas);if(delete g.onrendered,c.context2d.autoPaging=this.opt.autoPaging===void 0||this.opt.autoPaging,c.context2d.posX=this.opt.x,c.context2d.posY=this.opt.y,c.context2d.margin=this.opt.margin,c.context2d.fontFaces=h,h)for(var m=0;m<h.length;++m){var y=h[m],w=y.src.find((function(S){return S.format==="truetype"}));w&&c.addFont(w.url,y.ref.name,y.ref.style)}return g.windowHeight=g.windowHeight||0,g.windowHeight=g.windowHeight==0?Math.max(this.prop.container.clientHeight,this.prop.container.scrollHeight,this.prop.container.offsetHeight):g.windowHeight,c.context2d.save(!0),u(this.prop.container,g)})).then((function(u){this.opt.jsPDF.context2d.restore(!0),(this.opt.html2canvas.onrendered||function(){})(u),this.prop.canvas=u,document.body.removeChild(this.prop.overlay)}))},s.prototype.toImg=function(){return this.thenList([function(){return this.prop.canvas||this.toCanvas()}]).then((function(){var a=this.prop.canvas.toDataURL("image/"+this.opt.image.type,this.opt.image.quality);this.prop.img=document.createElement("img"),this.prop.img.src=a}))},s.prototype.toPdf=function(){return this.thenList([function(){return this.toContext2d()}]).then((function(){this.prop.pdf=this.prop.pdf||this.opt.jsPDF}))},s.prototype.output=function(a,u,c){return(c=c||"pdf").toLowerCase()==="img"||c.toLowerCase()==="image"?this.outputImg(a,u):this.outputPdf(a,u)},s.prototype.outputPdf=function(a,u){return this.thenList([function(){return this.prop.pdf||this.toPdf()}]).then((function(){return this.prop.pdf.output(a,u)}))},s.prototype.outputImg=function(a){return this.thenList([function(){return this.prop.img||this.toImg()}]).then((function(){switch(a){case void 0:case"img":return this.prop.img;case"datauristring":case"dataurlstring":return this.prop.img.src;case"datauri":case"dataurl":return document.location.href=this.prop.img.src;default:throw'Image output type "'+a+'" is not supported.'}}))},s.prototype.save=function(a){return this.thenList([function(){return this.prop.pdf||this.toPdf()}]).set(a?{filename:a}:null).then((function(){this.prop.pdf.save(this.opt.filename)}))},s.prototype.doCallback=function(){return this.thenList([function(){return this.prop.pdf||this.toPdf()}]).then((function(){this.prop.callback(this.prop.pdf)}))},s.prototype.set=function(a){if(n(a)!=="object")return this;var u=Object.keys(a||{}).map((function(c){if(c in s.template.prop)return function(){this.prop[c]=a[c]};switch(c){case"margin":return this.setMargin.bind(this,a.margin);case"jsPDF":return function(){return this.opt.jsPDF=a.jsPDF,this.setPageSize()};case"pageSize":return this.setPageSize.bind(this,a.pageSize);default:return function(){this.opt[c]=a[c]}}}),this);return this.then((function(){return this.thenList(u)}))},s.prototype.get=function(a,u){return this.then((function(){var c=a in s.template.prop?this.prop[a]:this.opt[a];return u?u(c):c}))},s.prototype.setMargin=function(a){return this.then((function(){switch(n(a)){case"number":a=[a,a,a,a];case"array":if(a.length===2&&(a=[a[0],a[1],a[0],a[1]]),a.length===4)break;default:return this.error("Invalid margin array.")}this.opt.margin=a})).then(this.setPageSize)},s.prototype.setPageSize=function(a){function u(c,h){return Math.floor(c*h/72*96)}return this.then((function(){(a=a||Ie.getPageSize(this.opt.jsPDF)).hasOwnProperty("inner")||(a.inner={width:a.width-this.opt.margin[1]-this.opt.margin[3],height:a.height-this.opt.margin[0]-this.opt.margin[2]},a.inner.px={width:u(a.inner.width,a.k),height:u(a.inner.height,a.k)},a.inner.ratio=a.inner.height/a.inner.width),this.prop.pageSize=a}))},s.prototype.setProgress=function(a,u,c,h){return a!=null&&(this.progress.val=a),u!=null&&(this.progress.state=u),c!=null&&(this.progress.n=c),h!=null&&(this.progress.stack=h),this.progress.ratio=this.progress.val/this.progress.state,this},s.prototype.updateProgress=function(a,u,c,h){return this.setProgress(a?this.progress.val+a:null,u||null,c?this.progress.n+c:null,h?this.progress.stack.concat(h):null)},s.prototype.then=function(a,u){var c=this;return this.thenCore(a,u,(function(h,f){return c.updateProgress(null,null,1,[h]),Promise.prototype.then.call(this,(function(g){return c.updateProgress(null,h),g})).then(h,f).then((function(g){return c.updateProgress(1),g}))}))},s.prototype.thenCore=function(a,u,c){c=c||Promise.prototype.then,a&&(a=a.bind(this)),u&&(u=u.bind(this));var h=Promise.toString().indexOf("[native code]")!==-1&&Promise.name==="Promise"?this:s.convert(Object.assign({},this),Promise.prototype),f=c.call(h,a,u);return s.convert(f,this.__proto__)},s.prototype.thenExternal=function(a,u){return Promise.prototype.then.call(this,a,u)},s.prototype.thenList=function(a){var u=this;return a.forEach((function(c){u=u.thenCore(c)})),u},s.prototype.catch=function(a){a&&(a=a.bind(this));var u=Promise.prototype.catch.call(this,a);return s.convert(u,this)},s.prototype.catchExternal=function(a){return Promise.prototype.catch.call(this,a)},s.prototype.error=function(a){return this.then((function(){throw new Error(a)}))},s.prototype.using=s.prototype.set,s.prototype.saveAs=s.prototype.save,s.prototype.export=s.prototype.output,s.prototype.run=s.prototype.then,Ie.getPageSize=function(a,u,c){if(Gn(a)==="object"){var h=a;a=h.orientation,u=h.unit||u,c=h.format||c}u=u||"mm",c=c||"a4",a=(""+(a||"P")).toLowerCase();var f,g=(""+c).toLowerCase(),m={a0:[2383.94,3370.39],a1:[1683.78,2383.94],a2:[1190.55,1683.78],a3:[841.89,1190.55],a4:[595.28,841.89],a5:[419.53,595.28],a6:[297.64,419.53],a7:[209.76,297.64],a8:[147.4,209.76],a9:[104.88,147.4],a10:[73.7,104.88],b0:[2834.65,4008.19],b1:[2004.09,2834.65],b2:[1417.32,2004.09],b3:[1000.63,1417.32],b4:[708.66,1000.63],b5:[498.9,708.66],b6:[354.33,498.9],b7:[249.45,354.33],b8:[175.75,249.45],b9:[124.72,175.75],b10:[87.87,124.72],c0:[2599.37,3676.54],c1:[1836.85,2599.37],c2:[1298.27,1836.85],c3:[918.43,1298.27],c4:[649.13,918.43],c5:[459.21,649.13],c6:[323.15,459.21],c7:[229.61,323.15],c8:[161.57,229.61],c9:[113.39,161.57],c10:[79.37,113.39],dl:[311.81,623.62],letter:[612,792],"government-letter":[576,756],legal:[612,1008],"junior-legal":[576,360],ledger:[1224,792],tabloid:[792,1224],"credit-card":[153,243]};switch(u){case"pt":f=1;break;case"mm":f=72/25.4;break;case"cm":f=72/2.54;break;case"in":f=72;break;case"px":f=.75;break;case"pc":case"em":f=12;break;case"ex":f=6;break;default:throw"Invalid unit: "+u}var y,w=0,S=0;if(m.hasOwnProperty(g))w=m[g][1]/f,S=m[g][0]/f;else try{w=c[1],S=c[0]}catch{throw new Error("Invalid format: "+c)}if(a==="p"||a==="portrait")a="p",S>w&&(y=S,S=w,w=y);else{if(a!=="l"&&a!=="landscape")throw"Invalid orientation: "+a;a="l",w>S&&(y=S,S=w,w=y)}return{width:S,height:w,unit:u,k:f,orientation:a}},i.html=function(a,u){(u=u||{}).callback=u.callback||function(){},u.html2canvas=u.html2canvas||{},u.html2canvas.canvas=u.html2canvas.canvas||this.canvas,u.jsPDF=u.jsPDF||this,u.fontFaces=u.fontFaces?u.fontFaces.map(HE):null;var c=new s(u);return u.worker?c:c.from(a).doCallback()}})(Ie.API),Ie.API.addJS=function(i){return oN=i,this.internal.events.subscribe("postPutResources",(function(){m5=this.internal.newObject(),this.internal.out("<<"),this.internal.out("/Names [(EmbeddedJS) "+(m5+1)+" 0 R]"),this.internal.out(">>"),this.internal.out("endobj"),sN=this.internal.newObject(),this.internal.out("<<"),this.internal.out("/S /JavaScript"),this.internal.out("/JS ("+oN+")"),this.internal.out(">>"),this.internal.out("endobj")})),this.internal.events.subscribe("putCatalog",(function(){m5!==void 0&&sN!==void 0&&this.internal.out("/Names <</JavaScript "+m5+" 0 R>>")})),this},(function(i){var t;i.events.push(["postPutResources",function(){var e=this,n=/^(\d+) 0 obj$/;if(this.outline.root.children.length>0)for(var r=e.outline.render().split(/\r\n/),s=0;s<r.length;s++){var a=r[s],u=n.exec(a);if(u!=null){var c=u[1];e.internal.newObjectDeferredBegin(c,!1)}e.internal.write(a)}if(this.outline.createNamedDestinations){var h=this.internal.pages.length,f=[];for(s=0;s<h;s++){var g=e.internal.newObject();f.push(g);var m=e.internal.getPageInfo(s+1);e.internal.write("<< /D["+m.objId+" 0 R /XYZ null null null]>> endobj")}var y=e.internal.newObject();for(e.internal.write("<< /Names [ "),s=0;s<f.length;s++)e.internal.write("(page_"+(s+1)+")"+f[s]+" 0 R");e.internal.write(" ] >>","endobj"),t=e.internal.newObject(),e.internal.write("<< /Dests "+y+" 0 R"),e.internal.write(">>","endobj")}}]),i.events.push(["putCatalog",function(){this.outline.root.children.length>0&&(this.internal.write("/Outlines",this.outline.makeRef(this.outline.root)),this.outline.createNamedDestinations&&this.internal.write("/Names "+t+" 0 R"))}]),i.events.push(["initialized",function(){var e=this;e.outline={createNamedDestinations:!1,root:{children:[]}},e.outline.add=function(n,r,s){var a={title:r,options:s,children:[]};return n==null&&(n=this.root),n.children.push(a),a},e.outline.render=function(){return this.ctx={},this.ctx.val="",this.ctx.pdf=e,this.genIds_r(this.root),this.renderRoot(this.root),this.renderItems(this.root),this.ctx.val},e.outline.genIds_r=function(n){n.id=e.internal.newObjectDeferred();for(var r=0;r<n.children.length;r++)this.genIds_r(n.children[r])},e.outline.renderRoot=function(n){this.objStart(n),this.line("/Type /Outlines"),n.children.length>0&&(this.line("/First "+this.makeRef(n.children[0])),this.line("/Last "+this.makeRef(n.children[n.children.length-1]))),this.line("/Count "+this.count_r({count:0},n)),this.objEnd()},e.outline.renderItems=function(n){for(var r=this.ctx.pdf.internal.getVerticalCoordinateString,s=0;s<n.children.length;s++){var a=n.children[s];this.objStart(a),this.line("/Title "+this.makeString(a.title)),this.line("/Parent "+this.makeRef(n)),s>0&&this.line("/Prev "+this.makeRef(n.children[s-1])),s<n.children.length-1&&this.line("/Next "+this.makeRef(n.children[s+1])),a.children.length>0&&(this.line("/First "+this.makeRef(a.children[0])),this.line("/Last "+this.makeRef(a.children[a.children.length-1])));var u=this.count=this.count_r({count:0},a);if(u>0&&this.line("/Count "+u),a.options&&a.options.pageNumber){var c=e.internal.getPageInfo(a.options.pageNumber);this.line("/Dest ["+c.objId+" 0 R /XYZ 0 "+r(0)+" 0]")}this.objEnd()}for(var h=0;h<n.children.length;h++)this.renderItems(n.children[h])},e.outline.line=function(n){this.ctx.val+=n+`\r
`},e.outline.makeRef=function(n){return n.id+" 0 R"},e.outline.makeString=function(n){return"("+e.internal.pdfEscape(n)+")"},e.outline.objStart=function(n){this.ctx.val+=`\r
`+n.id+` 0 obj\r
<<\r
`},e.outline.objEnd=function(){this.ctx.val+=`>> \r
endobj\r
`},e.outline.count_r=function(n,r){for(var s=0;s<r.children.length;s++)n.count++,this.count_r(n,r.children[s]);return n.count}}])})(Ie.API),(function(i){var t=[192,193,194,195,196,197,198,199];i.processJPEG=function(e,n,r,s,a,u){var c,h=this.decode.DCT_DECODE,f=null;if(typeof e=="string"||this.__addimage__.isArrayBuffer(e)||this.__addimage__.isArrayBufferView(e)){switch(e=a||e,e=this.__addimage__.isArrayBuffer(e)?new Uint8Array(e):e,(c=(function(g){for(var m,y=256*g.charCodeAt(4)+g.charCodeAt(5),w=g.length,S={width:0,height:0,numcomponents:1},T=4;T<w;T+=2){if(T+=y,t.indexOf(g.charCodeAt(T+1))!==-1){m=256*g.charCodeAt(T+5)+g.charCodeAt(T+6),S={width:256*g.charCodeAt(T+7)+g.charCodeAt(T+8),height:m,numcomponents:g.charCodeAt(T+9)};break}y=256*g.charCodeAt(T+2)+g.charCodeAt(T+3)}return S})(e=this.__addimage__.isArrayBufferView(e)?this.__addimage__.arrayBufferToBinaryString(e):e)).numcomponents){case 1:u=this.color_spaces.DEVICE_GRAY;break;case 4:u=this.color_spaces.DEVICE_CMYK;break;case 3:u=this.color_spaces.DEVICE_RGB}f={data:e,width:c.width,height:c.height,colorSpace:u,bitsPerComponent:8,filter:h,index:n,alias:r}}return f}})(Ie.API);var Fg,v5,aN,lN,uN,FV=(function(){var i,t,e;function n(s){var a,u,c,h,f,g,m,y,w,S,T,C,D,R;for(this.data=s,this.pos=8,this.palette=[],this.imgData=[],this.transparency={},this.animation=null,this.text={},g=null;;){switch(a=this.readUInt32(),w=(function(){var I,F;for(F=[],I=0;I<4;++I)F.push(String.fromCharCode(this.data[this.pos++]));return F}).call(this).join("")){case"IHDR":this.width=this.readUInt32(),this.height=this.readUInt32(),this.bits=this.data[this.pos++],this.colorType=this.data[this.pos++],this.compressionMethod=this.data[this.pos++],this.filterMethod=this.data[this.pos++],this.interlaceMethod=this.data[this.pos++];break;case"acTL":this.animation={numFrames:this.readUInt32(),numPlays:this.readUInt32()||1/0,frames:[]};break;case"PLTE":this.palette=this.read(a);break;case"fcTL":g&&this.animation.frames.push(g),this.pos+=4,g={width:this.readUInt32(),height:this.readUInt32(),xOffset:this.readUInt32(),yOffset:this.readUInt32()},f=this.readUInt16(),h=this.readUInt16()||100,g.delay=1e3*f/h,g.disposeOp=this.data[this.pos++],g.blendOp=this.data[this.pos++],g.data=[];break;case"IDAT":case"fdAT":for(w==="fdAT"&&(this.pos+=4,a-=4),s=(g!=null?g.data:void 0)||this.imgData,C=0;0<=a?C<a:C>a;0<=a?++C:--C)s.push(this.data[this.pos++]);break;case"tRNS":switch(this.transparency={},this.colorType){case 3:if(c=this.palette.length/3,this.transparency.indexed=this.read(a),this.transparency.indexed.length>c)throw new Error("More transparent colors than palette size");if((S=c-this.transparency.indexed.length)>0)for(D=0;0<=S?D<S:D>S;0<=S?++D:--D)this.transparency.indexed.push(255);break;case 0:this.transparency.grayscale=this.read(a)[0];break;case 2:this.transparency.rgb=this.read(a)}break;case"tEXt":m=(T=this.read(a)).indexOf(0),y=String.fromCharCode.apply(String,T.slice(0,m)),this.text[y]=String.fromCharCode.apply(String,T.slice(m+1));break;case"IEND":return g&&this.animation.frames.push(g),this.colors=(function(){switch(this.colorType){case 0:case 3:case 4:return 1;case 2:case 6:return 3}}).call(this),this.hasAlphaChannel=(R=this.colorType)===4||R===6,u=this.colors+(this.hasAlphaChannel?1:0),this.pixelBitlength=this.bits*u,this.colorSpace=(function(){switch(this.colors){case 1:return"DeviceGray";case 3:return"DeviceRGB"}}).call(this),void(this.imgData=new Uint8Array(this.imgData));default:this.pos+=a}if(this.pos+=4,this.pos>this.data.length)throw new Error("Incomplete or corrupt PNG file")}}n.prototype.read=function(s){var a,u;for(u=[],a=0;0<=s?a<s:a>s;0<=s?++a:--a)u.push(this.data[this.pos++]);return u},n.prototype.readUInt32=function(){return this.data[this.pos++]<<24|this.data[this.pos++]<<16|this.data[this.pos++]<<8|this.data[this.pos++]},n.prototype.readUInt16=function(){return this.data[this.pos++]<<8|this.data[this.pos++]},n.prototype.decodePixels=function(s){var a=this.pixelBitlength/8,u=new Uint8Array(this.width*this.height*a),c=0,h=this;if(s==null&&(s=this.imgData),s.length===0)return new Uint8Array(0);function f(g,m,y,w){var S,T,C,D,R,I,F,q,U,V,tt,J,O,G,et,st,pt,nt,at,ht,bt,St=Math.ceil((h.width-g)/y),K=Math.ceil((h.height-m)/w),P=h.width==St&&h.height==K;for(G=a*St,J=P?u:new Uint8Array(G*K),I=s.length,O=0,T=0;O<K&&c<I;){switch(s[c++]){case 0:for(D=pt=0;pt<G;D=pt+=1)J[T++]=s[c++];break;case 1:for(D=nt=0;nt<G;D=nt+=1)S=s[c++],R=D<a?0:J[T-a],J[T++]=(S+R)%256;break;case 2:for(D=at=0;at<G;D=at+=1)S=s[c++],C=(D-D%a)/a,et=O&&J[(O-1)*G+C*a+D%a],J[T++]=(et+S)%256;break;case 3:for(D=ht=0;ht<G;D=ht+=1)S=s[c++],C=(D-D%a)/a,R=D<a?0:J[T-a],et=O&&J[(O-1)*G+C*a+D%a],J[T++]=(S+Math.floor((R+et)/2))%256;break;case 4:for(D=bt=0;bt<G;D=bt+=1)S=s[c++],C=(D-D%a)/a,R=D<a?0:J[T-a],O===0?et=st=0:(et=J[(O-1)*G+C*a+D%a],st=C&&J[(O-1)*G+(C-1)*a+D%a]),F=R+et-st,q=Math.abs(F-R),V=Math.abs(F-et),tt=Math.abs(F-st),U=q<=V&&q<=tt?R:V<=tt?et:st,J[T++]=(S+U)%256;break;default:throw new Error("Invalid filter algorithm: "+s[c-1])}if(!P){var Y=((m+O*w)*h.width+g)*a,j=O*G;for(D=0;D<St;D+=1){for(var ut=0;ut<a;ut+=1)u[Y++]=J[j++];Y+=(y-1)*a}}O++}}return s=pV(s),h.interlaceMethod==1?(f(0,0,8,8),f(4,0,8,8),f(0,4,4,8),f(2,0,4,4),f(0,2,2,4),f(1,0,2,2),f(0,1,1,2)):f(0,0,1,1),u},n.prototype.decodePalette=function(){var s,a,u,c,h,f,g,m,y;for(u=this.palette,f=this.transparency.indexed||[],h=new Uint8Array((f.length||0)+u.length),c=0,s=0,a=g=0,m=u.length;g<m;a=g+=3)h[c++]=u[a],h[c++]=u[a+1],h[c++]=u[a+2],h[c++]=(y=f[s++])!=null?y:255;return h},n.prototype.copyToImageData=function(s,a){var u,c,h,f,g,m,y,w,S,T,C;if(c=this.colors,S=null,u=this.hasAlphaChannel,this.palette.length&&(S=(C=this._decodedPalette)!=null?C:this._decodedPalette=this.decodePalette(),c=4,u=!0),w=(h=s.data||s).length,g=S||a,f=m=0,c===1)for(;f<w;)y=S?4*a[f/4]:m,T=g[y++],h[f++]=T,h[f++]=T,h[f++]=T,h[f++]=u?g[y++]:255,m=y;else for(;f<w;)y=S?4*a[f/4]:m,h[f++]=g[y++],h[f++]=g[y++],h[f++]=g[y++],h[f++]=u?g[y++]:255,m=y},n.prototype.decode=function(){var s;return s=new Uint8Array(this.width*this.height*4),this.copyToImageData(s,this.decodePixels()),s};var r=function(){if(Object.prototype.toString.call(Pe)==="[object Window]"){try{t=Pe.document.createElement("canvas"),e=t.getContext("2d")}catch{return!1}return!0}return!1};return r(),i=function(s){var a;if(r()===!0)return e.width=s.width,e.height=s.height,e.clearRect(0,0,s.width,s.height),e.putImageData(s,0,0),(a=new Image).src=t.toDataURL(),a;throw new Error("This method requires a Browser with Canvas-capability.")},n.prototype.decodeFrames=function(s){var a,u,c,h,f,g,m,y;if(this.animation){for(y=[],u=f=0,g=(m=this.animation.frames).length;f<g;u=++f)a=m[u],c=s.createImageData(a.width,a.height),h=this.decodePixels(new Uint8Array(a.data)),this.copyToImageData(c,h),a.imageData=c,y.push(a.image=i(c));return y}},n.prototype.renderFrame=function(s,a){var u,c,h;return u=(c=this.animation.frames)[a],h=c[a-1],a===0&&s.clearRect(0,0,this.width,this.height),(h!=null?h.disposeOp:void 0)===1?s.clearRect(h.xOffset,h.yOffset,h.width,h.height):(h!=null?h.disposeOp:void 0)===2&&s.putImageData(h.imageData,h.xOffset,h.yOffset),u.blendOp===0&&s.clearRect(u.xOffset,u.yOffset,u.width,u.height),s.drawImage(u.image,u.xOffset,u.yOffset)},n.prototype.animate=function(s){var a,u,c,h,f,g,m=this;return u=0,g=this.animation,h=g.numFrames,c=g.frames,f=g.numPlays,(a=function(){var y,w;if(y=u++%h,w=c[y],m.renderFrame(s,y),h>1&&u/h<f)return m.animation._timeout=setTimeout(a,w.delay)})()},n.prototype.stopAnimation=function(){var s;return clearTimeout((s=this.animation)!=null?s._timeout:void 0)},n.prototype.render=function(s){var a,u;return s._png&&s._png.stopAnimation(),s._png=this,s.width=this.width,s.height=this.height,a=s.getContext("2d"),this.animation?(this.decodeFrames(a),this.animate(a)):(u=a.createImageData(this.width,this.height),this.copyToImageData(u,this.decodePixels()),a.putImageData(u,0,0))},n})();/**
 * @license
 *
 * Copyright (c) 2014 James Robb, https://github.com/jamesbrobb
 *
 * Permission is hereby granted, free of charge, to any person obtaining
 * a copy of this software and associated documentation files (the
 * "Software"), to deal in the Software without restriction, including
 * without limitation the rights to use, copy, modify, merge, publish,
 * distribute, sublicense, and/or sell copies of the Software, and to
 * permit persons to whom the Software is furnished to do so, subject to
 * the following conditions:
 *
 * The above copyright notice and this permission notice shall be
 * included in all copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND,
 * EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF
 * MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND
 * NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE
 * LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION
 * OF CONTRACT, TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION
 * WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.
 * ====================================================================
 *//**
 * @license
 * (c) Dean McNamee <dean@gmail.com>, 2013.
 *
 * https://github.com/deanm/omggif
 *
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to
 * deal in the Software without restriction, including without limitation the
 * rights to use, copy, modify, merge, publish, distribute, sublicense, and/or
 * sell copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 *
 * The above copyright notice and this permission notice shall be included in
 * all copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING
 * FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS
 * IN THE SOFTWARE.
 *
 * omggif is a JavaScript implementation of a GIF 89a encoder and decoder,
 * including animation and compression.  It does not rely on any specific
 * underlying system, so should run in the browser, Node, or Plask.
 */function BV(i){var t=0;if(i[t++]!==71||i[t++]!==73||i[t++]!==70||i[t++]!==56||(i[t++]+1&253)!=56||i[t++]!==97)throw new Error("Invalid GIF 87a/89a header.");var e=i[t++]|i[t++]<<8,n=i[t++]|i[t++]<<8,r=i[t++],s=r>>7,a=1<<(7&r)+1;i[t++],i[t++];var u=null,c=null;s&&(u=t,c=a,t+=3*a);var h=!0,f=[],g=0,m=null,y=0,w=null;for(this.width=e,this.height=n;h&&t<i.length;)switch(i[t++]){case 33:switch(i[t++]){case 255:if(i[t]!==11||i[t+1]==78&&i[t+2]==69&&i[t+3]==84&&i[t+4]==83&&i[t+5]==67&&i[t+6]==65&&i[t+7]==80&&i[t+8]==69&&i[t+9]==50&&i[t+10]==46&&i[t+11]==48&&i[t+12]==3&&i[t+13]==1&&i[t+16]==0)t+=14,w=i[t++]|i[t++]<<8,t++;else for(t+=12;;){if(!((O=i[t++])>=0))throw Error("Invalid block size");if(O===0)break;t+=O}break;case 249:if(i[t++]!==4||i[t+4]!==0)throw new Error("Invalid graphics extension block.");var S=i[t++];g=i[t++]|i[t++]<<8,m=i[t++],(1&S)==0&&(m=null),y=S>>2&7,t++;break;case 254:for(;;){if(!((O=i[t++])>=0))throw Error("Invalid block size");if(O===0)break;t+=O}break;default:throw new Error("Unknown graphic control label: 0x"+i[t-1].toString(16))}break;case 44:var T=i[t++]|i[t++]<<8,C=i[t++]|i[t++]<<8,D=i[t++]|i[t++]<<8,R=i[t++]|i[t++]<<8,I=i[t++],F=I>>6&1,q=1<<(7&I)+1,U=u,V=c,tt=!1;I>>7&&(tt=!0,U=t,V=q,t+=3*q);var J=t;for(t++;;){var O;if(!((O=i[t++])>=0))throw Error("Invalid block size");if(O===0)break;t+=O}f.push({x:T,y:C,width:D,height:R,has_local_palette:tt,palette_offset:U,palette_size:V,data_offset:J,data_length:t-J,transparent_index:m,interlaced:!!F,delay:g,disposal:y});break;case 59:h=!1;break;default:throw new Error("Unknown gif block: 0x"+i[t-1].toString(16))}this.numFrames=function(){return f.length},this.loopCount=function(){return w},this.frameInfo=function(G){if(G<0||G>=f.length)throw new Error("Frame index out of range.");return f[G]},this.decodeAndBlitFrameBGRA=function(G,et){var st=this.frameInfo(G),pt=st.width*st.height,nt=new Uint8Array(pt);cN(i,st.data_offset,nt,pt);var at=st.palette_offset,ht=st.transparent_index;ht===null&&(ht=256);var bt=st.width,St=e-bt,K=bt,P=4*(st.y*e+st.x),Y=4*((st.y+st.height)*e+st.x),j=P,ut=4*St;st.interlaced===!0&&(ut+=4*e*7);for(var ft=8,mt=0,At=nt.length;mt<At;++mt){var Tt=nt[mt];if(K===0&&(K=bt,(j+=ut)>=Y&&(ut=4*St+4*e*(ft-1),j=P+(bt+St)*(ft<<1),ft>>=1)),Tt===ht)j+=4;else{var Xt=i[at+3*Tt],$t=i[at+3*Tt+1],ee=i[at+3*Tt+2];et[j++]=ee,et[j++]=$t,et[j++]=Xt,et[j++]=255}--K}},this.decodeAndBlitFrameRGBA=function(G,et){var st=this.frameInfo(G),pt=st.width*st.height,nt=new Uint8Array(pt);cN(i,st.data_offset,nt,pt);var at=st.palette_offset,ht=st.transparent_index;ht===null&&(ht=256);var bt=st.width,St=e-bt,K=bt,P=4*(st.y*e+st.x),Y=4*((st.y+st.height)*e+st.x),j=P,ut=4*St;st.interlaced===!0&&(ut+=4*e*7);for(var ft=8,mt=0,At=nt.length;mt<At;++mt){var Tt=nt[mt];if(K===0&&(K=bt,(j+=ut)>=Y&&(ut=4*St+4*e*(ft-1),j=P+(bt+St)*(ft<<1),ft>>=1)),Tt===ht)j+=4;else{var Xt=i[at+3*Tt],$t=i[at+3*Tt+1],ee=i[at+3*Tt+2];et[j++]=Xt,et[j++]=$t,et[j++]=ee,et[j++]=255}--K}}}function cN(i,t,e,n){for(var r=i[t++],s=1<<r,a=s+1,u=a+1,c=r+1,h=(1<<c)-1,f=0,g=0,m=0,y=i[t++],w=new Int32Array(4096),S=null;;){for(;f<16&&y!==0;)g|=i[t++]<<f,f+=8,y===1?y=i[t++]:--y;if(f<c)break;var T=g&h;if(g>>=c,f-=c,T!==s){if(T===a)break;for(var C=T<u?T:S,D=0,R=C;R>s;)R=w[R]>>8,++D;var I=R;if(m+D+(C!==T?1:0)>n)return void ai.log("Warning, gif stream longer than expected.");e[m++]=I;var F=m+=D;for(C!==T&&(e[m++]=I),R=C;D--;)R=w[R],e[--F]=255&R,R>>=8;S!==null&&u<4096&&(w[u++]=S<<8|I,u>=h+1&&c<12&&(++c,h=h<<1|1)),S=T}else u=a+1,h=(1<<(c=r+1))-1,S=null}return m!==n&&ai.log("Warning, gif stream shorter than expected."),e}/**
 * @license
  Copyright (c) 2008, Adobe Systems Incorporated
  All rights reserved.

  Redistribution and use in source and binary forms, with or without 
  modification, are permitted provided that the following conditions are
  met:

  * Redistributions of source code must retain the above copyright notice, 
    this list of conditions and the following disclaimer.
  
  * Redistributions in binary form must reproduce the above copyright
    notice, this list of conditions and the following disclaimer in the 
    documentation and/or other materials provided with the distribution.
  
  * Neither the name of Adobe Systems Incorporated nor the names of its 
    contributors may be used to endorse or promote products derived from 
    this software without specific prior written permission.

  THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS "AS
  IS" AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO,
  THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR
  PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR 
  CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL,
  EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO,
  PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR
  PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF
  LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING
  NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS
  SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
*/function Ow(i){var t,e,n,r,s,a=Math.floor,u=new Array(64),c=new Array(64),h=new Array(64),f=new Array(64),g=new Array(65535),m=new Array(65535),y=new Array(64),w=new Array(64),S=[],T=0,C=7,D=new Array(64),R=new Array(64),I=new Array(64),F=new Array(256),q=new Array(2048),U=[0,1,5,6,14,15,27,28,2,4,7,13,16,26,29,42,3,8,12,17,25,30,41,43,9,11,18,24,31,40,44,53,10,19,23,32,39,45,52,54,20,22,33,38,46,51,55,60,21,34,37,47,50,56,59,61,35,36,48,49,57,58,62,63],V=[0,0,1,5,1,1,1,1,1,1,0,0,0,0,0,0,0],tt=[0,1,2,3,4,5,6,7,8,9,10,11],J=[0,0,2,1,3,3,2,4,3,5,5,4,4,0,0,1,125],O=[1,2,3,0,4,17,5,18,33,49,65,6,19,81,97,7,34,113,20,50,129,145,161,8,35,66,177,193,21,82,209,240,36,51,98,114,130,9,10,22,23,24,25,26,37,38,39,40,41,42,52,53,54,55,56,57,58,67,68,69,70,71,72,73,74,83,84,85,86,87,88,89,90,99,100,101,102,103,104,105,106,115,116,117,118,119,120,121,122,131,132,133,134,135,136,137,138,146,147,148,149,150,151,152,153,154,162,163,164,165,166,167,168,169,170,178,179,180,181,182,183,184,185,186,194,195,196,197,198,199,200,201,202,210,211,212,213,214,215,216,217,218,225,226,227,228,229,230,231,232,233,234,241,242,243,244,245,246,247,248,249,250],G=[0,0,3,1,1,1,1,1,1,1,1,1,0,0,0,0,0],et=[0,1,2,3,4,5,6,7,8,9,10,11],st=[0,0,2,1,2,4,4,3,4,7,5,4,4,0,1,2,119],pt=[0,1,2,3,17,4,5,33,49,6,18,65,81,7,97,113,19,34,50,129,8,20,66,145,161,177,193,9,35,51,82,240,21,98,114,209,10,22,36,52,225,37,241,23,24,25,26,38,39,40,41,42,53,54,55,56,57,58,67,68,69,70,71,72,73,74,83,84,85,86,87,88,89,90,99,100,101,102,103,104,105,106,115,116,117,118,119,120,121,122,130,131,132,133,134,135,136,137,138,146,147,148,149,150,151,152,153,154,162,163,164,165,166,167,168,169,170,178,179,180,181,182,183,184,185,186,194,195,196,197,198,199,200,201,202,210,211,212,213,214,215,216,217,218,226,227,228,229,230,231,232,233,234,242,243,244,245,246,247,248,249,250];function nt(P,Y){for(var j=0,ut=0,ft=new Array,mt=1;mt<=16;mt++){for(var At=1;At<=P[mt];At++)ft[Y[ut]]=[],ft[Y[ut]][0]=j,ft[Y[ut]][1]=mt,ut++,j++;j*=2}return ft}function at(P){for(var Y=P[0],j=P[1]-1;j>=0;)Y&1<<j&&(T|=1<<C),j--,--C<0&&(T==255?(ht(255),ht(0)):ht(T),C=7,T=0)}function ht(P){S.push(P)}function bt(P){ht(P>>8&255),ht(255&P)}function St(P,Y,j,ut,ft){for(var mt,At=ft[0],Tt=ft[240],Xt=(function(Jt,te){var ne,Zt,pe,ye,Oe,ke,Xe,mn,Ee,Ye,re=0;for(Ee=0;Ee<8;++Ee){ne=Jt[re],Zt=Jt[re+1],pe=Jt[re+2],ye=Jt[re+3],Oe=Jt[re+4],ke=Jt[re+5],Xe=Jt[re+6];var Ci=ne+(mn=Jt[re+7]),Ze=ne-mn,Vn=Zt+Xe,nn=Zt-Xe,tn=pe+ke,lo=pe-ke,vn=ye+Oe,cl=ye-Oe,kn=Ci+vn,Pr=Ci-vn,ns=Vn+tn,Cn=Vn-tn;Jt[re]=kn+ns,Jt[re+4]=kn-ns;var Te=.707106781*(Cn+Pr);Jt[re+2]=Pr+Te,Jt[re+6]=Pr-Te;var rn=.382683433*((kn=cl+lo)-(Cn=nn+Ze)),Ta=.5411961*kn+rn,Gi=1.306562965*Cn+rn,As=.707106781*(ns=lo+nn),br=Ze+As,Se=Ze-As;Jt[re+5]=Se+Ta,Jt[re+3]=Se-Ta,Jt[re+1]=br+Gi,Jt[re+7]=br-Gi,re+=8}for(re=0,Ee=0;Ee<8;++Ee){ne=Jt[re],Zt=Jt[re+8],pe=Jt[re+16],ye=Jt[re+24],Oe=Jt[re+32],ke=Jt[re+40],Xe=Jt[re+48];var is=ne+(mn=Jt[re+56]),ti=ne-mn,ci=Zt+Xe,hi=Zt-Xe,fi=pe+ke,_s=pe-ke,cc=ye+Oe,kr=ye-Oe,Bn=is+cc,di=is-cc,Fr=ci+fi,uo=ci-fi;Jt[re]=Bn+Fr,Jt[re+32]=Bn-Fr;var co=.707106781*(uo+di);Jt[re+16]=di+co,Jt[re+48]=di-co;var Na=.382683433*((Bn=kr+_s)-(uo=hi+ti)),Zl=.5411961*Bn+Na,Ra=1.306562965*uo+Na,tu=.707106781*(Fr=_s+hi),Go=ti+tu,Vo=ti-tu;Jt[re+40]=Vo+Zl,Jt[re+24]=Vo-Zl,Jt[re+8]=Go+Ra,Jt[re+56]=Go-Ra,re++}for(Ee=0;Ee<64;++Ee)Ye=Jt[Ee]*te[Ee],y[Ee]=Ye>0?Ye+.5|0:Ye-.5|0;return y})(P,Y),$t=0;$t<64;++$t)w[U[$t]]=Xt[$t];var ee=w[0]-j;j=w[0],ee==0?at(ut[0]):(at(ut[m[mt=32767+ee]]),at(g[mt]));for(var Qt=63;Qt>0&&w[Qt]==0;)Qt--;if(Qt==0)return at(At),j;for(var le,Bt=1;Bt<=Qt;){for(var dt=Bt;w[Bt]==0&&Bt<=Qt;)++Bt;var Le=Bt-dt;if(Le>=16){le=Le>>4;for(var he=1;he<=le;++he)at(Tt);Le&=15}mt=32767+w[Bt],at(ft[(Le<<4)+m[mt]]),at(g[mt]),Bt++}return Qt!=63&&at(At),j}function K(P){P=Math.min(Math.max(P,1),100),s!=P&&((function(Y){for(var j=[16,11,10,16,24,40,51,61,12,12,14,19,26,58,60,55,14,13,16,24,40,57,69,56,14,17,22,29,51,87,80,62,18,22,37,56,68,109,103,77,24,35,55,64,81,104,113,92,49,64,78,87,103,121,120,101,72,92,95,98,112,100,103,99],ut=0;ut<64;ut++){var ft=a((j[ut]*Y+50)/100);ft=Math.min(Math.max(ft,1),255),u[U[ut]]=ft}for(var mt=[17,18,24,47,99,99,99,99,18,21,26,66,99,99,99,99,24,26,56,99,99,99,99,99,47,66,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99],At=0;At<64;At++){var Tt=a((mt[At]*Y+50)/100);Tt=Math.min(Math.max(Tt,1),255),c[U[At]]=Tt}for(var Xt=[1,1.387039845,1.306562965,1.175875602,1,.785694958,.5411961,.275899379],$t=0,ee=0;ee<8;ee++)for(var Qt=0;Qt<8;Qt++)h[$t]=1/(u[U[$t]]*Xt[ee]*Xt[Qt]*8),f[$t]=1/(c[U[$t]]*Xt[ee]*Xt[Qt]*8),$t++})(P<50?Math.floor(5e3/P):Math.floor(200-2*P)),s=P)}this.encode=function(P,Y){Y&&K(Y),S=new Array,T=0,C=7,bt(65496),bt(65504),bt(16),ht(74),ht(70),ht(73),ht(70),ht(0),ht(1),ht(1),ht(0),bt(1),bt(1),ht(0),ht(0),(function(){bt(65499),bt(132),ht(0);for(var Zt=0;Zt<64;Zt++)ht(u[Zt]);ht(1);for(var pe=0;pe<64;pe++)ht(c[pe])})(),(function(Zt,pe){bt(65472),bt(17),ht(8),bt(pe),bt(Zt),ht(3),ht(1),ht(17),ht(0),ht(2),ht(17),ht(1),ht(3),ht(17),ht(1)})(P.width,P.height),(function(){bt(65476),bt(418),ht(0);for(var Zt=0;Zt<16;Zt++)ht(V[Zt+1]);for(var pe=0;pe<=11;pe++)ht(tt[pe]);ht(16);for(var ye=0;ye<16;ye++)ht(J[ye+1]);for(var Oe=0;Oe<=161;Oe++)ht(O[Oe]);ht(1);for(var ke=0;ke<16;ke++)ht(G[ke+1]);for(var Xe=0;Xe<=11;Xe++)ht(et[Xe]);ht(17);for(var mn=0;mn<16;mn++)ht(st[mn+1]);for(var Ee=0;Ee<=161;Ee++)ht(pt[Ee])})(),bt(65498),bt(12),ht(3),ht(1),ht(0),ht(2),ht(17),ht(3),ht(17),ht(0),ht(63),ht(0);var j=0,ut=0,ft=0;T=0,C=7,this.encode.displayName="_encode_";for(var mt,At,Tt,Xt,$t,ee,Qt,le,Bt,dt=P.data,Le=P.width,he=P.height,Jt=4*Le,te=0;te<he;){for(mt=0;mt<Jt;){for($t=Jt*te+mt,Qt=-1,le=0,Bt=0;Bt<64;Bt++)ee=$t+(le=Bt>>3)*Jt+(Qt=4*(7&Bt)),te+le>=he&&(ee-=Jt*(te+1+le-he)),mt+Qt>=Jt&&(ee-=mt+Qt-Jt+4),At=dt[ee++],Tt=dt[ee++],Xt=dt[ee++],D[Bt]=(q[At]+q[Tt+256>>0]+q[Xt+512>>0]>>16)-128,R[Bt]=(q[At+768>>0]+q[Tt+1024>>0]+q[Xt+1280>>0]>>16)-128,I[Bt]=(q[At+1280>>0]+q[Tt+1536>>0]+q[Xt+1792>>0]>>16)-128;j=St(D,h,j,t,n),ut=St(R,f,ut,e,r),ft=St(I,f,ft,e,r),mt+=32}te+=8}if(C>=0){var ne=[];ne[1]=C+1,ne[0]=(1<<C+1)-1,at(ne)}return bt(65497),new Uint8Array(S)},i=i||50,(function(){for(var P=String.fromCharCode,Y=0;Y<256;Y++)F[Y]=P(Y)})(),t=nt(V,tt),e=nt(G,et),n=nt(J,O),r=nt(st,pt),(function(){for(var P=1,Y=2,j=1;j<=15;j++){for(var ut=P;ut<Y;ut++)m[32767+ut]=j,g[32767+ut]=[],g[32767+ut][1]=j,g[32767+ut][0]=ut;for(var ft=-(Y-1);ft<=-P;ft++)m[32767+ft]=j,g[32767+ft]=[],g[32767+ft][1]=j,g[32767+ft][0]=Y-1+ft;P<<=1,Y<<=1}})(),(function(){for(var P=0;P<256;P++)q[P]=19595*P,q[P+256>>0]=38470*P,q[P+512>>0]=7471*P+32768,q[P+768>>0]=-11059*P,q[P+1024>>0]=-21709*P,q[P+1280>>0]=32768*P+8421375,q[P+1536>>0]=-27439*P,q[P+1792>>0]=-5329*P})(),K(i)}/**
 * @license
 * Copyright (c) 2017 Aras Abbasi
 *
 * Licensed under the MIT License.
 * http://opensource.org/licenses/mit-license
 */function Dl(i,t){if(this.pos=0,this.buffer=i,this.datav=new DataView(i.buffer),this.is_with_alpha=!!t,this.bottom_up=!0,this.flag=String.fromCharCode(this.buffer[0])+String.fromCharCode(this.buffer[1]),this.pos+=2,["BM","BA","CI","CP","IC","PT"].indexOf(this.flag)===-1)throw new Error("Invalid BMP File");this.parseHeader(),this.parseBGR()}function hN(i){function t(V){if(!V)throw Error("assert :P")}function e(V,tt,J){for(var O=0;4>O;O++)if(V[tt+O]!=J.charCodeAt(O))return!0;return!1}function n(V,tt,J,O,G){for(var et=0;et<G;et++)V[tt+et]=J[O+et]}function r(V,tt,J,O){for(var G=0;G<O;G++)V[tt+G]=J}function s(V){return new Int32Array(V)}function a(V,tt){for(var J=[],O=0;O<V;O++)J.push(new tt);return J}function u(V,tt){var J=[];return(function O(G,et,st){for(var pt=st[et],nt=0;nt<pt&&(G.push(st.length>et+1?[]:new tt),!(st.length<et+1));nt++)O(G[nt],et+1,st)})(J,0,V),J}var c=function(){var V=this;function tt(b,E){for(var M=1<<E-1>>>0;b&M;)M>>>=1;return M?(b&M-1)+M:b}function J(b,E,M,B,W){t(!(B%M));do b[E+(B-=M)]=W;while(0<B)}function O(b,E,M,B,W){if(t(2328>=W),512>=W)var Q=s(512);else if((Q=s(W))==null)return 0;return(function(Z,it,ot,lt,yt,Dt){var Rt,Et,Vt=it,Ft=1<<ot,xt=s(16),wt=s(16);for(t(yt!=0),t(lt!=null),t(Z!=null),t(0<ot),Et=0;Et<yt;++Et){if(15<lt[Et])return 0;++xt[lt[Et]]}if(xt[0]==yt)return 0;for(wt[1]=0,Rt=1;15>Rt;++Rt){if(xt[Rt]>1<<Rt)return 0;wt[Rt+1]=wt[Rt]+xt[Rt]}for(Et=0;Et<yt;++Et)Rt=lt[Et],0<lt[Et]&&(Dt[wt[Rt]++]=Et);if(wt[15]==1)return(lt=new G).g=0,lt.value=Dt[0],J(Z,Vt,1,Ft,lt),Ft;var zt,Wt=-1,qt=Ft-1,oe=0,ie=1,Ae=1,se=1<<ot;for(Et=0,Rt=1,yt=2;Rt<=ot;++Rt,yt<<=1){if(ie+=Ae<<=1,0>(Ae-=xt[Rt]))return 0;for(;0<xt[Rt];--xt[Rt])(lt=new G).g=Rt,lt.value=Dt[Et++],J(Z,Vt+oe,yt,se,lt),oe=tt(oe,Rt)}for(Rt=ot+1,yt=2;15>=Rt;++Rt,yt<<=1){if(ie+=Ae<<=1,0>(Ae-=xt[Rt]))return 0;for(;0<xt[Rt];--xt[Rt]){if(lt=new G,(oe&qt)!=Wt){for(Vt+=se,zt=1<<(Wt=Rt)-ot;15>Wt&&!(0>=(zt-=xt[Wt]));)++Wt,zt<<=1;Ft+=se=1<<(zt=Wt-ot),Z[it+(Wt=oe&qt)].g=zt+ot,Z[it+Wt].value=Vt-it-Wt}lt.g=Rt-ot,lt.value=Dt[Et++],J(Z,Vt+(oe>>ot),yt,se,lt),oe=tt(oe,Rt)}}return ie!=2*wt[15]-1?0:Ft})(b,E,M,B,W,Q)}function G(){this.value=this.g=0}function et(){this.value=this.g=0}function st(){this.G=a(5,G),this.H=s(5),this.jc=this.Qb=this.qb=this.nd=0,this.pd=a(lr,et)}function pt(b,E,M,B){t(b!=null),t(E!=null),t(2147483648>B),b.Ca=254,b.I=0,b.b=-8,b.Ka=0,b.oa=E,b.pa=M,b.Jd=E,b.Yc=M+B,b.Zc=4<=B?M+B-4+1:M,mt(b)}function nt(b,E){for(var M=0;0<E--;)M|=Tt(b,128)<<E;return M}function at(b,E){var M=nt(b,E);return At(b)?-M:M}function ht(b,E,M,B){var W,Q=0;for(t(b!=null),t(E!=null),t(4294967288>B),b.Sb=B,b.Ra=0,b.u=0,b.h=0,4<B&&(B=4),W=0;W<B;++W)Q+=E[M+W]<<8*W;b.Ra=Q,b.bb=B,b.oa=E,b.pa=M}function bt(b){for(;8<=b.u&&b.bb<b.Sb;)b.Ra>>>=8,b.Ra+=b.oa[b.pa+b.bb]<<du-8>>>0,++b.bb,b.u-=8;j(b)&&(b.h=1,b.u=0)}function St(b,E){if(t(0<=E),!b.h&&E<=fu){var M=Y(b)&xc[E];return b.u+=E,bt(b),M}return b.h=1,b.u=0}function K(){this.b=this.Ca=this.I=0,this.oa=[],this.pa=0,this.Jd=[],this.Yc=0,this.Zc=[],this.Ka=0}function P(){this.Ra=0,this.oa=[],this.h=this.u=this.bb=this.Sb=this.pa=0}function Y(b){return b.Ra>>>(b.u&du-1)>>>0}function j(b){return t(b.bb<=b.Sb),b.h||b.bb==b.Sb&&b.u>du}function ut(b,E){b.u=E,b.h=j(b)}function ft(b){b.u>=Qh&&(t(b.u>=Qh),bt(b))}function mt(b){t(b!=null&&b.oa!=null),b.pa<b.Zc?(b.I=(b.oa[b.pa++]|b.I<<8)>>>0,b.b+=8):(t(b!=null&&b.oa!=null),b.pa<b.Yc?(b.b+=8,b.I=b.oa[b.pa++]|b.I<<8):b.Ka?b.b=0:(b.I<<=8,b.b+=8,b.Ka=1))}function At(b){return nt(b,1)}function Tt(b,E){var M=b.Ca;0>b.b&&mt(b);var B=b.b,W=M*E>>>8,Q=(b.I>>>B>W)+0;for(Q?(M-=W,b.I-=W+1<<B>>>0):M=W+1,B=M,W=0;256<=B;)W+=8,B>>=8;return B=7^W+ss[B],b.b-=B,b.Ca=(M<<B)-1,Q}function Xt(b,E,M){b[E+0]=M>>24&255,b[E+1]=M>>16&255,b[E+2]=M>>8&255,b[E+3]=M>>0&255}function $t(b,E){return b[E+0]<<0|b[E+1]<<8}function ee(b,E){return $t(b,E)|b[E+2]<<16}function Qt(b,E){return $t(b,E)|$t(b,E+2)<<16}function le(b,E){var M=1<<E;return t(b!=null),t(0<E),b.X=s(M),b.X==null?0:(b.Mb=32-E,b.Xa=E,1)}function Bt(b,E){t(b!=null),t(E!=null),t(b.Xa==E.Xa),n(E.X,0,b.X,0,1<<E.Xa)}function dt(){this.X=[],this.Xa=this.Mb=0}function Le(b,E,M,B){t(M!=null),t(B!=null);var W=M[0],Q=B[0];return W==0&&(W=(b*Q+E/2)/E),Q==0&&(Q=(E*W+b/2)/b),0>=W||0>=Q?0:(M[0]=W,B[0]=Q,1)}function he(b,E){return b+(1<<E)-1>>>E}function Jt(b,E){return((4278255360&b)+(4278255360&E)>>>0&4278255360)+((16711935&b)+(16711935&E)>>>0&16711935)>>>0}function te(b,E){V[E]=function(M,B,W,Q,Z,it,ot){var lt;for(lt=0;lt<Z;++lt){var yt=V[b](it[ot+lt-1],W,Q+lt);it[ot+lt]=Jt(M[B+lt],yt)}}}function ne(){this.ud=this.hd=this.jd=0}function Zt(b,E){return((4278124286&(b^E))>>>1)+(b&E)>>>0}function pe(b){return 0<=b&&256>b?b:0>b?0:255<b?255:void 0}function ye(b,E){return pe(b+(b-E+.5>>1))}function Oe(b,E,M){return Math.abs(E-M)-Math.abs(b-M)}function ke(b,E,M,B,W,Q,Z){for(B=Q[Z-1],M=0;M<W;++M)Q[Z+M]=B=Jt(b[E+M],B)}function Xe(b,E,M,B,W){var Q;for(Q=0;Q<M;++Q){var Z=b[E+Q],it=Z>>8&255,ot=16711935&(ot=(ot=16711935&Z)+((it<<16)+it));B[W+Q]=(4278255360&Z)+ot>>>0}}function mn(b,E){E.jd=b>>0&255,E.hd=b>>8&255,E.ud=b>>16&255}function Ee(b,E,M,B,W,Q){var Z;for(Z=0;Z<B;++Z){var it=E[M+Z],ot=it>>>8,lt=it,yt=255&(yt=(yt=it>>>16)+((b.jd<<24>>24)*(ot<<24>>24)>>>5));lt=255&(lt=(lt=lt+((b.hd<<24>>24)*(ot<<24>>24)>>>5))+((b.ud<<24>>24)*(yt<<24>>24)>>>5)),W[Q+Z]=(4278255360&it)+(yt<<16)+lt}}function Ye(b,E,M,B,W){V[E]=function(Q,Z,it,ot,lt,yt,Dt,Rt,Et){for(ot=Dt;ot<Rt;++ot)for(Dt=0;Dt<Et;++Dt)lt[yt++]=W(it[B(Q[Z++])])},V[b]=function(Q,Z,it,ot,lt,yt,Dt){var Rt=8>>Q.b,Et=Q.Ea,Vt=Q.K[0],Ft=Q.w;if(8>Rt)for(Q=(1<<Q.b)-1,Ft=(1<<Rt)-1;Z<it;++Z){var xt,wt=0;for(xt=0;xt<Et;++xt)xt&Q||(wt=B(ot[lt++])),yt[Dt++]=W(Vt[wt&Ft]),wt>>=Rt}else V["VP8LMapColor"+M](ot,lt,Vt,Ft,yt,Dt,Z,it,Et)}}function re(b,E,M,B,W){for(M=E+M;E<M;){var Q=b[E++];B[W++]=Q>>16&255,B[W++]=Q>>8&255,B[W++]=Q>>0&255}}function Ci(b,E,M,B,W){for(M=E+M;E<M;){var Q=b[E++];B[W++]=Q>>16&255,B[W++]=Q>>8&255,B[W++]=Q>>0&255,B[W++]=Q>>24&255}}function Ze(b,E,M,B,W){for(M=E+M;E<M;){var Q=(Z=b[E++])>>16&240|Z>>12&15,Z=Z>>0&240|Z>>28&15;B[W++]=Q,B[W++]=Z}}function Vn(b,E,M,B,W){for(M=E+M;E<M;){var Q=(Z=b[E++])>>16&248|Z>>13&7,Z=Z>>5&224|Z>>3&31;B[W++]=Q,B[W++]=Z}}function nn(b,E,M,B,W){for(M=E+M;E<M;){var Q=b[E++];B[W++]=Q>>0&255,B[W++]=Q>>8&255,B[W++]=Q>>16&255}}function tn(b,E,M,B,W,Q){if(Q==0)for(M=E+M;E<M;)Xt(B,((Q=b[E++])[0]>>24|Q[1]>>8&65280|Q[2]<<8&16711680|Q[3]<<24)>>>0),W+=32;else n(B,W,b,E,M)}function lo(b,E){V[E][0]=V[b+"0"],V[E][1]=V[b+"1"],V[E][2]=V[b+"2"],V[E][3]=V[b+"3"],V[E][4]=V[b+"4"],V[E][5]=V[b+"5"],V[E][6]=V[b+"6"],V[E][7]=V[b+"7"],V[E][8]=V[b+"8"],V[E][9]=V[b+"9"],V[E][10]=V[b+"10"],V[E][11]=V[b+"11"],V[E][12]=V[b+"12"],V[E][13]=V[b+"13"],V[E][14]=V[b+"0"],V[E][15]=V[b+"0"]}function vn(b){return b==Zd||b==sg||b==af||b==og}function cl(){this.eb=[],this.size=this.A=this.fb=0}function kn(){this.y=[],this.f=[],this.ea=[],this.F=[],this.Tc=this.Ed=this.Cd=this.Fd=this.lb=this.Db=this.Ab=this.fa=this.J=this.W=this.N=this.O=0}function Pr(){this.Rd=this.height=this.width=this.S=0,this.f={},this.f.RGBA=new cl,this.f.kb=new kn,this.sd=null}function ns(){this.width=[0],this.height=[0],this.Pd=[0],this.Qd=[0],this.format=[0]}function Cn(){this.Id=this.fd=this.Md=this.hb=this.ib=this.da=this.bd=this.cd=this.j=this.v=this.Da=this.Sd=this.ob=0}function Te(b){return alert("todo:WebPSamplerProcessPlane"),b.T}function rn(b,E){var M=b.T,B=E.ba.f.RGBA,W=B.eb,Q=B.fb+b.ka*B.A,Z=Sr[E.ba.S],it=b.y,ot=b.O,lt=b.f,yt=b.N,Dt=b.ea,Rt=b.W,Et=E.cc,Vt=E.dc,Ft=E.Mc,xt=E.Nc,wt=b.ka,zt=b.ka+b.T,Wt=b.U,qt=Wt+1>>1;for(wt==0?Z(it,ot,null,null,lt,yt,Dt,Rt,lt,yt,Dt,Rt,W,Q,null,null,Wt):(Z(E.ec,E.fc,it,ot,Et,Vt,Ft,xt,lt,yt,Dt,Rt,W,Q-B.A,W,Q,Wt),++M);wt+2<zt;wt+=2)Et=lt,Vt=yt,Ft=Dt,xt=Rt,yt+=b.Rc,Rt+=b.Rc,Q+=2*B.A,Z(it,(ot+=2*b.fa)-b.fa,it,ot,Et,Vt,Ft,xt,lt,yt,Dt,Rt,W,Q-B.A,W,Q,Wt);return ot+=b.fa,b.j+zt<b.o?(n(E.ec,E.fc,it,ot,Wt),n(E.cc,E.dc,lt,yt,qt),n(E.Mc,E.Nc,Dt,Rt,qt),M--):1&zt||Z(it,ot,null,null,lt,yt,Dt,Rt,lt,yt,Dt,Rt,W,Q+B.A,null,null,Wt),M}function Ta(b,E,M){var B=b.F,W=[b.J];if(B!=null){var Q=b.U,Z=E.ba.S,it=Z==Qd||Z==af;E=E.ba.f.RGBA;var ot=[0],lt=b.ka;ot[0]=b.T,b.Kb&&(lt==0?--ot[0]:(--lt,W[0]-=b.width),b.j+b.ka+b.T==b.o&&(ot[0]=b.o-b.j-lt));var yt=E.eb;lt=E.fb+lt*E.A,b=Ln(B,W[0],b.width,Q,ot,yt,lt+(it?0:3),E.A),t(M==ot),b&&vn(Z)&&Es(yt,lt,it,Q,ot,E.A)}return 0}function Gi(b){var E=b.ma,M=E.ba.S,B=11>M,W=M==Gr||M==xo||M==Qd||M==of||M==12||vn(M);if(E.memory=null,E.Ib=null,E.Jb=null,E.Nd=null,!pl(E.Oa,b,W?11:12))return 0;if(W&&vn(M)&&jt(),b.da)alert("todo:use_scaling");else{if(B){if(E.Ib=Te,b.Kb){if(M=b.U+1>>1,E.memory=s(b.U+2*M),E.memory==null)return 0;E.ec=E.memory,E.fc=0,E.cc=E.ec,E.dc=E.fc+b.U,E.Mc=E.cc,E.Nc=E.dc+M,E.Ib=rn,jt()}}else alert("todo:EmitYUV");W&&(E.Jb=Ta,B&&Nt())}if(B&&!Eu){for(b=0;256>b;++b)Er[b]=89858*(b-128)+cf>>Eo,jA[b]=-22014*(b-128)+cf,fx[b]=-45773*(b-128),hg[b]=113618*(b-128)+cf>>Eo;for(b=Sc;b<Su;++b)E=76283*(b-16)+cf>>Eo,JA[b-Sc]=Vs(E,255),KA[b-Sc]=Vs(E+8>>4,15);Eu=1}return 1}function As(b){var E=b.ma,M=b.U,B=b.T;return t(!(1&b.ka)),0>=M||0>=B?0:(M=E.Ib(b,E),E.Jb!=null&&E.Jb(b,E,M),E.Dc+=M,1)}function br(b){b.ma.memory=null}function Se(b,E,M,B){return St(b,8)!=47?0:(E[0]=St(b,14)+1,M[0]=St(b,14)+1,B[0]=St(b,1),St(b,3)!=0?0:!b.h)}function is(b,E){if(4>b)return b+1;var M=b-2>>1;return(2+(1&b)<<M)+St(E,M)+1}function ti(b,E){return 120<E?E-120:1<=(M=((M=Ao[E-1])>>4)*b+(8-(15&M)))?M:1;var M}function ci(b,E,M){var B=Y(M),W=b[E+=255&B].g-8;return 0<W&&(ut(M,M.u+8),B=Y(M),E+=b[E].value,E+=B&(1<<W)-1),ut(M,M.u+b[E].g),b[E].value}function hi(b,E,M){return M.g+=b.g,M.value+=b.value<<E>>>0,t(8>=M.g),b.g}function fi(b,E,M){var B=b.xc;return t((E=B==0?0:b.vc[b.md*(M>>B)+(E>>B)])<b.Wb),b.Ya[E]}function _s(b,E,M,B){var W=b.ab,Q=b.c*E,Z=b.C;E=Z+E;var it=M,ot=B;for(B=b.Ta,M=b.Ua;0<W--;){var lt=b.gc[W],yt=Z,Dt=E,Rt=it,Et=ot,Vt=(ot=B,it=M,lt.Ea);switch(t(yt<Dt),t(Dt<=lt.nc),lt.hc){case 2:eg(Rt,Et,(Dt-yt)*Vt,ot,it);break;case 0:var Ft=yt,xt=Dt,wt=ot,zt=it,Wt=(se=lt).Ea;Ft==0&&(tg(Rt,Et,null,null,1,wt,zt),ke(Rt,Et+1,0,0,Wt-1,wt,zt+1),Et+=Wt,zt+=Wt,++Ft);for(var qt=1<<se.b,oe=qt-1,ie=he(Wt,se.b),Ae=se.K,se=se.w+(Ft>>se.b)*ie;Ft<xt;){var wn=Ae,ln=se,fn=1;for(Jd(Rt,Et,wt,zt-Wt,1,wt,zt);fn<Wt;){var Ue=(fn&~oe)+qt;Ue>Wt&&(Ue=Wt),(0,yo[wn[ln++]>>8&15])(Rt,Et+ +fn,wt,zt+fn-Wt,Ue-fn,wt,zt+fn),fn=Ue}Et+=Wt,zt+=Wt,++Ft&oe||(se+=ie)}Dt!=lt.nc&&n(ot,it-Vt,ot,it+(Dt-yt-1)*Vt,Vt);break;case 1:for(Vt=Rt,xt=Et,Wt=(Rt=lt.Ea)-(zt=Rt&~(wt=(Et=1<<lt.b)-1)),Ft=he(Rt,lt.b),qt=lt.K,lt=lt.w+(yt>>lt.b)*Ft;yt<Dt;){for(oe=qt,ie=lt,Ae=new ne,se=xt+zt,wn=xt+Rt;xt<se;)mn(oe[ie++],Ae),pu(Ae,Vt,xt,Et,ot,it),xt+=Et,it+=Et;xt<wn&&(mn(oe[ie++],Ae),pu(Ae,Vt,xt,Wt,ot,it),xt+=Wt,it+=Wt),++yt&wt||(lt+=Ft)}break;case 3:if(Rt==ot&&Et==it&&0<lt.b){for(xt=ot,Rt=Vt=it+(Dt-yt)*Vt-(zt=(Dt-yt)*he(lt.Ea,lt.b)),Et=ot,wt=it,Ft=[],zt=(Wt=zt)-1;0<=zt;--zt)Ft[zt]=Et[wt+zt];for(zt=Wt-1;0<=zt;--zt)xt[Rt+zt]=Ft[zt];vo(lt,yt,Dt,ot,Vt,ot,it)}else vo(lt,yt,Dt,Rt,Et,ot,it)}it=B,ot=M}ot!=M&&n(B,M,it,ot,Q)}function cc(b,E){var M=b.V,B=b.Ba+b.c*b.C,W=E-b.C;if(t(E<=b.l.o),t(16>=W),0<W){var Q=b.l,Z=b.Ta,it=b.Ua,ot=Q.width;if(_s(b,W,M,B),W=it=[it],t((M=b.C)<(B=E)),t(Q.v<Q.va),B>Q.o&&(B=Q.o),M<Q.j){var lt=Q.j-M;M=Q.j,W[0]+=lt*ot}if(M>=B?M=0:(W[0]+=4*Q.v,Q.ka=M-Q.j,Q.U=Q.va-Q.v,Q.T=B-M,M=1),M){if(it=it[0],11>(M=b.ca).S){var yt=M.f.RGBA,Dt=(B=M.S,W=Q.U,Q=Q.T,lt=yt.eb,yt.A),Rt=Q;for(yt=yt.fb+b.Ma*yt.A;0<Rt--;){var Et=Z,Vt=it,Ft=W,xt=lt,wt=yt;switch(B){case ig:os(Et,Vt,Ft,xt,wt);break;case Gr:Hr(Et,Vt,Ft,xt,wt);break;case Zd:Hr(Et,Vt,Ft,xt,wt),Es(xt,wt,0,Ft,1,0);break;case rg:vl(Et,Vt,Ft,xt,wt);break;case xo:tn(Et,Vt,Ft,xt,wt,1);break;case sg:tn(Et,Vt,Ft,xt,wt,1),Es(xt,wt,0,Ft,1,0);break;case Qd:tn(Et,Vt,Ft,xt,wt,0);break;case af:tn(Et,Vt,Ft,xt,wt,0),Es(xt,wt,1,Ft,1,0);break;case of:ml(Et,Vt,Ft,xt,wt);break;case og:ml(Et,Vt,Ft,xt,wt),sn(xt,wt,Ft,1,0);break;case xu:Xo(Et,Vt,Ft,xt,wt);break;default:t(0)}it+=ot,yt+=Dt}b.Ma+=Q}else alert("todo:EmitRescaledRowsYUVA");t(b.Ma<=M.height)}}b.C=E,t(b.C<=b.i)}function kr(b){var E;if(0<b.ua)return 0;for(E=0;E<b.Wb;++E){var M=b.Ya[E].G,B=b.Ya[E].H;if(0<M[1][B[1]+0].g||0<M[2][B[2]+0].g||0<M[3][B[3]+0].g)return 0}return 1}function Bn(b,E,M,B,W,Q){if(b.Z!=0){var Z=b.qd,it=b.rd;for(t(Al[b.Z]!=null);E<M;++E)Al[b.Z](Z,it,B,W,B,W,Q),Z=B,it=W,W+=Q;b.qd=Z,b.rd=it}}function di(b,E){var M=b.l.ma,B=M.Z==0||M.Z==1?b.l.j:b.C;if(B=b.C<B?B:b.C,t(E<=b.l.o),E>B){var W=b.l.width,Q=M.ca,Z=M.tb+W*B,it=b.V,ot=b.Ba+b.c*B,lt=b.gc;t(b.ab==1),t(lt[0].hc==3),ng(lt[0],B,E,it,ot,Q,Z),Bn(M,B,E,Q,Z,W)}b.C=b.Ma=E}function Fr(b,E,M,B,W,Q,Z){var it=b.$/B,ot=b.$%B,lt=b.m,yt=b.s,Dt=M+b.$,Rt=Dt;W=M+B*W;var Et=M+B*Q,Vt=280+yt.ua,Ft=b.Pb?it:16777216,xt=0<yt.ua?yt.Wa:null,wt=yt.wc,zt=Dt<Et?fi(yt,ot,it):null;t(b.C<Q),t(Et<=W);var Wt=!1;t:for(;;){for(;Wt||Dt<Et;){var qt=0;if(it>=Ft){var oe=Dt-M;t((Ft=b).Pb),Ft.wd=Ft.m,Ft.xd=oe,0<Ft.s.ua&&Bt(Ft.s.Wa,Ft.s.vb),Ft=it+bu}if(ot&wt||(zt=fi(yt,ot,it)),t(zt!=null),zt.Qb&&(E[Dt]=zt.qb,Wt=!0),!Wt)if(ft(lt),zt.jc){qt=lt,oe=E;var ie=Dt,Ae=zt.pd[Y(qt)&lr-1];t(zt.jc),256>Ae.g?(ut(qt,qt.u+Ae.g),oe[ie]=Ae.value,qt=0):(ut(qt,qt.u+Ae.g-256),t(256<=Ae.value),qt=Ae.value),qt==0&&(Wt=!0)}else qt=ci(zt.G[0],zt.H[0],lt);if(lt.h)break;if(Wt||256>qt){if(!Wt)if(zt.nd)E[Dt]=(zt.qb|qt<<8)>>>0;else{if(ft(lt),Wt=ci(zt.G[1],zt.H[1],lt),ft(lt),oe=ci(zt.G[2],zt.H[2],lt),ie=ci(zt.G[3],zt.H[3],lt),lt.h)break;E[Dt]=(ie<<24|Wt<<16|qt<<8|oe)>>>0}if(Wt=!1,++Dt,++ot>=B&&(ot=0,++it,Z!=null&&it<=Q&&!(it%16)&&Z(b,it),xt!=null))for(;Rt<Dt;)qt=E[Rt++],xt.X[(506832829*qt&4294967295)>>>xt.Mb]=qt}else if(280>qt){if(qt=is(qt-256,lt),oe=ci(zt.G[4],zt.H[4],lt),ft(lt),oe=ti(B,oe=is(oe,lt)),lt.h)break;if(Dt-M<oe||W-Dt<qt)break t;for(ie=0;ie<qt;++ie)E[Dt+ie]=E[Dt+ie-oe];for(Dt+=qt,ot+=qt;ot>=B;)ot-=B,++it,Z!=null&&it<=Q&&!(it%16)&&Z(b,it);if(t(Dt<=W),ot&wt&&(zt=fi(yt,ot,it)),xt!=null)for(;Rt<Dt;)qt=E[Rt++],xt.X[(506832829*qt&4294967295)>>>xt.Mb]=qt}else{if(!(qt<Vt))break t;for(Wt=qt-280,t(xt!=null);Rt<Dt;)qt=E[Rt++],xt.X[(506832829*qt&4294967295)>>>xt.Mb]=qt;qt=Dt,t(!(Wt>>>(oe=xt).Xa)),E[qt]=oe.X[Wt],Wt=!0}Wt||t(lt.h==j(lt))}if(b.Pb&&lt.h&&Dt<W)t(b.m.h),b.a=5,b.m=b.wd,b.$=b.xd,0<b.s.ua&&Bt(b.s.vb,b.s.Wa);else{if(lt.h)break t;Z!=null&&Z(b,it>Q?Q:it),b.a=0,b.$=Dt-M}return 1}return b.a=3,0}function uo(b){t(b!=null),b.vc=null,b.yc=null,b.Ya=null;var E=b.Wa;E!=null&&(E.X=null),b.vb=null,t(b!=null)}function co(){var b=new V1;return b==null?null:(b.a=0,b.xb=$1,lo("Predictor","VP8LPredictors"),lo("Predictor","VP8LPredictors_C"),lo("PredictorAdd","VP8LPredictorsAdd"),lo("PredictorAdd","VP8LPredictorsAdd_C"),eg=Xe,pu=Ee,os=re,Hr=Ci,ml=Ze,Xo=Vn,vl=nn,V.VP8LMapColor32b=Zh,V.VP8LMapColor8b=Ur,b)}function Na(b,E,M,B,W){var Q=1,Z=[b],it=[E],ot=B.m,lt=B.s,yt=null,Dt=0;t:for(;;){if(M)for(;Q&&St(ot,1);){var Rt=Z,Et=it,Vt=B,Ft=1,xt=Vt.m,wt=Vt.gc[Vt.ab],zt=St(xt,2);if(Vt.Oc&1<<zt)Q=0;else{switch(Vt.Oc|=1<<zt,wt.hc=zt,wt.Ea=Rt[0],wt.nc=Et[0],wt.K=[null],++Vt.ab,t(4>=Vt.ab),zt){case 0:case 1:wt.b=St(xt,3)+2,Ft=Na(he(wt.Ea,wt.b),he(wt.nc,wt.b),0,Vt,wt.K),wt.K=wt.K[0];break;case 3:var Wt,qt=St(xt,8)+1,oe=16<qt?0:4<qt?1:2<qt?2:3;if(Rt[0]=he(wt.Ea,oe),wt.b=oe,Wt=Ft=Na(qt,1,0,Vt,wt.K)){var ie,Ae=qt,se=wt,wn=1<<(8>>se.b),ln=s(wn);if(ln==null)Wt=0;else{var fn=se.K[0],Ue=se.w;for(ln[0]=se.K[0][0],ie=1;ie<1*Ae;++ie)ln[ie]=Jt(fn[Ue+ie],ln[ie-1]);for(;ie<4*wn;++ie)ln[ie]=0;se.K[0]=null,se.K[0]=ln,Wt=1}}Ft=Wt;break;case 2:break;default:t(0)}Q=Ft}}if(Z=Z[0],it=it[0],Q&&St(ot,1)&&!(Q=1<=(Dt=St(ot,4))&&11>=Dt)){B.a=3;break t}var Mn;if(Mn=Q)e:{var Tn,Ne,On,cr=B,Ni=Z,Vr=it,yn=Dt,Cr=M,Cs=cr.m,er=cr.s,Ri=[null],hr=1,Xs=0,Co=_o[yn];n:for(;;){if(Cr&&St(Cs,1)){var Yi=St(Cs,3)+2,Oi=he(Ni,Yi),fr=he(Vr,Yi),js=Oi*fr;if(!Na(Oi,fr,0,cr,Ri))break n;for(Ri=Ri[0],er.xc=Yi,Tn=0;Tn<js;++Tn){var Fa=Ri[Tn]>>8&65535;Ri[Tn]=Fa,Fa>=hr&&(hr=Fa+1)}}if(Cs.h)break n;for(Ne=0;5>Ne;++Ne){var _i=_c[Ne];!Ne&&0<yn&&(_i+=1<<yn),Xs<_i&&(Xs=_i)}var Ba=a(hr*Co,G),Ts=hr,Di=a(Ts,st);if(Di==null)var Ec=null;else t(65536>=Ts),Ec=Di;var Js=s(Xs);if(Ec==null||Js==null||Ba==null){cr.a=1;break n}var Be=Ba;for(Tn=On=0;Tn<hr;++Tn){var en=Ec[Tn],ii=en.G,_l=en.H,Cc=0,Oa=1,i0=0;for(Ne=0;5>Ne;++Ne){_i=_c[Ne],ii[Ne]=Be,_l[Ne]=On,!Ne&&0<yn&&(_i+=1<<yn);r:{var Cu,Tu=_i,dg=cr,Yn=Js,X1=Be,j1=On,pg=0,wl=dg.m,QA=St(wl,1);if(r(Yn,0,0,Tu),QA){var J1=St(wl,1)+1,K1=St(wl,1),gg=St(wl,K1==0?1:8);Yn[gg]=1,J1==2&&(Yn[gg=St(wl,8)]=1);var dr=1}else{var Li=s(19),r0=St(wl,4)+4;if(19<r0){dg.a=3;var Nu=0;break r}for(Cu=0;Cu<r0;++Cu)Li[t0[Cu]]=St(wl,3);var ff=void 0,Tc=void 0,Ua=dg,mg=Li,df=Tu,vg=Yn,yg=0,Sl=Ua.m,Q1=8,Z1=a(128,G);i:for(;O(Z1,0,7,mg,19);){if(St(Sl,1)){var dx=2+2*St(Sl,3);if((ff=2+St(Sl,dx))>df)break i}else ff=df;for(Tc=0;Tc<df&&ff--;){ft(Sl);var tv=Z1[0+(127&Y(Sl))];ut(Sl,Sl.u+tv.g);var Ru=tv.value;if(16>Ru)vg[Tc++]=Ru,Ru!=0&&(Q1=Ru);else{var px=Ru==16,gx=Ru-16,mx=lf[gx],ev=St(Sl,bo[gx])+mx;if(Tc+ev>df)break i;for(var vx=px?Q1:0;0<ev--;)vg[Tc++]=vx}}yg=1;break i}yg||(Ua.a=3),dr=yg}(dr=dr&&!wl.h)&&(pg=O(X1,j1,8,Yn,Tu)),dr&&pg!=0?Nu=pg:(dg.a=3,Nu=0)}if(Nu==0)break n;if(Oa&&ag[Ne]==1&&(Oa=Be[On].g==0),Cc+=Be[On].g,On+=Nu,3>=Ne){var Nc,xg=Js[0];for(Nc=1;Nc<_i;++Nc)Js[Nc]>xg&&(xg=Js[Nc]);i0+=xg}}if(en.nd=Oa,en.Qb=0,Oa&&(en.qb=(ii[3][_l[3]+0].value<<24|ii[1][_l[1]+0].value<<16|ii[2][_l[2]+0].value)>>>0,Cc==0&&256>ii[0][_l[0]+0].value&&(en.Qb=1,en.qb+=ii[0][_l[0]+0].value<<8)),en.jc=!en.Qb&&6>i0,en.jc){var s0,Ha=en;for(s0=0;s0<lr;++s0){var El=s0,Cl=Ha.pd[El],bg=Ha.G[0][Ha.H[0]+El];256<=bg.value?(Cl.g=bg.g+256,Cl.value=bg.value):(Cl.g=0,Cl.value=0,El>>=hi(bg,8,Cl),El>>=hi(Ha.G[1][Ha.H[1]+El],16,Cl),El>>=hi(Ha.G[2][Ha.H[2]+El],0,Cl),hi(Ha.G[3][Ha.H[3]+El],24,Cl))}}}er.vc=Ri,er.Wb=hr,er.Ya=Ec,er.yc=Ba,Mn=1;break e}Mn=0}if(!(Q=Mn)){B.a=3;break t}if(0<Dt){if(lt.ua=1<<Dt,!le(lt.Wa,Dt)){B.a=1,Q=0;break t}}else lt.ua=0;var Ag=B,Rc=Z,yx=it,pf=Ag.s,gf=pf.xc;if(Ag.c=Rc,Ag.i=yx,pf.md=he(Rc,gf),pf.wc=gf==0?-1:(1<<gf)-1,M){B.xb=Au;break t}if((yt=s(Z*it))==null){B.a=1,Q=0;break t}Q=(Q=Fr(B,yt,0,Z,it,it,null))&&!ot.h;break t}return Q?(W!=null?W[0]=yt:(t(yt==null),t(M)),B.$=0,M||uo(lt)):uo(lt),Q}function Zl(b,E){var M=b.c*b.i,B=M+E+16*E;return t(b.c<=E),b.V=s(B),b.V==null?(b.Ta=null,b.Ua=0,b.a=1,0):(b.Ta=b.V,b.Ua=b.Ba+M+E,1)}function Ra(b,E){var M=b.C,B=E-M,W=b.V,Q=b.Ba+b.c*M;for(t(E<=b.l.o);0<B;){var Z=16<B?16:B,it=b.l.ma,ot=b.l.width,lt=ot*Z,yt=it.ca,Dt=it.tb+ot*M,Rt=b.Ta,Et=b.Ua;_s(b,Z,W,Q),_n(Rt,Et,yt,Dt,lt),Bn(it,M,M+Z,yt,Dt,ot),B-=Z,W+=Z*b.c,M+=Z}t(M==E),b.C=b.Ma=E}function tu(){this.ub=this.yd=this.td=this.Rb=0}function Go(){this.Kd=this.Ld=this.Ud=this.Td=this.i=this.c=0}function Vo(){this.Fb=this.Bb=this.Cb=0,this.Zb=s(4),this.Lb=s(4)}function eu(){this.Yb=(function(){var b=[];return(function E(M,B,W){for(var Q=W[B],Z=0;Z<Q&&(M.push(W.length>B+1?[]:0),!(W.length<B+1));Z++)E(M[Z],B+1,W)})(b,0,[3,11]),b})()}function nu(){this.jb=s(3),this.Wc=u([4,8],eu),this.Xc=u([4,17],eu)}function Vi(){this.Pc=this.wb=this.Tb=this.zd=0,this.vd=new s(4),this.od=new s(4)}function hc(){this.ld=this.La=this.dd=this.tc=0}function Id(){this.Na=this.la=0}function hl(){this.Sc=[0,0],this.Eb=[0,0],this.Qc=[0,0],this.ia=this.lc=0}function Da(){this.ad=s(384),this.Za=0,this.Ob=s(16),this.$b=this.Ad=this.ia=this.Gc=this.Hc=this.Dd=0}function q1(){this.uc=this.M=this.Nb=0,this.wa=Array(new hc),this.Y=0,this.ya=Array(new Da),this.aa=0,this.l=new Oh}function Pd(){this.y=s(16),this.f=s(8),this.ea=s(8)}function Vp(){this.cb=this.a=0,this.sc="",this.m=new K,this.Od=new tu,this.Kc=new Go,this.ed=new Vi,this.Qa=new Vo,this.Ic=this.$c=this.Aa=0,this.D=new q1,this.Xb=this.Va=this.Hb=this.zb=this.yb=this.Ub=this.za=0,this.Jc=a(8,K),this.ia=0,this.pb=a(4,hl),this.Pa=new nu,this.Bd=this.kc=0,this.Ac=[],this.Bc=0,this.zc=[0,0,0,0],this.Gd=Array(new Pd),this.Hd=0,this.rb=Array(new Id),this.sb=0,this.wa=Array(new hc),this.Y=0,this.oc=[],this.pc=0,this.sa=[],this.ta=0,this.qa=[],this.ra=0,this.Ha=[],this.B=this.R=this.Ia=0,this.Ec=[],this.M=this.ja=this.Vb=this.Fc=0,this.ya=Array(new Da),this.L=this.aa=0,this.gd=u([4,2],hc),this.ga=null,this.Fa=[],this.Cc=this.qc=this.P=0,this.Gb=[],this.Uc=0,this.mb=[],this.nb=0,this.rc=[],this.Ga=this.Vc=0}function Oh(){this.T=this.U=this.ka=this.height=this.width=0,this.y=[],this.f=[],this.ea=[],this.Rc=this.fa=this.W=this.N=this.O=0,this.ma="void",this.put="VP8IoPutHook",this.ac="VP8IoSetupHook",this.bc="VP8IoTeardownHook",this.ha=this.Kb=0,this.data=[],this.hb=this.ib=this.da=this.o=this.j=this.va=this.v=this.Da=this.ob=this.w=0,this.F=[],this.J=0}function Uh(){var b=new Vp;return b!=null&&(b.a=0,b.sc="OK",b.cb=0,b.Xb=0,Ws||(Ws=kd)),b}function pi(b,E,M){return b.a==0&&(b.a=E,b.sc=M,b.cb=0),0}function ho(b,E,M){return 3<=M&&b[E+0]==157&&b[E+1]==1&&b[E+2]==42}function rs(b,E){if(b==null)return 0;if(b.a=0,b.sc="OK",E==null)return pi(b,2,"null VP8Io passed to VP8GetHeaders()");var M=E.data,B=E.w,W=E.ha;if(4>W)return pi(b,7,"Truncated header.");var Q=M[B+0]|M[B+1]<<8|M[B+2]<<16,Z=b.Od;if(Z.Rb=!(1&Q),Z.td=Q>>1&7,Z.yd=Q>>4&1,Z.ub=Q>>5,3<Z.td)return pi(b,3,"Incorrect keyframe parameters.");if(!Z.yd)return pi(b,4,"Frame not displayable.");B+=3,W-=3;var it=b.Kc;if(Z.Rb){if(7>W)return pi(b,7,"cannot parse picture header");if(!ho(M,B,W))return pi(b,3,"Bad code word");it.c=16383&(M[B+4]<<8|M[B+3]),it.Td=M[B+4]>>6,it.i=16383&(M[B+6]<<8|M[B+5]),it.Ud=M[B+6]>>6,B+=7,W-=7,b.za=it.c+15>>4,b.Ub=it.i+15>>4,E.width=it.c,E.height=it.i,E.Da=0,E.j=0,E.v=0,E.va=E.width,E.o=E.height,E.da=0,E.ib=E.width,E.hb=E.height,E.U=E.width,E.T=E.height,r((Q=b.Pa).jb,0,255,Q.jb.length),t((Q=b.Qa)!=null),Q.Cb=0,Q.Bb=0,Q.Fb=1,r(Q.Zb,0,0,Q.Zb.length),r(Q.Lb,0,0,Q.Lb)}if(Z.ub>W)return pi(b,7,"bad partition length");pt(Q=b.m,M,B,Z.ub),B+=Z.ub,W-=Z.ub,Z.Rb&&(it.Ld=At(Q),it.Kd=At(Q)),it=b.Qa;var ot,lt=b.Pa;if(t(Q!=null),t(it!=null),it.Cb=At(Q),it.Cb){if(it.Bb=At(Q),At(Q)){for(it.Fb=At(Q),ot=0;4>ot;++ot)it.Zb[ot]=At(Q)?at(Q,7):0;for(ot=0;4>ot;++ot)it.Lb[ot]=At(Q)?at(Q,6):0}if(it.Bb)for(ot=0;3>ot;++ot)lt.jb[ot]=At(Q)?nt(Q,8):255}else it.Bb=0;if(Q.Ka)return pi(b,3,"cannot parse segment header");if((it=b.ed).zd=At(Q),it.Tb=nt(Q,6),it.wb=nt(Q,3),it.Pc=At(Q),it.Pc&&At(Q)){for(lt=0;4>lt;++lt)At(Q)&&(it.vd[lt]=at(Q,6));for(lt=0;4>lt;++lt)At(Q)&&(it.od[lt]=at(Q,6))}if(b.L=it.Tb==0?0:it.zd?1:2,Q.Ka)return pi(b,3,"cannot parse filter header");var yt=W;if(W=ot=B,B=ot+yt,it=yt,b.Xb=(1<<nt(b.m,2))-1,yt<3*(lt=b.Xb))M=7;else{for(ot+=3*lt,it-=3*lt,yt=0;yt<lt;++yt){var Dt=M[W+0]|M[W+1]<<8|M[W+2]<<16;Dt>it&&(Dt=it),pt(b.Jc[+yt],M,ot,Dt),ot+=Dt,it-=Dt,W+=3}pt(b.Jc[+lt],M,ot,it),M=ot<B?0:5}if(M!=0)return pi(b,M,"cannot parse partitions");for(M=nt(ot=b.m,7),W=At(ot)?at(ot,4):0,B=At(ot)?at(ot,4):0,it=At(ot)?at(ot,4):0,lt=At(ot)?at(ot,4):0,ot=At(ot)?at(ot,4):0,yt=b.Qa,Dt=0;4>Dt;++Dt){if(yt.Cb){var Rt=yt.Zb[Dt];yt.Fb||(Rt+=M)}else{if(0<Dt){b.pb[Dt]=b.pb[0];continue}Rt=M}var Et=b.pb[Dt];Et.Sc[0]=wo[Vs(Rt+W,127)],Et.Sc[1]=So[Vs(Rt+0,127)],Et.Eb[0]=2*wo[Vs(Rt+B,127)],Et.Eb[1]=101581*So[Vs(Rt+it,127)]>>16,8>Et.Eb[1]&&(Et.Eb[1]=8),Et.Qc[0]=wo[Vs(Rt+lt,117)],Et.Qc[1]=So[Vs(Rt+ot,127)],Et.lc=Rt+ot}if(!Z.Rb)return pi(b,4,"Not a key frame.");for(At(Q),Z=b.Pa,M=0;4>M;++M){for(W=0;8>W;++W)for(B=0;3>B;++B)for(it=0;11>it;++it)lt=Tt(Q,ni[M][W][B][it])?nt(Q,8):hx[M][W][B][it],Z.Wc[M][W].Yb[B][it]=lt;for(W=0;17>W;++W)Z.Xc[M][W]=Z.Wc[M][an[W]]}return b.kc=At(Q),b.kc&&(b.Bd=nt(Q,8)),b.cb=1}function kd(b,E,M,B,W,Q,Z){var it=E[W].Yb[M];for(M=0;16>W;++W){if(!Tt(b,it[M+0]))return W;for(;!Tt(b,it[M+1]);)if(it=E[++W].Yb[0],M=0,W==16)return 16;var ot=E[W+1].Yb;if(Tt(b,it[M+2])){var lt=b,yt=0;if(Tt(lt,(Rt=it)[(Dt=M)+3]))if(Tt(lt,Rt[Dt+6])){for(it=0,Dt=2*(yt=Tt(lt,Rt[Dt+8]))+(Rt=Tt(lt,Rt[Dt+9+yt])),yt=0,Rt=cx[Dt];Rt[it];++it)yt+=yt+Tt(lt,Rt[it]);yt+=3+(8<<Dt)}else Tt(lt,Rt[Dt+7])?(yt=7+2*Tt(lt,165),yt+=Tt(lt,145)):yt=5+Tt(lt,159);else yt=Tt(lt,Rt[Dt+4])?3+Tt(lt,Rt[Dt+5]):2;it=ot[2]}else yt=1,it=ot[1];ot=Z+Y1[W],0>(lt=b).b&&mt(lt);var Dt,Rt=lt.b,Et=(Dt=lt.Ca>>1)-(lt.I>>Rt)>>31;--lt.b,lt.Ca+=Et,lt.Ca|=1,lt.I-=(Dt+1&Et)<<Rt,Q[ot]=((yt^Et)-Et)*B[(0<W)+0]}return 16}function Fd(b){var E=b.rb[b.sb-1];E.la=0,E.Na=0,r(b.zc,0,0,b.zc.length),b.ja=0}function Bd(b,E){if(b==null)return 0;if(E==null)return pi(b,2,"NULL VP8Io parameter in VP8Decode().");if(!b.cb&&!rs(b,E))return 0;if(t(b.cb),E.ac==null||E.ac(E)){E.ob&&(b.L=0);var M=hf[b.L];if(b.L==2?(b.yb=0,b.zb=0):(b.yb=E.v-M>>4,b.zb=E.j-M>>4,0>b.yb&&(b.yb=0),0>b.zb&&(b.zb=0)),b.Va=E.o+15+M>>4,b.Hb=E.va+15+M>>4,b.Hb>b.za&&(b.Hb=b.za),b.Va>b.Ub&&(b.Va=b.Ub),0<b.L){var B=b.ed;for(M=0;4>M;++M){var W;if(b.Qa.Cb){var Q=b.Qa.Lb[M];b.Qa.Fb||(Q+=B.Tb)}else Q=B.Tb;for(W=0;1>=W;++W){var Z=b.gd[M][W],it=Q;if(B.Pc&&(it+=B.vd[0],W&&(it+=B.od[0])),0<(it=0>it?0:63<it?63:it)){var ot=it;0<B.wb&&(ot=4<B.wb?ot>>2:ot>>1)>9-B.wb&&(ot=9-B.wb),1>ot&&(ot=1),Z.dd=ot,Z.tc=2*it+ot,Z.ld=40<=it?2:15<=it?1:0}else Z.tc=0;Z.La=W}}}M=0}else pi(b,6,"Frame setup failed"),M=b.a;if(M=M==0){if(M){b.$c=0,0<b.Aa||(b.Ic=n0);t:{M=b.Ic,B=4*(ot=b.za);var lt=32*ot,yt=ot+1,Dt=0<b.L?ot*(0<b.Aa?2:1):0,Rt=(b.Aa==2?2:1)*ot;if((Z=B+832+(W=3*(16*M+hf[b.L])/2*lt)+(Q=b.Fa!=null&&0<b.Fa.length?b.Kc.c*b.Kc.i:0))!=Z)M=0;else{if(Z>b.Vb){if(b.Vb=0,b.Ec=s(Z),b.Fc=0,b.Ec==null){M=pi(b,1,"no memory during frame initialization.");break t}b.Vb=Z}Z=b.Ec,it=b.Fc,b.Ac=Z,b.Bc=it,it+=B,b.Gd=a(lt,Pd),b.Hd=0,b.rb=a(yt+1,Id),b.sb=1,b.wa=Dt?a(Dt,hc):null,b.Y=0,b.D.Nb=0,b.D.wa=b.wa,b.D.Y=b.Y,0<b.Aa&&(b.D.Y+=ot),t(!0),b.oc=Z,b.pc=it,it+=832,b.ya=a(Rt,Da),b.aa=0,b.D.ya=b.ya,b.D.aa=b.aa,b.Aa==2&&(b.D.aa+=ot),b.R=16*ot,b.B=8*ot,ot=(lt=hf[b.L])*b.R,lt=lt/2*b.B,b.sa=Z,b.ta=it+ot,b.qa=b.sa,b.ra=b.ta+16*M*b.R+lt,b.Ha=b.qa,b.Ia=b.ra+8*M*b.B+lt,b.$c=0,it+=W,b.mb=Q?Z:null,b.nb=Q?it:null,t(it+Q<=b.Fc+b.Vb),Fd(b),r(b.Ac,b.Bc,0,B),M=1}}if(M){if(E.ka=0,E.y=b.sa,E.O=b.ta,E.f=b.qa,E.N=b.ra,E.ea=b.Ha,E.Vd=b.Ia,E.fa=b.R,E.Rc=b.B,E.F=null,E.J=0,!sf){for(M=-255;255>=M;++M)vi[255+M]=0>M?-M:M;for(M=-1020;1020>=M;++M)Qo[1020+M]=-128>M?-128:127<M?127:M;for(M=-112;112>=M;++M)yu[112+M]=-16>M?-16:15<M?15:M;for(M=-255;510>=M;++M)xl[255+M]=0>M?0:255<M?255:M;sf=1}jo=$p,Jo=Yp,bc=qh,qr=iu,ur=Od,ei=Hh,Ko=zd,tf=mc,ef=G1,Ys=Vd,gu=Gd,yl=Xh,mu=Yd,nf=Kp,Ac=$h,vu=mo,rf=Gs,$s=Wh,Ti[0]=po,Ti[1]=z1,Ti[2]=ru,Ti[3]=jp,Ti[4]=Hd,Ti[5]=Ss,Ti[6]=su,Ti[7]=dc,Ti[8]=Ma,Ti[9]=pc,as[0]=fc,as[1]=Xp,as[2]=Yo,as[3]=zh,as[4]=gi,as[5]=Ud,as[6]=Vh,Zo[0]=$o,Zo[1]=Wp,Zo[2]=qd,Zo[3]=ou,Zo[4]=lu,Zo[5]=Yh,Zo[6]=ar,M=1}else M=0}M&&(M=(function(Et,Vt){for(Et.M=0;Et.M<Et.Va;++Et.M){var Ft,xt=Et.Jc[Et.M&Et.Xb],wt=Et.m,zt=Et;for(Ft=0;Ft<zt.za;++Ft){var Wt=wt,qt=zt,oe=qt.Ac,ie=qt.Bc+4*Ft,Ae=qt.zc,se=qt.ya[qt.aa+Ft];if(qt.Qa.Bb?se.$b=Tt(Wt,qt.Pa.jb[0])?2+Tt(Wt,qt.Pa.jb[2]):Tt(Wt,qt.Pa.jb[1]):se.$b=0,qt.kc&&(se.Ad=Tt(Wt,qt.Bd)),se.Za=!Tt(Wt,145)+0,se.Za){var wn=se.Ob,ln=0;for(qt=0;4>qt;++qt){var fn,Ue=Ae[0+qt];for(fn=0;4>fn;++fn){Ue=wr[oe[ie+fn]][Ue];for(var Mn=lg[Tt(Wt,Ue[0])];0<Mn;)Mn=lg[2*Mn+Tt(Wt,Ue[Mn])];Ue=-Mn,oe[ie+fn]=Ue}n(wn,ln,oe,ie,4),ln+=4,Ae[0+qt]=Ue}}else Ue=Tt(Wt,156)?Tt(Wt,128)?1:3:Tt(Wt,163)?2:0,se.Ob[0]=Ue,r(oe,ie,Ue,4),r(Ae,0,Ue,4);se.Dd=Tt(Wt,142)?Tt(Wt,114)?Tt(Wt,183)?1:3:2:0}if(zt.m.Ka)return pi(Et,7,"Premature end-of-partition0 encountered.");for(;Et.ja<Et.za;++Et.ja){if(zt=xt,Wt=(wt=Et).rb[wt.sb-1],oe=wt.rb[wt.sb+wt.ja],Ft=wt.ya[wt.aa+wt.ja],ie=wt.kc?Ft.Ad:0)Wt.la=oe.la=0,Ft.Za||(Wt.Na=oe.Na=0),Ft.Hc=0,Ft.Gc=0,Ft.ia=0;else{var Tn,Ne;if(Wt=oe,oe=zt,ie=wt.Pa.Xc,Ae=wt.ya[wt.aa+wt.ja],se=wt.pb[Ae.$b],qt=Ae.ad,wn=0,ln=wt.rb[wt.sb-1],Ue=fn=0,r(qt,wn,0,384),Ae.Za)var On=0,cr=ie[3];else{Mn=s(16);var Ni=Wt.Na+ln.Na;if(Ni=Ws(oe,ie[1],Ni,se.Eb,0,Mn,0),Wt.Na=ln.Na=(0<Ni)+0,1<Ni)jo(Mn,0,qt,wn);else{var Vr=Mn[0]+3>>3;for(Mn=0;256>Mn;Mn+=16)qt[wn+Mn]=Vr}On=1,cr=ie[0]}var yn=15&Wt.la,Cr=15&ln.la;for(Mn=0;4>Mn;++Mn){var Cs=1&Cr;for(Vr=Ne=0;4>Vr;++Vr)yn=yn>>1|(Cs=(Ni=Ws(oe,cr,Ni=Cs+(1&yn),se.Sc,On,qt,wn))>On)<<7,Ne=Ne<<2|(3<Ni?3:1<Ni?2:qt[wn+0]!=0),wn+=16;yn>>=4,Cr=Cr>>1|Cs<<7,fn=(fn<<8|Ne)>>>0}for(cr=yn,On=Cr>>4,Tn=0;4>Tn;Tn+=2){for(Ne=0,yn=Wt.la>>4+Tn,Cr=ln.la>>4+Tn,Mn=0;2>Mn;++Mn){for(Cs=1&Cr,Vr=0;2>Vr;++Vr)Ni=Cs+(1&yn),yn=yn>>1|(Cs=0<(Ni=Ws(oe,ie[2],Ni,se.Qc,0,qt,wn)))<<3,Ne=Ne<<2|(3<Ni?3:1<Ni?2:qt[wn+0]!=0),wn+=16;yn>>=2,Cr=Cr>>1|Cs<<5}Ue|=Ne<<4*Tn,cr|=yn<<4<<Tn,On|=(240&Cr)<<Tn}Wt.la=cr,ln.la=On,Ae.Hc=fn,Ae.Gc=Ue,Ae.ia=43690&Ue?0:se.ia,ie=!(fn|Ue)}if(0<wt.L&&(wt.wa[wt.Y+wt.ja]=wt.gd[Ft.$b][Ft.Za],wt.wa[wt.Y+wt.ja].La|=!ie),zt.Ka)return pi(Et,7,"Premature end-of-file encountered.")}if(Fd(Et),wt=Vt,zt=1,Ft=(xt=Et).D,Wt=0<xt.L&&xt.M>=xt.zb&&xt.M<=xt.Va,xt.Aa==0)t:{if(Ft.M=xt.M,Ft.uc=Wt,Kh(xt,Ft),zt=1,Ft=(Ne=xt.D).Nb,Wt=(Ue=hf[xt.L])*xt.R,oe=Ue/2*xt.B,Mn=16*Ft*xt.R,Vr=8*Ft*xt.B,ie=xt.sa,Ae=xt.ta-Wt+Mn,se=xt.qa,qt=xt.ra-oe+Vr,wn=xt.Ha,ln=xt.Ia-oe+Vr,Cr=(yn=Ne.M)==0,fn=yn>=xt.Va-1,xt.Aa==2&&Kh(xt,Ne),Ne.uc)for(Cs=(Ni=xt).D.M,t(Ni.D.uc),Ne=Ni.yb;Ne<Ni.Hb;++Ne){On=Ne,cr=Cs;var er=(Ri=(_i=Ni).D).Nb;Tn=_i.R;var Ri=Ri.wa[Ri.Y+On],hr=_i.sa,Xs=_i.ta+16*er*Tn+16*On,Co=Ri.dd,Yi=Ri.tc;if(Yi!=0)if(t(3<=Yi),_i.L==1)0<On&&vu(hr,Xs,Tn,Yi+4),Ri.La&&$s(hr,Xs,Tn,Yi),0<cr&&Ac(hr,Xs,Tn,Yi+4),Ri.La&&rf(hr,Xs,Tn,Yi);else{var Oi=_i.B,fr=_i.qa,js=_i.ra+8*er*Oi+8*On,Fa=_i.Ha,_i=_i.Ia+8*er*Oi+8*On;er=Ri.ld,0<On&&(tf(hr,Xs,Tn,Yi+4,Co,er),Ys(fr,js,Fa,_i,Oi,Yi+4,Co,er)),Ri.La&&(yl(hr,Xs,Tn,Yi,Co,er),nf(fr,js,Fa,_i,Oi,Yi,Co,er)),0<cr&&(Ko(hr,Xs,Tn,Yi+4,Co,er),ef(fr,js,Fa,_i,Oi,Yi+4,Co,er)),Ri.La&&(gu(hr,Xs,Tn,Yi,Co,er),mu(fr,js,Fa,_i,Oi,Yi,Co,er))}}if(xt.ia&&alert("todo:DitherRow"),wt.put!=null){if(Ne=16*yn,yn=16*(yn+1),Cr?(wt.y=xt.sa,wt.O=xt.ta+Mn,wt.f=xt.qa,wt.N=xt.ra+Vr,wt.ea=xt.Ha,wt.W=xt.Ia+Vr):(Ne-=Ue,wt.y=ie,wt.O=Ae,wt.f=se,wt.N=qt,wt.ea=wn,wt.W=ln),fn||(yn-=Ue),yn>wt.o&&(yn=wt.o),wt.F=null,wt.J=null,xt.Fa!=null&&0<xt.Fa.length&&Ne<yn&&(wt.J=jh(xt,wt,Ne,yn-Ne),wt.F=xt.mb,wt.F==null&&wt.F.length==0)){zt=pi(xt,3,"Could not decode alpha data.");break t}Ne<wt.j&&(Ue=wt.j-Ne,Ne=wt.j,t(!(1&Ue)),wt.O+=xt.R*Ue,wt.N+=xt.B*(Ue>>1),wt.W+=xt.B*(Ue>>1),wt.F!=null&&(wt.J+=wt.width*Ue)),Ne<yn&&(wt.O+=wt.v,wt.N+=wt.v>>1,wt.W+=wt.v>>1,wt.F!=null&&(wt.J+=wt.v),wt.ka=Ne-wt.j,wt.U=wt.va-wt.v,wt.T=yn-Ne,zt=wt.put(wt))}Ft+1!=xt.Ic||fn||(n(xt.sa,xt.ta-Wt,ie,Ae+16*xt.R,Wt),n(xt.qa,xt.ra-oe,se,qt+8*xt.B,oe),n(xt.Ha,xt.Ia-oe,wn,ln+8*xt.B,oe))}if(!zt)return pi(Et,6,"Output aborted.")}return 1})(b,E)),E.bc!=null&&E.bc(E),M&=1}return M?(b.cb=0,M):0}function fo(b,E,M,B,W){W=b[E+M+32*B]+(W>>3),b[E+M+32*B]=-256&W?0>W?0:255:W}function fl(b,E,M,B,W,Q){fo(b,E,0,M,B+W),fo(b,E,1,M,B+Q),fo(b,E,2,M,B-Q),fo(b,E,3,M,B-W)}function ws(b){return(20091*b>>16)+b}function Br(b,E,M,B){var W,Q=0,Z=s(16);for(W=0;4>W;++W){var it=b[E+0]+b[E+8],ot=b[E+0]-b[E+8],lt=(35468*b[E+4]>>16)-ws(b[E+12]),yt=ws(b[E+4])+(35468*b[E+12]>>16);Z[Q+0]=it+yt,Z[Q+1]=ot+lt,Z[Q+2]=ot-lt,Z[Q+3]=it-yt,Q+=4,E++}for(W=Q=0;4>W;++W)it=(b=Z[Q+0]+4)+Z[Q+8],ot=b-Z[Q+8],lt=(35468*Z[Q+4]>>16)-ws(Z[Q+12]),fo(M,B,0,0,it+(yt=ws(Z[Q+4])+(35468*Z[Q+12]>>16))),fo(M,B,1,0,ot+lt),fo(M,B,2,0,ot-lt),fo(M,B,3,0,it-yt),Q++,B+=32}function Hh(b,E,M,B){var W=b[E+0]+4,Q=35468*b[E+4]>>16,Z=ws(b[E+4]),it=35468*b[E+1]>>16;fl(M,B,0,W+Z,b=ws(b[E+1]),it),fl(M,B,1,W+Q,b,it),fl(M,B,2,W-Q,b,it),fl(M,B,3,W-Z,b,it)}function Yp(b,E,M,B,W){Br(b,E,M,B),W&&Br(b,E+16,M,B+4)}function qh(b,E,M,B){Jo(b,E+0,M,B,1),Jo(b,E+32,M,B+128,1)}function iu(b,E,M,B){var W;for(b=b[E+0]+4,W=0;4>W;++W)for(E=0;4>E;++E)fo(M,B,E,W,b)}function Od(b,E,M,B){b[E+0]&&qr(b,E+0,M,B),b[E+16]&&qr(b,E+16,M,B+4),b[E+32]&&qr(b,E+32,M,B+128),b[E+48]&&qr(b,E+48,M,B+128+4)}function $p(b,E,M,B){var W,Q=s(16);for(W=0;4>W;++W){var Z=b[E+0+W]+b[E+12+W],it=b[E+4+W]+b[E+8+W],ot=b[E+4+W]-b[E+8+W],lt=b[E+0+W]-b[E+12+W];Q[0+W]=Z+it,Q[8+W]=Z-it,Q[4+W]=lt+ot,Q[12+W]=lt-ot}for(W=0;4>W;++W)Z=(b=Q[0+4*W]+3)+Q[3+4*W],it=Q[1+4*W]+Q[2+4*W],ot=Q[1+4*W]-Q[2+4*W],lt=b-Q[3+4*W],M[B+0]=Z+it>>3,M[B+16]=lt+ot>>3,M[B+32]=Z-it>>3,M[B+48]=lt-ot>>3,B+=64}function La(b,E,M){var B,W=E-32,Q=zr,Z=255-b[W-1];for(B=0;B<M;++B){var it,ot=Q,lt=Z+b[E-1];for(it=0;it<M;++it)b[E+it]=ot[lt+b[W+it]];E+=32}}function z1(b,E){La(b,E,4)}function Wp(b,E){La(b,E,8)}function Xp(b,E){La(b,E,16)}function Yo(b,E){var M;for(M=0;16>M;++M)n(b,E+32*M,b,E-32,16)}function zh(b,E){var M;for(M=16;0<M;--M)r(b,E,b[E-1],16),E+=32}function Gh(b,E,M){var B;for(B=0;16>B;++B)r(E,M+32*B,b,16)}function fc(b,E){var M,B=16;for(M=0;16>M;++M)B+=b[E-1+32*M]+b[E+M-32];Gh(B>>5,b,E)}function gi(b,E){var M,B=8;for(M=0;16>M;++M)B+=b[E-1+32*M];Gh(B>>4,b,E)}function Ud(b,E){var M,B=8;for(M=0;16>M;++M)B+=b[E+M-32];Gh(B>>4,b,E)}function Vh(b,E){Gh(128,b,E)}function Ce(b,E,M){return b+2*E+M+2>>2}function ru(b,E){var M,B=E-32;for(B=new Uint8Array([Ce(b[B-1],b[B+0],b[B+1]),Ce(b[B+0],b[B+1],b[B+2]),Ce(b[B+1],b[B+2],b[B+3]),Ce(b[B+2],b[B+3],b[B+4])]),M=0;4>M;++M)n(b,E+32*M,B,0,B.length)}function jp(b,E){var M=b[E-1],B=b[E-1+32],W=b[E-1+64],Q=b[E-1+96];Xt(b,E+0,16843009*Ce(b[E-1-32],M,B)),Xt(b,E+32,16843009*Ce(M,B,W)),Xt(b,E+64,16843009*Ce(B,W,Q)),Xt(b,E+96,16843009*Ce(W,Q,Q))}function po(b,E){var M,B=4;for(M=0;4>M;++M)B+=b[E+M-32]+b[E-1+32*M];for(B>>=3,M=0;4>M;++M)r(b,E+32*M,B,4)}function Hd(b,E){var M=b[E-1+0],B=b[E-1+32],W=b[E-1+64],Q=b[E-1-32],Z=b[E+0-32],it=b[E+1-32],ot=b[E+2-32],lt=b[E+3-32];b[E+0+96]=Ce(B,W,b[E-1+96]),b[E+1+96]=b[E+0+64]=Ce(M,B,W),b[E+2+96]=b[E+1+64]=b[E+0+32]=Ce(Q,M,B),b[E+3+96]=b[E+2+64]=b[E+1+32]=b[E+0+0]=Ce(Z,Q,M),b[E+3+64]=b[E+2+32]=b[E+1+0]=Ce(it,Z,Q),b[E+3+32]=b[E+2+0]=Ce(ot,it,Z),b[E+3+0]=Ce(lt,ot,it)}function su(b,E){var M=b[E+1-32],B=b[E+2-32],W=b[E+3-32],Q=b[E+4-32],Z=b[E+5-32],it=b[E+6-32],ot=b[E+7-32];b[E+0+0]=Ce(b[E+0-32],M,B),b[E+1+0]=b[E+0+32]=Ce(M,B,W),b[E+2+0]=b[E+1+32]=b[E+0+64]=Ce(B,W,Q),b[E+3+0]=b[E+2+32]=b[E+1+64]=b[E+0+96]=Ce(W,Q,Z),b[E+3+32]=b[E+2+64]=b[E+1+96]=Ce(Q,Z,it),b[E+3+64]=b[E+2+96]=Ce(Z,it,ot),b[E+3+96]=Ce(it,ot,ot)}function Ss(b,E){var M=b[E-1+0],B=b[E-1+32],W=b[E-1+64],Q=b[E-1-32],Z=b[E+0-32],it=b[E+1-32],ot=b[E+2-32],lt=b[E+3-32];b[E+0+0]=b[E+1+64]=Q+Z+1>>1,b[E+1+0]=b[E+2+64]=Z+it+1>>1,b[E+2+0]=b[E+3+64]=it+ot+1>>1,b[E+3+0]=ot+lt+1>>1,b[E+0+96]=Ce(W,B,M),b[E+0+64]=Ce(B,M,Q),b[E+0+32]=b[E+1+96]=Ce(M,Q,Z),b[E+1+32]=b[E+2+96]=Ce(Q,Z,it),b[E+2+32]=b[E+3+96]=Ce(Z,it,ot),b[E+3+32]=Ce(it,ot,lt)}function dc(b,E){var M=b[E+0-32],B=b[E+1-32],W=b[E+2-32],Q=b[E+3-32],Z=b[E+4-32],it=b[E+5-32],ot=b[E+6-32],lt=b[E+7-32];b[E+0+0]=M+B+1>>1,b[E+1+0]=b[E+0+64]=B+W+1>>1,b[E+2+0]=b[E+1+64]=W+Q+1>>1,b[E+3+0]=b[E+2+64]=Q+Z+1>>1,b[E+0+32]=Ce(M,B,W),b[E+1+32]=b[E+0+96]=Ce(B,W,Q),b[E+2+32]=b[E+1+96]=Ce(W,Q,Z),b[E+3+32]=b[E+2+96]=Ce(Q,Z,it),b[E+3+64]=Ce(Z,it,ot),b[E+3+96]=Ce(it,ot,lt)}function pc(b,E){var M=b[E-1+0],B=b[E-1+32],W=b[E-1+64],Q=b[E-1+96];b[E+0+0]=M+B+1>>1,b[E+2+0]=b[E+0+32]=B+W+1>>1,b[E+2+32]=b[E+0+64]=W+Q+1>>1,b[E+1+0]=Ce(M,B,W),b[E+3+0]=b[E+1+32]=Ce(B,W,Q),b[E+3+32]=b[E+1+64]=Ce(W,Q,Q),b[E+3+64]=b[E+2+64]=b[E+0+96]=b[E+1+96]=b[E+2+96]=b[E+3+96]=Q}function Ma(b,E){var M=b[E-1+0],B=b[E-1+32],W=b[E-1+64],Q=b[E-1+96],Z=b[E-1-32],it=b[E+0-32],ot=b[E+1-32],lt=b[E+2-32];b[E+0+0]=b[E+2+32]=M+Z+1>>1,b[E+0+32]=b[E+2+64]=B+M+1>>1,b[E+0+64]=b[E+2+96]=W+B+1>>1,b[E+0+96]=Q+W+1>>1,b[E+3+0]=Ce(it,ot,lt),b[E+2+0]=Ce(Z,it,ot),b[E+1+0]=b[E+3+32]=Ce(M,Z,it),b[E+1+32]=b[E+3+64]=Ce(B,M,Z),b[E+1+64]=b[E+3+96]=Ce(W,B,M),b[E+1+96]=Ce(Q,W,B)}function qd(b,E){var M;for(M=0;8>M;++M)n(b,E+32*M,b,E-32,8)}function ou(b,E){var M;for(M=0;8>M;++M)r(b,E,b[E-1],8),E+=32}function au(b,E,M){var B;for(B=0;8>B;++B)r(E,M+32*B,b,8)}function $o(b,E){var M,B=8;for(M=0;8>M;++M)B+=b[E+M-32]+b[E-1+32*M];au(B>>4,b,E)}function Yh(b,E){var M,B=4;for(M=0;8>M;++M)B+=b[E+M-32];au(B>>3,b,E)}function lu(b,E){var M,B=4;for(M=0;8>M;++M)B+=b[E-1+32*M];au(B>>3,b,E)}function ar(b,E){au(128,b,E)}function go(b,E,M){var B=b[E-M],W=b[E+0],Q=3*(W-B)+bl[1020+b[E-2*M]-b[E+M]],Z=Kd[112+(Q+4>>3)];b[E-M]=zr[255+B+Kd[112+(Q+3>>3)]],b[E+0]=zr[255+W-Z]}function gc(b,E,M,B){var W=b[E+0],Q=b[E+M];return _r[255+b[E-2*M]-b[E-M]]>B||_r[255+Q-W]>B}function uu(b,E,M,B){return 4*_r[255+b[E-M]-b[E+0]]+_r[255+b[E-2*M]-b[E+M]]<=B}function Jp(b,E,M,B,W){var Q=b[E-3*M],Z=b[E-2*M],it=b[E-M],ot=b[E+0],lt=b[E+M],yt=b[E+2*M],Dt=b[E+3*M];return 4*_r[255+it-ot]+_r[255+Z-lt]>B?0:_r[255+b[E-4*M]-Q]<=W&&_r[255+Q-Z]<=W&&_r[255+Z-it]<=W&&_r[255+Dt-yt]<=W&&_r[255+yt-lt]<=W&&_r[255+lt-ot]<=W}function $h(b,E,M,B){var W=2*B+1;for(B=0;16>B;++B)uu(b,E+B,M,W)&&go(b,E+B,M)}function mo(b,E,M,B){var W=2*B+1;for(B=0;16>B;++B)uu(b,E+B*M,1,W)&&go(b,E+B*M,1)}function Gs(b,E,M,B){var W;for(W=3;0<W;--W)$h(b,E+=4*M,M,B)}function Wh(b,E,M,B){var W;for(W=3;0<W;--W)mo(b,E+=4,M,B)}function dl(b,E,M,B,W,Q,Z,it){for(Q=2*Q+1;0<W--;){if(Jp(b,E,M,Q,Z))if(gc(b,E,M,it))go(b,E,M);else{var ot=b,lt=E,yt=M,Dt=ot[lt-2*yt],Rt=ot[lt-yt],Et=ot[lt+0],Vt=ot[lt+yt],Ft=ot[lt+2*yt],xt=27*(zt=bl[1020+3*(Et-Rt)+bl[1020+Dt-Vt]])+63>>7,wt=18*zt+63>>7,zt=9*zt+63>>7;ot[lt-3*yt]=zr[255+ot[lt-3*yt]+zt],ot[lt-2*yt]=zr[255+Dt+wt],ot[lt-yt]=zr[255+Rt+xt],ot[lt+0]=zr[255+Et-xt],ot[lt+yt]=zr[255+Vt-wt],ot[lt+2*yt]=zr[255+Ft-zt]}E+=B}}function Wo(b,E,M,B,W,Q,Z,it){for(Q=2*Q+1;0<W--;){if(Jp(b,E,M,Q,Z))if(gc(b,E,M,it))go(b,E,M);else{var ot=b,lt=E,yt=M,Dt=ot[lt-yt],Rt=ot[lt+0],Et=ot[lt+yt],Vt=Kd[112+((Ft=3*(Rt-Dt))+4>>3)],Ft=Kd[112+(Ft+3>>3)],xt=Vt+1>>1;ot[lt-2*yt]=zr[255+ot[lt-2*yt]+xt],ot[lt-yt]=zr[255+Dt+Ft],ot[lt+0]=zr[255+Rt-Vt],ot[lt+yt]=zr[255+Et-xt]}E+=B}}function zd(b,E,M,B,W,Q){dl(b,E,M,1,16,B,W,Q)}function mc(b,E,M,B,W,Q){dl(b,E,1,M,16,B,W,Q)}function Gd(b,E,M,B,W,Q){var Z;for(Z=3;0<Z;--Z)Wo(b,E+=4*M,M,1,16,B,W,Q)}function Xh(b,E,M,B,W,Q){var Z;for(Z=3;0<Z;--Z)Wo(b,E+=4,1,M,16,B,W,Q)}function G1(b,E,M,B,W,Q,Z,it){dl(b,E,W,1,8,Q,Z,it),dl(M,B,W,1,8,Q,Z,it)}function Vd(b,E,M,B,W,Q,Z,it){dl(b,E,1,W,8,Q,Z,it),dl(M,B,1,W,8,Q,Z,it)}function Yd(b,E,M,B,W,Q,Z,it){Wo(b,E+4*W,W,1,8,Q,Z,it),Wo(M,B+4*W,W,1,8,Q,Z,it)}function Kp(b,E,M,B,W,Q,Z,it){Wo(b,E+4,1,W,8,Q,Z,it),Wo(M,B+4,1,W,8,Q,Z,it)}function vc(){this.ba=new Pr,this.ec=[],this.cc=[],this.Mc=[],this.Dc=this.Nc=this.dc=this.fc=0,this.Oa=new Cn,this.memory=0,this.Ib="OutputFunc",this.Jb="OutputAlphaFunc",this.Nd="OutputRowFunc"}function $d(){this.data=[],this.offset=this.kd=this.ha=this.w=0,this.na=[],this.xa=this.gb=this.Ja=this.Sa=this.P=0}function Wd(){this.nc=this.Ea=this.b=this.hc=0,this.K=[],this.w=0}function Qp(){this.ua=0,this.Wa=new dt,this.vb=new dt,this.md=this.xc=this.wc=0,this.vc=[],this.Wb=0,this.Ya=new st,this.yc=new G}function V1(){this.xb=this.a=0,this.l=new Oh,this.ca=new Pr,this.V=[],this.Ba=0,this.Ta=[],this.Ua=0,this.m=new P,this.Pb=0,this.wd=new P,this.Ma=this.$=this.C=this.i=this.c=this.xd=0,this.s=new Qp,this.ab=0,this.gc=a(4,Wd),this.Oc=0}function cu(){this.Lc=this.Z=this.$a=this.i=this.c=0,this.l=new Oh,this.ic=0,this.ca=[],this.tb=0,this.qd=null,this.rd=0}function yc(b,E,M,B,W,Q,Z){for(b=b==null?0:b[E+0],E=0;E<Z;++E)W[Q+E]=b+M[B+E]&255,b=W[Q+E]}function Xd(b,E,M,B,W,Q,Z){var it;if(b==null)yc(null,null,M,B,W,Q,Z);else for(it=0;it<Z;++it)W[Q+it]=b[E+it]+M[B+it]&255}function hu(b,E,M,B,W,Q,Z){if(b==null)yc(null,null,M,B,W,Q,Z);else{var it,ot=b[E+0],lt=ot,yt=ot;for(it=0;it<Z;++it)lt=yt+(ot=b[E+it])-lt,yt=M[B+it]+(-256&lt?0>lt?0:255:lt)&255,lt=ot,W[Q+it]=yt}}function jh(b,E,M,B){var W=E.width,Q=E.o;if(t(b!=null&&E!=null),0>M||0>=B||M+B>Q)return null;if(!b.Cc){if(b.ga==null){var Z;if(b.ga=new cu,(Z=b.ga==null)||(Z=E.width*E.o,t(b.Gb.length==0),b.Gb=s(Z),b.Uc=0,b.Gb==null?Z=0:(b.mb=b.Gb,b.nb=b.Uc,b.rc=null,Z=1),Z=!Z),!Z){Z=b.ga;var it=b.Fa,ot=b.P,lt=b.qc,yt=b.mb,Dt=b.nb,Rt=ot+1,Et=lt-1,Vt=Z.l;if(t(it!=null&&yt!=null&&E!=null),Al[0]=null,Al[1]=yc,Al[2]=Xd,Al[3]=hu,Z.ca=yt,Z.tb=Dt,Z.c=E.width,Z.i=E.height,t(0<Z.c&&0<Z.i),1>=lt)E=0;else if(Z.$a=it[ot+0]>>0&3,Z.Z=it[ot+0]>>2&3,Z.Lc=it[ot+0]>>4&3,ot=it[ot+0]>>6&3,0>Z.$a||1<Z.$a||4<=Z.Z||1<Z.Lc||ot)E=0;else if(Vt.put=As,Vt.ac=Gi,Vt.bc=br,Vt.ma=Z,Vt.width=E.width,Vt.height=E.height,Vt.Da=E.Da,Vt.v=E.v,Vt.va=E.va,Vt.j=E.j,Vt.o=E.o,Z.$a)t:{t(Z.$a==1),E=co();e:for(;;){if(E==null){E=0;break t}if(t(Z!=null),Z.mc=E,E.c=Z.c,E.i=Z.i,E.l=Z.l,E.l.ma=Z,E.l.width=Z.c,E.l.height=Z.i,E.a=0,ht(E.m,it,Rt,Et),!Na(Z.c,Z.i,1,E,null)||(E.ab==1&&E.gc[0].hc==3&&kr(E.s)?(Z.ic=1,it=E.c*E.i,E.Ta=null,E.Ua=0,E.V=s(it),E.Ba=0,E.V==null?(E.a=1,E=0):E=1):(Z.ic=0,E=Zl(E,Z.c)),!E))break e;E=1;break t}Z.mc=null,E=0}else E=Et>=Z.c*Z.i;Z=!E}if(Z)return null;b.ga.Lc!=1?b.Ga=0:B=Q-M}t(b.ga!=null),t(M+B<=Q);t:{if(E=(it=b.ga).c,Q=it.l.o,it.$a==0){if(Rt=b.rc,Et=b.Vc,Vt=b.Fa,ot=b.P+1+M*E,lt=b.mb,yt=b.nb+M*E,t(ot<=b.P+b.qc),it.Z!=0)for(t(Al[it.Z]!=null),Z=0;Z<B;++Z)Al[it.Z](Rt,Et,Vt,ot,lt,yt,E),Rt=lt,Et=yt,yt+=E,ot+=E;else for(Z=0;Z<B;++Z)n(lt,yt,Vt,ot,E),Rt=lt,Et=yt,yt+=E,ot+=E;b.rc=Rt,b.Vc=Et}else{if(t(it.mc!=null),E=M+B,t((Z=it.mc)!=null),t(E<=Z.i),Z.C>=E)E=1;else if(it.ic||Nt(),it.ic){it=Z.V,Rt=Z.Ba,Et=Z.c;var Ft=Z.i,xt=(Vt=1,ot=Z.$/Et,lt=Z.$%Et,yt=Z.m,Dt=Z.s,Z.$),wt=Et*Ft,zt=Et*E,Wt=Dt.wc,qt=xt<zt?fi(Dt,lt,ot):null;t(xt<=wt),t(E<=Ft),t(kr(Dt));e:for(;;){for(;!yt.h&&xt<zt;){if(lt&Wt||(qt=fi(Dt,lt,ot)),t(qt!=null),ft(yt),256>(Ft=ci(qt.G[0],qt.H[0],yt)))it[Rt+xt]=Ft,++xt,++lt>=Et&&(lt=0,++ot<=E&&!(ot%16)&&di(Z,ot));else{if(!(280>Ft)){Vt=0;break e}Ft=is(Ft-256,yt);var oe,ie=ci(qt.G[4],qt.H[4],yt);if(ft(yt),!(xt>=(ie=ti(Et,ie=is(ie,yt)))&&wt-xt>=Ft)){Vt=0;break e}for(oe=0;oe<Ft;++oe)it[Rt+xt+oe]=it[Rt+xt+oe-ie];for(xt+=Ft,lt+=Ft;lt>=Et;)lt-=Et,++ot<=E&&!(ot%16)&&di(Z,ot);xt<zt&&lt&Wt&&(qt=fi(Dt,lt,ot))}t(yt.h==j(yt))}di(Z,ot>E?E:ot);break e}!Vt||yt.h&&xt<wt?(Vt=0,Z.a=yt.h?5:3):Z.$=xt,E=Vt}else E=Fr(Z,Z.V,Z.Ba,Z.c,Z.i,E,Ra);if(!E){B=0;break t}}M+B>=Q&&(b.Cc=1),B=1}if(!B)return null;if(b.Cc&&((B=b.ga)!=null&&(B.mc=null),b.ga=null,0<b.Ga))return alert("todo:WebPDequantizeLevels"),null}return b.nb+M*W}function L(b,E,M,B,W,Q){for(;0<W--;){var Z,it=b,ot=E+(M?1:0),lt=b,yt=E+(M?0:3);for(Z=0;Z<B;++Z){var Dt=lt[yt+4*Z];Dt!=255&&(Dt*=32897,it[ot+4*Z+0]=it[ot+4*Z+0]*Dt>>23,it[ot+4*Z+1]=it[ot+4*Z+1]*Dt>>23,it[ot+4*Z+2]=it[ot+4*Z+2]*Dt>>23)}E+=Q}}function X(b,E,M,B,W){for(;0<B--;){var Q;for(Q=0;Q<M;++Q){var Z=b[E+2*Q+0],it=15&(lt=b[E+2*Q+1]),ot=4369*it,lt=(240&lt|lt>>4)*ot>>16;b[E+2*Q+0]=(240&Z|Z>>4)*ot>>16&240|(15&Z|Z<<4)*ot>>16>>4&15,b[E+2*Q+1]=240&lt|it}E+=W}}function ct(b,E,M,B,W,Q,Z,it){var ot,lt,yt=255;for(lt=0;lt<W;++lt){for(ot=0;ot<B;++ot){var Dt=b[E+ot];Q[Z+4*ot]=Dt,yt&=Dt}E+=M,Z+=it}return yt!=255}function vt(b,E,M,B,W){var Q;for(Q=0;Q<W;++Q)M[B+Q]=b[E+Q]>>8}function Nt(){Es=L,sn=X,Ln=ct,_n=vt}function Ot(b,E,M){V[b]=function(B,W,Q,Z,it,ot,lt,yt,Dt,Rt,Et,Vt,Ft,xt,wt,zt,Wt){var qt,oe=Wt-1>>1,ie=it[ot+0]|lt[yt+0]<<16,Ae=Dt[Rt+0]|Et[Vt+0]<<16;t(B!=null);var se=3*ie+Ae+131074>>2;for(E(B[W+0],255&se,se>>16,Ft,xt),Q!=null&&(se=3*Ae+ie+131074>>2,E(Q[Z+0],255&se,se>>16,wt,zt)),qt=1;qt<=oe;++qt){var wn=it[ot+qt]|lt[yt+qt]<<16,ln=Dt[Rt+qt]|Et[Vt+qt]<<16,fn=ie+wn+Ae+ln+524296,Ue=fn+2*(wn+Ae)>>3;se=Ue+ie>>1,ie=(fn=fn+2*(ie+ln)>>3)+wn>>1,E(B[W+2*qt-1],255&se,se>>16,Ft,xt+(2*qt-1)*M),E(B[W+2*qt-0],255&ie,ie>>16,Ft,xt+(2*qt-0)*M),Q!=null&&(se=fn+Ae>>1,ie=Ue+ln>>1,E(Q[Z+2*qt-1],255&se,se>>16,wt,zt+(2*qt-1)*M),E(Q[Z+2*qt+0],255&ie,ie>>16,wt,zt+(2*qt+0)*M)),ie=wn,Ae=ln}1&Wt||(se=3*ie+Ae+131074>>2,E(B[W+Wt-1],255&se,se>>16,Ft,xt+(Wt-1)*M),Q!=null&&(se=3*Ae+ie+131074>>2,E(Q[Z+Wt-1],255&se,se>>16,wt,zt+(Wt-1)*M)))}}function jt(){Sr[ig]=wc,Sr[Gr]=uf,Sr[rg]=W1,Sr[xo]=ug,Sr[Qd]=_u,Sr[of]=ka,Sr[xu]=wu,Sr[Zd]=uf,Sr[sg]=ug,Sr[af]=_u,Sr[og]=ka}function ue(b){return b&-16384?0>b?0:255:b>>cg}function _e(b,E){return ue((19077*b>>8)+(26149*E>>8)-14234)}function Fe(b,E,M){return ue((19077*b>>8)-(6419*E>>8)-(13320*M>>8)+8708)}function Me(b,E){return ue((19077*b>>8)+(33050*E>>8)-17685)}function hn(b,E,M,B,W){B[W+0]=_e(b,M),B[W+1]=Fe(b,E,M),B[W+2]=Me(b,E)}function mi(b,E,M,B,W){B[W+0]=Me(b,E),B[W+1]=Fe(b,E,M),B[W+2]=_e(b,M)}function Ai(b,E,M,B,W){var Q=Fe(b,E,M);E=Q<<3&224|Me(b,E)>>3,B[W+0]=248&_e(b,M)|Q>>5,B[W+1]=E}function Fi(b,E,M,B,W){var Q=240&Me(b,E)|15;B[W+0]=240&_e(b,M)|Fe(b,E,M)>>4,B[W+1]=Q}function Ar(b,E,M,B,W){B[W+0]=255,hn(b,E,M,B,W+1)}function tr(b,E,M,B,W){mi(b,E,M,B,W),B[W+3]=255}function Or(b,E,M,B,W){hn(b,E,M,B,W),B[W+3]=255}function Vs(b,E){return 0>b?0:b>E?E:b}function Ia(b,E,M){V[b]=function(B,W,Q,Z,it,ot,lt,yt,Dt){for(var Rt=yt+(-2&Dt)*M;yt!=Rt;)E(B[W+0],Q[Z+0],it[ot+0],lt,yt),E(B[W+1],Q[Z+0],it[ot+0],lt,yt+M),W+=2,++Z,++ot,yt+=2*M;1&Dt&&E(B[W+0],Q[Z+0],it[ot+0],lt,yt)}}function Zp(b,E,M){return M==0?b==0?E==0?6:5:E==0?4:0:M}function Jh(b,E,M,B,W){switch(b>>>30){case 3:Jo(E,M,B,W,0);break;case 2:ei(E,M,B,W);break;case 1:qr(E,M,B,W)}}function Kh(b,E){var M,B,W=E.M,Q=E.Nb,Z=b.oc,it=b.pc+40,ot=b.oc,lt=b.pc+584,yt=b.oc,Dt=b.pc+600;for(M=0;16>M;++M)Z[it+32*M-1]=129;for(M=0;8>M;++M)ot[lt+32*M-1]=129,yt[Dt+32*M-1]=129;for(0<W?Z[it-1-32]=ot[lt-1-32]=yt[Dt-1-32]=129:(r(Z,it-32-1,127,21),r(ot,lt-32-1,127,9),r(yt,Dt-32-1,127,9)),B=0;B<b.za;++B){var Rt=E.ya[E.aa+B];if(0<B){for(M=-1;16>M;++M)n(Z,it+32*M-4,Z,it+32*M+12,4);for(M=-1;8>M;++M)n(ot,lt+32*M-4,ot,lt+32*M+4,4),n(yt,Dt+32*M-4,yt,Dt+32*M+4,4)}var Et=b.Gd,Vt=b.Hd+B,Ft=Rt.ad,xt=Rt.Hc;if(0<W&&(n(Z,it-32,Et[Vt].y,0,16),n(ot,lt-32,Et[Vt].f,0,8),n(yt,Dt-32,Et[Vt].ea,0,8)),Rt.Za){var wt=Z,zt=it-32+16;for(0<W&&(B>=b.za-1?r(wt,zt,Et[Vt].y[15],4):n(wt,zt,Et[Vt+1].y,0,4)),M=0;4>M;M++)wt[zt+128+M]=wt[zt+256+M]=wt[zt+384+M]=wt[zt+0+M];for(M=0;16>M;++M,xt<<=2)wt=Z,zt=it+Bi[M],Ti[Rt.Ob[M]](wt,zt),Jh(xt,Ft,16*+M,wt,zt)}else if(wt=Zp(B,W,Rt.Ob[0]),as[wt](Z,it),xt!=0)for(M=0;16>M;++M,xt<<=2)Jh(xt,Ft,16*+M,Z,it+Bi[M]);for(M=Rt.Gc,wt=Zp(B,W,Rt.Dd),Zo[wt](ot,lt),Zo[wt](yt,Dt),xt=Ft,wt=ot,zt=lt,255&(Rt=M>>0)&&(170&Rt?bc(xt,256,wt,zt):ur(xt,256,wt,zt)),Rt=yt,xt=Dt,255&(M>>=8)&&(170&M?bc(Ft,320,Rt,xt):ur(Ft,320,Rt,xt)),W<b.Ub-1&&(n(Et[Vt].y,0,Z,it+480,16),n(Et[Vt].f,0,ot,lt+224,8),n(Et[Vt].ea,0,yt,Dt+224,8)),M=8*Q*b.B,Et=b.sa,Vt=b.ta+16*B+16*Q*b.R,Ft=b.qa,Rt=b.ra+8*B+M,xt=b.Ha,wt=b.Ia+8*B+M,M=0;16>M;++M)n(Et,Vt+M*b.R,Z,it+32*M,16);for(M=0;8>M;++M)n(Ft,Rt+M*b.B,ot,lt+32*M,8),n(xt,wt+M*b.B,yt,Dt+32*M,8)}}function Pa(b,E,M,B,W,Q,Z,it,ot){var lt=[0],yt=[0],Dt=0,Rt=ot!=null?ot.kd:0,Et=ot??new $d;if(b==null||12>M)return 7;Et.data=b,Et.w=E,Et.ha=M,E=[E],M=[M],Et.gb=[Et.gb];t:{var Vt=E,Ft=M,xt=Et.gb;if(t(b!=null),t(Ft!=null),t(xt!=null),xt[0]=0,12<=Ft[0]&&!e(b,Vt[0],"RIFF")){if(e(b,Vt[0]+8,"WEBP")){xt=3;break t}var wt=Qt(b,Vt[0]+4);if(12>wt||4294967286<wt){xt=3;break t}if(Rt&&wt>Ft[0]-8){xt=7;break t}xt[0]=wt,Vt[0]+=12,Ft[0]-=12}xt=0}if(xt!=0)return xt;for(wt=0<Et.gb[0],M=M[0];;){t:{var zt=b;Ft=E,xt=M;var Wt=lt,qt=yt,oe=Vt=[0];if((se=Dt=[Dt])[0]=0,8>xt[0])xt=7;else{if(!e(zt,Ft[0],"VP8X")){if(Qt(zt,Ft[0]+4)!=10){xt=3;break t}if(18>xt[0]){xt=7;break t}var ie=Qt(zt,Ft[0]+8),Ae=1+ee(zt,Ft[0]+12);if(2147483648<=Ae*(zt=1+ee(zt,Ft[0]+15))){xt=3;break t}oe!=null&&(oe[0]=ie),Wt!=null&&(Wt[0]=Ae),qt!=null&&(qt[0]=zt),Ft[0]+=18,xt[0]-=18,se[0]=1}xt=0}}if(Dt=Dt[0],Vt=Vt[0],xt!=0)return xt;if(Ft=!!(2&Vt),!wt&&Dt)return 3;if(Q!=null&&(Q[0]=!!(16&Vt)),Z!=null&&(Z[0]=Ft),it!=null&&(it[0]=0),Z=lt[0],Vt=yt[0],Dt&&Ft&&ot==null){xt=0;break}if(4>M){xt=7;break}if(wt&&Dt||!wt&&!Dt&&!e(b,E[0],"ALPH")){M=[M],Et.na=[Et.na],Et.P=[Et.P],Et.Sa=[Et.Sa];t:{ie=b,xt=E,wt=M;var se=Et.gb;Wt=Et.na,qt=Et.P,oe=Et.Sa,Ae=22,t(ie!=null),t(wt!=null),zt=xt[0];var wn=wt[0];for(t(Wt!=null),t(oe!=null),Wt[0]=null,qt[0]=null,oe[0]=0;;){if(xt[0]=zt,wt[0]=wn,8>wn){xt=7;break t}var ln=Qt(ie,zt+4);if(4294967286<ln){xt=3;break t}var fn=8+ln+1&-2;if(Ae+=fn,0<se&&Ae>se){xt=3;break t}if(!e(ie,zt,"VP8 ")||!e(ie,zt,"VP8L")){xt=0;break t}if(wn[0]<fn){xt=7;break t}e(ie,zt,"ALPH")||(Wt[0]=ie,qt[0]=zt+8,oe[0]=ln),zt+=fn,wn-=fn}}if(M=M[0],Et.na=Et.na[0],Et.P=Et.P[0],Et.Sa=Et.Sa[0],xt!=0)break}M=[M],Et.Ja=[Et.Ja],Et.xa=[Et.xa];t:if(se=b,xt=E,wt=M,Wt=Et.gb[0],qt=Et.Ja,oe=Et.xa,ie=xt[0],zt=!e(se,ie,"VP8 "),Ae=!e(se,ie,"VP8L"),t(se!=null),t(wt!=null),t(qt!=null),t(oe!=null),8>wt[0])xt=7;else{if(zt||Ae){if(se=Qt(se,ie+4),12<=Wt&&se>Wt-12){xt=3;break t}if(Rt&&se>wt[0]-8){xt=7;break t}qt[0]=se,xt[0]+=8,wt[0]-=8,oe[0]=Ae}else oe[0]=5<=wt[0]&&se[ie+0]==47&&!(se[ie+4]>>5),qt[0]=wt[0];xt=0}if(M=M[0],Et.Ja=Et.Ja[0],Et.xa=Et.xa[0],E=E[0],xt!=0)break;if(4294967286<Et.Ja)return 3;if(it==null||Ft||(it[0]=Et.xa?2:1),Z=[Z],Vt=[Vt],Et.xa){if(5>M){xt=7;break}it=Z,Rt=Vt,Ft=Q,b==null||5>M?b=0:5<=M&&b[E+0]==47&&!(b[E+4]>>5)?(wt=[0],se=[0],Wt=[0],ht(qt=new P,b,E,M),Se(qt,wt,se,Wt)?(it!=null&&(it[0]=wt[0]),Rt!=null&&(Rt[0]=se[0]),Ft!=null&&(Ft[0]=Wt[0]),b=1):b=0):b=0}else{if(10>M){xt=7;break}it=Vt,b==null||10>M||!ho(b,E+3,M-3)?b=0:(Rt=b[E+0]|b[E+1]<<8|b[E+2]<<16,Ft=16383&(b[E+7]<<8|b[E+6]),b=16383&(b[E+9]<<8|b[E+8]),1&Rt||3<(Rt>>1&7)||!(Rt>>4&1)||Rt>>5>=Et.Ja||!Ft||!b?b=0:(Z&&(Z[0]=Ft),it&&(it[0]=b),b=1))}if(!b||(Z=Z[0],Vt=Vt[0],Dt&&(lt[0]!=Z||yt[0]!=Vt)))return 3;ot!=null&&(ot[0]=Et,ot.offset=E-ot.w,t(4294967286>E-ot.w),t(ot.offset==ot.ha-M));break}return xt==0||xt==7&&Dt&&ot==null?(Q!=null&&(Q[0]|=Et.na!=null&&0<Et.na.length),B!=null&&(B[0]=Z),W!=null&&(W[0]=Vt),0):xt}function pl(b,E,M){var B=E.width,W=E.height,Q=0,Z=0,it=B,ot=W;if(E.Da=b!=null&&0<b.Da,E.Da&&(it=b.cd,ot=b.bd,Q=b.v,Z=b.j,11>M||(Q&=-2,Z&=-2),0>Q||0>Z||0>=it||0>=ot||Q+it>B||Z+ot>W))return 0;if(E.v=Q,E.j=Z,E.va=Q+it,E.o=Z+ot,E.U=it,E.T=ot,E.da=b!=null&&0<b.da,E.da){if(!Le(it,ot,M=[b.ib],Q=[b.hb]))return 0;E.ib=M[0],E.hb=Q[0]}return E.ob=b!=null&&b.ob,E.Kb=b==null||!b.Sd,E.da&&(E.ob=E.ib<3*B/4&&E.hb<3*W/4,E.Kb=0),1}function jd(b){if(b==null)return 2;if(11>b.S){var E=b.f.RGBA;E.fb+=(b.height-1)*E.A,E.A=-E.A}else E=b.f.kb,b=b.height,E.O+=(b-1)*E.fa,E.fa=-E.fa,E.N+=(b-1>>1)*E.Ab,E.Ab=-E.Ab,E.W+=(b-1>>1)*E.Db,E.Db=-E.Db,E.F!=null&&(E.J+=(b-1)*E.lb,E.lb=-E.lb);return 0}function gl(b,E,M,B){if(B==null||0>=b||0>=E)return 2;if(M!=null){if(M.Da){var W=M.cd,Q=M.bd,Z=-2&M.v,it=-2&M.j;if(0>Z||0>it||0>=W||0>=Q||Z+W>b||it+Q>E)return 2;b=W,E=Q}if(M.da){if(!Le(b,E,W=[M.ib],Q=[M.hb]))return 2;b=W[0],E=Q[0]}}B.width=b,B.height=E;t:{var ot=B.width,lt=B.height;if(b=B.S,0>=ot||0>=lt||!(b>=ig&&13>b))b=2;else{if(0>=B.Rd&&B.sd==null){Z=Q=W=E=0;var yt=(it=ot*fg[b])*lt;if(11>b||(Q=(lt+1)/2*(E=(ot+1)/2),b==12&&(Z=(W=ot)*lt)),(lt=s(yt+2*Q+Z))==null){b=1;break t}B.sd=lt,11>b?((ot=B.f.RGBA).eb=lt,ot.fb=0,ot.A=it,ot.size=yt):((ot=B.f.kb).y=lt,ot.O=0,ot.fa=it,ot.Fd=yt,ot.f=lt,ot.N=0+yt,ot.Ab=E,ot.Cd=Q,ot.ea=lt,ot.W=0+yt+Q,ot.Db=E,ot.Ed=Q,b==12&&(ot.F=lt,ot.J=0+yt+2*Q),ot.Tc=Z,ot.lb=W)}if(E=1,W=B.S,Q=B.width,Z=B.height,W>=ig&&13>W)if(11>W)b=B.f.RGBA,E&=(it=Math.abs(b.A))*(Z-1)+Q<=b.size,E&=it>=Q*fg[W],E&=b.eb!=null;else{b=B.f.kb,it=(Q+1)/2,yt=(Z+1)/2,ot=Math.abs(b.fa),lt=Math.abs(b.Ab);var Dt=Math.abs(b.Db),Rt=Math.abs(b.lb),Et=Rt*(Z-1)+Q;E&=ot*(Z-1)+Q<=b.Fd,E&=lt*(yt-1)+it<=b.Cd,E=(E&=Dt*(yt-1)+it<=b.Ed)&ot>=Q&lt>=it&Dt>=it,E&=b.y!=null,E&=b.f!=null,E&=b.ea!=null,W==12&&(E&=Rt>=Q,E&=Et<=b.Tc,E&=b.F!=null)}else E=0;b=E?0:2}}return b!=0||M!=null&&M.fd&&(b=jd(B)),b}var lr=64,xc=[0,1,3,7,15,31,63,127,255,511,1023,2047,4095,8191,16383,32767,65535,131071,262143,524287,1048575,2097151,4194303,8388607,16777215],fu=24,du=32,Qh=8,ss=[0,0,1,1,2,2,2,2,3,3,3,3,3,3,3,3,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7];te("Predictor0","PredictorAdd0"),V.Predictor0=function(){return 4278190080},V.Predictor1=function(b){return b},V.Predictor2=function(b,E,M){return E[M+0]},V.Predictor3=function(b,E,M){return E[M+1]},V.Predictor4=function(b,E,M){return E[M-1]},V.Predictor5=function(b,E,M){return Zt(Zt(b,E[M+1]),E[M+0])},V.Predictor6=function(b,E,M){return Zt(b,E[M-1])},V.Predictor7=function(b,E,M){return Zt(b,E[M+0])},V.Predictor8=function(b,E,M){return Zt(E[M-1],E[M+0])},V.Predictor9=function(b,E,M){return Zt(E[M+0],E[M+1])},V.Predictor10=function(b,E,M){return Zt(Zt(b,E[M-1]),Zt(E[M+0],E[M+1]))},V.Predictor11=function(b,E,M){var B=E[M+0];return 0>=Oe(B>>24&255,b>>24&255,(E=E[M-1])>>24&255)+Oe(B>>16&255,b>>16&255,E>>16&255)+Oe(B>>8&255,b>>8&255,E>>8&255)+Oe(255&B,255&b,255&E)?B:b},V.Predictor12=function(b,E,M){var B=E[M+0];return(pe((b>>24&255)+(B>>24&255)-((E=E[M-1])>>24&255))<<24|pe((b>>16&255)+(B>>16&255)-(E>>16&255))<<16|pe((b>>8&255)+(B>>8&255)-(E>>8&255))<<8|pe((255&b)+(255&B)-(255&E)))>>>0},V.Predictor13=function(b,E,M){var B=E[M-1];return(ye((b=Zt(b,E[M+0]))>>24&255,B>>24&255)<<24|ye(b>>16&255,B>>16&255)<<16|ye(b>>8&255,B>>8&255)<<8|ye(b>>0&255,B>>0&255))>>>0};var tg=V.PredictorAdd0;V.PredictorAdd1=ke,te("Predictor2","PredictorAdd2"),te("Predictor3","PredictorAdd3"),te("Predictor4","PredictorAdd4"),te("Predictor5","PredictorAdd5"),te("Predictor6","PredictorAdd6"),te("Predictor7","PredictorAdd7"),te("Predictor8","PredictorAdd8"),te("Predictor9","PredictorAdd9"),te("Predictor10","PredictorAdd10"),te("Predictor11","PredictorAdd11"),te("Predictor12","PredictorAdd12"),te("Predictor13","PredictorAdd13");var Jd=V.PredictorAdd2;Ye("ColorIndexInverseTransform","MapARGB","32b",(function(b){return b>>8&255}),(function(b){return b})),Ye("VP8LColorIndexInverseTransformAlpha","MapAlpha","8b",(function(b){return b}),(function(b){return b>>8&255}));var eg,vo=V.ColorIndexInverseTransform,Zh=V.MapARGB,ng=V.VP8LColorIndexInverseTransformAlpha,Ur=V.MapAlpha,yo=V.VP8LPredictorsAdd=[];yo.length=16,(V.VP8LPredictors=[]).length=16,(V.VP8LPredictorsAdd_C=[]).length=16,(V.VP8LPredictors_C=[]).length=16;var pu,os,Hr,ml,Xo,vl,jo,Jo,ei,bc,qr,ur,Ko,tf,ef,Ys,gu,yl,mu,nf,Ac,vu,rf,$s,Es,sn,Ln,_n,vi=s(511),Qo=s(2041),yu=s(225),xl=s(767),sf=0,bl=Qo,Kd=yu,zr=xl,_r=vi,ig=0,Gr=1,rg=2,xo=3,Qd=4,of=5,xu=6,Zd=7,sg=8,af=9,og=10,bo=[2,3,7],lf=[3,3,11],_c=[280,256,256,256,40],ag=[0,1,1,1,0],t0=[17,18,0,1,2,3,4,5,16,6,7,8,9,10,11,12,13,14,15],Ao=[24,7,23,25,40,6,39,41,22,26,38,42,56,5,55,57,21,27,54,58,37,43,72,4,71,73,20,28,53,59,70,74,36,44,88,69,75,52,60,3,87,89,19,29,86,90,35,45,68,76,85,91,51,61,104,2,103,105,18,30,102,106,34,46,84,92,67,77,101,107,50,62,120,1,119,121,83,93,17,31,100,108,66,78,118,122,33,47,117,123,49,63,99,109,82,94,0,116,124,65,79,16,32,98,110,48,115,125,81,95,64,114,126,97,111,80,113,127,96,112],_o=[2954,2956,2958,2962,2970,2986,3018,3082,3212,3468,3980,5004],bu=8,wo=[4,5,6,7,8,9,10,10,11,12,13,14,15,16,17,17,18,19,20,20,21,21,22,22,23,23,24,25,25,26,27,28,29,30,31,32,33,34,35,36,37,37,38,39,40,41,42,43,44,45,46,46,47,48,49,50,51,52,53,54,55,56,57,58,59,60,61,62,63,64,65,66,67,68,69,70,71,72,73,74,75,76,76,77,78,79,80,81,82,83,84,85,86,87,88,89,91,93,95,96,98,100,101,102,104,106,108,110,112,114,116,118,122,124,126,128,130,132,134,136,138,140,143,145,148,151,154,157],So=[4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58,60,62,64,66,68,70,72,74,76,78,80,82,84,86,88,90,92,94,96,98,100,102,104,106,108,110,112,114,116,119,122,125,128,131,134,137,140,143,146,149,152,155,158,161,164,167,170,173,177,181,185,189,193,197,201,205,209,213,217,221,225,229,234,239,245,249,254,259,264,269,274,279,284],Ws=null,cx=[[173,148,140,0],[176,155,140,135,0],[180,157,141,134,130,0],[254,254,243,230,196,177,153,140,133,130,129,0]],Y1=[0,1,4,8,5,2,3,6,9,12,13,10,7,11,14,15],lg=[-0,1,-1,2,-2,3,4,6,-3,5,-4,-5,-6,7,-7,8,-8,-9],hx=[[[[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128]],[[253,136,254,255,228,219,128,128,128,128,128],[189,129,242,255,227,213,255,219,128,128,128],[106,126,227,252,214,209,255,255,128,128,128]],[[1,98,248,255,236,226,255,255,128,128,128],[181,133,238,254,221,234,255,154,128,128,128],[78,134,202,247,198,180,255,219,128,128,128]],[[1,185,249,255,243,255,128,128,128,128,128],[184,150,247,255,236,224,128,128,128,128,128],[77,110,216,255,236,230,128,128,128,128,128]],[[1,101,251,255,241,255,128,128,128,128,128],[170,139,241,252,236,209,255,255,128,128,128],[37,116,196,243,228,255,255,255,128,128,128]],[[1,204,254,255,245,255,128,128,128,128,128],[207,160,250,255,238,128,128,128,128,128,128],[102,103,231,255,211,171,128,128,128,128,128]],[[1,152,252,255,240,255,128,128,128,128,128],[177,135,243,255,234,225,128,128,128,128,128],[80,129,211,255,194,224,128,128,128,128,128]],[[1,1,255,128,128,128,128,128,128,128,128],[246,1,255,128,128,128,128,128,128,128,128],[255,128,128,128,128,128,128,128,128,128,128]]],[[[198,35,237,223,193,187,162,160,145,155,62],[131,45,198,221,172,176,220,157,252,221,1],[68,47,146,208,149,167,221,162,255,223,128]],[[1,149,241,255,221,224,255,255,128,128,128],[184,141,234,253,222,220,255,199,128,128,128],[81,99,181,242,176,190,249,202,255,255,128]],[[1,129,232,253,214,197,242,196,255,255,128],[99,121,210,250,201,198,255,202,128,128,128],[23,91,163,242,170,187,247,210,255,255,128]],[[1,200,246,255,234,255,128,128,128,128,128],[109,178,241,255,231,245,255,255,128,128,128],[44,130,201,253,205,192,255,255,128,128,128]],[[1,132,239,251,219,209,255,165,128,128,128],[94,136,225,251,218,190,255,255,128,128,128],[22,100,174,245,186,161,255,199,128,128,128]],[[1,182,249,255,232,235,128,128,128,128,128],[124,143,241,255,227,234,128,128,128,128,128],[35,77,181,251,193,211,255,205,128,128,128]],[[1,157,247,255,236,231,255,255,128,128,128],[121,141,235,255,225,227,255,255,128,128,128],[45,99,188,251,195,217,255,224,128,128,128]],[[1,1,251,255,213,255,128,128,128,128,128],[203,1,248,255,255,128,128,128,128,128,128],[137,1,177,255,224,255,128,128,128,128,128]]],[[[253,9,248,251,207,208,255,192,128,128,128],[175,13,224,243,193,185,249,198,255,255,128],[73,17,171,221,161,179,236,167,255,234,128]],[[1,95,247,253,212,183,255,255,128,128,128],[239,90,244,250,211,209,255,255,128,128,128],[155,77,195,248,188,195,255,255,128,128,128]],[[1,24,239,251,218,219,255,205,128,128,128],[201,51,219,255,196,186,128,128,128,128,128],[69,46,190,239,201,218,255,228,128,128,128]],[[1,191,251,255,255,128,128,128,128,128,128],[223,165,249,255,213,255,128,128,128,128,128],[141,124,248,255,255,128,128,128,128,128,128]],[[1,16,248,255,255,128,128,128,128,128,128],[190,36,230,255,236,255,128,128,128,128,128],[149,1,255,128,128,128,128,128,128,128,128]],[[1,226,255,128,128,128,128,128,128,128,128],[247,192,255,128,128,128,128,128,128,128,128],[240,128,255,128,128,128,128,128,128,128,128]],[[1,134,252,255,255,128,128,128,128,128,128],[213,62,250,255,255,128,128,128,128,128,128],[55,93,255,128,128,128,128,128,128,128,128]],[[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128]]],[[[202,24,213,235,186,191,220,160,240,175,255],[126,38,182,232,169,184,228,174,255,187,128],[61,46,138,219,151,178,240,170,255,216,128]],[[1,112,230,250,199,191,247,159,255,255,128],[166,109,228,252,211,215,255,174,128,128,128],[39,77,162,232,172,180,245,178,255,255,128]],[[1,52,220,246,198,199,249,220,255,255,128],[124,74,191,243,183,193,250,221,255,255,128],[24,71,130,219,154,170,243,182,255,255,128]],[[1,182,225,249,219,240,255,224,128,128,128],[149,150,226,252,216,205,255,171,128,128,128],[28,108,170,242,183,194,254,223,255,255,128]],[[1,81,230,252,204,203,255,192,128,128,128],[123,102,209,247,188,196,255,233,128,128,128],[20,95,153,243,164,173,255,203,128,128,128]],[[1,222,248,255,216,213,128,128,128,128,128],[168,175,246,252,235,205,255,255,128,128,128],[47,116,215,255,211,212,255,255,128,128,128]],[[1,121,236,253,212,214,255,255,128,128,128],[141,84,213,252,201,202,255,219,128,128,128],[42,80,160,240,162,185,255,205,128,128,128]],[[1,1,255,128,128,128,128,128,128,128,128],[244,1,255,128,128,128,128,128,128,128,128],[238,1,255,128,128,128,128,128,128,128,128]]]],wr=[[[231,120,48,89,115,113,120,152,112],[152,179,64,126,170,118,46,70,95],[175,69,143,80,85,82,72,155,103],[56,58,10,171,218,189,17,13,152],[114,26,17,163,44,195,21,10,173],[121,24,80,195,26,62,44,64,85],[144,71,10,38,171,213,144,34,26],[170,46,55,19,136,160,33,206,71],[63,20,8,114,114,208,12,9,226],[81,40,11,96,182,84,29,16,36]],[[134,183,89,137,98,101,106,165,148],[72,187,100,130,157,111,32,75,80],[66,102,167,99,74,62,40,234,128],[41,53,9,178,241,141,26,8,107],[74,43,26,146,73,166,49,23,157],[65,38,105,160,51,52,31,115,128],[104,79,12,27,217,255,87,17,7],[87,68,71,44,114,51,15,186,23],[47,41,14,110,182,183,21,17,194],[66,45,25,102,197,189,23,18,22]],[[88,88,147,150,42,46,45,196,205],[43,97,183,117,85,38,35,179,61],[39,53,200,87,26,21,43,232,171],[56,34,51,104,114,102,29,93,77],[39,28,85,171,58,165,90,98,64],[34,22,116,206,23,34,43,166,73],[107,54,32,26,51,1,81,43,31],[68,25,106,22,64,171,36,225,114],[34,19,21,102,132,188,16,76,124],[62,18,78,95,85,57,50,48,51]],[[193,101,35,159,215,111,89,46,111],[60,148,31,172,219,228,21,18,111],[112,113,77,85,179,255,38,120,114],[40,42,1,196,245,209,10,25,109],[88,43,29,140,166,213,37,43,154],[61,63,30,155,67,45,68,1,209],[100,80,8,43,154,1,51,26,71],[142,78,78,16,255,128,34,197,171],[41,40,5,102,211,183,4,1,221],[51,50,17,168,209,192,23,25,82]],[[138,31,36,171,27,166,38,44,229],[67,87,58,169,82,115,26,59,179],[63,59,90,180,59,166,93,73,154],[40,40,21,116,143,209,34,39,175],[47,15,16,183,34,223,49,45,183],[46,17,33,183,6,98,15,32,183],[57,46,22,24,128,1,54,17,37],[65,32,73,115,28,128,23,128,205],[40,3,9,115,51,192,18,6,223],[87,37,9,115,59,77,64,21,47]],[[104,55,44,218,9,54,53,130,226],[64,90,70,205,40,41,23,26,57],[54,57,112,184,5,41,38,166,213],[30,34,26,133,152,116,10,32,134],[39,19,53,221,26,114,32,73,255],[31,9,65,234,2,15,1,118,73],[75,32,12,51,192,255,160,43,51],[88,31,35,67,102,85,55,186,85],[56,21,23,111,59,205,45,37,192],[55,38,70,124,73,102,1,34,98]],[[125,98,42,88,104,85,117,175,82],[95,84,53,89,128,100,113,101,45],[75,79,123,47,51,128,81,171,1],[57,17,5,71,102,57,53,41,49],[38,33,13,121,57,73,26,1,85],[41,10,67,138,77,110,90,47,114],[115,21,2,10,102,255,166,23,6],[101,29,16,10,85,128,101,196,26],[57,18,10,102,102,213,34,20,43],[117,20,15,36,163,128,68,1,26]],[[102,61,71,37,34,53,31,243,192],[69,60,71,38,73,119,28,222,37],[68,45,128,34,1,47,11,245,171],[62,17,19,70,146,85,55,62,70],[37,43,37,154,100,163,85,160,1],[63,9,92,136,28,64,32,201,85],[75,15,9,9,64,255,184,119,16],[86,6,28,5,64,255,25,248,1],[56,8,17,132,137,255,55,116,128],[58,15,20,82,135,57,26,121,40]],[[164,50,31,137,154,133,25,35,218],[51,103,44,131,131,123,31,6,158],[86,40,64,135,148,224,45,183,128],[22,26,17,131,240,154,14,1,209],[45,16,21,91,64,222,7,1,197],[56,21,39,155,60,138,23,102,213],[83,12,13,54,192,255,68,47,28],[85,26,85,85,128,128,32,146,171],[18,11,7,63,144,171,4,4,246],[35,27,10,146,174,171,12,26,128]],[[190,80,35,99,180,80,126,54,45],[85,126,47,87,176,51,41,20,32],[101,75,128,139,118,146,116,128,85],[56,41,15,176,236,85,37,9,62],[71,30,17,119,118,255,17,18,138],[101,38,60,138,55,70,43,26,142],[146,36,19,30,171,255,97,27,20],[138,45,61,62,219,1,81,188,64],[32,41,20,117,151,142,20,21,163],[112,19,12,61,195,128,48,4,24]]],ni=[[[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[176,246,255,255,255,255,255,255,255,255,255],[223,241,252,255,255,255,255,255,255,255,255],[249,253,253,255,255,255,255,255,255,255,255]],[[255,244,252,255,255,255,255,255,255,255,255],[234,254,254,255,255,255,255,255,255,255,255],[253,255,255,255,255,255,255,255,255,255,255]],[[255,246,254,255,255,255,255,255,255,255,255],[239,253,254,255,255,255,255,255,255,255,255],[254,255,254,255,255,255,255,255,255,255,255]],[[255,248,254,255,255,255,255,255,255,255,255],[251,255,254,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,253,254,255,255,255,255,255,255,255,255],[251,254,254,255,255,255,255,255,255,255,255],[254,255,254,255,255,255,255,255,255,255,255]],[[255,254,253,255,254,255,255,255,255,255,255],[250,255,254,255,254,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]],[[[217,255,255,255,255,255,255,255,255,255,255],[225,252,241,253,255,255,254,255,255,255,255],[234,250,241,250,253,255,253,254,255,255,255]],[[255,254,255,255,255,255,255,255,255,255,255],[223,254,254,255,255,255,255,255,255,255,255],[238,253,254,254,255,255,255,255,255,255,255]],[[255,248,254,255,255,255,255,255,255,255,255],[249,254,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,253,255,255,255,255,255,255,255,255,255],[247,254,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,253,254,255,255,255,255,255,255,255,255],[252,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,254,254,255,255,255,255,255,255,255,255],[253,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,254,253,255,255,255,255,255,255,255,255],[250,255,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]],[[[186,251,250,255,255,255,255,255,255,255,255],[234,251,244,254,255,255,255,255,255,255,255],[251,251,243,253,254,255,254,255,255,255,255]],[[255,253,254,255,255,255,255,255,255,255,255],[236,253,254,255,255,255,255,255,255,255,255],[251,253,253,254,254,255,255,255,255,255,255]],[[255,254,254,255,255,255,255,255,255,255,255],[254,254,254,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,254,255,255,255,255,255,255,255,255,255],[254,254,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]],[[[248,255,255,255,255,255,255,255,255,255,255],[250,254,252,254,255,255,255,255,255,255,255],[248,254,249,253,255,255,255,255,255,255,255]],[[255,253,253,255,255,255,255,255,255,255,255],[246,253,253,255,255,255,255,255,255,255,255],[252,254,251,254,254,255,255,255,255,255,255]],[[255,254,252,255,255,255,255,255,255,255,255],[248,254,253,255,255,255,255,255,255,255,255],[253,255,254,254,255,255,255,255,255,255,255]],[[255,251,254,255,255,255,255,255,255,255,255],[245,251,254,255,255,255,255,255,255,255,255],[253,253,254,255,255,255,255,255,255,255,255]],[[255,251,253,255,255,255,255,255,255,255,255],[252,253,254,255,255,255,255,255,255,255,255],[255,254,255,255,255,255,255,255,255,255,255]],[[255,252,255,255,255,255,255,255,255,255,255],[249,255,254,255,255,255,255,255,255,255,255],[255,255,254,255,255,255,255,255,255,255,255]],[[255,255,253,255,255,255,255,255,255,255,255],[250,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]]],an=[0,1,2,3,6,4,5,6,6,6,6,6,6,6,6,7,0],as=[],Ti=[],Zo=[],Au=1,$1=2,Al=[],Sr=[];Ot("UpsampleRgbLinePair",hn,3),Ot("UpsampleBgrLinePair",mi,3),Ot("UpsampleRgbaLinePair",Or,4),Ot("UpsampleBgraLinePair",tr,4),Ot("UpsampleArgbLinePair",Ar,4),Ot("UpsampleRgba4444LinePair",Fi,2),Ot("UpsampleRgb565LinePair",Ai,2);var wc=V.UpsampleRgbLinePair,W1=V.UpsampleBgrLinePair,uf=V.UpsampleRgbaLinePair,ug=V.UpsampleBgraLinePair,_u=V.UpsampleArgbLinePair,ka=V.UpsampleRgba4444LinePair,wu=V.UpsampleRgb565LinePair,Eo=16,cf=1<<Eo-1,Sc=-227,Su=482,cg=6,Eu=0,Er=s(256),hg=s(256),fx=s(256),jA=s(256),JA=s(Su-Sc),KA=s(Su-Sc);Ia("YuvToRgbRow",hn,3),Ia("YuvToBgrRow",mi,3),Ia("YuvToRgbaRow",Or,4),Ia("YuvToBgraRow",tr,4),Ia("YuvToArgbRow",Ar,4),Ia("YuvToRgba4444Row",Fi,2),Ia("YuvToRgb565Row",Ai,2);var Bi=[0,4,8,12,128,132,136,140,256,260,264,268,384,388,392,396],hf=[0,2,8],e0=[8,7,6,4,4,2,2,2,1,1,1,1],n0=1;this.WebPDecodeRGBA=function(b,E,M,B,W){var Q=Gr,Z=new vc,it=new Pr;Z.ba=it,it.S=Q,it.width=[it.width],it.height=[it.height];var ot=it.width,lt=it.height,yt=new ns;if(yt==null||b==null)var Dt=2;else t(yt!=null),Dt=Pa(b,E,M,yt.width,yt.height,yt.Pd,yt.Qd,yt.format,null);if(Dt!=0?ot=0:(ot!=null&&(ot[0]=yt.width[0]),lt!=null&&(lt[0]=yt.height[0]),ot=1),ot){it.width=it.width[0],it.height=it.height[0],B!=null&&(B[0]=it.width),W!=null&&(W[0]=it.height);t:{if(B=new Oh,(W=new $d).data=b,W.w=E,W.ha=M,W.kd=1,E=[0],t(W!=null),((b=Pa(W.data,W.w,W.ha,null,null,null,E,null,W))==0||b==7)&&E[0]&&(b=4),(E=b)==0){if(t(Z!=null),B.data=W.data,B.w=W.w+W.offset,B.ha=W.ha-W.offset,B.put=As,B.ac=Gi,B.bc=br,B.ma=Z,W.xa){if((b=co())==null){Z=1;break t}if((function(Rt,Et){var Vt=[0],Ft=[0],xt=[0];e:for(;;){if(Rt==null)return 0;if(Et==null)return Rt.a=2,0;if(Rt.l=Et,Rt.a=0,ht(Rt.m,Et.data,Et.w,Et.ha),!Se(Rt.m,Vt,Ft,xt)){Rt.a=3;break e}if(Rt.xb=$1,Et.width=Vt[0],Et.height=Ft[0],!Na(Vt[0],Ft[0],1,Rt,null))break e;return 1}return t(Rt.a!=0),0})(b,B)){if(B=(E=gl(B.width,B.height,Z.Oa,Z.ba))==0){e:{B=b;n:for(;;){if(B==null){B=0;break e}if(t(B.s.yc!=null),t(B.s.Ya!=null),t(0<B.s.Wb),t((M=B.l)!=null),t((W=M.ma)!=null),B.xb!=0){if(B.ca=W.ba,B.tb=W.tb,t(B.ca!=null),!pl(W.Oa,M,xo)){B.a=2;break n}if(!Zl(B,M.width)||M.da)break n;if((M.da||vn(B.ca.S))&&Nt(),11>B.ca.S||(alert("todo:WebPInitConvertARGBToYUV"),B.ca.f.kb.F!=null&&Nt()),B.Pb&&0<B.s.ua&&B.s.vb.X==null&&!le(B.s.vb,B.s.Wa.Xa)){B.a=1;break n}B.xb=0}if(!Fr(B,B.V,B.Ba,B.c,B.i,M.o,cc))break n;W.Dc=B.Ma,B=1;break e}t(B.a!=0),B=0}B=!B}B&&(E=b.a)}else E=b.a}else{if((b=new Uh)==null){Z=1;break t}if(b.Fa=W.na,b.P=W.P,b.qc=W.Sa,rs(b,B)){if((E=gl(B.width,B.height,Z.Oa,Z.ba))==0){if(b.Aa=0,M=Z.Oa,t((W=b)!=null),M!=null){if(0<(ot=0>(ot=M.Md)?0:100<ot?255:255*ot/100)){for(lt=yt=0;4>lt;++lt)12>(Dt=W.pb[lt]).lc&&(Dt.ia=ot*e0[0>Dt.lc?0:Dt.lc]>>3),yt|=Dt.ia;yt&&(alert("todo:VP8InitRandom"),W.ia=1)}W.Ga=M.Id,100<W.Ga?W.Ga=100:0>W.Ga&&(W.Ga=0)}Bd(b,B)||(E=b.a)}}else E=b.a}E==0&&Z.Oa!=null&&Z.Oa.fd&&(E=jd(Z.ba))}Z=E}Q=Z!=0?null:11>Q?it.f.RGBA.eb:it.f.kb.y}else Q=null;return Q};var fg=[3,4,3,4,4,2,2,4,4,4,2,1,1]};function h(V,tt){for(var J="",O=0;O<4;O++)J+=String.fromCharCode(V[tt++]);return J}function f(V,tt){return(V[tt+0]<<0|V[tt+1]<<8|V[tt+2]<<16)>>>0}function g(V,tt){return(V[tt+0]<<0|V[tt+1]<<8|V[tt+2]<<16|V[tt+3]<<24)>>>0}new c;var m=[0],y=[0],w=[],S=new c,T=i,C=(function(V,tt){var J={},O=0,G=!1,et=0,st=0;if(J.frames=[],!(function(Y,j,ut,ft){for(var mt=0;mt<ft;mt++)if(Y[j+mt]!=ut.charCodeAt(mt))return!0;return!1})(V,tt,"RIFF",4)){var pt,nt;for(g(V,tt+=4),tt+=8;tt<V.length;){var at=h(V,tt),ht=g(V,tt+=4);tt+=4;var bt=ht+(1&ht);switch(at){case"VP8 ":case"VP8L":J.frames[O]===void 0&&(J.frames[O]={}),(P=J.frames[O]).src_off=G?st:tt-8,P.src_size=et+ht+8,O++,G&&(G=!1,et=0,st=0);break;case"VP8X":(P=J.header={}).feature_flags=V[tt];var St=tt+4;P.canvas_width=1+f(V,St),St+=3,P.canvas_height=1+f(V,St),St+=3;break;case"ALPH":G=!0,et=bt+8,st=tt-8;break;case"ANIM":(P=J.header).bgcolor=g(V,tt),St=tt+4,P.loop_count=(pt=V)[(nt=St)+0]<<0|pt[nt+1]<<8,St+=2;break;case"ANMF":var K,P;(P=J.frames[O]={}).offset_x=2*f(V,tt),tt+=3,P.offset_y=2*f(V,tt),tt+=3,P.width=1+f(V,tt),tt+=3,P.height=1+f(V,tt),tt+=3,P.duration=f(V,tt),tt+=3,K=V[tt++],P.dispose=1&K,P.blend=K>>1&1}at!="ANMF"&&(tt+=bt)}return J}})(T,0);C.response=T,C.rgbaoutput=!0,C.dataurl=!1;var D=C.header?C.header:null,R=C.frames?C.frames:null;if(D){D.loop_counter=D.loop_count,m=[D.canvas_height],y=[D.canvas_width];for(var I=0;I<R.length&&R[I].blend!=0;I++);}var F=R[0],q=S.WebPDecodeRGBA(T,F.src_off,F.src_size,y,m);F.rgba=q,F.imgwidth=y[0],F.imgheight=m[0];for(var U=0;U<y[0]*m[0]*4;U++)w[U]=q[U];return this.width=y,this.height=m,this.data=w,this}(function(i){var t=function(){return typeof PE=="function"},e=function(m,y,w,S){var T=4,C=a;switch(S){case i.image_compression.FAST:T=1,C=s;break;case i.image_compression.MEDIUM:T=6,C=u;break;case i.image_compression.SLOW:T=9,C=c}m=n(m,y,w,C);var D=PE(m,{level:T});return i.__addimage__.arrayBufferToBinaryString(D)},n=function(m,y,w,S){for(var T,C,D,R=m.length/y,I=new Uint8Array(m.length+R),F=f(),q=0;q<R;q+=1){if(D=q*y,T=m.subarray(D,D+y),S)I.set(S(T,w,C),D+q);else{for(var U,V=F.length,tt=[];U<V;U+=1)tt[U]=F[U](T,w,C);var J=g(tt.concat());I.set(tt[J],D+q)}C=T}return I},r=function(m){var y=Array.apply([],m);return y.unshift(0),y},s=function(m,y){var w,S=[],T=m.length;S[0]=1;for(var C=0;C<T;C+=1)w=m[C-y]||0,S[C+1]=m[C]-w+256&255;return S},a=function(m,y,w){var S,T=[],C=m.length;T[0]=2;for(var D=0;D<C;D+=1)S=w&&w[D]||0,T[D+1]=m[D]-S+256&255;return T},u=function(m,y,w){var S,T,C=[],D=m.length;C[0]=3;for(var R=0;R<D;R+=1)S=m[R-y]||0,T=w&&w[R]||0,C[R+1]=m[R]+256-(S+T>>>1)&255;return C},c=function(m,y,w){var S,T,C,D,R=[],I=m.length;R[0]=4;for(var F=0;F<I;F+=1)S=m[F-y]||0,T=w&&w[F]||0,C=w&&w[F-y]||0,D=h(S,T,C),R[F+1]=m[F]-D+256&255;return R},h=function(m,y,w){if(m===y&&y===w)return m;var S=Math.abs(y-w),T=Math.abs(m-w),C=Math.abs(m+y-w-w);return S<=T&&S<=C?m:T<=C?y:w},f=function(){return[r,s,a,u,c]},g=function(m){var y=m.map((function(w){return w.reduce((function(S,T){return S+Math.abs(T)}),0)}));return y.indexOf(Math.min.apply(null,y))};i.processPNG=function(m,y,w,S){var T,C,D,R,I,F,q,U,V,tt,J,O,G,et,st,pt=this.decode.FLATE_DECODE,nt="";if(this.__addimage__.isArrayBuffer(m)&&(m=new Uint8Array(m)),this.__addimage__.isArrayBufferView(m)){if(m=(D=new FV(m)).imgData,C=D.bits,T=D.colorSpace,I=D.colors,[4,6].indexOf(D.colorType)!==-1){if(D.bits===8){V=(U=D.pixelBitlength==32?new Uint32Array(D.decodePixels().buffer):D.pixelBitlength==16?new Uint16Array(D.decodePixels().buffer):new Uint8Array(D.decodePixels().buffer)).length,J=new Uint8Array(V*D.colors),tt=new Uint8Array(V);var at,ht=D.pixelBitlength-D.bits;for(et=0,st=0;et<V;et++){for(G=U[et],at=0;at<ht;)J[st++]=G>>>at&255,at+=D.bits;tt[et]=G>>>at&255}}if(D.bits===16){V=(U=new Uint32Array(D.decodePixels().buffer)).length,J=new Uint8Array(V*(32/D.pixelBitlength)*D.colors),tt=new Uint8Array(V*(32/D.pixelBitlength)),O=D.colors>1,et=0,st=0;for(var bt=0;et<V;)G=U[et++],J[st++]=G>>>0&255,O&&(J[st++]=G>>>16&255,G=U[et++],J[st++]=G>>>0&255),tt[bt++]=G>>>16&255;C=8}S!==i.image_compression.NONE&&t()?(m=e(J,D.width*D.colors,D.colors,S),q=e(tt,D.width,1,S)):(m=J,q=tt,pt=void 0)}if(D.colorType===3&&(T=this.color_spaces.INDEXED,F=D.palette,D.transparency.indexed)){var St=D.transparency.indexed,K=0;for(et=0,V=St.length;et<V;++et)K+=St[et];if((K/=255)===V-1&&St.indexOf(0)!==-1)R=[St.indexOf(0)];else if(K!==V){for(U=D.decodePixels(),tt=new Uint8Array(U.length),et=0,V=U.length;et<V;et++)tt[et]=St[U[et]];q=e(tt,D.width,1)}}var P=(function(Y){var j;switch(Y){case i.image_compression.FAST:j=11;break;case i.image_compression.MEDIUM:j=13;break;case i.image_compression.SLOW:j=14;break;default:j=12}return j})(S);return pt===this.decode.FLATE_DECODE&&(nt="/Predictor "+P+" "),nt+="/Colors "+I+" /BitsPerComponent "+C+" /Columns "+D.width,(this.__addimage__.isArrayBuffer(m)||this.__addimage__.isArrayBufferView(m))&&(m=this.__addimage__.arrayBufferToBinaryString(m)),(q&&this.__addimage__.isArrayBuffer(q)||this.__addimage__.isArrayBufferView(q))&&(q=this.__addimage__.arrayBufferToBinaryString(q)),{alias:w,data:m,index:y,filter:pt,decodeParameters:nt,transparency:R,palette:F,sMask:q,predictor:P,width:D.width,height:D.height,bitsPerComponent:C,colorSpace:T}}}})(Ie.API),(function(i){i.processGIF89A=function(t,e,n,r){var s=new BV(t),a=s.width,u=s.height,c=[];s.decodeAndBlitFrameRGBA(0,c);var h={data:c,width:a,height:u},f=new Ow(100).encode(h,100);return i.processJPEG.call(this,f,e,n,r)},i.processGIF87A=i.processGIF89A})(Ie.API),Dl.prototype.parseHeader=function(){if(this.fileSize=this.datav.getUint32(this.pos,!0),this.pos+=4,this.reserved=this.datav.getUint32(this.pos,!0),this.pos+=4,this.offset=this.datav.getUint32(this.pos,!0),this.pos+=4,this.headerSize=this.datav.getUint32(this.pos,!0),this.pos+=4,this.width=this.datav.getUint32(this.pos,!0),this.pos+=4,this.height=this.datav.getInt32(this.pos,!0),this.pos+=4,this.planes=this.datav.getUint16(this.pos,!0),this.pos+=2,this.bitPP=this.datav.getUint16(this.pos,!0),this.pos+=2,this.compress=this.datav.getUint32(this.pos,!0),this.pos+=4,this.rawSize=this.datav.getUint32(this.pos,!0),this.pos+=4,this.hr=this.datav.getUint32(this.pos,!0),this.pos+=4,this.vr=this.datav.getUint32(this.pos,!0),this.pos+=4,this.colors=this.datav.getUint32(this.pos,!0),this.pos+=4,this.importantColors=this.datav.getUint32(this.pos,!0),this.pos+=4,this.bitPP===16&&this.is_with_alpha&&(this.bitPP=15),this.bitPP<15){var i=this.colors===0?1<<this.bitPP:this.colors;this.palette=new Array(i);for(var t=0;t<i;t++){var e=this.datav.getUint8(this.pos++,!0),n=this.datav.getUint8(this.pos++,!0),r=this.datav.getUint8(this.pos++,!0),s=this.datav.getUint8(this.pos++,!0);this.palette[t]={red:r,green:n,blue:e,quad:s}}}this.height<0&&(this.height*=-1,this.bottom_up=!1)},Dl.prototype.parseBGR=function(){this.pos=this.offset;try{var i="bit"+this.bitPP,t=this.width*this.height*4;this.data=new Uint8Array(t),this[i]()}catch(e){ai.log("bit decode error:"+e)}},Dl.prototype.bit1=function(){var i,t=Math.ceil(this.width/8),e=t%4;for(i=this.height-1;i>=0;i--){for(var n=this.bottom_up?i:this.height-1-i,r=0;r<t;r++)for(var s=this.datav.getUint8(this.pos++,!0),a=n*this.width*4+8*r*4,u=0;u<8&&8*r+u<this.width;u++){var c=this.palette[s>>7-u&1];this.data[a+4*u]=c.blue,this.data[a+4*u+1]=c.green,this.data[a+4*u+2]=c.red,this.data[a+4*u+3]=255}e!==0&&(this.pos+=4-e)}},Dl.prototype.bit4=function(){for(var i=Math.ceil(this.width/2),t=i%4,e=this.height-1;e>=0;e--){for(var n=this.bottom_up?e:this.height-1-e,r=0;r<i;r++){var s=this.datav.getUint8(this.pos++,!0),a=n*this.width*4+2*r*4,u=s>>4,c=15&s,h=this.palette[u];if(this.data[a]=h.blue,this.data[a+1]=h.green,this.data[a+2]=h.red,this.data[a+3]=255,2*r+1>=this.width)break;h=this.palette[c],this.data[a+4]=h.blue,this.data[a+4+1]=h.green,this.data[a+4+2]=h.red,this.data[a+4+3]=255}t!==0&&(this.pos+=4-t)}},Dl.prototype.bit8=function(){for(var i=this.width%4,t=this.height-1;t>=0;t--){for(var e=this.bottom_up?t:this.height-1-t,n=0;n<this.width;n++){var r=this.datav.getUint8(this.pos++,!0),s=e*this.width*4+4*n;if(r<this.palette.length){var a=this.palette[r];this.data[s]=a.red,this.data[s+1]=a.green,this.data[s+2]=a.blue,this.data[s+3]=255}else this.data[s]=255,this.data[s+1]=255,this.data[s+2]=255,this.data[s+3]=255}i!==0&&(this.pos+=4-i)}},Dl.prototype.bit15=function(){for(var i=this.width%3,t=parseInt("11111",2),e=this.height-1;e>=0;e--){for(var n=this.bottom_up?e:this.height-1-e,r=0;r<this.width;r++){var s=this.datav.getUint16(this.pos,!0);this.pos+=2;var a=(s&t)/t*255|0,u=(s>>5&t)/t*255|0,c=(s>>10&t)/t*255|0,h=s>>15?255:0,f=n*this.width*4+4*r;this.data[f]=c,this.data[f+1]=u,this.data[f+2]=a,this.data[f+3]=h}this.pos+=i}},Dl.prototype.bit16=function(){for(var i=this.width%3,t=parseInt("11111",2),e=parseInt("111111",2),n=this.height-1;n>=0;n--){for(var r=this.bottom_up?n:this.height-1-n,s=0;s<this.width;s++){var a=this.datav.getUint16(this.pos,!0);this.pos+=2;var u=(a&t)/t*255|0,c=(a>>5&e)/e*255|0,h=(a>>11)/t*255|0,f=r*this.width*4+4*s;this.data[f]=h,this.data[f+1]=c,this.data[f+2]=u,this.data[f+3]=255}this.pos+=i}},Dl.prototype.bit24=function(){for(var i=this.height-1;i>=0;i--){for(var t=this.bottom_up?i:this.height-1-i,e=0;e<this.width;e++){var n=this.datav.getUint8(this.pos++,!0),r=this.datav.getUint8(this.pos++,!0),s=this.datav.getUint8(this.pos++,!0),a=t*this.width*4+4*e;this.data[a]=s,this.data[a+1]=r,this.data[a+2]=n,this.data[a+3]=255}this.pos+=this.width%4}},Dl.prototype.bit32=function(){for(var i=this.height-1;i>=0;i--)for(var t=this.bottom_up?i:this.height-1-i,e=0;e<this.width;e++){var n=this.datav.getUint8(this.pos++,!0),r=this.datav.getUint8(this.pos++,!0),s=this.datav.getUint8(this.pos++,!0),a=this.datav.getUint8(this.pos++,!0),u=t*this.width*4+4*e;this.data[u]=s,this.data[u+1]=r,this.data[u+2]=n,this.data[u+3]=a}},Dl.prototype.getData=function(){return this.data},(function(i){i.processBMP=function(t,e,n,r){var s=new Dl(t,!1),a=s.width,u=s.height,c={data:s.getData(),width:a,height:u},h=new Ow(100).encode(c,100);return i.processJPEG.call(this,h,e,n,r)}})(Ie.API),hN.prototype.getData=function(){return this.data},(function(i){i.processWEBP=function(t,e,n,r){var s=new hN(t),a=s.width,u=s.height,c={data:s.getData(),width:a,height:u},h=new Ow(100).encode(c,100);return i.processJPEG.call(this,h,e,n,r)}})(Ie.API),Ie.API.processRGBA=function(i,t,e){for(var n=i.data,r=n.length,s=new Uint8Array(r/4*3),a=new Uint8Array(r/4),u=0,c=0,h=0;h<r;h+=4){var f=n[h],g=n[h+1],m=n[h+2],y=n[h+3];s[u++]=f,s[u++]=g,s[u++]=m,a[c++]=y}var w=this.__addimage__.arrayBufferToBinaryString(s);return{alpha:this.__addimage__.arrayBufferToBinaryString(a),data:w,index:t,alias:e,colorSpace:"DeviceRGB",bitsPerComponent:8,width:i.width,height:i.height}},Ie.API.setLanguage=function(i){return this.internal.languageSettings===void 0&&(this.internal.languageSettings={},this.internal.languageSettings.isSubscribed=!1),{af:"Afrikaans",sq:"Albanian",ar:"Arabic (Standard)","ar-DZ":"Arabic (Algeria)","ar-BH":"Arabic (Bahrain)","ar-EG":"Arabic (Egypt)","ar-IQ":"Arabic (Iraq)","ar-JO":"Arabic (Jordan)","ar-KW":"Arabic (Kuwait)","ar-LB":"Arabic (Lebanon)","ar-LY":"Arabic (Libya)","ar-MA":"Arabic (Morocco)","ar-OM":"Arabic (Oman)","ar-QA":"Arabic (Qatar)","ar-SA":"Arabic (Saudi Arabia)","ar-SY":"Arabic (Syria)","ar-TN":"Arabic (Tunisia)","ar-AE":"Arabic (U.A.E.)","ar-YE":"Arabic (Yemen)",an:"Aragonese",hy:"Armenian",as:"Assamese",ast:"Asturian",az:"Azerbaijani",eu:"Basque",be:"Belarusian",bn:"Bengali",bs:"Bosnian",br:"Breton",bg:"Bulgarian",my:"Burmese",ca:"Catalan",ch:"Chamorro",ce:"Chechen",zh:"Chinese","zh-HK":"Chinese (Hong Kong)","zh-CN":"Chinese (PRC)","zh-SG":"Chinese (Singapore)","zh-TW":"Chinese (Taiwan)",cv:"Chuvash",co:"Corsican",cr:"Cree",hr:"Croatian",cs:"Czech",da:"Danish",nl:"Dutch (Standard)","nl-BE":"Dutch (Belgian)",en:"English","en-AU":"English (Australia)","en-BZ":"English (Belize)","en-CA":"English (Canada)","en-IE":"English (Ireland)","en-JM":"English (Jamaica)","en-NZ":"English (New Zealand)","en-PH":"English (Philippines)","en-ZA":"English (South Africa)","en-TT":"English (Trinidad & Tobago)","en-GB":"English (United Kingdom)","en-US":"English (United States)","en-ZW":"English (Zimbabwe)",eo:"Esperanto",et:"Estonian",fo:"Faeroese",fj:"Fijian",fi:"Finnish",fr:"French (Standard)","fr-BE":"French (Belgium)","fr-CA":"French (Canada)","fr-FR":"French (France)","fr-LU":"French (Luxembourg)","fr-MC":"French (Monaco)","fr-CH":"French (Switzerland)",fy:"Frisian",fur:"Friulian",gd:"Gaelic (Scots)","gd-IE":"Gaelic (Irish)",gl:"Galacian",ka:"Georgian",de:"German (Standard)","de-AT":"German (Austria)","de-DE":"German (Germany)","de-LI":"German (Liechtenstein)","de-LU":"German (Luxembourg)","de-CH":"German (Switzerland)",el:"Greek",gu:"Gujurati",ht:"Haitian",he:"Hebrew",hi:"Hindi",hu:"Hungarian",is:"Icelandic",id:"Indonesian",iu:"Inuktitut",ga:"Irish",it:"Italian (Standard)","it-CH":"Italian (Switzerland)",ja:"Japanese",kn:"Kannada",ks:"Kashmiri",kk:"Kazakh",km:"Khmer",ky:"Kirghiz",tlh:"Klingon",ko:"Korean","ko-KP":"Korean (North Korea)","ko-KR":"Korean (South Korea)",la:"Latin",lv:"Latvian",lt:"Lithuanian",lb:"Luxembourgish",mk:"North Macedonia",ms:"Malay",ml:"Malayalam",mt:"Maltese",mi:"Maori",mr:"Marathi",mo:"Moldavian",nv:"Navajo",ng:"Ndonga",ne:"Nepali",no:"Norwegian",nb:"Norwegian (Bokmal)",nn:"Norwegian (Nynorsk)",oc:"Occitan",or:"Oriya",om:"Oromo",fa:"Persian","fa-IR":"Persian/Iran",pl:"Polish",pt:"Portuguese","pt-BR":"Portuguese (Brazil)",pa:"Punjabi","pa-IN":"Punjabi (India)","pa-PK":"Punjabi (Pakistan)",qu:"Quechua",rm:"Rhaeto-Romanic",ro:"Romanian","ro-MO":"Romanian (Moldavia)",ru:"Russian","ru-MO":"Russian (Moldavia)",sz:"Sami (Lappish)",sg:"Sango",sa:"Sanskrit",sc:"Sardinian",sd:"Sindhi",si:"Singhalese",sr:"Serbian",sk:"Slovak",sl:"Slovenian",so:"Somani",sb:"Sorbian",es:"Spanish","es-AR":"Spanish (Argentina)","es-BO":"Spanish (Bolivia)","es-CL":"Spanish (Chile)","es-CO":"Spanish (Colombia)","es-CR":"Spanish (Costa Rica)","es-DO":"Spanish (Dominican Republic)","es-EC":"Spanish (Ecuador)","es-SV":"Spanish (El Salvador)","es-GT":"Spanish (Guatemala)","es-HN":"Spanish (Honduras)","es-MX":"Spanish (Mexico)","es-NI":"Spanish (Nicaragua)","es-PA":"Spanish (Panama)","es-PY":"Spanish (Paraguay)","es-PE":"Spanish (Peru)","es-PR":"Spanish (Puerto Rico)","es-ES":"Spanish (Spain)","es-UY":"Spanish (Uruguay)","es-VE":"Spanish (Venezuela)",sx:"Sutu",sw:"Swahili",sv:"Swedish","sv-FI":"Swedish (Finland)","sv-SV":"Swedish (Sweden)",ta:"Tamil",tt:"Tatar",te:"Teluga",th:"Thai",tig:"Tigre",ts:"Tsonga",tn:"Tswana",tr:"Turkish",tk:"Turkmen",uk:"Ukrainian",hsb:"Upper Sorbian",ur:"Urdu",ve:"Venda",vi:"Vietnamese",vo:"Volapuk",wa:"Walloon",cy:"Welsh",xh:"Xhosa",ji:"Yiddish",zu:"Zulu"}[i]!==void 0&&(this.internal.languageSettings.languageCode=i,this.internal.languageSettings.isSubscribed===!1&&(this.internal.events.subscribe("putCatalog",(function(){this.internal.write("/Lang ("+this.internal.languageSettings.languageCode+")")})),this.internal.languageSettings.isSubscribed=!0)),this},Fg=Ie.API,v5=Fg.getCharWidthsArray=function(i,t){var e,n,r=(t=t||{}).font||this.internal.getFont(),s=t.fontSize||this.internal.getFontSize(),a=t.charSpace||this.internal.getCharSpace(),u=t.widths?t.widths:r.metadata.Unicode.widths,c=u.fof?u.fof:1,h=t.kerning?t.kerning:r.metadata.Unicode.kerning,f=h.fof?h.fof:1,g=t.doKerning!==!1,m=0,y=i.length,w=0,S=u[0]||c,T=[];for(e=0;e<y;e++)n=i.charCodeAt(e),typeof r.metadata.widthOfString=="function"?T.push((r.metadata.widthOfGlyph(r.metadata.characterToGlyph(n))+a*(1e3/s)||0)/1e3):(m=g&&Gn(h[n])==="object"&&!isNaN(parseInt(h[n][w],10))?h[n][w]/f:0,T.push((u[n]||S)/c+m)),w=n;return T},aN=Fg.getStringUnitWidth=function(i,t){var e=(t=t||{}).fontSize||this.internal.getFontSize(),n=t.font||this.internal.getFont(),r=t.charSpace||this.internal.getCharSpace();return Fg.processArabic&&(i=Fg.processArabic(i)),typeof n.metadata.widthOfString=="function"?n.metadata.widthOfString(i,e,r)/e:v5.apply(this,arguments).reduce((function(s,a){return s+a}),0)},lN=function(i,t,e,n){for(var r=[],s=0,a=i.length,u=0;s!==a&&u+t[s]<e;)u+=t[s],s++;r.push(i.slice(0,s));var c=s;for(u=0;s!==a;)u+t[s]>n&&(r.push(i.slice(c,s)),u=0,c=s),u+=t[s],s++;return c!==s&&r.push(i.slice(c,s)),r},uN=function(i,t,e){e||(e={});var n,r,s,a,u,c,h,f=[],g=[f],m=e.textIndent||0,y=0,w=0,S=i.split(" "),T=v5.apply(this,[" ",e])[0];if(c=e.lineIndent===-1?S[0].length+2:e.lineIndent||0){var C=Array(c).join(" "),D=[];S.map((function(I){(I=I.split(/\s*\n/)).length>1?D=D.concat(I.map((function(F,q){return(q&&F.length?`
`:"")+F}))):D.push(I[0])})),S=D,c=aN.apply(this,[C,e])}for(s=0,a=S.length;s<a;s++){var R=0;if(n=S[s],c&&n[0]==`
`&&(n=n.substr(1),R=1),m+y+(w=(r=v5.apply(this,[n,e])).reduce((function(I,F){return I+F}),0))>t||R){if(w>t){for(u=lN.apply(this,[n,r,t-(m+y),t]),f.push(u.shift()),f=[u.pop()];u.length;)g.push([u.shift()]);w=r.slice(n.length-(f[0]?f[0].length:0)).reduce((function(I,F){return I+F}),0)}else f=[n];g.push(f),m=w+c,y=T}else f.push(n),m+=y+w,y=T}return h=c?function(I,F){return(F?C:"")+I.join(" ")}:function(I){return I.join(" ")},g.map(h)},Fg.splitTextToSize=function(i,t,e){var n,r=(e=e||{}).fontSize||this.internal.getFontSize(),s=(function(f){if(f.widths&&f.kerning)return{widths:f.widths,kerning:f.kerning};var g=this.internal.getFont(f.fontName,f.fontStyle);return g.metadata.Unicode?{widths:g.metadata.Unicode.widths||{0:1},kerning:g.metadata.Unicode.kerning||{}}:{font:g.metadata,fontSize:this.internal.getFontSize(),charSpace:this.internal.getCharSpace()}}).call(this,e);n=Array.isArray(i)?i:String(i).split(/\r?\n/);var a=1*this.internal.scaleFactor*t/r;s.textIndent=e.textIndent?1*e.textIndent*this.internal.scaleFactor/r:0,s.lineIndent=e.lineIndent;var u,c,h=[];for(u=0,c=n.length;u<c;u++)h=h.concat(uN.apply(this,[n[u],a,s]));return h},(function(i){i.__fontmetrics__=i.__fontmetrics__||{};for(var t="klmnopqrstuvwxyz",e={},n={},r=0;r<t.length;r++)e[t[r]]="0123456789abcdef"[r],n["0123456789abcdef"[r]]=t[r];var s=function(g){return"0x"+parseInt(g,10).toString(16)},a=i.__fontmetrics__.compress=function(g){var m,y,w,S,T=["{"];for(var C in g){if(m=g[C],isNaN(parseInt(C,10))?y="'"+C+"'":(C=parseInt(C,10),y=(y=s(C).slice(2)).slice(0,-1)+n[y.slice(-1)]),typeof m=="number")m<0?(w=s(m).slice(3),S="-"):(w=s(m).slice(2),S=""),w=S+w.slice(0,-1)+n[w.slice(-1)];else{if(Gn(m)!=="object")throw new Error("Don't know what to do with value type "+Gn(m)+".");w=a(m)}T.push(y+w)}return T.push("}"),T.join("")},u=i.__fontmetrics__.uncompress=function(g){if(typeof g!="string")throw new Error("Invalid argument passed to uncompress.");for(var m,y,w,S,T={},C=1,D=T,R=[],I="",F="",q=g.length-1,U=1;U<q;U+=1)(S=g[U])=="'"?m?(w=m.join(""),m=void 0):m=[]:m?m.push(S):S=="{"?(R.push([D,w]),D={},w=void 0):S=="}"?((y=R.pop())[0][y[1]]=D,w=void 0,D=y[0]):S=="-"?C=-1:w===void 0?e.hasOwnProperty(S)?(I+=e[S],w=parseInt(I,16)*C,C=1,I=""):I+=S:e.hasOwnProperty(S)?(F+=e[S],D[w]=parseInt(F,16)*C,C=1,w=void 0,F=""):F+=S;return T},c={codePages:["WinAnsiEncoding"],WinAnsiEncoding:u("{19m8n201n9q201o9r201s9l201t9m201u8m201w9n201x9o201y8o202k8q202l8r202m9p202q8p20aw8k203k8t203t8v203u9v2cq8s212m9t15m8w15n9w2dw9s16k8u16l9u17s9z17x8y17y9y}")},h={Unicode:{Courier:c,"Courier-Bold":c,"Courier-BoldOblique":c,"Courier-Oblique":c,Helvetica:c,"Helvetica-Bold":c,"Helvetica-BoldOblique":c,"Helvetica-Oblique":c,"Times-Roman":c,"Times-Bold":c,"Times-BoldItalic":c,"Times-Italic":c}},f={Unicode:{"Courier-Oblique":u("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-BoldItalic":u("{'widths'{k3o2q4ycx2r201n3m201o6o201s2l201t2l201u2l201w3m201x3m201y3m2k1t2l2r202m2n2n3m2o3m2p5n202q6o2r1w2s2l2t2l2u3m2v3t2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w3t3x3t3y3t3z3m4k5n4l4m4m4m4n4m4o4s4p4m4q4m4r4s4s4y4t2r4u3m4v4m4w3x4x5t4y4s4z4s5k3x5l4s5m4m5n3r5o3x5p4s5q4m5r5t5s4m5t3x5u3x5v2l5w1w5x2l5y3t5z3m6k2l6l3m6m3m6n2w6o3m6p2w6q2l6r3m6s3r6t1w6u1w6v3m6w1w6x4y6y3r6z3m7k3m7l3m7m2r7n2r7o1w7p3r7q2w7r4m7s3m7t2w7u2r7v2n7w1q7x2n7y3t202l3mcl4mal2ram3man3mao3map3mar3mas2lat4uau1uav3maw3way4uaz2lbk2sbl3t'fof'6obo2lbp3tbq3mbr1tbs2lbu1ybv3mbz3mck4m202k3mcm4mcn4mco4mcp4mcq5ycr4mcs4mct4mcu4mcv4mcw2r2m3rcy2rcz2rdl4sdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek3mel3mem3men3meo3mep3meq4ser2wes2wet2weu2wev2wew1wex1wey1wez1wfl3rfm3mfn3mfo3mfp3mfq3mfr3tfs3mft3rfu3rfv3rfw3rfz2w203k6o212m6o2dw2l2cq2l3t3m3u2l17s3x19m3m}'kerning'{cl{4qu5kt5qt5rs17ss5ts}201s{201ss}201t{cks4lscmscnscoscpscls2wu2yu201ts}201x{2wu2yu}2k{201ts}2w{4qx5kx5ou5qx5rs17su5tu}2x{17su5tu5ou}2y{4qx5kx5ou5qx5rs17ss5ts}'fof'-6ofn{17sw5tw5ou5qw5rs}7t{cksclscmscnscoscps4ls}3u{17su5tu5os5qs}3v{17su5tu5os5qs}7p{17su5tu}ck{4qu5kt5qt5rs17ss5ts}4l{4qu5kt5qt5rs17ss5ts}cm{4qu5kt5qt5rs17ss5ts}cn{4qu5kt5qt5rs17ss5ts}co{4qu5kt5qt5rs17ss5ts}cp{4qu5kt5qt5rs17ss5ts}6l{4qu5ou5qw5rt17su5tu}5q{ckuclucmucnucoucpu4lu}5r{ckuclucmucnucoucpu4lu}7q{cksclscmscnscoscps4ls}6p{4qu5ou5qw5rt17sw5tw}ek{4qu5ou5qw5rt17su5tu}el{4qu5ou5qw5rt17su5tu}em{4qu5ou5qw5rt17su5tu}en{4qu5ou5qw5rt17su5tu}eo{4qu5ou5qw5rt17su5tu}ep{4qu5ou5qw5rt17su5tu}es{17ss5ts5qs4qu}et{4qu5ou5qw5rt17sw5tw}eu{4qu5ou5qw5rt17ss5ts}ev{17ss5ts5qs4qu}6z{17sw5tw5ou5qw5rs}fm{17sw5tw5ou5qw5rs}7n{201ts}fo{17sw5tw5ou5qw5rs}fp{17sw5tw5ou5qw5rs}fq{17sw5tw5ou5qw5rs}7r{cksclscmscnscoscps4ls}fs{17sw5tw5ou5qw5rs}ft{17su5tu}fu{17su5tu}fv{17su5tu}fw{17su5tu}fz{cksclscmscnscoscps4ls}}}"),"Helvetica-Bold":u("{'widths'{k3s2q4scx1w201n3r201o6o201s1w201t1w201u1w201w3m201x3m201y3m2k1w2l2l202m2n2n3r2o3r2p5t202q6o2r1s2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v2l3w3u3x3u3y3u3z3x4k6l4l4s4m4s4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3r4v4s4w3x4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v2l5w1w5x2l5y3u5z3r6k2l6l3r6m3x6n3r6o3x6p3r6q2l6r3x6s3x6t1w6u1w6v3r6w1w6x5t6y3x6z3x7k3x7l3x7m2r7n3r7o2l7p3x7q3r7r4y7s3r7t3r7u3m7v2r7w1w7x2r7y3u202l3rcl4sal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3xbq3rbr1wbs2lbu2obv3rbz3xck4s202k3rcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw1w2m2zcy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3res3ret3reu3rev3rew1wex1wey1wez1wfl3xfm3xfn3xfo3xfp3xfq3xfr3ufs3xft3xfu3xfv3xfw3xfz3r203k6o212m6o2dw2l2cq2l3t3r3u2l17s4m19m3r}'kerning'{cl{4qs5ku5ot5qs17sv5tv}201t{2ww4wy2yw}201w{2ks}201x{2ww4wy2yw}2k{201ts201xs}2w{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}2x{5ow5qs}2y{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}'fof'-6o7p{17su5tu5ot}ck{4qs5ku5ot5qs17sv5tv}4l{4qs5ku5ot5qs17sv5tv}cm{4qs5ku5ot5qs17sv5tv}cn{4qs5ku5ot5qs17sv5tv}co{4qs5ku5ot5qs17sv5tv}cp{4qs5ku5ot5qs17sv5tv}6l{17st5tt5os}17s{2kwclvcmvcnvcovcpv4lv4wwckv}5o{2kucltcmtcntcotcpt4lt4wtckt}5q{2ksclscmscnscoscps4ls4wvcks}5r{2ks4ws}5t{2kwclvcmvcnvcovcpv4lv4wwckv}eo{17st5tt5os}fu{17su5tu5ot}6p{17ss5ts}ek{17st5tt5os}el{17st5tt5os}em{17st5tt5os}en{17st5tt5os}6o{201ts}ep{17st5tt5os}es{17ss5ts}et{17ss5ts}eu{17ss5ts}ev{17ss5ts}6z{17su5tu5os5qt}fm{17su5tu5os5qt}fn{17su5tu5os5qt}fo{17su5tu5os5qt}fp{17su5tu5os5qt}fq{17su5tu5os5qt}fs{17su5tu5os5qt}ft{17su5tu5ot}7m{5os}fv{17su5tu5ot}fw{17su5tu5ot}}}"),Courier:u("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Courier-BoldOblique":u("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-Bold":u("{'widths'{k3q2q5ncx2r201n3m201o6o201s2l201t2l201u2l201w3m201x3m201y3m2k1t2l2l202m2n2n3m2o3m2p6o202q6o2r1w2s2l2t2l2u3m2v3t2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w3t3x3t3y3t3z3m4k5x4l4s4m4m4n4s4o4s4p4m4q3x4r4y4s4y4t2r4u3m4v4y4w4m4x5y4y4s4z4y5k3x5l4y5m4s5n3r5o4m5p4s5q4s5r6o5s4s5t4s5u4m5v2l5w1w5x2l5y3u5z3m6k2l6l3m6m3r6n2w6o3r6p2w6q2l6r3m6s3r6t1w6u2l6v3r6w1w6x5n6y3r6z3m7k3r7l3r7m2w7n2r7o2l7p3r7q3m7r4s7s3m7t3m7u2w7v2r7w1q7x2r7y3o202l3mcl4sal2lam3man3mao3map3mar3mas2lat4uau1yav3maw3tay4uaz2lbk2sbl3t'fof'6obo2lbp3rbr1tbs2lbu2lbv3mbz3mck4s202k3mcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw2r2m3rcy2rcz2rdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3rek3mel3mem3men3meo3mep3meq4ser2wes2wet2weu2wev2wew1wex1wey1wez1wfl3rfm3mfn3mfo3mfp3mfq3mfr3tfs3mft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3m3u2l17s4s19m3m}'kerning'{cl{4qt5ks5ot5qy5rw17sv5tv}201t{cks4lscmscnscoscpscls4wv}2k{201ts}2w{4qu5ku7mu5os5qx5ru17su5tu}2x{17su5tu5ou5qs}2y{4qv5kv7mu5ot5qz5ru17su5tu}'fof'-6o7t{cksclscmscnscoscps4ls}3u{17su5tu5os5qu}3v{17su5tu5os5qu}fu{17su5tu5ou5qu}7p{17su5tu5ou5qu}ck{4qt5ks5ot5qy5rw17sv5tv}4l{4qt5ks5ot5qy5rw17sv5tv}cm{4qt5ks5ot5qy5rw17sv5tv}cn{4qt5ks5ot5qy5rw17sv5tv}co{4qt5ks5ot5qy5rw17sv5tv}cp{4qt5ks5ot5qy5rw17sv5tv}6l{17st5tt5ou5qu}17s{ckuclucmucnucoucpu4lu4wu}5o{ckuclucmucnucoucpu4lu4wu}5q{ckzclzcmzcnzcozcpz4lz4wu}5r{ckxclxcmxcnxcoxcpx4lx4wu}5t{ckuclucmucnucoucpu4lu4wu}7q{ckuclucmucnucoucpu4lu}6p{17sw5tw5ou5qu}ek{17st5tt5qu}el{17st5tt5ou5qu}em{17st5tt5qu}en{17st5tt5qu}eo{17st5tt5qu}ep{17st5tt5ou5qu}es{17ss5ts5qu}et{17sw5tw5ou5qu}eu{17sw5tw5ou5qu}ev{17ss5ts5qu}6z{17sw5tw5ou5qu5rs}fm{17sw5tw5ou5qu5rs}fn{17sw5tw5ou5qu5rs}fo{17sw5tw5ou5qu5rs}fp{17sw5tw5ou5qu5rs}fq{17sw5tw5ou5qu5rs}7r{cktcltcmtcntcotcpt4lt5os}fs{17sw5tw5ou5qu5rs}ft{17su5tu5ou5qu}7m{5os}fv{17su5tu5ou5qu}fw{17su5tu5ou5qu}fz{cksclscmscnscoscps4ls}}}"),Symbol:u("{'widths'{k3uaw4r19m3m2k1t2l2l202m2y2n3m2p5n202q6o3k3m2s2l2t2l2v3r2w1t3m3m2y1t2z1wbk2sbl3r'fof'6o3n3m3o3m3p3m3q3m3r3m3s3m3t3m3u1w3v1w3w3r3x3r3y3r3z2wbp3t3l3m5v2l5x2l5z3m2q4yfr3r7v3k7w1o7x3k}'kerning'{'fof'-6o}}"),Helvetica:u("{'widths'{k3p2q4mcx1w201n3r201o6o201s1q201t1q201u1q201w2l201x2l201y2l2k1w2l1w202m2n2n3r2o3r2p5t202q6o2r1n2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v1w3w3u3x3u3y3u3z3r4k6p4l4m4m4m4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3m4v4m4w3r4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v1w5w1w5x1w5y2z5z3r6k2l6l3r6m3r6n3m6o3r6p3r6q1w6r3r6s3r6t1q6u1q6v3m6w1q6x5n6y3r6z3r7k3r7l3r7m2l7n3m7o1w7p3r7q3m7r4s7s3m7t3m7u3m7v2l7w1u7x2l7y3u202l3rcl4mal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3rbr1wbs2lbu2obv3rbz3xck4m202k3rcm4mcn4mco4mcp4mcq6ocr4scs4mct4mcu4mcv4mcw1w2m2ncy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3mes3ret3reu3rev3rew1wex1wey1wez1wfl3rfm3rfn3rfo3rfp3rfq3rfr3ufs3xft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3r3u1w17s4m19m3r}'kerning'{5q{4wv}cl{4qs5kw5ow5qs17sv5tv}201t{2wu4w1k2yu}201x{2wu4wy2yu}17s{2ktclucmucnu4otcpu4lu4wycoucku}2w{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}2x{17sy5ty5oy5qs}2y{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}'fof'-6o7p{17sv5tv5ow}ck{4qs5kw5ow5qs17sv5tv}4l{4qs5kw5ow5qs17sv5tv}cm{4qs5kw5ow5qs17sv5tv}cn{4qs5kw5ow5qs17sv5tv}co{4qs5kw5ow5qs17sv5tv}cp{4qs5kw5ow5qs17sv5tv}6l{17sy5ty5ow}do{17st5tt}4z{17st5tt}7s{fst}dm{17st5tt}dn{17st5tt}5o{ckwclwcmwcnwcowcpw4lw4wv}dp{17st5tt}dq{17st5tt}7t{5ow}ds{17st5tt}5t{2ktclucmucnu4otcpu4lu4wycoucku}fu{17sv5tv5ow}6p{17sy5ty5ow5qs}ek{17sy5ty5ow}el{17sy5ty5ow}em{17sy5ty5ow}en{5ty}eo{17sy5ty5ow}ep{17sy5ty5ow}es{17sy5ty5qs}et{17sy5ty5ow5qs}eu{17sy5ty5ow5qs}ev{17sy5ty5ow5qs}6z{17sy5ty5ow5qs}fm{17sy5ty5ow5qs}fn{17sy5ty5ow5qs}fo{17sy5ty5ow5qs}fp{17sy5ty5qs}fq{17sy5ty5ow5qs}7r{5ow}fs{17sy5ty5ow5qs}ft{17sv5tv5ow}7m{5ow}fv{17sv5tv5ow}fw{17sv5tv5ow}}}"),"Helvetica-BoldOblique":u("{'widths'{k3s2q4scx1w201n3r201o6o201s1w201t1w201u1w201w3m201x3m201y3m2k1w2l2l202m2n2n3r2o3r2p5t202q6o2r1s2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v2l3w3u3x3u3y3u3z3x4k6l4l4s4m4s4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3r4v4s4w3x4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v2l5w1w5x2l5y3u5z3r6k2l6l3r6m3x6n3r6o3x6p3r6q2l6r3x6s3x6t1w6u1w6v3r6w1w6x5t6y3x6z3x7k3x7l3x7m2r7n3r7o2l7p3x7q3r7r4y7s3r7t3r7u3m7v2r7w1w7x2r7y3u202l3rcl4sal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3xbq3rbr1wbs2lbu2obv3rbz3xck4s202k3rcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw1w2m2zcy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3res3ret3reu3rev3rew1wex1wey1wez1wfl3xfm3xfn3xfo3xfp3xfq3xfr3ufs3xft3xfu3xfv3xfw3xfz3r203k6o212m6o2dw2l2cq2l3t3r3u2l17s4m19m3r}'kerning'{cl{4qs5ku5ot5qs17sv5tv}201t{2ww4wy2yw}201w{2ks}201x{2ww4wy2yw}2k{201ts201xs}2w{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}2x{5ow5qs}2y{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}'fof'-6o7p{17su5tu5ot}ck{4qs5ku5ot5qs17sv5tv}4l{4qs5ku5ot5qs17sv5tv}cm{4qs5ku5ot5qs17sv5tv}cn{4qs5ku5ot5qs17sv5tv}co{4qs5ku5ot5qs17sv5tv}cp{4qs5ku5ot5qs17sv5tv}6l{17st5tt5os}17s{2kwclvcmvcnvcovcpv4lv4wwckv}5o{2kucltcmtcntcotcpt4lt4wtckt}5q{2ksclscmscnscoscps4ls4wvcks}5r{2ks4ws}5t{2kwclvcmvcnvcovcpv4lv4wwckv}eo{17st5tt5os}fu{17su5tu5ot}6p{17ss5ts}ek{17st5tt5os}el{17st5tt5os}em{17st5tt5os}en{17st5tt5os}6o{201ts}ep{17st5tt5os}es{17ss5ts}et{17ss5ts}eu{17ss5ts}ev{17ss5ts}6z{17su5tu5os5qt}fm{17su5tu5os5qt}fn{17su5tu5os5qt}fo{17su5tu5os5qt}fp{17su5tu5os5qt}fq{17su5tu5os5qt}fs{17su5tu5os5qt}ft{17su5tu5ot}7m{5os}fv{17su5tu5ot}fw{17su5tu5ot}}}"),ZapfDingbats:u("{'widths'{k4u2k1w'fof'6o}'kerning'{'fof'-6o}}"),"Courier-Bold":u("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-Italic":u("{'widths'{k3n2q4ycx2l201n3m201o5t201s2l201t2l201u2l201w3r201x3r201y3r2k1t2l2l202m2n2n3m2o3m2p5n202q5t2r1p2s2l2t2l2u3m2v4n2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w4n3x4n3y4n3z3m4k5w4l3x4m3x4n4m4o4s4p3x4q3x4r4s4s4s4t2l4u2w4v4m4w3r4x5n4y4m4z4s5k3x5l4s5m3x5n3m5o3r5p4s5q3x5r5n5s3x5t3r5u3r5v2r5w1w5x2r5y2u5z3m6k2l6l3m6m3m6n2w6o3m6p2w6q1w6r3m6s3m6t1w6u1w6v2w6w1w6x4s6y3m6z3m7k3m7l3m7m2r7n2r7o1w7p3m7q2w7r4m7s2w7t2w7u2r7v2s7w1v7x2s7y3q202l3mcl3xal2ram3man3mao3map3mar3mas2lat4wau1vav3maw4nay4waz2lbk2sbl4n'fof'6obo2lbp3mbq3obr1tbs2lbu1zbv3mbz3mck3x202k3mcm3xcn3xco3xcp3xcq5tcr4mcs3xct3xcu3xcv3xcw2l2m2ucy2lcz2ldl4mdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek3mel3mem3men3meo3mep3meq4mer2wes2wet2weu2wev2wew1wex1wey1wez1wfl3mfm3mfn3mfo3mfp3mfq3mfr4nfs3mft3mfu3mfv3mfw3mfz2w203k6o212m6m2dw2l2cq2l3t3m3u2l17s3r19m3m}'kerning'{cl{5kt4qw}201s{201sw}201t{201tw2wy2yy6q-t}201x{2wy2yy}2k{201tw}2w{7qs4qy7rs5ky7mw5os5qx5ru17su5tu}2x{17ss5ts5os}2y{7qs4qy7rs5ky7mw5os5qx5ru17su5tu}'fof'-6o6t{17ss5ts5qs}7t{5os}3v{5qs}7p{17su5tu5qs}ck{5kt4qw}4l{5kt4qw}cm{5kt4qw}cn{5kt4qw}co{5kt4qw}cp{5kt4qw}6l{4qs5ks5ou5qw5ru17su5tu}17s{2ks}5q{ckvclvcmvcnvcovcpv4lv}5r{ckuclucmucnucoucpu4lu}5t{2ks}6p{4qs5ks5ou5qw5ru17su5tu}ek{4qs5ks5ou5qw5ru17su5tu}el{4qs5ks5ou5qw5ru17su5tu}em{4qs5ks5ou5qw5ru17su5tu}en{4qs5ks5ou5qw5ru17su5tu}eo{4qs5ks5ou5qw5ru17su5tu}ep{4qs5ks5ou5qw5ru17su5tu}es{5ks5qs4qs}et{4qs5ks5ou5qw5ru17su5tu}eu{4qs5ks5qw5ru17su5tu}ev{5ks5qs4qs}ex{17ss5ts5qs}6z{4qv5ks5ou5qw5ru17su5tu}fm{4qv5ks5ou5qw5ru17su5tu}fn{4qv5ks5ou5qw5ru17su5tu}fo{4qv5ks5ou5qw5ru17su5tu}fp{4qv5ks5ou5qw5ru17su5tu}fq{4qv5ks5ou5qw5ru17su5tu}7r{5os}fs{4qv5ks5ou5qw5ru17su5tu}ft{17su5tu5qs}fu{17su5tu5qs}fv{17su5tu5qs}fw{17su5tu5qs}}}"),"Times-Roman":u("{'widths'{k3n2q4ycx2l201n3m201o6o201s2l201t2l201u2l201w2w201x2w201y2w2k1t2l2l202m2n2n3m2o3m2p5n202q6o2r1m2s2l2t2l2u3m2v3s2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v1w3w3s3x3s3y3s3z2w4k5w4l4s4m4m4n4m4o4s4p3x4q3r4r4s4s4s4t2l4u2r4v4s4w3x4x5t4y4s4z4s5k3r5l4s5m4m5n3r5o3x5p4s5q4s5r5y5s4s5t4s5u3x5v2l5w1w5x2l5y2z5z3m6k2l6l2w6m3m6n2w6o3m6p2w6q2l6r3m6s3m6t1w6u1w6v3m6w1w6x4y6y3m6z3m7k3m7l3m7m2l7n2r7o1w7p3m7q3m7r4s7s3m7t3m7u2w7v3k7w1o7x3k7y3q202l3mcl4sal2lam3man3mao3map3mar3mas2lat4wau1vav3maw3say4waz2lbk2sbl3s'fof'6obo2lbp3mbq2xbr1tbs2lbu1zbv3mbz2wck4s202k3mcm4scn4sco4scp4scq5tcr4mcs3xct3xcu3xcv3xcw2l2m2tcy2lcz2ldl4sdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek2wel2wem2wen2weo2wep2weq4mer2wes2wet2weu2wev2wew1wex1wey1wez1wfl3mfm3mfn3mfo3mfp3mfq3mfr3sfs3mft3mfu3mfv3mfw3mfz3m203k6o212m6m2dw2l2cq2l3t3m3u1w17s4s19m3m}'kerning'{cl{4qs5ku17sw5ou5qy5rw201ss5tw201ws}201s{201ss}201t{ckw4lwcmwcnwcowcpwclw4wu201ts}2k{201ts}2w{4qs5kw5os5qx5ru17sx5tx}2x{17sw5tw5ou5qu}2y{4qs5kw5os5qx5ru17sx5tx}'fof'-6o7t{ckuclucmucnucoucpu4lu5os5rs}3u{17su5tu5qs}3v{17su5tu5qs}7p{17sw5tw5qs}ck{4qs5ku17sw5ou5qy5rw201ss5tw201ws}4l{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cm{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cn{4qs5ku17sw5ou5qy5rw201ss5tw201ws}co{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cp{4qs5ku17sw5ou5qy5rw201ss5tw201ws}6l{17su5tu5os5qw5rs}17s{2ktclvcmvcnvcovcpv4lv4wuckv}5o{ckwclwcmwcnwcowcpw4lw4wu}5q{ckyclycmycnycoycpy4ly4wu5ms}5r{cktcltcmtcntcotcpt4lt4ws}5t{2ktclvcmvcnvcovcpv4lv4wuckv}7q{cksclscmscnscoscps4ls}6p{17su5tu5qw5rs}ek{5qs5rs}el{17su5tu5os5qw5rs}em{17su5tu5os5qs5rs}en{17su5qs5rs}eo{5qs5rs}ep{17su5tu5os5qw5rs}es{5qs}et{17su5tu5qw5rs}eu{17su5tu5qs5rs}ev{5qs}6z{17sv5tv5os5qx5rs}fm{5os5qt5rs}fn{17sv5tv5os5qx5rs}fo{17sv5tv5os5qx5rs}fp{5os5qt5rs}fq{5os5qt5rs}7r{ckuclucmucnucoucpu4lu5os}fs{17sv5tv5os5qx5rs}ft{17ss5ts5qs}fu{17sw5tw5qs}fv{17sw5tw5qs}fw{17ss5ts5qs}fz{ckuclucmucnucoucpu4lu5os5rs}}}"),"Helvetica-Oblique":u("{'widths'{k3p2q4mcx1w201n3r201o6o201s1q201t1q201u1q201w2l201x2l201y2l2k1w2l1w202m2n2n3r2o3r2p5t202q6o2r1n2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v1w3w3u3x3u3y3u3z3r4k6p4l4m4m4m4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3m4v4m4w3r4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v1w5w1w5x1w5y2z5z3r6k2l6l3r6m3r6n3m6o3r6p3r6q1w6r3r6s3r6t1q6u1q6v3m6w1q6x5n6y3r6z3r7k3r7l3r7m2l7n3m7o1w7p3r7q3m7r4s7s3m7t3m7u3m7v2l7w1u7x2l7y3u202l3rcl4mal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3rbr1wbs2lbu2obv3rbz3xck4m202k3rcm4mcn4mco4mcp4mcq6ocr4scs4mct4mcu4mcv4mcw1w2m2ncy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3mes3ret3reu3rev3rew1wex1wey1wez1wfl3rfm3rfn3rfo3rfp3rfq3rfr3ufs3xft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3r3u1w17s4m19m3r}'kerning'{5q{4wv}cl{4qs5kw5ow5qs17sv5tv}201t{2wu4w1k2yu}201x{2wu4wy2yu}17s{2ktclucmucnu4otcpu4lu4wycoucku}2w{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}2x{17sy5ty5oy5qs}2y{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}'fof'-6o7p{17sv5tv5ow}ck{4qs5kw5ow5qs17sv5tv}4l{4qs5kw5ow5qs17sv5tv}cm{4qs5kw5ow5qs17sv5tv}cn{4qs5kw5ow5qs17sv5tv}co{4qs5kw5ow5qs17sv5tv}cp{4qs5kw5ow5qs17sv5tv}6l{17sy5ty5ow}do{17st5tt}4z{17st5tt}7s{fst}dm{17st5tt}dn{17st5tt}5o{ckwclwcmwcnwcowcpw4lw4wv}dp{17st5tt}dq{17st5tt}7t{5ow}ds{17st5tt}5t{2ktclucmucnu4otcpu4lu4wycoucku}fu{17sv5tv5ow}6p{17sy5ty5ow5qs}ek{17sy5ty5ow}el{17sy5ty5ow}em{17sy5ty5ow}en{5ty}eo{17sy5ty5ow}ep{17sy5ty5ow}es{17sy5ty5qs}et{17sy5ty5ow5qs}eu{17sy5ty5ow5qs}ev{17sy5ty5ow5qs}6z{17sy5ty5ow5qs}fm{17sy5ty5ow5qs}fn{17sy5ty5ow5qs}fo{17sy5ty5ow5qs}fp{17sy5ty5qs}fq{17sy5ty5ow5qs}7r{5ow}fs{17sy5ty5ow5qs}ft{17sv5tv5ow}7m{5ow}fv{17sv5tv5ow}fw{17sv5tv5ow}}}")}};i.events.push(["addFont",function(g){var m=g.font,y=f.Unicode[m.postScriptName];y&&(m.metadata.Unicode={},m.metadata.Unicode.widths=y.widths,m.metadata.Unicode.kerning=y.kerning);var w=h.Unicode[m.postScriptName];w&&(m.metadata.Unicode.encoding=w,m.encoding=w.codePages[0])}])})(Ie.API),(function(i){var t=function(e){for(var n=e.length,r=new Uint8Array(n),s=0;s<n;s++)r[s]=e.charCodeAt(s);return r};i.API.events.push(["addFont",function(e){var n=void 0,r=e.font,s=e.instance;if(!r.isStandardFont){if(s===void 0)throw new Error("Font does not exist in vFS, import fonts or remove declaration doc.addFont('"+r.postScriptName+"').");if(typeof(n=s.existsFileInVFS(r.postScriptName)===!1?s.loadFile(r.postScriptName):s.getFileFromVFS(r.postScriptName))!="string")throw new Error("Font is not stored as string-data in vFS, import fonts or remove declaration doc.addFont('"+r.postScriptName+"').");(function(a,u){u=/^\x00\x01\x00\x00/.test(u)?t(u):t(i2(u)),a.metadata=i.API.TTFFont.open(u),a.metadata.Unicode=a.metadata.Unicode||{encoding:{},kerning:{},widths:[]},a.metadata.glyIdsUsed=[0]})(r,n)}}])})(Ie),(function(i){function t(){return(Pe.canvg?Promise.resolve(Pe.canvg):RE(()=>import("./index.es-qL7-fIQ6.js"),[])).catch((function(e){return Promise.reject(new Error("Could not load canvg: "+e))})).then((function(e){return e.default?e.default:e}))}Ie.API.addSvgAsImage=function(e,n,r,s,a,u,c,h){if(isNaN(n)||isNaN(r))throw ai.error("jsPDF.addSvgAsImage: Invalid coordinates",arguments),new Error("Invalid coordinates passed to jsPDF.addSvgAsImage");if(isNaN(s)||isNaN(a))throw ai.error("jsPDF.addSvgAsImage: Invalid measurements",arguments),new Error("Invalid measurements (width and/or height) passed to jsPDF.addSvgAsImage");var f=document.createElement("canvas");f.width=s,f.height=a;var g=f.getContext("2d");g.fillStyle="#fff",g.fillRect(0,0,f.width,f.height);var m={ignoreMouse:!0,ignoreAnimation:!0,ignoreDimensions:!0},y=this;return t().then((function(w){return w.fromString(g,e,m)}),(function(){return Promise.reject(new Error("Could not load canvg."))})).then((function(w){return w.render(m)})).then((function(){y.addImage(f.toDataURL("image/jpeg",1),n,r,s,a,c,h)}))}})(),Ie.API.putTotalPages=function(i){var t,e=0;parseInt(this.internal.getFont().id.substr(1),10)<15?(t=new RegExp(i,"g"),e=this.internal.getNumberOfPages()):(t=new RegExp(this.pdfEscape16(i,this.internal.getFont()),"g"),e=this.pdfEscape16(this.internal.getNumberOfPages()+"",this.internal.getFont()));for(var n=1;n<=this.internal.getNumberOfPages();n++)for(var r=0;r<this.internal.pages[n].length;r++)this.internal.pages[n][r]=this.internal.pages[n][r].replace(t,e);return this},Ie.API.viewerPreferences=function(i,t){var e;i=i||{},t=t||!1;var n,r,s,a={HideToolbar:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},HideMenubar:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},HideWindowUI:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},FitWindow:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},CenterWindow:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},DisplayDocTitle:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.4},NonFullScreenPageMode:{defaultValue:"UseNone",value:"UseNone",type:"name",explicitSet:!1,valueSet:["UseNone","UseOutlines","UseThumbs","UseOC"],pdfVersion:1.3},Direction:{defaultValue:"L2R",value:"L2R",type:"name",explicitSet:!1,valueSet:["L2R","R2L"],pdfVersion:1.3},ViewArea:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},ViewClip:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},PrintArea:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},PrintClip:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},PrintScaling:{defaultValue:"AppDefault",value:"AppDefault",type:"name",explicitSet:!1,valueSet:["AppDefault","None"],pdfVersion:1.6},Duplex:{defaultValue:"",value:"none",type:"name",explicitSet:!1,valueSet:["Simplex","DuplexFlipShortEdge","DuplexFlipLongEdge","none"],pdfVersion:1.7},PickTrayByPDFSize:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.7},PrintPageRange:{defaultValue:"",value:"",type:"array",explicitSet:!1,valueSet:null,pdfVersion:1.7},NumCopies:{defaultValue:1,value:1,type:"integer",explicitSet:!1,valueSet:null,pdfVersion:1.7}},u=Object.keys(a),c=[],h=0,f=0,g=0;function m(w,S){var T,C=!1;for(T=0;T<w.length;T+=1)w[T]===S&&(C=!0);return C}if(this.internal.viewerpreferences===void 0&&(this.internal.viewerpreferences={},this.internal.viewerpreferences.configuration=JSON.parse(JSON.stringify(a)),this.internal.viewerpreferences.isSubscribed=!1),e=this.internal.viewerpreferences.configuration,i==="reset"||t===!0){var y=u.length;for(g=0;g<y;g+=1)e[u[g]].value=e[u[g]].defaultValue,e[u[g]].explicitSet=!1}if(Gn(i)==="object"){for(r in i)if(s=i[r],m(u,r)&&s!==void 0){if(e[r].type==="boolean"&&typeof s=="boolean")e[r].value=s;else if(e[r].type==="name"&&m(e[r].valueSet,s))e[r].value=s;else if(e[r].type==="integer"&&Number.isInteger(s))e[r].value=s;else if(e[r].type==="array"){for(h=0;h<s.length;h+=1)if(n=!0,s[h].length===1&&typeof s[h][0]=="number")c.push(String(s[h]-1));else if(s[h].length>1){for(f=0;f<s[h].length;f+=1)typeof s[h][f]!="number"&&(n=!1);n===!0&&c.push([s[h][0]-1,s[h][1]-1].join(" "))}e[r].value="["+c.join(" ")+"]"}else e[r].value=e[r].defaultValue;e[r].explicitSet=!0}}return this.internal.viewerpreferences.isSubscribed===!1&&(this.internal.events.subscribe("putCatalog",(function(){var w,S=[];for(w in e)e[w].explicitSet===!0&&(e[w].type==="name"?S.push("/"+w+" /"+e[w].value):S.push("/"+w+" "+e[w].value));S.length!==0&&this.internal.write(`/ViewerPreferences
<<
`+S.join(`
`)+`
>>`)})),this.internal.viewerpreferences.isSubscribed=!0),this.internal.viewerpreferences.configuration=e,this},(function(i){var t=function(){var n='<rdf:RDF xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#"><rdf:Description rdf:about="" xmlns:jspdf="'+this.internal.__metadata__.namespaceuri+'"><jspdf:metadata>',r=unescape(encodeURIComponent('<x:xmpmeta xmlns:x="adobe:ns:meta/">')),s=unescape(encodeURIComponent(n)),a=unescape(encodeURIComponent(this.internal.__metadata__.metadata)),u=unescape(encodeURIComponent("</jspdf:metadata></rdf:Description></rdf:RDF>")),c=unescape(encodeURIComponent("</x:xmpmeta>")),h=s.length+a.length+u.length+r.length+c.length;this.internal.__metadata__.metadata_object_number=this.internal.newObject(),this.internal.write("<< /Type /Metadata /Subtype /XML /Length "+h+" >>"),this.internal.write("stream"),this.internal.write(r+s+a+u+c),this.internal.write("endstream"),this.internal.write("endobj")},e=function(){this.internal.__metadata__.metadata_object_number&&this.internal.write("/Metadata "+this.internal.__metadata__.metadata_object_number+" 0 R")};i.addMetadata=function(n,r){return this.internal.__metadata__===void 0&&(this.internal.__metadata__={metadata:n,namespaceuri:r||"http://jspdf.default.namespaceuri/"},this.internal.events.subscribe("putCatalog",e),this.internal.events.subscribe("postPutResources",t)),this}})(Ie.API),(function(i){var t=i.API,e=t.pdfEscape16=function(s,a){for(var u,c=a.metadata.Unicode.widths,h=["","0","00","000","0000"],f=[""],g=0,m=s.length;g<m;++g){if(u=a.metadata.characterToGlyph(s.charCodeAt(g)),a.metadata.glyIdsUsed.push(u),a.metadata.toUnicode[u]=s.charCodeAt(g),c.indexOf(u)==-1&&(c.push(u),c.push([parseInt(a.metadata.widthOfGlyph(u),10)])),u=="0")return f.join("");u=u.toString(16),f.push(h[4-u.length],u)}return f.join("")},n=function(s){var a,u,c,h,f,g,m;for(f=`/CIDInit /ProcSet findresource begin
12 dict begin
begincmap
/CIDSystemInfo <<
  /Registry (Adobe)
  /Ordering (UCS)
  /Supplement 0
>> def
/CMapName /Adobe-Identity-UCS def
/CMapType 2 def
1 begincodespacerange
<0000><ffff>
endcodespacerange`,c=[],g=0,m=(u=Object.keys(s).sort((function(y,w){return y-w}))).length;g<m;g++)a=u[g],c.length>=100&&(f+=`
`+c.length+` beginbfchar
`+c.join(`
`)+`
endbfchar`,c=[]),s[a]!==void 0&&s[a]!==null&&typeof s[a].toString=="function"&&(h=("0000"+s[a].toString(16)).slice(-4),a=("0000"+(+a).toString(16)).slice(-4),c.push("<"+a+"><"+h+">"));return c.length&&(f+=`
`+c.length+` beginbfchar
`+c.join(`
`)+`
endbfchar
`),f+=`endcmap
CMapName currentdict /CMap defineresource pop
end
end`};t.events.push(["putFont",function(s){(function(a){var u=a.font,c=a.out,h=a.newObject,f=a.putStream;if(u.metadata instanceof i.API.TTFFont&&u.encoding==="Identity-H"){for(var g=u.metadata.Unicode.widths,m=u.metadata.subset.encode(u.metadata.glyIdsUsed,1),y="",w=0;w<m.length;w++)y+=String.fromCharCode(m[w]);var S=h();f({data:y,addLength1:!0,objectId:S}),c("endobj");var T=h();f({data:n(u.metadata.toUnicode),addLength1:!0,objectId:T}),c("endobj");var C=h();c("<<"),c("/Type /FontDescriptor"),c("/FontName /"+Xg(u.fontName)),c("/FontFile2 "+S+" 0 R"),c("/FontBBox "+i.API.PDFObject.convert(u.metadata.bbox)),c("/Flags "+u.metadata.flags),c("/StemV "+u.metadata.stemV),c("/ItalicAngle "+u.metadata.italicAngle),c("/Ascent "+u.metadata.ascender),c("/Descent "+u.metadata.decender),c("/CapHeight "+u.metadata.capHeight),c(">>"),c("endobj");var D=h();c("<<"),c("/Type /Font"),c("/BaseFont /"+Xg(u.fontName)),c("/FontDescriptor "+C+" 0 R"),c("/W "+i.API.PDFObject.convert(g)),c("/CIDToGIDMap /Identity"),c("/DW 1000"),c("/Subtype /CIDFontType2"),c("/CIDSystemInfo"),c("<<"),c("/Supplement 0"),c("/Registry (Adobe)"),c("/Ordering ("+u.encoding+")"),c(">>"),c(">>"),c("endobj"),u.objectNumber=h(),c("<<"),c("/Type /Font"),c("/Subtype /Type0"),c("/ToUnicode "+T+" 0 R"),c("/BaseFont /"+Xg(u.fontName)),c("/Encoding /"+u.encoding),c("/DescendantFonts ["+D+" 0 R]"),c(">>"),c("endobj"),u.isAlreadyPutted=!0}})(s)}]),t.events.push(["putFont",function(s){(function(a){var u=a.font,c=a.out,h=a.newObject,f=a.putStream;if(u.metadata instanceof i.API.TTFFont&&u.encoding==="WinAnsiEncoding"){for(var g=u.metadata.rawData,m="",y=0;y<g.length;y++)m+=String.fromCharCode(g[y]);var w=h();f({data:m,addLength1:!0,objectId:w}),c("endobj");var S=h();f({data:n(u.metadata.toUnicode),addLength1:!0,objectId:S}),c("endobj");var T=h();c("<<"),c("/Descent "+u.metadata.decender),c("/CapHeight "+u.metadata.capHeight),c("/StemV "+u.metadata.stemV),c("/Type /FontDescriptor"),c("/FontFile2 "+w+" 0 R"),c("/Flags 96"),c("/FontBBox "+i.API.PDFObject.convert(u.metadata.bbox)),c("/FontName /"+Xg(u.fontName)),c("/ItalicAngle "+u.metadata.italicAngle),c("/Ascent "+u.metadata.ascender),c(">>"),c("endobj"),u.objectNumber=h();for(var C=0;C<u.metadata.hmtx.widths.length;C++)u.metadata.hmtx.widths[C]=parseInt(u.metadata.hmtx.widths[C]*(1e3/u.metadata.head.unitsPerEm));c("<</Subtype/TrueType/Type/Font/ToUnicode "+S+" 0 R/BaseFont/"+Xg(u.fontName)+"/FontDescriptor "+T+" 0 R/Encoding/"+u.encoding+" /FirstChar 29 /LastChar 255 /Widths "+i.API.PDFObject.convert(u.metadata.hmtx.widths)+">>"),c("endobj"),u.isAlreadyPutted=!0}})(s)}]);var r=function(s){var a,u=s.text||"",c=s.x,h=s.y,f=s.options||{},g=s.mutex||{},m=g.pdfEscape,y=g.activeFontKey,w=g.fonts,S=y,T="",C=0,D="",R=w[S].encoding;if(w[S].encoding!=="Identity-H")return{text:u,x:c,y:h,options:f,mutex:g};for(D=u,S=y,Array.isArray(u)&&(D=u[0]),C=0;C<D.length;C+=1)w[S].metadata.hasOwnProperty("cmap")&&(a=w[S].metadata.cmap.unicode.codeMap[D[C].charCodeAt(0)]),a||D[C].charCodeAt(0)<256&&w[S].metadata.hasOwnProperty("Unicode")?T+=D[C]:T+="";var I="";return parseInt(S.slice(1))<14||R==="WinAnsiEncoding"?I=m(T,S).split("").map((function(F){return F.charCodeAt(0).toString(16)})).join(""):R==="Identity-H"&&(I=e(T,w[S])),g.isHex=!0,{text:I,x:c,y:h,options:f,mutex:g}};t.events.push(["postProcessText",function(s){var a=s.text||"",u=[],c={text:a,x:s.x,y:s.y,options:s.options,mutex:s.mutex};if(Array.isArray(a)){var h=0;for(h=0;h<a.length;h+=1)Array.isArray(a[h])&&a[h].length===3?u.push([r(Object.assign({},c,{text:a[h][0]})).text,a[h][1],a[h][2]]):u.push(r(Object.assign({},c,{text:a[h]})).text);s.text=u}else s.text=r(Object.assign({},c,{text:a})).text}])})(Ie),(function(i){var t=function(){return this.internal.vFS===void 0&&(this.internal.vFS={}),!0};i.existsFileInVFS=function(e){return t.call(this),this.internal.vFS[e]!==void 0},i.addFileToVFS=function(e,n){return t.call(this),this.internal.vFS[e]=n,this},i.getFileFromVFS=function(e){return t.call(this),this.internal.vFS[e]!==void 0?this.internal.vFS[e]:null}})(Ie.API),(function(i){i.__bidiEngine__=i.prototype.__bidiEngine__=function(n){var r,s,a,u,c,h,f,g=t,m=[[0,3,0,1,0,0,0],[0,3,0,1,2,2,0],[0,3,0,17,2,0,1],[0,3,5,5,4,1,0],[0,3,21,21,4,0,1],[0,3,5,5,4,2,0]],y=[[2,0,1,1,0,1,0],[2,0,1,1,0,2,0],[2,0,2,1,3,2,0],[2,0,2,33,3,1,1]],w={L:0,R:1,EN:2,AN:3,N:4,B:5,S:6},S={0:0,5:1,6:2,7:3,32:4,251:5,254:6,255:7},T=["(",")","(","<",">","<","[","]","[","{","}","{","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","",""],C=new RegExp(/^([1-4|9]|1[0-9]|2[0-9]|3[0168]|4[04589]|5[012]|7[78]|159|16[0-9]|17[0-2]|21[569]|22[03489]|250)$/),D=!1,R=0;this.__bidiEngine__={};var I=function(O){var G=O.charCodeAt(),et=G>>8,st=S[et];return st!==void 0?g[256*st+(255&G)]:et===252||et===253?"AL":C.test(et)?"L":et===8?"R":"N"},F=function(O){for(var G,et=0;et<O.length;et++){if((G=I(O.charAt(et)))==="L")return!1;if(G==="R")return!0}return!1},q=function(O,G,et,st){var pt,nt,at,ht,bt=G[st];switch(bt){case"L":case"R":D=!1;break;case"N":case"AN":break;case"EN":D&&(bt="AN");break;case"AL":D=!0,bt="R";break;case"WS":bt="N";break;case"CS":st<1||st+1>=G.length||(pt=et[st-1])!=="EN"&&pt!=="AN"||(nt=G[st+1])!=="EN"&&nt!=="AN"?bt="N":D&&(nt="AN"),bt=nt===pt?nt:"N";break;case"ES":bt=(pt=st>0?et[st-1]:"B")==="EN"&&st+1<G.length&&G[st+1]==="EN"?"EN":"N";break;case"ET":if(st>0&&et[st-1]==="EN"){bt="EN";break}if(D){bt="N";break}for(at=st+1,ht=G.length;at<ht&&G[at]==="ET";)at++;bt=at<ht&&G[at]==="EN"?"EN":"N";break;case"NSM":if(a&&!u){for(ht=G.length,at=st+1;at<ht&&G[at]==="NSM";)at++;if(at<ht){var St=O[st],K=St>=1425&&St<=2303||St===64286;if(pt=G[at],K&&(pt==="R"||pt==="AL")){bt="R";break}}}bt=st<1||(pt=G[st-1])==="B"?"N":et[st-1];break;case"B":D=!1,r=!0,bt=R;break;case"S":s=!0,bt="N";break;case"LRE":case"RLE":case"LRO":case"RLO":case"PDF":D=!1;break;case"BN":bt="N"}return bt},U=function(O,G,et){var st=O.split("");return et&&V(st,et,{hiLevel:R}),st.reverse(),G&&G.reverse(),st.join("")},V=function(O,G,et){var st,pt,nt,at,ht,bt=-1,St=O.length,K=0,P=[],Y=R?y:m,j=[];for(D=!1,r=!1,s=!1,pt=0;pt<St;pt++)j[pt]=I(O[pt]);for(nt=0;nt<St;nt++){if(ht=K,P[nt]=q(O,j,P,nt),st=240&(K=Y[ht][w[P[nt]]]),K&=15,G[nt]=at=Y[K][5],st>0)if(st===16){for(pt=bt;pt<nt;pt++)G[pt]=1;bt=-1}else bt=-1;if(Y[K][6])bt===-1&&(bt=nt);else if(bt>-1){for(pt=bt;pt<nt;pt++)G[pt]=at;bt=-1}j[nt]==="B"&&(G[nt]=0),et.hiLevel|=at}s&&(function(ut,ft,mt){for(var At=0;At<mt;At++)if(ut[At]==="S"){ft[At]=R;for(var Tt=At-1;Tt>=0&&ut[Tt]==="WS";Tt--)ft[Tt]=R}})(j,G,St)},tt=function(O,G,et,st,pt){if(!(pt.hiLevel<O)){if(O===1&&R===1&&!r)return G.reverse(),void(et&&et.reverse());for(var nt,at,ht,bt,St=G.length,K=0;K<St;){if(st[K]>=O){for(ht=K+1;ht<St&&st[ht]>=O;)ht++;for(bt=K,at=ht-1;bt<at;bt++,at--)nt=G[bt],G[bt]=G[at],G[at]=nt,et&&(nt=et[bt],et[bt]=et[at],et[at]=nt);K=ht}K++}}},J=function(O,G,et){var st=O.split(""),pt={hiLevel:R};return et||(et=[]),V(st,et,pt),(function(nt,at,ht){if(ht.hiLevel!==0&&f)for(var bt,St=0;St<nt.length;St++)at[St]===1&&(bt=T.indexOf(nt[St]))>=0&&(nt[St]=T[bt+1])})(st,et,pt),tt(2,st,G,et,pt),tt(1,st,G,et,pt),st.join("")};return this.__bidiEngine__.doBidiReorder=function(O,G,et){if((function(pt,nt){if(nt)for(var at=0;at<pt.length;at++)nt[at]=at;u===void 0&&(u=F(pt)),h===void 0&&(h=F(pt))})(O,G),a||!c||h)if(a&&c&&u^h)R=u?1:0,O=U(O,G,et);else if(!a&&c&&h)R=u?1:0,O=J(O,G,et),O=U(O,G);else if(!a||u||c||h){if(a&&!c&&u^h)O=U(O,G),u?(R=0,O=J(O,G,et)):(R=1,O=J(O,G,et),O=U(O,G));else if(a&&u&&!c&&h)R=1,O=J(O,G,et),O=U(O,G);else if(!a&&!c&&u^h){var st=f;u?(R=1,O=J(O,G,et),R=0,f=!1,O=J(O,G,et),f=st):(R=0,O=J(O,G,et),O=U(O,G),R=1,f=!1,O=J(O,G,et),f=st,O=U(O,G))}}else R=0,O=J(O,G,et);else R=u?1:0,O=J(O,G,et);return O},this.__bidiEngine__.setOptions=function(O){O&&(a=O.isInputVisual,c=O.isOutputVisual,u=O.isInputRtl,h=O.isOutputRtl,f=O.isSymmetricSwapping)},this.__bidiEngine__.setOptions(n),this.__bidiEngine__};var t=["BN","BN","BN","BN","BN","BN","BN","BN","BN","S","B","S","WS","B","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","B","B","B","S","WS","N","N","ET","ET","ET","N","N","N","N","N","ES","CS","ES","CS","CS","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","CS","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","BN","BN","BN","BN","BN","BN","B","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","CS","N","ET","ET","ET","ET","N","N","N","N","L","N","N","BN","N","N","ET","ET","EN","EN","N","L","N","N","N","EN","L","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","N","N","N","N","N","ET","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","R","NSM","R","NSM","NSM","R","NSM","NSM","R","NSM","N","N","N","N","N","N","N","N","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","N","N","N","N","N","R","R","R","R","R","N","N","N","N","N","N","N","N","N","N","N","AN","AN","AN","AN","AN","AN","N","N","AL","ET","ET","AL","CS","AL","N","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AL","AL","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AN","AN","AN","AN","AN","AN","AN","AN","AN","AN","ET","AN","AN","AL","AL","AL","NSM","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AN","N","NSM","NSM","NSM","NSM","NSM","NSM","AL","AL","NSM","NSM","N","NSM","NSM","NSM","NSM","AL","AL","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","N","AL","AL","NSM","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AL","N","N","N","N","N","N","N","N","N","N","N","N","N","N","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","R","R","N","N","N","N","R","N","N","N","N","N","WS","WS","WS","WS","WS","WS","WS","WS","WS","WS","WS","BN","BN","BN","L","R","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","WS","B","LRE","RLE","PDF","LRO","RLO","CS","ET","ET","ET","ET","ET","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","CS","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","WS","BN","BN","BN","BN","BN","N","LRI","RLI","FSI","PDI","BN","BN","BN","BN","BN","BN","EN","L","N","N","EN","EN","EN","EN","EN","EN","ES","ES","N","N","N","L","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","ES","ES","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","L","L","L","L","L","L","L","N","N","N","N","N","N","N","N","N","N","N","N","L","L","L","L","L","N","N","N","N","N","R","NSM","R","R","R","R","R","R","R","R","R","R","ES","R","R","R","R","R","R","R","R","R","R","R","R","R","N","R","R","R","R","R","N","R","N","R","R","N","R","R","N","R","R","R","R","R","R","R","R","R","R","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","CS","N","CS","N","N","CS","N","N","N","N","N","N","N","N","N","ET","N","N","ES","ES","N","N","N","N","N","ET","ET","N","N","N","N","N","AL","AL","AL","AL","AL","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","N","N","BN","N","N","N","ET","ET","ET","N","N","N","N","N","ES","CS","ES","CS","CS","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","CS","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","N","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","L","L","L","L","L","L","N","N","L","L","L","L","L","L","N","N","L","L","L","L","L","L","N","N","L","L","L","N","N","N","ET","ET","N","N","N","ET","ET","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N"],e=new i.__bidiEngine__({isInputVisual:!0});i.API.events.push(["postProcessText",function(n){var r=n.text,s=(n.x,n.y,n.options||{}),a=(n.mutex,s.lang,[]);if(s.isInputVisual=typeof s.isInputVisual!="boolean"||s.isInputVisual,e.setOptions(s),Object.prototype.toString.call(r)==="[object Array]"){var u=0;for(a=[],u=0;u<r.length;u+=1)Object.prototype.toString.call(r[u])==="[object Array]"?a.push([e.doBidiReorder(r[u][0]),r[u][1],r[u][2]]):a.push([e.doBidiReorder(r[u])]);n.text=a}else n.text=e.doBidiReorder(r);e.setOptions({isInputVisual:!0})}])})(Ie),Ie.API.TTFFont=(function(){function i(t){var e;if(this.rawData=t,e=this.contents=new Rd(t),this.contents.pos=4,e.readString(4)==="ttcf")throw new Error("TTCF not supported.");e.pos=0,this.parse(),this.subset=new QV(this),this.registerTTF()}return i.open=function(t){return new i(t)},i.prototype.parse=function(){return this.directory=new OV(this.contents),this.head=new HV(this),this.name=new YV(this),this.cmap=new uM(this),this.toUnicode={},this.hhea=new qV(this),this.maxp=new $V(this),this.hmtx=new WV(this),this.post=new GV(this),this.os2=new zV(this),this.loca=new KV(this),this.glyf=new XV(this),this.ascender=this.os2.exists&&this.os2.ascender||this.hhea.ascender,this.decender=this.os2.exists&&this.os2.decender||this.hhea.decender,this.lineGap=this.os2.exists&&this.os2.lineGap||this.hhea.lineGap,this.bbox=[this.head.xMin,this.head.yMin,this.head.xMax,this.head.yMax]},i.prototype.registerTTF=function(){var t,e,n,r,s;if(this.scaleFactor=1e3/this.head.unitsPerEm,this.bbox=(function(){var a,u,c,h;for(h=[],a=0,u=(c=this.bbox).length;a<u;a++)t=c[a],h.push(Math.round(t*this.scaleFactor));return h}).call(this),this.stemV=0,this.post.exists?(n=255&(r=this.post.italic_angle),(32768&(e=r>>16))!=0&&(e=-(1+(65535^e))),this.italicAngle=+(e+"."+n)):this.italicAngle=0,this.ascender=Math.round(this.ascender*this.scaleFactor),this.decender=Math.round(this.decender*this.scaleFactor),this.lineGap=Math.round(this.lineGap*this.scaleFactor),this.capHeight=this.os2.exists&&this.os2.capHeight||this.ascender,this.xHeight=this.os2.exists&&this.os2.xHeight||0,this.familyClass=(this.os2.exists&&this.os2.familyClass||0)>>8,this.isSerif=(s=this.familyClass)===1||s===2||s===3||s===4||s===5||s===7,this.isScript=this.familyClass===10,this.flags=0,this.post.isFixedPitch&&(this.flags|=1),this.isSerif&&(this.flags|=2),this.isScript&&(this.flags|=8),this.italicAngle!==0&&(this.flags|=64),this.flags|=32,!this.cmap.unicode)throw new Error("No unicode cmap for font")},i.prototype.characterToGlyph=function(t){var e;return((e=this.cmap.unicode)!=null?e.codeMap[t]:void 0)||0},i.prototype.widthOfGlyph=function(t){var e;return e=1e3/this.head.unitsPerEm,this.hmtx.forGlyph(t).advance*e},i.prototype.widthOfString=function(t,e,n){var r,s,a,u;for(a=0,s=0,u=(t=""+t).length;0<=u?s<u:s>u;s=0<=u?++s:--s)r=t.charCodeAt(s),a+=this.widthOfGlyph(this.characterToGlyph(r))+n*(1e3/e)||0;return a*(e/1e3)},i.prototype.lineHeight=function(t,e){var n;return e==null&&(e=!1),n=e?this.lineGap:0,(this.ascender+n-this.decender)/1e3*t},i})();var Ql,Rd=(function(){function i(t){this.data=t??[],this.pos=0,this.length=this.data.length}return i.prototype.readByte=function(){return this.data[this.pos++]},i.prototype.writeByte=function(t){return this.data[this.pos++]=t},i.prototype.readUInt32=function(){return 16777216*this.readByte()+(this.readByte()<<16)+(this.readByte()<<8)+this.readByte()},i.prototype.writeUInt32=function(t){return this.writeByte(t>>>24&255),this.writeByte(t>>16&255),this.writeByte(t>>8&255),this.writeByte(255&t)},i.prototype.readInt32=function(){var t;return(t=this.readUInt32())>=2147483648?t-4294967296:t},i.prototype.writeInt32=function(t){return t<0&&(t+=4294967296),this.writeUInt32(t)},i.prototype.readUInt16=function(){return this.readByte()<<8|this.readByte()},i.prototype.writeUInt16=function(t){return this.writeByte(t>>8&255),this.writeByte(255&t)},i.prototype.readInt16=function(){var t;return(t=this.readUInt16())>=32768?t-65536:t},i.prototype.writeInt16=function(t){return t<0&&(t+=65536),this.writeUInt16(t)},i.prototype.readString=function(t){var e,n;for(n=[],e=0;0<=t?e<t:e>t;e=0<=t?++e:--e)n[e]=String.fromCharCode(this.readByte());return n.join("")},i.prototype.writeString=function(t){var e,n,r;for(r=[],e=0,n=t.length;0<=n?e<n:e>n;e=0<=n?++e:--e)r.push(this.writeByte(t.charCodeAt(e)));return r},i.prototype.readShort=function(){return this.readInt16()},i.prototype.writeShort=function(t){return this.writeInt16(t)},i.prototype.readLongLong=function(){var t,e,n,r,s,a,u,c;return t=this.readByte(),e=this.readByte(),n=this.readByte(),r=this.readByte(),s=this.readByte(),a=this.readByte(),u=this.readByte(),c=this.readByte(),128&t?-1*(72057594037927940*(255^t)+281474976710656*(255^e)+1099511627776*(255^n)+4294967296*(255^r)+16777216*(255^s)+65536*(255^a)+256*(255^u)+(255^c)+1):72057594037927940*t+281474976710656*e+1099511627776*n+4294967296*r+16777216*s+65536*a+256*u+c},i.prototype.writeLongLong=function(t){var e,n;return e=Math.floor(t/4294967296),n=4294967295&t,this.writeByte(e>>24&255),this.writeByte(e>>16&255),this.writeByte(e>>8&255),this.writeByte(255&e),this.writeByte(n>>24&255),this.writeByte(n>>16&255),this.writeByte(n>>8&255),this.writeByte(255&n)},i.prototype.readInt=function(){return this.readInt32()},i.prototype.writeInt=function(t){return this.writeInt32(t)},i.prototype.read=function(t){var e,n;for(e=[],n=0;0<=t?n<t:n>t;n=0<=t?++n:--n)e.push(this.readByte());return e},i.prototype.write=function(t){var e,n,r,s;for(s=[],n=0,r=t.length;n<r;n++)e=t[n],s.push(this.writeByte(e));return s},i})(),OV=(function(){var i;function t(e){var n,r,s;for(this.scalarType=e.readInt(),this.tableCount=e.readShort(),this.searchRange=e.readShort(),this.entrySelector=e.readShort(),this.rangeShift=e.readShort(),this.tables={},r=0,s=this.tableCount;0<=s?r<s:r>s;r=0<=s?++r:--r)n={tag:e.readString(4),checksum:e.readInt(),offset:e.readInt(),length:e.readInt()},this.tables[n.tag]=n}return t.prototype.encode=function(e){var n,r,s,a,u,c,h,f,g,m,y,w,S;for(S in y=Object.keys(e).length,c=Math.log(2),g=16*Math.floor(Math.log(y)/c),a=Math.floor(g/c),f=16*y-g,(r=new Rd).writeInt(this.scalarType),r.writeShort(y),r.writeShort(g),r.writeShort(a),r.writeShort(f),s=16*y,h=r.pos+s,u=null,w=[],e)for(m=e[S],r.writeString(S),r.writeInt(i(m)),r.writeInt(h),r.writeInt(m.length),w=w.concat(m),S==="head"&&(u=h),h+=m.length;h%4;)w.push(0),h++;return r.write(w),n=2981146554-i(r.data),r.pos=u+8,r.writeUInt32(n),r.data},i=function(e){var n,r,s,a;for(e=cM.call(e);e.length%4;)e.push(0);for(s=new Rd(e),r=0,n=0,a=e.length;n<a;n=n+=4)r+=s.readUInt32();return 4294967295&r},t})(),UV={}.hasOwnProperty,uc=function(i,t){for(var e in t)UV.call(t,e)&&(i[e]=t[e]);function n(){this.constructor=i}return n.prototype=t.prototype,i.prototype=new n,i.__super__=t.prototype,i};Ql=(function(){function i(t){var e;this.file=t,e=this.file.directory.tables[this.tag],this.exists=!!e,e&&(this.offset=e.offset,this.length=e.length,this.parse(this.file.contents))}return i.prototype.parse=function(){},i.prototype.encode=function(){},i.prototype.raw=function(){return this.exists?(this.file.contents.pos=this.offset,this.file.contents.read(this.length)):null},i})();var HV=(function(i){function t(){return t.__super__.constructor.apply(this,arguments)}return uc(t,Ql),t.prototype.tag="head",t.prototype.parse=function(e){return e.pos=this.offset,this.version=e.readInt(),this.revision=e.readInt(),this.checkSumAdjustment=e.readInt(),this.magicNumber=e.readInt(),this.flags=e.readShort(),this.unitsPerEm=e.readShort(),this.created=e.readLongLong(),this.modified=e.readLongLong(),this.xMin=e.readShort(),this.yMin=e.readShort(),this.xMax=e.readShort(),this.yMax=e.readShort(),this.macStyle=e.readShort(),this.lowestRecPPEM=e.readShort(),this.fontDirectionHint=e.readShort(),this.indexToLocFormat=e.readShort(),this.glyphDataFormat=e.readShort()},t.prototype.encode=function(e){var n;return(n=new Rd).writeInt(this.version),n.writeInt(this.revision),n.writeInt(this.checkSumAdjustment),n.writeInt(this.magicNumber),n.writeShort(this.flags),n.writeShort(this.unitsPerEm),n.writeLongLong(this.created),n.writeLongLong(this.modified),n.writeShort(this.xMin),n.writeShort(this.yMin),n.writeShort(this.xMax),n.writeShort(this.yMax),n.writeShort(this.macStyle),n.writeShort(this.lowestRecPPEM),n.writeShort(this.fontDirectionHint),n.writeShort(e),n.writeShort(this.glyphDataFormat),n.data},t})(),fN=(function(){function i(t,e){var n,r,s,a,u,c,h,f,g,m,y,w,S,T,C,D,R;switch(this.platformID=t.readUInt16(),this.encodingID=t.readShort(),this.offset=e+t.readInt(),g=t.pos,t.pos=this.offset,this.format=t.readUInt16(),this.length=t.readUInt16(),this.language=t.readUInt16(),this.isUnicode=this.platformID===3&&this.encodingID===1&&this.format===4||this.platformID===0&&this.format===4,this.codeMap={},this.format){case 0:for(c=0;c<256;++c)this.codeMap[c]=t.readByte();break;case 4:for(y=t.readUInt16(),m=y/2,t.pos+=6,s=(function(){var I,F;for(F=[],c=I=0;0<=m?I<m:I>m;c=0<=m?++I:--I)F.push(t.readUInt16());return F})(),t.pos+=2,S=(function(){var I,F;for(F=[],c=I=0;0<=m?I<m:I>m;c=0<=m?++I:--I)F.push(t.readUInt16());return F})(),h=(function(){var I,F;for(F=[],c=I=0;0<=m?I<m:I>m;c=0<=m?++I:--I)F.push(t.readUInt16());return F})(),f=(function(){var I,F;for(F=[],c=I=0;0<=m?I<m:I>m;c=0<=m?++I:--I)F.push(t.readUInt16());return F})(),r=(this.length-t.pos+this.offset)/2,u=(function(){var I,F;for(F=[],c=I=0;0<=r?I<r:I>r;c=0<=r?++I:--I)F.push(t.readUInt16());return F})(),c=C=0,R=s.length;C<R;c=++C)for(T=s[c],n=D=w=S[c];w<=T?D<=T:D>=T;n=w<=T?++D:--D)f[c]===0?a=n+h[c]:(a=u[f[c]/2+(n-w)-(m-c)]||0)!==0&&(a+=h[c]),this.codeMap[n]=65535&a}t.pos=g}return i.encode=function(t,e){var n,r,s,a,u,c,h,f,g,m,y,w,S,T,C,D,R,I,F,q,U,V,tt,J,O,G,et,st,pt,nt,at,ht,bt,St,K,P,Y,j,ut,ft,mt,At,Tt,Xt,$t,ee;switch(st=new Rd,a=Object.keys(t).sort((function(Qt,le){return Qt-le})),e){case"macroman":for(S=0,T=(function(){var Qt=[];for(w=0;w<256;++w)Qt.push(0);return Qt})(),D={0:0},s={},pt=0,bt=a.length;pt<bt;pt++)D[Tt=t[r=a[pt]]]==null&&(D[Tt]=++S),s[r]={old:t[r],new:D[t[r]]},T[r]=D[t[r]];return st.writeUInt16(1),st.writeUInt16(0),st.writeUInt32(12),st.writeUInt16(0),st.writeUInt16(262),st.writeUInt16(0),st.write(T),{charMap:s,subtable:st.data,maxGlyphID:S+1};case"unicode":for(G=[],g=[],R=0,D={},n={},C=h=null,nt=0,St=a.length;nt<St;nt++)D[F=t[r=a[nt]]]==null&&(D[F]=++R),n[r]={old:F,new:D[F]},u=D[F]-r,C!=null&&u===h||(C&&g.push(C),G.push(r),h=u),C=r;for(C&&g.push(C),g.push(65535),G.push(65535),J=2*(tt=G.length),V=2*Math.pow(Math.log(tt)/Math.LN2,2),m=Math.log(V/2)/Math.LN2,U=2*tt-V,c=[],q=[],y=[],w=at=0,K=G.length;at<K;w=++at){if(O=G[w],f=g[w],O===65535){c.push(0),q.push(0);break}if(O-(et=n[O].new)>=32768)for(c.push(0),q.push(2*(y.length+tt-w)),r=ht=O;O<=f?ht<=f:ht>=f;r=O<=f?++ht:--ht)y.push(n[r].new);else c.push(et-O),q.push(0)}for(st.writeUInt16(3),st.writeUInt16(1),st.writeUInt32(12),st.writeUInt16(4),st.writeUInt16(16+8*tt+2*y.length),st.writeUInt16(0),st.writeUInt16(J),st.writeUInt16(V),st.writeUInt16(m),st.writeUInt16(U),mt=0,P=g.length;mt<P;mt++)r=g[mt],st.writeUInt16(r);for(st.writeUInt16(0),At=0,Y=G.length;At<Y;At++)r=G[At],st.writeUInt16(r);for(Xt=0,j=c.length;Xt<j;Xt++)u=c[Xt],st.writeUInt16(u);for($t=0,ut=q.length;$t<ut;$t++)I=q[$t],st.writeUInt16(I);for(ee=0,ft=y.length;ee<ft;ee++)S=y[ee],st.writeUInt16(S);return{charMap:n,subtable:st.data,maxGlyphID:R+1}}},i})(),uM=(function(i){function t(){return t.__super__.constructor.apply(this,arguments)}return uc(t,Ql),t.prototype.tag="cmap",t.prototype.parse=function(e){var n,r,s;for(e.pos=this.offset,this.version=e.readUInt16(),s=e.readUInt16(),this.tables=[],this.unicode=null,r=0;0<=s?r<s:r>s;r=0<=s?++r:--r)n=new fN(e,this.offset),this.tables.push(n),n.isUnicode&&this.unicode==null&&(this.unicode=n);return!0},t.encode=function(e,n){var r,s;return n==null&&(n="macroman"),r=fN.encode(e,n),(s=new Rd).writeUInt16(0),s.writeUInt16(1),r.table=s.data.concat(r.subtable),r},t})(),qV=(function(i){function t(){return t.__super__.constructor.apply(this,arguments)}return uc(t,Ql),t.prototype.tag="hhea",t.prototype.parse=function(e){return e.pos=this.offset,this.version=e.readInt(),this.ascender=e.readShort(),this.decender=e.readShort(),this.lineGap=e.readShort(),this.advanceWidthMax=e.readShort(),this.minLeftSideBearing=e.readShort(),this.minRightSideBearing=e.readShort(),this.xMaxExtent=e.readShort(),this.caretSlopeRise=e.readShort(),this.caretSlopeRun=e.readShort(),this.caretOffset=e.readShort(),e.pos+=8,this.metricDataFormat=e.readShort(),this.numberOfMetrics=e.readUInt16()},t})(),zV=(function(i){function t(){return t.__super__.constructor.apply(this,arguments)}return uc(t,Ql),t.prototype.tag="OS/2",t.prototype.parse=function(e){if(e.pos=this.offset,this.version=e.readUInt16(),this.averageCharWidth=e.readShort(),this.weightClass=e.readUInt16(),this.widthClass=e.readUInt16(),this.type=e.readShort(),this.ySubscriptXSize=e.readShort(),this.ySubscriptYSize=e.readShort(),this.ySubscriptXOffset=e.readShort(),this.ySubscriptYOffset=e.readShort(),this.ySuperscriptXSize=e.readShort(),this.ySuperscriptYSize=e.readShort(),this.ySuperscriptXOffset=e.readShort(),this.ySuperscriptYOffset=e.readShort(),this.yStrikeoutSize=e.readShort(),this.yStrikeoutPosition=e.readShort(),this.familyClass=e.readShort(),this.panose=(function(){var n,r;for(r=[],n=0;n<10;++n)r.push(e.readByte());return r})(),this.charRange=(function(){var n,r;for(r=[],n=0;n<4;++n)r.push(e.readInt());return r})(),this.vendorID=e.readString(4),this.selection=e.readShort(),this.firstCharIndex=e.readShort(),this.lastCharIndex=e.readShort(),this.version>0&&(this.ascent=e.readShort(),this.descent=e.readShort(),this.lineGap=e.readShort(),this.winAscent=e.readShort(),this.winDescent=e.readShort(),this.codePageRange=(function(){var n,r;for(r=[],n=0;n<2;n=++n)r.push(e.readInt());return r})(),this.version>1))return this.xHeight=e.readShort(),this.capHeight=e.readShort(),this.defaultChar=e.readShort(),this.breakChar=e.readShort(),this.maxContext=e.readShort()},t})(),GV=(function(i){function t(){return t.__super__.constructor.apply(this,arguments)}return uc(t,Ql),t.prototype.tag="post",t.prototype.parse=function(e){var n,r,s;switch(e.pos=this.offset,this.format=e.readInt(),this.italicAngle=e.readInt(),this.underlinePosition=e.readShort(),this.underlineThickness=e.readShort(),this.isFixedPitch=e.readInt(),this.minMemType42=e.readInt(),this.maxMemType42=e.readInt(),this.minMemType1=e.readInt(),this.maxMemType1=e.readInt(),this.format){case 65536:break;case 131072:var a;for(r=e.readUInt16(),this.glyphNameIndex=[],a=0;0<=r?a<r:a>r;a=0<=r?++a:--a)this.glyphNameIndex.push(e.readUInt16());for(this.names=[],s=[];e.pos<this.offset+this.length;)n=e.readByte(),s.push(this.names.push(e.readString(n)));return s;case 151552:return r=e.readUInt16(),this.offsets=e.read(r);case 196608:break;case 262144:return this.map=(function(){var u,c,h;for(h=[],a=u=0,c=this.file.maxp.numGlyphs;0<=c?u<c:u>c;a=0<=c?++u:--u)h.push(e.readUInt32());return h}).call(this)}},t})(),VV=function(i,t){this.raw=i,this.length=i.length,this.platformID=t.platformID,this.encodingID=t.encodingID,this.languageID=t.languageID},YV=(function(i){function t(){return t.__super__.constructor.apply(this,arguments)}return uc(t,Ql),t.prototype.tag="name",t.prototype.parse=function(e){var n,r,s,a,u,c,h,f,g,m,y;for(e.pos=this.offset,e.readShort(),n=e.readShort(),c=e.readShort(),r=[],a=0;0<=n?a<n:a>n;a=0<=n?++a:--a)r.push({platformID:e.readShort(),encodingID:e.readShort(),languageID:e.readShort(),nameID:e.readShort(),length:e.readShort(),offset:this.offset+c+e.readShort()});for(h={},a=g=0,m=r.length;g<m;a=++g)s=r[a],e.pos=s.offset,f=e.readString(s.length),u=new VV(f,s),h[y=s.nameID]==null&&(h[y]=[]),h[s.nameID].push(u);this.strings=h,this.copyright=h[0],this.fontFamily=h[1],this.fontSubfamily=h[2],this.uniqueSubfamily=h[3],this.fontName=h[4],this.version=h[5];try{this.postscriptName=h[6][0].raw.replace(/[\x00-\x19\x80-\xff]/g,"")}catch{this.postscriptName=h[4][0].raw.replace(/[\x00-\x19\x80-\xff]/g,"")}return this.trademark=h[7],this.manufacturer=h[8],this.designer=h[9],this.description=h[10],this.vendorUrl=h[11],this.designerUrl=h[12],this.license=h[13],this.licenseUrl=h[14],this.preferredFamily=h[15],this.preferredSubfamily=h[17],this.compatibleFull=h[18],this.sampleText=h[19]},t})(),$V=(function(i){function t(){return t.__super__.constructor.apply(this,arguments)}return uc(t,Ql),t.prototype.tag="maxp",t.prototype.parse=function(e){return e.pos=this.offset,this.version=e.readInt(),this.numGlyphs=e.readUInt16(),this.maxPoints=e.readUInt16(),this.maxContours=e.readUInt16(),this.maxCompositePoints=e.readUInt16(),this.maxComponentContours=e.readUInt16(),this.maxZones=e.readUInt16(),this.maxTwilightPoints=e.readUInt16(),this.maxStorage=e.readUInt16(),this.maxFunctionDefs=e.readUInt16(),this.maxInstructionDefs=e.readUInt16(),this.maxStackElements=e.readUInt16(),this.maxSizeOfInstructions=e.readUInt16(),this.maxComponentElements=e.readUInt16(),this.maxComponentDepth=e.readUInt16()},t})(),WV=(function(i){function t(){return t.__super__.constructor.apply(this,arguments)}return uc(t,Ql),t.prototype.tag="hmtx",t.prototype.parse=function(e){var n,r,s,a,u,c,h;for(e.pos=this.offset,this.metrics=[],n=0,c=this.file.hhea.numberOfMetrics;0<=c?n<c:n>c;n=0<=c?++n:--n)this.metrics.push({advance:e.readUInt16(),lsb:e.readInt16()});for(s=this.file.maxp.numGlyphs-this.file.hhea.numberOfMetrics,this.leftSideBearings=(function(){var f,g;for(g=[],n=f=0;0<=s?f<s:f>s;n=0<=s?++f:--f)g.push(e.readInt16());return g})(),this.widths=(function(){var f,g,m,y;for(y=[],f=0,g=(m=this.metrics).length;f<g;f++)a=m[f],y.push(a.advance);return y}).call(this),r=this.widths[this.widths.length-1],h=[],n=u=0;0<=s?u<s:u>s;n=0<=s?++u:--u)h.push(this.widths.push(r));return h},t.prototype.forGlyph=function(e){return e in this.metrics?this.metrics[e]:{advance:this.metrics[this.metrics.length-1].advance,lsb:this.leftSideBearings[e-this.metrics.length]}},t})(),cM=[].slice,XV=(function(i){function t(){return t.__super__.constructor.apply(this,arguments)}return uc(t,Ql),t.prototype.tag="glyf",t.prototype.parse=function(){return this.cache={}},t.prototype.glyphFor=function(e){var n,r,s,a,u,c,h,f,g,m;return e in this.cache?this.cache[e]:(a=this.file.loca,n=this.file.contents,r=a.indexOf(e),(s=a.lengthOf(e))===0?this.cache[e]=null:(n.pos=this.offset+r,u=(c=new Rd(n.read(s))).readShort(),f=c.readShort(),m=c.readShort(),h=c.readShort(),g=c.readShort(),this.cache[e]=u===-1?new JV(c,f,m,h,g):new jV(c,u,f,m,h,g),this.cache[e]))},t.prototype.encode=function(e,n,r){var s,a,u,c,h;for(u=[],a=[],c=0,h=n.length;c<h;c++)s=e[n[c]],a.push(u.length),s&&(u=u.concat(s.encode(r)));return a.push(u.length),{table:u,offsets:a}},t})(),jV=(function(){function i(t,e,n,r,s,a){this.raw=t,this.numberOfContours=e,this.xMin=n,this.yMin=r,this.xMax=s,this.yMax=a,this.compound=!1}return i.prototype.encode=function(){return this.raw.data},i})(),JV=(function(){function i(t,e,n,r,s){var a,u;for(this.raw=t,this.xMin=e,this.yMin=n,this.xMax=r,this.yMax=s,this.compound=!0,this.glyphIDs=[],this.glyphOffsets=[],a=this.raw;u=a.readShort(),this.glyphOffsets.push(a.pos),this.glyphIDs.push(a.readUInt16()),32&u;)a.pos+=1&u?4:2,128&u?a.pos+=8:64&u?a.pos+=4:8&u&&(a.pos+=2)}return i.prototype.encode=function(){var t,e,n;for(e=new Rd(cM.call(this.raw.data)),t=0,n=this.glyphIDs.length;t<n;++t)e.pos=this.glyphOffsets[t];return e.data},i})(),KV=(function(i){function t(){return t.__super__.constructor.apply(this,arguments)}return uc(t,Ql),t.prototype.tag="loca",t.prototype.parse=function(e){var n,r;return e.pos=this.offset,n=this.file.head.indexToLocFormat,this.offsets=n===0?(function(){var s,a;for(a=[],r=0,s=this.length;r<s;r+=2)a.push(2*e.readUInt16());return a}).call(this):(function(){var s,a;for(a=[],r=0,s=this.length;r<s;r+=4)a.push(e.readUInt32());return a}).call(this)},t.prototype.indexOf=function(e){return this.offsets[e]},t.prototype.lengthOf=function(e){return this.offsets[e+1]-this.offsets[e]},t.prototype.encode=function(e,n){for(var r=new Uint32Array(this.offsets.length),s=0,a=0,u=0;u<r.length;++u)if(r[u]=s,a<n.length&&n[a]==u){++a,r[u]=s;var c=this.offsets[u],h=this.offsets[u+1]-c;h>0&&(s+=h)}for(var f=new Array(4*r.length),g=0;g<r.length;++g)f[4*g+3]=255&r[g],f[4*g+2]=(65280&r[g])>>8,f[4*g+1]=(16711680&r[g])>>16,f[4*g]=(4278190080&r[g])>>24;return f},t})(),QV=(function(){function i(t){this.font=t,this.subset={},this.unicodes={},this.next=33}return i.prototype.generateCmap=function(){var t,e,n,r,s;for(e in r=this.font.cmap.tables[0].codeMap,t={},s=this.subset)n=s[e],t[e]=r[n];return t},i.prototype.glyphsFor=function(t){var e,n,r,s,a,u,c;for(r={},a=0,u=t.length;a<u;a++)r[s=t[a]]=this.font.glyf.glyphFor(s);for(s in e=[],r)(n=r[s])!=null&&n.compound&&e.push.apply(e,n.glyphIDs);if(e.length>0)for(s in c=this.glyphsFor(e))n=c[s],r[s]=n;return r},i.prototype.encode=function(t,e){var n,r,s,a,u,c,h,f,g,m,y,w,S,T,C;for(r in n=uM.encode(this.generateCmap(),"unicode"),a=this.glyphsFor(t),y={0:0},C=n.charMap)y[(c=C[r]).old]=c.new;for(w in m=n.maxGlyphID,a)w in y||(y[w]=m++);return f=(function(D){var R,I;for(R in I={},D)I[D[R]]=R;return I})(y),g=Object.keys(f).sort((function(D,R){return D-R})),S=(function(){var D,R,I;for(I=[],D=0,R=g.length;D<R;D++)u=g[D],I.push(f[u]);return I})(),s=this.font.glyf.encode(a,S,y),h=this.font.loca.encode(s.offsets,S),T={cmap:this.font.cmap.raw(),glyf:s.table,loca:h,hmtx:this.font.hmtx.raw(),hhea:this.font.hhea.raw(),maxp:this.font.maxp.raw(),post:this.font.post.raw(),name:this.font.name.raw(),head:this.font.head.encode(e)},this.font.os2.exists&&(T["OS/2"]=this.font.os2.raw()),this.font.directory.encode(T)},i})();Ie.API.PDFObject=(function(){var i;function t(){}return i=function(e,n){return(Array(n+1).join("0")+e).slice(-n)},t.convert=function(e){var n,r,s,a;if(Array.isArray(e))return"["+(function(){var u,c,h;for(h=[],u=0,c=e.length;u<c;u++)n=e[u],h.push(t.convert(n));return h})().join(" ")+"]";if(typeof e=="string")return"/"+e;if(e!=null&&e.isString)return"("+e+")";if(e instanceof Date)return"(D:"+i(e.getUTCFullYear(),4)+i(e.getUTCMonth(),2)+i(e.getUTCDate(),2)+i(e.getUTCHours(),2)+i(e.getUTCMinutes(),2)+i(e.getUTCSeconds(),2)+"Z)";if({}.toString.call(e)==="[object Object]"){for(r in s=["<<"],e)a=e[r],s.push("/"+r+" "+t.convert(a));return s.push(">>"),s.join(`
`)}return""+e},t})();const Bg=(i,t,e,n,r)=>{if(!t)return 0;const s=i.splitTextToSize(t,r);return i.text(s,e,n),s.length*(i.getLineHeight()/i.internal.scaleFactor)},ZV=i=>new Promise(t=>{const e=new Ie({orientation:"p",unit:"mm",format:"a4"});let n=20;const r=15,s=15,a=e.internal.pageSize.getWidth()-r-s,u=()=>{n>270&&(e.addPage(),n=20)};e.setFont("helvetica","bold"),e.setFontSize(20),e.text("PolicyPulse Analysis Report",e.internal.pageSize.getWidth()/2,n,{align:"center"}),n+=10,e.setFont("helvetica","normal"),e.setFontSize(11),e.text(`Source: ${i.source.value}`,e.internal.pageSize.getWidth()/2,n,{align:"center"}),n+=5,e.text(`Analyzed on: ${new Date(i.created_at).toLocaleDateString()}`,e.internal.pageSize.getWidth()/2,n,{align:"center"}),n+=12,e.setDrawColor(200,200,200),e.line(r,n,e.internal.pageSize.getWidth()-s,n),n+=10,e.setFont("helvetica","bold"),e.setFontSize(14),e.text("Overall Privacy Score",r,n),e.setFontSize(24),e.text(`${i.score}/100`,e.internal.pageSize.getWidth()-s,n,{align:"right"}),n+=7,e.setFont("helvetica","italic"),e.setFontSize(10),n+=Bg(e,i.score_rationale,r,n,a),n+=10,u(),e.setFont("helvetica","bold"),e.setFontSize(14),e.text("Summary (TL;DR)",r,n),n+=7,e.setFont("helvetica","normal"),e.setFontSize(11),n+=Bg(e,i.tldr,r,n,a),n+=12,u(),i.risks.length>0&&(e.setFont("helvetica","bold"),e.setFontSize(16),e.text(`Identified Risks (${i.risks.length})`,r,n),n+=8,i.risks.forEach((h,f)=>{u(),e.setFont("helvetica","bold"),e.setFontSize(12),e.text(` ${h.risk_label} (${h.severity.toUpperCase()} RISK)`,r+5,n),n+=6,e.setFont("helvetica","italic"),e.setFontSize(10),e.setTextColor(100,100,100),n+=Bg(e,`"${h.excerpt}"`,r+8,n,a-8),n+=5,e.setFont("helvetica","normal"),e.setTextColor(0,0,0),n+=Bg(e,`Suggested Action: ${h.suggested_action}`,r+8,n,a-8),n+=10})),u(),e.setFont("helvetica","bold"),e.setFontSize(16),e.text("Recommended Actions",r,n),n+=8,i.actions.forEach(h=>{u(),e.setFont("helvetica","bold"),e.setFontSize(12),n+=Bg(e,` ${h.title}`,r+5,n,a-5),n+=4,e.setFont("helvetica","normal"),e.setFontSize(11),n+=Bg(e,h.description,r+8,n,a-8),n+=8});const c=e.internal.getNumberOfPages();for(let h=1;h<=c;h++)e.setPage(h),e.setFontSize(9),e.setTextColor(150,150,150),e.text(`Page ${h} of ${c} | PolicyPulse Report`,e.internal.pageSize.getWidth()/2,287,{align:"center"}),e.text("Disclaimer: This is an AI-generated analysis and not legal advice.",e.internal.pageSize.getWidth()/2,292,{align:"center"});e.save(`PolicyPulse_Report_${i.source.value.replace(/[^a-zA-Z0-9]/g,"_")}.pdf`),t()}),tY=i=>Pt.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",...i,children:[Pt.jsx("path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"}),Pt.jsx("polyline",{points:"7 10 12 15 17 10"}),Pt.jsx("line",{x1:"12",y1:"15",x2:"12",y2:"3"})]}),eY=i=>Pt.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",...i,children:[Pt.jsx("rect",{width:"20",height:"16",x:"2",y:"4",rx:"2"}),Pt.jsx("path",{d:"m22 7-8.97 5.7a1.94 1.94 0 0 1-2.06 0L2 7"})]}),nY=()=>{const i=kh(),{report:t}=i.state||{},[e,n]=Ut.useState(!1),r=async()=>{if(t){n(!0);try{await ZV(t)}catch{alert("Export failed.")}finally{n(!1)}}};if(!t)return Pt.jsxs("div",{className:"text-center py-32 px-6",children:[Pt.jsx("h2",{className:"text-3xl font-bold text-neutral-900",children:"Session expired"}),Pt.jsx(F1,{to:"/",className:"mt-8 inline-block bg-neutral-900 text-white px-8 py-4 rounded-full text-sm font-semibold",children:"New analysis"})]});const{contact_info:s}=t,a=s&&(s.support_email||s.cancellation_link);return Pt.jsxs("div",{className:"max-w-3xl mx-auto px-4 pb-20 space-y-12",children:[Pt.jsxs("div",{className:"bg-white border border-neutral-200 rounded-3xl p-6",children:[Pt.jsxs("div",{className:"flex flex-col md:flex-row items-start md:items-center justify-between gap-6 border-b border-neutral-100 pb-6",children:[Pt.jsxs("div",{children:[Pt.jsx("p",{className:"text-xs text-neutral-500 mb-1",children:"Audit completed"}),Pt.jsx("h1",{className:"text-2xl font-semibold text-neutral-900 truncate max-w-xl",children:t.source.value}),Pt.jsx("p",{className:"text-xs text-neutral-400 mt-1",children:new Date(t.created_at).toLocaleDateString()})]}),Pt.jsx(KG,{score:t.score})]}),Pt.jsxs("div",{className:"mt-6",children:[Pt.jsx("h2",{className:"text-xs font-semibold text-neutral-500 uppercase mb-2",children:"Summary"}),Pt.jsxs("div",{className:"bg-neutral-50 border border-neutral-200 rounded-2xl p-4",children:[Pt.jsx("p",{className:"text-base font-medium text-neutral-900 leading-relaxed",children:t.tldr}),Pt.jsxs("p",{className:"mt-3 text-xs text-neutral-500",children:[Pt.jsx("span",{className:"font-semibold",children:"Why:"})," ",t.score_rationale]})]})]}),Pt.jsxs("div",{className:"mt-8 border-t border-neutral-100 pt-6",children:[Pt.jsx("h2",{className:"text-xs font-semibold text-neutral-500 uppercase mb-4",children:"Findings"}),t.risks.length>0?Pt.jsx("div",{className:"space-y-4",children:t.risks.map(u=>Pt.jsx(QG,{risk:u},u.risk_id))}):Pt.jsxs("div",{className:"bg-neutral-50 border border-neutral-200 rounded-2xl p-6 text-center",children:[Pt.jsx("p",{className:"font-semibold text-neutral-900",children:"No major concerns found"}),Pt.jsx("p",{className:"text-sm text-neutral-600 mt-1",children:"This policy appears user-friendly."})]})]}),Pt.jsxs("div",{className:"mt-8 border-t border-neutral-100 pt-6",children:[Pt.jsx("h2",{className:"text-xs font-semibold text-neutral-500 uppercase mb-4",children:"Recommendations"}),Pt.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:t.actions.map((u,c)=>Pt.jsx(ZG,{title:u.title,description:u.description},c))})]}),a&&Pt.jsxs("div",{className:"mt-8 border-t border-neutral-100 pt-6",children:[Pt.jsx("h2",{className:"text-xs font-semibold text-neutral-500 uppercase mb-4",children:"Support"}),Pt.jsxs("div",{className:"flex flex-wrap gap-3",children:[s.support_email&&Pt.jsxs("a",{href:`mailto:${s.support_email}`,className:"flex items-center gap-2 border border-neutral-200 px-4 py-2 rounded-xl text-sm hover:border-neutral-400",children:[Pt.jsx(eY,{className:"w-4 h-4"}),s.support_email]}),s.cancellation_link&&Pt.jsxs("a",{href:s.cancellation_link,target:"_blank",rel:"noopener noreferrer",className:"flex items-center gap-2 border border-neutral-200 px-4 py-2 rounded-xl text-sm hover:border-neutral-400",children:[Pt.jsx(FN,{className:"w-4 h-4"}),"Account page"]})]})]})]}),Pt.jsxs("div",{className:"flex flex-col sm:flex-row gap-4 justify-center",children:[Pt.jsxs("button",{onClick:r,disabled:e,className:"px-6 py-3 border border-neutral-200 rounded-full text-sm font-medium flex items-center gap-2 hover:bg-neutral-50",children:[Pt.jsx(tY,{className:"w-4 h-4"}),e?"Exporting":"Save PDF"]}),Pt.jsx(F1,{to:"/",className:"px-8 py-3 bg-neutral-900 text-white rounded-full text-sm font-medium text-center",children:"New audit"})]})]})},iY=()=>Pt.jsxs("div",{className:"flex flex-col min-h-screen font-sans text-neutral-900 bg-transparent",children:[Pt.jsx(ck,{}),Pt.jsx("main",{className:"flex-grow container mx-auto px-4 pt-28 pb-12",children:Pt.jsxs(DP,{children:[Pt.jsx(y5,{path:"/",element:Pt.jsx(jG,{})}),Pt.jsx(y5,{path:"/loading",element:Pt.jsx(JG,{})}),Pt.jsx(y5,{path:"/report",element:Pt.jsx(nY,{})})]})}),Pt.jsx(hk,{})]}),rY=Ut.createContext(void 0),sY=({children:i})=>{const[t,e]=Ut.useState(()=>typeof window<"u"?localStorage.getItem("theme")||(window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light"):"light");return Ut.useEffect(()=>{const n=window.document.documentElement;t==="dark"?n.classList.add("dark"):n.classList.remove("dark"),localStorage.setItem("theme",t)},[t]),Pt.jsx(rY.Provider,{value:{theme:t,setTheme:e},children:i})},hM=document.getElementById("root");if(!hM)throw new Error("Could not find root element to mount to");const oY=II.createRoot(hM);oY.render(Pt.jsx(EI.StrictMode,{children:Pt.jsx(sY,{children:Pt.jsx(tk,{children:Pt.jsx(iY,{})})})}));export{Gn as _,aw as c,qE as g};
